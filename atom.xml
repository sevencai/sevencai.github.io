<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Seven&#39;s Blog</title>
  <subtitle>Share, Learn, Enjoy, Keep</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://sevencai.github.io/"/>
  <updated>2018-07-12T12:22:55.000Z</updated>
  <id>http://sevencai.github.io/</id>
  
  <author>
    <name>Seven Cai</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Ajax è¯·æ±‚åå°æ¥å£ã€ä¸‹è½½æ–‡ä»¶ã€‘æ–¹æ³•</title>
    <link href="http://sevencai.github.io/2018/07/11/Ajax-%E8%AF%B7%E6%B1%82%E5%90%8E%E5%8F%B0%E6%8E%A5%E5%8F%A3%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E6%96%B9%E6%B3%95/"/>
    <id>http://sevencai.github.io/2018/07/11/Ajax-è¯·æ±‚åå°æ¥å£ä¸‹è½½æ–‡ä»¶æ–¹æ³•/</id>
    <published>2018-07-11T14:03:14.000Z</published>
    <updated>2018-07-12T12:22:55.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>ä½ çš„ç®¡ç†å°æœ‰ä¸€ä¸ªåŠŸèƒ½æ˜¯ç‚¹å‡»<strong>[æŸ¥çœ‹æ–‡ä»¶]</strong>ï¼Œä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°çš„åŠŸèƒ½ã€‚ä½ å¯èƒ½è‡ªç„¶çš„å‘åå°æ¥å£ï¼ˆå¯èƒ½æ˜¯ Nodejs çš„ä¸€ä¸ª Restful Apiï¼‰è¯·æ±‚ä¸‹è½½ã€‚ä½†æ˜¯ä½ å‘ç°ä½ åå°çš„ Nodejs è™½ç„¶è®¾ç½®äº†æ­£ç¡®çš„å“åº”å¤´ï¼ˆContent-position, Content-typeï¼‰å´è¿˜æ˜¯æ²¡æœ‰å¼¹å‡ºä¿å­˜æ–‡ä»¶çš„æ¡†ã€‚</p>
</blockquote>
<p>åŸå› æ˜¯æœªç»è¿‡å¤„ç†çš„ ajaxï¼ˆå¦‚jquery ajaxè¯·æ±‚ï¼‰ è¯·æ±‚ä¸èƒ½å¤„ç†æ­£ç¡®çš„äºŒè¿›åˆ¶ï¼ˆæµï¼‰ç±»å‹çš„æ–‡ä»¶ã€‚</p>
<p>ä¸‹é¢æˆ‘æ€»ç»“äº†å‡ ç§æ–¹å¼å¯ä»¥è§£å†³æ­¤é—®é¢˜-&gt; ğŸ“šğŸŒ²</p>
<hr>
<h2 id="åˆ©ç”¨iframe"><a href="#åˆ©ç”¨iframe" class="headerlink" title="åˆ©ç”¨iframe"></a>åˆ©ç”¨iframe</h2><p>Nodejs ç«¯æ­£å¸¸çš„è®¾ç½®ç›¸åº”å¤´ï¼Œ<code>Content-disposition: attachment, filename=</code>ã€‚ç„¶åè¯»åˆ°æœåŠ¡å™¨ä¸Šå¯¹åº”çš„æ–‡ä»¶èµ‹å€¼ç»™ <code>ctx.body</code> å³å¯ã€‚ä¸‹é¢æ˜¯ä¸€ç§å‚è€ƒçš„ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> filePath = path.join(path.resolve(__dirname, <span class="string">'../uploads'</span>), $&#123;fileStamp&#125;)</span><br><span class="line"></span><br><span class="line">ctx.set(&#123;</span><br><span class="line">  <span class="string">'Content-disposition'</span>: <span class="string">`attachment; filename=<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(fileStamp)&#125;</span>`</span>,</span><br><span class="line">  <span class="string">'Content-type'</span>: <span class="string">'application/octet-stream'</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">ctx.body = fs.createReadStream(filePath)</span><br></pre></td></tr></table></figure>
<p>å‰ç«¯åˆ©ç”¨ iframe çš„ src å±æ€§ï¼Œè¿›è¡Œé‡æ–°èµ‹å€¼ã€‚æ³¨æ„ iframe è®¾ä¸º <code>display: none</code> å±æ€§ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe ref=<span class="string">"downloadIframe"</span> src=<span class="string">""</span> frameborder=<span class="string">"0"</span> style=<span class="string">"display: none;"</span>&gt;&lt;/iframe&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç‚¹å‡»æŸ¥çœ‹æ—¶æ‰§è¡Œ downloadFile</span></span><br><span class="line">downloadFile(fileStamp) &#123;</span><br><span class="line">	<span class="keyword">this</span>.$refs.downloadIframe.src = <span class="string">`/download/<span class="subst">$&#123;fileStamp&#125;</span>`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="åˆ©ç”¨URL-createObjectURL"><a href="#åˆ©ç”¨URL-createObjectURL" class="headerlink" title="åˆ©ç”¨URL.createObjectURL"></a>åˆ©ç”¨URL.createObjectURL</h2><blockquote>
<p>URL.createObjectURL() é™æ€æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ª DOMStringï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªè¡¨ç¤ºå‚æ•°ä¸­ç»™å‡ºçš„å¯¹è±¡çš„URLã€‚è¿™ä¸ª URL çš„ç”Ÿå‘½å‘¨æœŸå’Œåˆ›å»ºå®ƒçš„çª—å£ä¸­çš„ document ç»‘å®šã€‚è¿™ä¸ªæ–°çš„URL å¯¹è±¡è¡¨ç¤ºæŒ‡å®šçš„ File å¯¹è±¡æˆ– Blob å¯¹è±¡ã€‚</p>
<p>ä¸€ä¸ª Blobå¯¹è±¡è¡¨ç¤ºä¸€ä¸ªä¸å¯å˜çš„, åŸå§‹æ•°æ®çš„ç±»ä¼¼æ–‡ä»¶å¯¹è±¡ã€‚Blobè¡¨ç¤ºçš„æ•°æ®ä¸ä¸€å®šæ˜¯ä¸€ä¸ªJavaScriptåŸç”Ÿæ ¼å¼ã€‚ File æ¥å£åŸºäºBlobï¼Œç»§æ‰¿ blobåŠŸèƒ½å¹¶å°†å…¶æ‰©å±•ä¸ºæ”¯æŒç”¨æˆ·ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ã€‚ï¼ˆHTML5æ–°å¢ç‰¹æ€§ï¼‰</p>
</blockquote>
<p>è¿™ç§æ–¹æ³•æˆ‘å·²ç»åœ¨ä¸Šç¯‡æ–‡ç« åˆšå¥½æœ‰ç”¨åˆ°ï¼Œå¯ä»¥åˆ©ç”¨æµè§ˆå™¨åŸç”Ÿ fetch æ–¹æ³•ï¼Œç„¶åè§£æä¸º blob ç±»å‹ã€‚å†åˆ©ç”¨aæ ‡ç­¾çš„ download å±æ€§å³å¯ã€‚å‚è€ƒä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fetchApi</span> (<span class="params">url, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> fetch(url, &#123;</span><br><span class="line">    body: <span class="built_in">JSON</span>.stringify(data),</span><br><span class="line">    headers: &#123;</span><br><span class="line">      <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    cache: <span class="string">'no-cache'</span>,</span><br><span class="line">    method: <span class="string">'POST'</span>,</span><br><span class="line">    mode: <span class="string">'cors'</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„è¿™é‡Œè¦æ˜¯ response.blob()</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getImageData</span>(<span class="params">url, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> fetchApi(url, data)</span><br><span class="line">    .then(<span class="function"><span class="params">response</span> =&gt;</span> response.blob())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getImage</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  getImageData(<span class="string">'/downloadImage'</span>, data)</span><br><span class="line">    .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> a = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>)</span><br><span class="line">      <span class="keyword">let</span> url = <span class="built_in">window</span>.URL.createObjectURL(response)</span><br><span class="line">      <span class="keyword">let</span> filename = <span class="string">`<span class="subst">$&#123;data.scene&#125;</span>-<span class="subst">$&#123;+<span class="keyword">new</span> <span class="built_in">Date</span>()&#125;</span>.png`</span></span><br><span class="line"></span><br><span class="line">      a.href = url</span><br><span class="line">      a.download = filename</span><br><span class="line"></span><br><span class="line">      a.click()</span><br><span class="line">      <span class="built_in">window</span>.URL.revokeObjectURL(url)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ä½ å¯ä»¥ä¸ç”¨ fetch çš„è¿™ä¸ªæ–¹æ³•ï¼Œç›´æ¥åœ¨ xhr é‡Œè¿›è¡Œå°è£…ã€‚æˆ‘çœ‹åˆ° stackoverflow ä¸Šæœ‰ä¸ªå¾ˆå¥½çš„æ–‡ç« ï¼Œåœ°å€<a href="https://stackoverflow.com/questions/16086162/handle-file-download-from-ajax-post" target="_blank" rel="noopener">æˆ³è¿™é‡Œ</a>ï¼Œæˆ‘è§‰çš„æœ€é«˜å›ç­”è€…å·²ç»è§£é‡Šçš„å¾ˆå¥½äº†ï¼Œä¸‹é¢å¼•ç”¨å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">xhr.open(<span class="string">'POST'</span>, url, <span class="literal">true</span>);</span><br><span class="line">xhr.responseType = <span class="string">'arraybuffer'</span>;</span><br><span class="line">xhr.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.status === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> filename = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">var</span> disposition = xhr.getResponseHeader(<span class="string">'Content-Disposition'</span>);</span><br><span class="line">        <span class="keyword">if</span> (disposition &amp;&amp; disposition.indexOf(<span class="string">'attachment'</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> filenameRegex = <span class="regexp">/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/</span>;</span><br><span class="line">            <span class="keyword">var</span> matches = filenameRegex.exec(disposition);</span><br><span class="line">            <span class="keyword">if</span> (matches != <span class="literal">null</span> &amp;&amp; matches[<span class="number">1</span>]) filename = matches[<span class="number">1</span>].replace(<span class="regexp">/['"]/g</span>, <span class="string">''</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> type = xhr.getResponseHeader(<span class="string">'Content-Type'</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> blob = <span class="keyword">typeof</span> File === <span class="string">'function'</span></span><br><span class="line">            ? <span class="keyword">new</span> File([<span class="keyword">this</span>.response], filename, &#123; <span class="attr">type</span>: type &#125;)</span><br><span class="line">            : <span class="keyword">new</span> Blob([<span class="keyword">this</span>.response], &#123; <span class="attr">type</span>: type &#125;);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">window</span>.navigator.msSaveBlob !== <span class="string">'undefined'</span>) &#123;</span><br><span class="line">            <span class="comment">// IE workaround for "HTML7007: One or more blob URLs were revoked by closing the blob for which they were created. These URLs will no longer resolve as the data backing the URL has been freed."</span></span><br><span class="line">            <span class="built_in">window</span>.navigator.msSaveBlob(blob, filename);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> URL = <span class="built_in">window</span>.URL || <span class="built_in">window</span>.webkitURL;</span><br><span class="line">            <span class="keyword">var</span> downloadUrl = URL.createObjectURL(blob);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (filename) &#123;</span><br><span class="line">                <span class="comment">// use HTML5 a[download] attribute to specify filename</span></span><br><span class="line">                <span class="keyword">var</span> a = <span class="built_in">document</span>.createElement(<span class="string">"a"</span>);</span><br><span class="line">                <span class="comment">// safari doesn't support this yet</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">typeof</span> a.download === <span class="string">'undefined'</span>) &#123;</span><br><span class="line">                    <span class="built_in">window</span>.location = downloadUrl;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    a.href = downloadUrl;</span><br><span class="line">                    a.download = filename;</span><br><span class="line">                    <span class="built_in">document</span>.body.appendChild(a);</span><br><span class="line">                    a.click();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">window</span>.location = downloadUrl;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; URL.revokeObjectURL(downloadUrl); &#125;, <span class="number">100</span>); <span class="comment">// cleanup</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">xhr.setRequestHeader(<span class="string">'Content-type'</span>, <span class="string">'application/x-www-form-urlencoded'</span>);</span><br><span class="line">xhr.send($.param(params));</span><br></pre></td></tr></table></figure>
<p>å¤§æ¦‚çš„æ€è·¯æ˜¯åˆ©ç”¨ <code>xhr</code> åŸç”Ÿå¯¹è±¡çš„ <code>onload</code> åï¼Œè¿›è¡Œ<code>new blob()</code>å¯¹è±¡ã€‚</p>
<p>å†æ‰§è¡Œ<code>URL.createObjectURL(blob)</code>çš„æ“ä½œã€‚</p>
<hr>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å…¶å®è¿˜æœ‰åˆ«çš„æ–¹æ³•ï¼Œå¦‚ <code>POST</code> ä¸€ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯è¿™ä¸ªä¼šåˆ·æ–°å½“å‰çš„ <code>Url</code>ã€‚ä¸Šé¢ä¸¤ç§æƒ…å†µå…¶å®æ˜¯ä¸¤ç§æ€è·¯ã€‚</p>
<p><code>POST</code> è¯·æ±‚è·Ÿ <code>Iframe</code> ç±»ä¼¼,åŒæ ·è¿˜å¯ä»¥ <code>window.open</code> æˆ–è€… <code>window.location</code> æ¥åšè¿™ä»¶äº‹æƒ…ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä½ çš„ç®¡ç†å°æœ‰ä¸€ä¸ªåŠŸèƒ½æ˜¯ç‚¹å‡»&lt;strong&gt;[æŸ¥çœ‹æ–‡ä»¶]&lt;/strong&gt;ï¼Œä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°çš„åŠŸèƒ½ã€‚ä½ å¯èƒ½è‡ªç„¶çš„å‘åå°æ¥å£ï¼ˆå¯èƒ½æ˜¯ Nodejs çš„ä¸€ä¸ª Restful Apiï¼‰è¯·æ±‚ä¸‹è½½ã€‚ä½†æ˜¯ä½ å‘ç°ä½ åå°çš„ Nodejs è™½ç„¶è®¾ç½®äº†æ­£ç¡®çš„å“åº”å¤´ï¼ˆCon
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>koa2 ç”Ÿæˆå¸¦åœºæ™¯å€¼å‚æ•°çš„å¸¦LogoäºŒç»´ç </title>
    <link href="http://sevencai.github.io/2018/06/21/koa2-%E7%94%9F%E6%88%90%E5%B8%A6%E5%9C%BA%E6%99%AF%E5%80%BC%E5%8F%82%E6%95%B0%E7%9A%84%E5%B8%A6Logo%E4%BA%8C%E7%BB%B4%E7%A0%81/"/>
    <id>http://sevencai.github.io/2018/06/21/koa2-ç”Ÿæˆå¸¦åœºæ™¯å€¼å‚æ•°çš„å¸¦LogoäºŒç»´ç /</id>
    <published>2018-06-21T12:14:37.000Z</published>
    <updated>2018-06-21T13:13:21.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>ä¸Šæ¬¡å†™ Koa è¿˜æ˜¯2016å¹´åˆšæ¥å…¬å¸å®ä¹ çš„æ—¶å€™ï¼Œé‚£æ—¶å€™æˆ‘è¿˜åœ¨ä¸Šå¤§ä¸‰ã€‚è½¬çœ¼è§2å¹´è¿‡å»äº†ï¼Œæˆ‘ä¹Ÿæ­£å¼å·¥ä½œå¿«ä¸€å¹´äº†ã€‚ Koa ä¹Ÿä»åŸæ¥æ¯”è¾ƒéš¾ç”¨çš„ generator ï¼Œyield å˜æˆäº†ç°åœ¨çš„ async await ã€‚çœŸå¥½ã€‚</p>
</blockquote>
<p>è¿™æ¬¡æ–‡ç« çš„èƒŒæ™¯æ˜¯ï¼Œäº§å“éœ€è¦ç»™å…¬ä¼—å·æ‹‰æ–°ã€‚éœ€è¦ç”Ÿæˆå„ç§å¸¦å‚æ•°çš„äºŒç»´ç ã€‚è¿™ä¸ªå¸¦å‚æ•°çš„äºŒç»´ç å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œæ¯”å¦‚ç»Ÿè®¡æ–°æ‹‰çš„å…³æ³¨æ˜¯ä»å“ªä¸ªåœºæ™¯å€¼ä¸‹æ¥çš„ã€‚æ¯”å¦‚å…³æ³¨æ—¶ï¼Œä¸åŒåœºæ™¯å€¼æœ‰ä¸åŒçš„å…¬ä¼—å·å›å¤å†…å®¹ã€‚</p>
<p>åœ¨ç»å†äº†å¥½å‡ æ¬¡æ¯æ¬¡æ‰‹åŠ¨è·Ÿå¥¹ç”Ÿæˆåï¼Œæˆ‘ä¸‹å®šäº†å†³å¿ƒï¼Œè·Ÿäº§å“è¦äº†2å¤©æ’æœŸï¼Œç»™å¥¹åšä¸€ä¸ªå·¥å…·ã€‚è‡ªåŠ¨ç”Ÿæˆå¸¦ Logo çš„äºŒç»´ç ã€‚<strong>ä¸»è¦æ˜¯æ‰‹å·¥å»æ“ä½œæ¯”è¾ƒç¹çï¼Œéœ€è¦ç»å†ä¸‹é¢å‡ æ­¥</strong>ï¼š</p>
<ol>
<li>å…ˆå»è·å¾— access_token</li>
<li>å†è°ƒç”¨å¾®ä¿¡åˆ›å»ºå¸¦å‚æ•°å€¼äºŒç»´ç çš„æ¥å£qrcode/createï¼Œè·å¾— ticket</li>
<li>å†æ‹¿ ticket æ¢äºŒç»´ç </li>
</ol>
<p>è¿™å…¶ä¸­ï¼Œå¸¦å‚æ•°çš„äºŒç»´ç åˆåˆ†ä¸ºäº†ä¸¤ç§ï¼Œæ°¸ä¹…å’Œä¸´æ—¶äºŒç»´ç ã€‚å…·ä½“æ¥å£å¯ä»¥<a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1443433542" target="_blank" rel="noopener">å‚è€ƒå…¬ä¼—å·çš„æ–‡æ¡£</a>ï¼Œ å¹¶ä¸”æ¯æ¬¡äº§å“è‡ªå·±æ‹¿åˆ° ticket æ¢çš„äºŒç»´ç åï¼Œè¿˜éœ€è¦è‡ªå·±å» P logo, å¤§å°ä¹Ÿè¦è‡ªå·±å»è°ƒã€‚æ€»ä¹‹æ¯”è¾ƒéº»çƒ¦ã€‚</p>
<p><strong>æ‰€ä»¥è¿™ç¯‡æ–‡ç« ï¼Œä¸»è¦å°±æ˜¯ç”¨ Koa2 ç”Ÿæˆå¸¦åœºæ™¯å€¼å‚æ•°çš„å…¬ä¼—å·äºŒç»´ç </strong>ã€‚ğŸ’—ğŸŒ¹</p>
<hr>
<h2 id="è®¾è®¡"><a href="#è®¾è®¡" class="headerlink" title="è®¾è®¡"></a>è®¾è®¡</h2><p>é¦–å…ˆæˆ‘ç¡®å®šäº† koa server ç«¯ï¼Œåªåšæ¥å£å±‚ã€‚æ„æ€æ˜¯åªç”¨æ¥å¤„ç†å‰ç«¯çš„è¯·æ±‚ã€‚ GET or POSTã€‚</p>
<p>å‰ç«¯ä¸»è¦åšè¡¨å•éªŒè¯ï¼Œè·å–äº§å“æƒ³è¦çš„äºŒç»´ç ç±»å‹ä¿¡æ¯ç­‰ã€‚ç„¶åä¼ ç»™åå°ã€‚åå°æ ¹æ®ä¿¡æ¯ï¼Œå»æ‹¿ access_token, ç„¶åè°ƒç”¨å¾®ä¿¡äºŒç»´ç ï¼Œå†æ·»åŠ  logo ç­‰ã€‚ç„¶åè¿”å›ç»™å‰ç«¯ã€‚æœ€åçš„æ•ˆæœæ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="qrcode.png" alt="ç»“æœå›¾"></p>
<p>äº§å“å¯ä»¥é€‰æ‹©ï¼Œæ˜¯ä¸´æ—¶è¿˜æ˜¯æ°¸ä¹…ï¼Œé€‰æ‹©æ˜¯åªè¦é“¾æ¥è¿˜æ˜¯ä¸‹è½½å›¾ç‰‡ï¼Œæ˜¯å¦æ·»åŠ  Logo ï¼Œå›¾ç‰‡çš„å¤§å°ç­‰ç­‰ã€‚</p>
<p>æœ€åå¦‚æœå›¾ç‰‡ç±»å‹é€‰çš„æ˜¯ã€æˆ‘è¦ç”Ÿæˆå›¾ç‰‡ã€‘å°±å¯ä»¥ç”Ÿæˆç±»ä¼¼ä¸‹é¢äºŒç»´ç å•¦ï¼Œ å¦‚æœæ˜¯ç‚¹å‡»çš„ ã€æˆ‘åªè¦é“¾æ¥ã€‘ï¼Œé‚£ä¹ˆæˆ‘åªä¼šè¿”å›ä¸€ä¸ªå¸¦ticketçš„é“¾æ¥ã€‚</p>
<p><img src="exampletest.png" alt="ç”Ÿæˆç»“æœå›¾ç‰‡"></p>
<p>çº¢è‰²çš„ç¬”éƒ¨åˆ†æ˜¯ä¸ºäº†é®ä½äºŒç»´ç ä¿¡æ¯ï¼Œå› ä¸ºæ˜¯è‡ªå·±çš„æµ‹è¯•å·ã€‚ä¸»è¦ç”¨åˆ°äº†ä¸‹é¢è¿™äº› npm åº“ï¼š <code>koa-router, koa-static, qr-image, request-promise, stream-to-promise, image-size</code></p>
<hr>
<h2 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h2><p>å†™èµ·æ¥ä»£ç æ²¡æœ‰ç‰¹åˆ«çš„åœ°æ–¹ï¼Œç”¨ koa-router åšè·¯ç”±ï¼Œæ¯”å¦‚äº§å“é€‰æ‹©ç”Ÿæˆé“¾æ¥ï¼Œè¿˜æ˜¯ç”Ÿæˆå›¾ç‰‡ï¼Œæˆ‘é€‰æ‹©äº†è·¯ç”±åˆ°ä¸¤ä¸ªæ¥å£ã€‚</p>
<p>åœ¨é…ç½®æ–‡ä»¶ï¼Œ route.js ä¸­ï¼Œé…ç½®ç›¸åº”è·¯ç”±çš„è¯·æ±‚ä»¥åŠå¯¹åº”çš„ controller</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  &apos;post /getLink&apos;: &apos;controllers/createLink&apos;,</span><br><span class="line">  &apos;post /downloadImage&apos;: &apos;controllers/createImage&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™è¡¨æ˜ï¼š</p>
<p>å½“å‰ç«¯ post getLink è¿™ä¸ªæ¥å£æ—¶ï¼Œ ç”¨ controllers ä¸‹çš„ createLink æ¥å¤„ç†ã€‚<br>å½“å‰ç«¯ post downloadImage è¿™ä¸ªæ¥å£æ—¶ï¼Œç”¨ controllers ä¸‹çš„ downloadImage æ¥å¤„ç†ã€‚</p>
<p>ç„¶åå†åœ¨è‡ªå·±å†™ä¸ªæ³¨å†Œè·¯ç”±çš„ middleware<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">app, router</span>) =&gt;</span> (</span><br><span class="line">  <span class="built_in">Object</span>.keys(routesConfig).forEach(<span class="function"><span class="params">route</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> [method, path] = route.split(<span class="string">' '</span>)</span><br><span class="line">    <span class="keyword">const</span> controller = <span class="built_in">require</span>(<span class="string">'../'</span> + routesConfig[route])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> controller !== <span class="string">'function'</span> || <span class="keyword">typeof</span> router[method] !== <span class="string">'function'</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (method === <span class="string">'post'</span>) &#123;</span><br><span class="line">      app.use(bodyParser())</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    router.post(path, controller)</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>ç„¶ååœ¨ å…¥å£æ–‡ä»¶ä¸­ä½¿ç”¨è¿™ä¸ª middleware å¹¶ä¸”æ³¨å†Œåˆ° koa-router ä¸Šå³å¯ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">routeMiddleware(App, router)</span><br><span class="line"></span><br><span class="line">App.use(router.routes()).use(router.allowedMethods())</span><br></pre></td></tr></table></figure></p>
<p>æœ€åæ˜¯å¯¹åº”çš„ controller é‡Œå¤„ç†æ–‡ä»¶, æ¯”å¦‚å¦‚ä¸‹æ˜¯ downloadImage çš„ controller, æŠŠ data ä¼ ç»™äº†æ ¸å¿ƒå¤„ç†ä¸šåŠ¡æµç¨‹çš„ç±»æ–‡ä»¶ã€‚ç„¶åå†è¿”å›ç›¸åº”çš„å›¾ç‰‡å³å¯ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ›å»ºäºŒç»´ç </span></span><br><span class="line"><span class="comment"> * @param ctx</span></span><br><span class="line"><span class="comment"> * @returns &#123;Promise&lt;void&gt;&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> Core = <span class="built_in">require</span>(<span class="string">'../server/core'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> data = ctx.request.body</span><br><span class="line">  <span class="keyword">const</span> core = <span class="keyword">new</span> Core(data)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> core.downloadQrCodeImage()</span><br><span class="line"></span><br><span class="line">  ctx.type = <span class="string">'png'</span></span><br><span class="line">  ctx.set(<span class="string">'Content-type'</span>, <span class="string">'image/png'</span>)</span><br><span class="line">  ctx.body = result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‰ç«¯æ¥å—åˆ°è¿™ä¸ª image åï¼Œå†åˆ©ç”¨ createObjectURL, revokeObjectURL ç«‹å³ä¸‹è½½å›¾ç‰‡å³å¯ã€‚ä¸‹é¢å±•ç¤ºçš„æ˜¯å‰ç«¯è¿™ä¸€éƒ¨åˆ†å¤„ç†çš„é€»è¾‘ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fetchApi</span> (<span class="params">url, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> fetch(url, &#123;</span><br><span class="line">    body: <span class="built_in">JSON</span>.stringify(data),</span><br><span class="line">    headers: &#123;</span><br><span class="line">      <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    cache: <span class="string">'no-cache'</span>,</span><br><span class="line">    method: <span class="string">'POST'</span>,</span><br><span class="line">    mode: <span class="string">'cors'</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getImageData</span>(<span class="params">url, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> fetchApi(url, data)</span><br><span class="line">    .then(<span class="function"><span class="params">response</span> =&gt;</span> response.blob())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getImage</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  getImageData(<span class="string">'/downloadImage'</span>, data)</span><br><span class="line">    .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> a = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>)</span><br><span class="line">      <span class="keyword">let</span> url = <span class="built_in">window</span>.URL.createObjectURL(response)</span><br><span class="line">      <span class="keyword">let</span> filename = <span class="string">`<span class="subst">$&#123;data.scene&#125;</span>-<span class="subst">$&#123;+<span class="keyword">new</span> <span class="built_in">Date</span>()&#125;</span>.png`</span></span><br><span class="line"></span><br><span class="line">      a.href = url</span><br><span class="line">      a.download = filename</span><br><span class="line"></span><br><span class="line">      a.click()</span><br><span class="line">      <span class="built_in">window</span>.URL.revokeObjectURL(url)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ç”¨çš„æµè§ˆå™¨åŸç”Ÿçš„ Fetch Apiï¼Œ å› ä¸ºä¸æƒ³åœ¨å‰ç«¯è¿˜å¼•å…¥åˆ«çš„åº“ã€‚æ³¨æ„ fetchApi è¿”å›ä¸åŒçš„å†…å®¹ï¼Œè¦ç”¨ä¸åŒçš„å†…å®¹å¤„ç†ã€‚æ¯”å¦‚ä¸Šé¢çš„å›¾ç‰‡æ˜¯ç”¨çš„ response.blob() å¤„ç†ï¼Œå¦‚æœæ˜¯è¿”å›çš„jsonï¼Œ éœ€è¦ç”¨ response.json() å¤„ç†ã€‚</p>
<hr>
<h2 id="è·å–-AccessToken"><a href="#è·å–-AccessToken" class="headerlink" title="è·å– AccessToken"></a>è·å– AccessToken</h2><p>æ³¨æ„å¦‚æœæ²¡æœ‰è‡ªå·±çš„è·å– AccessToken çš„ä¸­æ§æœåŠ¡å™¨ï¼Œä¸€å®šè¦ç¼“å­˜ accessToken, accessToken æœ‰è¿‡æœŸæ—¶é—´ï¼Œå¹¶ä¸”ä¸€å¤©æœ‰è°ƒç”¨ä¸Šé™ã€‚éƒ¨é—¨å†…æœ‰ä¸“é—¨çš„ä¸­æ§æœåŠ¡å™¨ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯è‡ªå·±è¯•äº†ä¸‹è‡ªå·±åšç¼“å­˜çš„æµç¨‹ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">const</span> rp = <span class="built_in">require</span>(<span class="string">'request-promise'</span>)</span><br><span class="line"> <span class="keyword">const</span> cachePath = <span class="string">'./cache/token.txt'</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å¾— access_token</span></span><br><span class="line"><span class="comment"> * è‹¥ç¼“å­˜æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™ä»ç¼“å­˜ä¸­è¯»å–</span></span><br><span class="line"><span class="comment"> * è‹¥ç¼“å­˜æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè°ƒç”¨ update æ¥å£æ›´æ–°</span></span><br><span class="line"><span class="comment"> * @returns &#123;Promise&lt;*&gt;&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> getAccessToken () &#123;</span><br><span class="line">  <span class="keyword">let</span> token = <span class="string">''</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (fs.existsSync(cachePath)) &#123;</span><br><span class="line">    token = <span class="built_in">JSON</span>.parse(fs.readFileSync(cachePath))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!token || token.timeout &lt; <span class="built_in">Date</span>.now()) &#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="built_in">JSON</span>.parse(<span class="keyword">await</span> <span class="keyword">this</span>.updateAccessToken())</span><br><span class="line"></span><br><span class="line">    res.timeout = <span class="built_in">Date</span>.now() + (res.expires_in - <span class="number">200</span>) * <span class="number">1000</span></span><br><span class="line">    fs.writeFileSync(cachePath, <span class="built_in">JSON</span>.stringify(res))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> token</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ›´æ–°å¾®ä¿¡ Access_token</span></span><br><span class="line"><span class="comment"> * æ­¤å¤„æœ‰æ¯å¤©è°ƒç”¨ 2000 æ¬¡é™åˆ¶</span></span><br><span class="line"><span class="comment"> * 2h å³å¤±æ•ˆ</span></span><br><span class="line"><span class="comment"> * @returns &#123;Promise&lt;*&gt;&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> updateAccessToken () &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; appid, appkey &#125; = serverConfig</span><br><span class="line">  <span class="keyword">const</span> url = <span class="string">`https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=<span class="subst">$&#123;appid&#125;</span>&amp;secret=<span class="subst">$&#123;appkey&#125;</span>`</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> rp.get(url)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç›¸å½“äºæ¯æ¬¡è°ƒç”¨åï¼Œè¦é‡æ–°å†™å…¥æ–‡ä»¶è¿‡æœŸæ—¶é—´ï¼Œå¦‚æœè¿‡æœŸæ—¶é—´åˆ°äº†ï¼Œé‚£ä¹ˆé‡æ–°å»æ›´æ–°ã€‚ä¹‹æ‰€ä»¥æ‹¿ re.expires_in - 200, æ˜¯ä¸ºäº†ç•™ç‚¹ buffer, è¿™ä¸ªå€¼å½“ç„¶å¯ä»¥è‡ªå·±å»è®¾ç½®ã€‚</p>
<hr>
<h2 id="ç”ŸæˆäºŒç»´ç "><a href="#ç”ŸæˆäºŒç»´ç " class="headerlink" title="ç”ŸæˆäºŒç»´ç "></a>ç”ŸæˆäºŒç»´ç </h2><p>è¿™é‡Œçš„ logo, å› ä¸ºæˆ‘ä»¬å…¬ä¼—å·åªæœ‰ä¸€ä¸ª logo, æ•…ç›´æ¥æ˜¯ä»æ–‡ä»¶ä¸­è¯»å–äº†ã€‚ä»¥åè€ƒè™‘æŠŠè¿™ä¸ªæ”¾åœ¨ github çš„è¯ï¼Œå¯èƒ½ä¼šæ”¯æŒç”¨æˆ·å¯ä»¥è‡ªå·±ä¸Šä¼  Logoã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªåœ°æ–¹è¦æ³¨æ„ï¼Œå°±æ˜¯è®¡ç®— logo çš„ä½ç½®ã€‚ç›´æ¥é™¤ä»¥äºŒç»´ç çš„é«˜å®½ä¸€åŠæ˜¯ä¸è¡Œçš„ï¼Œè¿˜è¦å‡å» logo çš„ä¸€åŠå“¦ã€‚</p>
<p>æˆ‘è¿™è¾¹åœ¨è¿”å›ç»™å‰ç«¯ä¸‹è½½çš„æ—¶å€™ï¼Œä¹Ÿ save åˆ°æœ¬åœ°äº†ï¼Œæ‹…å¿ƒäº§å“ä¸¢å¤±ä¿¡æ¯ã€‚save çš„æ—¶å€™ï¼Œæˆ‘ä»¥åœºæ™¯å€¼å’Œæ—¶é—´ä¸ºåå­—ï¼Œä¼šæ–¹ä¾¿æ—¥åå¥½æ‰¾ä¸€äº›ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ·»åŠ  logo</span></span><br><span class="line"><span class="comment"> * @param imageStream</span></span><br><span class="line"><span class="comment"> * @returns &#123;Promise&lt;*&gt;&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> getLogo (imageStream) &#123;</span><br><span class="line">  <span class="keyword">const</span> imgBuffer = <span class="keyword">await</span> streamToPromise(imageStream)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="attr">width</span>: imgWidth, <span class="attr">height</span>: imgHeight &#125; = imgSize(imgBuffer)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> logoWrapper = images(<span class="string">"./static/assets/logo.png"</span>).size(imgWidth / <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> x = (imgWidth - logoWrapper.width()) / <span class="number">2</span></span><br><span class="line">  <span class="keyword">const</span> y = (imgHeight - logoWrapper.height()) / <span class="number">2</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> <span class="keyword">this</span>.drawImage(imgBuffer, logoWrapper, x, y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”»å›¾</span></span><br><span class="line"><span class="comment"> * @param imgBuffer</span></span><br><span class="line"><span class="comment"> * @param logoWrapper</span></span><br><span class="line"><span class="comment"> * @param x</span></span><br><span class="line"><span class="comment"> * @param y</span></span><br><span class="line"><span class="comment"> * @returns &#123;Promise&lt;any&gt;&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> drawImage (imgBuffer, logoWrapper, x, y) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> image = images(imgBuffer)</span><br><span class="line">      .draw(logoWrapper, x, y)</span><br><span class="line">      .save(<span class="string">`./static/image/<span class="subst">$&#123;<span class="keyword">this</span>.scene&#125;</span>-<span class="subst">$&#123;+<span class="keyword">new</span> <span class="built_in">Date</span>()&#125;</span>.png`</span>, &#123;</span><br><span class="line">        quality : <span class="number">50</span></span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!image) &#123;</span><br><span class="line">      reject()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    resolve(image)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="å…¥å£æ–‡ä»¶"><a href="#å…¥å£æ–‡ä»¶" class="headerlink" title="å…¥å£æ–‡ä»¶"></a>å…¥å£æ–‡ä»¶</h2><p>å…¥å£æ–‡ä»¶è·Ÿå¹³å¸¸çš„å…¥å£æ–‡ä»¶åŸºæœ¬ä¸Šæ²¡æœ‰ä»€ä¹ˆå¤§åŒºåˆ«ã€‚æ¯”è¾ƒç®€å•ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">'koa'</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> Router = <span class="built_in">require</span>(<span class="string">'koa-router'</span>)</span><br><span class="line"><span class="keyword">const</span> StaticServer = <span class="built_in">require</span>(<span class="string">'koa-static'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">'./config'</span>)</span><br><span class="line"><span class="keyword">const</span> routeMiddleware = <span class="built_in">require</span>(<span class="string">'./middleware/route'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App = <span class="keyword">new</span> Koa()</span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> Router()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> staticPath = <span class="string">'./static'</span></span><br><span class="line"></span><br><span class="line">App.use(StaticServer(path.join(__dirname, staticPath)))</span><br><span class="line"></span><br><span class="line">routeMiddleware(App, router)</span><br><span class="line"></span><br><span class="line">App.use(router.routes()).use(router.allowedMethods())</span><br><span class="line"></span><br><span class="line">App.listen(config.port, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`App listening on port <span class="subst">$&#123;config.port&#125;</span>`</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æƒ³å½“ä¸€ä¸ªä¼˜ç§€çš„ Nodejs å·¥ç¨‹å¸ˆï¼Œä½†æ˜¯å‘ç°è‡ªå·±è¿˜è¿œè¿œä¸å¤Ÿï¼Œæ¯”å¦‚ fs çš„å‡½æ•°ä¸ç†Ÿã€‚æ¯”å¦‚å¯¹ Buffer, Stream ç†è§£çš„ä¸å¤Ÿæ·±å…¥ã€‚è¿˜æ˜¯å†™çš„å¤ªå°‘äº†ã€‚ä¸è¿‡æ€»ç®—æ˜¯æŒ‰æ—¶å®Œæˆäº†ã€‚è§£æ”¾äº†åŠ³åŠ¨åŠ›ã€‚ğŸš«</p>
<p>ä¸‹ä¸€æ­¥æ‰“ç®—ä¼˜åŒ–ä¸‹ä»£ç ï¼Œçœ‹èƒ½ä¸èƒ½æ”¯æŒ upload logo, æ”¯æŒä¼  appid, appkey, è¿™æ ·åˆ«äººä¹Ÿå¯ä»¥ç”¨äº†ã€‚è¿˜æœ‰å¾ˆå¤šåŸºç¡€å·¥ä½œæ²¡æœ‰åšï¼Œæ¯”å¦‚ async, await çš„é”™è¯¯å¤„ç†ï¼Œæ¯”å¦‚ logger, pm2 ç­‰ã€‚è¿™ä¸ªä¼šæ…¢æ…¢å®Œå–„ï¼ŒåŸºç¡€åŠŸèƒ½å·² OKã€‚ ğŸ“šğŸ </p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä¸Šæ¬¡å†™ Koa è¿˜æ˜¯2016å¹´åˆšæ¥å…¬å¸å®ä¹ çš„æ—¶å€™ï¼Œé‚£æ—¶å€™æˆ‘è¿˜åœ¨ä¸Šå¤§ä¸‰ã€‚è½¬çœ¼è§2å¹´è¿‡å»äº†ï¼Œæˆ‘ä¹Ÿæ­£å¼å·¥ä½œå¿«ä¸€å¹´äº†ã€‚ Koa ä¹Ÿä»åŸæ¥æ¯”è¾ƒéš¾ç”¨çš„ generator ï¼Œyield å˜æˆäº†ç°åœ¨çš„ async await ã€‚çœŸå¥½ã€‚&lt;/p&gt;
&lt;/blockqu
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>å°ç¨‹åºå†…åµŒå¤ç”¨H5å¹¶æ‹‰èµ·å¾®ä¿¡æ”¯ä»˜è§£å†³ï¼ˆæ›¿ä»£ï¼‰æ–¹æ¡ˆ</title>
    <link href="http://sevencai.github.io/2018/06/13/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%86%85%E5%B5%8C%E5%A4%8D%E7%94%A8H5%E5%B9%B6%E6%8B%89%E8%B5%B7%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E8%A7%A3%E5%86%B3%EF%BC%88%E6%9B%BF%E4%BB%A3%EF%BC%89%E6%96%B9%E6%A1%88/"/>
    <id>http://sevencai.github.io/2018/06/13/å°ç¨‹åºå†…åµŒå¤ç”¨H5å¹¶æ‹‰èµ·å¾®ä¿¡æ”¯ä»˜è§£å†³ï¼ˆæ›¿ä»£ï¼‰æ–¹æ¡ˆ/</id>
    <published>2018-06-13T12:45:56.000Z</published>
    <updated>2018-06-13T13:45:39.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>è‡ªä»å°ç¨‹åºå‡ºæ¥åï¼Œä½ è‚¯å®šæœ‰è¿™æ ·çš„æƒ³æ³•ã€‚å°ç¨‹åºå†…éƒ¨åˆ†é¡µé¢å¥½æƒ³å¤ç”¨ä»¥å‰çš„H5ï¼Œé‡å¤çš„å»å¼€å‘æµªè´¹äº†å¤§é‡çš„æ—¶é—´å’Œç²¾åŠ›ã€‚ ä½†æ˜¯å†…åµŒåœ¨å°ç¨‹åºä¸­çš„H5ä¸æ”¯æŒæ‹‰èµ·å¾®ä¿¡æ”¯ä»˜ã€‚ä¹Ÿå°±æ˜¯è¯´å°ç¨‹åºå†…ï¼Œå°ç¨‹åºåµŒå…¥çš„H5å†…åªèƒ½è°ƒç”¨å°ç¨‹åºæ”¯ä»˜ã€‚</p>
</blockquote>
<p>äºæ˜¯å‘¢ï¼Œæˆ‘å°±æƒ³åˆ°äº†è¿™ä¹ˆä¸€ä¸ªåŠæ³•ã€‚æœ‰äº›å±±å¯¨ï¼Œå¹¶ä¸”ä¸å®˜æ–¹ï¼ˆå®˜æ–¹å½“ç„¶æ˜¯å¸Œæœ›ä½ ç›´æ¥åœ¨å°ç¨‹åºå†…å®Œæˆä¸€åˆ‡ï¼Œä¸‹å•åˆ°æ”¯ä»˜ï¼‰ï¼Œä½†æ˜¯å´å¯ä»¥è§£å†³é—®é¢˜ã€‚O(âˆ©_âˆ©)O~~â˜ï¸â¤ï¸</p>
<hr>
<h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p><strong>æˆ‘ä»¬å¯ä»¥ç”¨å°ç¨‹åºçš„ <code>web view</code> èƒ½åŠ›åµŒå…¥ H5, åµŒå…¥åï¼Œåœ¨ H5 ä¸­è¿›è¡Œæ”¯ä»˜ä¸‹å•ï¼Œå¾—åˆ°å‚æ•°å¦‚ ï¼š <code>timeStamp</code>, <code>nouncestr</code>, <code>signType</code>,<code>paySign</code> ç­‰ç­‰å‚æ•°ã€‚ç„¶åå†é€šè¿‡ <code>wx.miniProgram.navigateTo</code> è·³è½¬åˆ°ä¸€ä¸ªå°ç¨‹åºé¡µé¢ï¼Œåœ¨è¿™ä¸ªé¡µé¢è¿›è¡Œè°ƒç”¨ <code>wx.requestPayment</code> è¿›è¡Œæ‹‰èµ·æ”¯ä»˜ã€‚æ‹‰èµ·æ”¯ä»˜åï¼Œå¯ä»¥å†è·³åˆ°å°ç¨‹åºç»“æœé¡µã€‚</strong></p>
<p>å¦‚æœä½ æ‹…å¿ƒé€šè¿‡ <code>navigateTo</code> çš„ url ä¼ å‚æœ‰ä¸å®‰å…¨çš„é—®é¢˜ï¼Œå¯ä»¥è‡ªå·±å¯¹å‚æ•°è¿›è¡ŒåŠ è§£å¯†ã€‚</p>
<p>äº²æµ‹æ˜¯å¯ä»¥è¡Œå¾—é€šçš„ã€‚ä¸‹å›¾ä¸ºåœ¨ ã€H5 é¡µé¢ä¸‹çš„å•ã€‘è·å¾—æ”¯ä»˜å‚æ•°çš„é¡µé¢ã€‚</p>
<p><img src="xiaochengxu1.png" alt="ä¸‹å•æ¥å£"></p>
<p>ä¸‹å›¾ä¸ºå›¾äºŒï¼Œã€åœ¨å°ç¨‹åºå†…æ‹‰èµ·çš„å¾®ä¿¡æ”¯ä»˜ã€‘ã€‚å¯ä»¥é€šè¿‡å³ä¸Šè§’çš„è½¬å‘é€€å‡ºæŒ‰é’®çœ‹å‡ºæ˜¯å°ç¨‹åºæ‹‰èµ·çš„æ”¯ä»˜ã€‚è¿™æ ·æ”¯ä»˜å®Œæˆåï¼Œç”¨æˆ·å¯ä»¥ç‚¹å‡»åé€€é€€åˆ°åˆšåˆšçš„H5é¡µé¢ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥ç›´æ¥æ”¯ä»˜å®Œæˆï¼Œè°ƒåˆ°ä½ è‡ªå·±çš„å°ç¨‹åºçš„æ”¯ä»˜ç»“æœé¡µç­‰å·¥ä½œã€‚åœ¨å°ç¨‹åºçš„æ”¯ä»˜ç»“æœé¡µä¸­ï¼Œä½ è¿˜å¯ä»¥è®¾ç½®æŒ‰é’®ï¼Œå†æ¥å¼•å¯¼ç”¨æˆ·æ˜¯è¿›å…¥å°ç¨‹åºé¦–é¡µï¼Œè¿˜æ˜¯åˆšåˆšä½ è·³è½¬çš„H5çš„é¡µé¢ç­‰ç­‰ã€‚</p>
<p><img src="xiaochegnxu2.png" alt="æ”¯ä»˜æ¥å£"></p>
<hr>
<h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><p>æˆ‘æƒ³æŠŠä¸‹å•çš„å‚æ•°ä»¥ JSON.stringfy(obj) çš„å½¢å¼ä¼ è¿‡å»ï¼Œå‘ç°å‚æ•°ä¸€ç›´å¾ˆå¥‡æ€ªçš„è¢«æˆªæ–­ã€‚çœ‹åˆ°å…¶ä»–æœ‰çš„å¼€å‘è€…ä¹Ÿé‡åˆ°äº†ç±»ä¼¼çš„é—®é¢˜ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ä¸‹é¢è¿™ç§æ–¹å¼æ˜¯æœ‰é—®é¢˜çš„ï¼Œä»¥ä¸ºæ˜¯ç‰¹æ®Šå­—ç¬¦å¯¼è‡´çš„ï¼Œä½†æ˜¯å‘ç° encode ä»¥åè¿˜æ˜¯è¢«æˆªæ–­ã€‚æˆ‘è§‰å¾—æœ‰å¯èƒ½æ˜¯å°ç¨‹åºæœ¬èº«çš„é—®é¢˜ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// H5 å†…</span></span><br><span class="line">wx.miniProgram.navigateTo(&#123;</span><br><span class="line">  url: <span class="string">`/pages/wxpay/wxpay?info=<span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(obj)&#125;</span>`</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°ç¨‹åºå†…</span></span><br><span class="line">Page(&#123;</span><br><span class="line">  onLoad(options) &#123;</span><br><span class="line">    <span class="comment">// å› ä¸ºè¢«æˆªæ–­äº†ï¼Œæ‰€ä»¥è¿™é‡Œ JSON.parse æŠ¥é”™</span></span><br><span class="line">    <span class="keyword">const</span> data = <span class="built_in">JSON</span>.parse(options.info)</span><br><span class="line">    <span class="keyword">const</span> obj = &#123;</span><br><span class="line">      <span class="string">'timeStamp'</span>: data.time,</span><br><span class="line">      <span class="string">'nonceStr'</span>: data.nounce,</span><br><span class="line">      <span class="string">'package'</span>: data.package,</span><br><span class="line">      <span class="string">'signType'</span>: <span class="string">'MD5'</span>,</span><br><span class="line">      <span class="string">'paySign'</span>: data.sign,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    wx.requestPayment(&#123;</span><br><span class="line">      ...obj,</span><br><span class="line">      success(res) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'success'</span>, res)</span><br><span class="line">      &#125;,</span><br><span class="line">      fail(res) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'fail'</span>, res)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>åæ¥è€è€å®å®çš„ç”¨å¤šä¸ªå‚æ•°ç©¿å‚<code>sign=xxx&amp;signature=xxx&amp;noncestr=xxx</code>ï¼Œå‘ç° package ä¸­çš„=åé¢çš„éƒ¨åˆ†ä¹Ÿè¢«æˆªæ–­äº†ã€‚ <code>encodeURI, encodeURIComponent</code> éƒ½æ²¡ç”¨ã€‚</p>
<p>è¿™é‡Œæ²¡æœ‰æƒ³æ¸…æ¥šã€‚çœ‹äº†æ–‡æ¡£å’ŒæŸ¥äº†èµ„æ–™ä¹Ÿæ²¡å¼„æ¸…æ¥šå°ç¨‹åºåœ¨è¿™é‡Œé¢åšäº†ä»€ä¹ˆäº‹æƒ…ã€‚å…ˆæ”¾æ”¾ï¼ŒæŠŠæ–¹æ¡ˆè·‘ä¸è·‘çš„é€šè§£å†³ã€‚</p>
<p>æ‰€ä»¥å¹²è„†å°±æŠŠ <code>prepay_id= xxx</code> åé¢çš„ <code>xxx</code> å•ç‹¬å–å‡ºæ¥ã€‚åé¢è°ƒç”¨ <code>requestPayment</code> å†æ‹¼ä¸Šã€‚</p>
<hr>
<h2 id="æœ€ç»ˆä»£ç "><a href="#æœ€ç»ˆä»£ç " class="headerlink" title="æœ€ç»ˆä»£ç "></a>æœ€ç»ˆä»£ç </h2><p>æœ€åæˆ‘æµ‹è¯•é€šè¿‡çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// H5 å†…</span></span><br><span class="line">wx.miniProgram.navigateTo(&#123;</span><br><span class="line">  url: <span class="string">"/pages/wxpay/wxpay?time="</span> + info.wx_time + <span class="string">"&amp;nounce="</span> + info.wx_noncenum + <span class="string">"&amp;package="</span>+info.wx_package.split(<span class="string">"="</span>)[<span class="number">1</span>] + <span class="string">"&amp;sign="</span> + info.wx_sign</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°ç¨‹åºå†…</span></span><br><span class="line">Page(&#123;</span><br><span class="line">  onLoad(options) &#123;</span><br><span class="line">    <span class="keyword">const</span> obj = &#123;</span><br><span class="line">      <span class="string">'timeStamp'</span>: options.time,</span><br><span class="line">      <span class="string">'nonceStr'</span>: options.nounce,</span><br><span class="line">      <span class="string">'package'</span>: <span class="string">"prepay_id="</span> + options.package,</span><br><span class="line">      <span class="string">'signType'</span>: <span class="string">'MD5'</span>,</span><br><span class="line">      <span class="string">'paySign'</span>: options.sign,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    wx.requestPayment(&#123;</span><br><span class="line">      ...obj,</span><br><span class="line">      success(res) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'success'</span>, res)</span><br><span class="line">      &#125;,</span><br><span class="line">      fail(res) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'fail'</span>, res)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç›¸è¾ƒäºæ­£å¸¸çš„ç›´æ¥åœ¨è®¢å•é¡µä¸‹è®¢å•ï¼Œè¿™é‡Œå¤šäº†ä¸€æ­¥ï¼Œå°±æ˜¯ä»H5è·³è¿‡æ¥åï¼Œè¿˜è¦æ‹‰èµ·å°ç¨‹åºçš„ä¸€ä¸ªæ”¯ä»˜é¡µï¼Œå•ç‹¬æ‹‰èµ·æ”¯ä»˜æ¡†ã€‚</p>
<p>ä½“éªŒå½“ç„¶æ˜¯æ²¡æœ‰å®Œå…¨åœ¨å°ç¨‹åºä¸­ï¼Œä¸åµŒå…¥H5å¥½çš„ã€‚å¦‚æœæ˜¯è¦å¿«é€Ÿè¿­ä»£å¼€å‘çš„è¯ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§æ–¹æ³•ã€‚</p>
<p>æ€»ä¹‹çŸ¥é“äº†è¿™æ˜¯ä¸€ç§æ›¿ä»£çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ–è€…è¯´ä¸€ç§æ²¡æœ‰åŠæ³•çš„åŠæ³•ã€‚ğŸ“šğŸŒ²è¿˜æ˜¯å¾ˆå¼€å¿ƒçš„ã€‚</p>
<p>æœ€åæ¬¢è¿æ¥åˆ°å¾®ä¿¡-&gt;é’±åŒ…å…¥å£çš„Qbå……å€¼å…¥å£æ¥å……å„ç§æ¸¸æˆå¸ï¼ŒQb, åŒ…æœˆæœåŠ¡å“¦ã€‚æœ‰çš„æ—¶å€™è¿˜æœ‰ä¼˜æƒ ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è‡ªä»å°ç¨‹åºå‡ºæ¥åï¼Œä½ è‚¯å®šæœ‰è¿™æ ·çš„æƒ³æ³•ã€‚å°ç¨‹åºå†…éƒ¨åˆ†é¡µé¢å¥½æƒ³å¤ç”¨ä»¥å‰çš„H5ï¼Œé‡å¤çš„å»å¼€å‘æµªè´¹äº†å¤§é‡çš„æ—¶é—´å’Œç²¾åŠ›ã€‚ ä½†æ˜¯å†…åµŒåœ¨å°ç¨‹åºä¸­çš„H5ä¸æ”¯æŒæ‹‰èµ·å¾®ä¿¡æ”¯ä»˜ã€‚ä¹Ÿå°±æ˜¯è¯´å°ç¨‹åºå†…ï¼Œå°ç¨‹åºåµŒå…¥çš„H5å†…åªèƒ½è°ƒç”¨å°ç¨‹åºæ”¯ä»˜ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="å°ç¨‹åº" scheme="http://sevencai.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>æ™šæ¥çš„æ—¥æœ¬ä¹‹è¡Œ</title>
    <link href="http://sevencai.github.io/2018/06/02/%E6%99%9A%E6%9D%A5%E7%9A%84%E6%97%A5%E6%9C%AC%E4%B9%8B%E8%A1%8C/"/>
    <id>http://sevencai.github.io/2018/06/02/æ™šæ¥çš„æ—¥æœ¬ä¹‹è¡Œ/</id>
    <published>2018-06-02T06:48:05.000Z</published>
    <updated>2018-06-02T08:18:17.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>å…¶å®å•Šï¼Œæ—…è¡Œçš„æ„ä¹‰ï¼Œä¸ä¸€å®šè¦æ˜¯è·¯ä¸Šçš„é£æ™¯ï¼Œæ›´æ˜¯ä½ è·¯ä¸Šçš„åŒè¡Œäººã€‚ 2018å¹´5æœˆ23 åˆ° 27 æˆ‘åœ¨æ—¥æœ¬ã€‚</p>
</blockquote>
<h2 id="TOP-10"><a href="#TOP-10" class="headerlink" title="TOP 10"></a>TOP 10</h2><ol>
<li>å¹²å‡€æ•´æ´çš„æ—¥æœ¬è¡—é“</li>
<li>æš–å¿ƒè´Ÿè´£çš„é¢†é˜Ÿå°å“¥å“¥  ğŸ’–</li>
<li>æœ‰è¶£æœ‰çˆ±çš„åŒä¼´  ğŸšš</li>
<li>æ¢…ç”°çš„è´­ç‰©ä¸­å¿ƒ  â„ï¸</li>
<li>250 çš„ç‰›è‚‰è‡ªåŠ©é¤</li>
<li>å¤§é˜ªå¤§å­¦çš„ç‹è€…è£è€€</li>
<li>å¸…æ°”çš„æ—¥æœ¬å°å“¥å“¥</li>
<li>è€é¾„åŒ–çš„æ—¥æœ¬  ğŸ’³</li>
<li>å¥½ï¼ˆç¬¬å››å£°ï¼‰åƒå¯çˆ±çš„å°é¹¿</li>
<li>æœ€çˆ±çš„è®¸åŠ äºŒå’Œæ¶›å“¥  ğŸ’</li>
</ol>
<hr>
<h2 id="æœ€çˆ±çš„å›¾ç‰‡"><a href="#æœ€çˆ±çš„å›¾ç‰‡" class="headerlink" title="æœ€çˆ±çš„å›¾ç‰‡"></a>æœ€çˆ±çš„å›¾ç‰‡</h2><p><img src="jp4.jpg" alt="å¥ˆè‰¯çš„å°é¹¿"><br>æˆ–è®¸æ˜¯å¤ªä¹…æ²¡æœ‰æœºä¼šè·ŸåŠ¨ç‰©æ¥è§¦äº†ã€‚çœ‹åˆ°å¥¹ä»¬ç®€ç›´ä¸èƒ½è‡ªæ‹”ï¼Œå¥½æƒ³ä¸€ç›´å–‚å¥¹ä»¬ä¸œè¥¿åƒã€‚ä¸Šç½‘æŸ¥äº†ä¸‹ï¼Œå¥¹ä»¬çš„ç‚¹å¤´è¦åƒçš„ï¼Œå®é™…åœ¨åŠ¨ç‰©ç•Œå¹¶ä¸æ˜¯è¡¨ç¤ºå‹å¥½çš„è¡Œä¸ºï¼Œè¶Šçˆ±é èº¬çš„å°é¹¿ï¼Œå…¶å®æ”»å‡»æ€§å°±è¶Šå¼ºã€‚ä½†æ˜¯å•Šï¼Œå¥¹ä¸€ç‚¹å¤´ï¼Œä½ å°±ä¸èˆå¾—ä¸ç»™å¥¹åƒä¸œè¥¿ã€‚</p>
<p><img src="jp1.jpg" alt="å¹²å‡€æ¼‚äº®çš„æˆ¿å­"></p>
<p>ä¸Šé¢è¿™å¼ å›¾ç‰‡ï¼Œæ˜¯ç¬¬ä¸€å¤©é…’åº—èµ·æ¥åï¼Œæˆ‘è·Ÿå®¤å‹å»å¤–è¾¹é€›çš„æ—¶å€™æ‹çš„ã€‚å°æ²³ç‰¹åˆ«å¹²å‡€ï¼Œæˆ¿å­é¢œè‰²ç‰¹åˆ«ç¾ã€‚</p>
<p><img src="jp2.jpg" alt="é›¨ä¸­çš„å°æˆ¿å­"></p>
<p>è¿™å¼ å›¾ç‰‡æ˜¯ç¬¬ä¸€å¤©èµ¶åˆ°é…’åº—çš„æ—¶å€™ï¼Œå¤©ä¸‹èµ·äº†å°é›¨ï¼Œå¤–è¾¹æœ‰åƒå¤§ç†Šå®¶ä¸€æ ·çš„æˆ¿å­ğŸ¡ã€‚è§‰å¾—ç‰¹åˆ«çš„èˆ’æœã€‚</p>
<p><img src="jp6.jpg" alt="è¯å¦†åº—é—¨å£çš„å°ç‹—"><br>å°ç‹—è¿‡å¾—ä¸å¼€å¿ƒå—ï¼Ÿä¸ºä»€ä¹ˆçœ¼é‡Œä¼šæœ‰æ‚²ä¼¤å’Œéš¾è¿‡ã€‚</p>
<p><img src="jp5.jpg" alt="å¯çˆ±çš„å°æœ‹å‹"><br>çŒœçŒœæˆ‘æƒ³æ‹çš„å°æœ‹å‹æ˜¯ï¼Ÿ</p>
<p><img src="jp3.jpg" alt="é…’åº—çš„å¤–æ™¯"><br>ç™½è‰²çš„èˆ¹ï¼Œè“è“çš„æµ·ï¼Œé«˜é«˜çš„æ ‘ï¼Œç™½è‰²çš„æ¡Œå­å’Œæ¤…å­ï¼Œç»¿è‰²çš„å±±ã€‚ï¼ˆåŸè°…æˆ‘çš„è¯­æ–‡æ°´å¹³ï¼Œåªèƒ½æè¿°æˆè¿™ç§æ°´å¹³äº†ï¼‰</p>
<p><img src="jp7.jpg" alt="nuonuonuoyasuolong"><br>åƒç›¸æ‰‘é¤çš„æ—¶å€™ï¼Œä¸å¥½åƒã€‚ä¹Ÿæ²¡æœ‰åƒé¥±ğŸ˜ã€‚ä½†æ˜¯çœ‹åœ¨é€äº†æˆ‘ ç´¢éš† çš„ä»½ä¸Šï¼Œ5æ˜Ÿå¥½è¯„ã€‚</p>
<p><img src="jp10.jpg" alt="å°ç‹—"><br>å…¶å®ï¼Œå°è±¡æœ€æ·±çš„ä¸ä»…ä»…è¿™ä¸ªå°ç‹—ï¼Œè¿˜æœ‰ä»–çš„ä¸»äººã€‚ä¸»äººå¤§æ¦‚60å²ï¼Œæˆ‘çœ‹ç‹—ç‹—çš„æ—¶å€™ï¼Œä»–å†²æˆ‘ç¬‘äº†ä¸‹ï¼Œç„¶åè¯´äº†ä¸€ä¸²æˆ‘å¬ä¸æ‡‚çš„æ—¥è¯­ã€‚å¯èƒ½æ˜¯åœ¨è¯´ï¼Œæ²¡å…³ç³»ï¼Œä½ å¯ä»¥æ‘¸æ‘¸å®ƒï¼Œä»–ä¸å’¬äººã€‚</p>
<hr>
<h2 id="æœ€å€¼å¾—çš„äº‹æƒ…"><a href="#æœ€å€¼å¾—çš„äº‹æƒ…" class="headerlink" title="æœ€å€¼å¾—çš„äº‹æƒ…"></a>æœ€å€¼å¾—çš„äº‹æƒ…</h2><p>æœ€å€¼å¾—çš„äº‹æƒ…ï¼Œå½“ç„¶å°±æ˜¯è§åˆ°å¾ä½³2å•¦ã€‚çœ‹ç€å¥¹é‚£ä¸ªä¹±çš„è·ŸçŒªåœˆä¸€æ ·çš„å®¿èˆï¼Œæˆ‘è§‰å¾—æ˜¯æ—¶å€™è¦ç»™å¥¹çˆ¸çˆ¸æ‰“æŠ¥å‘Šäº†ï¼Œæ€ä¹ˆè¶Šé•¿å¤§è¶Šä¹±äº†å‘¢ï¼Ÿ ä»¥å‰æˆ‘ä»¬å®¿èˆ4ä¸ªï¼Œå¥¹è¿˜ç®—æ’å€’æ•°ç¬¬2çš„ï¼Œç°åœ¨è‚¯å®šæ˜¯å€’æ•°ç¬¬1äº†ã€‚</p>
<p>è§å¾—æ—¶é—´å¤ªå°‘äº†ï¼Œå·²ç»å°½æˆ‘æœ€å¤§çš„èƒ½åŠ›å»æŒ¤æ—¶é—´ã€‚ä»¥åè¦æ˜¯è¿˜å»æ—¥æœ¬ï¼Œæˆ‘ä¸€å®šè‡ªç”±è¡Œï¼Œç„¶åæ¯å¤©éƒ½è·Ÿå¥¹ç¡ã€‚ç™½å¤©ä¸€èµ·é€›åƒé€›åƒï¼Œå°±åƒæˆ‘ä»¬ä¸€èµ·å¤§å­¦çš„æ—¶å€™é‚£æ ·ã€‚</p>
<p>ä¸€ä¸ªäººåœ¨å¤–ï¼Œé‚£ç§æ— åŠ©çš„æ—¶å€™ï¼Œè‚¯å®šå¾ˆå¤šã€‚èµ¶ç´§å›å›½ï¼Œå¸¦ä½ åƒå°é¾™è™¾ã€‚ğŸ’—</p>
<p>åœ¨æˆ‘å»æ—¥æœ¬çš„æ—¶å€™ï¼Œæ¶›å“¥ä»–ä»¬éƒ¨é—¨çš„å›¢ï¼Œä¹Ÿæ­£å¥½åœ¨æ—¥æœ¬äº†ï¼Œæ‰€ä»¥å¾ˆä¸å®¹æ˜“çš„ï¼Œæˆ‘ä»¬åœ¨æ—¥æœ¬ä¹Ÿè§åˆ°äº†ï¼Œä»–ä»¬ä¸ºäº†é¡ºåº”æˆ‘çš„æ—¶é—´ï¼Œæ—¶é—´å¾ˆç´§å¼ ã€‚æˆ‘ä»¬çš„ç¼˜åˆ†ï¼Œè‚¯å®šè¿˜è¦æŒç»­å¾ˆä¹…ï¼Œå¾ˆä¹…ğŸŒ²ã€‚</p>
<hr>
<h2 id="è·¯ç—´çš„æˆ‘"><a href="#è·¯ç—´çš„æˆ‘" class="headerlink" title="è·¯ç—´çš„æˆ‘"></a>è·¯ç—´çš„æˆ‘</h2><p>å¦‚æœæ˜¯ä¸èµ¶çš„è·¯ç¨‹ï¼Œæˆ‘è‚¯å®šæ˜¯ä¸€ä¸ªäººæ…¢æ…¢æ‚ æ‚ çš„æ‰¾åœ°æ–¹ç©äº†ã€‚å°±ç®—è¿·è·¯äº†ä¹Ÿä¸è¦ç´§ï¼Œåæ­£æ€»èƒ½æ‰¾åˆ°å›å®¶çš„è·¯ã€‚ä½†æ˜¯è·Ÿå›¢ä¸ä¸€æ ·ï¼Œä¸€å®šè¦ä¿è¯å¤§å®¶ä¸ä¼šå› ä¸ºæˆ‘è€½è¯¯æ—¶é—´ã€‚æ‰€ä»¥æ•´ä¸ªè·¯ç¨‹æˆ‘å°±æ˜¯æ ¹æœ¬æ‘¸ä¸æ¸…ä¸œå—è¥¿åŒ—ã€‚è¿˜å¥½æœ‰å¾ä½³2ï¼Œå°æ™ºå’Œyunhuiã€‚</p>
<p>è®¤è·¯è¿™ä»¶äº‹ï¼Œæœ‰æ—¶å€™çœŸçš„æ„Ÿè§‰æ— èƒ½ä¸ºåŠ›ã€‚â˜¹ï¸</p>
<hr>
<h2 id="è´­ç‰©"><a href="#è´­ç‰©" class="headerlink" title="è´­ç‰©"></a>è´­ç‰©</h2><p>ç»™å¦ˆå¦ˆä»–ä»¬ä¹°äº†ä¸¤åŒé‹å­ï¼Œè¿˜ç»™å«‚å­ä¹°äº†å¾ˆå¤šæŠ¤è‚¤å“ï¼Œè¿˜ç»™åŒäº‹å¸¦äº†å¾ˆå¤šæŠ¤è‚¤å“ã€‚ç»™çˆ¸çˆ¸ä¹°äº†ä¸ªè¡¨ï¼Œå“¥å“¥å•¥éƒ½æ²¡ç»™ä¹°ã€‚å“ˆå“ˆï¼Œä»–è‚¯å®šæ€€ç–‘æˆ‘ä¸æ˜¯äº²å¦¹å¦¹ã€‚ä¸è¿‡ï¼Œæˆ‘ç»™ä»–å³å°†å‡ºç”Ÿçš„å°å®å®ï¼Œä¹°äº†è¡£æœã€‚ç»™è‡ªå·±è¿˜ä¹°äº†å¾ˆå¤šé¢è†œã€‚<br>é€šè¿‡ä¹°ä¸œè¥¿è¿™ä»¶äº‹æƒ…ï¼Œå‘Šè¯‰äº†æˆ‘ä¸€å®šè¦åŠªåŠ›å·¥ä½œï¼Œç„¶åèµšå¾ˆå¤šé’±ã€‚</p>
<p>ç¬¬ä¸€å¤©æ™šä¸Šï¼Œåƒäº†å¾ˆå¥½åƒçš„å†°æ·‡æ·‹ğŸ¨ã€‚è¶…çº§å¼€å¿ƒã€‚è¿˜å–äº†å¾ˆä¾¿å®œå¾ˆå¥½å–çš„é…¸å¥¶ï¼Œæ—¥æœ¬çš„ä¾¿åˆ©åº—ğŸªæ˜¯ä¸ªå¥½åœ°æ–¹ã€‚</p>
<hr>
<h2 id="è·¯ä¸Šçš„äººå„¿"><a href="#è·¯ä¸Šçš„äººå„¿" class="headerlink" title="è·¯ä¸Šçš„äººå„¿"></a>è·¯ä¸Šçš„äººå„¿</h2><p>æˆ‘è¿™æ¬¡çš„å®¤å‹ä¸æ˜¯è·Ÿæˆ‘ä¸€ä¸ªéƒ¨é—¨çš„ã€‚å½“æˆ‘æå‡ºï¼Œèƒ½ä¸èƒ½å¾ä½³2è·Ÿæˆ‘ä¸€èµ·ä½ä¸€æ™šä¸Šçš„æ—¶å€™ï¼Œå¥¹é©¬ä¸Šå°±ç­”åº”äº†ã€‚çœŸçš„å¥½è°¢è°¢ã€‚å·²ç»æ˜¯ä¸¤ä¸ªå­©å­çš„å¦ˆå¦ˆäº†ï¼Œç„¶è€Œä¸€ç‚¹éƒ½çœ‹ä¸å‡ºæ¥ã€‚ğŸ‘</p>
<p>æˆ‘çš„é¢†é˜Ÿï¼Œæ˜¯è·Ÿæˆ‘ä¸€ä¸ªéƒ¨é—¨çš„ï¼Œä½†æ˜¯ä»¥å‰ä»æ¥æ²¡æœ‰è§è¿‡ï¼Œå¯èƒ½æ˜¯æ²¡æœ‰å·¥ä½œä¸Šçš„äº¤é›†ï¼Œæˆ‘ä»¬é€šå¸¸ç§°å‘¼ä»–ä¸ºå°æ™ºã€‚å°æ™ºéå¸¸çš„é è°±ï¼Œä¹Ÿæ˜¯ä¸ªè¶…çº§æš–å¿ƒçš„å°å“¥å“¥ï¼Œæ¯æ¬¡éƒ½å¸®å¤§å®¶æŠŠäº‹æƒ…å®‰æ’çš„å¾ˆå¥½ã€‚ä¸çŸ¥é“ä»–è‡ªå·±æœ‰æ²¡æœ‰ç©å¥½ã€‚æ¯æ¬¡æ‰¾ä¸åˆ°åœ°æ–¹äº†ï¼Œå°±è·Ÿä»–æ‰“ç”µè¯ã€‚ä»–è¿˜æ¯æ¬¡éƒ½å¸®æˆ‘æè¡Œæã€‚è§‰å¾—å¥½æ¸©æš–ã€‚ç¬”èŠ¯ã€‚ğŸ’–</p>
<p>yunhui, æ˜¯è·Ÿæˆ‘ä¸€ä¸ªéƒ¨é—¨çš„ï¼Œä»¥å‰æ²¡æœ‰è§è¿‡ï¼Œä½†æ˜¯æœ‰é—®è¿‡ä»–é—®é¢˜ã€‚ä»–éå¸¸çš„çˆ±ç¬‘ï¼Œæ„Ÿè§‰ä¸€ç¬‘èµ·æ¥ï¼Œè®©åˆ«äººä¹Ÿä¼šå¼€å¿ƒã€‚yunhui ç»å¯¹æ˜¯ä¸ªæ—…è¡Œçš„å¥½ä¼™ä¼´ï¼Œæœ‰è¶³å¤Ÿçš„å¥½å¥‡å¿ƒï¼Œä¹Ÿæœ‰è¶³å¤Ÿçš„è€åŠ›ã€‚æ”»ç•¥ä¹Ÿåšçš„å¾ˆæ£’ï¼Œå…³é”®æ˜¯ä¹Ÿè®¤è·¯ã€‚ğŸ“š</p>
<p>æˆ‘å¸ˆçˆ¶ï¼Œjiaqian, é£å“¥ï¼Œèµµå®£ï¼Œå’¸é±¼, amyï¼Œ tinaå°±ä¸è¯´äº†ï¼Œä»¥å‰éƒ½å¾ˆç†Ÿäº†,å› ä¸ºä»–ä»¬åœ¨ï¼Œè®©æˆ‘è§‰å¾—è¿™æ¬¡æ—…è¡Œï¼Œä¸€ç‚¹éƒ½ä¸é™Œç”Ÿï¼Œä¹Ÿä¸æ‹˜è°¨ã€‚</p>
<p>æ‘é•¿ï¼Œç¬¬ä¸€æ¬¡è·Ÿä»–è¯´äº†è¯ï¼Œæ„Ÿè§‰å¥½å¼€å¿ƒï¼Œè¿˜è®°å¾—ä»–é‚£æ¬¡è¯¸è‘›äº®æŠŠæˆ‘ä»¬æ•´ä¸ªç»„è™çš„è¶…çº§éš¾å—ã€‚æ€»ç®—æ˜¯è®¤è¯†çœŸäººäº†ã€‚</p>
<p>æ—¥æœ¬çš„å°å§å§éƒ½è¯´è¯å¾ˆå°å£°ï¼Œå¾ˆæœ‰ç¤¼è²Œã€‚æ—¥æœ¬çš„å­¦ç”Ÿéƒ½ç©¿åˆ¶æœï¼Œæ„Ÿè§‰å¾ˆå¥½ã€‚å¾ˆå¸…æ°”ã€‚ğŸ˜Š</p>
<p>æ—¥æœ¬è€å¥¶å¥¶è·Ÿæˆ‘è¯´è°¢è°¢çš„æ—¶å€™ï¼Œæˆ‘å¥½æƒ³å›å¥¹ä¸ç”¨è°¢ã€‚ä½†æ˜¯æ†‹äº†åŠå¤©ï¼Œæ»¡è„¸é€šçº¢ï¼Œè¿˜æ˜¯ä¸€ä¸ªå­—éƒ½æ²¡æŒ¤å‡ºæ¥ã€‚</p>
<p>ç¬¬ä¸€å¤©æ™šä¸Šçš„é…’åº—çš„å°å§å§ï¼Œæƒ³æŠŠä¼è¿˜ç»™å¥¹ï¼Œä¸€è·¯ä¸Šï¼Œæƒ³äº†åŠå¤©æ€ä¹ˆè¿˜ç»™å¥¹ï¼Œç»“æœåˆ°äº†é‚£é‡Œï¼Œä¸€ä¸ªå­—éƒ½æ²¡æœ‰è¯´å‡ºæ¥ã€‚â˜¹ï¸</p>
<p>æˆ‘ä»¬çš„å¯¼æ¸¸ï¼Œæœ´å²›å¾ˆæ¸©å’Œï¼Œå·²ç»åŠ äº†ä»–å¾®ä¿¡ï¼ŒåŠ äº†åï¼Œæ•´ä¸ªæœ‹å‹åœˆï¼Œéƒ½æ˜¯ä»£è´­çš„æ¶ˆæ¯äº†ï¼Œå“ˆå“ˆã€‚æœ´å¯¼èŒèŒå“’ã€‚âœˆï¸</p>
<hr>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¾ˆå¼€å¿ƒçš„ä¸€æ¬¡æ—…è¡Œï¼Œè™½ç„¶ä¿¡ç”¨å¡ğŸ’³éƒ½æ²¡çŸ¥è§‰äº†ã€‚ä¸€ç”Ÿä¼šæœ‰å¾ˆå¤šæ—…è¡Œï¼Œä½†æ˜¯è¿™æ¬¡è‚¯å®šæ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚ä½ é‡åˆ°çš„é£æ™¯ï¼Œä½ é‡åˆ°çš„äººï¼Œä½ æ‹çš„ç…§ç‰‡ï¼Œä½ è„‘æµ·é‡Œé‚£ä¸ªçˆ·çˆ·çš„å¾®ç¬‘ï¼Œä½ å¯¹æŸäº›äººçš„æ„Ÿæƒ…ï¼Œåˆæˆ–è€…æ˜¯æ—…è¡Œä¸­ä¸é‚£ä¹ˆé¡ºåˆ©å¼€å¿ƒçš„åœ°æ–¹ï¼Œéƒ½æ˜¯æ—…è¡Œçš„å®è´µæ‰€åœ¨ã€‚</p>
<p>æˆ‘æœ‰çš„æ—¶å€™æƒ³ï¼Œäººç”Ÿé‚£ä¹ˆä¸å¯é¢„æµ‹ï¼Œä¹Ÿè®¸æ˜å¤©ä½ å°±æ²¡æœ‰æœºä¼šå»ä½“éªŒå¾ˆå¤šäº‹æƒ…ã€‚æ‰€ä»¥ä½ ä»Šå¤©åšçš„äº‹æƒ…ï¼Œä¼šä¸ä¼šæ˜¯æœ€åä¸€å¤©ä½ æƒ³åšçš„äº‹æƒ…ã€‚ä¸è¦åæ‚”ã€‚ä¹Ÿä¸è¦é—æ†¾ã€‚å› ä¸ºä¸Šå¸ç»™ä½ ç•™ä¸‹çš„è·¯ï¼Œéƒ½æ˜¯æœ‰ä»–çš„é“ç†ã€‚å¼€å¿ƒçš„ï¼Œä¸å¼€å¿ƒçš„ï¼Œå®ƒéƒ½æ˜¯ä½ ç”Ÿæ´»ä¸­ï¼Œæˆ–è€…è¯´å‘½è¿ä¸­çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>æˆ‘ç›¸ä¿¡ connecting the dotsã€‚ â¤ï¸ ğŸšš ğŸ“š ä»¥åæœ‰æœºä¼šè·Ÿå®¶äººä¸€èµ·å»ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å…¶å®å•Šï¼Œæ—…è¡Œçš„æ„ä¹‰ï¼Œä¸ä¸€å®šè¦æ˜¯è·¯ä¸Šçš„é£æ™¯ï¼Œæ›´æ˜¯ä½ è·¯ä¸Šçš„åŒè¡Œäººã€‚ 2018å¹´5æœˆ23 åˆ° 27 æˆ‘åœ¨æ—¥æœ¬ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;TOP-10&quot;&gt;&lt;a href=&quot;#TOP-10&quot; class=&quot;headerlink&quot; 
    
    </summary>
    
    
      <category term="ç”Ÿæ´»æ—¥å¿—" scheme="http://sevencai.github.io/tags/%E7%94%9F%E6%B4%BB%E6%97%A5%E5%BF%97/"/>
    
  </entry>
  
  <entry>
    <title>ä¼˜åŒ–ä»£ç ä¹‹throttle &amp; debounce</title>
    <link href="http://sevencai.github.io/2018/06/02/%E4%BC%98%E5%8C%96%E4%BB%A3%E7%A0%81%E4%B9%8B-throttle-debounce/"/>
    <id>http://sevencai.github.io/2018/06/02/ä¼˜åŒ–ä»£ç ä¹‹-throttle-debounce/</id>
    <published>2018-06-02T06:09:15.000Z</published>
    <updated>2018-06-02T06:39:56.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>è¿™å‡ å¤©ç¿»äº†ä¸‹ä»¥å‰å†™çš„ä»£ç ï¼Œå‘ç°è‡ªå·±ä»¥å‰è™½ç„¶æœ‰ç”¨ debounce æˆ–è€… throttle çš„æ„è¯†ï¼Œä½†æ˜¯ç¡®æ²¡æœ‰æŠŠä»£ç å°è£…çš„å¾ˆå¥½ã€‚æ¯”å¦‚æ²¡æœ‰ç”¨åˆ°é—­åŒ…å»å°è£… timer, è€Œæ˜¯æŠŠ timer æ”¾åœ¨äº† vue data çš„å˜é‡é‡Œã€‚å› æ­¤å°±å‡ºç°äº†è¿™ç¯‡æ–‡ç« ï¼Œæ€»ç»“ä¸‹ debounce å’Œ throttle è¿ç”¨åœºæ™¯ä»¥åŠå¯¹åº”çš„è‡ªå·±çš„å®ç°ã€‚å¹¶ä¸”é‡æ„äº†ä»¥å‰çš„ä»£ç ã€‚</p>
</blockquote>
<hr>
<h2 id="è¿ç”¨åœºæ™¯"><a href="#è¿ç”¨åœºæ™¯" class="headerlink" title="è¿ç”¨åœºæ™¯"></a>è¿ç”¨åœºæ™¯</h2><p>æ¯”å¦‚æˆ‘æ›¾ç»åœ¨ä¸€ä¸ªé¡¹ç›®é‡Œï¼Œå°±ä¸¤ç§åœºæ™¯éƒ½ç”¨åˆ°äº†ã€‚</p>
<p>ç¬¬ä¸€ç§æ¯”å¦‚å½“ç”¨æˆ·åœ¨æœç´¢æ¡†é‡Œè¾“å…¥äº†æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä¼šå»å‘åå°è¯·æ±‚ï¼Œæœç´¢å‡ºæ¥çš„å¯¹åº”ç»“æœã€‚ ä½†æ˜¯ç”¨æˆ·çš„è¾“å…¥å¯èƒ½æ˜¯ä¸æ–­çš„è¿›è¡Œçš„ï¼Œå¦‚æœæˆ‘æ¯æ¬¡éƒ½å»è¯·æ±‚ï¼Œé‚£ä¹ˆå…¶å®æ˜¯æ— æ•ˆå¹¶ä¸”æµªè´¹çš„ã€‚<strong>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨ç”¨æˆ·è¾“å…¥æœ€åä¸€ä¸ªå­—çš„æ—¶å€™ï¼Œå†å»å‘è¯·æ±‚ã€‚ ç”¨åˆ°çš„å°±æ˜¯ debounce çš„åŸç†ï¼Œæ¯æ¬¡çš„è¯·æ±‚éƒ½å»¶è¿Ÿä¸€æ®µæ—¶é—´å»å‘å‡ºï¼Œå½“æœ‰æ–°çš„è¯·æ±‚æ¥çš„æ—¶å€™ï¼Œæ¸…ç©ºä¸Šæ¬¡çš„è¯·æ±‚ï¼Œç„¶åé‡æ–°æ‰§è¡Œå»¶è¿Ÿä¸€æ®µæ—¶é—´å»è¯·æ±‚ï¼Œç›´åˆ°ç”¨æˆ·æ²¡æœ‰å†è¯·æ±‚çš„æ—¶å€™ï¼Œæ‰§è¡Œçš„å°±æ˜¯æœ€åä¸€æ¬¡å»¶è¿Ÿè¯·æ±‚</strong>ã€‚</p>
<p>è¿™ç§åªå»æ‰§è¡Œæœ€åä¸€æ¬¡çš„å°±æ˜¯æˆ‘ä»¬è¯´çš„ debounceã€‚å¯ä»¥æŠŠå®ƒç†è§£ä¸º<code>ç‹¬å å‹çš„å‡½æ•°</code>ã€‚</p>
<p>ç¬¬äºŒç§æ¯”å¦‚å½“ç”¨æˆ·æ»šåŠ¨çš„æ—¶å€™ï¼Œå½“æ»‘åˆ°äº†è¿™ä¸ªå­—æ¯å¼€å¤´çš„æ—¶å€™ï¼Œæç¤ºç»™ç”¨æˆ·ï¼Œä½ å·²ç»åˆ°äº† H å¼€å¤´çš„åˆ—è¡¨å†…å®¹äº†ã€‚æ­£å¸¸çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„åšæ³•æ˜¯ä¸€ç›´ç›‘å¬ scroll äº‹ä»¶ï¼Œç„¶åè®¡ç®—å½“å‰çš„ li æ˜¯ä¸æ˜¯åˆ°äº†å¯¹åº” H å­—æ¯å¼€å¤´äº†ï¼Œåˆ°äº†åˆ™è®¾ç½®ç›¸åº”çš„æç¤ºã€‚</p>
<p><strong>ä½†æ˜¯è¦çŸ¥é“ scroll äº‹ä»¶ï¼Œæ¯æ¬¡éƒ½ä¼šè§¦å‘å¾ˆå¤šæ¬¡ï¼Œå¦‚æœæ¯æ¬¡è¿›è¡Œç›¸åº”çš„è®¡ç®—ï¼Œå°±ä¼šå¾ˆå¡é¡¿ï¼Œå°¤å…¶åœ¨ä¸€äº›è€çš„æœºå™¨ä¸Šã€‚ é‚£ä¹ˆè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ç”¨ throttle äº†ï¼Œæ¯ä¸€æ®µäº‹ä»¶ï¼Œæ¯”å¦‚ 500 ms å»æ‰§è¡Œä¸€æ¬¡è®¡ç®—ï¼Œè€Œä¸æ˜¯æ¯æ¬¡ scroll éƒ½æ‰§è¡Œã€‚</strong></p>
<p>å¯ä»¥æŠŠ throttle ç†è§£ä¸º<code>èŠ‚åˆ¶å‹</code>çš„å‡½æ•°ã€‚</p>
<p>ä¸Šé¢ä¸¤ä¸ªæ˜¯æˆ‘é‡åˆ°è¿‡çš„ä¸¤ä¸ªåœºæ™¯ï¼Œå…·ä½“å…¶ä»–åœºæ™¯è¿˜å¯ä»¥å‚è€ƒï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“ onresize çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªæƒ³çŸ¥é“æœ€åä¸€æ¬¡çš„å¤§å°</span></span><br><span class="line"><span class="built_in">window</span>.onresize = debounce(caculate, <span class="number">500</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“ç”¨æˆ·ä¸€æ®µæ—¶é—´é¢‘ç¹ç‚¹å‡»æ—¶ï¼Œåªä»¥æœ€åä¸€æ¬¡ä¸ºæ ‡å‡†</span></span><br><span class="line">button.onclick = debounce(sendMail, <span class="number">300</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// onscroll æ—¶å®šä½å…ƒç´ </span></span><br><span class="line"><span class="built_in">window</span>.onscroll = throttle(caculatePosition, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¼ æ ‡ç§»åŠ¨ï¼Œmousemove äº‹ä»¶</span></span><br><span class="line"><span class="built_in">window</span>.onmousemove = throttle(getElement, <span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="å®ç°ä»£ç "><a href="#å®ç°ä»£ç " class="headerlink" title="å®ç°ä»£ç "></a>å®ç°ä»£ç </h2><p>åœ¨ underscore lodash é‡Œï¼Œéƒ½æœ‰ç›¸åº”çš„å®ç°äº†ã€‚ä½†æ˜¯æˆ‘æ„Ÿè§‰ä¸å¤ªå¥½ç†è§£é¢ï¼Œæ‰€ä»¥æŒ‰ç…§è‡ªå·±çš„ç†è§£ï¼Œå†™å‡ºäº†é€‚åº”è‡ªå·±çš„ debounce å’Œ throttleã€‚ å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * debounce</span><br><span class="line"> * @param fn</span><br><span class="line"> * @param wait</span><br><span class="line"> * @param leading</span><br><span class="line"> * @returns &#123;Function&#125;</span><br><span class="line"> */</span><br><span class="line">function debounce(fn, wait, &#123; leading = false &#125;) &#123;</span><br><span class="line">    let context,</span><br><span class="line">      args = arguments,</span><br><span class="line">      timer = null,</span><br><span class="line">      firstInvoke = true</span><br><span class="line"></span><br><span class="line">    function excute() &#123;</span><br><span class="line">      fn.apply(context, args)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return function () &#123;</span><br><span class="line">      context = this</span><br><span class="line"></span><br><span class="line">      if (firstInvoke &amp;&amp; leading) &#123;</span><br><span class="line">        excute()</span><br><span class="line">        firstInvoke = false</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      if (timer) &#123;</span><br><span class="line">        clearTimeout(timer)</span><br><span class="line">        timer = null</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      timer = setTimeout(excute, wait)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>leading å‚æ•°ç”¨äºæ§åˆ¶ç¬¬ä¸€æ¬¡æ˜¯å¦éœ€è¦åœ¨æœ€å¼€å§‹å°±è§¦å‘ä¸€æ¬¡ã€‚ä¸»è¦çš„æ€æƒ³å°±æ˜¯åªè¦é‡æ–°æœ‰è°ƒç”¨ï¼Œå°±æŠŠåŸæ¥çš„é‚£ä¸ªè¢«å»¶è¿Ÿæ‰§è¡Œäº†çš„æ–¹æ³•å–æ¶ˆã€‚ å–æ¶ˆçš„æ–¹æ³•æ˜¯è®¾ç½® timer ä¸º nullã€‚firstInvoke ç”¨äºæ ‡è¯†æ–¹æ³•çŸ¥å¦è¢«æ‰§è¡Œäº†ä¸€æ¬¡äº†ã€‚</p>
<p>ä¸‹é¢æ˜¯ throttle çš„å®ç°ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* throttle</span><br><span class="line">* @param fn</span><br><span class="line">* @param wait</span><br><span class="line">* @param leading</span><br><span class="line">* @param trailing</span><br><span class="line">* @returns &#123;Function&#125;</span><br><span class="line">*/</span><br><span class="line">function throttle(fn, wait, &#123; leading = true, trailing = true &#125;) &#123;</span><br><span class="line">    let context, lastExec = 0, timer, args, firstInvoke = true</span><br><span class="line"></span><br><span class="line">    function excute() &#123;</span><br><span class="line">      fn.apply(context, args)</span><br><span class="line"></span><br><span class="line">      lastExec = +new Date()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return function (...arg) &#123;</span><br><span class="line">      let now = +new Date()</span><br><span class="line"></span><br><span class="line">      args = arg</span><br><span class="line"></span><br><span class="line">      context = this</span><br><span class="line">      clearTimeout(timer)</span><br><span class="line"></span><br><span class="line">      if (firstInvoke &amp;&amp; leading) &#123;</span><br><span class="line">        excute()</span><br><span class="line">        firstInvoke = false</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      if (!lastExec) &#123;</span><br><span class="line">        lastExec = now</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      if (!!wait &amp;&amp; (now - lastExec) &gt;= wait) &#123;</span><br><span class="line">        excute()</span><br><span class="line">      &#125; else if (trailing) &#123;</span><br><span class="line">        timer = setTimeout(excute, wait)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>throttle å› ä¸ºæ˜¯æŒ‰é¢‘ç‡è§¦å‘ï¼Œæ‰€ä»¥æ¯æ¬¡çš„æ—¶é—´é—´éš”æ˜¯ç›¸åŒçš„ã€‚æ‰€ä»¥å½“æ²¡åˆ°è¯¥æ‰§è¡Œçš„æ—¶é—´ç‚¹çš„æ—¶å€™ï¼Œå°±æŠŠå‰©ä½™çš„æ—¶é—´é‡æ–°è®¾ç½®ç»™ setTimeout ã€‚wait å³ä¸ºå¤šå°‘ç§’æ‰§è¡Œä¸€æ¬¡çš„æ—¶é—´ã€‚çœ‹äº† underscroll é‡Œçš„æºç ï¼Œå®ƒè¿˜è®¾ç½®äº† trailing è¿™äº›å‚æ•°ã€‚trailing è¡¨ç¤ºå½“æœ€åä¸€æ¬¡æ²¡åˆ°æ‰§è¡Œæ—¶é—´æ—¶ï¼Œä½ ä¸æƒ³è¦å»¶è¿Ÿæ‰§è¡Œè¿™ä¸ªå‡½æ•°äº†ã€‚ä¹Ÿå°±æ˜¯æœ€åä¸€æ¬¡è°ƒç”¨å°†è¢«å¿½ç•¥ã€‚</p>
<p>ä¸‹é¢è´´ä¸€ä¸‹ underscroll çš„å®ç°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">// Returns a function, that, when invoked, will only be triggered at most once</span><br><span class="line">// during a given window of time. Normally, the throttled function will run</span><br><span class="line">// as much as it can, without ever going more than once per `wait` duration;</span><br><span class="line">// but if you&apos;d like to disable the execution on the leading edge, pass</span><br><span class="line">// `&#123;leading: false&#125;`. To disable execution on the trailing edge, ditto.</span><br><span class="line">_.throttle = function(func, wait, options) &#123;</span><br><span class="line">  var timeout, context, args, result;</span><br><span class="line">  var previous = 0;</span><br><span class="line">  if (!options) options = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  var later = function() &#123;</span><br><span class="line">    previous = options.leading === false ? 0 : _.now();</span><br><span class="line">    timeout = null;</span><br><span class="line">    result = func.apply(context, args);</span><br><span class="line">    if (!timeout) context = args = null;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  var throttled = function() &#123;</span><br><span class="line">    var now = _.now();</span><br><span class="line">    if (!previous &amp;&amp; options.leading === false) previous = now;</span><br><span class="line">    var remaining = wait - (now - previous);</span><br><span class="line">    context = this;</span><br><span class="line">    args = arguments;</span><br><span class="line">    if (remaining &lt;= 0 || remaining &gt; wait) &#123;</span><br><span class="line">      if (timeout) &#123;</span><br><span class="line">        clearTimeout(timeout);</span><br><span class="line">        timeout = null;</span><br><span class="line">      &#125;</span><br><span class="line">      previous = now;</span><br><span class="line">      result = func.apply(context, args);</span><br><span class="line">      if (!timeout) context = args = null;</span><br><span class="line">    &#125; else if (!timeout &amp;&amp; options.trailing !== false) &#123;</span><br><span class="line">      timeout = setTimeout(later, remaining);</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  throttled.cancel = function() &#123;</span><br><span class="line">    clearTimeout(timeout);</span><br><span class="line">    previous = 0;</span><br><span class="line">    timeout = context = args = null;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  return throttled;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>underscore æŠŠ throttle å’Œ debounce åˆ†å¼€æ¥å®ç°äº†ï¼Œä½†æ˜¯æœ‰äº›åˆ«çš„å°è£…çš„åº“åˆ™æ˜¯ç”¨ä¸€ä¸ªå‡½æ•°å®ç°ã€‚ä¸‹é¢æ˜¯ underscore debounce çš„å®ç°</p>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">// Returns a function, that, as long as it continues to be invoked, will not</span><br><span class="line">  // be triggered. The function will be called after it stops being called for</span><br><span class="line">  // N milliseconds. If `immediate` is passed, trigger the function on the</span><br><span class="line">  // leading edge, instead of the trailing.</span><br><span class="line">  _.debounce = function(func, wait, immediate) &#123;</span><br><span class="line">    var timeout, result;</span><br><span class="line"></span><br><span class="line">    var later = function(context, args) &#123;</span><br><span class="line">      timeout = null;</span><br><span class="line">      if (args) result = func.apply(context, args);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    var debounced = restArguments(function(args) &#123;</span><br><span class="line">      if (timeout) clearTimeout(timeout);</span><br><span class="line">      if (immediate) &#123;</span><br><span class="line">        var callNow = !timeout;</span><br><span class="line">        timeout = setTimeout(later, wait);</span><br><span class="line">        if (callNow) result = func.apply(this, args);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        timeout = _.delay(later, wait, this, args);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      return result;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    debounced.cancel = function() &#123;</span><br><span class="line">      clearTimeout(timeout);</span><br><span class="line">      timeout = null;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    return debounced;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>
</code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å‰©ä¸‹çš„æ—¶é—´å°±æ˜¯å»ä¼˜åŒ–ä»£ç å•¦ã€‚çœ‹äº†ä¸‹åˆ«äººçš„æºç ï¼Œç„¶åè‡ªå·±åˆæŒ‰ç…§è‡ªå·±çš„æ–¹å¼å®ç°äº†ä¸‹ï¼Œè¿˜æ˜¯å¾ˆæœ‰æ”¶è·çš„ã€‚</p>
<p>ä¸è¿‡ï¼Œå¦‚æœ underscore å·²ç»æœ‰è¿™ä¹ˆæˆç†Ÿçš„ä¸œè¥¿ï¼Œå®é™…ä¸Šï¼Œæˆ‘è§‰å¾—å¯ä»¥ä¸ç”¨é‡å¤çš„å»åšè¿™ä¸ªå·¥ä½œã€‚ç”¨åˆ«äººæˆç†Ÿçš„å†…å®¹å°±å¥½äº†ã€‚è‡ªå·±äº†è§£äº†åŸç†ï¼Œè‡ªå·±å¯ä»¥å®ç°ï¼Œæœ‰é—®é¢˜çŸ¥é“æ€ä¹ˆå»æŸ¥å°±å¥½ã€‚</p>
<p><img src="xixi.jpg" alt=""></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è¿™å‡ å¤©ç¿»äº†ä¸‹ä»¥å‰å†™çš„ä»£ç ï¼Œå‘ç°è‡ªå·±ä»¥å‰è™½ç„¶æœ‰ç”¨ debounce æˆ–è€… throttle çš„æ„è¯†ï¼Œä½†æ˜¯ç¡®æ²¡æœ‰æŠŠä»£ç å°è£…çš„å¾ˆå¥½ã€‚æ¯”å¦‚æ²¡æœ‰ç”¨åˆ°é—­åŒ…å»å°è£… timer, è€Œæ˜¯æŠŠ timer æ”¾åœ¨äº† vue data çš„å˜é‡é‡Œã€‚å› æ­¤å°±å‡ºç°äº†è¿™ç¯‡æ–‡ç« ï¼Œæ€»ç»“ä¸‹
    
    </summary>
    
    
      <category term="Javascript" scheme="http://sevencai.github.io/tags/Javascript/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³webpackç¼–è¯‘åå¯¼è‡´-webkit-boxè¢«å¼ºåˆ¶å»é™¤äº†çš„é—®é¢˜</title>
    <link href="http://sevencai.github.io/2018/05/11/%E8%A7%A3%E5%86%B3webpack%E7%BC%96%E8%AF%91%E5%90%8E%E5%AF%BC%E8%87%B4-webkit-box%E8%A2%AB%E5%BC%BA%E5%88%B6%E5%8E%BB%E9%99%A4%E4%BA%86%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <id>http://sevencai.github.io/2018/05/11/è§£å†³webpackç¼–è¯‘åå¯¼è‡´-webkit-boxè¢«å¼ºåˆ¶å»é™¤äº†çš„é—®é¢˜/</id>
    <published>2018-05-11T12:12:36.000Z</published>
    <updated>2018-05-11T12:29:35.000Z</updated>
    
    <content type="html"><![CDATA[<hr>
<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>ä»Šå¤©é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå‘ç°é‡æ„åŒäº‹çš„ dist css åœ¨æˆ‘è¿™é‡Œæœ‰å…¼å®¹æ€§é—®é¢˜ã€‚æˆ‘åªå¼•ç”¨äº†ä»–çš„æºæ–‡ä»¶ï¼Œæœªç»è¿‡ä»»ä½•æ›´æ”¹ã€‚æ’å¤„äº†ç”±äº Dom ç»“æ„ä¸åŒçš„åŸå› ä¹‹å¤–ï¼Œå”¯ä¸€çš„ä¸ä¸€æ ·çš„åœ°æ–¹ï¼Œå°±æ˜¯æˆ‘å¼•å…¥ä»–çš„æ–‡ä»¶åï¼Œåœ¨æœ¬åœ°è¿˜è¿›è¡Œäº†webpack ç¼–è¯‘ã€‚é‚£ä¹ˆé—®é¢˜åªèƒ½å‡ºåœ¨äº†è¿™é‡Œäº†ã€‚</p>
<p>ç»è¿‡å¯¹æ¯”ä¸¤ä»½æ–‡ä»¶å‘ç°ï¼Œå¯¹æ¯”å¦‚ä¸‹<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// é‡æ„åŒäº‹çš„css</span><br><span class="line"><span class="selector-class">.detail-title</span>&#123;</span><br><span class="line">	<span class="attribute">-ms-flex</span>:<span class="number">1</span>;</span><br><span class="line">	<span class="attribute">flex</span>:<span class="number">1</span>;</span><br><span class="line">	<span class="attribute">-webkit-box-flex</span>:<span class="number">1</span>;</span><br><span class="line">	<span class="attribute">box-flex</span>:<span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">// æˆ‘ç¼–è¯‘åçš„æ–‡ä»¶</span><br><span class="line"><span class="selector-class">.detail-title</span>&#123;</span><br><span class="line">	<span class="attribute">-ms-flex</span>:<span class="number">1</span>;</span><br><span class="line">	<span class="attribute">flex</span>:<span class="number">1</span>;</span><br><span class="line">	<span class="attribute">box-flex</span>:<span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å’¦ï¼Œ <code>-webkit-box-flex</code> ç«Ÿç„¶è¢«è‡ªåŠ¨å»é™¤äº†ã€‚éš¾é“è¯´åœ¨æŸç§ webpack æ’ä»¶ä¸‹ï¼Œ <code>-webkit-box</code> ä¼šè‡ªåŠ¨è¢«å»é™¤å—ï¼Ÿ</p>
<p>åœ¨ç½‘ä¸Šæœäº†ä¸‹ï¼Œå‘ç°ç¡®å®æ˜¯æœ‰è¿™ç§æƒ…å†µã€‚æœ‰äº›æ’ä»¶çš„æœºåˆ¶åˆ¤æ–­è¿™ä¸ªå†…å®¹æ˜¯ä¸éœ€è¦çš„ï¼Œå¼ºè¡Œè¢«å»é™¤äº†ã€‚å¯ä»¥çœ‹è¿™ä¸ª <a href="https://github.com/webpack/webpack/issues/2543" target="_blank" rel="noopener">issue</a>ã€‚</p>
<p>å³ä½¿ä½ æ˜¯ä½¿ç”¨äº† postCss, autoprefix å»æ·»åŠ äº†å‰ç¼€ï¼Œä½†æ˜¯ä½ ç”¨äº†å»é™¤çš„æ’ä»¶ä¹Ÿä¼šè¢«å»é™¤ã€‚</p>
<hr>
<h1 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h1><p>é¦–å…ˆçœ‹ä¸‹æ˜¯ä»€ä¹ˆæ’ä»¶å¯¼è‡´äº†ä½ çš„ä»£ç è¢«å¼ºåˆ¶çš„å»é™¤äº†ã€‚</p>
<p>å¤§æ¦‚çš„åŸå› å¯èƒ½æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<p><strong>æœ€å¼€å§‹å¯èƒ½æ˜¯ç”±äº <code>UglifyJsPlugin</code> ä¸­é»˜è®¤æŠŠ <code>minimize = true</code> å¼€å¯äº†ï¼Œ è€Œè¿™ä¸ªå­—æ®µåœ¨<code>css-loader</code>å’Œ<code>postcss-loader</code>ä¸­è®¾ç½®æˆ <code>true</code> ä¼šå¼€å¯ä¼˜åŒ–æ¨¡å¼ï¼Œæ‰€ä»¥ä¼šå¯¹ä»£ç è¿›è¡Œä¼˜åŒ–å‹ç¼©ã€‚<br>ä½† <code>css-loader</code> ä¸­åˆä¼šä½¿ç”¨ <code>cssnano</code> è¿›è¡Œå‹ç¼©ï¼Œ è€Œ <code>cssnano</code>ä¸­åˆä¼šè¿›è¡Œæ— å…³å‰ç¼€çš„æ¸…ç†ã€‚</strong></p>
<p>ä¸ºä»€ä¹ˆæ’ä»¶ç«Ÿç„¶ä¼šå½±å“åˆ°loader ? å¯ä»¥å…³æ³¨ä¸‹è¿™ä¸ª <a href="https://github.com/ShowJoy-com/showjoy-blog/issues/31" target="_blank" rel="noopener">issue</a>ã€‚</p>
<p>è¿™ä¸ªæ’ä»¶(UglifyJsPlugin) åœ¨ webpack2.x è²Œä¼¼å·²ç»ä¿®å¤äº†ã€‚ <code>css-loader</code>åŠ<code>autoprefixer</code>ä¹Ÿå·²ç»åšäº†ç›¸åº”çš„ä¼˜åŒ–å¤„ç†ã€‚å¦‚æœä½ æ²¡æœ‰å‡çº§ï¼Œä½ å¯ä»¥è®¾ç½®ä¸‹é¢çš„æ–¹å¼è¯•è¯•ï¼š</p>
<ol>
<li><p>css-loader ä¼ é€’å‚æ•°ï¼š<code>?minimize&amp;-autoprefixer</code></p>
</li>
<li><p>å‘ <code>autoprefixer</code> ä¼ é€’å‚æ•°</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">postcss: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [autoprefixer, cssnano(&#123; <span class="attr">safe</span>: <span class="literal">true</span> &#125;)];</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œå†æ£€æŸ¥ä¸‹ï¼Œä»£ç é‡Œæœ‰æ²¡æœ‰ç”¨åˆ°å…¶ä»–çš„å»é™¤ä¼˜åŒ–å·¥å…·ã€‚</p>
<p>æˆ‘è¿™è¾¹å‡ºçš„é—®é¢˜å°±æ˜¯åœ¨è¿™é‡Œã€‚ç”¨äº†<code>OptimizeCSSPlugin</code>,  å®ƒé»˜è®¤æŠŠå‰ç¼€ç»™å»æ‰äº†ã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ç›´æ¥æŠŠè¿™ä¸ª plugin åˆ é™¤äº†ã€‚ä¹‹æ‰€ä»¥æˆ‘è¿™é‡Œå¯ä»¥ç›´æ¥åˆ é™¤ï¼Œæ˜¯å› ä¸ºé‡æ„åŒäº‹ç»™åˆ°çš„å°±æ˜¯å»é™¤å‹ç¼©å¥½äº†çš„ã€‚æ²¡æœ‰å¿…è¦å†å»å‹ç¼©å»é™¤ä¸€æ¬¡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// Compress extracted CSS. We are using this plugin so that possible</span><br><span class="line">// duplicated CSS from different components can be deduped.</span><br><span class="line"></span><br><span class="line">new OptimizeCSSPlugin(&#123;</span><br><span class="line">  cssProcessorOptions: config.build.productionSourceMap</span><br><span class="line">    ? &#123; safe: true, map: &#123; inline: false &#125; &#125;</span><br><span class="line">    : &#123; safe: true &#125;</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>
<p>å†æ¥çœ‹ä¸‹ä¸ºä»€ä¹ˆç”¨äº†<code>OptimizeCSSPlugin</code>å»é™¤äº†prefixå‘¢ï¼Ÿçœ‹äº†ä¸‹æºç ï¼Œä¹Ÿæ˜¯åˆå¼•å…¥äº†<code>cssnano</code>ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>.options.cssProcessor === <span class="literal">undefined</span>) &#123;</span><br><span class="line">  <span class="keyword">this</span>.options.cssProcessor = <span class="built_in">require</span>(<span class="string">'cssnano'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h1 id="å¼•ç”³é—®é¢˜-ssi-æ‰¾ä¸åˆ°å®šä¹‰çš„å˜é‡"><a href="#å¼•ç”³é—®é¢˜-ssi-æ‰¾ä¸åˆ°å®šä¹‰çš„å˜é‡" class="headerlink" title="å¼•ç”³é—®é¢˜ - ssi æ‰¾ä¸åˆ°å®šä¹‰çš„å˜é‡"></a>å¼•ç”³é—®é¢˜ - ssi æ‰¾ä¸åˆ°å®šä¹‰çš„å˜é‡</h1><p><strong>ç”±è¿™ä¸ªæ‰“åŒ…çš„é—®é¢˜ï¼Œæƒ³åˆ°äº†å‰å‡ å¤©çš„å¦ä¸€ä¸ª webpack çš„é—®é¢˜ï¼Œ index.shtml æ–‡ä»¶ä¸­å¼•å…¥çš„ ssi, å¦‚æœå˜é‡ç”¨ ${variable} è¯»å–ï¼Œè€Œä¸æ˜¯$variable è¯»å–ï¼Œwebpack ç¼–è¯‘æ—¶å°±ä¼šæŠ¥é”™ã€‚</strong>ä½†å®é™…ä¸Šï¼Œè¿™ä¸¤ç§è¯­æ³•éƒ½æ˜¯å¯ä»¥è¢« server ç«¯è§£æçš„ã€‚æ¢ç©¶äº†ä¸‹ä¼šè¢«æŠ¥é”™çš„åŸå› ï¼š</p>
<p>webpack çš„ HtmlWebpackPlugin åœ¨ç¼–è¯‘æ¨¡æ¿çš„æ—¶å€™ï¼Œç”¨çš„æ˜¯ lodash çš„ template æ–¹å¼, ä¹Ÿå°±æ˜¯ <code>${variable}</code> çš„å½¢å¼ã€‚</p>
<p>æ‰€ä»¥ä½ ç”¨äº† ${variable} çš„å½¢å¼çš„è¯ï¼Œä»–å°±ä¼šå»ç¼–è¯‘è¿™ä¸ªå˜é‡ï¼Œä½†æ˜¯å‘¢ï¼Œè¿™ä¸ª variable ä½ æ˜¯ä» ssi ä¸Šè¯»çš„ï¼Œåˆæ²¡æœ‰å®šä¹‰ï¼Œå®ƒæ‰¾ä¸åˆ°ï¼Œæ‰€ä»¥å°±ä¼šæŠ¥é”™äº†ã€‚</p>
<p>æ‰€ä»¥å°±è€è€å®å®çš„ï¼Œå¦‚æœä½ ç”¨çš„ htmlWebpackPlugin å°±ç”¨ <code>$varialbe</code> çš„å½¢å¼å§ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// correct</span><br><span class="line">&lt;!--#include virtual=&quot;xxx.cgi?refresh_token=$wxRefreshToken&amp;appid=$wxAppid&quot; --&gt;&apos;;</span><br><span class="line"></span><br><span class="line">// wrong: wxAppid is not defined</span><br><span class="line">&lt;!--#include virtual=&quot;xxx.cgi?refresh_token=$wxRefreshToken&amp;appid=$&#123;wxAppid&#125;&quot; --&gt;&apos;;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="ç›¸å…³å‚è€ƒ"><a href="#ç›¸å…³å‚è€ƒ" class="headerlink" title="ç›¸å…³å‚è€ƒ"></a>ç›¸å…³å‚è€ƒ</h2><ol>
<li><a href="https://github.com/webpack/webpack/issues/283" target="_blank" rel="noopener">issue1: # Why does the UglifyJsPlugin affect other loaders?</a></li>
<li><a href="https://github.com/ShowJoy-com/showjoy-blog/issues/31" target="_blank" rel="noopener">issue2: # ã€Œå‰ç«¯ã€ä»UglifyJSPluginå¼ºåˆ¶å¼€å¯csså‹ç¼©æ¢ç©¶webpackæ’ä»¶è¿è¡Œæœºåˆ¶</a></li>
<li><a href="https://github.com/webpack/webpack/issues/2543" target="_blank" rel="noopener">issue3: # Using plugin â€œwebpack.optimize.UglifyJsPluginâ€ led to remove the style â€œdisplay: -webkit-flex;</a></li>
</ol>
<p>è§‰å¾—ç•¥å‘ã€‚è¿˜æ˜¯èŠ±äº†å¤§æ¦‚ä¸€ä¸‹åˆçœ‹è¿™ä¸ªé—®é¢˜ï¼Œå‘œå‘œå‘œ(à²¥ _ à²¥)!</p>
]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;
&lt;h1 id=&quot;é—®é¢˜&quot;&gt;&lt;a href=&quot;#é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜&quot;&gt;&lt;/a&gt;é—®é¢˜&lt;/h1&gt;&lt;p&gt;ä»Šå¤©é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå‘ç°é‡æ„åŒäº‹çš„ dist css åœ¨æˆ‘è¿™é‡Œæœ‰å…¼å®¹æ€§é—®é¢˜ã€‚æˆ‘åªå¼•ç”¨äº†ä»–çš„æºæ–‡ä»¶ï¼Œæœªç»è¿‡ä»»ä½•æ›´æ”¹ã€‚æ’å¤„äº†ç”±äº Do
    
    </summary>
    
    
      <category term="å·¥å…·" scheme="http://sevencai.github.io/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>å°ç¨‹åºæ”¯æŒåˆ†åŒ…åŠ è½½å’Œæ— éœ€ç”¨æˆ·æˆæƒè·å¾—å¤´åƒ</title>
    <link href="http://sevencai.github.io/2018/04/23/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%94%AF%E6%8C%81%E5%88%86%E5%8C%85%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%97%A0%E9%9C%80%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83%E8%8E%B7%E5%BE%97%E5%A4%B4%E5%83%8F/"/>
    <id>http://sevencai.github.io/2018/04/23/å°ç¨‹åºæ”¯æŒåˆ†åŒ…åŠ è½½å’Œæ— éœ€ç”¨æˆ·æˆæƒè·å¾—å¤´åƒ/</id>
    <published>2018-04-23T06:56:06.000Z</published>
    <updated>2018-04-23T07:06:23.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>ç»“è®ºï¼šå¢åŠ äº†åˆ†åŒ…åŠ è½½ç‰¹æ€§ï¼Œé€Ÿåº¦å¿«äº†å¾ˆå¤šã€‚ä¿®æ”¹äº†ç”¨æˆ·æˆæƒé€»è¾‘ï¼Œä½¿ç”¨ open-data èƒ½åŠ›æ”¹ä¸ºäº†å®Œå…¨ä¸ç”¨ç”¨æˆ·æˆæƒå³å¯è·å¾—æ˜µç§°å¤´åƒç¾¤åç§°ç­‰ã€‚</p>
</blockquote>
<hr>
<h1 id="æ”¹ç‰ˆæ•ˆæœ"><a href="#æ”¹ç‰ˆæ•ˆæœ" class="headerlink" title="æ”¹ç‰ˆæ•ˆæœ"></a>æ”¹ç‰ˆæ•ˆæœ</h1><p>æ˜ŸæœŸå…­çš„æ—¶å€™æŠŠæ‰‹è¾¹çš„å°ç¨‹åºæ”¹ä¸ºäº†åˆ†åŒ…åŠ è½½ã€‚äº§å“æ˜¯æ²¡æœ‰æè¿™ä¸ªéœ€æ±‚çš„ï¼Œä½†æ˜¯å¿ƒæƒ³ä¸‹æ¬¡åšå°ç¨‹åºçš„éœ€æ±‚ä¼°è®¡è¦å¾ˆä¹…ä»¥åäº†ï¼Œå°±æ˜ŸæœŸå…­åŠ äº†ä¸‹ç­ã€‚æ•ˆæœè¿˜æ˜¯å¾ˆå¥½çš„ã€‚</p>
<blockquote>
<p>é¦–å±åŠ è½½æ—¶é—´ç”±ï¼š 7.95s å‡å°‘åˆ°äº† 5.00s<br>å¹³å‡ cpu å æ¯”å³ï¼š19.19% å‡å°‘åˆ°äº† 4.77%</p>
</blockquote>
<p>æˆ‘å¹¶ä¸çŸ¥é“å¾ˆæ¸…æ¥šè¿™ä¸ªå¹³å‡ cpu å æ¯”æ˜¯æ€ä¹ˆè¢«ç®—å‡ºæ¥çš„ã€‚å¦‚æœè¿™ä¸ªæ•°æ®çš„å˜åŒ–èƒ½å¤Ÿå¾®ä¿¡å›¢é˜Ÿèƒ½å¤Ÿè§£é‡Šçš„æ›´è¯¦ç»†äº›å°±å¥½äº†ã€‚</p>
<p>åœ¨åˆ†åŒ…çš„åŠ è½½è¿‡ç¨‹ä¸­ï¼Œæ¯”å¦‚é¦–é¡µæ˜¯ä¸€ä¸ª packageAï¼Œ åˆ°åˆ—è¡¨é¡µæ˜¯ä¸€ä¸ª packageB, è¿™ä¸ªè¿‡ç¨‹åœ¨ç¬¬ä¸€æ¬¡è®¿é—®åˆ—è¡¨é¡µçš„æ—¶å€™ï¼Œä¼šå†å»ä¸‹è½½ä»£ç ã€‚å¾®ä¿¡åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¸®åŠ©äº†å¼€å‘è€…æ˜¾ç¤ºäº†æç¤ºï¼š ç±»ä¼¼äºé¡µé¢åŠ è½½ä¸­ã€‚ è¿™ä¸ªè¿˜æ˜¯å¾ˆå‹å¥½çš„ã€‚</p>
<p>ä½†æ˜¯ä½¿ç”¨åˆ†åŒ…åŠ è½½ç»™å¼€å‘è€…å¸¦æ¥çš„æˆæœ¬ä¹Ÿå¾ˆå¤§ï¼ŒåŸºæœ¬ä¸Šç›®å½•éƒ½è¢«æ›´æ”¹äº†ã€‚ç»“æ„ä¹Ÿè¢«æ›´æ”¹äº†ã€‚å…¶å®æˆ‘æ˜¯è§‰å¾—å¦‚æœèƒ½å¤Ÿä¸æ›´æ”¹ç›®å½•ï¼Œåªåœ¨ json é‡Œé¢é…ç½®å¥½æ‰“åŒ…çš„æ–¹æ¡ˆæ˜¯æœ€å¥½çš„ã€‚å…¶å®ä»”ç»†æƒ³æƒ³ä¸æ›´æ”¹ç›®å½•ä¹Ÿæ˜¯è¡Œçš„å§ï¼Ÿ</p>
<blockquote>
<p>å°ç¨‹åºç»å†è¿‡å‡ æ¬¡çš„â€œæ”¹ç‰ˆâ€ï¼Œæœ€å¼€å§‹çš„ pages, åæ¥çš„ component, å…ˆåœ¨çš„ subPackage, è™½ç„¶ä¸€ç›´å†å˜å¾—æ›´å¥½ï¼Œä½†æ˜¯å¯¹äºä¸€å¼€å§‹å°±å¼€å‘å°ç¨‹åºçš„å¼€å‘è€…æ¥è¯´ï¼Œæˆ–è€…è‡³å°‘å¯¹æˆ‘æ¥è¯´ï¼Œæ˜¯ä¸é‚£ä¹ˆå‹å¥½çš„ã€‚ä»¥åç­‰è¿™é‡Œé€æ¸æ›´åŠ æˆç†Ÿäº†ï¼Œåº”è¯¥ä¼šå¥½çš„ã€‚</p>
</blockquote>
<hr>
<h1 id="æ€ä¹ˆå¼€å‘åˆ†åŒ…åŠ è½½"><a href="#æ€ä¹ˆå¼€å‘åˆ†åŒ…åŠ è½½" class="headerlink" title="æ€ä¹ˆå¼€å‘åˆ†åŒ…åŠ è½½?"></a>æ€ä¹ˆå¼€å‘åˆ†åŒ…åŠ è½½?</h1><p>é¦–å…ˆå¼€å§‹æŠŠç›®å½•ç»“æ„å®šå¥½ï¼Œé…ç½®åœ¨ app.json é‡Œï¼Œè¿™ä¸ªé…ç½®å®é™…å°±æ˜¯å°ç¨‹åºä¼šæ€ä¹ˆåˆ†åŒ…åŠ è½½ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"pages"</span>: [</span><br><span class="line">    <span class="string">"pages/index/index"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"window"</span>: &#123;</span><br><span class="line">    <span class="string">"backgroundTextStyle"</span>: <span class="string">"light"</span>,</span><br><span class="line">    <span class="string">"navigationBarBackgroundColor"</span>: <span class="string">"#3b8cff"</span>,</span><br><span class="line">    <span class="string">"backgroundColor"</span>: <span class="string">"#3b8cff"</span>,</span><br><span class="line">    <span class="string">"navigationBarTitleText"</span>: <span class="string">"è…¾è®¯å……å€¼"</span>,</span><br><span class="line">    <span class="string">"navigationBarTextStyle"</span>: <span class="string">"light"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"subPackages"</span>: [</span><br><span class="line">	&#123;</span><br><span class="line">      <span class="string">"root"</span>: <span class="string">"result"</span>,</span><br><span class="line">	  <span class="string">"pages"</span>: [</span><br><span class="line">        <span class="string">"pages/result/result"</span></span><br><span class="line">	  ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"root"</span>: <span class="string">"userCenter"</span>,</span><br><span class="line">	  <span class="string">"pages"</span>: [</span><br><span class="line">        <span class="string">"pages/user_center/user_center"</span></span><br><span class="line">	  ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šé¢çš„ç›®å½•ç»“æ„ï¼Œé™¤äº†ä¸ªäººä¸­å¿ƒä»¥åŠç»“æœé¡µä»¥å¤–çš„å†…å®¹éƒ½æ˜¯ä¼šåœ¨ç¬¬ä¸€æ¬¡ä¸‹è½½äº†ã€‚ å¾…é¡µé¢è·³è½¬åˆ° result ç»“æœé¡µï¼Œç›¸å…³ä»£ç æ‰ä¼šè¢«ä¸‹è½½å¹¶åŠ è½½ã€‚</p>
<p>æ³¨æ„ç”±äºé¡µé¢çš„ç›®å½•å‘ç”Ÿäº†å˜åŒ–ï¼Œä»¥å‰å¦‚æœæ˜¯é€šè¿‡ç›¸å¯¹è·¯å¾„å¼•ç”¨å¦‚ util é‡Œçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆè·¯å¾„éƒ½æ˜¯è¦æ›´æ”¹çš„ã€‚å»ºè®®è¿™é‡Œéƒ½ä½¿ç”¨ <code>/images/a.png</code> or <code>/utils/a.js</code>è¿™ç§ç»å¯¹è·¯å¾„æ¯”è¾ƒå¥½ã€‚</p>
<hr>
<h1 id="æ€ä¹ˆè·å¾—æ˜µç§°è¿˜ä¸éœ€è¦ç”¨æˆ·æˆæƒï¼Ÿ"><a href="#æ€ä¹ˆè·å¾—æ˜µç§°è¿˜ä¸éœ€è¦ç”¨æˆ·æˆæƒï¼Ÿ" class="headerlink" title="æ€ä¹ˆè·å¾—æ˜µç§°è¿˜ä¸éœ€è¦ç”¨æˆ·æˆæƒï¼Ÿ"></a>æ€ä¹ˆè·å¾—æ˜µç§°è¿˜ä¸éœ€è¦ç”¨æˆ·æˆæƒï¼Ÿ</h1><p>å‰å¤©å¾®ä¿¡å‘å¸ƒäº†æ–°çš„æ–‡ç« ï¼Œåœ°å€<a href="https://mp.weixin.qq.com/s/FTVGVXHSWPlYN1oQTzj-mA" target="_blank" rel="noopener">æˆ³è¿™é‡Œ</a>,é‡Œé¢è®²åˆ°äº†ï¼š</p>
<blockquote>
<p> ç”¨æˆ·åœ¨æ²¡æœ‰ä»»ä½•æ“ä½œçš„æƒ…å†µç›´æ¥å¼¹å‡ºæˆæƒçš„ç™»å½•æ–¹å¼å°†é€æ¸ä¸å†æ”¯æŒï¼Œå—å½±å“çš„æœ‰ wx.getUserInfo æ¥å£ï¼Œä»¥åŠ wx.authorize æ¥å£ä¼ å…¥ scope=â€scope.userInfoâ€ çš„æƒ…å†µã€‚</p>
</blockquote>
<p>å®ƒæ¨èäº†ä¸¤ç§åšæ³•ï¼š</p>
<blockquote>
<p>1ã€æŒ‰é’®ç»„ä»¶çš„ç™»å½•æ–¹å¼ï¼Œç”¨æˆ·ä¸»åŠ¨ç‚¹å‡»æŒ‰é’®å¯ä»¥æ‹‰èµ·ç”¨æˆ·æˆæƒå¼¹æ¡†ï¼Œè·å–ç”¨æˆ·å¤´åƒã€æ˜µç§°ç­‰ä¿¡æ¯ï¼›<br>2ã€åœ¨ä¸è·å–ç”¨æˆ·ä¿¡æ¯çš„æƒ…å†µä¸‹ï¼Œå¯å±•ç¤ºç”¨æˆ·å¤´åƒæ˜µç§°ã€‚</p>
</blockquote>
<p>ç¬¬ä¸€ç§ç”¨äºä½ çœŸçš„æ˜¯éœ€è¦è·å¾—åˆ°æ˜µç§°å’Œå›¾æ ‡ï¼Œåšä¸€äº›å…¶ä»–çš„å·¥ä½œï¼Œæ¯”å¦‚å­˜å‚¨çš„å·¥ä½œã€‚è¿™ç§æƒ…å†µï¼Œå¼€å‘è€…æ˜¯å¯ä»¥å¾—åˆ°æ˜µç§°å’Œå›¾æ ‡çš„å€¼çš„ã€‚ä½†æ˜¯å®ƒä¹Ÿéœ€è¦ç”¨æˆ·å»è§¦å‘ï¼Œæ¯”å¦‚ä½ ç‚¹å‡»ä¸ªäººä¸­å¿ƒçš„æ—¶å€™ï¼Œæ˜¯ä¸€ä¸ª btn, è¿™ä¸ª button, ä¼šè°ƒç”¨ getUserInfo è¿™ç§æ“ä½œã€‚</p>
<p><code>&lt;button open-type=&quot;getUserInfo&quot; bindgetuserinfo=&quot;userInfoHandler&quot;&gt;å¾®ä¿¡ç™»å½•&lt;/button&gt;</code></p>
<p>æ³¨æ„æ—¢ç„¶è¿˜æ˜¯è°ƒç”¨äº†æˆæƒï¼Œé‚£ä¹ˆä¸€å®šè¿˜æ˜¯ä¼šå¼¹æ¡†æç¤ºç”¨æˆ·æ˜¯å¦å…è®¸æˆæƒï¼Œå¦‚æœç”¨æˆ·æ‹’ç»äº†ä¹Ÿæ˜¯å¾—ä¸åˆ°çš„ã€‚</p>
<p>ç¬¬äºŒç§ï¼Œå¦‚æœä½ åªæ˜¯éœ€è¦ç”¨æˆ·çš„æ˜µç§°å’Œå¤´åƒå±•ç¤ºåœ¨é¡µé¢é‡Œï¼Œè€Œä¸æ˜¯çœŸæ­£çš„éœ€è¦è·å¾—è¿™äº›æ•°æ®å­˜å‚¨åœ¨æŸä¸ªåœ°æ–¹æˆ–è€…å‘åå°æ¥å£ä¼ é€’è¿™äº›å€¼ã€‚é‚£ä¹ˆå°±å‘Šåˆ«<code>wx.authorize</code>å’Œ<code>wx.getUserInfo</code>å§ã€‚</p>
<p>æˆ‘ä»”ç»†æƒ³äº†ä¸‹æˆ‘ä»¬çš„å……å€¼é¡µé¢ï¼Œå­˜å‚¨çš„éƒ½æ˜¯ openidï¼Œæ²¡æœ‰éœ€è¦å»çœŸæ­£çš„ç”¨åˆ° nickName å’Œ avatar è¿™äº›ã€‚åªæ˜¯ä¸ºäº†å†é¡µé¢å±•ç¤ºè€Œå·²ï¼Œæ‰€ä»¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;open-data type=&quot;groupName&quot; open-gid=&quot;xxxxxx&quot;&gt;&lt;/open-data&gt;</span><br><span class="line">&lt;open-data type=&quot;userAvatarUrl&quot;&gt;&lt;/open-data&gt;</span><br><span class="line">&lt;open-data type=&quot;userGender&quot; lang=&quot;zh_CN&quot;&gt;&lt;/open-data&gt;</span><br></pre></td></tr></table></figure>
<p>åˆ©ç”¨ open-data æ—¢å¯ä»¥å®Œç¾çš„è§£å†³å•¦ã€‚ ä¹Ÿå¯ä»¥ç»™å®ƒåŠ å…¥ class, è·Ÿæ­£å¸¸çš„ view æ˜¯ç±»ä¼¼çš„ã€‚</p>
<p>è¿™æ ·å°±å®Œç¾å•¦ï¼Œä»¥åå†ä¹Ÿä¸éœ€è¦ç”¨æˆ·æˆæƒå•¦ã€‚å˜¿å˜¿å˜¿ã€‚ï¼ˆäº§å“å¼€å¿ƒï¼Œæˆ‘ä¹Ÿå¼€å¿ƒï¼‰</p>
<p>å¯¹äº†è¿™é‡Œæ³¨æ„ï¼Œopen-data åªèƒ½åœ¨çœŸæœºä¸Šè¯•å‡ºæ¥ï¼Œæˆ‘çš„ç›®å‰ç‰ˆæœ¬çš„å¼€å‘è€…å·¥å…·æ˜¯å±•ç¤ºä¸å‡ºæ¥çš„ã€‚å¦‚æœä½ å¼€å‘è€…å·¥å…·ä¸Šå‡ºä¸æ¥ï¼Œå°±è¯•è¯•çœŸæœºã€‚å¯èƒ½æ˜¯ç‰ˆæœ¬åŸå› ã€‚</p>
<hr>
<h1 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h1><blockquote>
<p>å¾®ä¿¡ 6.6 å®¢æˆ·ç«¯ï¼Œ1.7.3 åŠä»¥ä¸ŠåŸºç¡€åº“å¼€å§‹æ”¯æŒï¼Œè¯·æ›´æ–°è‡³æœ€æ–°å®¢æˆ·ç«¯ç‰ˆæœ¬ï¼Œå¼€å‘è€…å·¥å…·è¯·ä½¿ç”¨ 1.01.1712150 åŠä»¥ä¸Šç‰ˆæœ¬</p>
</blockquote>
<p>æ³¨æ„è¿™é‡Œçš„åˆ†åŒ…åŠ è½½å¿…é¡»åœ¨1.7.3åŠä»¥ä¸Šå¼€å§‹æ”¯æŒã€‚ä¸ºäº†èƒ½å¤Ÿåœ¨ 1.7.3 ä»¥ä¸‹è‡³å°‘é¡µé¢æ­£å¸¸ã€‚ä½ å¯ä»¥å…¼å®¹ã€‚æˆ–è€…å†å¾®ä¿¡å…¬ä¼—å¹³å°åé¢æ¥è®¾ç½®ï¼Œæœ€ä½ç‰ˆæœ¬ä¸º 1.7.3,è¿™ç§æƒ…å†µä¸‹ï¼š</p>
<blockquote>
<p>è‹¥ç”¨æˆ·ä½¿ç”¨çš„åŸºç¡€åº“ç‰ˆæœ¬ä½äºè®¾ç½®çš„æœ€ä½ç‰ˆæœ¬è¦æ±‚ï¼Œåˆ™æ— æ³•æ­£å¸¸ä½¿ç”¨å°ç¨‹åºï¼Œå¹¶æç¤ºæ›´æ–°å¾®ä¿¡ç‰ˆæœ¬ã€‚</p>
</blockquote>
<p>open-data æ˜¯åœ¨ 1.4.4 ä»¥ä¸Šï¼Œå¥½åƒï¼Œæ‰€ä»¥å¦‚æœä½ è®¾ç½®äº†åˆ†åŒ…åŠ è½½çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªè‚¯å®šä¹Ÿæ²¡é—®é¢˜å•¦ã€‚</p>
<hr>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä¸»è¦æ˜¯ä»£ç ç›®å½•ç»“æ„æ”¹å˜äº†ï¼Œå¯¼è‡´æ¯”å¦‚ä»¥å‰ä»£ç é‡Œçš„ <code>navigateTo({url: &#39;../../result/result&#39;})</code>è·¯å¾„éƒ½éœ€è¦æ”¹å˜ï¼Œè¿™äº›è¯è´¹äº†æ—¶é—´é‡æ„ã€‚ä½†æ˜¯çœ‹åˆ°ç»“æœä¸Šæ˜¯å¿«äº†è¿™ä¹ˆå¤šçš„å°±å¥½ã€‚</p>
<p>è¿˜æœ‰å°±æ˜¯ä¸ºä»€ä¹ˆ page é‡Œä¸èƒ½ç”¨ behavior? åªæœ‰ component é‡Œé¢èƒ½ç”¨ï¼Ÿ è¿™ä¸ªæˆ‘æ„Ÿè§‰ä¸å¤ªåˆç†ã€‚vue é‡Œé¢ æ¯ä¸ª page ä¹Ÿæ˜¯ä¸€ä¸ª component æ¥ç€ã€‚</p>
<p>å…¶å®æ’ä»¶çš„åŠŸèƒ½æˆ‘ä¹Ÿæƒ³è¯•è¯•ï¼Œä½†æ˜¯ç°åœ¨è¿˜æ²¡æœ‰æƒ³åˆ°å¯ä»¥ä½¿ç”¨çš„åœºæ™¯ã€‚ä¹Ÿè®¸æ˜¯ä»¥åå¯ä»¥åƒäº¤æ˜“è®°å½•è¿™ç§åšæˆå°ç¨‹åºï¼Œåˆ«çš„å¤–éƒ¨ä¸šåŠ¡å°±å¯åŠ äº†å§ï¼Ÿ</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ç»“è®ºï¼šå¢åŠ äº†åˆ†åŒ…åŠ è½½ç‰¹æ€§ï¼Œé€Ÿåº¦å¿«äº†å¾ˆå¤šã€‚ä¿®æ”¹äº†ç”¨æˆ·æˆæƒé€»è¾‘ï¼Œä½¿ç”¨ open-data èƒ½åŠ›æ”¹ä¸ºäº†å®Œå…¨ä¸ç”¨ç”¨æˆ·æˆæƒå³å¯è·å¾—æ˜µç§°å¤´åƒç¾¤åç§°ç­‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h1 id=&quot;æ”¹ç‰ˆæ•ˆæœ&quot;&gt;&lt;a href=&quot;#æ”¹ç‰ˆæ•ˆæœ&quot; c
    
    </summary>
    
    
      <category term="å°ç¨‹åº" scheme="http://sevencai.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>é•¿åˆ—è¡¨å›¾ç‰‡ä¼˜åŒ–æ–¹å¼</title>
    <link href="http://sevencai.github.io/2018/03/22/%E9%95%BF%E5%88%97%E8%A1%A8%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96%E6%96%B9%E5%BC%8F/"/>
    <id>http://sevencai.github.io/2018/03/22/é•¿åˆ—è¡¨å›¾ç‰‡ä¼˜åŒ–æ–¹å¼/</id>
    <published>2018-03-22T09:57:50.000Z</published>
    <updated>2018-03-22T11:17:39.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>æœ€è¿‘åœ¨çš„ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæœ¬æ¥ä¸é•¿çš„åˆ—è¡¨é¡µå˜å¾—å¾ˆé•¿å¾ˆé•¿ã€‚å¹¶ä¸”æ¯ä¸ª<code>li</code>éƒ½ä¼šæœ‰ä¸€ä¸ªå›¾ç‰‡ã€‚è¿™å°±è¿«ä½¿æˆ‘å¿…é¡»è¦æƒ³åŠæ³•ä¼˜åŒ–è¿™ä¸ªé•¿åˆ—è¡¨äº†ã€‚ä»¥å‰æ€»ä»¥ä¸ºæ˜¯ä¸æ˜¯å¯¹äºé•¿åˆ—è¡¨è€Œè¨€æ€§èƒ½çš„ç“¶é¢ˆæ›´å¤šåœ¨ä¸ dom å’Œjs, ä½†æ˜¯å®é™…ä¸Šå›¾ç‰‡ä»ç„¶ä¹Ÿå å¾ˆå¤§ä¸€éƒ¨åˆ†ã€‚ä¸ºäº†ç”¨æˆ·è€ƒè™‘ï¼Œæ€ä¹ˆæ ·å‡å°‘å›¾ç‰‡å¸¦æ¥çš„æµé‡ï¼Œå¯¹äºèŠ‚çœå¸¦å®½åŠç”¨æˆ·çš„ç”µæ± ååˆ†é‡è¦ã€‚</p>
</blockquote>
<p>é•¿åˆ—è¡¨å¯ä»¥ä»ä»¥ä¸‹è¿™å‡ ä¸ªæ–¹é¢å»ä¼˜åŒ–ï¼š</p>
<hr>
<h1 id="å›¾ç‰‡æ‡’åŠ è½½"><a href="#å›¾ç‰‡æ‡’åŠ è½½" class="headerlink" title="å›¾ç‰‡æ‡’åŠ è½½"></a>å›¾ç‰‡æ‡’åŠ è½½</h1><p>å›¾ç‰‡æ‡’åŠ è½½ï¼Œé•¿åˆ—è¡¨æœ€å¤§çš„é—®é¢˜å°±æ˜¯å›¾ç‰‡å¤ªå¤šï¼Œå¦‚æœä¸€æ¬¡æ€§æŠŠå›¾ç‰‡å…¨éƒ¨è¯·æ±‚äº†ï¼Œé‚£ä¹ˆé¡µé¢æ¸²æŸ“é€Ÿåº¦ä¼šå¾ˆæ…¢ï¼Œå¦‚æœç”¨æˆ·ç‚¹ä¸åˆ°ï¼Œè¿˜ä¼šé€ æˆå¾ˆå¤§çš„æµªè´¹ï¼Œç”šè‡³ä¼šæœ‰æ€§èƒ½ç“¶é¢ˆã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ‡’åŠ è½½å‘¢ï¼Ÿä¸ºäº†åŠ é€Ÿé¡µé¢çš„åŠ è½½é€Ÿåº¦ï¼Œå‡å°‘ä¸å¿…è¦çš„è¯·æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†æœªå‡ºç°åœ¨å¯è§†åŒºåŸŸçš„å›¾ç‰‡å…ˆä¸åšåŠ è½½ï¼Œç­‰åˆ°æ»šåŠ¨åˆ°å¯è§†åŒºåŸŸä»¥åå†å»åŠ è½½ã€‚è¿™æ ·æå‡äº†æ€§èƒ½å’Œæé«˜äº†ç”¨æˆ·ä½“éªŒã€‚</p>
<p>é‚£ä¹ˆåŸç†å°±å¾ˆç®€å•äº†ï¼š<strong>ä¸€å¼€å§‹æ—¶ï¼Œæ‰€æœ‰å›¾ç‰‡éƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„ src, æŒ‡å‘æœ¬åœ°çš„ä¸€ä¸ª <code>default.png</code> ,å¹¶ä¸”æŠŠimgçš„çœŸå®çš„åœ°å€æ”¾åœ¨ <code>data-src</code>ä¸Šã€‚å½“æ»šåŠ¨æ—¶ï¼Œåˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨å¯è§†åŒºåŸŸï¼Œå¦‚æœåœ¨å¯è§†åŒºåŸŸ,é‚£ä¹ˆå†æŠŠ <code>data-src</code> ä¸Šçš„å€¼å†™å…¥çœŸæ­£çš„ src ä¸­ã€‚</strong></p>
<hr>
<h1 id="ä»å›¾ç‰‡æœ¬èº«ä¼˜åŒ–"><a href="#ä»å›¾ç‰‡æœ¬èº«ä¼˜åŒ–" class="headerlink" title="ä»å›¾ç‰‡æœ¬èº«ä¼˜åŒ–"></a>ä»å›¾ç‰‡æœ¬èº«ä¼˜åŒ–</h1><p>ç¬¬äºŒç§æ€è·¯å°±æ˜¯ä»å›¾ç‰‡çš„æœ¬èº«å»ä¼˜åŒ–ï¼Œæ¯”å¦‚æ›´æ¢å›¾ç‰‡æ ¼å¼ã€‚ç”± png,jpg,jpeg,gif è½¬æ¢ä¸ºæ›´å¥½çš„ webpã€‚</p>
<blockquote>
<p><strong>WebP çš„ä¼˜åŠ¿åœ¨ä¸å®ƒæ›´å¥½çš„å›¾åƒæ•°æ®å‹ç¼©ç®—æ³•ï¼Œèƒ½å¤Ÿå°†å›¾ç‰‡è½¬æ¢ä¸ºæ›´å°çš„ä½“ç§¯ï¼Œå…·æœ‰æ— æŸå’Œæœ‰æŸçš„å‹ç¼©æ¨¡å¼ã€‚å¦‚æœæ˜¯é€‰æ‹©äº†æœ‰æŸå‹ç¼©ï¼Œä¹Ÿæ‹¥æœ‰è‚‰çœ¼æ— æ³•è¯†åˆ«å·®å¼‚çš„å›¾åƒè´¨é‡ã€‚è™½ç„¶å®ƒåœ¨é¡µé¢æ¸²æŸ“çš„æ—¶å€™æµè§ˆå™¨æ¯”jpgä¼šèŠ±ç¨é•¿çš„æ—¶é—´è§£æå®ƒçš„ç®—æ³•ï¼Œä½†æ˜¯æƒè¡¡å®ƒæ‰€å¸¦æ¥çš„ä½“ç§¯çš„å‡å°‘æ¥çœ‹ï¼ŒWebP è¿˜æ˜¯æœ€ä¼˜ç§€çš„ã€‚</strong></p>
</blockquote>
<p>å…³äºå®ƒçš„æœ‰æŸå’Œæ— æŸæ¥è¯´ï¼Œæ— æŸçš„ä½“ç§¯å‡å°‘ä¼šç¨å¾®å°ä¸€äº›ï¼Œè€Œæœ‰æŸçš„ä½“ç§¯ä¼šå‡å°‘çš„éå¸¸å¤šã€‚å¦‚æœä¸æ˜¯å¯¹å›¾ç‰‡è´¨é‡è¦æ±‚å¾ˆå¤šï¼Œå¯¹äºä¸€èˆ¬çš„å›¾ç‰‡ï¼Œç”¨æœ‰æŸå°±å¾ˆå¥½äº†ã€‚<strong>webpæ— æŸå‹ç¼©å¯ä»¥å‡å°‘å›¾ç‰‡ä¸€åŠçš„å¤§å°è€Œè¾¾åˆ°åŒæ ·æ— æŸçš„æ•ˆæœã€‚</strong>å¯ä»¥çœ‹ä¸‹é¢ä¸€ä»½æ•°æ®ï¼š</p>
<blockquote>
<p>YouTubeçš„è§†é¢‘ç¼©ç•¥å›¾é‡‡ç”¨WebPåï¼Œç½‘é¡µåŠ è½½é€Ÿåº¦æå‡äº†10%ï¼›è°·æ­Œç½‘ä¸Šåº”ç”¨å•†åº—é‡‡ç”¨WebPåï¼Œæ¯å¤©å¯èŠ‚çœå‡ TBçš„å¸¦å®½ï¼Œé¡µé¢å¹³å‡åŠ è½½æ—¶é—´å¤§çº¦å‡å°‘1/3ï¼›è°·æ­Œç§»åŠ¨åº”ç”¨å¸‚åœºé‡‡ç”¨WebPå›¾ç‰‡æ ¼å¼åï¼Œæ¯å¤©èŠ‚çœäº†50TBçš„å­˜å‚¨ç©ºé—´ï¼›2014å¹´è…¾è®¯æ–°é—»å®¢æˆ·ç«¯åº”ç”¨äº†WebPåï¼Œæµé‡å³°å€¼å¸¦å®½é™ä½9GBï¼Œç½‘ç»œè¿æ¥å»¶æ—¶ä¸å˜çš„å‰æä¸‹ï¼Œå¹³å‡å›¾ç‰‡å»¶æ—¶å’Œæ•°æ®ä¸‹è½½å»¶æ—¶é™ä½äº†100msï¼›2014å¹´ç©ºé—´è£…æ‰®ä¹Ÿå…¨é‡è½¬æ¢æˆWebPï¼Œå¸¦å®½ä¸Šä¹Ÿæœ‰æ˜¾è‘—é™ä½ã€‚</p>
</blockquote>
<p>ä½†æ˜¯ WebP ä¸æ˜¯æ¯ä¸ªæµè§ˆå™¨éƒ½æ”¯æŒã€‚æ‰€ä»¥è¦å®è·µçš„è¯å¯ä»¥ä»ä¸‹é¢ä¸¤ä¸ªæ–¹é¢è€ƒè™‘ï¼š</p>
<p>ä»æœåŠ¡ç«¯è€ƒè™‘ï¼š<br>å¦‚æœæµè§ˆå™¨æ”¯æŒ WebP ,é‚£ä¹ˆä¼šåœ¨ request header  accepté‡Œï¼Œå‘é€<code>image/webp</code>, æœåŠ¡å™¨æ”¶åˆ°ä»¥åæ ¹æ®è¿™ä¸ªæ¥å»è¿”å›ç»™å®¢æˆ·ç«¯å›¾ç‰‡ã€‚è¯·æ±‚å¤´é‡Œæœ‰ï¼Œåˆ™å‘é€webpçš„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±å‘é€æ™®é€šjpgçš„ã€‚</p>
<p>ä¸è¿‡è¿™ä¸ªå¯¹æœåŠ¡å™¨è¦æ±‚æ¯”è¾ƒé«˜ï¼Œå¹¶ä¸”ç°åœ¨å›¾ç‰‡å¤§å¤šæ”¾åœ¨ <code>CDN</code> ä¸Šï¼Œ<code>CDN</code>å»åšè¿™ç§ç­–ç•¥å¯èƒ½ä¼šç¨å¾®éº»çƒ¦ç‚¹ã€‚</p>
<p>ä»å‰ç«¯è€ƒè™‘ï¼š<br>å‰ç«¯å»æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒ WebP, æ”¯æŒå°±å‘é€ WebP çš„å›¾ç‰‡è¯·æ±‚ï¼Œä¸æ”¯æŒå°±å‘é€ JPG,PNG ç­‰çš„ã€‚ä¸‹é¢æ˜¯ä¸€è¡Œä»£ç åˆ¤æ–­æ˜¯å¦æ”¯æŒWebPã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var isSupportWebp = !!\[\].map &amp;&amp; document.createElement(&apos;canvas&apos;).toDataURL(&apos;image/webp&apos;).indexOf(&apos;data:image/webp&apos;) == 0;</span><br></pre></td></tr></table></figure>
<p><code>!!\[\].map</code>ä¸»è¦æ˜¯åˆ¤æ–­æ˜¯å¦æ˜¯IE9+ï¼Œä»¥å…<code>toDataURL</code>æ–¹æ³•ä¼šæŒ‚æ‰ã€‚å¦‚æœä½ ç›´æ¥å¯¹æ•°ç»„åŸå‹æ‰©å±•äº†mapæ–¹æ³•ï¼Œåˆ™éœ€è¦ä½¿ç”¨<code>!!\[\].map</code>ä»¥å¤–çš„æ–¹æ³•è¿›è¡Œåˆ¤æ–­ï¼Œä¾‹å¦‚<code>!!window.addEventListener</code>ç­‰ã€‚</p>
<p>å“ˆå“ˆï¼Œè¿™ä¸ªæˆ‘æ˜¯å¶ç„¶åœ¨zhangxinxuçš„åšå®¢ä¸Šçœ‹åˆ°çš„ï¼Œæ„Ÿè§‰è¿™ä¸ªè¦æ¯”å…¶ä»–çš„æ–¹æ³•æ›´åŠ ç®€æ´å’Œå¥½ã€‚<a href="http://www.zhangxinxu.com/php/microCodeDetail.php?id=3" target="_blank" rel="noopener">åœ°å€åœ¨è¿™é‡Œã€‚</a></p>
<p>æœ€åæˆ‘æ²¡æœ‰åšè¿™ä¸€å±‚ä¼˜åŒ–ï¼Œå› ä¸ºå›¾ç‰‡å¤ªå¤šï¼Œå·²ç»è¢«å‘åˆ°äº†CDN ä¸Šï¼Œå›¾ç‰‡æºå¯èƒ½éƒ½ä¸åœ¨äº†ï¼Œæ²¡æœ‰è®©ä»–ä»¬å»æŠŠå›¾ç‰‡å˜æˆ WebPã€‚ å¦‚æœä¸€å¼€å§‹å°±é—® CDC çš„åŒäº‹è¦ä¸¤ç§å›¾ç‰‡æ ¼å¼å°±å¥½äº†ã€‚sadã€‚</p>
<hr>
<h1 id="ä»£ç å®ç°1"><a href="#ä»£ç å®ç°1" class="headerlink" title="ä»£ç å®ç°1"></a>ä»£ç å®ç°1</h1><p>é¦–å…ˆæœ‰ä¸¤ç§åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨å¯è§†åŒºåŸŸçš„æ–¹æ³•ï¼š</p>
<ol>
<li>offsetTop - scrollTop &lt; clientHeight ï¼Œä»£è¡¨åœ¨å¯è§†åŒºã€‚</li>
<li>IntersectionObserverï¼Œè¿™ä¸ª Api å¯ä»¥ç›´æ¥æ¥åˆ¤æ–­ã€‚</li>
</ol>
<p>æ³¨æ„å¯ä»¥ç”¨ throttle é˜²æ­¢è¯·æ±‚æ¬¡æ•°è¿‡é«˜ï¼Œåœ¨ä¸€å®šçš„æ—¶é—´èŒƒå›´å†…åªè¯·æ±‚1æ¬¡ã€‚ä¸‹é¢çš„ä»£ç æ˜¯éšæ„å†™çš„ï¼Œæ²¡æœ‰è·‘è¿‡ã€‚å¯ä»¥å½“åšä¼ªç æ¥çœ‹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">const checkVisible = (ele) =&gt; &#123;</span><br><span class="line">  let scrollTop = document.documentElement.scrollTop || document.body.scrollTop</span><br><span class="line">  let clientHeight = document.documentElement.clientHeight</span><br><span class="line"></span><br><span class="line">  return ele.offsetTop - scrollTop &lt; clientHeight</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let imgs = document.getElementsByTagName(&quot;img&quot;), nums = imgs.length</span><br><span class="line"></span><br><span class="line">const lazyLoad = () =&gt; &#123;</span><br><span class="line">  for (let i = 0; i &lt; nums; i++) &#123;</span><br><span class="line">    if (checkVisible(imgs[i]) &amp;&amp; imgs[i].getAttribute(&quot;src&quot;) === &quot;default.png&quot;) &#123;</span><br><span class="line">      imgs[i].src = imgs[i].getAttribute(&quot;data-src&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const throttle = (action, delay) =&gt; &#123;</span><br><span class="line">  let timeout = null</span><br><span class="line">  let lastRun = 0</span><br><span class="line">  return function () &#123;</span><br><span class="line">    if (timeout) &#123;</span><br><span class="line">      return</span><br><span class="line">    &#125;</span><br><span class="line">    let elapsed = Date.now() - lastRun</span><br><span class="line">    let context = this</span><br><span class="line">    let args = arguments</span><br><span class="line">    let runCallback = function () &#123;</span><br><span class="line">      lastRun = Date.now()</span><br><span class="line">      timeout = false</span><br><span class="line">      action.apply(context, args)</span><br><span class="line">    &#125;</span><br><span class="line">    if (elapsed &gt;= delay) &#123;</span><br><span class="line">      runCallback()</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      timeout = setTimeout(runCallback, delay)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">document.addEventListener(&quot;scroll&quot;, throttle(lazyLoad, 1000))</span><br></pre></td></tr></table></figure></p>
<hr>
<h1 id="ä»£ç å®ç°2"><a href="#ä»£ç å®ç°2" class="headerlink" title="ä»£ç å®ç°2"></a>ä»£ç å®ç°2</h1><p>å› ä¸ºé¡¹ç›®æœ¬èº«æ˜¯Vueå†™çš„ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿå»åœ¨ç½‘ä¸Šæ‰¾äº†ç›¸åº”çš„<code>directives</code>, å·²ç»æœ‰äº†å¾ˆå¥½çš„ä¸€äº›å®ç°ã€‚ä»–ä»¬çš„æ¯”è¾ƒå®Œæ•´ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªï¼š<a href="https://github.com/hilongjw/vue-lazyload" target="_blank" rel="noopener">https://github.com/hilongjw/vue-lazyload</a>ï¼Œç”¨æ³•å¾ˆç®€å•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Vue.use(VueLazyload, &#123;</span><br><span class="line">  preLoad: 1.3,</span><br><span class="line">  attempt: 2,</span><br><span class="line">  listenEvents: [&quot;scroll&quot;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ç„¶åå† img æ ‡ç­¾ä¸Šï¼Œä½¿ç”¨è¿™ä¸ª <code>directive</code>ï¼Œ <code>v-lazy</code> å³å¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img class=&quot;mod-service__pic&quot; v-lazy=&quot;list.icon&quot; aria-hidden=&quot;true&quot; v-bind:alt=&quot;list.name&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<hr>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åœ¨åšè¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘è¿˜çœ‹äº†ä¸€äº›å…¶ä»–çš„å†…å®¹ï¼Œæ¯”å¦‚ png8, png24, svg,è¿™äº›ã€‚ä¹Ÿå»çœ‹äº†ä¸‹vue-lazyloadè¿™ä¸ªåº“çš„æºç ã€‚æ”¶è´§å¤šå¤šã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æœ€è¿‘åœ¨çš„ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæœ¬æ¥ä¸é•¿çš„åˆ—è¡¨é¡µå˜å¾—å¾ˆé•¿å¾ˆé•¿ã€‚å¹¶ä¸”æ¯ä¸ª&lt;code&gt;li&lt;/code&gt;éƒ½ä¼šæœ‰ä¸€ä¸ªå›¾ç‰‡ã€‚è¿™å°±è¿«ä½¿æˆ‘å¿…é¡»è¦æƒ³åŠæ³•ä¼˜åŒ–è¿™ä¸ªé•¿åˆ—è¡¨äº†ã€‚ä»¥å‰æ€»ä»¥ä¸ºæ˜¯ä¸æ˜¯å¯¹äºé•¿åˆ—è¡¨è€Œè¨€æ€§èƒ½çš„ç“¶é¢ˆæ›´å¤šåœ¨ä¸ dom å’Œjs, ä½†æ˜¯å®é™…ä¸Šå›¾ç‰‡ä»ç„¶ä¹Ÿå å¾ˆå¤§ä¸€éƒ¨åˆ†ã€‚ä¸º
    
    </summary>
    
    
      <category term="Javascript" scheme="http://sevencai.github.io/tags/Javascript/"/>
    
  </entry>
  
  <entry>
    <title>isObjEmpty/once function/template rendering/cdnçš„å®ç°å’Œè§£é‡Š</title>
    <link href="http://sevencai.github.io/2018/03/21/isObjEmpty-once-function-template-rendering-cdn%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%92%8C%E8%A7%A3%E9%87%8A/"/>
    <id>http://sevencai.github.io/2018/03/21/isObjEmpty-once-function-template-rendering-cdnçš„å®ç°å’Œè§£é‡Š/</id>
    <published>2018-03-21T03:03:57.000Z</published>
    <updated>2018-03-21T03:18:23.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>æ€»ç»“äº†å‡ ç§åˆ¤æ–­ Object æ˜¯å¦ä¸ºç©ºçš„æ–¹æ³•<br>æ€»ç»“ once function (åªæ‰§è¡Œä¸€æ¬¡å‡½æ•°ä»£ç )<br>å®ç°ä¸¤ç§ç®€å•çš„å­—ç¬¦ä¸²æ¨¡æ¿æ›¿æ¢æ–¹æ³•<br>é‡æ–°å½’çº³æ€»ç»“äº†ä¸‹CDNå’ŒDNSçš„åè¯è§£é‡Š</p>
</blockquote>
<hr>
<h1 id="once-function-è®©å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡"><a href="#once-function-è®©å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡" class="headerlink" title="once function è®©å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡"></a>once function è®©å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡</h1><p>è¿™é‡Œåˆ©ç”¨äº†é—­åŒ…å¾ˆå¥½çš„ä¿å­˜äº†å†…å±‚å‡½æ•°çš„è¿”å›å€¼å†…å®¹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// å®šä¹‰</span><br><span class="line">const once = (fn, context) =&gt; &#123;</span><br><span class="line"> var result</span><br><span class="line"></span><br><span class="line"> return function () &#123;</span><br><span class="line">  if (fn) &#123;</span><br><span class="line">   result = fn.apply(context || this, arguments)</span><br><span class="line">   fn = null</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return result</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨</span><br><span class="line">let logOnce = once(function () &#123;</span><br><span class="line"> return Array.prototype.slice.call(arguments)[0]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">logOnce(4,5)  // get 4</span><br><span class="line">logOnce(6,7)  // get 4</span><br></pre></td></tr></table></figure></p>
<hr>
<h1 id="å®ç°ç®€å•çš„æ¨¡æ¿å­—ç¬¦ä¸²æ›¿æ¢"><a href="#å®ç°ç®€å•çš„æ¨¡æ¿å­—ç¬¦ä¸²æ›¿æ¢" class="headerlink" title="å®ç°ç®€å•çš„æ¨¡æ¿å­—ç¬¦ä¸²æ›¿æ¢"></a>å®ç°ç®€å•çš„æ¨¡æ¿å­—ç¬¦ä¸²æ›¿æ¢</h1><p>ç»å¸¸ä¼šæœ‰ä¸‹é¢çš„éœ€æ±‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let template = `æˆ‘å«&#123;&#123;name&#125;&#125;, æˆ‘çš„æ€§åˆ«æ˜¯&#123;&#123;sex&#125;&#125;`</span><br><span class="line">let person = &#123;</span><br><span class="line"> name: &apos;Seven&apos;,</span><br><span class="line"> sex: &apos;female&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(&apos;æˆ‘å«Seven, æˆ‘çš„æ€§åˆ«æ˜¯female&apos;)</span><br></pre></td></tr></table></figure></p>
<p>ä¸‹é¢æ˜¯ä¸€ç§ç®€å•çš„å®ç°ï¼ŒæŠŠæ¨¡æ¿å’Œå¯¹è±¡ï¼Œç»“åˆä¸ºç›®æ ‡å­—ç¬¦ä¸²ï¼Œæ–¹æ³•1å¦‚ä¸‹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const parseTemplateByRegFunc = (obj, template) =&gt; &#123;</span><br><span class="line"> return template.replace(/\&#123;\&#123;(.*?)\&#125;\&#125;/g, (match, key) =&gt; obj[key.trim()])</span><br><span class="line">&#125;</span><br><span class="line">parseTemplateByRegFunc(&#123;name: &apos;seven&apos;&#125;, &apos;æˆ‘å«&#123;&#123; name&#125;&#125;&apos;) // æˆ‘å«seven</span><br></pre></td></tr></table></figure></p>
<p>æ–¹æ³•2æ¯”è¾ƒå®¹æ˜“æƒ³åˆ°ï¼Œå®ç°å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const parseTemplateByObjectKeys = (obj, template) =&gt; &#123;</span><br><span class="line"> Object.keys(obj).forEach(key =&gt; &#123;</span><br><span class="line">  template = template.replace(new RegExp(`&#123;&#123;\\s*$&#123;key&#125;\\s*&#125;&#125;`, &apos;g&apos;), obj[key])</span><br><span class="line"> &#125;)</span><br><span class="line"></span><br><span class="line"> return template</span><br><span class="line">&#125;</span><br><span class="line">parseTemplateByObjectKeys(&#123;name: &apos;seven&apos;&#125;, &apos;æˆ‘å«&#123;&#123; name&#125;&#125;&apos;) // æˆ‘å«seven</span><br></pre></td></tr></table></figure></p>
<p>ç®€å•çš„æŠŠ obj é‡Œé¢æ¯ä¸ªkey éƒ½æ›¿æ¢ä¸€æ¬¡ã€‚æ–¹æ³•1ç”¨åˆ°çš„æ˜¯replaceçš„ç‰¹æ€§ã€‚</p>
<hr>
<h1 id="å…³äº-CDN"><a href="#å…³äº-CDN" class="headerlink" title="å…³äº CDN"></a>å…³äº CDN</h1><p>DNS æ˜¯åŸŸåè§£æç³»ç»Ÿï¼Œå®ƒä½œä¸ºå°†åŸŸåå’ŒIPåœ°å€ç›¸äº’æ˜ å°„çš„ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œèƒ½å¤Ÿä½¿äººæ›´æ–¹ä¾¿åœ°è®¿é—®äº’è”ç½‘ã€‚å…¶ä¸­æœ‰ä¸€é¡¹æŠ€æœ¯æ˜¯ä¼šæ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„IPç»™ç”¨æˆ·ã€‚è¿™ç§æ ¹æ®æ¯å°æœºå™¨çš„è´Ÿè½½é‡ï¼Œè¯¥æœºå™¨ç¦»ç”¨æˆ·åœ°ç†ä½ç½®çš„è·ç¦»ç­‰ç­‰ï¼Œè¿”å›åˆé€‚çš„IPçš„æŠ€æœ¯ç§°ä¹‹ä¸º DNS é‡å®šå‘ã€‚CDNå°±æ˜¯åˆ©ç”¨çš„DNSé‡å®šå‘æŠ€æœ¯ã€‚</p>
<blockquote>
<p>CDNçš„å…¨ç§°æ˜¯Content Delivery Networkï¼Œå³å†…å®¹åˆ†å‘ç½‘ç»œã€‚å…¶åŸºæœ¬æ€è·¯æ˜¯å°½å¯èƒ½é¿å¼€äº’è”ç½‘ä¸Šæœ‰å¯èƒ½å½±å“æ•°æ®ä¼ è¾“é€Ÿåº¦å’Œç¨³å®šæ€§çš„ç“¶é¢ˆå’Œç¯èŠ‚ï¼Œä½¿å†…å®¹ä¼ è¾“çš„æ›´å¿«ã€æ›´ç¨³å®šã€‚é€šè¿‡åœ¨ç½‘ç»œå„å¤„æ”¾ç½®èŠ‚ç‚¹æœåŠ¡å™¨æ‰€æ„æˆçš„åœ¨ç°æœ‰çš„äº’è”ç½‘åŸºç¡€ä¹‹ä¸Šçš„ä¸€å±‚æ™ºèƒ½è™šæ‹Ÿç½‘ç»œï¼Œ<strong>CDNç³»ç»Ÿèƒ½å¤Ÿå®æ—¶åœ°æ ¹æ®ç½‘ç»œæµé‡å’Œå„èŠ‚ç‚¹çš„è¿æ¥ã€è´Ÿè½½çŠ¶å†µä»¥åŠåˆ°ç”¨æˆ·çš„è·ç¦»å’Œå“åº”æ—¶é—´ç­‰ç»¼åˆä¿¡æ¯å°†ç”¨æˆ·çš„è¯·æ±‚é‡æ–°å¯¼å‘ç¦»ç”¨æˆ·æœ€è¿‘çš„æœåŠ¡èŠ‚ç‚¹ä¸Šã€‚å…¶ç›®çš„æ˜¯ä½¿ç”¨æˆ·å¯å°±è¿‘å–å¾—æ‰€éœ€å†…å®¹ï¼Œè§£å†³ Internetç½‘ç»œæ‹¥æŒ¤çš„çŠ¶å†µï¼Œæé«˜ç”¨æˆ·è®¿é—®ç½‘ç«™çš„å“åº”é€Ÿåº¦</strong>ã€‚</p>
</blockquote>
<p>ä¸Šé¢çš„å†…å®¹ä»¥å‰æ˜¯çŸ¥é“çš„ï¼Œè¿™é‡Œé‡æ–°å½’çº³äº†ä¸‹ã€‚</p>
<hr>
<h1 id="isObjEmpty-çš„å®ç°ï¼ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼‰"><a href="#isObjEmpty-çš„å®ç°ï¼ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼‰" class="headerlink" title="isObjEmpty çš„å®ç°ï¼ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼‰"></a>isObjEmpty çš„å®ç°ï¼ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼‰</h1><p>ä½¿ç”¨ for â€¦ inï¼Œå¦‚æœè¿›å…¥äº†å¾ªåï¼Œä»£è¡¨å¯¹è±¡ä¸ä¸ºç©ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">for (let key in obj) &#123;</span><br><span class="line"> if (obj.hasOwnProperty(key)) &#123;</span><br><span class="line">  return false</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">return true</span><br></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨ Object keysï¼Œ å¾—åˆ°ç©ºæ•°ç»„ï¼Œåˆ™ä»£è¡¨å¯¹è±¡ä¸ºç©ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return Object.keys(obj).length === 0</span><br></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨ JSON.stringify å’Œ ç©ºå¯¹è±¡å¯¹æ¯”ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return JSON.stringify(obj) === JSON.stringify(&#123;&#125;)</span><br></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æ€»ç»“äº†å‡ ç§åˆ¤æ–­ Object æ˜¯å¦ä¸ºç©ºçš„æ–¹æ³•&lt;br&gt;æ€»ç»“ once function (åªæ‰§è¡Œä¸€æ¬¡å‡½æ•°ä»£ç )&lt;br&gt;å®ç°ä¸¤ç§ç®€å•çš„å­—ç¬¦ä¸²æ¨¡æ¿æ›¿æ¢æ–¹æ³•&lt;br&gt;é‡æ–°å½’çº³æ€»ç»“äº†ä¸‹CDNå’ŒDNSçš„åè¯è§£é‡Š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h
    
    </summary>
    
    
      <category term="Javascript" scheme="http://sevencai.github.io/tags/Javascript/"/>
    
  </entry>
  
  <entry>
    <title>è¿›é˜¶æˆ‘çš„Vim</title>
    <link href="http://sevencai.github.io/2018/03/15/%E8%BF%9B%E9%98%B6%E6%88%91%E7%9A%84Vim/"/>
    <id>http://sevencai.github.io/2018/03/15/è¿›é˜¶æˆ‘çš„Vim/</id>
    <published>2018-03-15T13:02:14.000Z</published>
    <updated>2018-03-15T13:17:03.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>è¿™ä¸¤å¤©åšäº†ä¸€ä¸ªå¾ˆç¹ççš„éœ€æ±‚ï¼Œç®€å•çš„æ¥è¯´ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªäº§å“é…ç½®çš„å¤æ‚çš„excelè¡¨ï¼Œè½¬å…¥ä¸ºjson, ç„¶åå†ç”¨ javascript è„šæœ¬æ‹¼æ¥ä¸ºå¯¹åº” php é¡µé¢å¯æ‰§è¡Œä»£ç ã€‚ç¹ççš„æ˜¯é…ç½®å¤šä¸”æ‚ï¼Œå¹¶ä¸”äº§å“çš„å½’ç±»excel è½¬æ¢ä¸ºçš„ json å¹¶ä¸å¯ç”¨ã€‚äºæ˜¯æˆ‘è¿˜éœ€è¦åœ¨ä»–ä»¬çš„excelè¡¨é‡Œï¼Œè¿›è¡Œæ›´æ”¹ã€‚å…¶å®è¿™ä¸ªå·¥ä½œåº”è¯¥åšä¸€ä¸ªé…ç½®å°ï¼Œè®©äº§å“å»ç»´æŠ¤ã€‚ ä»¥åå°±ä¸ç”¨å¼€å‘æ‰‹åŠ¨ç»´æŠ¤è¿™ä¸ªé…ç½®è¡¨ã€‚</p>
</blockquote>
<p>æ€»ä¹‹æ˜¯æå‰åšå®Œäº†ï¼Œè™½ç„¶åšçš„è¿‡ç¨‹ä¸­, ä¸æ˜¯æ€€ç€éå¸¸æ„‰å¿«çš„å¿ƒæƒ…åšçš„ã€‚æ™šä¸Šå‰©äº†ç‚¹å¤šçš„æ—¶é—´ï¼ŒæŠŠ vim ç¨å¾®è¿›é˜¶äº†ä¸€ç‚¹ã€‚ä»¥å‰çš„åŸºæœ¬å‘½ä»¤éƒ½å·²ç»ç†Ÿç»ƒä½¿ç”¨äº†ã€‚ç°åœ¨æ€»ç»“ä¸‹ç”¨çš„ä¸æ˜¯å¾ˆç†Ÿçš„å‡ ä¸ªåœ°æ–¹ã€‚</p>
<hr>
<h1 id="å‡ ä¸ªè¿˜æ²¡æœ‰ç”¨ç†Ÿç»ƒçš„æŒ‡ä»¤"><a href="#å‡ ä¸ªè¿˜æ²¡æœ‰ç”¨ç†Ÿç»ƒçš„æŒ‡ä»¤" class="headerlink" title="å‡ ä¸ªè¿˜æ²¡æœ‰ç”¨ç†Ÿç»ƒçš„æŒ‡ä»¤"></a>å‡ ä¸ªè¿˜æ²¡æœ‰ç”¨ç†Ÿç»ƒçš„æŒ‡ä»¤</h1><p><code>cw</code> æ›¿æ¢ä»å…‰æ ‡æ‰€åœ¨ä½ç½®ååˆ°ä¸€ä¸ªå•è¯ç»“å°¾çš„å­—ç¬¦, ä¸åŒäº<code>a,i,o</code>å“¦ã€‚</p>
<p><code>0,$,^,g_</code> çš„åŒºåˆ«å’Œè”ç³»ã€‚<code>0,$</code>æ˜¯åˆ°è¡Œå¤´å’Œè¡Œå°¾ï¼Œ<code>^,g_</code>åˆ°éblankå­—ç¬¦ä½ç½®ã€‚</p>
<p><code>ctrl+r</code> å’Œ <code>u</code>, å› ä¸º WebStorm é‡Œè¿™äº›éƒ½è¿˜å¯ä»¥ç”¨ä»¥å‰çš„ <code>ctrl+z</code> ä¹‹ç±»çš„æ‰§è¡Œã€‚æ‰€ä»¥è¿™ä¸¤ä¸ªå‘½ä»¤æœ‰ç‚¹è¢«æˆ‘å¿½ç•¥äº†ã€‚å…¶å®åº”è¯¥æ”¹è¿‡æ¥ã€‚</p>
<p><code>w</code> åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„å¼€å¤´ã€‚<code>e</code>  åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„ç»“å°¾ã€‚å¦‚æœä½ è®¤ä¸ºå•è¯æ˜¯ç”±blankå­—ç¬¦åˆ†éš”ç¬¦ï¼Œé‚£ä¹ˆä½ éœ€è¦ä½¿ç”¨å¤§å†™çš„Eå’ŒWã€‚</p>
<hr>
<h1 id="æŸ¥æ‰¾è¶…èƒ½åŠ›"><a href="#æŸ¥æ‰¾è¶…èƒ½åŠ›" class="headerlink" title="æŸ¥æ‰¾è¶…èƒ½åŠ›"></a>æŸ¥æ‰¾è¶…èƒ½åŠ›</h1><ol>
<li><code>fa</code>  åˆ°ä¸‹ä¸€ä¸ªä¸ºaçš„å­—ç¬¦å¤„ï¼Œä½ ä¹Ÿå¯ä»¥fsåˆ°ä¸‹ä¸€ä¸ªä¸ºsçš„å­—ç¬¦ã€‚</li>
<li><code>t,</code>  åˆ°é€—å·å‰çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚é€—å·å¯ä»¥å˜æˆå…¶å®ƒå­—ç¬¦ã€‚</li>
<li><code>3fa</code>  åœ¨å½“å‰è¡ŒæŸ¥æ‰¾ç¬¬ä¸‰ä¸ªå‡ºç°çš„aã€‚</li>
<li><code>Få’ŒT</code> å’Œ <code>få’Œt</code> ä¸€æ ·ï¼Œåªä¸è¿‡æ˜¯ç›¸åæ–¹å‘ã€‚</li>
<li><code>/pattern</code>  æœç´¢ <code>pattern</code>  çš„å­—ç¬¦ä¸², å¦‚æœåˆå¤šä¸ªï¼ŒæŒ‰nåˆ°ä¸‹ä¸€ä¸ªã€‚</li>
<li><code>t,</code> åˆ°é€—å·å‰çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚é€—å·å¯ä»¥å˜æˆå…¶å®ƒå­—ç¬¦ã€‚</li>
<li><code>dt.</code> åˆ é™¤å½“å‰å­—ç¬¦åˆ°<code>.</code>ä¸ºæ­¢çš„æ‰€æœ‰å†…å®¹ã€‚</li>
</ol>
<p>æ³¨æ„è¡¥å……ä¸‹<code>normal</code>æ¨¡å¼ä¸‹æŒ‰<code>/</code>å³å¯è¿›å…¥æŸ¥æ‰¾æ¨¡å¼ï¼Œ nä¸ºä¸‹ä¸€ä¸ªï¼ŒNä¸ºä¸Šä¸€ä¸ªã€‚å¦‚æœæ˜¯ <code>/singer\c</code>ä»£è¡¨æŸ¥æ‰¾singer,å¹¶ä¸”å¤§å°å†™ä¸æ•æ„Ÿã€‚å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯å¤§å°å†™æ•æ„Ÿçš„ã€‚ç›¸åº”çš„ï¼Œ<code>\C</code>ä»£è¡¨å¤§å°å†™æ•æ„Ÿã€‚</p>
<p>ä½ è¿˜å¯ä»¥åœ¨æ­¤æ¨¡å¼ä¸‹åŠ å…¥æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ¯”å¦‚<code>/inger$</code> ï¼Œè¿™æ—¶ä»¥<code>inger</code>ç»“å°¾çš„éƒ½ä¼šè¢«æŸ¥å‡ºæ¥ã€‚</p>
<p>åœ¨<code>normal</code>æ¨¡å¼ä¸‹çš„æŸ¥æ‰¾ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ç›´æ¥æŒ‰<code>*</code>,æ¥æŸ¥æ‰¾å½“å‰å…‰æ ‡æ‰€åœ¨çš„å•è¯ã€‚è¿™æ—¶å€™çš„æŸ¥æ‰¾çš„å•è¯å‰åéƒ½æ˜¯ç©ºç™½å­—ç¬¦æˆ–è€…æ ‡ç‚¹ç¬¦å·ã€‚ä¾‹å¦‚å½“å‰ä¸º<code>foo</code>ï¼Œ å¯ä»¥åŒ¹é…<code>foo bar</code>ä¸­çš„<code>foo</code>ï¼Œä½†ä¸å¯åŒ¹é…<code>foobar</code>ä¸­çš„<code>foo</code>ã€‚<strong>ç»å¸¸ç”¨äºæŸ¥æ‰¾å‡½æ•°</strong>ã€‚å¦‚æœæƒ³è¦åŒ…å«å…³ç³»ï¼Œä½¿ç”¨<code>g*</code>å³å¯ã€‚</p>
<hr>
<h1 id="æ›¿æ¢èƒ½åŠ›"><a href="#æ›¿æ¢èƒ½åŠ›" class="headerlink" title="æ›¿æ¢èƒ½åŠ›"></a>æ›¿æ¢èƒ½åŠ›</h1><p>åˆšåˆšæåˆ°äº†æŸ¥æ‰¾çš„èƒ½åŠ›ï¼Œ<code>normal</code>ä¸‹ä½¿ç”¨<code>/</code>å³å¯è¿›å…¥æŸ¥æ‰¾æ¨¡å¼ã€‚æ›¿æ¢æ¨¡å¼åˆ™æ˜¯ä½¿ç”¨<code>:s</code>ã€‚å…·ä½“æƒ…å†µå¦‚ä¸‹ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:&#123;ä½œç”¨èŒƒå›´&#125;s/&#123;ç›®æ ‡&#125;/&#123;æ›¿æ¢&#125;/&#123;æ›¿æ¢æ ‡å¿—&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>:%s/singer/author/g</code>ä¼šåœ¨å…¨å±€èŒƒå›´(<code>%</code>)æŸ¥æ‰¾<code>singer</code>å¹¶æ›¿æ¢ä¸º<code>author</code>ï¼Œæ‰€æœ‰å‡ºç°éƒ½ä¼šè¢«æ›¿æ¢ï¼ˆ<code>g</code>ï¼‰ã€‚å¦‚æœä½¿ç”¨<code>:s/singer/author</code>åˆ™åªä¼šåœ¨å½“å‰è¡Œæ›¿æ¢ä¸€ä¸ªã€‚</p>
<p>è¿™é‡Œçš„<strong>ä½œç”¨èŒƒå›´</strong>å¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼š</p>
<blockquote>
<ol>
<li>%å…¨æ–‡æŸ¥æ‰¾ï¼Œ å¦‚ :%s/singer/author/g</li>
<li>ä¸å¡«å†™é»˜è®¤å½“å‰è¡Œï¼Œå¦‚:s/singer/author/g</li>
<li>:5,12s/singer/author/g, ç¬¬5-12è¡Œ</li>
<li>:.,+2s/singer/author/gï¼Œ å½“å‰è¡Œå’Œæ¥ä¸‹æ¥çš„2è¡Œã€‚ æ³¨æ„<code>.</code>æ˜¯å½“å‰è¡Œï¼Œ <code>,</code>æ˜¯åˆ†éš”ç¬¦</li>
<li>:â€™&lt;,â€™&gt;s/singer/author/gæŠŠé€‰åŒºå†…çš„å†…å®¹æ›¿æ¢ã€‚æ³¨æ„ä¸‹ï¼šåœ¨Visualæ¨¡å¼ä¸‹é€‰æ‹©åŒºåŸŸåè¾“å…¥<code>:</code>ï¼ŒVimå³å¯è‡ªåŠ¨è¡¥å…¨ä¸º <code>:&#39;&lt;,&#39;&gt;</code>ã€‚WebStormä¹Ÿä¼šåšåŒæ ·çš„äº‹æƒ…ã€‚</li>
</ol>
</blockquote>
<p>è¿™é‡Œçš„<strong>æ›¿æ¢æ ‡è¯†</strong>å¯ä»¥æ€»ç»“å¦‚ä¸‹ä»£è¡¨ï¼š</p>
<blockquote>
<ol>
<li><code>%s/singer/author</code>, ç©ºæ ‡è¯†è¡¨ç¤ºï¼šåªæ›¿æ¢ä»å…‰æ ‡ä½ç½®å¼€å§‹ï¼Œç›®æ ‡çš„ç¬¬ä¸€æ¬¡å‡ºç°</li>
<li><code>%s/singer/author/g</code>, global è¡¨ç¤ºå…¨å±€</li>
<li><code>i</code>è¡¨ç¤ºå¤§å°å†™ä¸æ•æ„ŸæŸ¥æ‰¾ï¼Œ<code>I</code>è¡¨ç¤ºå¤§å°å†™æ•æ„Ÿ</li>
<li><code>:%s/singer/author/gc</code> cè¡¨ç¤ºå…¨å±€æŸ¥æ‰¾åæ›¿æ¢éœ€è¦è¢«ç¡®è®¤ã€‚å®ƒå¯èƒ½ä¼šå¼¹å‡ºä¸€å¥ï¼šReplace with author ?  (y/n/â€¦)ä¹‹ç±»çš„ä¸œè¥¿ã€‚</li>
</ol>
</blockquote>
<hr>
<h1 id="åŒºåŸŸé€‰åˆ™-lt-action-gt-a-lt-object-gt-ä»¥åŠ-lt-action-gt-i-lt-object-gt"><a href="#åŒºåŸŸé€‰åˆ™-lt-action-gt-a-lt-object-gt-ä»¥åŠ-lt-action-gt-i-lt-object-gt" class="headerlink" title="åŒºåŸŸé€‰åˆ™ &lt;action&gt;a&lt;object&gt;ä»¥åŠ &lt;action&gt;i&lt;object&gt;"></a>åŒºåŸŸé€‰åˆ™ <code>&lt;action&gt;a&lt;object&gt;</code>ä»¥åŠ <code>&lt;action&gt;i&lt;object&gt;</code></h1><p>å…¶å®è¿™ä¸ªæˆ‘å·²ç»å¾ˆç†Ÿäº†ï¼Œä»Šå¤©çœ‹åˆ°äº†åˆ«äººçš„æ€»ç»“ï¼ˆæ³¨ï¼šä¸‹é¢çš„è¿™æ®µä¸ºå¼•ç”¨å†…å®¹ï¼Œå¼•ç”¨åœ°å€ä¸ºï¼š<a href="https://coolshell.cn/articles/5426.html" target="_blank" rel="noopener">coolshell</a>ï¼‰ã€‚</p>
<blockquote>
<p>actionå¯ä»¥æ˜¯ä»»ä½•çš„å‘½ä»¤ï¼Œå¦‚ <code>d</code>  (åˆ é™¤),  <code>y</code>  (æ‹·è´),  <code>v</code>  (å¯ä»¥è§†æ¨¡å¼é€‰æ‹©)ã€‚</p>
<p>object å¯èƒ½æ˜¯ï¼š <code>w</code>  ä¸€ä¸ªå•è¯ï¼Œ <code>W</code>  ä¸€ä¸ªä»¥ç©ºæ ¼ä¸ºåˆ†éš”çš„å•è¯ï¼Œ <code>s</code>  ä¸€ä¸ªå¥å­—ï¼Œ <code>p</code>  ä¸€ä¸ªæ®µè½ã€‚ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç‰¹åˆ«çš„å­—ç¬¦ï¼š<code>&quot;ã€</code> <code>&#39;ã€</code> <code>)ã€</code> <code>}ã€</code> <code>]ã€‚</code></p>
</blockquote>
<p>aå’Œiçš„åŒºåˆ«ä¹Ÿå¾ˆå¥½åˆ†ã€‚iä¸åŒ…æ‹¬ï¼ŒaåŒ…æ‹¬äº†ã€‚çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ã€‚</p>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªå­—ç¬¦ä¸² <code>(map (+) (&quot;foo&quot;))</code>.è€Œå…‰æ ‡é”®åœ¨ç¬¬ä¸€ä¸ª <code>o</code> çš„ä½ç½®ã€‚</p>
<blockquote>
<ul>
<li><code>vi&quot;</code>  â†’ ä¼šé€‰æ‹© <code>foo</code>.</li>
<li><code>va&quot;</code>  â†’ ä¼šé€‰æ‹© <code>&quot;foo&quot;</code>.</li>
<li><code>vi)</code>  â†’ ä¼šé€‰æ‹© <code>&quot;foo&quot;</code>.</li>
<li><code>va)</code>  â†’ ä¼šé€‰æ‹©<code>(&quot;foo&quot;)</code>.</li>
<li><code>v2i)</code>  â†’ ä¼šé€‰æ‹© <code>map (+) (&quot;foo&quot;)</code></li>
<li><code>v2a)</code>  â†’ ä¼šé€‰æ‹© <code>(map (+) (&quot;foo&quot;))</code></li>
</ul>
</blockquote>
<hr>
<h1 id="VIM-çš„Visualæ¨¡å¼"><a href="#VIM-çš„Visualæ¨¡å¼" class="headerlink" title="VIM çš„Visualæ¨¡å¼"></a>VIM çš„Visualæ¨¡å¼</h1><p>vim åˆ†ä¸º3ä¸­ visual æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<h2 id="Visual-é»˜è®¤æ¨¡å¼ï¼š"><a href="#Visual-é»˜è®¤æ¨¡å¼ï¼š" class="headerlink" title="Visual é»˜è®¤æ¨¡å¼ï¼š"></a>Visual é»˜è®¤æ¨¡å¼ï¼š</h2><p><code>normal</code> ä¸‹ ï¼ŒæŒ‰ v è¿›å…¥ <code>visual</code> é»˜è®¤æ¨¡å¼ã€‚è¿™ä¸ªæ¨¡å¼ä¸‹å¯ä»¥ hjkl è¿›è¡Œå„ç§ä¸Šä¸‹ç§»åŠ¨ã€‚é€‰ä¸­æ–‡æœ¬åï¼Œå¯ä»¥è¿›è¡Œ y,d,p,^,$ç­‰æ“ä½œã€‚</p>
<h2 id="Visual-Line-æ¨¡å¼"><a href="#Visual-Line-æ¨¡å¼" class="headerlink" title="Visual Line æ¨¡å¼"></a>Visual Line æ¨¡å¼</h2><p><code>normal</code>ä¸‹ï¼ŒæŒ‰ V è¿›å…¥ <code>visual line</code>æ¨¡å¼ã€‚ ä½¿ç”¨ j/ké”®å¯ä»¥é€‰ä¸­ä¸€è¡Œæˆ–è€…å¤šè¡Œã€‚è¿›è¡Œæ­£è¡Œæ“ä½œã€‚</p>
<h2 id="Visual-Block-æ¨¡å¼"><a href="#Visual-Block-æ¨¡å¼" class="headerlink" title="Visual Block æ¨¡å¼"></a>Visual Block æ¨¡å¼</h2><p>æŒ‰ä½ <code>ctrl + v</code>, è¿›å…¥ <code>visual block</code>æ¨¡å¼ã€‚æ­¤æ¨¡å¼ä¸‹ï¼Œé€‰ä¸­æƒ³è¦é€‰ä¸­çš„å†…å®¹ï¼ˆå¯ä»¥ç»“åˆ$^ï¼‰ã€‚é€‰ä¸­åï¼Œè¾“å…¥<code>I,i,A,a,C,c</code>ç­‰æ“ä½œï¼Œè¾“å…¥æƒ³è¦è¾“å…¥çš„å†…å®¹ã€‚å†æŒ‰ä¸‹<code>Esc</code>é”®ï¼Œå³å¯å…¨éƒ¨è¡Œéƒ½æœ‰å¡«å…¥çš„å†…å®¹ã€‚ç±»ä¼¼äº sublimeã€‚</p>
<p>æ³¨æ„ Iï¼ŒAï¼ŒC çš„åŒºåˆ«ï¼Œå°±è·Ÿä»–ä»¬åŸæ¥çš„æ„æ€ä¸€æ ·ï¼Œæ¯”å¦‚I,Aæ˜¯æ’å…¥ï¼Œåªæ˜¯æ’å…¥çš„åœ°æ–¹å¯èƒ½ä¸åŒã€‚Cæ˜¯æ›¿æ¢ã€‚</p>
<p>æ¯”å¦‚<code>Ctrl+v jj$</code>åˆ°æ¯ä¸€è¡Œè¡Œæœ«ï¼Œå†Iï¼Œå¡«å…¥<code>;</code>ï¼Œå°±å¯ä»¥å‡ è¡Œä¸€èµ·å¡«åˆ†å¥½äº†ã€‚</p>
<p><strong>Visual Block æ¨¡å¼ä¸‹ï¼Œè¿˜å¯ä»¥åšä¸‹é¢è¿™äº›äº‹æƒ…</strong>ï¼š</p>
<ul>
<li>å¯ä»¥ç»“åˆ<code>&lt;&gt;</code>è¿›è¡Œç§»åŠ¨ã€‚</li>
<li>ä½¿ç”¨<code>J</code>æŠŠé€‰ä¸­çš„è¡Œè¿æ¥èµ·æ¥å˜æˆ ä¸€è¡Œã€‚</li>
<li>ä½¿ç”¨<code>=</code>è‡ªåŠ¨ç»™ç¼©è¿›ã€‚</li>
</ul>
<p>è¿™äº›åŠŸèƒ½éƒ½å¾ˆå¥½ç”¨ã€‚</p>
<hr>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™é‡Œé¢çš„ä¸œè¥¿ï¼Œæœ‰äº›å¤§å¤šæˆ‘éƒ½ç”¨è¿‡ï¼Œä¹ŸçŸ¥é“ã€‚ä½†æ˜¯æ¯æ¬¡å»ç”¨çš„æ—¶å€™æœ‰æ—¶å€™è¿˜è¦å†å»æŸ¥ä¸‹å‘½ä»¤ã€‚æ€ªä¸å¥½çš„ã€‚æ€»ç»“ä¸‹ï¼Œä»¥åå¿˜è®°äº†å°±åœ¨åšå®¢é‡Œç¿»ç¿»å§ã€‚å¼€å¿ƒã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è¿™ä¸¤å¤©åšäº†ä¸€ä¸ªå¾ˆç¹ççš„éœ€æ±‚ï¼Œç®€å•çš„æ¥è¯´ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªäº§å“é…ç½®çš„å¤æ‚çš„excelè¡¨ï¼Œè½¬å…¥ä¸ºjson, ç„¶åå†ç”¨ javascript è„šæœ¬æ‹¼æ¥ä¸ºå¯¹åº” php é¡µé¢å¯æ‰§è¡Œä»£ç ã€‚ç¹ççš„æ˜¯é…ç½®å¤šä¸”æ‚ï¼Œå¹¶ä¸”äº§å“çš„å½’ç±»excel è½¬æ¢ä¸ºçš„ json å¹¶ä¸å¯ç”¨ã€‚äº
    
    </summary>
    
    
      <category term="å·¥å…·/é…ç½®" scheme="http://sevencai.github.io/tags/%E5%B7%A5%E5%85%B7-%E9%85%8D%E7%BD%AE/"/>
    
  </entry>
  
  <entry>
    <title>è®°æœ€æ–°å‡ ä¸ªæ–°çš„å°çŸ¥è¯†ç‚¹</title>
    <link href="http://sevencai.github.io/2018/03/08/%E8%AE%B0%E6%9C%80%E6%96%B0%E5%87%A0%E4%B8%AA%E6%96%B0%E7%9A%84%E5%B0%8F%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    <id>http://sevencai.github.io/2018/03/08/è®°æœ€æ–°å‡ ä¸ªæ–°çš„å°çŸ¥è¯†ç‚¹/</id>
    <published>2018-03-08T08:15:01.000Z</published>
    <updated>2018-03-08T08:34:59.000Z</updated>
    
    <content type="html"><![CDATA[<p>è®°å½•ä¸‹æœ€è¿‘é›¶é›¶æ•£æ•£å­¦çš„å‡ ä¸ªçŸ¥è¯†ç‚¹ã€‚</p>
<hr>
<h1 id="å›¾ç‰‡æ˜¾ç¤ºæ–¹å¼"><a href="#å›¾ç‰‡æ˜¾ç¤ºæ–¹å¼" class="headerlink" title="å›¾ç‰‡æ˜¾ç¤ºæ–¹å¼"></a>å›¾ç‰‡æ˜¾ç¤ºæ–¹å¼</h1><p>æœ‰çš„æ—¶å€™çœ‹åˆ°ç½‘ç»œä¸Šæœ‰äº›å›¾ç¤ºç”±æ¨¡ç³Šå˜æ¸…æ™°ï¼Œæœ‰äº›æ˜¯ä¸€ç›´æ¸…æ™°ï¼Œä½†æ˜¯ä¼šé€è¡Œæ˜¾ç¤ºï¼ˆæ…¢æ…¢çš„å±•ç¤ºå…¨ï¼‰ï¼Œ æ˜¯ä»€ä¹ˆå› ç´ å¯¼è‡´äº†ä»–ä»¬çš„æ˜¾ç¤ºæ–¹å¼ï¼Ÿ</p>
<p>å®é™…æ˜¯å›¾ç‰‡åœ¨<strong>å‹ç¼©çš„æ—¶å€™ç®—æ³•</strong>å†³å®šäº†å®ƒçš„æ˜¾ç¤ºæ–¹å¼ã€‚æ¯”å¦‚ï¼š<br>å°æ³¢ç®—æ³•ï¼šå…ˆæ¨¡ç³Šç„¶åæ¸…æ™°<br>ç¦»æ•£ä½™å¼¦å˜æ¢ï¼šæ¸…æ™°ï¼Œé€è¡Œæ˜¾ç¤º</p>
<p>å‰ç«¯å¯ä»¥å‡†å¤‡å¤šç§æ ·å­æˆ–è€…åˆ†è¾¨ç‡çš„å›¾ç‰‡ï¼Œå½“ç½‘ç»œå¥½æˆ–è€…ç½‘ç»œä¸å¥½ï¼Œå†æˆ–è€…ä¸åŒçš„å±å¹•åˆ†è¾¨ç‡çš„å›¾ç‰‡ã€‚ç°åœ¨å‡ºæ¥äº†ä¸€ç§æ–°çš„æ–¹å¼ï¼š</p>
<p>HTML <code>&lt;picture&gt;</code>å…ƒç´ æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œç”¨æ¥ä¸ºå…¶å†…éƒ¨ç‰¹å®šçš„ <code>&lt;img&gt;</code>å…ƒç´ æä¾›å¤šæ ·çš„ <code>&lt;source&gt;</code> å…ƒç´ ã€‚æµè§ˆå™¨ä¼šæ ¹æ®å½“å‰é¡µé¢ï¼ˆå³å›¾ç‰‡æ‰€åœ¨çš„ç›’å­çš„å®¹å™¨ï¼‰çš„å¸ƒå±€ä»¥åŠå½“å‰æµè§ˆçš„è®¾å¤‡ï¼ˆæ¯”å¦‚æ™®é€šçš„å±å¹•å’Œé«˜æ¸…å±å¹•ï¼‰å»ä»ä¸­é€‰æ‹©æœ€åˆé€‚çš„èµ„æºã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;picture&gt;</span><br><span class="line">	&lt;source srcset=&quot;smaller.png&quot; media=&quot;(max-width:700px)&quot;&gt;&lt;/source&gt;</span><br><span class="line">	&lt;source srcset=&quot;bigger.png&quot; media=&quot;(max-width:1000px)&quot;&gt;&lt;/source&gt;</span><br><span class="line">	&lt;img srcset=&quot;default.png&quot; alt=&quot;ç¾å¥³&quot;&gt;</span><br><span class="line">&lt;/picture&gt;</span><br></pre></td></tr></table></figure></p>
<p>å½“ç„¶å¹¶ä¸æ˜¯æ¯ä¸ªæµè§ˆå™¨éƒ½æ”¯æŒ,åœ¨å®éªŒä¸­ã€‚</p>
<hr>
<h1 id="å›¾ç‰‡åˆ†ç±»"><a href="#å›¾ç‰‡åˆ†ç±»" class="headerlink" title="å›¾ç‰‡åˆ†ç±»"></a>å›¾ç‰‡åˆ†ç±»</h1><ol>
<li>jpg,jpeg,ä»¥24ä½é¢œè‰²å­˜å‚¨å•ä¸ªä½å›¾ï¼Œå¯å‹ç¼©</li>
<li>pngï¼Œå¯åšé€æ˜å›¾ç‰‡ï¼Œä½“ç§¯è¾ƒå¤§ï¼Œéœ€è¦æ¸…æ™°çš„æ˜¾ç¤ºé¢œè‰²ä¸°å¯Œçš„å›¾ç‰‡æ—¶ç”¨</li>
<li>gifï¼Œå…¨é€/å…¨ä¸é€ï¼Œä¸æ”¯æŒåŠé€æ˜</li>
<li>svgï¼ŒçŸ¢é‡å›¾ï¼Œåœ°å›¾ä¸­ç”¨çš„å¤šï¼Œä½“ç§¯å°</li>
</ol>
<p>æ³¨æ„æœ‰çš„æ—¶å€™åªæŠŠ å°¾ç¼€æ¯”å¦‚.jpgæ›´æ”¹ä¸º.png ä¸è¡Œï¼Œå› ä¸ºåªæ˜¯åç§°æ”¹äº†ï¼Œå®é™…ä¸Šå®ƒæœ¬è´¨æ²¡æœ‰æ›´æ”¹ã€‚éœ€è¦ç”¨å·¥å…·è½¬æ¢ã€‚</p>
<hr>
<h1 id="æ’­æ”¾å™¨å½¢å¼"><a href="#æ’­æ”¾å™¨å½¢å¼" class="headerlink" title="æ’­æ”¾å™¨å½¢å¼"></a>æ’­æ”¾å™¨å½¢å¼</h1><p>ã€videoæ’­æ”¾å™¨ã€‘<br>ä¼˜ç‚¹ï¼šä¸éœ€è¦ä¸‹è½½é¢å¤–èµ„æºï¼ˆå¦‚ï¼šflashæ’­æ”¾å™¨éœ€è¦ä¸‹è½½.swfè¾…åŠ©æ’ä»¶ï¼‰ï¼Œæ§åˆ¶ç®€å•æœ‰è¾ƒä¸ºå®Œæ•´çš„apiã€‚<br>ç¼ºç‚¹ï¼šæ¯ä¸ªæµè§ˆå™¨çš„å¤–è§‚éƒ½ä¸ä¸€æ ·ï¼Œå¦‚æœè¦ç»Ÿä¸€éœ€è¦è‡ªå·±å†™uiå®ç°ã€‚</p>
<p>ã€flashæ’­æ”¾å™¨ã€‘<br>flash æ’­æ”¾å™¨ï¼Œå…¼å®¹æ€§æ¯”è¾ƒå¥½ï¼Œåªéœ€è¦ä¸‹è½½ flash player å³å¯ä½¿ç”¨ã€‚<br>ç¼ºç‚¹æ˜¯å¿…é¡»è¦ä¸‹è½½é¢å¤–çš„ swf æ‰å¯ä»¥ã€‚</p>
<p>è§†é¢‘çš„å¤–éƒ¨èµ„æºå¯ä½¿ç”¨<strong> link åŠ è½½æ ·å¼</strong>ï¼Œè¿™æ ·å¯ä»¥è¢«æå‰åŠ è½½ã€‚è®©è§†é¢‘å…ˆè¿è¡Œã€‚è¿™æ˜¯ä¸ªå° hackã€‚</p>
<hr>
<h1 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h1><p><strong>é¡µé¢åˆ·æ–°çš„æ—¶å€™ sessionStorage (æ ‡å‡†æµè§ˆå™¨) æ˜¯ä»ç„¶å­˜åœ¨çš„ï¼Œåªæœ‰å…³é—­çš„æ—¶å€™æ‰ä¸å­˜åœ¨ã€‚åŒä¸€ä¸ªæµè§ˆå™¨ï¼Œä¸åŒçš„æ ‡ç­¾ï¼Œä¹Ÿæ˜¯ä¸å…±äº«çš„ã€‚</strong></p>
<p>userData æ˜¯ IE çš„å…ˆé©±è€…ã€‚</p>
<p>cookie æ‰€æœ‰æµè§ˆå™¨åŸºæœ¬éƒ½æ”¯æŒï¼Œå¤§å°é™åˆ¶ä¸åŒæµè§ˆå™¨ä¹Ÿä¸åŒï¼Œä¼šæŠŠæ•°æ®å¸¦ç»™æœåŠ¡å™¨ã€‚</p>
<p>openDataBase æ˜¯ç±»ä¼¼äºæœ¬åœ°æ•°æ®åº“è¿™ç§å½¢å¼ã€‚å¯ä»¥åšçš„ä¸œè¥¿æ›´å¤šã€‚</p>
<p>localStorage çš„ç¼ºç‚¹æ˜¯ IE9, IE10 ä¸æ”¯æŒ, æ³¨æ„ä¸‹ safari è¯»ä¸åˆ° chrome çš„ localStorageã€‚</p>
<p>localStorage ä¸èƒ½è·¨åŸŸï¼Œæ‰€ä»¥å­˜å‚¨çš„æ—¶å€™æ˜¯åœ¨ localStorage ä¸‹ï¼ŒæŒ‰ç…§åŸŸåå­˜æ”¾çš„ã€‚</p>
<hr>
<h1 id="é€ æˆé¡µé¢å¡æ­»çš„åŸå› "><a href="#é€ æˆé¡µé¢å¡æ­»çš„åŸå› " class="headerlink" title="é€ æˆé¡µé¢å¡æ­»çš„åŸå› "></a>é€ æˆé¡µé¢å¡æ­»çš„åŸå› </h1><p>å¦‚æœé¡µé¢çªç„¶ä¸€ç›´ loading æˆ–è€… å¡æ­»ï¼Œå¯èƒ½æœ‰ä»¥ä¸‹ä¸€äº›åŸå› ã€‚</p>
<ol>
<li>æ­»å¾ªç¯ (while 1 äº† ï¼Ÿ)</li>
<li>å¤§æ–‡ä»¶å ç”¨èµ„æº loading</li>
<li>é¢‘ç¹çš„è¯»å†™æœ¬åœ°èµ„æº</li>
</ol>
<hr>
<h1 id="é¡µé¢çš„é‡ç»˜å’Œå›æµ"><a href="#é¡µé¢çš„é‡ç»˜å’Œå›æµ" class="headerlink" title="é¡µé¢çš„é‡ç»˜å’Œå›æµ"></a>é¡µé¢çš„é‡ç»˜å’Œå›æµ</h1><p>å›æµä¸€å®šè§¦å‘é‡ç»˜ï¼Œä½†æ˜¯é‡ç»˜ä¸ä¸€å®šè§¦å‘å›æµã€‚<br>DOMå…ƒç´ çš„æ·»åŠ ã€ä¿®æ”¹(å†…å®¹)ã€åˆ é™¤(Reflow+Repaint)<br>ä»…ä¿®æ”¹DOMå…ƒç´ çš„å­—ä½“é¢œè‰²(åªæœ‰Repaintã€å› ä¸ºä¸éœ€è¦è°ƒæ•´å¸ƒå±€)</p>
<p>å¦‚ä½•åˆ¤æ–­æ˜¯å¦é‡ç»˜äº†å‘¢ï¼Ÿ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chrome å¼€å‘è€…å·¥å…· =&gt;  settings ,more tools, rendering, Paint flashingå³å¯, çœ‹åˆ°ç»¿è‰²çš„éƒ¨åˆ†å³ä¸ºå‘ç”Ÿäº†é‡ç»˜çš„éƒ¨åˆ†</span><br></pre></td></tr></table></figure></p>
<p>è§¦å‘é‡ç»˜å¯èƒ½æœ‰çš„æƒ…å†µï¼š<br>1ã€æ”¹å˜å­—ä½“<br>2ã€å¢åŠ æˆ–ç§»é™¤æ ·å¼è¡¨<br>3ã€å†…å®¹å˜åŒ–ï¼Œå¦‚ç”¨æˆ·åœ¨inputæ¡†è¾“å…¥æ–‡å­—<br>4ã€æ¿€æ´»cssä¼ªç±»ï¼Œå¦‚:hover<br>5ã€è„šæœ¬æ“ä½œDOM<br>6ã€è®¡ç®—å¯è§çš„å®½é«˜å±æ€§<br>7ã€è®¾ç½®styleå±æ€§çš„å€¼</p>
<hr>
<h1 id="git-å¸¸ç”¨å‘½ä»¤æ€»ç»“"><a href="#git-å¸¸ç”¨å‘½ä»¤æ€»ç»“" class="headerlink" title="git å¸¸ç”¨å‘½ä»¤æ€»ç»“"></a>git å¸¸ç”¨å‘½ä»¤æ€»ç»“</h1><p>æˆ‘æ€»ç»“äº†å·²ç»å¥½å¤šæ¬¡äº†ï¼Œæœ‰äº›å‘½ä»¤ä¸€æ®µæ—¶é—´ä¸ç”¨åˆä¼šå¿˜è®°ã€‚å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">git log --pretty=oneline</span><br><span class="line">git log --graph</span><br><span class="line"></span><br><span class="line">git reset --hard HEAD^</span><br><span class="line">git reset --hard ç‰ˆæœ¬ï¼ˆå¯çœç•¥å†™ï¼‰</span><br><span class="line"></span><br><span class="line">// add åæ”¾å¼ƒ</span><br><span class="line">git checkout -- file</span><br><span class="line"></span><br><span class="line">// add -&gt; commit åæ”¾å¼ƒ</span><br><span class="line">git reset HEAD file</span><br><span class="line">git checkout --file</span><br><span class="line"></span><br><span class="line">git remote add origin git@server-name:path/repo-name.git</span><br><span class="line">git push -u origin master</span><br><span class="line"></span><br><span class="line">git checkout -b dev</span><br><span class="line">ç­‰åŒäº</span><br><span class="line">git branch dev</span><br><span class="line">git checkout dev</span><br><span class="line"></span><br><span class="line">git branch -d/-D dev</span><br><span class="line"></span><br><span class="line">git stash apply æ¢å¤</span><br><span class="line">git stash drop æ¢å¤ååˆ é™¤ stash</span><br><span class="line">git stash pop = git stash apply + git stash drop</span><br><span class="line"></span><br><span class="line">git stash list</span><br><span class="line"></span><br><span class="line">git branch --set-upstream dev origin/dev</span><br><span class="line"></span><br><span class="line">git tag name æ‰“æ ‡ç­¾</span><br><span class="line">git tag æ˜¾ç¤ºæ‰€æœ‰ tag</span><br><span class="line">git tag -d v0.1 åˆ é™¤æŸä¸ªtag</span><br><span class="line">git push origin v1.0 æ¨é€æŸä¸ªæ ‡ç­¾</span><br><span class="line">git push origin --tags ä¸€æ¬¡æ¨é€æ‰€æœ‰ tag</span><br></pre></td></tr></table></figure>
<p><strong>å½“æ‰‹å¤´å·¥ä½œæ²¡æœ‰å®Œæˆæ—¶ï¼Œå…ˆæŠŠå·¥ä½œç°åœº<code>git stash</code>ä¸€ä¸‹ï¼Œç„¶åå»ä¿®å¤bugï¼Œä¿®å¤åï¼Œå†<code>git stash pop</code>ï¼Œå›åˆ°å·¥ä½œç°åœºã€‚</strong></p>
<p>rebase merge çš„ä½¿ç”¨æ³•åˆ™ã€‚</p>
<blockquote>
<p>In general the way to get the best of both worlds is to rebase local changes youâ€™ve made but havenâ€™t shared yet before you push them in order to clean up your story, but never rebase anything youâ€™ve pushed somewhere</p>
</blockquote>
<hr>
<h1 id="å­¦ä¹ ä¸€æ®µä»£ç "><a href="#å­¦ä¹ ä¸€æ®µä»£ç " class="headerlink" title="å­¦ä¹ ä¸€æ®µä»£ç "></a>å­¦ä¹ ä¸€æ®µä»£ç </h1><p>è¿™æ˜¯æœ€è¿‘åœ¨æ…•è¯¾ä¸Šçœ‹åˆ°çš„ä¸€æ®µä»£ç ï¼Œæ²¡äº‹æ²¡äº‹çœ‹çœ‹åˆ«äººçš„ä»£ç è¿˜æ˜¯æœ‰ç‚¹æ”¶è·çš„ï¼Œæ¯”è¾ƒä¸‹è‡ªå·±è§‰å¾—å¥½çš„å’Œè‡ªå·±è§‰å¾—åˆ«äººå¯èƒ½æœ‰æ‰€éœ€è¦æ”¹è¿›çš„ã€‚ä¸‹é¢è¿™äº›ä»£ç æ˜¯ä¸€ä½è€å¸ˆå†™çš„ï¼Œå¤§æ¦‚å°±æ˜¯æ ¹æ®ç‰ˆæœ¬å·æ¥åˆ¤æ–­èµ„æºæ˜¯ä¸æ˜¯éœ€è¦ç¼“å­˜ï¼Œå¦‚æœç‰ˆæœ¬å·æ›´æ–°äº†ï¼Œå°±å»é‡æ–°æ‹‰å–èµ„æºï¼Œå¹¶ä¸”æ›´æ–°æœ¬åœ°ç¼“å­˜ã€‚å¦‚æœç‰ˆæœ¬å·æ²¡æœ‰æ›´æ–°ï¼Œå°±ç›´æ¥ç”¨æœ¬åœ°çš„ç¼“å­˜ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br></pre></td><td class="code"><pre><span class="line">window.Xhrfactory = function() &#123;</span><br><span class="line">    this.init.apply(this, arguments);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">window.Xhrfactory.prototype = &#123;</span><br><span class="line">    init: function() &#123;</span><br><span class="line">        this.xhr = this.create();</span><br><span class="line">    &#125;,</span><br><span class="line">    create: function() &#123;</span><br><span class="line">        var xhr = null;</span><br><span class="line">        if (window.XMLHttpRequest) &#123;</span><br><span class="line">            xhr = new XMLHttpRequest();</span><br><span class="line">        &#125; else if (window.ActiveXobject) &#123;</span><br><span class="line">            xhr = new ActiveXobject(&apos;Msml2.Xmlhttp&apos;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            xhr = new ActiveXobject(&apos;Microsoft.Xmlhttp&apos;);</span><br><span class="line">        &#125;</span><br><span class="line">        return xhr;</span><br><span class="line">    &#125;,</span><br><span class="line">    readystate: function(callback) &#123;</span><br><span class="line">        this.xhr.onreadystatechange = function() &#123;</span><br><span class="line">            if (this.readyState === 4 &amp;&amp; this.status === 200) &#123;</span><br><span class="line">                callback(this.responseText);</span><br><span class="line">                console.log(this);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    para: function(data) &#123;</span><br><span class="line">        var datastr = &apos;&apos;;</span><br><span class="line">        if (data &amp;&amp; Object.prototype.toString.call(data) === &quot;[object object]&quot;) &#123;</span><br><span class="line">            for (var i in data) &#123;</span><br><span class="line">                for (var i = 0; i &lt; lenght; i++) &#123;</span><br><span class="line">                    datastr += i + &apos;=&apos;</span><br><span class="line">                    data[i] + &apos;&amp;&apos;;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    get: function(url, data, callback) &#123;</span><br><span class="line"></span><br><span class="line">        this.readystate(callback);</span><br><span class="line">        var newurl = url;</span><br><span class="line">        var datastr = this.para(data);</span><br><span class="line">        newurl = url + &apos;?&apos; + datastr;</span><br><span class="line">        this.xhr.open(&apos;get&apos;, newurl, true);</span><br><span class="line">        this.xhr.send(null);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// åå°ç¨‹åºçš„æ¨¡æ¿å˜é‡</span><br><span class="line">var localStorageSign = &apos;on&apos;;</span><br><span class="line">// ç‰ˆæœ¬æ§åˆ¶</span><br><span class="line">var resourceVersion = &apos;12312443243202&apos;;</span><br><span class="line"></span><br><span class="line">// æœ¬åœ°çš„Sdkä¸»æ–¹æ³•</span><br><span class="line">window.mLocalSdk = &#123;</span><br><span class="line"></span><br><span class="line">    resourceJavascriptList: [&#123;</span><br><span class="line">        id: &apos;1232131241&apos;,</span><br><span class="line">        url: &apos;/dest/js/lib/core.js&apos;,</span><br><span class="line">        type: &apos;javascript&apos;</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        id: &apos;1232131242&apos;,</span><br><span class="line">        url: &apos;/dest/js/lib/log.js&apos;,</span><br><span class="line">        type: &apos;javascript&apos;</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        id: &apos;1232131243&apos;,</span><br><span class="line">        url: &apos;/dest/js/lib/report.js&apos;,</span><br><span class="line">        type: &apos;javascript&apos;</span><br><span class="line">    &#125;],</span><br><span class="line"></span><br><span class="line">    needUpdate: (function() &#123;</span><br><span class="line">        return localStorage.getItem(&apos;resourceVersion&apos;) === resourceVersion;</span><br><span class="line">    &#125;)(),</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    isIE: (function() &#123;</span><br><span class="line">            var v = 3;</span><br><span class="line">            var div = document.createElement(&apos;div&apos;);</span><br><span class="line">            var all = div.getElementsByTagName(&apos;i&apos;);</span><br><span class="line">            while (</span><br><span class="line">                div.innerHTML = &apos;&lt;!-- [if gt IE&apos; + (++v) + &apos;]&gt;&lt;i&gt;&lt;/i&gt;&lt;![endif] --&gt;&apos;, !all[0])</span><br><span class="line">                 &#123;</span><br><span class="line">                    if(v &gt; 11)&#123;return false&#125;</span><br><span class="line">                &#125;</span><br><span class="line">            return v &gt; 3 ? v : false;</span><br><span class="line">        &#125;)(),</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    checkHedge: function() &#123;</span><br><span class="line">        var localStorageLength = localStorage.length;</span><br><span class="line">        var localStorageSize = 0;</span><br><span class="line">        for (var i = 0; i &lt; localStorageLength; i++) &#123;</span><br><span class="line">            var key = localStorage.key(i);</span><br><span class="line">            localStorageSize += localStorage.getItem(key).length;</span><br><span class="line">        &#125;</span><br><span class="line">        return localStorageSize;</span><br><span class="line">    &#125;,</span><br><span class="line">    saveSdk: function() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            localStorage.setItem(&apos;resourceVersion&apos;, resourceVersion);</span><br><span class="line">        &#125; catch (oException) &#123;</span><br><span class="line">            if (oException.name == &apos;QuotaExceededError&apos;) &#123;</span><br><span class="line">                localStorage.clear();</span><br><span class="line">                localStorage.setItem(&apos;resourceVersion&apos;, resourceVersion);</span><br><span class="line">            &#125;</span><br><span class="line">            alert(&apos;QuotaExceededError&apos;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        for (var i = 0; i &lt; this.resourceJavascriptList.length; i++) &#123;</span><br><span class="line">            _self = this;</span><br><span class="line">            (function(i)&#123;</span><br><span class="line">                var scriptId = _self.resourceJavascriptList[i][&apos;id&apos;];</span><br><span class="line">                var xhr = new Xhrfactory();</span><br><span class="line">                xhr.get(_self.resourceJavascriptList[i][&apos;url&apos;], null, function(data) &#123;</span><br><span class="line">                    try &#123;</span><br><span class="line">                        localStorage.setItem(scriptId, data);</span><br><span class="line">                    &#125; catch (oException) &#123;</span><br><span class="line">                        console.log(&apos;oException&apos;,oException);</span><br><span class="line">                        if (oException.name == &apos;QuotaExceededError&apos;) &#123;</span><br><span class="line">                            localStorage.clear();</span><br><span class="line">                            localStorage.setItem(scriptId, data);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;)(i);</span><br><span class="line">            // XXX addhtml åŠ è½½åˆ°é¡µé¢</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    startup: function() &#123;</span><br><span class="line">        // æ»¡è¶³ä¸€ä¸‹æ¡ä»¶</span><br><span class="line">        var _self = this;</span><br><span class="line">        if (localStorageSign === &apos;on&apos; &amp;&amp; !this.isIE &amp;&amp; window.localStorage) &#123;</span><br><span class="line"></span><br><span class="line">            if (this.needUpdate === true) &#123;</span><br><span class="line">                //ä¸éœ€è¦æ›´æ–°</span><br><span class="line">                return (function() &#123;</span><br><span class="line"></span><br><span class="line">                    for (var i = 0; i &lt; _self.resourceJavascriptList.length; i++) &#123;</span><br><span class="line">                        // è·å–æœ¬åœ°ç¼“å­˜åˆ—è¡¨ è¾“å…¥åˆ°htmlä¸Š</span><br><span class="line">                        var scriptId = _self.resourceJavascriptList[i][&apos;id&apos;];</span><br><span class="line">                        // æŠŠæˆ‘ä»¬çš„åˆ—è¡¨ä¸­çš„jsæ–‡ä»¶ æ¸²æŸ“åˆ°é¡µé¢</span><br><span class="line"></span><br><span class="line">                        // å»è¯»å–æœ¬åœ°æ–‡ä»¶</span><br><span class="line">                        window.mDomUtils.addJavascriptByInline(scriptId);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)();</span><br><span class="line"></span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                // ä¿å­˜æˆ‘ä»¬è¯·æ±‚åˆ°çš„jsæ–‡ä»¶</span><br><span class="line">                return (function() &#123;</span><br><span class="line">                    _self.saveSdk();</span><br><span class="line">                    for (var i = 0; i &lt; _self.resourceJavascriptList.length; i++) &#123;</span><br><span class="line">                        // è·å–æœ¬åœ°ç¼“å­˜åˆ—è¡¨ è¾“å…¥åˆ°htmlä¸Š</span><br><span class="line">                        var scriptId = _self.resourceJavascriptList[i][&apos;id&apos;];</span><br><span class="line">                        // æŠŠæˆ‘ä»¬çš„ åˆ—è¡¨ä¸­çš„jsæ–‡ä»¶ æ¸²æŸ“åˆ°é¡µé¢</span><br><span class="line"></span><br><span class="line">                        // å»è¯»å–æœ¬åœ°æ–‡ä»¶</span><br><span class="line">                        window.mDomUtils.addJavascriptByInline(scriptId);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                //***</span><br><span class="line">                // æŠŠä»ç½‘ç»œè·å–åˆ°çš„javascript è¾“å…¥åˆ°htmlä¸Šï¼›</span><br><span class="line">                // save localstroage</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line"></span><br><span class="line">            return function() &#123;</span><br><span class="line">                alert(2);</span><br><span class="line">                    for (var i = 0; i &lt; resourceJavascriptList.length; i++) &#123;</span><br><span class="line">                        // è·å–æœ¬åœ°ç¼“å­˜åˆ—è¡¨ è¾“å…¥åˆ°htmlä¸Š</span><br><span class="line">                        var scriptId = resourceJavascriptList[i][&apos;scriptId&apos;];</span><br><span class="line">                        // æŠŠæˆ‘ä»¬çš„åˆ—è¡¨ä¸­çš„jsæ–‡ä»¶ æ¸²æŸ“åˆ°é¡µé¢</span><br><span class="line"></span><br><span class="line">                        // è¯»å–ç½‘ç»œä¸Šå¾—åˆ°çš„èµ„æº</span><br><span class="line">                        window.mDomUtils.addJavascriptByLink(scriptId, resourceJavascriptList[i][&apos;url&apos;]);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                //***</span><br><span class="line">                // æŠŠä»ç½‘ç»œè·å–åˆ°çš„javascript è¾“å…¥åˆ°htmlä¸Šï¼›</span><br><span class="line">                // åŸå§‹æ–¹æ³•åŠ è½½javascriopt</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    // å†™å…¥æœ¬åœ°localstorage</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">window.mDomUtils = &#123;</span><br><span class="line">    // å†…è”æ–¹å¼æ·»åŠ javascript</span><br><span class="line">    addJavascriptByInline: function(scriptId) &#123;</span><br><span class="line">        var script = document.createElement(&apos;script&apos;);</span><br><span class="line">        script.setAttribute(&apos;type&apos;, &apos;text/javascript&apos;);</span><br><span class="line">        script.id = scriptId;</span><br><span class="line">        var heads = document.getElementsByTagName(&apos;head&apos;);</span><br><span class="line">        if (heads.lenght) &#123;</span><br><span class="line">            heads[0].appendChild(script);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            document.documentElement.appendChild(script);</span><br><span class="line">        &#125;</span><br><span class="line">        script.innerHTML = localStorage.getItem(scriptId);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // å¤–é“¾æ–¹å¼æ·»åŠ javascript</span><br><span class="line">    addJavascriptByLink: function(scriptId, url) &#123;</span><br><span class="line">        var script = document.createElemet(&apos;script&apos;);</span><br><span class="line">        script.setAttribute(&apos;type&apos;, &apos;text/javascript&apos;);</span><br><span class="line">        script.setAttribute(&apos;src&apos;, url);</span><br><span class="line">        script.id = scriptId;</span><br><span class="line">        var heads = document.getElementsByTagName(&apos;head&apos;);</span><br><span class="line">        if (heads.length) &#123;</span><br><span class="line">            heads[0].appendChild(script);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            document.documentElement.appendChild(script);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // å¤–é“¾æ–¹å¼æ·»åŠ css</span><br><span class="line"></span><br><span class="line">    addCssByLink: function(url) &#123;</span><br><span class="line">        var doc = document;</span><br><span class="line">        var link = doc.createElemet(&apos;link&apos;);</span><br><span class="line">        link.setAttribute(&apos;type&apos;, &apos;text/css&apos;);</span><br><span class="line">        link.setAttribute(&apos;rel&apos;, &apos;stylesheet&apos;);</span><br><span class="line">        link.setAttribute(&apos;href&apos;, url);</span><br><span class="line">        var heads = doc.getElementsByTagName(&apos;head&apos;);</span><br><span class="line">        if (heads.length) &#123;</span><br><span class="line">            heads[0].appendChild(link);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            doc.documentElement.appendChild(link);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    // å¤–é“¾æ–¹å¼æ·»åŠ css</span><br><span class="line"></span><br><span class="line">        addCssByLink: function(cssString) &#123;</span><br><span class="line">        var doc = document;</span><br><span class="line">        var link = doc.createElemet(&apos;link&apos;);</span><br><span class="line">        link.setAttribute(&apos;type&apos;, &apos;text/css&apos;);</span><br><span class="line">        link.setAttribute(&apos;rel&apos;, &apos;stylesheet&apos;);</span><br><span class="line"></span><br><span class="line">        if (link.stylesheet) &#123;</span><br><span class="line">            // IEæ”¯æŒ</span><br><span class="line">            link.stylesheet.cssText = cssString;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            // w3c</span><br><span class="line">            var cssText = doc.createTextNode(cssString);</span><br><span class="line">            link.appendChild(cssText);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        var heads = doc.getElementsByTagName(&apos;head&apos;);</span><br><span class="line">        if (heads.length) &#123;</span><br><span class="line">            heads[0].appendChild(link);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            doc.documentElement.appendChild(link);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>è§‰å¾—æ¯”è¾ƒå¥½çš„ï¼Œä¸€ä¸ªæ˜¯å®ƒåˆ¤æ–­ IE çš„æ–¹æ³•ï¼Œåˆ©ç”¨äº†åªæœ‰ IE å¯ä»¥è¯†åˆ«çš„ç‰¹æ€§ã€‚å¦å¤–ä¸€ä¸ªæ˜¯å®ƒåˆ¤æ–­ localStorage ç¼“å­˜çš„å¤§å°ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªæ˜¯å®ƒåˆ©ç”¨äº†è‡ªæ‰§è¡Œå‡½æ•°æ¥å»åšå…¶å®åªç”¨å»åˆå§‹åŒ–ä¸€æ¬¡çš„å·¥ä½œã€‚æ¯”å¦‚åˆ¤æ–­æœ¬åœ°çš„ç¼“å­˜æ˜¯å¦æ˜¯éœ€è¦è·Ÿæ–°ï¼ˆæ ¹æ®ç‰ˆæœ¬å·ï¼‰ï¼Œè€Œä¸æ˜¯åšæˆä¸€ä¸ªå‡½æ•°æ¯æ¬¡å»æ‰§è¡Œä¸€æ¬¡ã€‚</p>
<p>ä¸å¥½çš„å°±æ˜¯ï¼Œå¯èƒ½æ˜¯å› ä¸ºç°åœºå†™ä»£ç ï¼Œéšæœºæƒ³çš„ï¼Œæ‰€ä»¥æœ‰äº›åœ°æ–¹å¯ä»¥å°è£…ï¼Œéƒ½æ²¡æœ‰å°è£…å¥½ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è®°å½•ä¸‹æœ€è¿‘é›¶é›¶æ•£æ•£å­¦çš„å‡ ä¸ªçŸ¥è¯†ç‚¹ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id=&quot;å›¾ç‰‡æ˜¾ç¤ºæ–¹å¼&quot;&gt;&lt;a href=&quot;#å›¾ç‰‡æ˜¾ç¤ºæ–¹å¼&quot; class=&quot;headerlink&quot; title=&quot;å›¾ç‰‡æ˜¾ç¤ºæ–¹å¼&quot;&gt;&lt;/a&gt;å›¾ç‰‡æ˜¾ç¤ºæ–¹å¼&lt;/h1&gt;&lt;p&gt;æœ‰çš„æ—¶å€™çœ‹åˆ°ç½‘ç»œä¸Šæœ‰äº›å›¾ç¤ºç”±æ¨¡ç³Šå˜æ¸…æ™°ï¼Œæœ‰äº›æ˜¯ä¸€
    
    </summary>
    
    
      <category term="çŸ¥è¯†ç‚¹" scheme="http://sevencai.github.io/tags/%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    
  </entry>
  
  <entry>
    <title>å°ç¨‹åºä½¿ç”¨ component ç»„ä»¶é‡æ„</title>
    <link href="http://sevencai.github.io/2018/03/05/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%BD%BF%E7%94%A8-component-%E7%BB%84%E4%BB%B6%E9%87%8D%E6%9E%84/"/>
    <id>http://sevencai.github.io/2018/03/05/å°ç¨‹åºä½¿ç”¨-component-ç»„ä»¶é‡æ„/</id>
    <published>2018-03-05T13:40:58.000Z</published>
    <updated>2018-03-05T13:48:41.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>ä¸–ç•Œä¸Šæ²¡æœ‰ä¸€è¹´è€Œå°±çš„äº‹æƒ…ï¼Œä»»ä½•äº‹æƒ…ï¼Œéƒ½æœ‰èµ·æºï¼Œå‘å±•å’Œæœªæ¥ã€‚å¦‚æœä½ è·Ÿä»–å°±å…³ï¼Œé‚£å°±é€‚åº”å®ƒï¼Œè€Œä¸è¦æŠ±æ€¨å®ƒçš„å˜åŒ–ï¼Œæˆ–è€…æŠ±æ€¨ä»–ä¸ºä»€ä¹ˆä¸ä¸€å¼€å§‹å°±è¿™ä¹ˆåšã€‚</p>
</blockquote>
<hr>
<h1 id="å°è®°"><a href="#å°è®°" class="headerlink" title="å°è®°"></a>å°è®°</h1><p>å°ç¨‹åºåæ¥å‡ºäº† component, çœ‹äº†çœ‹è‡ªå·±çš„ä»£ç ï¼Œè¿˜æ˜¯æœ€åˆçš„ template + class,å¿ƒé‡Œå¥½éš¾å—ã€‚ äºæ˜¯èŠ±äº†2å¤©æ—¶é—´é‡æ„äº†ã€‚è¿™æ®µæ—¶é—´æ²¡æœ‰äº§å“æ’æœŸï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘æ˜¯æ‹¿åˆ«çš„é¡¹ç›®çš„æ—¶é—´å»é‡æ„çš„ã€‚æ—¶é—´ç•¥ç´§å¼ ï¼Œä¸è¿‡è¿˜æ˜¯ä¸€ç‚¹ç‚¹çš„å®Œæˆäº†ã€‚</p>
<p>component ç›¸å½“äºä¸€ä¸ªå®Œæ•´çš„ç»„ä»¶ï¼Œä½ å¯ä»¥å¯¹è¿™ä¸ªç»„ä»¶å®šä¹‰ä¸åŒçš„å†…å®¹ã€‚æœ‰è‡ªå·±çš„äº‹ä»¶å’Œ data, è¿™ä¸ªå€’æ˜¯è·Ÿ vue å¾ˆåƒã€‚</p>
<p>ä½†æ˜¯æ³¨æ„ component ä¸­çš„ css é™¤äº†ç»§æ‰¿å±æ€§ï¼ˆh1,emï¼‰ç­‰ä»¥å¤–ï¼Œå…¶ä»–çš„æ ·å­å¿…é¡»éƒ½å†™å…¥ component ä¸­ã€‚å¦‚æœä½ ä¸æƒ³åšè¿™ä»¶äº‹ï¼Œå°±æŠŠ app.wxss å¼•å…¥åˆ° component ä¸­å§ã€‚ï¼ˆè™½ç„¶æˆ‘ä¹Ÿå¾ˆä¸æƒ…æ„¿ï¼‰</p>
<hr>
<h1 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h1><p>ç”¨ <code>Component({})</code>å£°æ˜ã€‚å†…éƒ¨å¯ä»¥æœ‰è‡ªå·±çš„ data, methods, behaviors,è¿˜æœ‰ç±»ä¼¼äº vue çš„ attach, ready ç­‰å‡½æ•°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> rechargeItem <span class="keyword">from</span> <span class="string">'behaviors/jump-to-order'</span></span><br><span class="line"></span><br><span class="line">Component(&#123;</span><br><span class="line">  behaviors: [rechargeItem],</span><br><span class="line"></span><br><span class="line">  properties: &#123;</span><br><span class="line">     recommendList: &#123;</span><br><span class="line">      type: <span class="built_in">Array</span>,</span><br><span class="line">      value: []</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  methods: &#123;</span><br><span class="line">     bindClickEvent() &#123;</span><br><span class="line"></span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>behaviors å¯ä»¥ç†è§£ä¸º mixins, å¤šä¸ªç»„ä»¶éƒ½å¯èƒ½ç”¨åˆ°åŒæ ·çš„å†…å®¹ï¼Œå°±æŠŠå®ƒæŠ½ç¦»ä¸º behaviors å§ã€‚ æ¯”å¦‚ä¸Šé¢ï¼Œè°ƒåˆ°è®¢å•é¡µå¯ä»¥ä»å¾ˆå¤š component è¿‡æ¥ï¼Œæ¯”å¦‚ æ¨èï¼Œæœç´¢ã€‚é‚£ä¹ˆå°±æŠ½ç¦»æˆä¸€ä¸ª behavior, ç”¨åˆ°çš„æ—¶å€™å¼•å…¥è¿›æ¥å³å¯ã€‚</p>
<p>æ³¨æ„ä»»ä½•ä¸€ä¸ª component éƒ½éœ€è¦å£°æ˜å®ƒæ˜¯ä¸€ä¸ª component, æˆ‘çŒœæµ‹æ˜¯è¦è¯­ä¹‰æ›´å¥½å§ï¼Œå…å¾—è·Ÿ page ææ··äº†(ä½†æ˜¯ component å’Œ page å£°æ˜å°±ä¸ä¸€æ ·ï¼Œå…¶å®æ²¡å¿…è¦å•ç‹¬å†åœ¨ json ä¸­å£°æ˜ä¸‹ï¼Ÿ)ã€‚component ä¸éœ€è¦å†åœ¨ app.json é‡Œé¢å£°æ˜ï¼Œå› ä¸ºå®ƒä¸æ˜¯ä¸€ä¸ª pageã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;component&quot;: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åéœ€è¦å¼•å…¥è¿™ä¸ªç»„ä»¶çš„åœ°æ–¹ï¼Œè¿™æ ·å¼•å…¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;usingComponents&quot;: &#123;</span><br><span class="line">    &quot;recommend&quot;: &quot;../page_component/recommend/recommend&quot;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥å¼•å…¥å³å¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;recommend recommendList=&quot;&#123;&#123;recommendList&#125;&#125;&quot;&gt;&lt;/recommend&gt;</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œçš„ recommendList ç±»ä¼¼äº vue çš„ props, å¯ä»¥ç”¨äºä»çˆ¶ç»„ä»¶ï¼ˆpageï¼‰ä¼ é€’å†…å®¹åˆ°å­ç»„ä»¶ã€‚</p>
<p>ç„¶åå°±å†åŸå…ˆçš„ properties ä¸­æ¥å—å³å¯ã€‚ä¹Ÿå¯ä»¥ç”¨ <code>this.data</code>è®¿é—®åˆ°ã€‚</p>
<hr>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å…¶å®æ˜¯ä¸æƒ³å†™è¿™ä¸ªæ–‡ç« çš„çš„ï¼Œå› ä¸ºæ–‡ç« æœ¬èº«æ²¡æœ‰å•¥å¤ªå¤§çš„æ„ä¹‰ï¼Œè¿™äº›å¥½å¥½å­¦ä¹ å®˜ç½‘éƒ½å¯ä»¥çŸ¥é“çš„ã€‚ä½†æ˜¯ä¸å†™çš„è¯æ€»è§‰å¾—è‡ªå·±è¿™ä¸¤å¤©æ²¡å¹²å•¥ã€‚ä½†å®é™…ä¸Šï¼Œæˆ‘è§‰å¾—æˆ‘è‡ªå·±åšçš„äº‹æƒ…æœ‰æ„ä¹‰ï¼Œå› ä¸ºä»£ç æ›´å¥½äº†å‘€ã€‚è€Œä¸”å¯è¯»æ€§ä¹Ÿæ›´å¼ºäº†ï¼Œæ˜¯ component çš„ï¼Œtemplateçš„ï¼Œpageçš„ï¼Œapi modules çš„ï¼Œéƒ½æ¸…æ¸…æ¥šæ¥šäº†ã€‚å¼€å¿ƒã€‚</p>
<p>ä¼°è®¡éšåçš„ä¸€æ®µæ—¶é—´éƒ½ä¸ä¼šå†ç¢°å°ç¨‹åºäº†ï¼Œä¸‹æ¬¡è®²è®²å­¦ä¹ åˆ°çš„ vue æºç çš„å†…å®¹å§ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä¸–ç•Œä¸Šæ²¡æœ‰ä¸€è¹´è€Œå°±çš„äº‹æƒ…ï¼Œä»»ä½•äº‹æƒ…ï¼Œéƒ½æœ‰èµ·æºï¼Œå‘å±•å’Œæœªæ¥ã€‚å¦‚æœä½ è·Ÿä»–å°±å…³ï¼Œé‚£å°±é€‚åº”å®ƒï¼Œè€Œä¸è¦æŠ±æ€¨å®ƒçš„å˜åŒ–ï¼Œæˆ–è€…æŠ±æ€¨ä»–ä¸ºä»€ä¹ˆä¸ä¸€å¼€å§‹å°±è¿™ä¹ˆåšã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h1 id=&quot;å°è®°&quot;&gt;&lt;a href=&quot;#å°è®°&quot; clas
    
    </summary>
    
    
      <category term="å°ç¨‹åº" scheme="http://sevencai.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>å‡½æ•°ç«‹å³è¡¨è¾¾å¼æ•´ç†</title>
    <link href="http://sevencai.github.io/2018/02/27/%E5%87%BD%E6%95%B0%E7%AB%8B%E5%8D%B3%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%95%B4%E7%90%86/"/>
    <id>http://sevencai.github.io/2018/02/27/å‡½æ•°ç«‹å³è¡¨è¾¾å¼æ•´ç†/</id>
    <published>2018-02-27T14:09:32.000Z</published>
    <updated>2018-02-28T03:22:57.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯ Javascript çš„<strong>ç«‹å³æ‰§è¡Œå‡½æ•°</strong>çš„æ¯”è¾ƒä¸æ€»ç»“, åˆ—ä¸¾äº†ç°åœ¨å¤§éƒ¨åˆ†çš„ç«‹å³æ‰§è¡Œå‡½æ•°çš„å†™æ³•ï¼Œå¹¶ä¸”åˆ†æäº†é”™è¯¯çš„åŸå› å’Œæ­£ç¡®çš„åŸå› ã€‚</p>
</blockquote>
<hr>
<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>æ¥çœ‹å‡ ç§å†™æ³•ï¼Œä½ èƒ½åˆ†è¾¨å‡ºæ¥ï¼Œå“ªä¸ªæ˜¯æ­£ç¡®çš„ï¼Œå“ªä¸ªæ˜¯é”™è¯¯çš„å—ï¼Ÿ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">// å†™æ³•1</span><br><span class="line">function a() &#123;</span><br><span class="line">	console.log(&quot;a&quot;)</span><br><span class="line">&#125;();</span><br><span class="line"></span><br><span class="line">// å†™æ³•2</span><br><span class="line">(function b() &#123;</span><br><span class="line">	console.log(&quot;b&quot;)</span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line">// å†™æ³•3</span><br><span class="line">ï¼ˆfunction c() &#123;</span><br><span class="line">	console.log(&quot;c&quot;)</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">// å†™æ³•4</span><br><span class="line">var d = function d() &#123;</span><br><span class="line">	console.log(&quot;d&quot;)</span><br><span class="line">&#125;</span><br><span class="line">(d)()</span><br><span class="line"></span><br><span class="line">// å†™æ³•5</span><br><span class="line">var e = function e() &#123;</span><br><span class="line">	console.log(&quot;e&quot;)</span><br><span class="line">&#125;;</span><br><span class="line">(e)()</span><br><span class="line"></span><br><span class="line">// å†™æ³•6</span><br><span class="line">!function f() &#123;</span><br><span class="line">	console.log(&quot;f&quot;)</span><br><span class="line">&#125;();</span><br><span class="line"></span><br><span class="line">// å†™æ³•7</span><br><span class="line">+function g() &#123;</span><br><span class="line">	console.log(&quot;g&quot;)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// å†™æ³•8</span><br><span class="line">var h = function () &#123;</span><br><span class="line">	console.log(&quot;h&quot;)</span><br><span class="line">&#125;();</span><br><span class="line"></span><br><span class="line">// å†™æ³•9</span><br><span class="line">(a === 1) &amp;&amp; function () &#123; /* ... */ &#125; ();</span><br><span class="line"></span><br><span class="line">// å†™æ³• 10</span><br><span class="line">1, function () &#123; /* ... */ &#125;();</span><br><span class="line"></span><br><span class="line">// å†™æ³• 11</span><br><span class="line">function ï¼ˆï¼‰&#123;</span><br><span class="line">	console.log(&quot;a&quot;)</span><br><span class="line">&#125;();</span><br><span class="line"></span><br><span class="line">// å†™æ³• 12</span><br><span class="line">function j() &#123;</span><br><span class="line">	console.log(&quot;j&quot;)</span><br><span class="line">&#125;(1)</span><br></pre></td></tr></table></figure></p>
<p>ä¸Šé¢çš„å†™æ³•ä¸­ï¼Œæœ‰å‡ ç§æ˜¯é”™è¯¯âŒçš„ï¼Œä½ æ‰¾å‡ºæ¥äº†å—ï¼Ÿ</p>
<hr>
<h1 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h1><p>é¦–å…ˆåŸºæœ¬çŸ¥è¯†æ˜¯ï¼Œå£°æ˜  javascript çš„å‡½æ•°æœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯è¯­å¥ï¼ˆå‡½æ•°å£°æ˜ï¼‰çš„å½¢å¼å’Œè¡¨è¾¾å¼çš„å½¢å¼ï¼Œå…¶ä¸­è¯­å¥çš„å½¢å¼æ˜¯æœ‰å˜é‡æå‡çš„è¯´æ³•çš„ï¼Œè€Œè¡¨è¾¾å¼ä¸ä¼šï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// å‡½æ•°å£°æ˜</span><br><span class="line">function f() &#123;&#125;</span><br><span class="line"></span><br><span class="line">// è¡¨è¾¾å¼</span><br><span class="line">var f = function f() &#123;&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>å¯¹äº Javscript å¼•æ“è€Œè¨€ï¼Œ å¦‚æœ <code>function</code> å…³é”®å­—å‡ºç°åœ¨è¡Œé¦–ï¼Œä¼šè¢«è§£ææˆå‡½æ•°å£°æ˜çš„å½¢å¼ã€‚å‡½æ•°å£°æ˜å¿…é¡»åŒ…æ‹¬ ï¼š å…³é”®è¯ function, å‡½æ•°åï¼Œå½¢å‚ï¼Œå‡½æ•°ä½“ã€‚</strong></p>
<p>ç¬¬ä¸€ç§ï¼ˆå†™æ³•1ï¼‰âŒï¼Œå› ä¸ºç›´æ¥å¼€å¤´å‡ºç° function å…³é”®å­—ï¼Œ æœ‰å‡½æ•°åï¼Œæµè§ˆå™¨ä¼šè®¤ä¸ºè¿™æ˜¯å‡½æ•°å£°æ˜ï¼Œä¸‹é¢æ˜¯å‡½æ•°çš„å®šä¹‰ï¼Œä½†æ˜¯å®ƒåˆæ˜¯ä»¥åœ†æ‹¬å·ç»“å°¾ï¼Œæ‰€ä»¥å°±æŠ¥é”™äº†ã€‚</p>
<p>å®é™…ä¸Šå†™æ³•1ç­‰åŒäºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function a() &#123;</span><br><span class="line">	// ...</span><br><span class="line">&#125;</span><br><span class="line">()</span><br></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªç©ºçš„<code>()</code>é‡Œé¢æ²¡æœ‰æ“ä½œç¬¦ï¼Œæ‰€ä»¥æŠ¥äº†ç›¸åº”çš„é”™ã€‚<br>æŠ¥é”™çš„å†…å®¹æ˜¯<code>Uncaught SyntaxError: Unexpected token )</code>ã€‚</p>
<p>è€Œç¬¬11ç§ï¼ˆå†™æ³•11ï¼‰ï¼Œæµè§ˆå™¨ä¹Ÿè®¤ä¸ºæ˜¯å‡½æ•°å£°æ˜çš„å½¢å¼ï¼Œ<strong>ä½†æ˜¯å´æ²¡æœ‰æ‰¾åˆ°å‡½æ•°å</strong>ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯é”™è¯¯âŒçš„ã€‚æŠ¥é”™æ˜¯ï¼š<code>VM143:1 Uncaught SyntaxError: Unexpected token (</code> ã€‚æ‰€ä»¥è¯´è¿™ä¸¤ç§ç±»ä¼¼ï¼Œä½†æ˜¯æŠ¥é”™çš„åŸå› å¹¶ä¸ç›¸åŒã€‚</p>
<p>å¯¹äºå†™æ³•12ï¼Œ å®é™…ä¸Šç­‰åŒäº<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function j() &#123;</span><br><span class="line">	console.log(&quot;j&quot;)</span><br><span class="line">&#125;</span><br><span class="line">(1)</span><br></pre></td></tr></table></figure></p>
<p><strong>æ‰€ä»¥å®é™…ä¸Šï¼Œå®ƒä¸ä¼šæŠ¥é”™ï¼Œå› ä¸º<code>()</code>æœ‰æ“ä½œç¬¦ï¼Œä½†æ˜¯ j å‡½æ•°ä¹Ÿä¸ä¼šè¢«æ‰§è¡Œï¼Œ æœ€åè¿”å›çš„æ˜¯ 1ï¼Œ å› ä¸ºåªæœ‰ (1) æ‰§è¡Œäº†ã€‚</strong></p>
<p>é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆ2ï¼Œ3å†™æ³•æ˜¯æ­£ç¡®âœ…çš„å‘¢ï¼Ÿ<strong>å› ä¸ºå½“æµè§ˆå™¨è§£æç¢°åˆ°äº†<code>()</code>æ—¶ï¼Œ<code>()</code>é‡Œé¢ä¸èƒ½åŒ…å«å‡½æ•°å£°æ˜ï¼Œæ‰€ä»¥æµè§ˆå™¨ä¼šæŠŠè¿™ä¸ªè§£ææˆå‡½æ•°è¡¨è¾¾å¼ã€‚å½“å®ƒæ˜¯å‡½æ•°è¡¨è¾¾å¼çš„æ—¶å€™ï¼Œè‡ªç„¶å°±ç«‹å³æ‰§è¡Œäº†ã€‚å¹¶ä¸”ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚</strong></p>
<p>å› æ­¤ä¸‹é¢ä¸¤ç§éƒ½æ˜¯æ­£ç¡®çš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(function()&#123; /* ... */ &#125;());</span><br><span class="line">(function()&#123; /* ... */ &#125;)();</span><br></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥å¦‚æœæˆ‘ä»¬è¦è®©å®ƒå¯ä»¥è¢«æµè§ˆå™¨è¯†åˆ«ï¼Œé‚£ä¹ˆå°±è®©æµè§ˆå™¨çŸ¥é“å®ƒæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼å§ã€‚ å› æ­¤6ï¼Œ7ï¼Œ9ï¼Œ10ä»–ä»¬éƒ½æ˜¯æ­£ç¡®çš„ã€‚9,10è¿™ä¸¤ç§å†™æ³•ï¼Œå‰é¢ä¸€ä¸ªæ˜¯è¡¨è¾¾å¼ï¼Œæµè§ˆå™¨è‡ªç„¶ä¹Ÿè®¤ä¸ºåé¢ä¸€ä¸ªä¹Ÿæ˜¯è¡¨è¾¾å¼ã€‚</p>
<p>è¿™ç§ç§°ä¸º<strong>â€œç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼â€ï¼ˆImmediately-Invoked Function Expressionï¼‰ï¼Œç®€ç§° IIFEã€‚</strong> ç„¶è€Œå®é™…ä¸­ï¼Œ<strong>æˆ‘ä»¬é€šå¸¸ä¼šå«ç«‹å³æ‰§è¡Œå‡½æ•°ã€‚</strong></p>
<p>ä½†æ˜¯æ³¨æ„ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼åé¢ä¸€å®šè¦æ˜¯æœ‰åˆ†å·ï¼Œå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">!function () &#123; /* ... */ &#125;();</span><br><span class="line">~function () &#123; /* ... */ &#125;();</span><br><span class="line">-function () &#123; /* ... */ &#125;();</span><br><span class="line">+function () &#123; /* ... */ &#125;();</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœæ²¡æœ‰åˆ†å·ï¼Œæµè§ˆå™¨åˆä¼šé”™è¯¯çš„è¯†åˆ«äº†ã€‚è®¤ä¸ºç¬¬äºŒè¡Œæ˜¯ç¬¬ä¸€è¡Œçš„å‚æ•°ã€‚æ‰€ä»¥å†™æ³•4æ­£ç¡®ï¼Œå†™æ³•5é”™è¯¯âŒï¼Œ è¿™ä¸ªä¸€å®šè¦æ³¨æ„äº†ã€‚</p>
<hr>
<h1 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h1><p>ç«‹å³æ‰§è¡Œå‡½æ•°çš„ä½œç”¨ï¼Œæœ€å¸¸è§çš„æ˜¯é…åˆé—­åŒ…çš„ä½¿ç”¨ï¼Œæ¥ä¿å­˜å‡½æ•°å±€éƒ¨çŠ¶æ€ã€‚å› ä¸ºç«‹å³æ‰§è¡Œå‡½æ•°ä¹Ÿèƒ½å¤Ÿä¼ å‚æ•°ã€‚æ‰€ä»¥æœ‰äº†æœ€ç»å…¸çš„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for(var i = 0; i &lt; 5; i++) &#123;</span><br><span class="line">  (function (i) &#123;</span><br><span class="line">     setTimeout(() =&gt; &#123;</span><br><span class="line">		console.log(&quot;i&quot;,i)</span><br><span class="line">	 &#125;,0)</span><br><span class="line">  &#125;)(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿™æ ·å¯ä»¥åˆ†åˆ«æ‰“å°å‡º i ä» 1-5ï¼Œ ä½†æ˜¯å¦‚æœä½ åƒä¸‹é¢è¿™æ ·å†™ï¼Œå°±ä¼šæ‰“å°å‡º5ä¸ª5äº†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for(var i = 0; i &lt; 5; i++) &#123;</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">     console.log(&quot;i&quot;,i)</span><br><span class="line">  &#125;,0)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ›´ä¸ºç»å…¸çš„ä¸€ä¸ªä¾‹å­å¦‚ä¸‹, ä½ æƒ³è¦å¯¹æ¯ä¸ª a å…ƒç´ éƒ½ç»‘å®šä¸€ä¸ªä¸åŒçš„äº‹ä»¶ï¼Œè¿™é‡Œ log å‡º i çš„å€¼ã€‚ä½†æ˜¯å´å¾—ä¸åˆ°ä½ æƒ³è¦çš„ç»“æœï¼Œå› ä¸ºåœ¨æˆ‘ä»¬æ‰§è¡Œç‚¹å‡»äº‹ä»¶çš„æ—¶å€™ï¼Œ i å·²ç»è¢«æ‰§è¡Œå®Œï¼Œä¸º5äº†ã€‚æ‰€ä»¥å¯¹äº a0, a1,a2,a3éƒ½æ²¡æœ‰è¢«ç»‘å®šç›¸åº”çš„äº‹ä»¶ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var elems = document.getElementsByTagName( &apos;a&apos; );</span><br><span class="line"></span><br><span class="line">for ( var i = 0; i &lt; elems.length; i++ ) &#123;</span><br><span class="line">  elems[i].addEventListener( &apos;click&apos;, function(e)&#123;</span><br><span class="line">    console.log( &apos;i,&apos; + i );</span><br><span class="line">  &#125;, &apos;false&apos; );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°å’Œé—­åŒ…æ¥æ”¹å†™ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var elems = document.getElementsByTagName( &apos;a&apos; );</span><br><span class="line"></span><br><span class="line">for (var i = 0; i &lt; eles.length; i++) &#123;</span><br><span class="line">  (function (i) &#123;</span><br><span class="line">    elems[i].addEventListener( &apos;click&apos;, function(e)&#123;</span><br><span class="line">      console.log( &apos;i,&apos; + i );</span><br><span class="line">    &#125;, &apos;false&apos; );</span><br><span class="line">  &#125;)(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿™æ ·å°± ok äº†ã€‚æ³¨æ„ i ä¸€å®šè¦åœ¨å¤–éƒ¨æ‹¬å·å’Œé‡Œé¢çš„æ‹¬å·éƒ½ä¼ é€’è¿›å»ï¼Œå¦åˆ™ i ä¸ä¼šè¢«é”ä½ã€‚</p>
<p>ç«‹å³æ‰§è¡Œå‡½æ•°å½“ç„¶è¿˜æœ‰åˆ«çš„å¥½å¤„ï¼Œç»å¸¸è§çš„å°±æ˜¯<strong>å‡å°‘å…¨å±€å˜é‡çš„å®šä¹‰</strong>ï¼Œæ¯”å¦‚ jquery çš„å®šä¹‰ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(function( $ ) &#123;</span><br><span class="line">  $.fn.myPlugin = function() &#123;</span><br><span class="line">	var a = 1;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)( jQuery );</span><br></pre></td></tr></table></figure></p>
<p>è¿™æ ·å‡å°‘äº†å…¨å±€å˜é‡ï¼Œæ¯ä¸ªæ’ä»¶è‡ªå·±ç”¨è‡ªå·±çš„å˜é‡ï¼Œä»¥é˜²æ­¢å†²çªã€‚æ€§èƒ½ä¹Ÿä¼šå¥½äº›ã€‚</p>
<hr>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä¸»è¦æ˜¯ä»¥å‰å…¶å®è¿™äº›çŸ¥è¯†ç‚¹éƒ½æ˜¯çŸ¥é“çš„ï¼Œä½†æ˜¯æ²¡æœ‰ç³»ç»Ÿçš„æ€»ç»“æˆ–è€…æ€è€ƒè¿‡ï¼Œè¿™æ¬¡ç®—æ˜¯æœ‰ä¸ªç¨å¾®æ•´ä½“ä¸€ç‚¹çš„è®¤è¯†ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯ Javascript çš„&lt;strong&gt;ç«‹å³æ‰§è¡Œå‡½æ•°&lt;/strong&gt;çš„æ¯”è¾ƒä¸æ€»ç»“, åˆ—ä¸¾äº†ç°åœ¨å¤§éƒ¨åˆ†çš„ç«‹å³æ‰§è¡Œå‡½æ•°çš„å†™æ³•ï¼Œå¹¶ä¸”åˆ†æäº†é”™è¯¯çš„åŸå› å’Œæ­£ç¡®çš„åŸå› ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h1 id=&quot;é—®é¢˜&quot;&gt;
    
    </summary>
    
    
      <category term="Javascript" scheme="http://sevencai.github.io/tags/Javascript/"/>
    
  </entry>
  
  <entry>
    <title>GBK, GB2312, UTF-8, Unicode,encodeURI, escapeçš„åŒºåˆ«å’Œè”ç³»</title>
    <link href="http://sevencai.github.io/2018/02/27/GBK-GB2312-UTF-8-Unicode-encodeURI-escape%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB/"/>
    <id>http://sevencai.github.io/2018/02/27/GBK-GB2312-UTF-8-Unicode-encodeURI-escapeçš„åŒºåˆ«å’Œè”ç³»/</id>
    <published>2018-02-27T04:00:04.000Z</published>
    <updated>2018-02-28T03:09:30.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>æœ¬ç¯‡ç›®çš„ä¸»è¦æ˜¯ææ¸…æ¥šUTF-8, GBK,  Unicode, ASCIIç ï¼ŒUnicode, escape, encodeURIComponent, encodeURI ç¼–ç ç­‰ç­‰çš„åŒºåˆ«å’Œè”ç³»ã€‚</p>
</blockquote>
<hr>
<h1 id="æ–‡ç« èµ·æº"><a href="#æ–‡ç« èµ·æº" class="headerlink" title="æ–‡ç« èµ·æº"></a>æ–‡ç« èµ·æº</h1><p>äº‹æƒ…èµ·æºæ˜¯ï¼Œä»Šå¤©åœ¨åšå°ç¨‹åºçš„æ—¶å€™ï¼Œå‘ç°æˆ‘è¯·æ±‚ä¸šåŠ¡æ¥å£æ—¶ï¼Œä¸šåŠ¡æ¥å£è¿”å›çš„æ˜¯gbkç¼–ç ã€‚</p>
<p>ç„¶åè¿™ä¸ªåœ¨å°ç¨‹åºä¸­ä¸æ”¯æŒï¼Œä¼šè¿”å›å†…å®¹å¦‚ï¼š<code>fail response data convert to UTF8 fail</code>, åœ¨  pc ç«¯åŠ android ç«¯è¡¨ç°æ­£å¸¸ï¼Œä½†æ˜¯åœ¨ ios ä¸‹ä¼šè¿”å›æ­¤é”™è¯¯ç ã€‚</p>
<p>äºæ˜¯å¾ˆä¸å¥½æ„æ€çš„æ‰¾åˆ°äº†ä¸šåŠ¡æ–¹çš„åŒäº‹ï¼Œçœ‹èƒ½ä¸èƒ½æŠŠè¿”å›çš„å†…å®¹å˜æˆæ ‡å‡†çš„ utf8 æ—  bomç¼–ç æ ¼å¼ã€‚è¯è¯´ï¼Œæˆ‘é‡åˆ°çš„è¿™ä¸ªåŒäº‹çœŸçš„å¥½ nice, ä»¥å‰è·¨éƒ¨é—¨çš„åˆä½œæ²¡æœ‰1-2å¤©ä¸‹ä¸æ¥ï¼Œè¿™ä¸ªåŒäº‹æ•ˆç‡æ¯”è¾ƒé«˜ï¼Œæ¯æ¬¡æœ‰é—®é¢˜æ‰¾åˆ°ä»–ï¼Œéƒ½èƒ½å¤Ÿå¾ˆå¿«çš„åé¦ˆç»™æˆ‘ï¼ˆæ„Ÿæ©ï¼‰ã€‚ç„¶åä»–å°±è·Ÿæˆ‘è¯´äº†ä¸‹é¢è¿™æ ·ä¸€å¥è¯ï¼š</p>
<blockquote>
<p>ä½ è¯·æ±‚å‚æ•°ç”¨gbkç¼–ç   æˆ‘è¿”å›ç»™ä½ utf8ä½ çœ‹å¦‚ä½•ï¼Ÿ</p>
</blockquote>
<p>å¤§æ¦‚æ˜¯éƒ½ç»Ÿä¸€ç”¨ utf8 å¯¹äºä»–æ”¹åŠ¨æ¯”è¾ƒå¤§ï¼Œäºæ˜¯ä»–æå‡ºæˆ‘è¯·æ±‚çš„æ—¶å€™ç”¨ gbk ç¼–ç ã€‚äºæ˜¯æˆ‘æŠŠè¿™æ®µè¯é”™è¯¯ç†è§£ä¸ºäº†ï¼š</p>
<blockquote>
<p>ä½ è¯·æ±‚çš„æ—¶å€™ï¼Œç”¨ gbk ç¼–ç è¯·æ±‚ï¼Œæˆ‘è¿”å›ç»™ä½  utf8ã€‚</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä¼šåœ¨è¯·æ±‚ header é‡ŒåŠ å…¥ <code>charset=gbk</code>, ä»–è¿”å›ç»™æˆ‘ utf8 ç¼–ç å†…å®¹å°±å¥½ã€‚</p>
<p>ä½†å®é™…ä¸ŠåŒäº‹è¿™å¥è¯çš„æ„æ€æ˜¯ï¼š</p>
<blockquote>
<p>æŠŠè°ƒç”¨ä»–æ¥å£çš„<strong>è¯·æ±‚å‚æ•°</strong>ç”¨gbkç¼–ç ï¼Œè€Œä¸æ˜¯åœ¨è¯·æ±‚å¤´é‡ŒåŠ  headerã€‚æˆ‘æ‰äº†å‚æ•°ä¸¤ä¸ªå­—ã€‚</p>
</blockquote>
<p>å› ä¸ºæˆ‘ä»¬ç»„å†…çš„å‰ç«¯ç»Ÿä¸€ç”¨çš„éƒ½æ˜¯ utf8, ç¼–ç éƒ½æ˜¯ç”¨ encodeURI, encodeURIComponent,  ä»¥å‰ä¹Ÿæ²¡æœ‰ç”¨è¿‡æŠŠå‚æ•°åš gbk ç¼–ç çš„è¿™ç§æ–¹å¼ï¼Œå¯¼è‡´äº†æˆ‘è®¤ä¸ºæ˜¯åœ¨è¯·æ±‚å¤´é‡Œè¯·æ±‚ç”¨ gbkã€‚ å¹¶ä¸”å¯¹ encodeURI ç­‰ç­‰çš„ä¸æ·±å…¥äº†è§£ï¼Œå¯¼è‡´äº†æˆ‘æµªè´¹äº†åŒäº‹çš„æ—¶é—´ã€‚ encodeURI, encodeURIComponent éƒ½æ˜¯é’ˆå¯¹ utf-8 çš„ç¼–ç ï¼Œ ä¸èƒ½å¤ŸæŒ‡å®šç¼–ç æ–¹å¼ã€‚ gbk ç¼–ç åœ¨ github ä¸Šæœ‰è¿™ç§æˆç†Ÿçš„ npmã€‚</p>
<p>å¤§æ¦‚çš„æ€è·¯æ˜¯,å¦‚æœæ˜¯ ASCII ç ï¼Œç›´æ¥ encodeï¼Œ åˆ¤æ–­ä¸æ˜¯ ASCII ç åï¼Œå†è¿›è¡Œ GBK çš„æ¯”å¯¹ç¼–ç ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">export const encodeUrlGbk = (str) =\&gt; &#123;</span><br><span class="line">    return str &amp;&amp; str.replace(/./g,function (a) &#123;</span><br><span class="line">         var code = a.charCodeAt(0);</span><br><span class="line">         if (_isAscii(code)) &#123;</span><br><span class="line">            return encodeURIComponent(a);</span><br><span class="line">         &#125; else &#123;</span><br><span class="line">            var key = code.toString(16);</span><br><span class="line">         if (key.length !== 4) &#123;</span><br><span class="line">            key = (&apos;000&apos; \+ key).match(/....$/)\[0\];</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         return _charHash.U2Ghash\[key\] || a;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è™½ç„¶é—®é¢˜è§£å†³äº†ï¼Œä½†æ˜¯å‘ç°äº†è‡ªå·±å¯¹è¿™å—æ˜¯ä¸æ˜¯æ ¹æœ¬æ²¡æœ‰å¼„æ¸…æ¥šï¼Œä»Šå¤©ä»”ç»†çš„æŸ¥äº†èµ„æ–™ï¼Œä»æ–°å­¦ä¹ å’Œè®¤è¯†ä¸‹ï¼Œæƒ³æŠŠè¿™äº›å†…å®¹éƒ½äº†è§£å¹¶ä¸”æ¯”è¾ƒæ¸…æ¥šã€‚</p>
<hr>
<h1 id="escape-encodeURIComponent-encodeURI-çš„åŒºåˆ«å’Œè”ç³»"><a href="#escape-encodeURIComponent-encodeURI-çš„åŒºåˆ«å’Œè”ç³»" class="headerlink" title="escape, encodeURIComponent, encodeURI çš„åŒºåˆ«å’Œè”ç³»"></a>escape, encodeURIComponent, encodeURI çš„åŒºåˆ«å’Œè”ç³»</h1><p>å¦‚æœä½ æƒ³ç›´æ¥çœ‹ç»“è®ºï¼Œå¯ä»¥è·³è¿‡ä¸‹éƒ¨åˆ†å¼•ç”¨å†…å®¹ã€‚</p>
<blockquote>
<p>escape() å‡½æ•°å¯å¯¹å­—ç¬¦ä¸²è¿›è¡Œç¼–ç ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æ‰€æœ‰çš„è®¡ç®—æœºä¸Šè¯»å–è¯¥å­—ç¬¦ä¸²ã€‚</p>
</blockquote>
<p>è¯¥æ–¹æ³•ä¸ä¼šå¯¹ ASCII å­—æ¯å’Œæ•°å­—è¿›è¡Œç¼–ç ï¼Œä¹Ÿä¸ä¼šå¯¹ä¸‹é¢è¿™äº› ASCII æ ‡ç‚¹ç¬¦å·è¿›è¡Œç¼–ç ï¼š * @ - _ + . / ã€‚å…¶ä»–æ‰€æœ‰çš„å­—ç¬¦éƒ½ä¼šè¢«è½¬ä¹‰åºåˆ—æ›¿æ¢ã€‚ä»–çš„è§£ç ä¸º unescapeã€‚</p>
<p><strong>ECMAScript v3 åå¯¹ä½¿ç”¨è¯¥æ–¹æ³•</strong>ï¼Œåº”ç”¨ä½¿ç”¨ decodeURI() å’Œ decodeURIComponent() æ›¿ä»£å®ƒã€‚</p>
<blockquote>
<p>encodeURI() å‡½æ•°å¯æŠŠå­—ç¬¦ä¸²ä½œä¸º URI è¿›è¡Œç¼–ç ã€‚</p>
</blockquote>
<p>è¯¥æ–¹æ³•ä¸ä¼šå¯¹ ASCII å­—æ¯å’Œæ•°å­—è¿›è¡Œç¼–ç ï¼Œä¹Ÿä¸ä¼šå¯¹è¿™äº› ASCII æ ‡ç‚¹ç¬¦å·è¿›è¡Œç¼–ç ï¼š - _ . ! ~ * â€˜ ( ) ã€‚</p>
<p>è¯¥æ–¹æ³•çš„ç›®çš„æ˜¯å¯¹ URI è¿›è¡Œå®Œæ•´çš„ç¼–ç ï¼Œå› æ­¤å¯¹ä»¥ä¸‹åœ¨ URI ä¸­å…·æœ‰ç‰¹æ®Šå«ä¹‰çš„ ASCII æ ‡ç‚¹ç¬¦å·ï¼ŒencodeURI() å‡½æ•°æ˜¯ä¸ä¼šè¿›è¡Œè½¬ä¹‰çš„ï¼š;/?:@&amp;=+$,#</p>
<p><strong>å¦‚æœ URI ç»„ä»¶ä¸­å«æœ‰åˆ†éš”ç¬¦ï¼Œæ¯”å¦‚ ? å’Œ #ï¼Œåˆ™åº”å½“ä½¿ç”¨ encodeURIComponent() æ–¹æ³•åˆ†åˆ«å¯¹å„ç»„ä»¶è¿›è¡Œç¼–ç ã€‚</strong></p>
<blockquote>
<p>encodeURIComponent() å‡½æ•°å¯æŠŠå­—ç¬¦ä¸²ä½œä¸º URI ç»„ä»¶è¿›è¡Œç¼–ç ã€‚</p>
</blockquote>
<p>è¯¥æ–¹æ³•ä¸ä¼šå¯¹ ASCII å­—æ¯å’Œæ•°å­—è¿›è¡Œç¼–ç ï¼Œä¹Ÿä¸ä¼šå¯¹è¿™äº› ASCII æ ‡ç‚¹ç¬¦å·è¿›è¡Œç¼–ç ï¼š - _ . ! ~ * â€˜ ( ) ã€‚ï¼ˆè¿™ç‚¹ä¸ encodeURI ç›¸åŒï¼‰</p>
<p>å…¶ä»–å­—ç¬¦ï¼ˆæ¯”å¦‚ ï¼š;/?:@&amp;=+$,# è¿™äº›ç”¨äºåˆ†éš” URI ç»„ä»¶çš„æ ‡ç‚¹ç¬¦å·ï¼‰ï¼Œéƒ½æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªåå…­è¿›åˆ¶çš„è½¬ä¹‰åºåˆ—æ›¿æ¢çš„ã€‚ ï¼ˆè¿™ç‚¹ä¸ encodeURIComponent ä¸åŒï¼‰</p>
<p>å…³äºè¿™ä¸‰ä¸ªå‡½æ•°æ€»ç»“ä¸‹å¦‚ä¸‹ï¼š</p>
<p><strong>å¦‚æœæ˜¯è·Ÿurlç¼–ç æœ‰å…³ç³»çš„ï¼Œå…ˆå¿˜æ‰ escape è¿™ä¸ªå‡½æ•°ï¼Œä»–è·Ÿ url ç¼–ç æ¯«æ— å…³ç³»ï¼Œå®ƒåªæ˜¯èƒ½å¤Ÿè¾¾åˆ°ç±»ä¼¼äº URL Encode è¿™ç±»ä¼¼çš„æ•ˆæœï¼Œä½†æ˜¯å®ƒå¯¹äºé ASCII å­—ç¬¦ä½¿ç”¨äº†ä¸€ç§éæ ‡å‡†çš„å®ç°ï¼Œæ¯”å¦‚æŸäº›æ±‰å­—ä¼šè¢«ç¼–ç æˆ %uxxxx è¿™ç§å½¢å¼ï¼Œ åœ¨å°ç¨‹åºä¸­ï¼Œurlä½¿ç”¨ escape, ä¼šæŠ¥é”™ï¼š fail request:fail _invalid url è¿™ç±»ä¼¼çš„æ¶ˆæ¯ã€‚å¹¶ä¸” W3C æŠŠè¿™ä¸ªå‡½æ•°åºŸå¼ƒäº†ï¼Œèƒ½ä¸ä½¿ç”¨å°½é‡ä¸è¦å»ä½¿ç”¨ </strong></p>
<p><strong>å¯¹äº url çš„ç¼–ç ï¼Œå°±ä½¿ç”¨ encodeURI åŠ encodeURIComponent, ä»–ä»¬éƒ½æ˜¯ä¸ºäº† url ç¼–ç è€Œè®¾è®¡ï¼Œä¸åŒçš„åœ°æ–¹åœ¨äº encodeURI ç”¨äºå¯¹å®Œæ•´çš„ url è¿›è¡Œç¼–ç ï¼Œäºæ˜¯URLä¸­çš„åŠŸèƒ½å­—ç¬¦ï¼Œæ¯”å¦‚&amp;, ?, /, =ç­‰ç­‰è¿™äº›å¹¶ä¸ä¼šè¢«è½¬ä¹‰ï¼Œ è€Œ encodeURIComponent è¢«è®¾è®¡ç”¨æ¥å¯¹æŸæ®µ queryï¼ˆæŸä¸ªå€¼ï¼‰ ç¼–ç ã€‚æ‰€ä»¥æ­£ç¡®ç”¨æ³•æ˜¯ encodeURIComponent ç»å¸¸ç”¨äºå¯¹æ¯ä¸ª key value è¿›è¡Œåˆ†åˆ«ç¼–ç ã€‚</strong></p>
<hr>
<h1 id="å»¶ä¼¸é˜…è¯»-escape-encodeURIçš„ç¼–ç æ–¹å¼-ç™¾åˆ†å·ç¼–ç "><a href="#å»¶ä¼¸é˜…è¯»-escape-encodeURIçš„ç¼–ç æ–¹å¼-ç™¾åˆ†å·ç¼–ç " class="headerlink" title="å»¶ä¼¸é˜…è¯»-escape, encodeURIçš„ç¼–ç æ–¹å¼-ç™¾åˆ†å·ç¼–ç "></a>å»¶ä¼¸é˜…è¯»-escape, encodeURIçš„ç¼–ç æ–¹å¼-ç™¾åˆ†å·ç¼–ç </h1><blockquote>
<p><strong>ç™¾åˆ†å·ç¼–ç </strong>ï¼ˆè‹±è¯­ï¼šPercent-encodingï¼‰, ä¹Ÿç§°ä½œURLç¼–ç ï¼ˆè‹±è¯­ï¼šURL encodingï¼‰, æ˜¯ç‰¹å®šä¸Šä¸‹æ–‡çš„ç»Ÿä¸€èµ„æºå®šä½ç¬¦ (URL)çš„ç¼–ç æœºåˆ¶. å®é™…ä¸Šä¹Ÿé€‚ç”¨äºç»Ÿä¸€èµ„æºæ ‡å¿—ç¬¦ï¼ˆURIï¼‰çš„ç¼–ç ã€‚ä¹Ÿç”¨äºä¸ºâ€application/x-www-form-urlencodedâ€ MIMEå‡†å¤‡æ•°æ®, å› ä¸ºå®ƒç”¨äºé€šè¿‡HTTPçš„è¯·æ±‚æ“ä½œ(request)æäº¤HTMLè¡¨å•æ•°æ®ã€‚</p>
</blockquote>
<p>å¯¹äº escape ä»¥åŠ encodeURI éƒ½æ˜¯å±äº <code>percent-encoding</code>ã€‚å·®ä¸å¤šéƒ½æ˜¯æŠŠ URI éæ³•å­—ç¬¦è½¬åŒ–ä¸ºåˆæ³•å­—ç¬¦ï¼Œ è½¬åŒ–ä»¥åæœ‰ <code>%</code>, æ‰€ä»¥æˆ‘çŒœæ‰å« percent-encoding å§ï¼Œå“ˆå“ˆã€‚</p>
<p>é¦–å…ˆ escape å’Œ encodeURI åœ¨å¤„ç† 0xff ä»¥å†…çš„å†…å®¹æ—¶ï¼Œéƒ½æ˜¯ç›¸åŒçš„ã€‚ä¹Ÿå°±æ˜¯è¯´æ˜¯ %xx,  è¿™é‡Œçš„ xx æ˜¯å­—ç¬¦çš„ 16è¿›åˆ¶ unicode (æ­¤æ—¶çš„ unicode === utf8å€¼ï¼Œ æ‰€ä»¥ escape çš„å€¼ä¹Ÿç­‰äº encodeURI çš„å€¼)ã€‚</p>
<p><strong>ä½† escape åœ¨å¤„ç† 0xff ä¹‹å¤–çš„æ—¶å€™ï¼Œ ç›´æ¥ä½¿ç”¨å­—ç¬¦çš„ unicode , å¹¶ä¸”åœ¨å‰é¢å†åŠ ä¸Šä¸€ä¸ª <code>%u</code>ï¼ˆä¸æ ‡å‡†ï¼‰ , è€Œ encodeURI æ˜¯å…ˆå¯¹ unicode è¿›è¡Œ utf-8 ç¼–ç ï¼Œå†åœ¨æ¯ä¸ª utf-8 ç¼–ç å‰åŠ ä¸Š %ï¼ˆæ ‡å‡†ï¼‰ã€‚</strong></p>
<p>æ¯”å¦‚ä¸­æ–‡çš„ã€æˆ‘ã€‘å­—ï¼Œ ä»–çš„ unicode ä¸º 0x6211,  å¯¹ä»–è¿›è¡Œ utf8 ç¼–ç å˜æˆäº† 0xe6, 0x88, 0x91, å› æ­¤ escape å¾—åˆ°çš„å€¼ä¸º <code>\u6211</code>, ä½†æ˜¯encodeURI çš„ç»“æœæ˜¯ <code>%E6%88%91</code>ã€‚</p>
<p>å¯¹ escape, encodeURI è¿™äº›å…¶å®ä»¥å‰æ˜¯äº†è§£çš„ï¼Œ ä½†æ˜¯è¿™æ¬¡æ˜¯çœŸæ­£çš„æ€»ç»“æ¸…æ¥šäº†ï¼ŒæŒºå¼€å¿ƒã€‚ä¸Šé¢æ˜¯ä¸æ˜¯æåˆ°äº†å¾ˆå¤šæ¯”å¦‚ utf8, gbk, unicode ä¹‹ç±»çš„è¯ã€‚ ä¸‹é¢å¯¹è¿™äº›åè¯ä¹Ÿåšä¸€äº›ç®€å•çš„å½’ç±»å’Œæ€»ç»“ã€‚</p>
<hr>
<h1 id="UTF-8-Unicode-ASCIIç çš„åŒºåˆ«å’Œè”ç³»"><a href="#UTF-8-Unicode-ASCIIç çš„åŒºåˆ«å’Œè”ç³»" class="headerlink" title="UTF-8, Unicode, ASCIIç çš„åŒºåˆ«å’Œè”ç³»"></a>UTF-8, Unicode, ASCIIç çš„åŒºåˆ«å’Œè”ç³»</h1><blockquote>
<p>ASCIIï¼ˆAmerican Standard Code for Information Interchangeï¼Œç¾å›½ä¿¡æ¯äº¤æ¢æ ‡å‡†ä»£ç ï¼‰æ˜¯åŸºäº<a href="https://baike.baidu.com/item/%E6%8B%89%E4%B8%81%E5%AD%97%E6%AF%8D" target="_blank" rel="noopener">æ‹‰ä¸å­—æ¯</a>çš„ä¸€å¥—ç”µè„‘ç¼–ç ç³»ç»Ÿï¼Œä¸»è¦ç”¨äºæ˜¾ç¤ºç°ä»£<a href="https://baike.baidu.com/item/%E8%8B%B1%E8%AF%AD/109997" target="_blank" rel="noopener">è‹±è¯­</a>å’Œå…¶ä»–<a href="https://baike.baidu.com/item/%E8%A5%BF%E6%AC%A7" target="_blank" rel="noopener">è¥¿æ¬§</a>è¯­è¨€ã€‚å®ƒæ˜¯ç°ä»Šæœ€é€šç”¨çš„å•<a href="https://baike.baidu.com/item/%E5%AD%97%E8%8A%82" target="_blank" rel="noopener">å­—èŠ‚</a><a href="https://baike.baidu.com/item/%E7%BC%96%E7%A0%81" target="_blank" rel="noopener">ç¼–ç </a>ç³»ç»Ÿï¼Œå¹¶ç­‰åŒäº<a href="https://baike.baidu.com/item/%E5%9B%BD%E9%99%85" target="_blank" rel="noopener">å›½é™…</a>æ ‡å‡†ISO/IEC 646ã€‚</p>
</blockquote>
<p> æ³¨æ„ ASCII ç æ˜¯ <code>American Standard Code for Information Interchange</code>çš„ç®€ç§°ï¼Œ åé¢çš„ä¸¤ä¸ªII å¹¶ä¸æ˜¯ç½—é©¬æ•°å­—2å“¦ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“è®¡ç®—æœºé‡Œé¢å­˜å‚¨æ‰€æœ‰ä¿¡æ¯éƒ½æ˜¯é€šè¿‡ä¸€ä¸ªäºŒè¿›åˆ¶å€¼ã€‚æ¯ä¸€ä¸ªäºŒè¿›åˆ¶ä½ï¼ˆbitï¼‰éƒ½æœ‰ä¸¤ç§çŠ¶æ€ 0æˆ–è€…1ï¼Œ è§„å®šäº†8ä¸ªäºŒè¿›åˆ¶ä½ä¸ºä¸€ä¸ªå­—èŠ‚ï¼ˆbyteï¼‰ï¼Œå¯ä»¥è¡¨ç¤º256ç§çŠ¶æ€ï¼ŒåŒ…æ‹¬äº† <code>00000000</code> åˆ° <code>11111111</code> ã€‚</p>
<p>ç¾å›½ğŸ‡ºğŸ‡¸äººä»¬è‡ªç„¶æƒ³åˆ°äº†å¯ä»¥ä»–ä»¬è‡ªå·±è§„å®šä¸€å¥—å­—ç¬¦ç¼–ç ï¼ŒæŠŠ26è‹±æ–‡å­—æ¯ï¼ŒåŠä¸€äº›ç‰¹æ®Šç¬¦å·å’Œæ§åˆ¶å­—ç¬¦ç»Ÿä¸€ç¼–ç ã€‚ä»–ä»¬ä¸€å…±è§„å®šäº† 128ä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚è¯´ A æ˜¯ 65ï¼ˆ01000001ï¼‰ã€‚128ä½åªéœ€è¦å ç”¨7ä½ï¼Œæœ€é«˜ä½ç»Ÿä¸€ä¸º0ã€‚</p>
<blockquote>
<p>æ¯”å¦‚é‡åˆ°0x10 å°±æ˜¯æ¢è¡Œï¼Œ é‡åˆ° Ox1b å°±æ‰“å°åç™½å­—ã€‚è¿™ç±»0x20ä»¥ä¸‹çš„å­—èŠ‚ç§°ä¸ºæ§åˆ¶å­—èŠ‚ã€‚ç©ºæ ¼ï¼Œæ ‡ç‚¹ç¬¦å·ï¼Œæ•°å­—ï¼Œå¤§å°å†™å­—æ¯ç”¨è¿ç»­çš„å­—èŠ‚çŠ¶æ€è¡¨ç¤ºï¼Œä¸€ç›´åˆ°127å·ã€‚</p>
</blockquote>
<p>æ‰€ä»¥ ASCIIç å°±æ˜¯0-127è¿™å¥—ç¼–ç æ–¹æ¡ˆæ‰€å½¢æˆçš„ç¼–ç ï¼Œè¿™å¥—ç¼–ç æ–¹æ¡ˆå«åšANSIã€‚</p>
<p>ä¸‹é¢ç»™å‡ºä¸¤ç§åˆ¤æ–­å­—ç¬¦æ˜¯ä¸æ˜¯ ASCII ç çš„æ–¹æ¡ˆï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">isASCII (unicode) &#123;</span><br><span class="line">    return ((unicode === 0x20AC) || (unicode &lt;= 0x007F &amp;&amp; unicode &gt;= 0x0000));</span><br><span class="line">&#125;</span><br><span class="line">// å¦å¤–ä¸€ç§ç”¨æ­£åˆ™åˆ¤æ–­</span><br><span class="line">isASCII(str) &#123;</span><br><span class="line">    return /^\[\\x00-\\x7F\]*$/.test(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œè‹±è¯­ç”¨128ä¸ªç¼–ç å°±è¶³å¤Ÿäº†ï¼Œä½†æ˜¯å…¶ä»–è¯­è¨€ç”¨è¿™äº›å­—ç¬¦æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œäºæ˜¯å»¶ä¼¸å‡ºäº†256ç¼–ç ï¼Œä¹Ÿå°±æ˜¯æœ€é«˜ä½ä¹Ÿè¢«ä½¿ç”¨ä¸Š(<strong>è¿™ç§°ä¸ºæ‰©å±•å­—ç¬¦é›†</strong>)ã€‚ä½†æ˜¯ä¸åŒçš„å›½å®¶æœ‰ä¸åŒçš„å­—æ¯ï¼ŒåŒæ ·çš„ç¼–ç å¯èƒ½ä¹Ÿä»£è¡¨ç€ä¸åŒçš„å†…å®¹ã€‚æ¯”å¦‚ 150ï¼Œå¯èƒ½æ³•å›½æ˜¯ä¸€ä¸ªï¼Œä¿„è¯­åˆæ˜¯ä¸€ä¸ªã€‚ä»–ä»¬0-127éƒ½æ˜¯ç›¸åŒï¼Œä½†æ˜¯128-256ä¸ä¸€å®šç›¸åŒäº†ï¼Œè¿™å°±çœ‹ä¸åŒçš„å›½å®¶è‡ªå·±çš„åˆ¶å®šæ–¹å¼äº†ã€‚</p>
<p>ä½†æ˜¯å†æƒ³æƒ³ä¸­å›½ğŸ‡¨ğŸ‡³å°±æ›´å¯æ€•äº†ï¼Œä¸€å…±æœ‰10å‡ ä¸‡çš„æ–‡å­—ã€‚æ˜¾ç„¶256ç§ç¬¦å·æ˜¯æ²¡æœ‰åŠæ³•å®Œå…¨è¡¨è¾¾çš„ã€‚äºæ˜¯åˆå‡ºç°äº†å¤šå­—èŠ‚çš„å½¢å¼ã€‚æ¯”å¦‚ä¸¤ä¸ªå­—èŠ‚ï¼Œåšå¤šè¡¨ç¤º 256*256 ç§ã€‚å¤§æ¦‚åˆ6wå¤šç¬¦å·ã€‚æœ€å¸¸è§çš„ä¸­æ–‡ç¼–ç å°±æ˜¯è¿™ç§2ä¸ªå­—èŠ‚çš„ç¼–ç æ–¹å¼ï¼Œå¦‚ GB2312ã€‚</p>
<p>ä¸‹é¢å°±ä»‹ç»ä¸‹ GB2312, GBKç­‰çš„åŒºåˆ«å’Œè”ç³»ã€‚</p>
<hr>
<h1 id="GB2312-GBK-GB18030çš„åŒºåˆ«å’Œè”ç³»"><a href="#GB2312-GBK-GB18030çš„åŒºåˆ«å’Œè”ç³»" class="headerlink" title="GB2312,GBK,GB18030çš„åŒºåˆ«å’Œè”ç³»"></a>GB2312,GBK,GB18030çš„åŒºåˆ«å’Œè”ç³»</h1><p>ä¸­å›½ç”¨åˆ°è®¡ç®—æœºæ¯”è¾ƒæ™šï¼Œé‚£ä¸ªæ—¶å€™ 256ä¸ªç¬¦å·å·²ç»æ²¡æœ‰å¯ä»¥ç”¨æ¥è¡¨è¾¾ä¸­æ–‡æ–‡å­—çš„äº†ã€‚å¹¶ä¸”ä¸­æ–‡10w+ä¸ªï¼Œåªèƒ½å¤Ÿå¦è¾Ÿè¹Šå¾„äº†ã€‚äºæ˜¯ä¸­å›½äººæŠŠ127å·ä¹‹åçš„å­—ç¬¦éƒ½å»æ‰äº†ï¼Œå¹¶ä¸”è¿›è¡Œäº†è§„å®šã€‚</p>
<blockquote>
<p>æ¯ä¸ªæ±‰å­—åŠç¬¦å·ä»¥ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºã€‚ç¬¬ä¸€ä¸ªä¸ºé«˜å­—èŠ‚ï¼Œç¬¬äºŒä¸ªä¸ºä½å­—èŠ‚ã€‚ä¸€ä¸ªå°äº127çš„å­—ç¬¦çš„æ„ä¹‰ä¸åŸæ¥ç›¸åŒï¼Œä½†ä¸¤ä¸ªå¤§äº127çš„å­—ç¬¦è¿åœ¨ä¸€èµ·æ—¶ï¼Œå°±è¡¨ç¤ºä¸€ä¸ªæ±‰å­—ï¼Œå‰é¢çš„ä¸€ä¸ªå­—èŠ‚ï¼ˆé«˜å­—èŠ‚ï¼‰ä»0xA1ç”¨åˆ° 0xF7ï¼Œåé¢ä¸€ä¸ªå­—èŠ‚ï¼ˆä½å­—èŠ‚ï¼‰ä»0xA1åˆ°0xFEã€‚</p>
</blockquote>
<p>å…·ä½“è¿™ä¸ªå­—ç¬¦èŒƒå›´çš„å¾—æ¥ï¼Œæ¶‰åŠåŒºä½ç­‰çŸ¥è¯†ï¼Œè¿™äº›æˆ‘ä¸æ‰“ç®—è®¤è¯†ï¼Œä¸åšä»‹ç»ã€‚</p>
<p>è¿™ç§æ–¹æ¡ˆç§°ä¹‹ä¸ºGB2312, ä»–æ˜¯å¯¹ASCIIç çš„ä¸­æ–‡æ‰©å±•ã€‚è¿™æ ·å°± 6000+æ±‰å­—å¯ä»¥å¾—åˆ°è¡¨ç¤ºã€‚</p>
<blockquote>
<p>GB 2312æ ‡å‡†å…±æ”¶å½•6763ä¸ªæ±‰å­—ï¼Œå…¶ä¸­ä¸€çº§æ±‰å­—3755ä¸ªï¼ŒäºŒçº§æ±‰å­—3008ä¸ªï¼›åŒæ—¶æ”¶å½•äº†åŒ…æ‹¬æ‹‰ä¸å­—æ¯ã€å¸Œè…Šå­—æ¯ã€æ—¥æ–‡å¹³å‡ååŠç‰‡å‡åå­—æ¯ã€ä¿„è¯­è¥¿é‡Œå°”å­—æ¯åœ¨å†…çš„682ä¸ªå­—ç¬¦ã€‚ GB 2312çš„å‡ºç°ï¼ŒåŸºæœ¬æ»¡è¶³äº†æ±‰å­—çš„è®¡ç®—æœºå¤„ç†éœ€è¦ï¼Œå®ƒæ‰€æ”¶å½•çš„æ±‰å­—å·²ç»è¦†ç›–ä¸­å›½å¤§é™†99.75%çš„ä½¿ç”¨é¢‘ç‡ã€‚ä½†å¯¹äºäººåã€å¤æ±‰è¯­ç­‰æ–¹é¢å‡ºç°çš„ç½•ç”¨å­—å’Œç¹ä½“å­—ï¼ŒGB 2312ä¸èƒ½å¤„ç†ï¼Œå› æ­¤åæ¥GBKåŠGB 18030æ±‰å­—å­—ç¬¦é›†ç›¸ç»§å‡ºç°ä»¥è§£å†³è¿™äº›é—®é¢˜ã€‚â€“wiki</p>
</blockquote>
<p>åæ¥GB2312è¿™ç§æ–¹æ¡ˆè¿˜æ˜¯ä¸å¤Ÿç”¨ï¼Œäºæ˜¯å°±ä¸å†è¦æ±‚ä½å­—èŠ‚ä¸€å®šæ˜¯127ä¹‹åçš„å†…ç ï¼Œ åªè¦æ˜¯ç¬¬ä¸€ä¸ªå­—èŠ‚å¤§äº127ï¼Œå°±è¡¨ç¤ºè¿™æ˜¯æ±‰å­—çš„å¼€å§‹ï¼Œä¸ç”¨ç®¡ä½å­—èŠ‚æ˜¯å¦æ˜¯æ‰©å±•å­—ç¬¦é›†çš„å†…å®¹ã€‚è¿™ç§GB2312è¢«æ‰©å±•ä¹‹åçš„å†…å®¹ç§°ä¹‹ä¸º GBKï¼Œ GBK åŒ…æ‹¬äº†GB2312çš„æ‰€æœ‰å†…å®¹ï¼Œå¹¶ä¸”æ–°å¢åŠ äº†20000ä¸ªæ±‰å­—ã€‚</p>
<p>åæ¥å°‘æ•°æ°‘æ—ä¹Ÿéœ€è¦ç”¨ç”µè„‘ï¼Œäºæ˜¯åˆå¢åŠ äº†å°‘æ•°åæ—çš„å†…å®¹ï¼ŒGBK è¢«æ‰©å±•ä¸ºäº† GB18030ã€‚</p>
<p><strong>ä¹Ÿå°±æ˜¯è¯´ GB18030 &gt; GBK &gt; GB2312ã€‚ è¿™ä¸€ç³»åˆ—çš„ä¸­æ–‡ç¼–ç ï¼Œç§°ä¸º DBCS(Double Byte Character Set åŒå­—èŠ‚å­—ç¬¦é›†)ã€‚</strong></p>
<blockquote>
<p>åœ¨DBCSç³»åˆ—æ ‡å‡†é‡Œï¼Œæœ€å¤§çš„ç‰¹ç‚¹æ˜¯ä¸¤å­—èŠ‚é•¿çš„æ±‰å­—å­—ç¬¦å’Œä¸€å­—èŠ‚é•¿çš„è‹±æ–‡å­—ç¬¦å¹¶å­˜äºåŒä¸€å¥—ç¼–ç æ–¹æ¡ˆé‡Œï¼Œå› æ­¤ä»–ä»¬å†™çš„ç¨‹åºä¸ºäº†æ”¯æŒä¸­æ–‡å¤„ç†ï¼Œå¿…é¡»è¦æ³¨æ„å­—ä¸²é‡Œçš„æ¯ä¸€ä¸ªå­—èŠ‚çš„å€¼ï¼Œå¦‚æœè¿™ä¸ªå€¼æ˜¯å¤§äº127çš„ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºä¸€ä¸ªåŒå­—èŠ‚å­—ç¬¦é›†é‡Œçš„å­—ç¬¦å‡ºç°äº†ã€‚â€“wiki</p>
</blockquote>
<p>äºæ˜¯å°±å‡ºç°äº†åæ¥ç¼–ç¨‹æ—¶å€™çš„é»˜å¿µï¼š <strong>ä¸€ä¸ªä¸­æ–‡å­—ç¬¦å ä¸¤ä¸ªå­—èŠ‚ï¼Œ1ä¸ªè‹±æ–‡å­—ç¬¦å ç”¨1ä¸ªå­—èŠ‚</strong>ã€‚</p>
<p>æ³¨æ„è¿™ä¸ªæ—¶å€™ GBK, GB2312 ç­‰ï¼Œåªæ˜¯ä¸­æ–‡å¯¹äºASCIIç çš„æ‰©å±•ï¼Œå’Œ UTF8,Unicode è¿™äº›å¹¶æ— è”ç³»ã€‚ä¸‹é¢å†æ¥çœ‹çœ‹ Unicode åŠ UTF-8ã€‚</p>
<hr>
<h1 id="Unicode-åŠ-UTF-8"><a href="#Unicode-åŠ-UTF-8" class="headerlink" title="Unicode åŠ UTF-8"></a>Unicode åŠ UTF-8</h1><blockquote>
<p>ç»“è®ºï¼š UTF-8 æ˜¯ Unicode çš„å®ç°æ–¹å¼ä¹‹ä¸€ã€‚</p>
</blockquote>
<p>å‰é¢æˆ‘ä»¬è¯´è¿‡ï¼Œä¸–ç•Œä¸Šå­˜åœ¨ç€å¾ˆå¤šç¼–ç æ–¹å¼ï¼Œæ¯ä¸ªå›½å®¶å¯èƒ½ä¼šå»è§„å®šå’Œåˆ¶ä½œè‡ªå·±çš„ç¼–ç æ–¹å¼ã€‚ä¸åŒçš„äºŒè¿›åˆ¶å› è€Œæœ‰å¯èƒ½ä¼šè¢«è§£é‡Šæˆä¸åŒçš„å†…å®¹ã€‚ å› æ­¤å¦‚æœä½ ä¸çŸ¥é“ä¸€ä¸ªæ–‡ä»¶çš„ç¼–ç ï¼Œç„¶åéšæ„ç”¨ç¼–è¾‘å™¨æ‰“å¼€äº†å°±ä¼šå‡ºç°æˆ‘ä»¬ç»å¸¸å‡ºç°çš„ä¹±ç ç°è±¡ã€‚</p>
<p>èªæ˜çš„äººä»¬å½“ç„¶æ„è¯†åˆ°äº†è¿™ä¸€ç‚¹ï¼Œæ‰€ä»¥å¦‚æœæœ‰ä¸€ç§ç¼–ç æ–¹å¼èƒ½å¤ŸæŠŠä¸–ç•Œæ‰€æœ‰çš„ç¬¦å·éƒ½çº³å…¥å…¶ä¸­ï¼Œé‚£è¯¥å¤šå¥½ï¼Ÿ å†ä¹Ÿä¸ä¼šæœ‰ä¹±ç ç°è±¡äº†ã€‚</p>
<p>äºæ˜¯ Unicode å‡ºç°äº†ï¼ˆunion code ï¼Ÿï¼‰ , <strong>ä¸€å®šè¦æ³¨æ„ Unicode å¹¶ä¸æ˜¯ä¸€ä¸ªç¼–ç æ–¹å¼ï¼Œä¸æ˜¯ä¸€ä¸ªç®—æ³•ï¼Œè€Œæ˜¯ä¸€ä¸ªé›†åˆï¼Œé›†åˆäº†æ‰€æœ‰çš„ç¬¦å·ï¼Œå®ƒåªæ˜¯è§„å®šäº†æ‰€æœ‰ç¬¦å·çš„äºŒè¿›åˆ¶ä»£ç ï¼Œå¹¶æ²¡æœ‰ä¸€ä¸ªç®—æ³•æ¥è¯´æ€ä¹ˆå­˜å‚¨è¿™ä¸ªå†…å®¹ã€‚æ¯”å¦‚<code>U+0041</code>è¡¨ç¤ºå¤§å†™å­—æ¯Aã€‚</strong>  ï¼ˆå…¶å®æˆ‘åœ¨æƒ³ï¼Œå®ƒèƒ½æŠŠæ‰€æœ‰ç¬¦å·å½•å…¥è¿›å»ï¼Œå·²ç»æ˜¯å¾ˆå¤§çš„å·¥ä½œé‡äº†ã€‚ï¼‰</p>
<blockquote>
<p>è¿™é‡Œå°±æœ‰ä¸¤ä¸ªä¸¥é‡çš„é—®é¢˜ï¼Œç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚ä½•æ‰èƒ½åŒºåˆ« Unicode å’Œ ASCII ï¼Ÿè®¡ç®—æœºæ€ä¹ˆçŸ¥é“ä¸‰ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç¬¦å·ï¼Œè€Œä¸æ˜¯åˆ†åˆ«è¡¨ç¤ºä¸‰ä¸ªç¬¦å·å‘¢ï¼Ÿç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œè‹±æ–‡å­—æ¯åªç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºå°±å¤Ÿäº†ï¼Œå¦‚æœ Unicode ç»Ÿä¸€è§„å®šï¼Œæ¯ä¸ªç¬¦å·ç”¨ä¸‰ä¸ªæˆ–å››ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œé‚£ä¹ˆæ¯ä¸ªè‹±æ–‡å­—æ¯å‰éƒ½å¿…ç„¶æœ‰äºŒåˆ°ä¸‰ä¸ªå­—èŠ‚æ˜¯0ï¼Œè¿™å¯¹äºå­˜å‚¨æ¥è¯´æ˜¯æå¤§çš„æµªè´¹ï¼Œæ–‡æœ¬æ–‡ä»¶çš„å¤§å°ä¼šå› æ­¤å¤§å‡ºäºŒä¸‰å€ï¼Œè¿™æ˜¯æ— æ³•æ¥å—çš„ã€‚    â€”- å¼•ç”¨è‡ª<a href="http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html" target="_blank" rel="noopener">é˜®ä¸€å³°çš„æ–‡ç« </a></p>
</blockquote>
<p>åæ¥çš„äººä»¬ä¹Ÿè¿›è¡Œäº†å¾ˆå¤šå°è¯•ï¼Œ å‘æ˜äº† unicode çš„å¤šç§å­˜å‚¨æ–¹å¼ï¼ˆä¸åŒçš„äºŒè¿›åˆ¶ç¼–ç æ–¹å¼æˆ–è€…ç§°ä¹‹ä¸ºä¸€ç§ç®—æ³•ï¼‰ã€‚<strong>ç›´åˆ° UTF-8 è¿™ç§ç¼–ç æ–¹å¼çš„å‡ºç°ï¼Œ Unicode æ‰å¾—ä»¥æ¨å¹¿ã€‚ æ‰€ä»¥å‰é¢æ‰è¯´ UTF-8 æ˜¯ä¸€ç§æ˜¯Unicodeçš„å®ç°æ–¹å¼ã€‚</strong></p>
<blockquote>
<p>UTF-8ï¼ˆ8-bit Unicode Transformation Formatï¼‰æ˜¯ä¸€ç§é’ˆå¯¹Unicodeçš„<strong>å¯å˜é•¿åº¦å­—ç¬¦ç¼–ç </strong>ï¼Œä¹Ÿæ˜¯ä¸€ç§å‰ç¼€ç ã€‚å®ƒå¯ä»¥ç”¨æ¥è¡¨ç¤ºUnicodeæ ‡å‡†ä¸­çš„ä»»ä½•å­—ç¬¦ï¼Œä¸”å…¶ç¼–ç ä¸­çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ä»ä¸ASCIIå…¼å®¹ï¼Œè¿™ä½¿å¾—åŸæ¥å¤„ç†ASCIIå­—ç¬¦çš„è½¯ä»¶æ— é¡»æˆ–åªé¡»åšå°‘éƒ¨åˆ†ä¿®æ”¹ï¼Œå³å¯ç»§ç»­ä½¿ç”¨ã€‚å› æ­¤ï¼Œå®ƒé€æ¸æˆä¸ºç”µå­é‚®ä»¶ã€ç½‘é¡µåŠå…¶ä»–å­˜å‚¨æˆ–å‘é€æ–‡å­—çš„åº”ç”¨ä¸­ï¼Œä¼˜å…ˆé‡‡ç”¨çš„ç¼–ç ã€‚</p>
</blockquote>
<p><strong>å…³é”®å­—æ˜¯å¯å˜é•¿åº¦å­—ç¬¦ç¼–ç ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äºä¸åŒç±»å‹çš„ç¬¦å·ï¼Œå®ƒå ç”¨çš„å­—èŠ‚é•¿åº¦ä¸ä¸€æ ·ã€‚è¿™æ ·å¯ä»¥èŠ‚çœå¾ˆå¤šç©ºé—´ã€‚å¹¶ä¸”æ¯”è¾ƒçµæ´»ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå®ƒä½¿ç”¨1-4ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºã€‚</strong>æ¯”å¦‚ï¼š</p>
<blockquote>
<p>128ä¸ªUS-ASCIIå­—ç¬¦åªéœ€ä¸€ä¸ªå­—èŠ‚ç¼–ç ï¼ˆUnicodeèŒƒå›´ç”±U+0000è‡³U+007Fï¼‰ã€‚</p>
<p>å¸¦æœ‰é™„åŠ ç¬¦å·çš„æ‹‰ä¸æ–‡ã€å¸Œè…Šæ–‡ã€è¥¿é‡Œå°”å­—æ¯ã€äºšç¾å°¼äºšè¯­ã€å¸Œä¼¯æ¥æ–‡ã€é˜¿æ‹‰ä¼¯æ–‡ã€å™åˆ©äºšæ–‡åŠå®ƒæ‹¿å­—æ¯åˆ™éœ€è¦ä¸¤ä¸ªå­—èŠ‚ç¼–ç ï¼ˆUnicodeèŒƒå›´ç”±U+0080è‡³U+07FFï¼‰ã€‚</p>
<p>å…¶ä»–åŸºæœ¬å¤šæ–‡ç§å¹³é¢ï¼ˆBMPï¼‰ä¸­çš„å­—ç¬¦ï¼ˆè¿™åŒ…å«äº†å¤§éƒ¨åˆ†å¸¸ç”¨å­—ï¼Œå¦‚å¤§éƒ¨åˆ†çš„æ±‰å­—ï¼‰ä½¿ç”¨ä¸‰ä¸ªå­—èŠ‚ç¼–ç ï¼ˆUnicodeèŒƒå›´ç”±U+0800è‡³U+FFFFï¼‰ã€‚</p>
<p>å…¶ä»–æå°‘ä½¿ç”¨çš„Unicode è¾…åŠ©å¹³é¢çš„å­—ç¬¦ä½¿ç”¨å››è‡³å…­å­—èŠ‚ç¼–ç ï¼ˆUnicodeèŒƒå›´ç”±U+10000è‡³U+1FFFFFä½¿ç”¨å››å­—èŠ‚ï¼ŒUnicodeèŒƒå›´ç”±U+200000è‡³U+3FFFFFFä½¿ç”¨äº”å­—èŠ‚ï¼ŒUnicodeèŒƒå›´ç”±U+4000000è‡³U+7FFFFFFFä½¿ç”¨å…­å­—èŠ‚ï¼‰ã€‚ â€“wiki</p>
</blockquote>
<p><strong>utf-8çš„å…·ä½“ç¼–ç å®ç°ï¼Œæˆ‘å¼•ç”¨äº†é˜®ä¸€å³°è€å¸ˆçš„æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ï¼Œä»–æ€»æ˜¯èƒ½æŠŠå¤æ‚çš„ä¸œè¥¿è®²çš„å¾ˆç®€å•ã€‚</strong> åœ°å€ä¸ºï¼š<a href="http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html" target="_blank" rel="noopener">ascii_unicode_and_utf</a></p>
<p>(<strong>ä»¥ä¸‹å†…å®¹ä¸ºå¼•ç”¨å†…å®¹</strong>)</p>
<p>UTF-8 çš„ç¼–ç è§„åˆ™å¾ˆç®€å•ï¼Œåªæœ‰äºŒæ¡ï¼š</p>
<p>1ï¼‰å¯¹äºå•å­—èŠ‚çš„ç¬¦å·ï¼Œå­—èŠ‚çš„ç¬¬ä¸€ä½è®¾ä¸º<code>0</code>ï¼Œåé¢7ä½ä¸ºè¿™ä¸ªç¬¦å·çš„ Unicode ç ã€‚å› æ­¤å¯¹äºè‹±è¯­å­—æ¯ï¼ŒUTF-8 ç¼–ç å’Œ ASCII ç æ˜¯ç›¸åŒçš„ã€‚</p>
<p>2ï¼‰å¯¹äº<code>n</code>å­—èŠ‚çš„ç¬¦å·ï¼ˆ<code>n &gt; 1</code>ï¼‰ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰<code>n</code>ä½éƒ½è®¾ä¸º<code>1</code>ï¼Œç¬¬<code>n + 1</code>ä½è®¾ä¸º<code>0</code>ï¼Œåé¢å­—èŠ‚çš„å‰ä¸¤ä½ä¸€å¾‹è®¾ä¸º<code>10</code>ã€‚å‰©ä¸‹çš„æ²¡æœ‰æåŠçš„äºŒè¿›åˆ¶ä½ï¼Œå…¨éƒ¨ä¸ºè¿™ä¸ªç¬¦å·çš„ Unicode ç ã€‚</p>
<p>ä¸‹è¡¨æ€»ç»“äº†ç¼–ç è§„åˆ™ï¼Œå­—æ¯<code>x</code>è¡¨ç¤ºå¯ç”¨ç¼–ç çš„ä½ã€‚</p>
<blockquote>
<p>Unicodeç¬¦å·èŒƒå›´     |        UTF-8ç¼–ç æ–¹å¼<br>(åå…­è¿›åˆ¶)        |              ï¼ˆäºŒè¿›åˆ¶ï¼‰<br>â€”â€”â€”â€”â€”â€”â€”-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>0000 0000-0000 007F | 0xxxxxxx<br>0000 0080-0000 07FF | 110xxxxx 10xxxxxx<br>0000 0800-0000 FFFF | 1110xxxx 10xxxxxx 10xxxxxx<br>0001 0000-0010 FFFF | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</p>
</blockquote>
<p>è·Ÿæ®ä¸Šè¡¨ï¼Œè§£è¯» UTF-8 ç¼–ç éå¸¸ç®€å•ã€‚å¦‚æœä¸€ä¸ªå­—èŠ‚çš„ç¬¬ä¸€ä½æ˜¯<code>0</code>ï¼Œåˆ™è¿™ä¸ªå­—èŠ‚å•ç‹¬å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼›å¦‚æœç¬¬ä¸€ä½æ˜¯<code>1</code>ï¼Œåˆ™è¿ç»­æœ‰å¤šå°‘ä¸ª<code>1</code>ï¼Œå°±è¡¨ç¤ºå½“å‰å­—ç¬¦å ç”¨å¤šå°‘ä¸ªå­—èŠ‚ã€‚</p>
<hr>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å¥½å¼€å¿ƒï¼Œå¤§æ¦‚çš„æŠŠè¿™äº›ä¸œè¥¿éƒ½æœ‰äº†ä¸€äº›äº†è§£ã€‚ä¸å†åªæ˜¯åœç•™åœ¨è®¤è¯†é˜¶æ®µï¼Œè€Œæ˜¯äº†è§£é˜¶æ®µäº†ã€‚ç®—æ˜¯å¯¹è¿™ä¸¤å¤©çš„ä¸€ä¸ªäº¤ä»£äº†ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æœ¬ç¯‡ç›®çš„ä¸»è¦æ˜¯ææ¸…æ¥šUTF-8, GBK,  Unicode, ASCIIç ï¼ŒUnicode, escape, encodeURIComponent, encodeURI ç¼–ç ç­‰ç­‰çš„åŒºåˆ«å’Œè”ç³»ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h1
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>è®¾ç½®æˆ‘çš„ eslint é…ç½®</title>
    <link href="http://sevencai.github.io/2018/01/23/%E8%AE%BE%E7%BD%AE%E6%88%91%E7%9A%84-eslint-%E9%85%8D%E7%BD%AE/"/>
    <id>http://sevencai.github.io/2018/01/23/è®¾ç½®æˆ‘çš„-eslint-é…ç½®/</id>
    <published>2018-01-23T09:16:21.000Z</published>
    <updated>2018-01-23T09:52:22.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>æœ¬ç¯‡ä¸»è¦è®°å½•äº†æˆ‘é’ˆå¯¹è‡ªå·±çš„ä¹ æƒ¯ï¼Œå¯¹ eslint çš„ä¸€äº›é…ç½®çš„æ›´æ”¹ã€‚æˆ‘ä¸€èˆ¬ç”¨çš„æ˜¯ <a href="https://github.com/airbnb/javascrip" target="_blank" rel="noopener">Airbnb</a> çš„ç¼–ç è§„èŒƒã€‚</p>
</blockquote>
<p>æœ€å¼€å§‹æˆ‘ä¼šè‡ªå·±å»é…ç½® webpack çš„ç›¸å…³æ’ä»¶ç­‰ã€‚åæ¥å‘ç°ä¸­é—´å»ä½¿ç”¨çš„æˆæœ¬å¤ªé«˜äº†ï¼Œå¾€å¾€é…ç½®å°±èŠ±è´¹äº†æˆ‘ä¸å°‘æ—¶é—´ï¼Œç°åœ¨æˆ‘ä¸»è¦æ˜¯ä½¿ç”¨ä¸€äº›æ¯”è¾ƒæˆç†Ÿçš„ cli, æ¯”å¦‚ vue-cli, react-cli ç­‰ã€‚ä¸‹é¢çš„è¿™ä»½ eslint ç»§æ‰¿è‡ª <code>airbnb-base</code>, è¦†ç›–äº†ä¸€äº›æˆ‘ä¸ä¹ æƒ¯ä½¿ç”¨çš„é…ç½®ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// https://eslint.org/docs/user-guide/configuring</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  root: <span class="literal">true</span>,</span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    parser: <span class="string">'babel-eslint'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  env: &#123;</span><br><span class="line">    browser: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// consider switching to `plugin:vue/strongly-recommended` or `plugin:vue/recommended` for stricter rules.</span></span><br><span class="line">  extends: [<span class="string">'plugin:vue/essential'</span>, <span class="string">'airbnb-base'</span>],</span><br><span class="line">  <span class="comment">// required to lint *.vue files</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="string">'vue'</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// check if imports actually resolve</span></span><br><span class="line">  settings: &#123;</span><br><span class="line">    <span class="string">'import/resolver'</span>: &#123;</span><br><span class="line">      webpack: &#123;</span><br><span class="line">        config: <span class="string">'build/webpack.base.conf.js'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// add your custom rules here</span></span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="comment">// don't require .vue extension when importing</span></span><br><span class="line">    <span class="string">'import/extensions'</span>: [<span class="string">'error'</span>, <span class="string">'always'</span>, &#123;</span><br><span class="line">      js: <span class="string">'never'</span>,</span><br><span class="line">      vue: <span class="string">'never'</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="comment">// disallow reassignment of function parameters</span></span><br><span class="line">    <span class="comment">// disallow parameter object manipulation except for specific exclusions</span></span><br><span class="line">    <span class="string">'no-param-reassign'</span>: [<span class="string">'error'</span>, &#123;</span><br><span class="line">      props: <span class="literal">true</span>,</span><br><span class="line">      ignorePropertyModificationsFor: [</span><br><span class="line">        <span class="string">'vm'</span>,</span><br><span class="line">        <span class="string">'state'</span>, <span class="comment">// for vuex state</span></span><br><span class="line">        <span class="string">'acc'</span>, <span class="comment">// for reduce accumulators</span></span><br><span class="line">        <span class="string">'e'</span> <span class="comment">// for e.returnvalue</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="comment">// allow optionalDependencies</span></span><br><span class="line">    <span class="string">'import/no-extraneous-dependencies'</span>: [<span class="string">'error'</span>, &#123;</span><br><span class="line">      optionalDependencies: [<span class="string">'test/unit/index.js'</span>]</span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="comment">// ç¦æ­¢åˆ†å· auto</span></span><br><span class="line">    <span class="string">'semi'</span>: [</span><br><span class="line">      <span class="string">'error'</span>,</span><br><span class="line">      <span class="string">'never'</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// ç¦æ­¢ä½¿ç”¨æ‹–å°¾é€—å·</span></span><br><span class="line">    <span class="string">'comma-dangle'</span>: [</span><br><span class="line">      <span class="string">'error'</span>,</span><br><span class="line">      <span class="string">'never'</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// ç®­å¤´å‡½æ•°çš„æ‹¬å·ï¼Œåªåœ¨æœ‰å¤šä¸ªå‚æ•°æ—¶æ‰ä½¿ç”¨</span></span><br><span class="line">    <span class="string">'arrow-parens'</span>: [</span><br><span class="line">      <span class="string">'error'</span>,</span><br><span class="line">      <span class="string">'as-needed'</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'arrow-body-style'</span>: [</span><br><span class="line">      <span class="string">'error'</span>,</span><br><span class="line">      <span class="string">'always'</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// å…è®¸æˆ‘ä½¿ç”¨ è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="string">'no-unused-expressions'</span>: [<span class="string">'error'</span>, &#123; <span class="string">'allowShortCircuit'</span>: <span class="literal">true</span>, <span class="string">'allowTernary'</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">    <span class="comment">// æ”¾å®½æœ€å¤§çš„æ”¯æŒå®½åº¦</span></span><br><span class="line">    <span class="string">'max-len'</span>: [<span class="number">2</span>, <span class="number">150</span>, <span class="number">4</span>, &#123; <span class="string">'ignoreUrls'</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">    <span class="comment">// allow debugger during development</span></span><br><span class="line">    <span class="string">'no-debugger'</span>: process.env.NODE_ENV === <span class="string">'production'</span> ? <span class="string">'error'</span> : <span class="string">'off'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿™ä¸Šé¢å› ä¸ºæ˜¯å·²ç»ç»§æ‰¿è‡ª <code>airbnb-base</code> ,æ‰€ä»¥å¾ˆå¤šé»˜è®¤çš„é…ç½®éƒ½æ²¡æœ‰å†™ä¸‹æ¥ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼ºåˆ¶å•å¼•å· auto</span></span><br><span class="line"><span class="string">"quotes"</span>: [</span><br><span class="line">    <span class="string">"error"</span>,</span><br><span class="line">    <span class="string">"single"</span></span><br><span class="line">],</span><br><span class="line"> <span class="comment">// å˜é‡å®šä¹‰æˆ–å‚æ•°å£°æ˜æœªä½¿ç”¨</span></span><br><span class="line"><span class="string">"no-cond-assign"</span>: [</span><br><span class="line">    <span class="string">"warn"</span></span><br><span class="line">],</span><br><span class="line"><span class="comment">// å…³é”®å­—ç©ºæ ¼ auto</span></span><br><span class="line"><span class="string">"keyword-spacing"</span>: [</span><br><span class="line">    <span class="string">"error"</span>,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"before"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">"after"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">],</span><br><span class="line"><span class="comment">// å¼ºåˆ¶å•è¡Œä»£ç å—ä¸­ä½¿ç”¨ç©ºæ ¼ auto</span></span><br><span class="line"><span class="string">"block-spacing"</span>: [</span><br><span class="line">    <span class="string">"error"</span>,</span><br><span class="line">    <span class="string">"always"</span></span><br><span class="line">],</span><br><span class="line"><span class="comment">// é€—å·å‰é¢ä¸èƒ½ç”±ç©ºæ ¼, åé¢è¦ç©ºæ ¼ auto</span></span><br><span class="line"><span class="string">"comma-spacing"</span>: [</span><br><span class="line">    <span class="string">"error"</span>,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"before"</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">"after"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">],</span><br><span class="line"><span class="comment">// å†’å·å‰é¢ä¸èƒ½æœ‰ç©ºæ ¼, åé¢å¿…é¡»æœ‰ç©ºæ ¼, é”®å€¼éœ€æ°´å¹³å¯¹é½ auto</span></span><br><span class="line"><span class="string">"key-spacing"</span>: [</span><br><span class="line">    <span class="string">"error"</span>,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"beforeColon"</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">"afterColon"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">"align"</span>: <span class="string">"value"</span></span><br><span class="line">    &#125;</span><br><span class="line">],</span><br><span class="line"><span class="comment">// å‚æ•°æœªä½¿ç”¨æç¤º</span></span><br><span class="line"><span class="string">"no-unused-vars"</span>: [</span><br><span class="line">    <span class="string">"warn"</span>,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"var"</span>: <span class="string">"all"</span>,</span><br><span class="line">        <span class="string">"all"</span>: <span class="string">"all"</span></span><br><span class="line">    &#125;</span><br><span class="line">],</span><br><span class="line"> <span class="comment">// å‡½æ•°å·¦æ‹¬å·å·¦è¾¹ä¸èƒ½æœ‰ç©ºæ ¼ auto</span></span><br><span class="line"><span class="string">"space-before-function-paren"</span>: [</span><br><span class="line">    <span class="string">"error"</span>,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"anonymous"</span>: <span class="string">"always"</span>,</span><br><span class="line">        <span class="string">"named"</span>: <span class="string">"never"</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<hr>
<p>å¯¹äº†ï¼Œé¡ºä¾¿è®°å½•ä¸€ä¸ª vue-cli é…ç½®çš„é—®é¢˜ï¼ˆä¸å€¼å¾—å¼€ä¸€ä¸ªæ–°æ–‡ç« ï¼Œä½†æ˜¯æƒ³è®°å½•ä¸‹ï¼‰ã€‚</p>
<p>æœ‰çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬é…ç½®äº† host , åœ¨æœ¬åœ°è®¿é—®æ˜¯ä¹Ÿè®¸ä¼šå‡ºç° invalid host ä¹‹ç±»çš„é”™è¯¯ï¼Œæ­£å¸¸è®¿é—®ä¸äº†é¡µé¢ï¼Œè¿™ä¸ªæ—¶å€™åªéœ€è¦æ‰¾åˆ° devServer, å¢åŠ ä¸€ä¸ª <code>disableHostCheck: true</code> å³å¯ã€‚è®©å®ƒä¸å»æ£€æµ‹ host, ç­‰åˆ°æ­£å¼ä¸Šçº¿ï¼Œå†æŠŠè¿™ä¸ªå»æ‰æˆ–è€…æ›´æ”¹ä¸º false å³å¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">    disableHostCheck: true,</span><br><span class="line">    clientLogLevel: &apos;warning&apos;,</span><br><span class="line">    historyApiFallback: &#123;</span><br><span class="line">      rewrites: [</span><br><span class="line">        &#123; from: /.*/, to: path.posix.join(config.dev.assetsPublicPath, &apos;index.shtml&apos;) &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;</span><br><span class="line">    ......</span><br></pre></td></tr></table></figure>
<hr>
<p>åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ eslint å½“ç„¶æ˜¯å¥½å¤„å¤šå¤šï¼Œè§„èŒƒè‡ªå·±çš„ä»£ç ï¼Œå¿ƒæƒ…ä¹Ÿä¼šå¥½å¾ˆå¤šã€‚ä¸‹é¢æ˜¯æˆ‘è®°å½•çš„ä¸€äº›å¯¹ airbnb ï¼Œè‡ªå·±è€æ˜¯ä¼šå¿˜è®°çš„å‡ ä¸ªç‚¹ã€‚</p>
<h3 id="No-Object-assign"><a href="#No-Object-assign" class="headerlink" title="No Object.assign"></a>No Object.assign</h3><p>Prefer the object spread operator over Object.assign to shallow-copy objects. Use the object rest operator to get a new object with certain properties omitted.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// very bad</span><br><span class="line">const original = &#123; a: 1, b: 2 &#125;;</span><br><span class="line">const copy = Object.assign(original, &#123; c: 3 &#125;); // this mutates `original` à² _à² </span><br><span class="line">delete copy.a; // so does this</span><br><span class="line"></span><br><span class="line">// bad</span><br><span class="line">const original = &#123; a: 1, b: 2 &#125;;</span><br><span class="line">const copy = Object.assign(&#123;&#125;, original, &#123; c: 3 &#125;); // copy =&gt; &#123; a: 1, b: 2, c: 3 &#125;</span><br><span class="line"></span><br><span class="line">// good</span><br><span class="line">const original = &#123; a: 1, b: 2 &#125;;</span><br><span class="line">const copy = &#123; ...original, c: 3 &#125;; // copy =&gt; &#123; a: 1, b: 2, c: 3 &#125;</span><br><span class="line"></span><br><span class="line">const &#123; a, ...noA &#125; = copy; // noA =&gt; &#123; b: 2, c: 3 &#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Use-array-spreads-â€¦-to-copy-arrays"><a href="#Use-array-spreads-â€¦-to-copy-arrays" class="headerlink" title="Use array spreads â€¦ to copy arrays."></a>Use array spreads â€¦ to copy arrays.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// bad</span><br><span class="line">const len = items.length;</span><br><span class="line">const itemsCopy = [];</span><br><span class="line">let i;</span><br><span class="line"></span><br><span class="line">for (i = 0; i &lt; len; i += 1) &#123;</span><br><span class="line">  itemsCopy[i] = items[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// good</span><br><span class="line">const itemsCopy = [...items];</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="To-convert-an-array-like-object-to-an-array-use-spreads-â€¦-instead-of-Array-from"><a href="#To-convert-an-array-like-object-to-an-array-use-spreads-â€¦-instead-of-Array-from" class="headerlink" title="To convert an array-like object to an array, use spreads â€¦ instead of Array.from."></a>To convert an array-like object to an array, use spreads â€¦ instead of Array.from.</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = <span class="built_in">document</span>.querySelectorAll(<span class="string">'.foo'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> nodes = <span class="built_in">Array</span>.from(foo);</span><br><span class="line"></span><br><span class="line"><span class="comment">// best</span></span><br><span class="line"><span class="keyword">const</span> nodes = [...foo];</span><br></pre></td></tr></table></figure>
<p>Use Array.from instead of spread â€¦ for mapping over iterables, because it avoids creating an intermediate array.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// bad</span><br><span class="line">const baz = [...foo].map(bar);</span><br><span class="line"></span><br><span class="line">// good</span><br><span class="line">const baz = Array.from(foo, bar);</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="Use-object-destructuring-when-accessing-and-using-multiple-properties-of-an-object-eslint-prefer-destructuring-jscs-requireObjectDestructuring"><a href="#Use-object-destructuring-when-accessing-and-using-multiple-properties-of-an-object-eslint-prefer-destructuring-jscs-requireObjectDestructuring" class="headerlink" title="Use object destructuring when accessing and using multiple properties of an object. eslint: prefer-destructuring jscs: requireObjectDestructuring"></a>Use object destructuring when accessing and using multiple properties of an object. eslint: prefer-destructuring jscs: requireObjectDestructuring</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// bad</span><br><span class="line">function getFullName(user) &#123;</span><br><span class="line">  const firstName = user.firstName;</span><br><span class="line">  const lastName = user.lastName;</span><br><span class="line"></span><br><span class="line">  return `$&#123;firstName&#125; $&#123;lastName&#125;`;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// good</span><br><span class="line">function getFullName(user) &#123;</span><br><span class="line">  const &#123; firstName, lastName &#125; = user;</span><br><span class="line">  return `$&#123;firstName&#125; $&#123;lastName&#125;`;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// best</span><br><span class="line">function getFullName(&#123; firstName, lastName &#125;) &#123;</span><br><span class="line">  return `$&#123;firstName&#125; $&#123;lastName&#125;`;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Use-array-destructuring-eslint-prefer-destructuring-jscs-requireArrayDestructuring"><a href="#Use-array-destructuring-eslint-prefer-destructuring-jscs-requireArrayDestructuring" class="headerlink" title="Use array destructuring. eslint: prefer-destructuring jscs: requireArrayDestructuring"></a>Use array destructuring. eslint: prefer-destructuring jscs: requireArrayDestructuring</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const arr = [1, 2, 3, 4];</span><br><span class="line"></span><br><span class="line">// bad</span><br><span class="line">const first = arr[0];</span><br><span class="line">const second = arr[1];</span><br><span class="line"></span><br><span class="line">// good</span><br><span class="line">const [first, second] = arr;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Never-use-arguments-opt-to-use-rest-syntax-â€¦-instead-eslint-prefer-rest-params"><a href="#Never-use-arguments-opt-to-use-rest-syntax-â€¦-instead-eslint-prefer-rest-params" class="headerlink" title="Never use arguments, opt to use rest syntax â€¦ instead. eslint: prefer-rest-params"></a>Never use arguments, opt to use rest syntax â€¦ instead. eslint: prefer-rest-params</h3><p>è‡ªå·±è€æ˜¯ç”¨ç¬¬ä¸€ç§æ–¹æ³•ï¼Œå“ˆå“ˆï¼Œç¬¬äºŒç§å¤šå¥½ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// bad</span><br><span class="line">function concatenateAll() &#123;</span><br><span class="line">  const args = Array.prototype.slice.call(arguments);</span><br><span class="line">  return args.join(&apos;&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// good</span><br><span class="line">function concatenateAll(...args) &#123;</span><br><span class="line">  return args.join(&apos;&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="Why-Modules-are-the-future-letâ€™s-start-using-the-future-now"><a href="#Why-Modules-are-the-future-letâ€™s-start-using-the-future-now" class="headerlink" title="Why? Modules are the future, letâ€™s start using the future now."></a>Why? Modules are the future, letâ€™s start using the future now.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// bad</span><br><span class="line">const AirbnbStyleGuide = require(&apos;./AirbnbStyleGuide&apos;);</span><br><span class="line">module.exports = AirbnbStyleGuide.es6;</span><br><span class="line"></span><br><span class="line">// ok</span><br><span class="line">import AirbnbStyleGuide from &apos;./AirbnbStyleGuide&apos;;</span><br><span class="line">export default AirbnbStyleGuide.es6;</span><br><span class="line"></span><br><span class="line">// best</span><br><span class="line">import &#123; es6 &#125; from &apos;./AirbnbStyleGuide&apos;;</span><br><span class="line">export default es6;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Do-not-use-wildcard-imports"><a href="#Do-not-use-wildcard-imports" class="headerlink" title="Do not use wildcard imports."></a>Do not use wildcard imports.</h3><p>æœ‰çš„æ—¶å€™æˆ‘è¿˜æ˜¯ä¼šç”¨åˆ° * çš„ï¼Œå› ä¸ºä¹Ÿè®¸é‡Œé¢çš„å†…å®¹å¦‚æœæˆ‘éƒ½éœ€è¦ä½¿ç”¨åˆ°å‘¢ã€‚<br>Why? This makes sure you have a single default export.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// bad</span><br><span class="line">import * as AirbnbStyleGuide from &apos;./AirbnbStyleGuide&apos;;</span><br><span class="line"></span><br><span class="line">// good</span><br><span class="line">import AirbnbStyleGuide from &apos;./AirbnbStyleGuide&apos;;</span><br></pre></td></tr></table></figure></p>
<p> In modules with a single export, prefer default export over named export. eslint: import/prefer-default-export</p>
<p>Why? To encourage more files that only ever export one thing, which is better for readability and maintainability.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// bad</span><br><span class="line">export function foo() &#123;&#125;</span><br><span class="line"></span><br><span class="line">// good</span><br><span class="line">export default function foo() &#123;&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Multiline-imports-should-be-indented-just-like-multiline-array-and-object-literals"><a href="#Multiline-imports-should-be-indented-just-like-multiline-array-and-object-literals" class="headerlink" title="Multiline imports should be indented just like multiline array and object literals."></a>Multiline imports should be indented just like multiline array and object literals.</h3><p>Why? The curly braces follow the same indentation rules as every other curly brace block in the style guide, as do the trailing commas.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// bad</span><br><span class="line">import &#123;longNameA, longNameB, longNameC, longNameD, longNameE&#125; from &apos;path&apos;;</span><br><span class="line"></span><br><span class="line">// good</span><br><span class="line">import &#123;</span><br><span class="line">  longNameA,</span><br><span class="line">  longNameB,</span><br><span class="line">  longNameC,</span><br><span class="line">  longNameD,</span><br><span class="line">  longNameE,</span><br><span class="line">&#125; from &apos;path&apos;;</span><br></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æœ¬ç¯‡ä¸»è¦è®°å½•äº†æˆ‘é’ˆå¯¹è‡ªå·±çš„ä¹ æƒ¯ï¼Œå¯¹ eslint çš„ä¸€äº›é…ç½®çš„æ›´æ”¹ã€‚æˆ‘ä¸€èˆ¬ç”¨çš„æ˜¯ &lt;a href=&quot;https://github.com/airbnb/javascrip&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Airbnb
    
    </summary>
    
    
      <category term="å·¥å…·/é…ç½®" scheme="http://sevencai.github.io/tags/%E5%B7%A5%E5%85%B7-%E9%85%8D%E7%BD%AE/"/>
    
  </entry>
  
  <entry>
    <title>2017æˆ‘çš„å¹´åº¦å°ç»“</title>
    <link href="http://sevencai.github.io/2018/01/02/2017%E6%88%91%E7%9A%84%E5%B9%B4%E5%BA%A6%E5%B0%8F%E7%BB%93/"/>
    <id>http://sevencai.github.io/2018/01/02/2017æˆ‘çš„å¹´åº¦å°ç»“/</id>
    <published>2018-01-02T11:33:28.000Z</published>
    <updated>2018-01-02T13:14:49.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>2017 å¹´ 6 æœˆåº•ï¼Œæˆ‘æ¯•ä¸šäº†ã€‚4æœˆä»½åˆ°äº†å­¦æ ¡ï¼ŒèŠ±äº†å¤§æ¦‚1ä¸ªåŠæœˆå­¦è½¦ï¼ŒåŠä¸ªå¤šæœˆè®ºæ–‡ï¼ŒåŠä¸ªæœˆè·Ÿæˆ‘æœ€çˆ±çš„å®¤å‹ä¸€èµ·æµªã€‚å¯èƒ½æ˜¯å…ˆå‰ä¸€ç›´å®ä¹ ï¼Œå·²ç»ç†Ÿæ‚‰äº†ã€å“¦ï¼ŒåŸæ¥å·¥ä½œæ˜¯è¿™ä¸ªæ ·å­ã€‘ï¼Œå½“7æœˆä»½å†æ¬¡å›åˆ°å…¬å¸çš„æ—¶å€™ï¼Œæˆ‘ä¸€ç‚¹éƒ½æ²¡æœ‰è§‰å¾—ä¸é€‚åº”ã€‚ä¹Ÿæ²¡æœ‰16å¹´åˆšæ¥çš„æ‡µå’Œææ…Œã€‚</p>
</blockquote>
<p>å½“æ—¶çš„æ‡µæ˜¯ä»å­¦æ ¡åˆ°ç¤¾ä¼šçš„è½¬å˜ï¼Œå¾ˆå¤šä¸œè¥¿éƒ½ä¸æ‡‚ã€‚è®°å¾—åˆšæ¥çš„ç¬¬ä¸€å¤©ï¼Œ ä¸­åˆå¤§å®¶éƒ½åœ¨ç¡è§‰ï¼Œå½“æ—¶æˆ‘å¯¼å¸ˆååœ¨æˆ‘å‰é¢ï¼Œæˆ‘ä¸­åˆæ•²äº†ä¸€ä¸ªä¸­åˆçš„é”®ç›˜ï¼ŒæŠŠç¯å¢ƒå¸ƒç½®å¥½äº†ã€‚ä½†æ˜¯åé¢æ‰æ„è¯†åˆ°ï¼Œæˆ‘é‚£å¤©è‚¯å®šå½±å“äº†æˆ‘å¸ˆçˆ¶ä¼‘æ¯ã€‚é‚£å¤©æˆ‘ä¸€ä¸ŠåˆåŠ ä¸€ä¸‹åˆæ²¡æœ‰å»å•æ‰€ï¼Œæ²¡æœ‰å–æ°´ã€‚å› ä¸ºä¸å¥½æ„æ€é—®ï¼Œç»„é‡Œçš„åŒäº‹éƒ½æ˜¯ç”·ç”Ÿã€‚</p>
<p>å½“æ—¶çš„ææ…Œæ¥è‡ªå¯¹å·¥ä½œçš„ä¸ç†Ÿæ‚‰ï¼Œå¯¹ç¯å¢ƒçš„ä¸é€‚åº”ã€‚æˆ‘å½“æ—¶è§‰å¾—å¥½åƒä»€ä¹ˆéƒ½ä¸æ‡‚ï¼Œå·¥å…·ä¹Ÿä¸æ‡‚ï¼ŒçŸ¥è¯†ç‚¹ä¹Ÿä¸å†æ˜¯å­¦æ ¡ç”¨çš„é‚£äº›ï¼Œç„¶åä¸šåŠ¡é€»è¾‘ä¹Ÿä¸æ‡‚ã€‚å¥½åœ¨æˆ‘çœŸçš„æœ‰ä¸ªå¾ˆå¥½å¾ˆå¥½çš„å¸ˆçˆ¶ã€‚ç›´åˆ°ç°åœ¨æˆ‘è·Ÿä»–ä¸€èµ·åšé¡¹ç›®ï¼Œä¸æ‡‚çš„éƒ½æ˜¯é—®ä»–ã€‚ä»–å¾ˆè€å¿ƒï¼Œæ‡‚çš„å¾ˆå¤šï¼Œä¹Ÿéå¸¸å¸…æ°”ï¼ŒçœŸçš„è¿™ä¸€å¹´ä»¥æ¥ï¼Œå¤šäºäº†çš„å¯¼å¸ˆã€‚æ„Ÿæ©ã€‚å¥½åœ¨æˆ‘è‡ªå·±ä¹Ÿè¿˜ç®—åŠªåŠ›ï¼Œä¸€å¹´ä¸‹æ¥çœŸçš„è§‰å¾—è‡ªå·±è¿›æ­¥äº†ã€‚</p>
<p>è¿›æ­¥äº†å“ªäº›ï¼Ÿ æˆ‘æ—¶å¸¸ä¼šå»çœ‹ä¸€äº›è·Ÿæˆ‘ä¸€èµ·è¿›æ¥çš„æ¯•ä¸šç”Ÿï¼Œçœ‹çœ‹ä»–ä»¬çš„æˆé•¿é€Ÿåº¦ã€‚çœ‹åˆ°æœ‰çš„ä¼˜ç§€çš„å‰ç«¯ï¼Œéƒ½å·²ç»æ˜¯ nodejs çš„ collabrator äº†ï¼Œå†™çš„æ–‡ç« ä¹Ÿå¾ˆæœ‰æ„æ€ã€‚ æˆ‘ä¼šç»å¸¸é­ç­–è‡ªå·±è¦å‘ä»–ä»¬çœ‹é½ï¼Œè™½ç„¶æˆ‘ç°åœ¨æ²¡æœ‰ä»–ä»¬è¿™ä¹ˆå‰å®³ï¼Œå·¥ä½œå¤§éƒ¨åˆ†ä¹Ÿæ˜¯å†™ä¸šåŠ¡é€»è¾‘ã€‚ä½†æ˜¯å¹¶ä¸ä»£è¡¨æˆ‘æ²¡æœ‰åŠªåŠ›å’Œæ¢¦æƒ³ï¼Œè‡³å°‘æˆ‘è¿˜çŸ¥é“è‡ªå·±ä¸è¶³ï¼Œè¿˜çŸ¥é“è‡ªå·±æƒ³è¦åŠªåŠ›çš„æ–¹å‘ã€‚è¯´çš„ä¸šåŠ¡å±‚é¢ï¼Œæˆ‘è§‰å¾—æˆ‘å·²ç»è¿›æ­¥å¾ˆå¤šäº†ï¼Œå› ä¸ºè…¾è®¯æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å…¬å¸ï¼Œä¸šåŠ¡å¾ˆå¤šå¾ˆæ‚ï¼Œæˆ‘ä»¬éƒ¨é—¨åˆæ‰¿è½½äº†å…¬å¸çš„æ•´ä¸ªè™šæ‹Ÿæ”¯ä»˜çš„ä½“ç³»ï¼Œæ¶‰åŠåˆ°çš„å°±ä¸æ˜¯å•ä¸ªä¸šåŠ¡ï¼Œè€Œæ˜¯ä¸€ç¾¤ä¸šåŠ¡ç»„ã€‚å„ç§å„æ ·çš„æ¸¸æˆå¸ï¼Œqå¸ä»¥åŠåŒ…æœˆæœåŠ¡ç­‰ã€‚é€šè¿‡ç»„é‡Œçš„ä¸€ä¸ªé¡¹ç›®æˆ‘å·²ç»äº†è§£äº†å¾ˆå¤šäº†ï¼Œä¸åœ¨æ˜¯å½“æ—¶é‚£ä¸ªè¿å¬ä»–ä»¬è®¨è®ºé—®é¢˜éƒ½å¬ä¸æ‡‚çš„æˆ‘äº†ã€‚</p>
<p>æˆ‘æœ‰æ²¡æœ‰æƒ³è¿‡æ”¾å¼ƒè¿‡ï¼Ÿ æ²¡æœ‰æ”¾å¼ƒè¿‡ï¼Œåªæœ‰éš¾è¿‡è¿‡ï¼Œ æœ‰çš„æ—¶å€™å·¥ä½œæä¸å®šï¼Œ åŠ äº†å‡ ä¸ªæ˜ŸæœŸå¾ˆé•¿æ—¶é—´çš„ç­ï¼Œæœ‰çš„æ—¶å€™ä¸€ä¸ªé—®é¢˜æ‰¾äº†ä¸€å¤©å‘ç°æ˜¯é‡æ„çš„ bug, æœ‰çš„æ—¶å€™è·ŸåŒäº‹æ²Ÿé€šä¸é¡ºç•…çš„æ—¶å€™ï¼Œéƒ½æœ‰éš¾è¿‡è¿‡ã€‚ä½†æ˜¯ä½ ä¼šå‘ç°ï¼Œå†éš¾çš„é—®é¢˜æ€»æœ‰è§£å†³çš„ä¸€å¤©ï¼ŒçœŸçš„ä¸€åˆ‡éƒ½ä¼šè¿‡å»ã€‚å°±æ¯”å¦‚ä½ å¾ˆåœ¨æ„çš„ä»Šå¤©ï¼Œåœ¨å¾ˆå¤šå¹´åï¼Œä¹Ÿåªæ˜¯ä½ äººç”Ÿä¸­çš„ä¸€ç‚¹ç‚¹ã€‚æœ‰ä¸€æ¬¡ï¼Œè·¯è¿‡ç§‘æŠ€å›­çš„å¤©æ¡¥ï¼Œå“‡çš„ä¸€ä¸‹å°±å“­äº†ï¼Œæ²¡æœ‰åŸå› ï¼Œä¸æ˜¯å› ä¸ºå·¥ä½œï¼Œä¹Ÿä¸æ˜¯å› ä¸ºç”Ÿæ´»ï¼Œå“­çš„å¾ˆæƒ¨å¾ˆæ”¾è‚†ï¼Œä½†æ˜¯å“­å®Œå¥½å¼€å¿ƒã€‚å“ˆå“ˆã€‚</p>
<p>æåˆ°äº†ç§‘æŠ€å›­çš„å¤©æ¡¥ï¼Œæˆ‘ä»Šå¹´ä¸€æ•´å¹´åªè¦ä¸æ˜¯ä¸‹é›¨æˆ–è€…å¤§å§¨å¦ˆï¼Œéƒ½æ˜¯èµ°è·¯å›å®¶ï¼Œå·®ä¸å¤š5km, èµ°åˆ°è…¾å¤§åº•ä¸‹çš„æ—¶å€™ï¼Œå¦‚æœå¤§é¾™ä¹Ÿä¸‹ç­ï¼Œä»–å°±ä¼šé€æˆ‘å›å®¶ã€‚å¯æ˜¯å¤§éƒ¨åˆ†æ—¶é—´ä»–ä¹Ÿå¾ˆå¿™ï¼Œä¸€èˆ¬éƒ½åˆ°11ï¼Œ12ç‚¹äº†ï¼Œæˆ‘å°±ä¼šä¸€ä¸ªäººå›å®¶ã€‚å·®ä¸å¤š10ç‚¹20å·¦å³ä¸‹ç­ï¼Œ 11ç‚¹å·¦å³èƒ½åˆ°å®¶ã€‚æåˆ°è¿™é‡Œä¸çŸ¥é“ä¸ºå•¥ä»–å¾ˆå¿™ï¼Œå¯èƒ½ä¹Ÿæ˜¯å¿™ä¸šåŠ¡ã€‚å¤§é¾™æ˜¯ä¸ªéå¸¸ä¼˜ç§€çš„å‘˜å·¥ï¼Œè‡³å°‘åœ¨æˆ‘å¿ƒé‡Œæ˜¯ã€‚å¦‚æœæˆ‘æ˜¯ä¸ªè€æ¿ï¼Œæˆ‘ä¸€å®šé›‡ä½£ä»–å½“æˆ‘çš„å‘˜å·¥ï¼Œå¾ˆè®¤çœŸï¼Œå¾ˆè´Ÿè´£ï¼Œå¾ˆä¼šå¤„ç†é—®é¢˜ï¼Œæ²Ÿé€šèƒ½åŠ›å¾ˆå¼ºã€‚ä½†æ˜¯å†™ä»£ç æ–¹é¢ï¼Œæˆ‘è§‰å¾—ä»–æ²¡æœ‰ä»€ä¹ˆè¿›æ­¥ï¼Œå¯èƒ½æ˜¯å› ä¸ºä»–ç°åœ¨å·²ç»é€æ¸è½¬è¿ç»´äº†ã€‚æˆ‘è¿™æ¯•ä¸šåŠå¹´æ¥éƒ½æ²¡æœ‰æ„Ÿè¿‡å†’ï¼Œæˆ‘æ€€ç–‘è·Ÿæˆ‘æ¯å¤©èµ°è·¯å›å®¶æœ‰å…³ç³»ï¼Œ è¿˜æœ‰æˆ‘ç°åœ¨ä½çš„æˆ¿å­å¾ˆé€šæ°”ã€‚å˜»å˜»ã€‚</p>
<p>æˆ‘æƒ³åˆ°å“ªé‡Œå°±å†™åˆ°å“ªé‡Œäº†ã€‚åˆšåˆšæåˆ°äº†å¤§å§¨å¦ˆï¼Œè¿™ä¸ªæ˜¯æˆ‘å·¥ä½œçš„å…‹æ˜Ÿã€‚ ä¸¤æ¬¡è¯·ç—…å‡å…¶å®éƒ½æ˜¯å› ä¸ºå¤§å§¨å¦ˆã€‚ä¸çŸ¥é“ä¸ºå•¥ï¼Œä»é«˜ä¸­èµ·ï¼Œæˆ‘å°±ååº”è¿™ä¹ˆæ¿€çƒˆã€‚è€æ˜¯åŠ¨ä¸åŠ¨å°±ç–¼çš„æ™•å€’ï¼Œä½ è‚¯å®šä¸æ‡‚æˆ‘çš„ç—›è‹¦ã€‚çœŸçš„æ˜¯æŠ˜ç£¨æ­»æˆ‘äº†ã€‚å¥½åœ¨å¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨å‘¨æœ«ã€‚æ–°çš„ä¸€å¹´æˆ‘å¸Œæœ›ä¸Šå¸èƒ½ä¿ä½‘æˆ‘ä¸å†ç–¼çš„æ™•å€’ã€‚</p>
<p>æˆ‘ä¸€ç›´æƒ³å†™ä¸€ç¯‡å…³äºäººæ€§å–„è‰¯çš„æ–‡ç« ã€‚å¯¹äºè¿™ä¸ªæˆ‘æ·±æœ‰ç†è§£ã€‚å› ä¸ºæˆ‘çš„å¤§å§¨å¦ˆï¼Œæˆ‘çœŸçš„è®¤è¯†åˆ°ä¸–ç•Œä¸Šçš„å¥½äººçœŸçš„å¾ˆå¤šã€‚å–„è‰¯çš„äººéƒ½å¾ˆå¤šã€‚</p>
<p>ç¬¬ä¸€æ¬¡æ™•å€’æ˜¯é«˜ä¸­è·Ÿå¦ˆå¦ˆåœ¨è¶…å¸‚é€›å®¶å…·ï¼Œé€›ç€é€›ç€å°±æ™•å€’åœ¨äº†æ²™å‘ä¸Šï¼Œå¦ˆå¦ˆè¯´æˆ‘å½“æ—¶è„¸è‰²å‘ç™½ï¼Œæµ‘èº«å‡ºæ±—ï¼Œåªæœ‰ä¸€ç‚¹ä¸€ç‚¹çš„æ„è¯†æ˜¯å¦ˆå¦ˆå“æ­»äº†ï¼Œèµ¶ç´§è·Ÿä¼¯ä¼¯ä¸€èµ·æŠŠæˆ‘é€åˆ°äº†åŒ»é™¢ã€‚ æˆ‘å¥½çˆ±å¥½çˆ±æˆ‘çš„å¦ˆå¦ˆã€‚åæ¥è¿˜æœ‰å‡ æ¬¡å°è±¡æ·±åˆ»çš„ï¼Œé«˜ä¸­åˆä¸€æ¬¡æ™•å€’åœ¨äº†å•æ‰€ï¼Œè€å¸ˆæŠŠæˆ‘å¸¦åˆ°äº†åŒ»åŠ¡å®¤ï¼Œç»™æˆ‘ä»˜äº†åŒ»è¯è´¹ã€‚å½“æ—¶æˆ‘ä¸€ä¸ªæ˜ŸæœŸä¸€å…±å°±20å—é’±ï¼Œæ²¡æœ‰é’±è¿˜ç»™ä»–ï¼Œä»–å°±è¯´æ²¡å…³ç³»ï¼Œä¸ç”¨è¿˜ï¼Œåé¢å†è¿˜éƒ½å¯ä»¥çš„ã€‚åæ¥æˆ‘è¿‡äº†å¥½å‡ ä¸ªæ˜ŸæœŸæ‰è¿˜ç»™ä»–ã€‚è¿˜æœ‰å¥½å‡ æ¬¡æ˜¯è·Ÿå¤§é¾™åœ¨ä¸€èµ·ï¼Œæœ‰ä¸€æ¬¡å¤§é¾™å»æˆ‘å®¶æ¥æˆ‘ï¼Œæˆ‘å‡†å¤‡è·Ÿä»–ä¸€èµ·å»è…¾å¤§åŠ ç­ã€‚ç»“æœåœ°é“ä¸Šå¿½ç„¶æ˜å€’äº†ï¼Œå®Œå…¨å¤±å»äº†æ„è¯†ï¼Œ åæ¥å¤§é¾™æŠŠæˆ‘æ‰˜ä¸‹äº†åœ°é“ï¼Œæœ‰äººç»™æˆ‘è®©äº†ä½ç½®ï¼Œæˆ‘ä¸€ä¼šå°±é†’äº†ï¼Œå½“æ—¶å®Œå…¨å‡ºä¸äº†åœ°é“ç«™ï¼ŒçŸ­çŸ­2åˆ†é’Ÿçš„è·¯ç¨‹ï¼Œæˆ‘èµ°äº†åŠä¸ªå°æ—¶ï¼Œä¸€ç›´ååœ¨åœ°ä¸Šï¼Œæƒ³æƒ³å½“æ—¶æ¥æ¥å¾€å¾€é‚£ä¹ˆå¤šäººï¼Œå¤§é¾™éƒ½å®Œå…¨æ²¡æœ‰å«Œå¼ƒæˆ‘ï¼Œè¿˜ç»™æˆ‘ä¹°æ°´å–ï¼ŒçœŸçš„å¾ˆæ„ŸåŠ¨ã€‚è¿˜æœ‰ä¸€æ¬¡æ˜¯åœ¨è¶…å¸‚é—¨å£ï¼Œå‡ºæ¥å°±ä¸è¡Œäº†ï¼Œæ‰«åœ°çš„é˜¿å§¨å¸®æˆ‘å«äº†äººï¼Œæ”¶è¥å‘˜å§å§ç»™æˆ‘æ‹¿äº†ç‰›å¥¶ï¼Œåæ¥æ‰“ç”µè¯è®©å¤§é¾™é€äº†æˆ‘å›å®¶ã€‚ æˆ‘å½“æ—¶å¿ƒæƒ³ï¼Œ æˆ‘ä¸€å®šè¦å½“ä¸€ä¸ªå¥½äººï¼Œæœ‰èƒ½åŠ›ä¹Ÿå»å¸®åŠ©åˆ«äººã€‚å› ä¸ºæˆ‘å—åˆ°äº†å¤ªå¤šäººçš„å¸®åŠ©ï¼Œè™½ç„¶å†ä»–ä»¬çœ‹èµ·æ¥è™½ç„¶å¾®ä¸è¶³é“ï¼Œä½†æ˜¯è¿™äº›å°å°çš„ä¸¾åŠ¨ï¼Œéƒ½è®©é‚£æ—¶å€™çš„æˆ‘æ„Ÿåˆ°äº†æ·±æ·±çš„åŠ›é‡ã€‚è¿˜æœ‰åœ¨åŠå…¬å®¤ç–¼çš„ä¸è¡Œçš„ï¼Œæˆ‘çœŸçš„è§‰å¾—å¥½ä¸¢äººå¥½ä¸¢äººã€‚</p>
<p>æ‰¯è¿œäº†ï¼Œä¸è¿‡éƒ½æ˜¯æˆ‘çš„è¿™ä¸€å¹´æœ€æ·±çš„æ„Ÿå—ã€‚å†æåˆ°å·¥ä½œæ€»ç»“ï¼Œä¸ŠåŠå¹´å®ä¹ çš„æ—¶å€™ï¼Œè¿˜æœ‰å¥½äº›äº§å‡ºï¼Œä¸‹åŠå¹´çš„æ—¶å€™å¾ˆå¿™ï¼Œå†™çš„æ–‡ç« å¾ˆå°‘äº†ã€‚å…¶å®æˆ‘æœ‰å­¦åˆ°å¾ˆå¤šä¸œè¥¿ï¼Œä½†æ˜¯éƒ½æ²¡æœ‰äº§å‡ºï¼Œå› ä¸ºæ²¡æœ‰æ—¶é—´å»æ€»ç»“ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†æˆ‘æœ‰äº›ä¸œè¥¿åŠçŸ¥åŠè§£ã€‚<br>ä¸‹åŠå¹´çš„æ—¶å€™ä¸€ç›´åœ¨ç”¨ vue å…¨å®¶æ¡¶ï¼Œvue çœŸçš„æ˜¯ä¸ªå¥½æ¡†æ¶ã€‚ç°åœ¨åªæ˜¯åœç•™åœ¨ç†Ÿæ‚‰æ€ä¹ˆç”¨çš„é˜¶æ®µï¼Œä¸‹ä¸ªé˜¶æ®µäº‰å–èƒ½æŠŠé‡Œé¢æ ¸å¿ƒå®ç°çš„æœºåˆ¶äº†è§£æ¸…æ¥šã€‚</p>
<p>ä»Šå¹´è‡ªå·±å†™ä»£ç ï¼Œæ€»æ˜¯è¿™æ ·å†™ï¼š</p>
<blockquote>
<p>create by sevencai@2017/11/11<br>contact seven.cailidan@gmail.com</p>
</blockquote>
<p>å°±æ˜¯çŸ­çŸ­çš„è¿™å‡ è¡Œå­—ï¼Œè®©æˆ‘æœ‰åŠ¨åŠ›å»ä¸æ–­çš„ review è‡ªå·±çš„ä»£ç ï¼Œèƒ½ä¸èƒ½å†™çš„æ›´å¥½ï¼Œæ˜¯ä¸æ˜¯è¯­æ³•æ²¡æœ‰ç¬¦åˆè§„èŒƒï¼Œæ˜¯ä¸æ˜¯æœ‰å¯ä»¥ä¼˜åŒ–çš„æ–¹æ³•ã€‚æˆ‘è§‰å¾—è¿™ç‚¹æ²¡æœ‰å˜è¿‡ï¼Œæˆ‘ä¸æƒ³è®©ä»¥åå¦‚æœæœ‰äººçœ‹æˆ‘çš„ä»£ç ï¼Œè¯´æˆ‘å†™çš„ä¸å¥½ã€‚è‡³å°‘ä¸è¦é‚£ä¹ˆéš¾çœ‹ï¼Œå°½åŠ›åšåˆ°æœ€å¥½ã€‚ ä¸ç®¡é¡¹ç›®å†æ€ä¹ˆèµ¶ï¼Œ æˆ‘ä¸€ç›´æé†’ç€è‡ªå·±ã€‚åƒä¸‡ä¸è¦è¢«åäººéª‚ï¼Œè¯´ä¸å®šä½ çš„ä»£ç è¦è·‘10å¹´å‘¢ã€‚</p>
<p>æ²¡æœ‰å»æ—…è¡Œï¼Œ å› ä¸ºæ²¡æœ‰é’±ã€‚å¤§é¾™å“¥è·Ÿæˆ‘æ˜¯åŒä¸€ç±»äººã€‚ä»¥å‰å¤§å­¦çš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šæ¯å¹´éƒ½è·Ÿå°ä¼™ä¼´ä»¬å»æ—…è¡Œï¼Œæ¯ä¸ªäººå°±1000å—é’±ï¼Œåšç¡¬åº§ï¼Œç¡æ—…é¦†ï¼Œ3ï¼Œ4ä¸ªäººæŒ¤åœ¨ä¸€ä¸ªæˆ¿é—´é‡Œï¼Œä¹°ä¸€ä»½ä¸œè¥¿å¤§å®¶ä¸€èµ·åƒï¼Œéƒ½æ˜¯å¾ˆç¾å¥½çš„å›å¿†ï¼Œä½†æ˜¯åˆ°äº†å·¥ä½œï¼ŒçœŸçš„æ˜¯å› ä¸ºæ²¡æœ‰é‚£1000å—é’±äº†å—ï¼Ÿ è¿˜æ˜¯å› ä¸ºè‡ªå·±å·²ç»æ‡’åˆ°è¿å»çœ‹æ›´è¿œæ›´å¤§çš„ä¸–ç•Œçš„å¿ƒéƒ½æ²¡æœ‰äº†ï¼Ÿ æˆ‘è§‰å¾—æ˜¯ç¬¬äºŒç§ã€‚äººå¯æ€•çš„ä¸æ˜¯æ²¡æœ‰ç›®æ ‡ï¼Œå¯æ€•çš„æ˜¯è¿˜è¦ä¸ºè‡ªå·±æ²¡æœ‰ç›®æ ‡æ‰¾å€Ÿå£ã€‚å—¯ï¼Œå°±æ˜¯è¿™æ ·ã€‚è¦æ”¹å˜ã€‚</p>
<p>æåˆ°äº†2018ï¼Œ 2018æ˜¯ä¸ªä¸ä¸€æ ·çš„ä¸€å¹´ã€‚ 2018ï¼Œå¦ˆå¦ˆå°±50å²äº†ã€‚ 2018ï¼Œæˆ‘çš„å°ä¾„å­è¦å‡ºç”Ÿäº†ã€‚2018ï¼Œæ˜¯æˆ‘è·Ÿå¤§é¾™è®¤è¯†çš„ç¬¬7å¹´ã€‚ 2018ï¼Œæˆ‘å°†åœ¨é¹…å‚å·¥ä½œæ»¡ä¸€å¹´ã€‚ 2008å¹´çš„æ—¶å€™ï¼Œçˆ¸çˆ¸å¸¦æˆ‘å»äº†åŒ—äº¬ï¼Œçœ‹äº†åˆ«äººå‡æ——ã€‚è½¬çœ¼é—´10å¹´å°±è¿‡å»äº†ã€‚2018ï¼Œæˆ‘æƒ³å»è¶ŸåŒ—äº¬ï¼Œçˆ¬ä¸‹é•¿åŸï¼Œå»èƒ¡åŒé‡Œåƒéå°åƒã€‚å¯¹è‡ªå·±æœ‰ä¸‹é¢äº›æœŸå¾…ã€‚ç­‰åˆ°2018ç»“æŸçš„æ—¶å€™ï¼Œå†æ¥çœ‹çœ‹è‡ªå·±çš„è¿™äº› flag æœ‰æ²¡æœ‰æˆåŠŸã€‚</p>
<ol>
<li>åŠæ¸¯æ¾³é€šè¡Œè¯ï¼Œå¸¦å¦ˆå¦ˆæ¥æ·±åœ³é¦™æ¸¯ï¼Œé€›ä¸€é€›ã€‚åƒä¸€æ¬¡ä¸‰åƒæ—¥æœ¬æ–™ç†ã€‚</li>
<li>å»ä¸€è¶ŸåŒ—äº¬ï¼Œçˆ¬ä¸‹é•¿åŸã€‚</li>
<li>åšæŒè¿åŠ¨ï¼Œæ¯å¤©ä¸­åˆåšæŒåƒé¥­ï¼Œæ™šä¸Šåƒæ°´æœï¼Œé”»ç‚¼é”»ç‚¼èº«ä½“ï¼Œå‡ºå‡ºæ±—ã€‚</li>
<li>èƒ½ç˜¦8æ–¤ï¼ˆè¿™ä¸ªæ€•æ˜¯æœ€ä¸å¯èƒ½å®ç°çš„äº†ï¼Œä½†æ˜¯æ¢¦æƒ³è¿˜æ˜¯è¦æœ‰çš„ï¼Œä¸‡ä¸€å‘¢ï¼‰ã€‚</li>
<li>æ™šä¸Š1ç‚¹ä¹‹å‰ç¡è§‰ã€‚ï¼ˆ12.59å…³æ‰‹æœºç¡è§‰ï¼‰</li>
<li>è·Ÿæœ€çˆ±çš„é›ªç´ï¼Œç›¼ç›¼æˆ–è€…å¹²å¤«ï¼Œä¼Ÿæˆä»–ä»¬å‡ ä¸ªä¸€èµ·å»è¶Ÿæˆéƒ½ã€‚</li>
<li>åœ¨æŠŠè‡ªå·±å·¥ä½œåšå¥½çš„æƒ…å†µä¸‹ï¼Œå¯¹ä¸šåŠ¡ç†Ÿæ‚‰çš„æƒ…å†µä¸‹ï¼Œå¤šæå‡è‡ªå·±çš„ä¸“ä¸šæŠ€èƒ½ã€‚</li>
<li>æŠŠé¸Ÿå“¥çš„ linux ç§æˆ¿èœå¥½å¥½å†å­¦ä¹ ä¸‹ã€‚</li>
<li>å¯¹ JS åŸç”Ÿï¼Œè¿˜è¦å†å¤šèŠ±æ—¶é—´å¼„æ¸…æ¥šï¼Œæœ€å¥½å†æŠŠä¹¦å®Œæ•´çš„è¿‡ä¸€éã€‚</li>
<li>å¤šå­¦ç‚¹ Nodejs ã€Http å§, äº‰å–æŠŠå­¦çš„å†…å®¹éƒ½æ•´ç†åˆ°åšå®¢æ¥ï¼Œä¸è¦å·æ‡’ã€‚</li>
<li>çŸ¥å…¶ç„¶ï¼ŒçŸ¥å…¶æ‰€ä»¥ç„¶ã€‚</li>
</ol>
<p>2018ï¼ ä½ è¦å»çœ‹æ›´å¤§æ›´è¿œçš„ä¸–ç•Œï¼ä¸æ­¢è„šä¸‹ï¼Œä¸æ­¢ä¹¦ä¸­ï¼Œä¸æ­¢å°†æ¥ï¼(To discover a bigger world!)</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;2017 å¹´ 6 æœˆåº•ï¼Œæˆ‘æ¯•ä¸šäº†ã€‚4æœˆä»½åˆ°äº†å­¦æ ¡ï¼ŒèŠ±äº†å¤§æ¦‚1ä¸ªåŠæœˆå­¦è½¦ï¼ŒåŠä¸ªå¤šæœˆè®ºæ–‡ï¼ŒåŠä¸ªæœˆè·Ÿæˆ‘æœ€çˆ±çš„å®¤å‹ä¸€èµ·æµªã€‚å¯èƒ½æ˜¯å…ˆå‰ä¸€ç›´å®ä¹ ï¼Œå·²ç»ç†Ÿæ‚‰äº†ã€å“¦ï¼ŒåŸæ¥å·¥ä½œæ˜¯è¿™ä¸ªæ ·å­ã€‘ï¼Œå½“7æœˆä»½å†æ¬¡å›åˆ°å…¬å¸çš„æ—¶å€™ï¼Œæˆ‘ä¸€ç‚¹éƒ½æ²¡æœ‰è§‰å¾—ä¸é€‚åº”ã€‚ä¹Ÿæ²¡æœ‰16å¹´åˆšæ¥çš„æ‡µå’Œæ
    
    </summary>
    
    
      <category term="ç”Ÿæ´»ä¸æ€»ç»“" scheme="http://sevencai.github.io/tags/%E7%94%9F%E6%B4%BB%E4%B8%8E%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>mac ä¸‹ zsh: command not found</title>
    <link href="http://sevencai.github.io/2017/12/15/mac-%E4%B8%8B-zsh-command-not-found/"/>
    <id>http://sevencai.github.io/2017/12/15/mac-ä¸‹-zsh-command-not-found/</id>
    <published>2017-12-15T02:54:30.000Z</published>
    <updated>2017-12-15T03:53:20.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç®€å•æ¥è¯´ï¼Œæ˜¯æˆ‘ä½¿ç”¨ <code>tnpm install -g webpack</code> æˆ–è€…ä»»ä½•ä½¿ç”¨ -g æ¥å®‰è£…çš„å…¨å±€ npm åŒ…éƒ½æŠ¥é”™ï¼š <code>zsh: command not found</code>,</p>
<p>æƒ³åˆ°äº†è‚¯å®šæ˜¯ç¯å¢ƒå˜é‡å¼•èµ·çš„ï¼Œzsh æ‰¾ä¸åˆ°å…¨å±€åŒ…å®‰è£…çš„ä½ç½®ã€‚</p>
<p>zsh çš„é…ç½®æ–‡ä»¶åœ¨ <code>~/.zshrc</code> æ–‡ä»¶ä¸­ï¼Œé‡Œé¢å·²ç»æœ‰è¢«é…ç½®äº†çš„ç¯å¢ƒå˜é‡å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> $PATH = <span class="regexp">/usr/</span>bin:<span class="regexp">/usr/</span>local/bin:<span class="regexp">/usr/</span>bin:<span class="regexp">/bin:/u</span>sr/sbin:<span class="regexp">/sbin</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ æˆ–è€…ä½ å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯å·¥å…·ä¸­ echo $PATH æŸ¥çœ‹æš´éœ²çš„å…¨å±€ç¯å¢ƒå˜é‡</span></span><br></pre></td></tr></table></figure>
<p>å‘ç°é—®é¢˜åï¼Œæ‰¾åˆ°äº† npm -g å®‰è£…çš„å…¨éƒ¨ç›®å½•ä¸ºï¼ˆâ€¦ä¸ºè‡ªå·±çš„ç›®å½•ï¼‰ <code>/usr/local/bin/node/.../bin</code> ä¸‹ï¼Œ æ·»åŠ åˆ° $PATH åé¢å³å¯ã€‚</p>
<p>æ¯ä¸ª : ä»£è¡¨çš„æ˜¯å¤šä¸ªç¯å¢ƒå˜é‡çš„åˆ†å‰²ã€‚</p>
<p>è¿‡ç¨‹ä¸­åšäº†ä¸€ä»¶ç‰¹åˆ«å‚»çš„äº‹æƒ…ï¼Œæ²¡æœ‰æŠŠ npm çš„ç›®å½•ç›´æ¥åœ¨åŸæ¥çš„ export åé¢åŠ ï¼Œè€Œæ˜¯ç›´æ¥æ–°å»ºäº†ä¸€è¡Œï¼Œå¤§æ¦‚æ˜¯ä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> PATH = <span class="regexp">/usr/</span>bin:<span class="regexp">/usr/</span>local/bin:<span class="regexp">/usr/</span>bin:<span class="regexp">/bin:/u</span>sr/sbin:<span class="regexp">/sbin</span></span><br><span class="line"><span class="regexp">export PATH = /u</span>sr/local/bin/node/.../bin</span><br><span class="line"></span><br><span class="line">zsh å¯åŠ¨ä¼šæŠ¥é”™ï¼š</span><br><span class="line">/Users/sevencai/.oh-my-zsh/oh-my-zsh.sh:<span class="number">3</span>: command not found: env</span><br><span class="line">env_default:<span class="number">1</span>: command not found: env</span><br><span class="line">env_default:<span class="number">1</span>: command not found: grep</span><br><span class="line">env_default:<span class="number">1</span>: command not found: env</span><br><span class="line">env_default:<span class="number">1</span>: command not found: grep</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä¼šå¯¼è‡´æœ€åçš„ç¯å¢ƒå˜é‡æ˜¯åé¢ä¸€é¡¹ï¼Œå‰é¢è¢«è¦†ç›–äº†ã€‚å¯¼è‡´ä¸€äº›æœ€åŸºæœ¬çš„å‘½ä»¤ï¼Œå¦‚ cat/vi/vim éƒ½ä¸èƒ½ä½¿ç”¨äº†ã€‚å“ˆå“ˆï¼Œè¿viéƒ½ä¸èƒ½ç”¨äº†ï¼Œæˆ‘çŸ¥é“é”™äº†ï¼Œæ€ä¹ˆæ”¹å›æ¥ï¼Ÿ</p>
<p>ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­<code>export PATH=/bin:/usr/bin:/usr/local/bin</code>ï¼Œ ç„¶åå†å» vi ~/.zshrc æ›´æ”¹å°±å¥½äº†ã€‚</p>
<p>zshrc æ˜¯ zsh çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚æœä½ ä¸æ˜¯ç”¨çš„ zsh, è€Œæ˜¯ bash æˆ–è€… shell , é…ç½®æ–‡ä»¶å°±ä¸æ˜¯è¿™ä¸ªäº†ï¼Œæœ‰å¯èƒ½æ˜¯ .bash_profile ä¹‹ç±»çš„ã€‚</p>
<p>è®°å¾—æ¯æ¬¡ modify â€¦rc æ–‡ä»¶åéƒ½ source ä¸‹å“¦ï¼Œ è¦ä¸ä¸ä¼šç”Ÿæ•ˆã€‚</p>
<p>ä¸Šé¢æˆ–è€…ç›´æ¥ä½¿ç”¨ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> PATH = <span class="regexp">/usr/</span>bin:<span class="regexp">/usr/</span>local/bin:<span class="regexp">/usr/</span>bin:<span class="regexp">/bin:/u</span>sr/sbin:<span class="regexp">/sbin</span></span><br><span class="line"><span class="regexp">export PATH = $PATH:/u</span>sr/local/bin/node/.../bin</span><br></pre></td></tr></table></figure></p>
<p>å³åœ¨è·¯å¾„å‰æˆ–è·¯å¾„åæ·»åŠ  <code>$PATH</code> å˜é‡ï¼Œä¹Ÿå¯ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç®€å•æ¥è¯´ï¼Œæ˜¯æˆ‘ä½¿ç”¨ &lt;code&gt;tnpm install -g webpack&lt;/code&gt; æˆ–è€…ä»»ä½•ä½¿ç”¨ -g æ¥å®‰è£…çš„å…¨å±€ npm åŒ…éƒ½æŠ¥é”™ï¼š &lt;code&gt;zsh: command not found&lt;/code&gt;,&lt;/p&gt;
&lt;p&gt;æƒ³åˆ°äº†è‚¯å®šæ˜¯ç¯å¢ƒå˜é‡å¼•èµ·çš„ï¼Œzsh æ‰¾
    
    </summary>
    
    
      <category term="å·¥å…·/é…ç½®" scheme="http://sevencai.github.io/tags/%E5%B7%A5%E5%85%B7-%E9%85%8D%E7%BD%AE/"/>
    
  </entry>
  
  <entry>
    <title>å—¯ï¼Œåˆæ˜¯çºªå½•å‡ ä¸ªå°çš„çŸ¥è¯†ç‚¹</title>
    <link href="http://sevencai.github.io/2017/10/20/%E5%97%AF%EF%BC%8C%E5%8F%88%E6%98%AF%E7%BA%AA%E5%BD%95%E5%87%A0%E4%B8%AA%E5%B0%8F%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    <id>http://sevencai.github.io/2017/10/20/å—¯ï¼Œåˆæ˜¯çºªå½•å‡ ä¸ªå°çš„çŸ¥è¯†ç‚¹/</id>
    <published>2017-10-20T11:54:29.000Z</published>
    <updated>2017-12-19T12:40:23.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Hash-maps-without-side-effects"><a href="#Hash-maps-without-side-effects" class="headerlink" title="Hash maps without side effects"></a>Hash maps without side effects</h3><p>ç®€å•çš„æ¥è¯´ï¼Œå½“æˆ‘ä»¬ç”¨ å¯¹è±¡å­—é¢é‡ <code>{}</code> æ¥åˆ›å»ºè¿™ä¸ª hash è¡¨æ—¶ï¼Œä»–ä¼šé»˜è®¤ä» Object ç»§æ‰¿å±æ€§ï¼Œè¿™ç­‰åŒäº <code>Object.create(Object.prototype)</code> , è¿™ä¹ˆæ¥åˆ›å»ºçš„è¯ï¼Œå°±ä¼šæœ‰è„æ•°æ®ï¼Œå› ä¸ºå…¶å®ä½ åªæ˜¯éœ€è¦ä¸€ä¸ª map è€Œå·²ã€‚å¹¶ä¸”åœ¨ <code>for in</code> çš„æ—¶å€™ï¼Œè¿˜éœ€è¦ä½¿ç”¨ <code>hasOwnProperty</code> æ¥åˆ¤æ–­ã€‚</p>
<p>ä½†å¦‚æœä½¿ç”¨ <code>Object.create(null)</code>, æˆ‘ä»¬æ˜ç¡®çš„æŒ‡å®šå…¶åŸå‹ä¸º null, å› æ­¤ä»–æ‰æ˜¯çœŸæ­£çš„æ²¡æœ‰æ„é€ å™¨ï¼Œæ²¡æœ‰ <code>toString()</code>, <code>hasOwnProperty</code>, <code>valueOf</code> ç­‰ã€‚æ³¨æ„è¿™é‡Œä¸è¦ä½¿ç”¨ <code>Object.create({})</code>,è¿™ä¸ªæ•ˆæœè·Ÿå‰é¢æ˜¯ä¸€æ ·çš„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dirtyMap = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> cleanMap = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">dirtyMap.constructor    <span class="comment">// function Object() &#123; [native code] &#125;</span></span><br><span class="line"></span><br><span class="line">cleanMap.constructor    <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Iterating maps</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> key;</span><br><span class="line"><span class="keyword">for</span>(key <span class="keyword">in</span> dirtyMap)&#123;</span><br><span class="line">  <span class="keyword">if</span> (dirtyMap.hasOwnProperty(key)) &#123;   <span class="comment">// Check to avoid iterating over inherited properties.</span></span><br><span class="line">    <span class="built_in">console</span>.log(key + <span class="string">" -&gt; "</span> + dirtyMap[key]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(key <span class="keyword">in</span> cleanMap)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key + <span class="string">" -&gt; "</span> + cleanMap[key]);    <span class="comment">// No need to add extra checks, as the object will always be clean</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="angular-åŒå‘ç»‘å®šå’Œ-vueåŒå‘ç»‘å®š"><a href="#angular-åŒå‘ç»‘å®šå’Œ-vueåŒå‘ç»‘å®š" class="headerlink" title="angular åŒå‘ç»‘å®šå’Œ vueåŒå‘ç»‘å®š"></a>angular åŒå‘ç»‘å®šå’Œ vueåŒå‘ç»‘å®š</h3><p>AngularJS é‡‡ç”¨â€œè„å€¼æ£€æµ‹â€çš„æ–¹å¼ï¼Œæ•°æ®å‘ç”Ÿå˜æ›´åï¼Œå¯¹äºæ‰€æœ‰çš„æ•°æ®å’Œè§†å›¾çš„ç»‘å®šå…³ç³»è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œè¯†åˆ«æ˜¯å¦æœ‰æ•°æ®å‘ç”Ÿäº†æ”¹å˜ï¼Œæœ‰å˜åŒ–è¿›è¡Œå¤„ç†ï¼Œå¯èƒ½è¿›ä¸€æ­¥å¼•å‘å…¶ä»–æ•°æ®çš„æ”¹å˜ï¼Œæ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹å¯èƒ½ä¼šå¾ªç¯å‡ æ¬¡ï¼Œä¸€ç›´åˆ°ä¸å†æœ‰æ•°æ®å˜åŒ–å‘ç”Ÿåï¼Œå°†å˜æ›´çš„æ•°æ®å‘é€åˆ°è§†å›¾ï¼Œæ›´æ–°é¡µé¢å±•ç°ã€‚å¦‚æœæ˜¯æ‰‹åŠ¨å¯¹ ViewModel çš„æ•°æ®è¿›è¡Œå˜æ›´ï¼Œä¸ºç¡®ä¿å˜æ›´åŒæ­¥åˆ°è§†å›¾ï¼Œéœ€è¦æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡â€œè„å€¼æ£€æµ‹â€ã€‚</p>
<p>VueJS åˆ™ä½¿ç”¨ ES5 æä¾›çš„ Object.defineProperty() æ–¹æ³•ï¼Œç›‘æ§å¯¹æ•°æ®çš„æ“ä½œï¼Œä»è€Œå¯ä»¥è‡ªåŠ¨è§¦å‘æ•°æ®åŒæ­¥ã€‚å¹¶ä¸”ï¼Œç”±äºæ˜¯åœ¨ä¸åŒçš„æ•°æ®ä¸Šè§¦å‘åŒæ­¥ï¼Œå¯ä»¥ç²¾ç¡®çš„å°†å˜æ›´å‘é€ç»™ç»‘å®šçš„è§†å›¾ï¼Œè€Œä¸æ˜¯å¯¹æ‰€æœ‰çš„æ•°æ®éƒ½æ‰§è¡Œä¸€æ¬¡æ£€æµ‹ã€‚</p>
<p><a href="http://www.jianshu.com/p/d3a15a1f94a0" target="_blank" rel="noopener"></a></p>
<hr>
<h3 id="ç§»åŠ¨ç«¯è°ƒè¯•-eruda"><a href="#ç§»åŠ¨ç«¯è°ƒè¯•-eruda" class="headerlink" title="ç§»åŠ¨ç«¯è°ƒè¯•- eruda"></a>ç§»åŠ¨ç«¯è°ƒè¯•- eruda</h3><p>eruda ç±»ä¼¼äº å°ç¨‹åºçš„ console æ§åˆ¶å°ã€‚ä½†æ˜¯æ¯”å°ç¨‹åºçš„æ›´å¥½ï¼Œä»–è¿˜å¯ä»¥çœ‹ network,cookies,localStorage è¿™äº›éƒ½å¯ä»¥æ˜¾ç¤ºå‡ºæ¥ï¼Œéå¸¸çš„æ–¹ä¾¿ã€‚ç”¨æ³•ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚å¼•å…¥æ–‡ä»¶ï¼Œinitä¸‹å°±å¯ä»¥äº†ã€‚å¦‚æœè§‰å¾—å¼•å…¥äº†å¤šä½™çš„æ–‡ä»¶ï¼Œç”Ÿäº§ç¯å¢ƒå»æ‰å°±è¡Œã€‚ github åœ°å€æ˜¯ï¼š<a href="https://github.com/liriliri/eruda" target="_blank" rel="noopener">eruda</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"//cdn.jsdelivr.net/npm/eruda"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;eruda.init();<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="ç¼–è¯‘å’Œè§£é‡Šçš„åŒºåˆ«"><a href="#ç¼–è¯‘å’Œè§£é‡Šçš„åŒºåˆ«" class="headerlink" title="ç¼–è¯‘å’Œè§£é‡Šçš„åŒºåˆ«"></a>ç¼–è¯‘å’Œè§£é‡Šçš„åŒºåˆ«</h3><h4 id="ç¼–è¯‘å™¨"><a href="#ç¼–è¯‘å™¨" class="headerlink" title="ç¼–è¯‘å™¨"></a>ç¼–è¯‘å™¨</h4><blockquote>
<p>ç¼–è¯‘å™¨æ˜¯ä¸€ç§è®¡ç®—æœºç¨‹åºï¼Œè´Ÿè´£æŠŠä¸€ç§ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„æºç è½¬æ¢æˆå¦å¤–ä¸€ç§è®¡ç®—æœºä»£ç ï¼Œåè€…å¾€å¾€æ˜¯ä»¥äºŒè¿›åˆ¶çš„å½¢å¼è¢«ç§°ä¸ºç›®æ ‡ä»£ç (object code)ã€‚è¿™ä¸ªè½¬æ¢çš„è¿‡ç¨‹é€šå¸¸çš„ç›®çš„æ˜¯ç”Ÿæˆå¯æ‰§è¡Œçš„ç¨‹åºã€‚</p>
</blockquote>
<p>ç¼–è¯‘å™¨éœ€è¦äº§å‡ºå¦å¤–ä¸€ä¸ªä»£ç ã€‚ä»–å¾€å¾€æ˜¯æ‰§è¡Œå‰çš„ä¸€æ­¥ï¼Œäº§å‡ºå¯æ‰§è¡Œæˆ–è€…å†éœ€è¦ç¼–è¯‘çš„ä»£ç ã€‚</p>
<h4 id="è§£é‡Šå™¨"><a href="#è§£é‡Šå™¨" class="headerlink" title="è§£é‡Šå™¨"></a>è§£é‡Šå™¨</h4><blockquote>
<p>è§£é‡Šå™¨æ˜¯ä¸€ç§è®¡ç®—æœºç¨‹åºï¼Œå®ƒç›´æ¥æ‰§è¡Œç”±ç¼–ç¨‹è¯­è¨€æˆ–è„šæœ¬è¯­è¨€ç¼–å†™çš„ä»£ç ï¼Œå¹¶ä¸ä¼šæŠŠæºä»£ç é¢„ç¼–è¯‘æˆæœºå™¨ç ã€‚ä¸€ä¸ªè§£é‡Šå™¨ï¼Œé€šå¸¸ä¼šç”¨ä»¥ä¸‹çš„å§¿åŠ¿æ¥æ‰§è¡Œç¨‹åºä»£ç ï¼šåˆ†ææºä»£ç ï¼Œå¹¶ä¸”ç›´æ¥æ‰§è¡Œã€‚æŠŠæºä»£ç ç¿»è¯‘æˆç›¸å¯¹æ›´åŠ é«˜æ•ˆç‡çš„ä¸­é—´ç ï¼Œç„¶åç«‹å³æ‰§è¡Œå®ƒã€‚æ‰§è¡Œç”±è§£é‡Šå™¨å†…éƒ¨çš„ç¼–è¯‘å™¨é¢„ç¼–è¯‘åä¿å­˜çš„ä»£ç </p>
</blockquote>
<p>å¯ä»¥æŠŠè§£é‡Šå™¨çœ‹æˆä¸€ä¸ªé»‘ç›’å­ï¼Œæˆ‘ä»¬è¾“å…¥æºç ï¼Œå®ƒå°±ä¼šå®æ—¶è¿”å›ç»“æœã€‚</p>
<p>æ€»ç»“èµ·æ¥å¯ä»¥åƒä¸‹é¢è¿™æ ·ç†è§£ï¼š<br>ç¼–è¯‘ Compileï¼šæŠŠæ•´ä¸ªç¨‹åºæºä»£ç ç¿»è¯‘æˆå¦å¤–ä¸€ç§ä»£ç ï¼Œç„¶åç­‰å¾…è¢«æ‰§è¡Œï¼Œå‘ç”Ÿåœ¨è¿è¡Œä¹‹å‰ï¼Œäº§ç‰©æ˜¯ã€Œå¦ä¸€ä»½ä»£ç ã€ã€‚</p>
<p>è§£é‡Š Interpretï¼šæŠŠç¨‹åºæºä»£ç ä¸€è¡Œä¸€è¡Œçš„è¯»æ‡‚ç„¶åæ‰§è¡Œï¼Œå‘ç”Ÿåœ¨è¿è¡Œæ—¶ï¼Œäº§ç‰©æ˜¯ã€Œè¿è¡Œç»“æœã€ã€‚</p>
<p><a href="https://mp.weixin.qq.com/s/Z0uldTCJehk4SQR-98fvNA" target="_blank" rel="noopener"></a></p>
<hr>
<h3 id="Javascript-Style-Guide"><a href="#Javascript-Style-Guide" class="headerlink" title="Javascript Style Guide"></a>Javascript Style Guide</h3><p>æœ€è¿‘çœ‹åˆ°äº†ä¸€ä¸ªæˆ‘è§‰å¾—å¾ˆåˆç†çš„ Javascript çš„è§„èŒƒæŒ‡å—ã€‚ github åœ°å€æ˜¯ï¼š <a href="https://github.com/airbnb/javascript" target="_blank" rel="noopener">Airbnb Javascript Style Guide</a> å¯ä»¥åˆ©ç”¨ä»–çš„ eslint è§„èŒƒè‡ªå·±çš„ä»£ç ã€‚æˆ‘è§‰å¾—ä¸é”™ã€‚</p>
<hr>
<h3 id="Google-PageSpeed-Insights"><a href="#Google-PageSpeed-Insights" class="headerlink" title="Google PageSpeed Insights"></a>Google PageSpeed Insights</h3><p>æƒ³è¦å¿«é€Ÿæé«˜ç½‘ç«™çš„æ€§èƒ½ï¼Œç”¨è¿™ä¸ªç½‘ç«™éå¸¸å¥½ã€‚ä»–ä¼šç»™ä½ è¯¦ç»†çš„åˆ†æï¼Œæ ¹æ®ç½‘é¡µçš„ä»£ç è´¨é‡å¾—å‡ºæŠ¥å‘Šã€‚å¼€å‘è€…æ ¹æ®è¿™ä¸ªæŠ¥å‘Šï¼Œè¿›è¡Œè°ƒæ•´ã€‚é™¤äº†è¿™ä¸ªå¤–ï¼Œä½¿ç”¨ WebPagetest ä¹Ÿæ˜¯å¾ˆå¥½çš„ã€‚</p>
<hr>
<h3 id="ä»€ä¹ˆæ˜¯å…³é”®-CSS"><a href="#ä»€ä¹ˆæ˜¯å…³é”®-CSS" class="headerlink" title="ä»€ä¹ˆæ˜¯å…³é”® CSS"></a>ä»€ä¹ˆæ˜¯å…³é”® CSS</h3><p>å¯¹CSSæ–‡ä»¶çš„è¯·æ±‚å¯ä»¥æ˜¾è‘—å¢åŠ ç½‘é¡µå‘ˆç°æ‰€éœ€çš„æ—¶é—´ã€‚ åŸå› æ˜¯é»˜è®¤æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨å°†å»¶è¿Ÿé¡µé¢å‘ˆç°ï¼Œç›´åˆ°å®ƒå®ŒæˆåŠ è½½ã€è§£æå’Œæ‰§è¡Œæ‰€æœ‰åœ¨â€œé¡µé¢â€ä¸­å¼•ç”¨çš„CSSæ–‡ä»¶ã€‚ è¿™æ ·åšæ˜¯å› ä¸ºå®ƒéœ€è¦è®¡ç®—é¡µé¢çš„å¸ƒå±€ã€‚</p>
<p>ä¸å¹¸çš„æ˜¯ï¼Œè¿™æ„å‘³ç€å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªéå¸¸å¤§çš„CSSæ–‡ä»¶ï¼Œå¹¶ä¸”éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½å®Œæˆä¸‹è½½ï¼Œæˆ‘ä»¬çš„ç”¨æˆ·å°†åœ¨æµè§ˆå™¨å¼€å§‹å‘ˆç°é¡µé¢ä¹‹å‰ç­‰å¾…æ•´ä¸ªæ–‡ä»¶è¢«ä¸‹è½½ä¸‹æ¥ã€‚ å¹¸è¿çš„æ˜¯ï¼Œæœ‰ä¸€ä¸ªå·§å¦™çš„æŠ€æœ¯ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿä¼˜åŒ–æˆ‘ä»¬çš„CSSçš„ä¼ è¾“å¹¶å‡è½»é˜»å¡ã€‚è¿™ç§æŠ€æœ¯è¢«ç§°ä¸ºä¼˜åŒ–å…³é”®æ¸²æŸ“è·¯å¾„ã€‚å…³é”®æ¸²æŸ“è·¯å¾„è¡¨ç¤ºæµè§ˆå™¨å‘ˆç°é¡µé¢çš„æ‰€æœ‰å¿…é¡»æ­¥éª¤ã€‚ æˆ‘ä»¬æƒ³è¦æ‰¾åˆ°æœ€å°çš„é˜»å¡CSSé›†åˆ ï¼Œæˆ–è€…å…³é”® CSSï¼Œä»¥ä½¿é¡µé¢æ˜¾ç¤ºç»™ç”¨æˆ·ã€‚ å…³é”®èµ„æºæ˜¯å¯èƒ½é˜»å¡é¡µé¢é¦–å±å‘ˆç°çš„æ‰€æœ‰èµ„æºã€‚ è¿™èƒŒåçš„æƒ³æ³•æ˜¯ï¼Œç½‘ç«™åº”è¯¥åœ¨å‰å‡ ä¸ªTCPæ•°æ®åŒ…å“åº”ä¸­ä¸ºç”¨æˆ·è·å–ç¬¬ä¸€ä¸ªå±å¹•çš„å†…å®¹ï¼ˆæˆ–â€œé¦–å±â€å†…å®¹ï¼‰ã€‚</p>
<p>äººå·¥å»æ‰¾ å…³é”® CSSï¼Œå½“ç„¶ä¸å¤ªæ–¹ä¾¿ï¼Œç°åœ¨å‡ºæ¥äº†å¾ˆå¤šçš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æå–å‡ºå…³é”®CSSï¼Œ æ¯”å¦‚ grunt è¿™ç±»å·¥å…·æ¥æå–ã€‚åªæ˜¯å•çº¯çš„å¥½å¥‡ä»€ä¹ˆæ˜¯å…³é”® CSSï¼Œ ä½†æ˜¯æˆ‘å·²ç»å¥½ä¹…æ²¡æœ‰å†™è¿‡ CSS äº†ã€‚</p>
<hr>
<h3 id="è§£å†³ä¸ª-http-ç¼“å­˜çš„å›°æƒ‘"><a href="#è§£å†³ä¸ª-http-ç¼“å­˜çš„å›°æƒ‘" class="headerlink" title="è§£å†³ä¸ª http ç¼“å­˜çš„å›°æƒ‘"></a>è§£å†³ä¸ª http ç¼“å­˜çš„å›°æƒ‘</h3><p>è®¿é—®ç™¾åº¦é¦–é¡µçš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆåˆ·æ–°é¡µé¢åï¼Œé™æ€èµ„æºéƒ½æ˜¯è¿”å› 200ï¼Œ from cache? æœ‰çš„äººé—®ï¼Œfrom cache ä¸æ˜¯è¿”å› 304 æ‰åˆç†å—ï¼Ÿ</p>
<p>å…¶å®ä¸æ˜¯çš„ï¼Œç™¾åº¦é¦–é¡µå†èµ„æºåœ¨åˆ·æ–°åå®é™…æ²¡æœ‰å‘é€ä»»ä½•è¯·æ±‚ï¼Œ å› ä¸º caache-control çš„ç¼“å­˜æ—¶é—´è¿˜æ²¡åˆ°æœŸï¼Œä¹Ÿå°±æ˜¯åœ¨ chrome ä¸­æ ¹æœ¬æ²¡æœ‰å‘é€è¯·æ±‚ã€‚åªè¦æ˜¯ chrome æ²¡æœ‰å‘é€è¯·æ±‚ï¼Œèµ„æºä»æœ¬åœ°è¯»å–ï¼Œéƒ½ä¼šåœ¨ network ä¸­æ˜¾ç¤º çŠ¶æ€ä¸º 200ï¼Œ from cache, å…¶ä¸­çš„ response åªæ˜¯ä¸Šä¸€æ¬¡å›åŒ…ç•™ä¸‹çš„æ•°æ®ã€‚å¦‚æœ cache-control çš„ç¼“å­˜åˆ°æœŸäº†ï¼Œç„¶åå‘äº†è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œä½†æ˜¯æœåŠ¡å™¨é€šè¿‡ etag ç­‰ï¼Œå‘ç°èµ„æºæ²¡æ”¹å˜ï¼Œè¿™æ—¶å€™è‚¯å®šå°±æ˜¯è¿”å› 304 äº†ã€‚ä¸è¦è¢«ç»•é“å‘é‡Œäº†ã€‚</p>
<hr>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å¼€å§‹å·¥ä½œäº†ä»¥åï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯é›¶é›¶æ•£æ•£çš„å­¦ä¹ ã€‚æœ‰äº›ä¸œè¥¿æƒ³è¦ç³»ç»Ÿçš„å†™æˆåšå®¢ï¼Œä½†æ˜¯åŸºæœ¬ä¸Šä¸€ç¯‡ç²¾å¿ƒæƒ³å†™çš„æ–‡ç« ï¼Œè¦èŠ±è‡³å°‘3ä¸ªå°æ—¶ï¼Œæ—¶é—´ç•¥ä¸å¤Ÿã€‚æˆ‘ä¼šæƒ³åŠæ³•è§£å†³ã€‚æ¯”å¦‚ä¸Šé¢çš„åŒå‘ç»‘å®šï¼Œæƒ³ä»”ç»†çš„å†™ç¯‡æ–‡ç« è¯´è¯´é‡Œé¢çš„åŸç†ï¼Œå†æ¯”å¦‚ http ç¼“å­˜ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Hash-maps-without-side-effects&quot;&gt;&lt;a href=&quot;#Hash-maps-without-side-effects&quot; class=&quot;headerlink&quot; title=&quot;Hash maps without side effects&quot;&gt;
    
    </summary>
    
    
      <category term="javascript" scheme="http://sevencai.github.io/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>çºªå½•æœ€è¿‘é‡åˆ°çš„å‘</title>
    <link href="http://sevencai.github.io/2017/10/01/%E7%BA%AA%E5%BD%95%E6%9C%80%E8%BF%91%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91/"/>
    <id>http://sevencai.github.io/2017/10/01/çºªå½•æœ€è¿‘é‡åˆ°çš„å‘/</id>
    <published>2017-10-01T13:39:56.000Z</published>
    <updated>2017-10-01T13:41:45.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è®°å½•æœ€è¿‘é‡åˆ°çš„å‘"><a href="#è®°å½•æœ€è¿‘é‡åˆ°çš„å‘" class="headerlink" title="è®°å½•æœ€è¿‘é‡åˆ°çš„å‘"></a>è®°å½•æœ€è¿‘é‡åˆ°çš„å‘</h1><h3 id="ssi-æœªè¢«è§£æ"><a href="#ssi-æœªè¢«è§£æ" class="headerlink" title="ssi æœªè¢«è§£æ"></a>ssi æœªè¢«è§£æ</h3><p>ä»Šå¤©æ¥å…¥ ssi é…ç½®ï¼Œæœ¬ä»¥ä¸ºåªéœ€è¦ include åœ°å€æ­£ç¡®å°±è¡Œäº†ã€‚ç»“æœæ‰§è¡Œ gulp å‘½ä»¤åï¼Œç«Ÿç„¶ç”Ÿæˆçš„ dist é‡Œæ˜¾ç¤ºä¸å‡ºæ¥ ssi åœ°å€ã€‚æˆ‘ä»¥ä¸ºæ˜¯æˆ‘ virtual ç»å¯¹åœ°å€é”™è¯¯äº†ã€‚åæ¥æ¢æˆäº† file,è¿˜æ˜¯ä¸æ­£ç¡®ã€‚</p>
<p>æœ€ç»ˆå‘ç°æˆ‘åœ¨å‹ç¼© HTML çš„æ—¶å€™ï¼Œç”¨çš„ <code>gulp-minify-html</code> ç«Ÿç„¶æŠŠæˆ‘çš„ ssi å½“æˆæ³¨é‡Šç»™å»æ‰äº†ã€‚è§£å†³æ–¹æ³•æ˜¯ æŠŠè¿™ä¸ªæ’ä»¶æ¢æˆ <code>gulp-htmlmin</code>,è¿™ä¸ªè§£ææœºåˆ¶ä¼šç¨å¾®å¥½ä¸€äº›ï¼Œä¼šä¿ç•™æˆ‘çš„ ssi çš„å†…å®¹ã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--#include virtual="h5/test.js"--&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Mixed-Content"><a href="#Mixed-Content" class="headerlink" title="Mixed Content"></a>Mixed Content</h3><p>ä»Šå¤©åœ¨å…¬å¸åŠ ç­ï¼Œçªç„¶åŒäº‹è®©æˆ‘å¸®ä»–çœ‹ä¸ªé—®é¢˜ï¼Œ é¡µé¢ç‚¹å‡»æ²¡ååº”ã€‚æˆ‘çŒœæµ‹æ˜¯ JS æœªè¢«æ­£å¸¸åŠ è½½ï¼Œä¸€çœ‹æœç„¶æ˜¯ï¼š é¡µé¢æ˜¾ç¤º</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mixed Content: The page at was loaded over HTTPS, but requested an insecure script This request has been blocked; the content must be served over HTTPS.</span><br></pre></td></tr></table></figure>
<p>é”™è¯¯å°±ç›´ç™½çš„æ˜¾ç¤ºé¡µé¢æ˜¯ä»¥ https åŠ è½½çš„ï¼Œ ä½†æ˜¯å´è¯·æ±‚äº†ä¸€ä¸ªä¸å®‰å…¨çš„ script, è¿™ä¸ª script ä¸æ˜¯ https çš„ï¼Œè€Œæ˜¯ https çš„ã€‚å› æ­¤è¯·æ±‚è¢«æµè§ˆå™¨æ‹¦æˆªäº†ã€‚</p>
<p>è¿™ä¸ªé—®é¢˜æˆ‘ä»¥å‰æ˜¯çŸ¥é“çš„ï¼Œä½†æ˜¯è¿™æ¬¡æ‰çŸ¥é“è¿™ä¸ªç°è±¡åªå‡ºç°åœ¨ ios çš„æœºå™¨ä¸Šï¼Œ æŸäº› android å¯¹åº”çš„æµè§ˆå™¨ ä¸Šæ˜¯æ²¡é—®é¢˜çš„ã€‚å› æ­¤ä»”ç»†äº†è§£äº†ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œè®°å½•å¦‚ä¸‹ã€‚</p>
<h4 id="ä»€ä¹ˆæ˜¯æ··åˆå†…å®¹ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ··åˆå†…å®¹ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ··åˆå†…å®¹ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ··åˆå†…å®¹ï¼Ÿ</h4><blockquote>
<p>æ··åˆå†…å®¹åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å‡ºç°ï¼šåˆå§‹ HTML å†…å®¹é€šè¿‡å®‰å…¨çš„ HTTPS è¿æ¥åŠ è½½ï¼Œä½†å…¶ä»–èµ„æºï¼ˆä¾‹å¦‚ï¼Œå›¾åƒã€è§†é¢‘ã€æ ·å¼è¡¨ã€è„šæœ¬ï¼‰åˆ™é€šè¿‡ä¸å®‰å…¨çš„ HTTP è¿æ¥åŠ è½½ã€‚ä¹‹æ‰€ä»¥ç§°ä¸ºæ··åˆå†…å®¹ï¼Œæ˜¯å› ä¸ºåŒæ—¶åŠ è½½äº† HTTP å’Œ HTTPS å†…å®¹ä»¥æ˜¾ç¤ºåŒä¸€ä¸ªé¡µé¢ï¼Œä¸”é€šè¿‡ HTTPS åŠ è½½çš„åˆå§‹è¯·æ±‚æ˜¯å®‰å…¨çš„ã€‚ç°ä»£æµè§ˆå™¨ä¼šé’ˆå¯¹æ­¤ç±»å‹çš„å†…å®¹æ˜¾ç¤ºè­¦å‘Šï¼Œä»¥å‘ç”¨æˆ·è¡¨æ˜æ­¤é¡µé¢åŒ…å«ä¸å®‰å…¨çš„èµ„æºã€‚</p>
</blockquote>
<p>ä¹‹æ‰€ä»¥ç”¨ https å¾ˆæ¸…æ¥šï¼Œ https å¯ä»¥å¸®åŠ©æˆ‘ä»¬ï¼š</p>
<ol>
<li>èº«ä»½éªŒè¯ï¼Œ ä¸è¢«é‡å®šå‘</li>
<li>æ•°æ®å®Œæ•´æ€§ï¼Œä¸ä¼šæœ‰äººç¯¡æ”¹æ­£åœ¨å‘é€å’Œæ¥æ”¶çš„å†…å®¹</li>
<li>ä¿å¯†æ€§ï¼Œä¼šä½¿ç”¨ TLS æä¾›åŠ å¯†</li>
</ol>
<p>ä½†æ˜¯å¹¶ä¸æ˜¯æ¯ä¸ªç½‘ç«™çš„æ¯ä¸ªè®¿é—®è€…éƒ½ä¼šä½¿ç”¨æœ€æ–°çš„æµè§ˆå™¨ï¼Œå¹¶ä¸”ä¸åŒçš„æµè§ˆå™¨å•†çš„ä¸åŒç‰ˆæœ¬çš„æµè§ˆå™¨å¤„ç†æ··åˆå†…å®¹çš„æ–¹å¼ä¹Ÿä¸æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚</p>
<p>æ³¨æ„æ··åˆå†…å®¹ä¸ä»…ä»…åœ¨ https å¼•å…¥ http æ–‡ä»¶ä¸­ï¼Œåœ¨ https é¡µé¢é‡Œé€šè¿‡ ajax çš„å½¢å¼è¯·æ±‚ http èµ„æºï¼Œä¹Ÿæ˜¯ä¼šè¢« block æ‰çš„ã€‚</p>
<p>å¦‚æœä½ çš„é¡¹ç›®å¾ˆå¤§ï¼Œä¸€ä¸‹å­æ²¡åŠæ³•å…¨éƒ¨è½¬æ¢å®Œæˆï¼Œå°±å¯ä»¥ä½¿ç”¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv=<span class="string">"Content-Security-Policy"</span> content=<span class="string">"upgrade-insecure-requests"</span>&gt;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥åœ¨ç›¸åº”çš„é¡µé¢çš„<head>é‡ŒåŠ ä¸Šè¿™å¥ä»£ç ï¼Œ<code>upgrade-insecure-requests</code>  æ„æ€æ˜¯è‡ªåŠ¨å°†httpçš„ä¸å®‰å…¨è¯·æ±‚å‡çº§ä¸ºhttpsã€‚ </head></p>
<hr>
<h3 id="å¾®ä¿¡å¼€å‘å·¥å…·"><a href="#å¾®ä¿¡å¼€å‘å·¥å…·" class="headerlink" title="å¾®ä¿¡å¼€å‘å·¥å…·"></a>å¾®ä¿¡å¼€å‘å·¥å…·</h3><p>å¾®ä¿¡å¼€å‘å·¥å…·è‡ªä»æ›´æ–°äº†æ–°ç‰ˆæœ¬åï¼Œæˆ‘çœŸçš„è§‰å¾—å¥½éš¾ç”¨å•Šã€‚ã€‚ã€‚è¿™é‡Œè®°å½•ä¸€ä¸ªåˆšå¼€å§‹ä½¿ç”¨ å¾®ä¿¡å¼€å‘å·¥å…·å‘ç°æ— æ³•ä½¿ç”¨çš„æƒ…å†µã€‚æ˜¯å› ä¸ºä»–ä»¬å·¥å…·æœ‰ä¸ª bug, è‡ªåŠ¨æ²¡æœ‰è½¬æˆ httpsã€‚é‚£ä¸ªé”™è¯¯æ˜¯å¯ä»¥åœ¨å¾®ä¿¡å¼€å‘å·¥å…·çš„è¯·æ±‚ä¸­çœ‹åˆ°çš„ï¼Œæ˜¯ä¸ª debug è¯·æ±‚ã€‚è¦ç”¨ fiddler æˆ–è€… whistle é‡å®šå‘ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># å¾®ä¿¡å¼€å‘è€…å·¥å…·https whistle</span><br><span class="line">http:<span class="comment">//mp.weixin.qq.com https://mp.weixin.qq.com</span></span><br></pre></td></tr></table></figure>
<p>é¡ºä¾¿æä¸‹ï¼šwhistle æ˜¯ä¸ªå¾ˆå¥½çš„ä»£æ›¿ fiddler çš„å·¥å…·ï¼Œå› ä¸ºé…ç½®æ›´åŠ çµæ´»ï¼Œæ¯”å¦‚æ­£åˆ™é€šé…å•¥çš„ï¼Œè€Œä¸”ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ï¼Œè·¨å¹³å°ä½¿ç”¨ï¼Œå®Œå…¨æ²¡æœ‰éš”é˜‚ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;è®°å½•æœ€è¿‘é‡åˆ°çš„å‘&quot;&gt;&lt;a href=&quot;#è®°å½•æœ€è¿‘é‡åˆ°çš„å‘&quot; class=&quot;headerlink&quot; title=&quot;è®°å½•æœ€è¿‘é‡åˆ°çš„å‘&quot;&gt;&lt;/a&gt;è®°å½•æœ€è¿‘é‡åˆ°çš„å‘&lt;/h1&gt;&lt;h3 id=&quot;ssi-æœªè¢«è§£æ&quot;&gt;&lt;a href=&quot;#ssi-æœªè¢«è§£æ&quot; class=&quot;head
    
    </summary>
    
    
      <category term="javascripts" scheme="http://sevencai.github.io/tags/javascripts/"/>
    
  </entry>
  
  <entry>
    <title>çºªå½•å‡ ä¸ªç‚¹</title>
    <link href="http://sevencai.github.io/2017/08/24/%E7%BA%AA%E5%BD%95%E5%87%A0%E4%B8%AA%E7%82%B9/"/>
    <id>http://sevencai.github.io/2017/08/24/çºªå½•å‡ ä¸ªç‚¹/</id>
    <published>2017-08-24T08:24:32.000Z</published>
    <updated>2017-12-19T12:40:23.000Z</updated>
    
    <content type="html"><![CDATA[<hr>
<h3 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create()"></a>Object.create()</h3><p>åˆ›å»ºObjectçš„å®ä¾‹æœ‰ä¸‹é¢ä¸‰ç§æ–¹æ³•ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o1 = <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.prototype);</span><br><span class="line"><span class="keyword">var</span> o2 = <span class="keyword">new</span> <span class="built_in">Object</span>;</span><br><span class="line"><span class="keyword">var</span> o3 = &#123;&#125;;</span><br></pre></td></tr></table></figure></p>
<p>é€šè¿‡ï¼š<code>var o4 = Object.create(null);</code>å¯ä»¥åˆ›å»ºæ²¡æœ‰åŸå‹çš„Object,è¿™ä¸ªå¯¹è±¡ä¸èƒ½ä½¿ç”¨ <code>toString,valueOf</code>ç­‰å‡½æ•°ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªä»¥å¦ä¸€ä¸ªç©ºå¯¹è±¡ä¸ºåŸå‹,ä¸”æ‹¥æœ‰ä¸€ä¸ªå±æ€§pçš„å¯¹è±¡<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">o = <span class="built_in">Object</span>.create(&#123;&#125;, &#123; <span class="attr">p</span>: &#123; <span class="attr">value</span>: <span class="number">42</span> &#125; &#125;)</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="å­—ç¬¦ä¸²åˆ¤æ–­"><a href="#å­—ç¬¦ä¸²åˆ¤æ–­" class="headerlink" title="å­—ç¬¦ä¸²åˆ¤æ–­"></a>å­—ç¬¦ä¸²åˆ¤æ–­</h3><p>åœ¨æ¶‰åŠå…¶å®ƒè¿ç®—ç¬¦ï¼ˆè¯‘æ³¨ï¼šå¦‚ä¸‹é¢çš„å‡å·â€™-â€˜ï¼‰æ—¶ï¼ŒJavaScriptè¯­è¨€ä¸ä¼šæŠŠæ•°å­—å˜ä¸ºå­—ç¬¦ä¸²ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"37"</span> - <span class="number">7</span> <span class="comment">// 30</span></span><br><span class="line"><span class="string">"37"</span> + <span class="number">7</span> <span class="comment">// "377"</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="å•ç›®åŠ æ³•è¿ç®—ç¬¦"><a href="#å•ç›®åŠ æ³•è¿ç®—ç¬¦" class="headerlink" title="å•ç›®åŠ æ³•è¿ç®—ç¬¦"></a>å•ç›®åŠ æ³•è¿ç®—ç¬¦</h3><p>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å•ç›®åŠ æ³•è¿ç®—ç¬¦ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"1.1"</span> + <span class="string">"1.1"</span> = <span class="string">"1.11.1"</span></span><br><span class="line">(+<span class="string">"1.1"</span>) + (+<span class="string">"1.1"</span>) = <span class="number">2.2</span>   <span class="comment">// æ³¨ï¼šåŠ å…¥æ‹¬å·ä¸ºæ¸…æ¥šèµ·è§ï¼Œä¸æ˜¯å¿…éœ€çš„ã€‚</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="false-åˆ¤æ–­"><a href="#false-åˆ¤æ–­" class="headerlink" title="false åˆ¤æ–­"></a>false åˆ¤æ–­</h3><p>å½“ä¼ é€’ç»™æ¡ä»¶è¯­å¥æ—¶ï¼Œæ‰€æœ‰å…¶ä»–å€¼ï¼ŒåŒ…æ‹¬æ‰€æœ‰å¯¹è±¡ä¼šè¢«è®¡ç®—ä¸º true ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line"><span class="literal">null</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="literal">NaN</span></span><br><span class="line">ç©ºå­—ç¬¦ä¸² (<span class="string">""</span>)</span><br></pre></td></tr></table></figure></p>
<p>è¯·ä¸è¦æ··æ·†åŸå§‹çš„å¸ƒå°”å€¼trueå’Œfalse ä¸ å¸ƒå°”å¯¹è±¡çš„å€¼trueå’Œfalse.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">false</span>);</span><br><span class="line"><span class="keyword">if</span> (b) <span class="comment">// this condition evaluates to true</span></span><br><span class="line"><span class="keyword">if</span> (b == <span class="literal">true</span>) <span class="comment">// this condition evaluates to false</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="promise-catch-error"><a href="#promise-catch-error" class="headerlink" title="promise catch error"></a>promise catch error</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">imgLoad</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> request = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    request.open(<span class="string">'GET'</span>, url);</span><br><span class="line">    request.responseType = <span class="string">'blob'</span>;</span><br><span class="line">    request.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (request.status === <span class="number">200</span>) &#123;</span><br><span class="line">        resolve(request.response);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        reject(<span class="built_in">Error</span>(<span class="string">'Image didn\'t load successfully; error code:'</span></span><br><span class="line">                     + request.statusText));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    request.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      reject(<span class="built_in">Error</span>(<span class="string">'There was a network error.'</span>));</span><br><span class="line">    &#125;;</span><br><span class="line">    request.send();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="forâ€¦of-statement"><a href="#forâ€¦of-statement" class="headerlink" title="forâ€¦of statement"></a>forâ€¦of statement</h3><p>è¯¥æ–°ç‰¹æ€§å±äº ECMAScript 2015ï¼ˆES6ï¼‰è§„èŒƒï¼Œåœ¨ä½¿ç”¨æ—¶è¯·æ³¨æ„æµè§ˆå™¨å…¼å®¹æ€§ã€‚<br>ä¸‹é¢çš„è¿™ä¸ªä¾‹å­å±•ç¤ºäº† forâ€¦of å’Œ forâ€¦in ä¸¤ç§å¾ªç¯è¯­å¥ä¹‹é—´çš„åŒºåˆ«ã€‚ä¸ forâ€¦in å¾ªç¯éå†çš„ç»“æœæ˜¯æ•°ç»„å…ƒç´ çš„ä¸‹æ ‡ä¸åŒçš„æ˜¯ï¼Œ forâ€¦of éå†çš„ç»“æœæ˜¯å…ƒç´ çš„å€¼ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>];</span><br><span class="line">arr.foo = <span class="string">"hello"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> arr) &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(i); <span class="comment">// logs "0", "1", "2", "foo"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> arr) &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(i); <span class="comment">// logs "3", "5", "7" // æ³¨æ„è¿™é‡Œæ²¡æœ‰ hello</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="å‰©ä½™å‚æ•°-rest-parameters"><a href="#å‰©ä½™å‚æ•°-rest-parameters" class="headerlink" title="å‰©ä½™å‚æ•°(rest parameters)"></a>å‰©ä½™å‚æ•°(rest parameters)</h3><p>å‰©ä½™å‚æ•°è¯­æ³•å…è®¸å°†ä¸ç¡®å®šæ•°é‡çš„å‚æ•°è¡¨ç¤ºä¸ºæ•°ç»„ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨å‰©ä½™å‚æ•°æ”¶é›†ä»ç¬¬äºŒä¸ªåˆ°æœ€åå‚æ•°ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†è¿™ä¸ªæ•°ç»„çš„æ¯ä¸€ä¸ªæ•°ä¸ç¬¬ä¸€ä¸ªå‚æ•°ç›¸ä¹˜ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">multiply</span>(<span class="params">multiplier, ...theArgs</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> theArgs.map(<span class="function"><span class="params">x</span> =&gt;</span> multiplier * x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = multiply(<span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// [2, 4, 6]</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="åˆ—ä¸¾å¯¹è±¡å±æ€§"><a href="#åˆ—ä¸¾å¯¹è±¡å±æ€§" class="headerlink" title="åˆ—ä¸¾å¯¹è±¡å±æ€§"></a>åˆ—ä¸¾å¯¹è±¡å±æ€§</h3><p>ä» ECMAScript 5 å¼€å§‹ï¼Œæœ‰ä¸‰ç§åŸç”Ÿçš„æ–¹æ³•ç”¨äºåˆ—å‡ºæˆ–æšä¸¾å¯¹è±¡çš„å±æ€§ï¼š</p>
<p>1.<code>for...in</code> å¾ªç¯<br>è¯¥æ–¹æ³•ä¾æ¬¡è®¿é—®ä¸€ä¸ªå¯¹è±¡åŠå…¶åŸå‹é“¾ä¸­æ‰€æœ‰å¯æšä¸¾çš„å±æ€§ã€‚</p>
<p>2.<code>Object.keys(o)</code><br>è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ o è‡ªèº«åŒ…å«ï¼ˆä¸åŒ…æ‹¬åŸå‹ä¸­ï¼‰çš„æ‰€æœ‰å±æ€§çš„åç§°çš„æ•°ç»„ã€‚</p>
<p>3.<code>Object.getOwnPropertyNames(o)</code><br>è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…å«äº†å¯¹è±¡ o æ‰€æœ‰æ‹¥æœ‰çš„å±æ€§ï¼ˆæ— è®ºæ˜¯å¦å¯æšä¸¾ï¼‰çš„åç§°ã€‚</p>
<hr>
<h3 id="ä½¿ç”¨-defineProperty-ä¸ºå·²å­˜åœ¨çš„å¯¹è±¡å®šä¹‰-setter"><a href="#ä½¿ç”¨-defineProperty-ä¸ºå·²å­˜åœ¨çš„å¯¹è±¡å®šä¹‰-setter" class="headerlink" title="ä½¿ç”¨ defineProperty ä¸ºå·²å­˜åœ¨çš„å¯¹è±¡å®šä¹‰ setter"></a>ä½¿ç”¨ defineProperty ä¸ºå·²å­˜åœ¨çš„å¯¹è±¡å®šä¹‰ setter</h3><p>set  è¯­æ³•å°†å¯¹è±¡å±æ€§ç»‘å®šåˆ°è¦è°ƒç”¨çš„ä¸€ä¸ªå‡½æ•°ä¸Šï¼Œ <strong>å½“å°è¯•è®¾ç½®è¯¥å±æ€§æ—¶</strong>ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123; <span class="attr">a</span>:<span class="number">0</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperties(o, &#123;</span><br><span class="line">    <span class="string">"b"</span>: &#123; <span class="attr">get</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.a + <span class="number">1</span>; &#125; &#125;,</span><br><span class="line">    <span class="string">"c"</span>: &#123; <span class="attr">set</span>: <span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123; <span class="keyword">this</span>.a = x / <span class="number">2</span>; &#125; &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">o.c = <span class="number">10</span> <span class="comment">// Runs the setter, which assigns 10 / 2 (5) to the 'a' property</span></span><br><span class="line"><span class="built_in">console</span>.log(o.b) <span class="comment">// Runs the getter, which yields a + 1 or 6</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="ä½¿ç”¨definePropertyåœ¨å­˜åœ¨çš„å¯¹è±¡ä¸Šå®šä¹‰-getter"><a href="#ä½¿ç”¨definePropertyåœ¨å­˜åœ¨çš„å¯¹è±¡ä¸Šå®šä¹‰-getter" class="headerlink" title="ä½¿ç”¨definePropertyåœ¨å­˜åœ¨çš„å¯¹è±¡ä¸Šå®šä¹‰ getter"></a>ä½¿ç”¨definePropertyåœ¨å­˜åœ¨çš„å¯¹è±¡ä¸Šå®šä¹‰ getter</h3><p>get è¯­æ³•å°†ä¸€ä¸ªå¯¹è±¡å±æ€§ç»‘å®šåˆ°<strong>æŸ¥è¯¢è¯¥å±æ€§æ—¶</strong>å°†è¢«è°ƒç”¨çš„ä¸€ä¸ªå‡½æ•°ä¸Šã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123; <span class="attr">a</span>:<span class="number">0</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(o, <span class="string">"b"</span>, &#123; <span class="attr">get</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.a + <span class="number">1</span>; &#125; &#125;);</span><br><span class="line"><span class="built_in">console</span>.log(o.b) <span class="comment">// Runs the getter, which yields a + 1 (which is 1)</span></span><br></pre></td></tr></table></figure></p>
<p>defineProperty çš„ getter/setter æ–¹æ³•å°±æ˜¯ Vue åŒå‘ç»‘å®šçš„ä¸€éƒ¨åˆ†æœºåˆ¶ã€‚</p>
<hr>
<h3 id="åˆ¤æ–­æµè§ˆå™¨é«˜åº¦"><a href="#åˆ¤æ–­æµè§ˆå™¨é«˜åº¦" class="headerlink" title="åˆ¤æ–­æµè§ˆå™¨é«˜åº¦"></a>åˆ¤æ–­æµè§ˆå™¨é«˜åº¦</h3><p>æ³¨æ„ï¼Œnavigatorçš„ä¿¡æ¯å¯ä»¥å¾ˆå®¹æ˜“åœ°è¢«ç”¨æˆ·ä¿®æ”¹ï¼Œæ‰€ä»¥JavaScriptè¯»å–çš„å€¼ä¸ä¸€å®šæ˜¯æ­£ç¡®çš„ã€‚å¾ˆå¤šåˆå­¦è€…ä¸ºäº†é’ˆå¯¹ä¸åŒæµè§ˆå™¨ç¼–å†™ä¸åŒçš„ä»£ç ï¼Œå–œæ¬¢ç”¨ifåˆ¤æ–­æµè§ˆå™¨ç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> width;</span><br><span class="line"><span class="keyword">if</span> (getIEVersion(navigator.userAgent) &lt; <span class="number">9</span>) &#123;</span><br><span class="line">    width = <span class="built_in">document</span>.body.clientWidth;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    width = <span class="built_in">window</span>.innerWidth;</span><br><span class="line">&#125;</span><br><span class="line">ä½†è¿™æ ·æ—¢å¯èƒ½åˆ¤æ–­ä¸å‡†ç¡®ï¼Œä¹Ÿå¾ˆéš¾ç»´æŠ¤ä»£ç ã€‚æ­£ç¡®çš„æ–¹æ³•æ˜¯å……åˆ†åˆ©ç”¨JavaScriptå¯¹ä¸å­˜åœ¨å±æ€§è¿”å›<span class="literal">undefined</span>çš„ç‰¹æ€§ï¼Œç›´æ¥ç”¨çŸ­è·¯è¿ç®—ç¬¦||è®¡ç®—ï¼š</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> width = <span class="built_in">window</span>.innerWidth || <span class="built_in">document</span>.body.clientWidth;</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="å‡ ä¸ªé«˜åº¦"><a href="#å‡ ä¸ªé«˜åº¦" class="headerlink" title="å‡ ä¸ªé«˜åº¦"></a>å‡ ä¸ªé«˜åº¦</h3><p>1.windowå¯¹è±¡ä¸ä½†å……å½“å…¨å±€ä½œç”¨åŸŸï¼Œè€Œä¸”è¡¨ç¤ºæµè§ˆå™¨çª—å£ã€‚</p>
<p>2.windowå¯¹è±¡æœ‰innerWidthå’ŒinnerHeightå±æ€§ï¼Œå¯ä»¥è·å–æµè§ˆå™¨çª—å£çš„å†…éƒ¨å®½åº¦å’Œé«˜åº¦ã€‚å†…éƒ¨å®½é«˜æ˜¯æŒ‡é™¤å»èœå•æ ã€å·¥å…·æ ã€è¾¹æ¡†ç­‰å ä½å…ƒç´ åï¼Œç”¨äºæ˜¾ç¤ºç½‘é¡µçš„å‡€å®½é«˜ã€‚</p>
<p>3.outerWidthå’ŒouterHeightå±æ€§ï¼Œå¯ä»¥è·å–æµè§ˆå™¨çª—å£çš„æ•´ä¸ªå®½é«˜ã€‚</p>
<p>4.screenå¯¹è±¡è¡¨ç¤ºå±å¹•çš„ä¿¡æ¯ï¼Œå¸¸ç”¨çš„å±æ€§æœ‰ï¼šscreen.widthï¼šå±å¹•å®½åº¦ï¼Œä»¥åƒç´ ä¸ºå•ä½ï¼›screen.heightï¼šå±å¹•é«˜åº¦ï¼Œä»¥åƒç´ ä¸ºå•ä½ï¼›</p>
<hr>
<h3 id="location-å¯¹è±¡"><a href="#location-å¯¹è±¡" class="headerlink" title="location å¯¹è±¡"></a>location å¯¹è±¡</h3><p>locationå¯¹è±¡è¡¨ç¤ºå½“å‰é¡µé¢çš„URLä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå®Œæ•´çš„URLï¼š<br><code>http://www.example.com:8080/path/index.html?a=1&amp;b=2#TOP</code>å¯ä»¥ç”¨<code>location.href</code>è·å–ã€‚è¦è·å¾—URLå„ä¸ªéƒ¨åˆ†çš„å€¼ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">location.protocol; <span class="comment">// 'http'</span></span><br><span class="line">location.host; <span class="comment">// 'www.example.com'</span></span><br><span class="line">location.port; <span class="comment">// '8080'</span></span><br><span class="line">location.pathname; <span class="comment">// '/path/index.html'</span></span><br><span class="line">location.search; <span class="comment">// '?a=1&amp;b=2'</span></span><br><span class="line">location.hash; <span class="comment">// 'TOP'</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="DOM-å¯¹è±¡"><a href="#DOM-å¯¹è±¡" class="headerlink" title="DOM å¯¹è±¡"></a>DOM å¯¹è±¡</h3><p>ä½ç‰ˆæœ¬çš„IE&lt;8ä¸æ”¯æŒquerySelectorå’ŒquerySelectorAllã€‚IE8ä»…æœ‰é™æ”¯æŒã€‚</p>
<hr>
<h3 id="JSON-stringify"><a href="#JSON-stringify" class="headerlink" title="JSON.stringify"></a>JSON.stringify</h3><p>å“ˆå“ˆï¼Œ ä»Šå¤©æ‰çŸ¥é“ <code>JSON.stringify</code> æœ‰ç¬¬äºŒä¸ªå‚æ•°å’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œæ˜¯ä¸æ˜¯å¾ˆèœã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"å°æ˜"</span>,</span><br><span class="line">  <span class="string">"age"</span>: <span class="number">14</span>,</span><br><span class="line">  <span class="string">"skills"</span>: [</span><br><span class="line">    <span class="string">"JavaScript"</span>,</span><br><span class="line">    <span class="string">"Java"</span>,</span><br><span class="line">    <span class="string">"Python"</span>,</span><br><span class="line">    <span class="string">"Lisp"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼ å…¥æ•°ç»„ï¼Œç”¨äºç­›é€‰éœ€è¦å¾—åˆ°çš„keyå’Œvalueï¼Œä¼ å…¥key</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(obj, [<span class="string">"name"</span>, <span class="string">"skills"</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// =&gt; "&#123;"name":"å°æ˜","skills":["JavaScript","Java","Python","Lisp"]&#125;"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼ å…¥å‡½æ•°ï¼Œ ç”¨äºåœ¨åºåˆ—åŒ–ä¹‹å‰å¯¹æ¯å¯¹é”®å€¼è¿›è¡Œå¤„ç†</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">convert</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> value === <span class="string">"string"</span>) &#123;</span><br><span class="line">     <span class="keyword">return</span> value.toUpperCase();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(obj, convert);</span><br></pre></td></tr></table></figure>
<p>åŒæ ·ï¼Œ <code>JSON.parse</code> ä¹Ÿæœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥å¤„ç†å¾—åˆ°åçš„JSONä¸²ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.parse(obj, <span class="function"><span class="keyword">function</span> (<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(key === <span class="string">"name"</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> value + <span class="string">"å°æœ‹å‹"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h3><p>filter ä¸€èˆ¬å¯èƒ½æˆ‘ä»¬åªç”¨ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå…¶å®è¿˜æœ‰ç¬¬äºŒä¸ªï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>];</span><br><span class="line"><span class="keyword">var</span> r = arr.filter(<span class="function"><span class="keyword">function</span> (<span class="params">element, index, self</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(element); <span class="comment">// ä¾æ¬¡æ‰“å°'A', 'B', 'C'</span></span><br><span class="line">    <span class="built_in">console</span>.log(index); <span class="comment">// ä¾æ¬¡æ‰“å°0, 1, 2</span></span><br><span class="line">    <span class="built_in">console</span>.log(self); <span class="comment">// selfå°±æ˜¯å˜é‡arr</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>åˆ©ç”¨ filter å»é™¤é‡Œé¢æœªå®šä¹‰å…ƒç´ æˆ–è€…ç©ºå­—ç¬¦ä¸²ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'A'</span>, <span class="string">''</span>, <span class="literal">null</span>, <span class="literal">undefined</span>, <span class="string">'R'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> newArr = arr.filter(<span class="function"><span class="keyword">function</span> (<span class="params">ele</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ele &amp;&amp; ele.trim();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// =&gt; ["A", "R"]</span></span><br></pre></td></tr></table></figure></p>
<p>åˆ©ç”¨ filter å»é‡ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">'apple'</span>, <span class="string">'orange'</span>, <span class="string">'banana'</span>, <span class="string">'apple'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> r = fruits.filter(<span class="function"><span class="keyword">function</span> (<span class="params">ele, index, self</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> self.indexOf(ele) === index;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// =&gt; ["apple", "orange", "banana"]</span></span><br></pre></td></tr></table></figure></p>
<p>åˆ©ç”¨ filter å»é™¤å¶æ•°ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> r =  arr.filter(<span class="function"><span class="keyword">function</span> (<span class="params">ele</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ele % <span class="number">2</span> !== <span class="number">0</span>;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// =&gt; [1, 3, 5, 7]</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="åƒä¸‡ä¸è¦ç›´æ¥ç”¨-JS-é‡Œçš„-Sort"><a href="#åƒä¸‡ä¸è¦ç›´æ¥ç”¨-JS-é‡Œçš„-Sort" class="headerlink" title="åƒä¸‡ä¸è¦ç›´æ¥ç”¨ JS é‡Œçš„ Sort"></a>åƒä¸‡ä¸è¦ç›´æ¥ç”¨ JS é‡Œçš„ Sort</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çœ‹ä¸Šå»æ­£å¸¸çš„ç»“æœ:</span></span><br><span class="line">[<span class="string">'Google'</span>, <span class="string">'Apple'</span>, <span class="string">'Microsoft'</span>].sort(); <span class="comment">// ['Apple', 'Google', 'Microsoft'];</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// appleæ’åœ¨äº†æœ€å:</span></span><br><span class="line">[<span class="string">'Google'</span>, <span class="string">'apple'</span>, <span class="string">'Microsoft'</span>].sort(); <span class="comment">// ['Google', 'Microsoft", 'apple']</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ— æ³•ç†è§£çš„ç»“æœ:</span></span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="number">1</span>, <span class="number">2</span>].sort(); <span class="comment">// [1, 10, 2, 20]</span></span><br></pre></td></tr></table></figure>
<p>å­—ç¬¦ä¸²éƒ½æ˜¯æŒ‰ç…§ ASCII ç æ¥æ’åˆ—ï¼Œæ‰€ä»¥1,2 æ²¡é—®é¢˜ï¼Œåªæ˜¯å¹³å¸¸è¦æ³¨æ„è¿™ä¸ªåœ°æ–¹ã€‚åé¢ä¸€ä¸ªä¸€å®šè¦è®°ä½ Array.sort é»˜è®¤éƒ½ä¼šæŠŠå…ƒç´ è½¬æ¢ä¸º å­—ç¬¦ä¸²ï¼Œå†æ¥æ’åºã€‚æ‰€ä»¥è¿åŸºæœ¬çš„æ•°å­—æ’åºä»–éƒ½æ²¡åšå¥½ã€‚</p>
<p>ä½†æ˜¯ sort å¯ä»¥ä¼ å…¥ä¸€ä¸ª function ç”¨æ¥è‡ªå®šä¹‰æ’åºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»å°åˆ°å¤§</span></span><br><span class="line"><span class="keyword">var</span> r = arr.sort(<span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x &gt; y) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(x = y) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(x &lt; y) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// sort æ–¹æ³•ä¼šå¯¹åŸæ•°ç»„è¿›è¡Œä¿®æ”¹ï¼Œå¹¶ä¸”è¿”å›çš„ä¹Ÿæ˜¯ä¿®æ”¹åçš„æ•°ç»„</span></span><br><span class="line"><span class="comment">// arr =&gt;  [1, 2, 10, 20]</span></span><br><span class="line"><span class="comment">// r =&gt;  [1, 2, 10, 20]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> r = arr.sort(<span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x &lt; y) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(x = y) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(x &gt; y) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// arr =&gt; [20, 10, 2, 1]</span></span><br><span class="line"><span class="comment">// r =&gt; [20, 10, 2, 1]</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;
&lt;h3 id=&quot;Object-create&quot;&gt;&lt;a href=&quot;#Object-create&quot; class=&quot;headerlink&quot; title=&quot;Object.create()&quot;&gt;&lt;/a&gt;Object.create()&lt;/h3&gt;&lt;p&gt;åˆ›å»ºObjectçš„å®ä¾‹æœ‰ä¸‹é¢ä¸‰ç§æ–¹
    
    </summary>
    
    
      <category term="other" scheme="http://sevencai.github.io/tags/other/"/>
    
  </entry>
  
</feed>
