{"meta":{"title":"Seven's Blog","subtitle":"Share, Learn, Enjoy, Keep","description":"Sevençš„åšå®¢ï¼Œç”¨äºè®°å½•ç”Ÿæ´»å’ŒæŠ€æœ¯","author":"Seven Cai","url":"http://sevencai.github.io"},"pages":[{"title":"","date":"2019-03-06T09:08:52.000Z","updated":"2019-03-06T09:08:52.000Z","comments":true,"path":"about/index.html","permalink":"http://sevencai.github.io/about/index.html","excerpt":"","text":"ABOUT SEVENMy Name is Seven. ABOUT THE WEBSITEI use this blog to share what I learned and keep my daily mistakes. If you found some mistakes in these articles,please tell me about it. You can contact me by the ways below or leave messages through the comment column. Thank you very much. Iâ€™m so sorry that the photos of articles before 2017/11/15 were all missing , because â€¦ ABOUT THE ARTICLESDo not use these articles for commercial purposes. It will be better to keep the original link so you can keep up with the latest articles. CONTACTGMAIL: seven.cailidan@gmail.comWEIXIN: sevenCaiLiDan"},{"title":"categories","date":"2017-12-18T09:15:19.000Z","updated":"2017-12-18T09:18:33.000Z","comments":true,"path":"categories/index.html","permalink":"http://sevencai.github.io/categories/index.html","excerpt":"","text":""},{"title":"404","date":"2017-12-18T09:34:04.000Z","updated":"2017-12-19T12:01:56.000Z","comments":true,"path":"404/index.html","permalink":"http://sevencai.github.io/404/index.html","excerpt":"","text":""},{"title":"","date":"2017-12-13T11:36:32.000Z","updated":"2017-03-02T03:36:55.000Z","comments":true,"path":"project/index.html","permalink":"http://sevencai.github.io/project/index.html","excerpt":"","text":"DEMO &amp;&amp; PROJECTS NodejsèŠå¤©å®¤ä½¿ç”¨SocketIO,åˆ©ç”¨è¾ƒå°‘çš„ä»£ç å®ç°ç§èŠã€ç¾¤èŠã€æ˜¾ç¤ºç”¨æˆ·åˆ—è¡¨ã€ç”¨æˆ·è¿›å…¥é€€å‡ºèŠå¤©å®¤è®°å½•ç­‰åŠŸèƒ½ã€‚ åœ°å€ï¼šhttps://github.com/sevencai/node-chat åŸºäºhybridçš„ionicåº”ç”¨appä½¿ç”¨æ„Ÿå—æ˜¯ï¼Œå¯å¿«é€Ÿä¸Šæ‰‹ï¼Œä½†æ˜¯å‘å¤ªå¤šã€‚æœªæ¥hybridåº”è¯¥ä¼šç•¥äºReactNativeã€‚ é¡¹ç›®å†™äº2014ï¼Œå¤§äºŒã€‚ä»…é™äºå‚è€ƒä»£ç ï¼Œå› ä¸ºåˆ°ç›®å‰ä¸ºæ­¢ionicå·²ç»è¿­ä»£äº†å¾ˆå¤šæ¬¡ï¼Œè¿è¡Œå¯èƒ½æŠ¥é”™è¯¯ã€‚ åœ°å€ï¼šhttps://github.com/sevencai/ionic-hybrid Blog using Bootstrap14å¹´ä¸ºå­¦ä¹ bootstrap, åˆ©ç”¨bootstrapåšäº†ä¸€ä¸ªé™æ€åšå®¢ã€‚ å¯ä»¥ç»“åˆJava/PHP/.Netç­‰åç«¯è¯­è¨€åŠ¨æ€æ‹‰å»åå°æ•°æ®ä»è€Œæˆä¸ºä¸€ä¸ªæŠ€æœ¯ã€ç”Ÿæ´»åšå®¢ã€‚ åœ°å€ï¼šhttps://github.com/sevencai/Blog-using-Bootstrap CSS3 åŠ¨ç”»å­¦ä¹ è®°å½•é¡¹ç›®é¡¹ç›®åœ°å€ï¼šhttps://github.com/sevencai/css3-animation åŠ¨ç”»å°é¡¹ç›®åœ°å€ï¼š http://cailidan.cn/web/CSS3-practice-master/Adou-newSite/åœ°å€ï¼šhttp://cailidan.cn/web/CSS3-practice-master/box-shadow/index.htmlåœ°å€ï¼šhttp://cailidan.cn/web/CSS3-practice-master/dynamic_effect/1.htmlåœ°å€ï¼šhttp://cailidan.cn/web/CSS3-practice-master/dynamic_effect/2.htmlåœ°å€ï¼šhttp://cailidan.cn/web/CSS3-practice-master/dynamic_effect/3.htmlåœ°å€ï¼š http://cailidan.cn/web/CSS3-practice-master/Ghost%20Buttons/index.htmlåœ°å€ï¼šhttp://cailidan.cn/web/CSS3-practice-master/%E4%B8%83%E5%A4%95%E6%B8%B8%E6%88%8F/index.html å¤‡æ³¨1.ç”±äºå…¥å¸åä»£ç ä¸å¯å¤–æ³„ï¼Œä»¥ä¸Šæ˜¯æˆ‘å¤§ä¸‰ä¹‹å‰çš„å°DEMO 2.æ¢¦æƒ³å¸Œæœ›åƒ TJ Holowaychuk é‚£æ ·å†™å‡ºå¾ˆå¤šä¼˜ç§€çš„å¼€æºä»£ç ï¼Œç›®å‰è¿˜å·®å¾ˆè¿œï¼Œè¦ä¸€ç›´åŠªåŠ›ã€‚"},{"title":"tags","date":"2017-12-18T09:13:11.000Z","updated":"2017-12-19T11:45:08.000Z","comments":false,"path":"tags/index.html","permalink":"http://sevencai.github.io/tags/index.html","excerpt":"","text":""},{"title":"schedule","date":"2017-12-18T09:23:00.000Z","updated":"2017-12-18T09:23:16.000Z","comments":true,"path":"schedule/index.html","permalink":"http://sevencai.github.io/schedule/index.html","excerpt":"","text":""}],"posts":[{"title":"å…³äºå¾®ä¿¡å…å¯†æ”¯ä»˜çš„å‡ ä¸ªæ¦‚å¿µ","slug":"å…³äºå¾®ä¿¡å…å¯†æ”¯ä»˜çš„å‡ ä¸ªæ¦‚å¿µ","date":"2019-03-15T11:38:31.000Z","updated":"2019-03-18T03:21:02.000Z","comments":true,"path":"2019/03/15/å…³äºå¾®ä¿¡å…å¯†æ”¯ä»˜çš„å‡ ä¸ªæ¦‚å¿µ/","link":"","permalink":"http://sevencai.github.io/2019/03/15/å…³äºå¾®ä¿¡å…å¯†æ”¯ä»˜çš„å‡ ä¸ªæ¦‚å¿µ/","excerpt":"","text":"çº¯ç­¾çº¦æ”¯ä»˜ä¸­ç­¾çº¦æ”¯ä»˜åç­¾çº¦ç­¾çº¦åæ”¯ä»˜ï¼ˆè¿ç»­åŒ…æœˆï¼‰è‡ªåŠ¨ç»­è´¹ å¾®ä¿¡ä¸€å…±åªæä¾›ä¸¤ç§ç­¾çº¦æ–¹å¼ï¼š çº¯ç­¾çº¦å’Œæ”¯ä»˜ä¸­ç­¾çº¦ï¼Œæ–‡æ¡£åœ¨è¿™é‡Œã€‚ åé¢çš„å‡ ç§æ–¹å¼éƒ½ä¸æ˜¯å¾®ä¿¡çš„æ¦‚å¿µï¼Œè€Œæ˜¯å¤§å®¶åŒ…è£…å‡ºæ¥çš„æ¦‚å¿µã€‚ çº¯ç­¾çº¦çº¯ç­¾çº¦å¯ä»¥ç†è§£ä¸ºå§”æ‰˜æ‰£æ¬¾ï¼Œç”¨æˆ·ä¸€æ—¦åŒæ„ï¼Œä»¥åå•†å®¶å°±å¯ä»¥å…ç”¨æˆ·å¯†ç è¿›è¡Œæ‰£æ¬¾ã€‚è¿™ä¸ªè¿‡ç§°ä¸­ä¸ä¼šå‘ç”Ÿæ‰£æ¬¾è¡Œä¸ºï¼Œä»…ä»…æ˜¯ç­¾çº¦ï¼Œç­¾è®¢åè®®è€Œå·²ã€‚ æ”¯ä»˜ä¸­ç­¾çº¦æ”¯ä»˜ä¸­ç­¾çº¦æ˜¯å¾®ä¿¡æä¾›çš„å¦å¤–ä¸€ç§ç­¾çº¦ï¼Œå•†å®¶åœ¨ä¸‹è®¢å•æ—¶ï¼Œå¸¦ä¸Šç­¾çº¦çš„å‚æ•°ï¼Œå°±ä¼šåœ¨ä¸‹è®¢å•çš„è®¢å•é¡µå‡ºç°ä¸€ä¸ªæŒ‰é’®ï¼Œç”¨æˆ·å‹¾é€‰æ˜¯å¦ç­¾çº¦ã€‚è¿™ç§ç”¨æˆ·éœ€è¦ä¸»åŠ¨å‹¾é€‰åŒæ„ï¼Œè½¬æ¢ç‡åº•ã€‚è¿™ç§æƒ…å†µï¼Œç”¨æˆ·ä¸€æ—¦å‹¾ä¸Šäº†åŒæ„ï¼Œå°±ä¼šå³æ‰£æ¬¾ï¼Œä¹Ÿä¼šç­¾çº¦ã€‚ æ”¯ä»˜åç­¾çº¦æ”¯ä»˜åç­¾çº¦ï¼šæ˜¯ç”¨æˆ·å…ˆè¿›è¡Œä¸€ç¬”æ”¯ä»˜ï¼Œæ”¯ä»˜åå†æ‹‰èµ·ç­¾çº¦é¡µé¢ã€‚è¿™ç§æƒ…å†µè½¬æ¢ç‡æ›´ä½ï¼Œç”¨æˆ·éœ€è¦è¾“å…¥ä¸¤æ¬¡å¯†ç ï¼Œç¬¬ä¸€æ¬¡æ˜¯ä»˜æ¬¾çš„å¯†ç ï¼Œç¬¬äºŒæ¬¡æ˜¯ç­¾çº¦çš„å¯†ç ã€‚ä½“éªŒä¸å¥½ã€‚ ç­¾çº¦åæ”¯ä»˜ç­¾çº¦åæ”¯ä»˜ï¼šå…ˆæ‹‰èµ·ç­¾çº¦é¡µé¢ï¼Œç”¨æˆ·è¾“å…¥å¯†ç ï¼Œç„¶åç­¾çº¦åï¼Œç”±å•†å®¶è¿›è¡Œæ‰£æ¬¾ä¸€ç¬”ä»˜è´¹ã€‚è¿™ç§æƒ…å†µï¼Œç”¨æˆ·åªéœ€è¦è¾“å…¥å¯†ç ä¸€æ¬¡ï¼Œå¹¶ä¸”ä¸€å®šæ˜¯å…ˆç­¾çº¦è½¬æ¢ç‡é«˜ï¼Œå¹¶ä¸”ç”¨æˆ·ä¹Ÿä¼šæ”¯ä»˜ä¸€ç¬”ï¼Œå¤§å®¶æŠŠå®ƒåŒ…è£…æˆã€è¿ç»­åŒ…æœˆã€‘çš„æ¦‚å¿µã€‚ è¿™ç§è¿ç»­åŒ…æœˆå°±æ˜¯éœ€è¦å•†å®¶åœ¨ç”¨æˆ·ç­¾çº¦å®Œæˆåï¼Œç«‹åˆ»ä¸ºç”¨æˆ·ä¸‹ä¸€ç¬”å•ï¼Œç„¶åç”±äºç”¨æˆ·å·²ç»ç­¾çº¦ï¼Œæ‰€ä»¥ä¸éœ€è¦å†è¾“å¯†ç ã€‚è¿™æ—¶å€™ç”¨æˆ·å°±åˆç­¾çº¦åˆæ”¯ä»˜ã€‚æ¯”è¾ƒå®Œç¾ã€‚å•†å®¶éœ€è¦å¼€å‘åç»­å†ä¸‹å•çš„æµç¨‹ã€‚ è‡ªåŠ¨ç»­è´¹è‡ªåŠ¨ç»­è´¹å°±æ˜¯ä¸€ç§å¾ˆå®½æ³›çš„è¯´æ³•äº†ï¼Œå°±æ˜¯åˆ°æœŸäº†ï¼Œå•†å®¶å¸®åŠ©ç”¨æˆ·è¿›è¡Œè‡ªåŠ¨çš„æ‰£æ¬¾å¹¶ä¸”å»¶é•¿æœåŠ¡çš„è¯´æ³•ã€‚è‡ªåŠ¨ç»­è´¹çš„æ¸ é“æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚æ”¯ä»˜å®ï¼ŒQB, å¾®ä¿¡æ”¯ä»˜ç­‰æ¸ é“ã€‚è€Œè¿ç»­åŒ…æœˆå¯ä»¥è¯´æ˜¯å…¶ä¸­çš„ä¸€ç§ï¼Œå¯ä»¥ç†è§£ä¸ºæ˜¯å¾®ä¿¡çš„è‡ªåŠ¨ç»­è´¹ã€‚è‡ªåŠ¨ç»­è´¹æ¦‚å¿µæ¯”è¾ƒå¹¿æ³›ï¼Œè¿ç»­åŒ…æœˆæ˜¯å…¶ä¸­çš„ä¸€ç§å®ç°ã€‚","categories":[],"tags":[{"name":"æ¦‚å¿µ","slug":"æ¦‚å¿µ","permalink":"http://sevencai.github.io/tags/æ¦‚å¿µ/"}]},{"title":"è¯ä¹¦ã€å¯¹ç§°åŠ å¯†ã€éå¯¹ç§°åŠ å¯†","slug":"è¯ä¹¦ã€å¯¹ç§°åŠ å¯†ã€éå¯¹ç§°åŠ å¯†","date":"2019-03-14T09:16:48.000Z","updated":"2019-03-15T10:46:53.000Z","comments":true,"path":"2019/03/14/è¯ä¹¦ã€å¯¹ç§°åŠ å¯†ã€éå¯¹ç§°åŠ å¯†/","link":"","permalink":"http://sevencai.github.io/2019/03/14/è¯ä¹¦ã€å¯¹ç§°åŠ å¯†ã€éå¯¹ç§°åŠ å¯†/","excerpt":"","text":"æœ¬ç¯‡æ–‡ç« ä¸»è¦æ˜¯é’ˆå¯¹æˆ‘å¯¹è¯ä¹¦ï¼Œå¯¹ç§°åŠ å¯†ï¼Œéå¯¹ç§°åŠ å¯†ï¼ŒCAç­‰å†…å®¹çš„ç²—æµ…ç†è§£çš„è®°å½•ã€‚ä¸‹å›¾ä¸ºæˆ‘ç†è§£çš„å¤§è‡´æµç¨‹ã€‚æ–¹ä¾¿åç»­æŸ¥é˜…ã€‚ å‡ ä¸ªåŸºæœ¬æ¦‚å¿µ å¯†ç : å¯¹æ–‡æœ¬è¿›è¡Œç¼–ç ï¼Œä½¿å·çª¥è€…æ— æ³•è¯†åˆ«çš„ç®—æ³•ã€‚ å¯†é’¥: æ”¹å˜å¯†ç è¡Œä¸ºçš„æ•°å­—åŒ–å‚æ•°ã€‚ å¯¹ç§°å¯†é’¥åŠ å¯†ç³»ç»Ÿ: ç¼– / è§£ç ä½¿ç”¨ç›¸åŒå¯†é’¥çš„ç®—æ³•ã€‚ ä¸å¯¹ç§°å¯†é’¥åŠ å¯†ç³»ç»Ÿ: ç¼– / è§£ç ä½¿ç”¨ä¸åŒå¯†é’¥çš„ç®—æ³•ã€‚ å…¬å¼€å¯†é’¥åŠ å¯†ç³»ç»Ÿ: ä¸€ç§èƒ½å¤Ÿä½¿æ•°ç™¾ä¸‡è®¡ç®—æœºä¾¿æ·åœ°å‘é€æœºå¯†æŠ¥æ–‡çš„ç³»ç»Ÿã€‚ æ•°å­—ç­¾å: ç”¨æ¥éªŒè¯æŠ¥æ–‡æœªè¢«ä¼ªé€ æˆ–ç¯¡æ”¹çš„æ ¡éªŒå’Œã€‚ æ•°å­—è¯ä¹¦: ç”±ä¸€ä¸ªå¯ä¿¡çš„ç»„ç»‡éªŒè¯å’Œç­¾å‘çš„è¯†åˆ«ä¿¡æ¯ã€‚ ä¸€ä¸ªæ•´ä½“çš„äº¤äº’å›¾ CAåŠCAè¯ä¹¦CA å°±æ˜¯è®¤è¯æœºæ„,Certificate Authorityã€‚ CA è¯ä¹¦ï¼š å› ç‰¹ç½‘çš„IDå¡, é€šå¸¸è¢«ç§°ä¸º certsã€‚ å…¶ä¸­åŒ…å«äº†ç”±æŸä¸ªå—ä¿¡ä»»çš„ç»„ç»‡æ‹…ä¿çš„ç”¨æˆ·æˆ–è€…å…¬å¸çš„ç›¸å…³ä¿¡æ¯ã€‚ ä»»ä½•äººéƒ½å¯ä»¥åˆ›å»ºä¸€ä¸ªæ•°å­—è¯ä¹¦ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰äººéƒ½èƒ½å¤Ÿè·å¾—å—äººå°Šæ•¬çš„ç­¾å‘æƒï¼Œä»è€Œä¸ºè¯ä¹¦ä¿¡æ¯æ‹…ä¿ï¼Œå¹¶ç”¨å…¶ç§æœ‰å¯†é’¥ç­¾å‘è¯ä¹¦ã€‚ å°±åƒèº«ä»½è¯æ˜¯æƒå¨æœºæ„é¢å‘çš„ï¼Œèƒ½è¯æ˜ä½ çš„èº«ä»½ï¼Œä¸€èˆ¬å¤§å®¶éƒ½å¾ˆä¿¡ä»»ã€‚ä½†æ˜¯ä½ çš„åç‰‡å¡æ˜¯ä½ è‡ªå·±å¼„çš„ï¼Œæˆ–è€…å…¬å¸å‘çš„ï¼Œå¤§å®¶å¯èƒ½å°±çœ‹çœ‹ï¼Œä½†æ˜¯ä¸ä¸€å®šç›¸ä¿¡å°±æ˜¯çœŸçš„ã€‚ æ‰€ä»¥ä½ ä¿¡ç”¨è´·æ—¶ï¼Œç”¨èº«ä»½è¯å¤§å®¶è®¤å¯ï¼Œä½†æ˜¯ä½ ç”¨åç‰‡å¡è‚¯å®šä¸å¯ä»¥ï¼Œå³ä½¿ä½ åç‰‡å¡ä¸Šå†™çš„èŒä½æ˜¯ç»ç†ã€‚ è¯ä¹¦çš„ç»„æˆ â€œå¯¹è±¡çš„åç§°ï¼ˆäººã€æœåŠ¡å™¨ã€ç»„ç»‡ç­‰ï¼‰ï¼› è¿‡æœŸæ—¶é—´ï¼› è¯ä¹¦å‘å¸ƒè€…ï¼ˆç”±è°ä¸ºè¯ä¹¦æ‹…ä¿ï¼‰ï¼› æ¥è‡ªè¯ä¹¦å‘å¸ƒè€…çš„æ•°å­—ç­¾åï¼› å¯¹è±¡çš„å…¬å¼€å¯†é’¥ã€‚ æœåŠ¡å™¨è¯ä¹¦ Web ç«™ç‚¹çš„åç§°å’Œä¸»æœºåï¼› Web ç«™ç‚¹çš„å…¬å¼€å¯†é’¥ï¼› ç­¾åé¢å‘æœºæ„çš„åç§°ï¼› æ¥è‡ªç­¾åé¢å‘æœºæ„çš„ç­¾åã€‚ æ‰€ä»¥å½“æµè§ˆå™¨æ”¶åˆ°è¯ä¹¦åä¼šè¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœè¿™ä¸ªCAï¼ˆè®¤è¯æœºæ„ï¼‰æ˜¯ä¸ªå¾ˆæƒå¨çš„å…¬å…±å‰é¢æœºæ„ï¼Œæµè§ˆå™¨å°±å¯ä»¥å·²ç»çŸ¥é“å®ƒçš„ï¼ˆCAçš„ï¼‰å…¬å¼€å¯†é’¥äº†ã€‚å› ä¸ºæ­£ç‰ˆçš„æµè§ˆå™¨ä¼šé¢„å…ˆå®‰è£…å¾ˆå¤šç­¾åé¢å‘æœºæ„çš„è¯ä¹¦ã€‚æ³¨æ„æµè§ˆå™¨è¿™æ—¶å€™çŸ¥é“çš„å…¬å¼€å¯†é’¥æ˜¯CAè®¤è¯æœºæ„çš„å…¬å¼€å¯†é’¥ï¼Œè€Œä¸æ˜¯æœåŠ¡å™¨ç«¯çš„å…¬å¼€å¯†é’¥ï¼ŒæœåŠ¡å™¨ç«¯çš„å…¬å¼€å¯†é’¥æ˜¯é€šè¿‡CAçš„å…¬å¼€å¯†é’¥è§£å¯†å¾—åˆ°çš„ã€‚ ä¸Šé¢è¿™é‡Œä¸€å®šè¦ç†è§£æ¸…æ¥šï¼Œå†çœ‹ä¸‹é¢çš„æµç¨‹ä¼šæ¸…æ¥šå¾ˆå¤šã€‚ è¯ä¹¦=å…¬é’¥+ç”³è¯·è€…ä¸é¢å‘è€…ä¿¡æ¯+ç­¾åã€‚ è¯ä¹¦ä¼šé¢å‘ç»™æœåŠ¡å™¨ï¼Œæµè§ˆå™¨è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ä¼šç»™æµè§ˆå™¨è¯ä¹¦ï¼Œæµè§ˆå™¨é€šè¿‡ç­¾åå’Œæ—¶é—´ç­‰ï¼Œç”¨CAçš„å…¬é’¥åˆ¤æ–­è¯ä¹¦æ˜¯å¦æœ‰æ•ˆã€‚ æ•°å­—ç­¾åä¸Šé¢æåˆ°äº†è¯ä¹¦é‡Œé¢ä¼šåŒ…å«CAçš„ç­¾åã€‚è¿™ä¸ªç­¾åçš„æ„ä¹‰å’Œä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ â€œæ•°å­—ç­¾åæ˜¯é™„åŠ åœ¨æŠ¥æ–‡ä¸Šçš„ç‰¹æ®ŠåŠ å¯†æ ¡éªŒç ã€‚â€ç”¨äºæè¿°æ˜¯è°ç¼–å†™çš„æŠ¥æ–‡ï¼ŒåŒæ—¶è¯æ˜æŠ¥æ–‡æœªè¢«ç¯¡æ”¹è¿‡ã€‚è¿™ç§æŠ€æœ¯è¢«ç§°ä¸ºæ•°å­—ç­¾åï¼ˆdigital signingï¼‰ æ¯”å¦‚ä¸Šé¢CAè¯ä¹¦çš„ç­¾åï¼Œç›®çš„æ˜¯è¯æ˜CAè¯ä¹¦æ˜¯åˆæ³•çš„ï¼Œæ˜¯CAé¢å‘çš„ã€‚å¹¶ä¸”è¯ä¹¦æ²¡æœ‰è¢«ç¯¡æ”¹ã€‚ ç­¾åå°±åƒäººçš„ç­¾å­—ä¸€æ ·ã€‚ä½†æ˜¯æ¯”äººçš„ç­¾å­—æ›´å¥½çš„æ˜¯å¯ä»¥é€šè¿‡ç¨‹åºåˆ¤æ–­æ˜¯ä¸æ˜¯çœŸçš„æ˜¯ä½ ç­¾çš„å­—ã€‚ä¸‹é¢ä¸¾ä¾‹çœ‹çœ‹ä¸Šé¢çš„CAçš„ç­¾åæ˜¯æ€ä¹ˆç”Ÿæˆçš„ã€‚ CAå°†å˜é•¿æŠ¥æ–‡æå–ä¸ºå®šé•¿çš„æ‘˜è¦ CAå¯¹æ‘˜è¦åº”ç”¨äº†ä¸€ä¸ªç­¾åå‡½æ•°ï¼Œå‚æ•°ä¸ºCAçš„ç§é’¥ è®¡ç®—å‡ºç­¾ååCAå°†å…¶é™„åŠ åœ¨æŠ¥æ–‡çš„å°¾éƒ¨ï¼Œå¹¶ä¸”å°†æŠ¥æ–‡å’Œç­¾åä¸€èµ·å‘é€ç»™æœåŠ¡å™¨ ç„¶åå®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡å™¨æ—¶ï¼Œæ‹¿åˆ°äº†è¯ä¹¦ã€‚ç„¶åç”¨CAçš„å…¬é’¥è¿›è¡Œç­¾åå‡½æ•°çš„åå‡½æ•° å¾—åˆ°äº†æ˜æ–‡æ‘˜è¦ã€‚æ‹¿åˆ°æ‘˜è¦åå†ä¸çœŸå®å‘è¿‡æ¥çš„æ–‡æœ¬æ‘˜è¦åšå¯¹æ¯” è‹¥ä¸ä¸€è‡´ï¼Œåˆ™ç­¾åä¸é€šè¿‡ï¼Œè‹¥ä¸€è‡´ï¼Œåˆ™ä¿¡ä»»æ­¤è¯ä¹¦åŠè¯ä¹¦é‡Œé¢çš„æœåŠ¡å™¨çš„public key æ€ä¹ˆç”Ÿæˆè¯ä¹¦ æœåŠ¡å™¨æŠŠ public key åŠä¸€äº›å…¶ä»–é™„åŠ ä¿¡æ¯ç»™åˆ°CA CA ç”¨è‡ªå·±çš„ private key åŠ å¯†è¿™äº›æ•°æ®ï¼ŒåŠ å¯†å®Œçš„æ•°æ®ç§°ä¸ºæ•°å­—è¯ä¹¦ã€‚ ç„¶åæœåŠ¡å™¨è¿”å›è¯ä¹¦ç»™æµè§ˆå™¨æ—¶ï¼Œè¿”å›çš„æ˜¯ç”¨ CA çš„ private key åŠ å¯†åçš„å†…å®¹ã€‚æµè§ˆå™¨æ”¶åˆ°åï¼Œä¼šé€šè¿‡å·²çŸ¥çš„ CA çš„ public key è¿›è¡Œè§£å¯†ï¼Œæ¥è·å¾—åˆ° B çš„ public keyã€‚ è¿™ä¸ªå¾—åˆ°çš„ public key æ˜¯å—ä¿¡ä»»çš„å…¬é’¥keyã€‚ æ‰€ä»¥å¯ä»¥çŸ¥é“ç”Ÿæˆè¯ä¹¦çš„è¿™ä¸ªè¿‡ç§°å…¶å®ä¹Ÿæ˜¯éå¯¹ç§°åŠ å¯† æ³¨æ„ç”Ÿæˆè¯ä¹¦å’Œç­¾åçš„æ•´ä¸ªè¿‡ç¨‹ï¼ŒCAéƒ½æ˜¯ä¸éœ€è¦å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡ç«¯çš„ç§é’¥çš„ï¼Œç§é’¥è¦ç¡®ä¿åªèƒ½è‡ªå·±ä½¿ç”¨ã€‚CAä½¿ç”¨çš„ç§é’¥ä¹Ÿä»…ä»…æ˜¯è‡ªå·±çš„ç§é’¥ï¼Œç”¨äºç­¾åã€‚ è®¤è¯æµç¨‹æŠŠä¸Šé¢é‚£äº›æ¦‚å¿µç†è§£æ¸…æ¥šåï¼Œåé¢è¿™ä¸ªæµç¨‹å°±å¾ˆæ¸…æ™°äº†ã€‚ æœåŠ¡å™¨ç”³è¯·å‘ CA ç”³è¯·è¯ä¹¦ æµè§ˆå™¨é¦–æ¬¡å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œ æœåŠ¡å™¨è¿”å›è¯ä¹¦ç»™æµè§ˆå™¨ æµè§ˆå™¨æ‹¿åˆ°è¯ä¹¦ï¼Œé€šè¿‡ç­¾ååŠæ—¶é—´ç­‰ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰æ•ˆï¼Œæ˜¯å¦å¯ä¿¡ä»» è‹¥è¯ä¹¦æœ‰æ•ˆ å®¢æˆ·ç«¯ç”Ÿæˆéšæœºæ•°ï¼Œç„¶åç”¨è¯ä¹¦ä¸­çš„å…¬é’¥è¿›è¡ŒåŠ å¯†ï¼ŒåŠ å¯†åå‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ç”¨ç§é’¥è¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°éšæœºæ•°ã€‚ï¼ˆè¿™ä¸ªè¿‡ç¨‹æ˜¯éå¯¹ç§°åŠ å¯†ï¼‰ ä¹‹åæœåŠ¡å™¨å’Œæµè§ˆå™¨å°±ç”¨è¿™ä¸ªéšæœºæ•°åšä¸ºé’¥åŒ™ï¼Œå¯¹æ•°æ®è¿›è¡ŒåŠ å¯†è§£å¯†ã€‚ æ‰€ä»¥çŸ¥é“æ‹¿åˆ°è¯ä¹¦åï¼Œä½¿ç”¨éšæœºæ•°åçš„è¿‡ç§°ï¼Œåº”è¯¥æ˜¯å¯¹ç§°åŠ å¯†ã€‚ ä¸‹é¢è§£é‡Šä¸ºä»€ä¹ˆä¼šæœ‰è¯ä¹¦å’Œç­¾åè¿™äº›ä¸œè¥¿ã€‚è¯ä¹¦å’Œç­¾åéƒ½æ˜¯ä¸ºäº†ä¿è¯äº’è”ç½‘ä¼ è¾“ä¿¡æ¯å®‰å…¨ã€‚ å¯¹ç§°åŠ å¯†ä¸éå¯¹ç§°åŠ å¯†å¯¹ç§°å¯†é’¥åŠ å¯†æŠ€æœ¯çš„ç¼ºç‚¹ä¹‹ä¸€å°±æ˜¯å‘é€è€…å’Œæ¥æ”¶è€…åœ¨äº’ç›¸å¯¹è¯ä¹‹å‰ï¼Œä¸€å®šè¦æœ‰ä¸€ä¸ªå…±äº«çš„ä¿å¯†å¯†é’¥ã€‚ ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥ï¼Œå¸¦æ¥çš„é—®é¢˜å°±æ˜¯ï¼š å¯†é’¥ä»ç½‘ç»œä¼ è¾“æ˜¯ä¸å®‰å…¨çš„ã€‚ è‹¥ç½‘ç»œä¸­æœ‰Nä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆæ¯ä¸ªèŠ‚ç‚¹éƒ½è¦è·Ÿå…¶ä»–èŠ‚ç‚¹å»ºç«‹è”ç³»ï¼Œåˆ™ä¼šæœ‰N^2ä¸ªèŠ‚ç‚¹ã€‚ ä¸ºäº†è§£å†³ä¸Šé¢ä¸¤ä¸ªé—®é¢˜ï¼Œå‡ºç°äº†éå¯¹ç§°åŠ å¯†ï¼ˆâ€œå…¬å¼€å¯†é’¥åŠ å¯†æŠ€æœ¯â€ï¼‰ã€‚ èŠ‚ç‚¹Aå‘èŠ‚ç‚¹Bä¼ é€æ•°æ®ï¼ŒèŠ‚ç‚¹Aç”¨èŠ‚ç‚¹Bçš„å…¬é’¥åŠ å¯†ï¼ŒBæ”¶åˆ°åç”¨è‡ªå·±çš„ç§é’¥è§£å¯†ã€‚ éå¯¹ç§°åŠ å¯†å¯ä»¥ç†è§£æˆï¼Œä¸€ä¸ªèŠ‚ç‚¹æœ‰ä¸¤ä¸ªä¸œè¥¿ï¼šä¸€æŠŠé”ï¼Œä¸€ä¸ªé’¥åŒ™ã€‚é”å¯ä»¥ç»™ä»»ä½•äººï¼Œé’¥åŒ™èŠ‚ç‚¹è‡ªå·±ç•™ç”¨ã€‚æ‰€æœ‰çš„äººéƒ½å¯ä»¥å¸¦ç€é”è¿‡æ¥ï¼Œä½†æ˜¯åªæœ‰è‡ªå·±èƒ½çœ‹åˆ«äººå‘ç»™è‡ªå·±çš„ä¸œè¥¿ã€‚ æ‰€ä»¥éå¯¹ç§°åŠ å¯†è™½ç„¶è¾ƒå®‰å…¨ä¹Ÿä¼šå¸¦æ¥é—®é¢˜ï¼š æ•°æ®è¢«ç¯¡æ”¹ï¼Œå¯†é’¥è¢«æ‹¦æˆªã€‚ è€—æ—¶å¤šï¼ŒåŠ å¯†ä¸è§£å¯†é€Ÿåº¦æ…¢ã€‚ å‡è®¾Aå‘é€çš„æ•°æ®è¢«Cæ‹¦æˆªäº†ï¼ŒCç”¨Bçš„å…¬é’¥å’Œè‡ªå·±çš„æ•°æ®åŠ å¯†åä¼ªè£…æˆAå‘é€ç»™Bäº†ã€‚ Bä¹Ÿå¹¶ä¸çŸ¥é“è‡ªå·±æ¥å—åˆ°çš„æ•°æ®ä¸æ˜¯Açš„äº†ï¼Œè€Œæ˜¯Cçš„ã€‚ å› æ­¤å‡ºç°äº†æ•°å­—ç­¾åå’Œæ•°å­—è¯ä¹¦ã€‚ æ•°å­—ç­¾åä¿è¯äº†Bæ”¶åˆ°çš„ä¿¡æ¯å†…å®¹æ²¡æœ‰è¢«ç¯¡æ”¹(Aç”¨hashå¾—åˆ°Açš„æ‘˜è¦ï¼Œå†ç”¨è‡ªå·±çš„ç§é’¥è¿›è¡ŒåŠ å¯†ï¼Œå¾—åˆ°ç­¾åï¼ŒBæ”¶åˆ°åç”¨Açš„å…¬é’¥è§£å¯†ï¼Œå¾—åˆ°æ‘˜è¦å’Œæ”¶åˆ°çš„å†…å®¹æ¯”å¯¹) ä½†æ˜¯è¿™å¹¶ä¸èƒ½ä¿è¯å†…å®¹ä¸€å®šæ²¡æœ‰è¢«Cæ‹¦æˆªã€‚ å› ä¸ºååçš„Cå¯ä»¥æŠŠBä¿å­˜çš„Açš„å…¬é’¥æ›¿æ¢æˆè‡ªå·±çš„å…¬é’¥ã€‚ç„¶åå†’ç”¨Aç»™Bå‘é€ä¿¡æ¯ã€‚Cæ‹¦æˆªAçš„ä¿¡æ¯ï¼Œç„¶åè‡ªå·±å‘é€ä¿¡æ¯ç»™Bï¼Œç”¨Bçš„å…¬é’¥åŠ å¯†ï¼Œç„¶åBç”¨è‡ªå·±çš„ç§é’¥è§£å¯†ã€‚ï¼ˆå¦‚ä¸Šå›¾ï¼‰ æ‰€ä»¥å‡ºç°äº†è¯ä¹¦ã€‚è¯ä¹¦çš„ç›®çš„å°±æ˜¯ä¿è¯äº†æ•°æ®ä¸è¢«ç¯¡æ”¹ï¼Œå¹¶ä¸”ä¿è¯Bå¤„Açš„å…¬é’¥å°±æ˜¯Açš„å…¬é’¥ã€‚ å…¸å‹çš„å¯¹ç§°åŠ å¯†ç®—æ³•ï¼š AES,DES,Trible DESå…¸å‹çš„éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼š RSA httpså’ŒTSL&amp;SSLçš„å…³ç³»httpsæ˜¯åŸºäº TSL åŠ SSL å®ç°çš„ã€‚TSL å’Œ SSL ä¸»è¦ä¾èµ–ä¸‹é¢è¿™å‡ ç§ç®—æ³• æ•£åˆ—å‡½æ•° Hash: åŸºäºæ•£åˆ—å‡½æ•°éªŒè¯ä¿¡æ¯çš„å®Œæ•´æ€§ å¯¹ç§°åŠ å¯†: å¯¹ç§°åŠ å¯†ç®—æ³•é‡‡ç”¨åå•†çš„å¯†é’¥å¯¹æ•°æ®åŠ å¯† éå¯¹ç§°åŠ å¯†: éå¯¹ç§°åŠ å¯†å®ç°èº«ä»½è®¤è¯å’Œå¯†é’¥åå•† ä¹Ÿå°±æ˜¯è¯´ï¼šTSL å…¶å®å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†éƒ½ç”¨åˆ°äº†ã€‚å…ˆç”¨éå¯¹ç§°åŠ å¯†è·å¾—å¯¹åº”çš„å¯†é’¥ã€‚å†ç”¨æ”¹å¯†é’¥è¿›è¡Œå¯¹ç§°åŠ å¯†ä¼ è¾“ã€‚è¿™åœ¨æˆ‘ä»¬ä¸Šé¢çš„è®¤è¯è¿‡ç¨‹ä¸­æœ‰ä½“ç°ã€‚ ä¹‹æ‰€ä»¥åé¢è·å¾—å¯†é’¥åï¼Œå°±ç”¨å¯¹ç§°åŠ å¯†ï¼Œä¸»è¦æ˜¯è§£å†³æ—¶é—´éå¯¹ç§°åŠ å¯†å¤ªæ¶ˆè€—æ—¶é—´å’Œæ€§èƒ½çš„é—®é¢˜ã€‚ æ ‡æ³¨ï¼šä¸Šé¢çš„å›¾ç‰‡æ¥æºäºTLS è¯¦è§£ä¸€æ–‡ã€‚æ›´å¤šçš„ SSL æ¡æ‰‹ç­‰ç»†èŠ‚ï¼Œæˆ‘ä¸å…³æ³¨ã€‚ æ€»ç»“å…¶å®æˆ‘æœ¬æ¥æ˜¯é‡åˆ°äº†ä¸€ä¸ªhttpsçš„é—®é¢˜, ç„¶åå»äº†è§£äº† tsl å’Œ sslï¼Œ ç„¶ååˆå»äº†è§£äº†éå¯¹ç§°åŠ å¯†å’Œå¯¹ç§°åŠ å¯†ã€‚ç„¶ååˆå»äº†è§£äº†è¯ä¹¦å’ŒCAã€‚ å…¶å®æˆ‘æ˜¯é‡åˆ°é—®é¢˜çš„æ—¶å€™ï¼Œå‘ç°è¿™äº›ä¸œè¥¿éƒ½çŸ¥é“ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ç³»ç»Ÿï¼Œæ²¡æ³•å¾ˆå¥½çš„å…³è”åˆ°ä¸€èµ·ï¼Œå› æ­¤å¾—å»æ€»ç»“äº†ã€‚ è¿™å‡ å¤©æ™šä¸Šå·¥ä½œæå®Œäº†ï¼Œéƒ½èŠ±äº†ä¸€ä¸ªå°æ—¶å»æ€»ç»“è¿™ä¸ªã€‚è¿˜å¥½æ˜¯å±¡æ¸…æ¥šï¼Œæœ‰æ”¶è´§äº†ï¼Œä»¥åå¿˜è®°å†çœ‹è¿™ç¯‡æ–‡ç« å›å¿†åº”è¯¥å¾ˆå¿«ã€‚ ä¸Šæ–‡æœ‰éƒ¨åˆ†æ¦‚å¿µæ€§æ–‡æ¡ˆ - æ‘˜å½•æ¥è‡ª: [ç¾]David Gourley Brian Totty Marjorie Sayer Sailu Reddy Aushu Aggarwal. â€œHTTPæƒå¨æŒ‡å— (å›¾çµç¨‹åºè®¾è®¡ä¸›ä¹¦)â€ã€‚ iBooks.","categories":[],"tags":[{"name":"http","slug":"http","permalink":"http://sevencai.github.io/tags/http/"}]},{"title":"ç®€å•åˆ†æbabelå’Œwebpackç¼–è¯‘åçš„æ–‡ä»¶","slug":"ç®€å•åˆ†æbabelå’Œwebpackç¼–è¯‘åçš„æ–‡ä»¶","date":"2019-03-06T08:47:27.000Z","updated":"2019-03-06T09:06:24.000Z","comments":true,"path":"2019/03/06/ç®€å•åˆ†æbabelå’Œwebpackç¼–è¯‘åçš„æ–‡ä»¶/","link":"","permalink":"http://sevencai.github.io/2019/03/06/ç®€å•åˆ†æbabelå’Œwebpackç¼–è¯‘åçš„æ–‡ä»¶/","excerpt":"","text":"babel6 æˆ– babel7 åï¼Œå¯ä»¥ä½¿ç”¨babel-plugin-add-module-exportsæ’ä»¶ï¼Œè§£å†³ require(xxx).default å¸¦ default çš„é—®é¢˜ã€‚ webpack ç›´æ¥è¢«ç¼–è¯‘åçš„ es5 jsæ–‡ä»¶æ˜¯æ²¡æ³•ç›´æ¥è¢«importçš„ï¼Œè¢«importåä¼šå¾—åˆ°ç©ºçš„å¯¹è±¡, å¦‚æœè¦ç›´æ¥å¼•ç”¨è¿™ä¸ªæ–‡ä»¶ï¼Œéœ€è¦è®¾ç½®libraryTarget: &#39;xxx&#39;ã€‚ å†™äº†å°demo,äº†è§£äº†ä¸‹babelç¼–è¯‘åçš„æ–‡ä»¶å’Œwebpackç¼–è¯‘åçš„æ–‡ä»¶ã€‚ demoä¾‹å­ä¸‹é¢æ˜¯åˆ†æ babel,webpack ç¼–è¯‘åæ–‡ä»¶çš„å°ä¾‹å­ã€‚åé¢çš„å†…å®¹åŸºäºæ­¤demoåˆ†æã€‚12345678910export default class Test &#123; constructor() &#123; &#125; a() &#123; alert('b') console.log('a') &#125; &#125; åˆ†æbabel7ç¼–è¯‘åçš„æ–‡ä»¶ä¸‹é¢æ˜¯å¯¹ä¸Šé¢çš„ demo è¿›è¡Œ babel ç¼–è¯‘åçš„æ–‡ä»¶åšäº†ä¸€ä¸ªç®€å•çš„åˆ†æï¼Œçœ‹ä¸‹ä»–ä»¬åšäº†ä»€ä¹ˆäº‹æƒ…ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546'use strict';Object.defineProperty(exports, \"__esModule\", &#123; value: true&#125;);var _createClass = (function() &#123; function defineProperties(target, props) &#123; for (var i = 0; i &lt; props.length; i++) &#123; var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); &#125; &#125; return function(Constructor, protoProps, staticProps) &#123; if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; &#125;;&#125;)();function _classCallCheck(instance, Constructor) &#123; if (!(instance instanceof Constructor)) &#123; throw new TypeError(\"Cannot call a class as a function\"); &#125;&#125;var Test = function () &#123; function Test() &#123; _classCallCheck(this, Test); &#125; _createClass(Test, [&#123; key: 'a', value: function a() &#123; alert('b'); console.log('a'); &#125; &#125;]); return Test;&#125;();exports.default = Test; ä»ä¸‹é¢çš„ Test å¼€å§‹çœ‹ï¼Œå®šä¹‰äº†ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•° Test, Test å†…éƒ¨è°ƒç”¨äº† _classCallCheck, è¿™ä¸ªä¿è¯äº† ES æ¨¡å—ï¼Œåªèƒ½é€šè¿‡ new æ¥è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯ 1234// æ­£ç¡®let t = new Test()// é”™è¯¯let t = Test() åé¢åˆæ‰§è¡Œäº† _createClassæ–¹æ³•ï¼ŒæŠŠå‡½æ•°çš„æ–¹æ³•ä»¥ key, value çš„å½¢å¼ä¼ ç»™ å‡½æ•°ä½“ï¼Œç„¶åå‡½æ•°å†…åˆ©ç”¨ definePropertyæ–¹æ³•ï¼Œç»™Testæ·»åŠ å±æ€§ã€‚ä½¿ç”¨ definePropertyçš„æ—¶å€™ï¼Œå®šä¹‰äº†enumerable,configurable,writableçš„å€¼ã€‚æ³¨æ„ static çš„æ–¹æ³•ï¼Œä¸èƒ½è¢«ç»§æ‰¿ï¼Œåªèƒ½ç”¨ç±»åæ¥è°ƒç”¨ï¼Œåº”è¯¥å†™åœ¨ constructor è€Œä¸æ˜¯ constructor.prototype ä¸Šã€‚ æœ€åç›´æ¥æš´éœ²å‡ºäº† default æ–¹æ³•ã€‚exports.default = Test; å¦‚æœæˆ‘ä»¬ç›´æ¥è¿™ä¹ˆä½¿ç”¨çš„è¯ï¼Œè°ƒç”¨ Test æ–¹æ³•æ—¶å°±éœ€è¦è¿™ä¹ˆä½¿ç”¨require(&#39;xxx&#39;).defaultï¼Œè¿™å½“ç„¶ä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„ã€‚ æ‰€ä»¥å¯ä»¥åˆ©ç”¨æ’ä»¶babel-plugin-add-module-exportså°†exports.default = Testè½¬æ¢ä¸ºmodule.exports = exports.default æˆ–è€… export { _default as default }; (è¿™ä¸ªåœ¨babel6,babel7ä¹‹å‰æ˜¯ä¸éœ€è¦çš„ã€‚å¦‚æœä½ ä½¿ç”¨ babel6 or babel7 ä½ å¯ä»¥ä¼šä½¿ç”¨è¿™ä¸ªæ’ä»¶)ã€‚ babel é…ç½®ä¸º12345678910&#123; \"presets\": [ [\"@babel/preset-env\", &#123; \"modules\": false &#125;] ], \"plugins\": [ \"add-module-exports\" ] &#125; è‡³äºæ˜¯è½¬æ¢æˆ module.exports = exports.default è¿˜æ˜¯ export { _default as default }; å–å†³ä¸æœ‰æ²¡æœ‰è®¾ç½® module:falseã€‚ è‹¥è®¾ç½®äº† module:false ï¼Œbabelä¸ä¼šè¿›è¡Œè½¬æ¢ es6 çš„ import, export ç­‰ã€‚äº¤ç»™åé¢çš„webpackæ¥å¤„ç†ã€‚æ‰€ä»¥ä¼šè½¬æ¢æˆ { _default as default };ã€‚ è‹¥æ²¡æœ‰è®¾ç½®åˆ™ï¼Œbabelä¼šè½¬æˆ module.exports = exports.default, å› ä¸ºä¼šè®¤ä¸ºä½ è¦çš„æ˜¯çº¯çš„ ES5 è¯­æ³•ã€‚ æ³¨æ„babelï¼Œæœ‰ loose: true, loose: false ä¸¤ç§æ¨¡å¼ï¼Œåˆ†åˆ«è¡¨æ˜äº†ä½ æ˜¯è¦ç”¨ä¸Šé¢é‚£ç§ _createClass çš„å½¢å¼ç”Ÿæˆç¼–è¯‘æ–‡ä»¶ï¼Œè¿˜æ˜¯ä½¿ç”¨ Test.prototype.xxx è¿™ç§ç»§æ‰¿çš„æ¨¡å¼æ¥ç”Ÿæˆæ–‡ä»¶ã€‚å»ºè®®æ˜¯ä¸è¦ä½¿ç”¨ ä¸ä¸¥æ ¼æ¨¡å¼ã€‚ åˆ†æ webpack ç¼–è¯‘åçš„æ–‡ä»¶ä¸‹é¢æ˜¯åŒæ ·ä¸€ä¸ª demo è¢«webpackç¼–è¯‘åçš„å†…å®¹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130(function(modules) &#123; var installedModules = &#123;&#125;; function __webpack_require__(moduleId) &#123; if (installedModules[moduleId]) &#123; return installedModules[moduleId].exports; &#125; var module = (installedModules[moduleId] = &#123; i: moduleId, l: false, exports: &#123;&#125; &#125;); modules[moduleId].call( module.exports, module, module.exports, __webpack_require__ ); module.l = true; return module.exports; &#125; __webpack_require__.m = modules; __webpack_require__.c = installedModules; __webpack_require__.d = function(exports, name, getter) &#123; if (!__webpack_require__.o(exports, name)) &#123; Object.defineProperty(exports, name, &#123; enumerable: true, get: getter &#125;); &#125; &#125;; __webpack_require__.r = function(exports) &#123; if (typeof Symbol !== \"undefined\" &amp;&amp; Symbol.toStringTag) &#123; Object.defineProperty(exports, Symbol.toStringTag, &#123; value: \"Module\" &#125;); &#125; Object.defineProperty(exports, \"__esModule\", &#123; value: true &#125;); &#125;; __webpack_require__.t = function(value, mode) &#123; if (mode &amp; 1) value = __webpack_require__(value); if (mode &amp; 8) return value; if (mode &amp; 4 &amp;&amp; typeof value === \"object\" &amp;&amp; value &amp;&amp; value.__esModule) return value; var ns = Object.create(null); __webpack_require__.r(ns); Object.defineProperty(ns, \"default\", &#123; enumerable: true, value: value &#125;); if (mode &amp; 2 &amp;&amp; typeof value != \"string\") for (var key in value) __webpack_require__.d( ns, key, function(key) &#123; return value[key]; &#125;.bind(null, key) ); return ns; &#125;; __webpack_require__.n = function(module) &#123; var getter = module &amp;&amp; module.__esModule ? function getDefault() &#123; return module[\"default\"]; &#125; : function getModuleExports() &#123; return module; &#125;; __webpack_require__.d(getter, \"a\", getter); return getter; &#125;; __webpack_require__.o = function(object, property) &#123; return Object.prototype.hasOwnProperty.call(object, property); &#125;; __webpack_require__.p = \"\"; return __webpack_require__((__webpack_require__.s = \"./class1.mjs\"));&#125;)(&#123; \"./class1.mjs\": function( __webpack_module__, __webpack_exports__, __webpack_require__ ) &#123; \"use strict\"; __webpack_require__.r(__webpack_exports__); __webpack_require__.d(__webpack_exports__, \"default\", function() &#123; return Test; &#125;); function _classCallCheck(instance, Constructor) &#123; if (!(instance instanceof Constructor)) &#123; throw new TypeError(\"Cannot call a class as a function\"); &#125; &#125; function _defineProperties(target, props) &#123; for (var i = 0; i &lt; props.length; i++) &#123; var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); &#125; &#125; function _createClass(Constructor, protoProps, staticProps) &#123; if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; &#125; var Test = (function() &#123; function Test() &#123; _classCallCheck(this, Test); &#125; _createClass(Test, [ &#123; key: \"a\", value: function a() &#123; alert(\"b\"); console.log(\"a\"); &#125; &#125; ]); return Test; &#125;)(); &#125;&#125;); å¯ä»¥çœ‹åˆ°æ˜¾ç¤ºæºæ–‡ä»¶è¢«ç¼–è¯‘åè·Ÿä¸Šé¢çš„babelæ²¡æœ‰åŒºåˆ«ã€‚è¢«ç¼–è¯‘åçš„å†…å®¹ä½œä¸ºå‚æ•°moduleså¸¦åˆ°äº†ç«‹å³æ‰§è¡Œå‡½æ•°é‡Œã€‚æ‰§è¡Œ 1return __webpack_require__(__webpack_require__.s = &quot;./class1.mjs&quot;); webpack çš„æ ¸å¿ƒï¼Œå°±æ˜¯__webpack_require è¿™ä¸ªå‡½æ•°åšäº†ä»€ä¹ˆäº‹æƒ…ã€‚ æ£€æŸ¥æ˜¯å¦æ¨¡å—å·²ç»ç¼“å­˜ï¼Œå¦‚æœå·²ç»ç¼“å­˜äº†åˆ™ç›´æ¥è¿”å› å®šä¹‰æ¨¡å— module, module å†…æœ‰ä¸€ä¸ªexportså±æ€§ æ‰§è¡Œmodules[moduleId].callï¼Œå®é™…ä¸Šå°±æ˜¯è°ƒç”¨äº†è¢«babelç¼–è¯‘åçš„æ¨¡å—ï¼Œå°† module.exportså¼•ç”¨èµ‹å€¼ç»™__webpack_exports__ ç„¶åæ‰§è¡Œ__webpack_require__.d(__webpack_exports__, &quot;default&quot;, function() { return Test; });ï¼ŒæŠŠmodule.exportsä¸Šèµ‹å€¼ç»™ç›¸åº”çš„æ¨¡å—ã€‚ return __webpack_require__åçš„ç»“æœå³ä¸ºå½“å‰åŠ è½½çš„æ¨¡å—ã€‚ 12345678910111213141516171819202122/******/ function __webpack_require__(moduleId) &#123; /******/ /******/ // Check if module is in cache /******/ if(installedModules[moduleId]) &#123; /******/ return installedModules[moduleId].exports; /******/ &#125; /******/ // Create a new module (and put it into the cache) /******/ var module = installedModules[moduleId] = &#123; /******/ i: moduleId, /******/ l: false, /******/ exports: &#123;&#125; /******/ &#125;; /******/ /******/ // Execute the module function /******/ modules[moduleId].call(module.exports, module, module.exports, __webpack_require__); /******/ /******/ // Flag the module as loaded /******/ module.l = true; /******/ /******/ // Return the exports of the module /******/ return module.exports; /******/ &#125; ä»åˆšåˆšçš„åˆ†æä¸­å¯ä»¥å¾—åˆ°ï¼š webpack ç¼–è¯‘åçš„æ–‡ä»¶æ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œå¹¶æ²¡æœ‰æš´éœ²å‡ºä»€ä¹ˆå†…å®¹ï¼Œå¦‚æœç›´æ¥copyåˆ°æµè§ˆå™¨é‡Œï¼Œæ˜¯ä¸€ä¸ª Module å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯å¹¶æ²¡æœ‰èµ‹å€¼ç»™ä»»ä½•å€¼å¦‚ window, module.exports, exports ,ä½œç”¨åŸŸåªåœ¨å½“å‰ã€‚å› æ­¤è§£é‡Šäº†ä¸ºä»€ä¹ˆ webpack è¢«ç¼–è¯‘åçš„æ–‡ä»¶æ²¡åŠæ³•ç›´æ¥è¢«import æˆ–è€… requireã€‚ é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œå¯ä»¥åœ¨webpackä¸­è®¾ç½®ï¼šlibraryTarget: &#39;xxx&#39;ï¼Œ ç”¨æ¥æŠŠæœ€åå¾—åˆ°çš„å†…å®¹ï¼Œæš´éœ²å‡ºå»ã€‚å¦‚è‹¥å€¼ä¸º commonjs2åˆ™ä¼šæ˜¯æœ€å¤–é¢ä¼šåŠ ä¸Š module.exports, è‹¥å€¼ä¸º commonjsä¼šæœ€ç»ˆéƒ½ä¸º exports, è‹¥å€¼ä¸º varåˆ™æ˜¯åœ¨windowä¸Šå¯ä»¥ä½¿ç”¨ã€‚è¿˜æœ‰å…¶ä»–çš„å€¼ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ã€‚ æ€»ç»“ä¹‹æ‰€ä»¥ä¼šå‡ºè¿™ç¯‡æ–‡ç« ï¼Œæ˜¯å› ä¸ºæœ€è¿‘åœ¨ä¼˜åŒ–ç»„é‡Œçš„ä¸€äº›å…¬å…±ç»„ä»¶ï¼Œä¼˜åŒ–è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œæœ€åå‘ç°å…¶å®è¿˜æ˜¯å¯¹è¿™äº›æ¬ ç¼ºä¸€äº›äº†è§£ã€‚ä¸æ€»ç»“å‡ºæ¥ï¼Œæ€•æ˜¯å¯¹ä¸èµ·è‡ªå·±è¿™å‡ å¤©çš„çº ç»“ã€‚ğŸ“šğŸŒ²","categories":[],"tags":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/tags/å·¥å…·-é…ç½®/"}]},{"title":"è§£å†³ IOS å¾®ä¿¡æŸäº›ç‰ˆæœ¬ä¸‹é”®ç›˜æ”¶èµ·é¡µé¢ä¸ºä¸‹ç§»å¯¼è‡´ç‚¹å‡»äº‹ä»¶å¤±æ•ˆé—®é¢˜","slug":"è§£å†³-IOS-å¾®ä¿¡æŸäº›ç‰ˆæœ¬ä¸‹é”®ç›˜æ”¶èµ·é¡µé¢ä¸ºä¸‹ç§»å¯¼è‡´ç‚¹å‡»äº‹ä»¶å¤±æ•ˆé—®é¢˜","date":"2019-03-01T03:30:36.000Z","updated":"2019-03-01T03:43:11.000Z","comments":true,"path":"2019/03/01/è§£å†³-IOS-å¾®ä¿¡æŸäº›ç‰ˆæœ¬ä¸‹é”®ç›˜æ”¶èµ·é¡µé¢ä¸ºä¸‹ç§»å¯¼è‡´ç‚¹å‡»äº‹ä»¶å¤±æ•ˆé—®é¢˜/","link":"","permalink":"http://sevencai.github.io/2019/03/01/è§£å†³-IOS-å¾®ä¿¡æŸäº›ç‰ˆæœ¬ä¸‹é”®ç›˜æ”¶èµ·é¡µé¢ä¸ºä¸‹ç§»å¯¼è‡´ç‚¹å‡»äº‹ä»¶å¤±æ•ˆé—®é¢˜/","excerpt":"","text":"æŸå¤©å‘ç°äº†ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡ã€‚ ä¸€èˆ¬æˆ‘ä»¬ä¼šåœ¨ç‚¹å‡»æ”¯ä»˜çš„æ—¶å€™ï¼Œå¼¹å‡ºä¸€ä¸ªæ¨¡æ€æ¡†ï¼Œè®©ç”¨æˆ·é€‰æ‹©æ”¯ä»˜æ¸ é“ã€‚ çªç„¶å‘ç°æŸä¸ªIOSå¾®ä¿¡æ‰‹æœºä¸Šï¼Œå½“ç‚¹å‡»è¾“å…¥é‡‘é¢åï¼Œç”¨æˆ·ç‚¹å‡»æ”¯ä»˜ï¼Œå¼¹çª—å‡ºç°åï¼Œæ— æ³•ç‚¹å‡»ä¸­å¼¹çª—ä¸Šçš„æ¸ é“ã€‚ä½†æ˜¯å´èƒ½åœ¨éå¼¹çª—æ‰€åœ¨çš„ç©ºç™½åœ°æ–¹ï¼Œé€‰ä¸­æœ‰åé¦ˆã€‚è¿™ç§æ„Ÿè§‰å°±åƒdomæ˜¾ç¤ºçš„åœ°æ–¹å’ŒdomçœŸå®çš„åœ°æ–¹åˆ†ç¦»äº†ä¸€æ ·è¯¡å¼‚ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ æˆ‘ä»¬çŸ¥é“ IOS æœ‰ä¸ªå¾ˆå¥½çš„ä¼˜åŒ–ï¼Œå°±æ˜¯å½“ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥è¾“å…¥æ¡†æ—¶ï¼ŒIOSä¼šè‡ªå·±æŠŠè¾“å…¥æ¡†å¼¹ä¸Šæ¥ï¼Œæ¥ç¡®ä¿è¾“å…¥æ¡†ä¸€å®šåœ¨å¯è§†æ¡†å†…ï¼ŒAndroid æ²¡æœ‰è¿™ä¸ªä¼˜åŒ–ï¼Œä»¥å‰æˆ‘ä»¬è¿˜ç»å¸¸å¯¹å®‰å“åšè¿™ç§ä¼˜åŒ–ã€‚ åæ¥å‘ç°ç¡®å®æ˜¯è¿™ä¸ªä¼˜åŒ–å¯¼è‡´äº†ã€å¼¹çª—è™½ç„¶æ¢å¤æ­£å¸¸äº†ï¼Œä½†æ˜¯bodyè¿˜æ˜¯åœ¨é”®ç›˜å¼¹ä¸Šå»çš„ä½ç½®ã€‘ï¼Œ æ˜¯ç”±äº IOS ä¸‹çš„æ¸²æŸ“é—®é¢˜å¯¼è‡´çš„ï¼Œå½“é”®ç›˜å¼¹ä¸‹æ¥çš„æ—¶å€™ï¼Œå¼¹çª—ä¸‹çš„bodyæ²¡æœ‰è§¦å‘é‡ç»˜ã€‚ æ‰€ä»¥é—®é¢˜å˜æˆäº†ç®€å•çš„ï¼Œæ€ä¹ˆè®©é”®ç›˜ä¸‹å»çš„æ—¶å€™ï¼Œbodyèƒ½å¤Ÿé‡ç»˜ã€‚ æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„æ˜¯ï¼Œé”®ç›˜æ”¶èµ·çš„æ—¶å€™ï¼Œresize äº‹ä»¶åº”è¯¥ä¼šè§¦å‘ï¼Œè¯•ç€åœ¨ resize ä¸­åšå¤„ç†ï¼Œç»“æœå‘ç°ï¼ŒIOSä¸‹ç«Ÿç„¶ä¸ä¼šè§¦å‘ resize, ä¹Ÿå°±æ˜¯ IOS ä¸‹ï¼Œå½“é”®ç›˜æ”¶èµ·çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šæ”¹å˜è§†çª—çš„å¤§å°ï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸ä¼šè§¦å‘ resize äº‹ä»¶ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¦‚æœä½ çš„ body æœ¬æ¥æ˜¯ 100% é«˜åº¦çš„ï¼Œè¢«é”®ç›˜å¼¹ä¸Šå»åï¼Œå¯èƒ½å˜æˆ 120%ï¼Œ ä½ çš„bodyç«Ÿç„¶å¯ä»¥æ»šåŠ¨äº†ã€‚è€Œä¸”ä¸‹é¢æ²¡æœ‰å†…å®¹ï¼Œè¿˜æ˜¯ç™½è‰²çš„ç©ºç™½åŒºåŸŸã€‚å®‰å“ä¸Šé”®ç›˜æ”¶èµ·æ—¶è§†çª—å¤§å°ä¼šæ”¹å˜ï¼Œæ‰€ä»¥ä¼šè§¦å‘ resize äº‹ä»¶ï¼Œå› æ­¤ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ã€‚ resize èµ°ä¸é€šï¼Œé‚£æ€ä¹ˆè®©å®ƒè§¦å‘é‡ç»˜å‘¢ï¼Ÿæƒ³åˆ° IOS ä¸‹ï¼Œå½“é”®ç›˜æ”¶èµ·çš„æ—¶å€™ï¼Œinputä¸ä¼šè¢« focus äº†ï¼ˆå¯ä»¥çœ‹åˆ°å…‰æ ‡æ¶ˆå¤±äº†ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´å¾ˆæœ‰å¯èƒ½è§¦å‘ blur äº‹ä»¶ã€‚ç»è¿‡è¯å®ï¼Œç¡®å®æ˜¯è§¦å‘äº† blurã€‚æ‰€ä»¥ç¡®å®šå»è§¦å‘é‡ç»˜çš„æ—¶æœºå°±æ˜¯ blur æ—¶ã€‚ ç°åœ¨çš„é—®é¢˜å°±æ˜¯é‡ç»˜è¦æ€ä¹ˆå†™å‘¢ï¼Ÿ ä»¥å‰åœ¨ IOS ä¸Šé‡åˆ°äº†å¾ˆå¤šæ¸²æŸ“çš„å‘ï¼Œç»éªŒå‘Šè¯‰æˆ‘ï¼Œåªè¦è®©é¡µé¢ã€åŠ¨ä¸€ä¸‹ã€‘å°±å¯ä»¥äº†ã€‚æ¯”å¦‚è®©é¡µé¢ scrollTop = 0, æˆ–è€…å† focus ä¸€ä¸‹ï¼Œæˆ–è€… click touchä¸€ä¸‹ä¹‹ç±»çš„ã€‚ è¿™é‡Œä¸ºäº†è®©é¡µé¢ä¸ä¼šç”±äº scrollTop = 0 çªç„¶å¾€ä¸Šä¸€ä¸‹ï¼Œå°±å¯ä»¥è®¾ç½® scrollTop = scrollTop ä¹Ÿå¯ä»¥ã€‚ 123456&lt;input @blur=fixbug/&gt;// fixbugif (this.userAgent.iOS) &#123; document.body &amp;&amp; (document.body.scrollTop = document.body.scrollTop)&#125; è¿™ç§åªèƒ½åœ¨å•ä¸€çš„inputä¸Šåšå¤„ç†ä¸å¤ªå¥½ã€‚å¦‚æœè¦åœ¨æ‰€æœ‰ input ä¸Šéƒ½ç”Ÿæ•ˆå¯ä»¥ç›‘å¬åœ¨documentä¸Šã€‚è¿™æ—¶å€™ï¼Œåªéœ€è¦åˆ¤æ–­ä¸‹æ˜¯ä¸æ˜¯ input æˆ–è€… textarea å…ƒç´ å°±å¯ä»¥äº†ã€‚ 123456// è‡ªè¡Œå®ç°æ˜¯å¦æ˜¯ iOS çš„åˆ¤æ–­ï¼Œä¸€èˆ¬æŠŠ ipad,ipod, iphone è·Ÿ navigagor.userAgent indexOf ä¸€ä¸‹å°±è¡Œif (this.userAgent.iOS) &#123; document.addEventListener('blur', e =&gt; &#123; ['input', 'textarea'].indexOf(e.target.localName) ï¼== -1 &amp;&amp; (document.body.scrollTop = document.body.scrollTop) &#125;, true)&#125; åœ¨å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œå‘ç°ä¹Ÿæœ‰äººç¢°åˆ°äº†ç±»ä¼¼çš„é—®é¢˜ï¼Œä»–ä»¬æ˜¯ç”¨çš„ scrollIntoViewï¼Œæˆ‘è§‰å¾—ä¹ŸæŒºå¥½çš„ã€‚ä½†æ˜¯ä¸ä¹…ä¹‹å‰ï¼Œæœ‰åŒäº‹åœ¨ IOS 11 ä¸ŠæŸä¸ªç‰ˆæœ¬çš„æ—¶å€™ï¼Œç”¨ scrollIntoViewä¼šé‡åˆ°é¡µé¢å¡ä½æ»‘ä¸åŠ¨çš„æƒ…å†µï¼Œå¹¶ä¸”åªåœ¨IOS11ä¸Šçš„æŸä¸ªå°ç‰ˆæœ¬å‡ºç°ï¼Œæ‹…å¿ƒå®ƒè¿˜ä¼šæœ‰åŒæ ·çš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€ç»ˆè¿˜æ˜¯ä½¿ç”¨äº† document.body.scrollTop æ¥è§£å†³ã€‚ ä»–ä»¬çš„ä»£ç å¦‚ä¸‹ï¼Œæˆ‘ä¹Ÿæƒ³è®°å½•ä¸‹æ¥æ—¥åå‚è€ƒï¼Œéƒ½å¤§åŒå°å¼‚ï¼š 1;(/iphone|ipod|ipad/i.test(navigator.appVersion)) &amp;&amp; document.addEventListener(&apos;blur&apos;, (e) =&gt; &#123; &apos;input&apos;, &apos;textarea&apos;].includes(e.target.localName) &amp;&amp; document.body.scrollIntoView(false) &#125;, true) æ€»ç»“æœ‰çš„æ—¶å€™æƒ³æƒ³åšå‰ç«¯çœŸçš„æ˜¯ä»¶ä¸å®¹æ˜“çš„äº‹æƒ…ï¼Œå°¤å…¶æ˜¯è¦è·Ÿæµè§ˆå™¨æ‰“äº¤é“çš„æ—¶å€™ï¼Œçªç„¶æŸå¤©ä½ å¯èƒ½å‘ç°ä¹‹å‰è·‘çš„å¥½å¥½çš„ç‰ˆæœ¬ï¼Œæ€ä¹ˆçªç„¶é—´å‡ºé—®é¢˜äº†ï¼Œä½ ä¼šå…ˆæ€€ç–‘è‡ªå·±ï¼Œå†å»æ‰¾é—®é¢˜ï¼Œå†å»å¤ç°é—®é¢˜ï¼Œå†å»æƒ³æ€ä¹ˆ hackã€‚å…³é”®æ˜¯æœ‰çš„æ—¶å€™ä½ çŸ¥é“äº†æ€ä¹ˆhack,æœ‰å¯èƒ½è¿˜æ˜¯ä¸çŸ¥é“æ˜¯è°çš„bug,ä¸ºä»€ä¹ˆä¼šè¿™æ ·ã€‚å¤ªå¤šå¤–ç•Œå› ç´ ï¼ˆåº”ç”¨ï¼Œç³»ç»Ÿï¼‰å½±å“ä½ çš„åˆ¤æ–­ï¼Œå¹¶ä¸”ä½ å¯èƒ½æ¯”è¾ƒéš¾å»å¹²é¢„æˆ–è€…å»å‘Šè¯‰ä»–ä½ è¿™é‡Œæœ‰bugã€‚ğŸŒ¹","categories":[],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"webpack ç¼–è¯‘ç›®å½•åŸæ ·è¾“å‡ºåŠwebpack4 treeshakingå°ç»“","slug":"webpack-ç¼–è¯‘ç›®å½•åŸæ ·è¾“å‡ºåŠwebpack4-treeshakingå°ç»“","date":"2019-02-22T12:16:03.000Z","updated":"2019-02-22T12:29:46.000Z","comments":true,"path":"2019/02/22/webpack-ç¼–è¯‘ç›®å½•åŸæ ·è¾“å‡ºåŠwebpack4-treeshakingå°ç»“/","link":"","permalink":"http://sevencai.github.io/2019/02/22/webpack-ç¼–è¯‘ç›®å½•åŸæ ·è¾“å‡ºåŠwebpack4-treeshakingå°ç»“/","excerpt":"","text":"æœ¬æ–‡ä¸»è¦è®°å½•ä¸¤ç‚¹ å¦‚ä½•åœ¨webpackä¸­ç¼–è¯‘ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶å¹¶ä¸”æŒ‰ç…§ã€åŸç›®å½•ã€‘è¾“å‡ºã€‚ æ€»ç»“åœ¨webpack ä¸­ä½¿ç”¨ treeshaking çš„æ¡ä»¶ã€‚ webpack ç¼–è¯‘æ–‡ä»¶ç›®å½•å¹¶åŸæ ·è¾“å‡ºåœºæ™¯æ˜¯éœ€è¦ç¼–è¯‘ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰jsæ–‡ä»¶ï¼Œå¹¶ä¸”æŠŠè¿™äº›jsæ–‡ä»¶éƒ½æŒ‰ç…§ã€åŸæ¥çš„ç›®å½•ç»“æ„ã€‘è¾“å‡ºã€‚ é¦–å…ˆç¼–è¯‘ä¸€ä¸ªæ–‡ä»¶å¤¹çš„æ‰€æœ‰jsæ–‡ä»¶ï¼Œæ¯”è¾ƒå¥½åšã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨globæ¥è·å–ç›®å½•ä¸‹çš„æ‰€æœ‰jsæ–‡ä»¶ã€‚123456789101112// Webpack babel transform config module.exports = &#123; entry: glob.sync(\"./src/**/*.js\"), mode: \"production\", output: &#123; filename: '[name].js', path: path.resolve(__dirname, './') &#125;, // ..... &#125; ä½†æ˜¯å¦‚æœæˆ‘ä»¬åƒå¦‚ä¸Šè¿™ä¹ˆå†™ï¼Œä¼šç›´æ¥è¾“å‡ºä¸€ä¸ª main.js æ–‡ä»¶ã€‚ä¹Ÿå°±æ˜¯æ‰€æœ‰è¢«ç¼–è¯‘çš„æ–‡ä»¶éƒ½ä¼šåœ¨åŒæ ·çš„ä¸€ä¸ªæ–‡ä»¶ä¸­è¾“å‡ºã€‚è¿™ä¸æ˜¯æˆ‘æƒ³è¦çš„ï¼Œæˆ‘æƒ³è¦çš„æ˜¯ã€æ¯ä¸ªæ–‡ä»¶å•ç‹¬ç¼–è¯‘ï¼Œå¹¶åŸæ ·ç›®å½•è¾“å‡ºã€‘ã€‚ æŸ¥æ‰¾äº†ä¸‹ webpack æ²¡æœ‰ç›¸å…³çš„é…ç½®, å¦‚æœæˆ‘ä»¬è¦è¾“å‡ºmodule/a/index.jsåœ¨ dist/module/a/ç›®å½•ä¸‹ã€‚æˆ‘ä»¬å†å†™ entry æ—¶å°±å¯ä»¥è¿™ä¹ˆå†™:12345678entry: &#123; 'module/a/index': 'module/a/index.js', 'module/b/index': 'module/b/index.js',&#125;,output: &#123; path: path.resolve(__dirname, 'dist'), filename: '[name].js'&#125; æ‰€ä»¥ä¸ºäº†åŠ¨æ€å»è¾“å‡ºåˆ°ç›¸åº”çš„ç›®å½•ï¼Œæˆ‘ä»¬åªéœ€è¦å»æ‰¾åˆ°å¯¹åº”çš„entryå³å¯ã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³è¦åŸæ ·è¾“å‡ºç¼–è¯‘åçš„ src ç›®å½•ä¸‹çš„æ–‡ä»¶, å…ˆç”¨ æ­£åˆ™åŒ¹é…åˆ° å¯¹åº”çš„è·¯å¾„ã€‚ç„¶åå†æ˜ å°„åˆ°entryä¸Šå³å¯ã€‚ä¸»è¦æ˜¯å®ç°ï¼š./src/lib/a.js =&gt; ./lib/a.jsçš„mapã€‚ç®€å•ç‚¹çš„demoå¯èƒ½å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445const glob = require('glob') const path = require('path') const webpack = require('webpack') const CleanWebpackPlugin = require('clean-webpack-plugin') // Get all file entries function getEntries() &#123; let map = &#123;&#125; const entryFiles = glob.sync(\"./src/**/*.js\") entryFiles.forEach(filepath =&gt; &#123; let fileDir = /.\\/src\\/(.*?)\\.js/.exec(filepath) map[fileDir[1]] = filepath &#125;) return map &#125; // Webpack babel transform config module.exports = &#123; entry: getEntries(), mode: \"production\", output: &#123; filename: '[name].js', path: path.resolve(__dirname, './') &#125;, module: &#123; rules: [ &#123; test: /\\.js/, loader: 'babel-loader', exclude: /node_modules/ &#125; ] &#125;, plugins: [ new CleanWebpackPlugin(['lib']), new webpack.DefinePlugin(&#123; \"process.env.NODE_ENV\": JSON.stringify(\"production\") &#125;) ] &#125; webpack çš„ treeshaking æ¡ä»¶webpack2 çš„ treeshaking ä¸€èˆ¬æˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°ã€‚æœ€è¿‘æœ‰æµè§ˆäº†ç±»ä¼¼çš„æ–‡ç« ï¼Œæ€»ç»“ä¸‹ï¼ˆä¸‹é¢æ˜¯ä½¿ç”¨webpack4çš„ç›¸å…³é…ç½®ï¼‰ï¼š ä¹Ÿå°±æ˜¯è¯´å¿…é¡»å¾— ä½¿ç”¨ treeshake å‡å°‘æ–‡ä»¶ä½“ç§¯çš„4ä¸ªæ¡ä»¶ï¼š 1234- ä½¿ç”¨ ES2015 æ¨¡å—è¯­æ³•ï¼ˆå³ `import` å’Œ `export`ï¼‰ã€‚- åœ¨é¡¹ç›® `package.json` æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä¸€ä¸ª &quot;sideEffects&quot; å±æ€§ã€‚- ä¸èƒ½æŠŠ ES6 æ¨¡å—ç”¨ babel å…ˆè½¬æ¢æˆ CommonJs, åœ¨`@babel/preset-env`ä¸­ï¼Œè¿™æ˜¯ä¸ªé»˜è®¤è¡Œä¸ºï¼Œéœ€è¦è®¾ç½® `module: false`ç¦ç”¨æ‰ã€‚å…ˆç¼–è¯‘æˆ CommonJs åwebpackå°±æ— æ³•åˆ†æä¾èµ–äº†ã€‚- webpack4ä¸­è®¾ç½® mode: productionï¼Œè‡ªåŠ¨å¼€å¯å‹ç¼©, å¦‚æœæ˜¯éwebpack4,åˆ™éœ€è¦å¼•å…¥ä¸€ä¸ªèƒ½å¤Ÿåˆ é™¤æœªå¼•ç”¨ä»£ç (dead code)çš„å‹ç¼©å·¥å…·(minifier)ï¼ˆä¾‹å¦‚ `UglifyJSPlugin`ï¼‰ã€‚ è®¾ç½® module ä¸º false çš„åŸå› å¼•ç”¨å¦‚ä¸‹ï¼š modules&quot;amd&quot; | &quot;umd&quot; | &quot;systemjs&quot; | &quot;commonjs&quot; | &quot;cjs&quot; | &quot;auto&quot; | false, defaults to &quot;auto&quot;.Enable transformation of ES6 module syntax to another module type.Setting this to false will not transform modules. é”™è¯¯ç¤ºèŒƒï¼š123456789101112exports.a = function() &#123; console.log('a') &#125; exports.b = function() &#123; console.log('b') &#125;import api from './a.js' // é”™è¯¯ï¼Œéœ€è¦ç”¨ import ,export ES6è¯­æ³• æ‰èƒ½ treeshakeapi.a() æ­£ç¡®ç¤ºèŒƒï¼š12345678910export function a() &#123; console.log('a') &#125; export function b() &#123; console.log('b') &#125;import &#123;a&#125; from './a.js' a() ç®€å•ç‚¹çš„ç¤ºä¾‹demo: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152// webpack.config.js const path = require('path') const webpack = require('webpack') const UglifyJSPlugin = require('uglifyjs-webpack-plugin') module.exports = &#123; entry: './test.mjs', mode: \"production\", output: &#123; filename: 'index.js', path: path.resolve(__dirname, './dist') &#125;, module: &#123; rules: [ &#123; test: /\\.js/, loader: 'babel-loader', exclude: /node_modules/ &#125; ] &#125;, // å½“ mode ä¸º development æ—¶ï¼Œéœ€è¦å¼€å¯ä¸‹é¢çš„ä»£ç ã€‚ // å½“ mode ä¸º production æ—¶ï¼Œä¸éœ€è¦ optimization: &#123; minimizer: [ new UglifyJSPlugin(&#123; uglifyOptions: &#123; compress: &#123; warnings: true &#125;, output: &#123; comments: false &#125;, sourceMap: true &#125; &#125;) ] &#125;, plugins: [ new webpack.LoaderOptionsPlugin(&#123; minimize: true, debug: false &#125;), new webpack.DefinePlugin(&#123; \"process.env.NODE_ENV\": JSON.stringify(\"production\") &#125;) ] &#125; sideEffectsæ€ä¹ˆç†è§£ï¼ŸsideEffects è¿™ä¸ªä¼°è®¡å†èŠ±ä¸€ä¸ªæ–‡ç« ä¹Ÿè®²ä¸å®Œã€‚å¤§æ¦‚çš„è¡¨è¾¾ä¸‹æ˜¯ï¼š å¾ˆå¤šæ—¶å€™åœ¨è½¬æ¢ä»£ç åï¼Œæˆ‘ä»¬çš„ä»£ç ä¼šç”±äºè¢«ç¼–è¯‘è€Œäº§ç”Ÿå‰¯ä½œç”¨ï¼Œæ¯”å¦‚ä½ å¯¹ä¸€ä¸ªå‡½æ•°ä½¿ç”¨äº† location.href æˆ–è€… window ä¸ŠåŠ äº†ä¸œè¥¿ï¼Œå³ä½¿ä½ æ²¡æœ‰çœŸçš„ä½¿ç”¨è¿™ä¸ªæ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—ä¹Ÿä¼šè¢«æ‰“åŒ…è¿›åˆ°disté‡Œå»ã€‚ æ‰€ä»¥å¦‚æœä½ çœŸçš„æƒ³å»é™¤é‚£äº›å®Œå…¨æ²¡æœ‰è¢«å¼•ç”¨åˆ°çš„ï¼Œå³ä½¿æœ‰å‰¯ä½œç”¨çš„åŒ…ï¼šå°±åº”è¯¥æŠŠè¿™äº› åŒ…/æ¨¡å— è¢«æ ‡è®°ä¸º sideEffects: false äº†ï¼Œé‚£ä¹ˆä¸ç®¡å®ƒæ˜¯å¦çœŸçš„æœ‰å‰¯ä½œç”¨ï¼Œåªè¦å®ƒæ²¡æœ‰è¢«å¼•ç”¨åˆ°ï¼Œæ•´ä¸ª æ¨¡å—/åŒ… éƒ½ä¼šè¢«å®Œæ•´çš„ç§»é™¤ã€‚ ä¸¾ä¸ªæˆ‘çœ‹åˆ°çš„å¾ˆå¥½çš„ä¾‹å­ï¼Œä¾‹å­åŸæœ¬å‡ºäºæ–‡ç« # Webpack ä¸­çš„ sideEffects åˆ°åº•è¯¥æ€ä¹ˆç”¨ï¼Ÿï¼š123456789101112import DevTools from &apos;mobx-react-devtools&apos;;class MyApp extends React.Component &#123; render() &#123; return ( &lt;div&gt; ... &#123; process.env.NODE_ENV === &apos;production&apos; ? null : &lt;DevTools /&gt; &#125; &lt;/div&gt; ); &#125;&#125; å¦‚æœä½ ä¸åœ¨webpack4ä¸­è®¾ç½® sideEffects: falseï¼Œ é‚£ä¹ˆå³ä½¿ NODE_ENV=production, mobx-react-devtoolsä¹Ÿä¼šè¢«å¼•å…¥ã€‚ æ‰€ä»¥å¦‚æœæˆ‘ä»¬èƒ½ç¡®å®šæˆ–è€…æƒ³è®©è¿™ä¸ªåŒ…ä¸å¯¹åŒ…ä»¥å¤–çš„å¯¹è±¡é€ æˆå½±å“ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å®Œå…¨çš„å¯ä»¥æ”¾å¿ƒè®¾ç½®è¿™ä¸ªå‚æ•°äº†ã€‚ å…³äº å‰¯ä½œç”¨ï¼Œæ¨èä¸€ç¯‡æ–‡ç« ä½ çš„Tree-Shakingå¹¶æ²¡ä»€ä¹ˆåµç”¨ , ä¹Ÿæ–¹ä¾¿è‡ªå·±åç»­æŸ¥é˜…ã€‚ æ€»ç»“æœ€è¿‘ä¸»è¦æ˜¯æƒ³å¯¹ç»„é‡Œçš„ä¸€äº›åŒ…åšä¼˜åŒ–ï¼Œåšä¼˜åŒ–çš„è¿‡ç¨‹ä¸­è§£å†³äº†ä¸€äº›é—®é¢˜ï¼Œä¹Ÿå¸¦æ¥äº†ä¸€äº›æ–°çš„ç–‘æƒ‘ã€‚ç–‘æƒ‘è¿˜æ²¡è§£å†³ï¼Œæ‰€ä»¥è¿˜ä¸èƒ½æ€»ç»“æˆæ–‡ç« ã€‚è™½ç„¶ä¸æ˜¯çº ç»“ä¸Šé¢çš„ä¸œè¥¿ï¼Œä½†ä¹Ÿç®—æ˜¯çº ç»“äº†å¥½å‡ å¤©äº†ã€‚(à²¥ _ à²¥)","categories":[],"tags":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/tags/å·¥å…·-é…ç½®/"}]},{"title":"2018å¹´åº¦æ€»ç»“","slug":"2018å¹´åº¦æ€»ç»“","date":"2018-12-31T09:44:03.000Z","updated":"2018-12-31T03:04:36.000Z","comments":true,"path":"2018/12/31/2018å¹´åº¦æ€»ç»“/","link":"","permalink":"http://sevencai.github.io/2018/12/31/2018å¹´åº¦æ€»ç»“/","excerpt":"","text":"2018å¹´å·²ç»æ˜¯è¿‡å» å°æ—¶å€™å°è±¡æœ€æ·±çš„ä¸€å¹´æ˜¯2008å¹´ é‚£ä¸€å¹´å¼€äº†è¿åŠ¨ä¼š é‚£ä¸€å¹´è·Ÿçˆ¸çˆ¸å»äº†åŒ—äº¬ é‚£ä¸€å¹´å¦ˆå¦ˆ40å² é‚£ä¸€å¹´æˆ‘13å² é‚£ä¸€å¹´ä¸‹äº†å¤§é›ª é‚£ä¸€å¹´æ±¶å·åœ°éœ‡ è½¬çœ¼é—´10å¹´å°±è¿‡å»äº†ï¼Œ10å¹´ï¼Œæˆ‘é•¿å¤§äº† é‚£ä¸ªèƒ†å°çš„æˆ‘ï¼Œå˜äº†æ•¢äºæ‰¿æ‹…çš„æˆ‘ é‚£ä¸ªé—®çˆ¸çˆ¸å¦ˆå¦ˆè¦é’±çš„æˆ‘ï¼Œå˜æˆäº†ç»™çˆ¸çˆ¸å¦ˆå¦ˆä¹°ä¸œè¥¿çš„æˆ‘ é‚£ä¸ªå­¦ç”Ÿï¼Œå˜æˆäº†ç¤¾ä¼šäºº é‚£ä¸ªä¸€ä¸ªäººï¼Œç°åœ¨å¤šäº†ä¸€ä¸ªäººå’Œä¸€ä¸ªç‹— å¤šæ•°æ—¶å€™æˆ‘å¼€å¿ƒå¿«ä¹ï¼Œä½†æ˜¯ä¹Ÿæœ‰æ—¶å€™å¿ƒæƒ…ä½è½ï¼Œå´©æºƒå¤§å“­ æˆ‘çƒ­çˆ±æˆ‘çš„å·¥ä½œï¼Œä½†ä¹Ÿæœ‰æ—¶å¼€å§‹ä¼šæƒ³æ€ä¹ˆèƒ½å°‘åŠ ç­ æˆ‘èµšäº†é’±ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰å­˜ä¸€åˆ†é’±ï¼Œè¿‡ç€ä¸äºå¾…è‡ªå·±å’Œå®¶äººçš„æ—¥å­ æˆ‘å˜äº†å¾ˆå¤šï¼Œä¸å˜çš„æ˜¯æˆ‘è¿˜æ˜¯é‚£ä¸ªå°èƒ–å­ï¼Œæˆ‘ç”šè‡³å·²ç»ä¼šè¯´ä¿çš®è¯ æˆ‘çˆ±æˆ‘çš„å®¶äººï¼Œçˆ±æˆ‘çš„å¦ˆå¦ˆï¼Œä½†æ€»è§‰å¾—è‡ªå·±äºæ¬ å¥¹ æˆ‘è™½ç„¶æ¯å¤©è·Ÿå¥¹æ‰“ç”µè¯ï¼Œä½†æ˜¯å¥¹æ€»æ˜¯è·Ÿæˆ‘éšç’å¥¹çš„å¿ƒäº‹ å·¥ä½œä¸­é‡åˆ°è¿‡ä¸é¡ºçš„æ—¶å€™ï¼Œä»Šå¹´åŒåä¸€é‚£ä¸ªæ˜ŸæœŸï¼Œé‚£ä¸€å¤©ï¼Œæˆ‘è§‰å¾—æ˜¯æˆ‘äººç”Ÿä¸­æœ€éš¾è¿‡çš„ä¸€å¤© æˆ‘ä¸å¤Ÿå¼ºå¤§ æˆ‘ä»Šå¤©å»äº†æ—¥æœ¬ï¼Œé‡åº†ï¼Œé˜³æ±Ÿï¼Œä¸–ç•Œå¾ˆå¤§ï¼Œæˆ‘ä¹Ÿåœ¨åŠªåŠ›å»çœ‹çœ‹ï¼Œè¿ˆçš„æ­¥å­ä¸å¤§ï¼Œä½†åœ¨å‰è¿› æˆ‘ä»Šå¹´å·¥ä½œ1å¹´åŠäº†ã€‚ç®—ä¸Šå®ä¹ 2å¹´åŠäº† æˆ‘ä¾æ—§ä¸åŒ–å¦†ï¼Œç”šè‡³è¿˜é•¿èƒ–äº†5æ–¤ ä¸€ç›´åœ¨åŠªåŠ›æƒ³ç€æ”¹å˜ï¼Œä½†æœ‰æ—¶å€™å¾ˆè®¨åŒè‡ªå·±ä¸ºä»€ä¹ˆä¸æ˜¯é‚£ä¸ªåšæŒä¸æ‡ˆçš„äºº å·¥ä½œä¸Šè§‰å¾—è‡ªå·±æœ‰è¿›æ­¥ï¼Œä½†æ˜¯è¿˜æœ‰å¾ˆå¤šä¸è¶³ï¼Œæ¸…æ™°å¯è§ æˆ‘åšäº†ä¸€äº›æœ‰æ„ä¹‰çš„äº‹æƒ…ï¼Œæ¯”å¦‚å¸®åŠ©æµæµªç‹—ï¼Œå­¦ä¹ æ€¥æ•‘çŸ¥è¯† ä¹Ÿåšäº†ä¸€äº›å·¥ä½œä¸Šå¯ä»¥èŠ‚çœåŠ³åŠ¨åŠ›çš„åŠŸèƒ½ï¼Œè™½ç„¶ä¸æ˜¯ KPIï¼Œä½†æ˜¯æˆ‘åšçš„å¾ˆå¼€å¿ƒ æˆ‘æœ‰ä¸€æ¬¡è¿ç»­ä¸€ä¸ªæ˜ŸæœŸç†¬å¤œï¼Œå°±ç¡å‡ ä¸ªå°æ—¶çš„æ—¶å€™çš„ç»å† å¤§å§¨å¦ˆè¿˜æ˜¯ä¸€æ ·çš„ç—›çš„æˆ‘æƒ³è·³æ¥¼ æˆ‘å¾ˆçˆ±æˆ‘çš„å°ç‹—ç‹—ï¼Œä½†æ˜¯å®ƒå¥½åƒä¸å¤ªçˆ±æˆ‘ï¼Œæ€»å’¬æˆ‘çš„è¡£æœ å¤§é¾™å¾ˆæ£’ï¼Œç”Ÿç—…æœ‰ç‚¹å¤š æˆ‘ä»¬å¼€å§‹ä¸€èµ·ä¼šæ€è€ƒæœªæ¥çš„èŒä¸šå‘å±• ä¹Ÿæœ‰ä»»æ€§çš„æ—¶å€™ï¼Œä¸€èµ·å“­çš„æ—¶å€™ï¼Œä¸€èµ·ç”Ÿç—…çš„æ—¶å€™ ä»–ç»å†äº†ä¸€ä¸ªæœˆçš„ä½è°·æœŸï¼Œä¸è¿‡ä»–å¾ˆæ£’ï¼Œå¾ˆå¿«å°±è°ƒæ•´è¿‡æ¥ è¿·èŒ«çš„æ—¶å€™ï¼Œæˆ‘ä¼šä¼‘æ¯ä¸€å¤©ï¼Œè°ƒæ•´ä¸€å¤© æˆ‘å¼€å§‹äº†æ¯å¤©é˜…è¯»è‹±è¯­ï¼Œä½†æ˜¯ä¹Ÿæœ‰æ¼å¤©çš„æ—¶å€™ 18å¹´ï¼Œæˆ‘å‡ºäº†ä¸€æ¬¡è½¦ç¥¸ï¼Œæˆ‘ç°åœ¨è¿˜å¾ˆæ¸…æ™°çš„è®°å¾—é‚£ä¸ªæ—¶åˆ» è¿‡å¥½æ¯ä¸€å¤©å¾ˆé‡è¦ï¼Œå› ä¸ºäººç”ŸçœŸçš„ä¸å¯é¢„æµ‹ åˆšåˆšè·Ÿç»„é‡Œå»åƒäº†ä¸ªé¥­ï¼Œä»Šå¹´é¥­å±€å¾ˆå¤šï¼Œå¾ˆå¼€å¿ƒ ä»Šå¹´ç»„é‡Œè¿˜æ¥äº†ä¸€ä¸ªå¦¹å­ï¼Œæˆ‘è§‰å¾—è¿™æ˜¯æˆ‘æ˜¥å¤©çš„å¼€å§‹ æˆ‘å†™äº†å¾ˆå¤šæ€»ç»“ä»Šå¹´ï¼Œä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰å‹‡æ°”å‘åˆ°å…¬å¸ KM ä¸Š æˆ‘ä»Šå¹´æœ‰è¿›æ­¥ï¼Œæœ‰è®¤çœŸå·¥ä½œï¼Œä¹Ÿæœ‰å¿½ç„¶ä¸æƒ³å¹²çš„æ—¶å€™ é‚£äº›è¿·èŒ«çš„æ—¶å€™ï¼Œæˆ‘æƒ³ä¸ºä»€ä¹ˆä¼šæœ‰äººæ„¿æ„æ¯å¤©ä¸Š12å°æ—¶çš„ç­ é‚£äº›è®¤çœŸå·¥ä½œçš„æ—¶å€™ï¼Œæˆ‘æƒ³ä¸å†™ä»£ç çœŸçš„å¯æƒœäº† æœ‰çš„æ—¶å€™è§‰å¾—è‡ªå·±æ˜¯ä¸ªèƒ†å°é¬¼ æˆ‘äº«å—æ¯æ¬¡å†™ä¸€æ®µå¾ˆå¥½çš„ä»£ç çš„æ—¶å€™ï¼Œäº«å—æ¯æ¬¡å†™ created by sevencai çš„æ—¶å€™ æˆ‘åœ¨ä¸€å¤©å¤©çš„é•¿å¤§ å¦ˆå¦ˆåœ¨ä¸€å¤©å¤©çš„å˜è€ 19å¹´çš„æ—¶å€™ï¼Œæˆ‘å°±24äº† ä¹Ÿè®¸ä»Šå¹´èƒ½å­˜ç‚¹é’±ï¼Œèƒ½åœ†è€å¦ˆçš„é—¨é¢æ¢¦ å¸Œæœ›å¯¹ PHP,Nodejs æ›´åŠ æ·±å­¦ä¹  æˆ‘ç°åœ¨å¯¹ä»–ä»¬åªåœç•™åœ¨èƒ½åšå‡ºæ¥ä¸œè¥¿ä¸Šï¼ˆå·¥ç¨‹ä¸Šï¼‰ï¼Œè™½ç„¶å¯¹ä¸€èˆ¬çš„å·¥ä½œæ¥è¯´å¤Ÿç”¨äº†ï¼Œä½†æ›´æ·±å±‚æ¬¡çš„ä¸œè¥¿å¹¶æ²¡æœ‰ä»”ç»†å­¦ä¹ è¿‡ï¼Œå¹¶ä¸”é‡åˆ°é—®èŠ±è´¹çš„æ—¶é—´ä¹Ÿä¼šå¤šäº› ä¹Ÿè®¸ä»Šå¹´èƒ½ç˜¦ä¸‹æ¥ï¼Œæ”¹æ‰ä¸å‰©é¥­ï¼Œéè¦æŠŠè‡ªå·±åƒæ’‘çš„åæ¯›ç—… ä¹Ÿè®¸ä»Šå¹´èƒ½å¤Ÿå·¥ä½œé¡ºåˆ©ï¼Œæ˜å¹´è¿™ä¸ªæ—¶å€™ï¼Œè§‰å¾—è‡ªå·±åˆè¿›æ­¥äº†éå¸¸å¤š ä¹Ÿè®¸å®¶é‡Œäººèº«ä½“éƒ½å¥åº·ï¼Œå¸Œæœ›èº«è¾¹çš„äººéƒ½å¹¸ç¦å¼€å¿ƒ ä¹Ÿè®¸æˆ‘çš„æ„¿æœ›19å¹´éƒ½ä¼šæˆçœŸ ä¹Ÿè®¸æˆ‘èƒ½å¤šè¯»ç‚¹ä¹¦ ä¹Ÿè®¸æˆ‘èƒ½æ”¹å˜æ‡’æƒ° ä¹Ÿè®¸æˆ‘çœŸçš„èƒ½åšæŒä¸‹æ¥åšä¸€ä»¶äº‹æƒ… ä¹Ÿè®¸æˆ‘èƒ½å˜å¾—æ›´åŠ æœ‰æ•ˆç‡ï¼Œå°‘åŠ ç‚¹ç­ åªè¦æœ‰å¿ƒï¼Œä»è‡ªå·±å¼€å§‹åšå‡ºæ”¹å˜ï¼Œä»å¿ƒé‡Œç”±è¡·çš„å–„è‰¯å’Œå¼€æœ—ï¼ŒåšæŒå’Œè€å¿ƒï¼Œæœªæ¥å¯æœŸï¼Œæˆ‘ä¹Ÿç›¸ä¿¡è‡ªå·±ï¼Œå› ä¸º18å¹´å·²ç»è¿ˆå‡ºäº†ä¸€å°æ­¥äº†ï¼Œä¸æ˜¯å— å—¯ï¼Œä»Šå¤©æ˜¯2018çš„æœ€åä¸€å¤©ï¼Œå¤©æ°”å¾ˆå†· 2019ï¼Œæˆ‘å‡†å¤‡å¥½äº†ï¼Œä½ æ¥å§ï¼Œå˜»å˜»ğŸŒ¹","categories":[],"tags":[{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"http://sevencai.github.io/tags/ç”Ÿæ´»/"}]},{"title":"webpack4è¯»ä¹¦ç¬”è¯•(ä¸€)","slug":"webpack4è¯»ä¹¦ç¬”è¯•","date":"2018-12-20T12:38:39.000Z","updated":"2019-04-12T03:20:33.000Z","comments":true,"path":"2018/12/20/webpack4è¯»ä¹¦ç¬”è¯•/","link":"","permalink":"http://sevencai.github.io/2018/12/20/webpack4è¯»ä¹¦ç¬”è¯•/","excerpt":"","text":"ä»Šæ—¥é¸¡æ±¤ï¼š ä¼˜ç§€çš„å·¥ç¨‹å¸ˆ = ä¸»äººç¿æ„è¯† + è¿½æ±‚å“è¶Šçš„ç²¾ç¥ å†™è¿™ç¯‡æ–‡ç« çš„ç›®çš„æ˜¯å› ä¸ºwebpack4çš„å‡ºç°ï¼Œå¹¶ä¸”å‘ç°ä»¥å‰æœ‰å¾ˆå¤šä¸œè¥¿å…¶å®ä¸€ç›´éƒ½åœ¨ç”¨ï¼Œä½†æ˜¯æ²¡æœ‰å¾ˆç»†çš„äº†è§£é‡Œé¢çš„ä¸œè¥¿ï¼Œæœ¬ç¯‡æ–‡ç« ä¸»è¦æ¢³ç†ä¸‹ç›¸å…³å†…å®¹ã€‚ æƒ³è¦æŠŠè‡ªå·±çŸ¥é“çš„å’Œä¸çŸ¥é“çš„ï¼Œéƒ½ç³»ç»Ÿçš„æ€»ç»“ä¸‹ã€‚ webpackæ¨¡å—æ‰“åŒ…å·¥å…· - a static module bundler webpack4å¦‚ä½•åšåˆ°æ›´å¿«éœ€è¦nodejsç‰ˆæœ¬æ–° + webpackç‰ˆæœ¬æ–° webpack ä¼šåˆ©ç”¨æ–°ç‰ˆ Nodejs çš„ç‰¹æ€§è¿›è¡Œæ›´å¥½çš„ä¼˜åŒ– â€“save-dev = -D12npm install webpack webpack-cli --save-devnpm install webpack webpack-cli -D npxå’Œnpmçš„åŒºåˆ«npxä¼šå»å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„ node_modules æ‰¾å‘½ä»¤npmä¼šå»å…¨å±€æ‰¾å‘½ä»¤ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œæ‰ä¼šå»å½“å‰çš„node_modulesä¸‹å¦‚12npm webpack -v æ˜¯å…¨å±€çš„ webpack ç‰ˆæœ¬npx webpack -v æ˜¯å½“å‰é¡¹ç›®å†…ä½¿ç”¨çš„ webpack ç‰ˆæœ¬ å®‰è£…æŸä¸ªç‰ˆæœ¬çš„webpack1234// æŸ¥çœ‹webpackçš„å†å²versionä¿¡æ¯npm info webpack// å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„versionnpm install webpack@version -D webpackæŸ¥è¯¢é…ç½®è·¯å¾„webpack éœ€è¦æŒ‡å®šå…¥å£æ–‡ä»¶ npx webpack index.jså…¥å£æ–‡ä»¶ä¸º index.js, webpack4ä»¥index.jsä½œä¸ºå…¥å£ã€‚ è‹¥ä¸æŒ‡å®šå…¥å£ï¼Œwebpackåˆ™å–æ‰¾ webpack.config.js æ–‡ä»¶ï¼Œè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„entryã€‚ è‹¥ä¸æŒ‡å®šå…¥å£å¹¶ä¸”æ²¡æœ‰webpack.config.jsæ–‡ä»¶ï¼Œåˆ™æŠ¥é”™ã€‚ å¦‚æœä¸æƒ³ç”¨ webpack.config.jsï¼Œå¯ä»¥ä½¿ç”¨npx webpack --config webpackconfig.jsæ¥æŒ‡å®šé…ç½®æ–‡ä»¶ã€‚ æœ€ç®€å•çš„ demo:1234567891011121314151617const path = require('path');module.exports = &#123; entry: './path/to/my/entry/file.js', output: &#123; // æ³¨æ„è¿™é‡Œæ˜¯ç»å¯¹è·¯å¾„ï¼Œwebpack4é»˜è®¤æ˜¯è¿™ä¸ªdistè·¯å¾„ï¼Œå¦‚æœä½ ä¸å†™çš„è¯ path: path.resolve(__dirname, 'dist'), // filename å¯ä»¥æŒ‡å®šç”Ÿæˆçš„æ–‡ä»¶çš„åç§° filename: 'my-first-webpack.bundle.js', // filename: '[name].bundle.js', // filename: '[name].js', // filename: '[hash].bundle.js' //b4 // filename: '[id].bundle.js' // filename: '[chunkhash].bundle.js',ed // filename: '[contenthash].bundle.js' &#125;&#125;; å¦‚ä¸‹åˆ†åˆ«æ˜¯å¯¹åº”çš„ç”Ÿæˆç»“æœï¼š ä¸ºä»€ä¹ˆ [name].jsç”Ÿæˆçš„å¯¹åº”æ˜¯ main.jså‘¢ï¼Ÿå› ä¸ºentry: &#39;xxx&#39; = entry: {main: &#39;xxx&#39;}, çœç•¥äº†åç§°ä¸º main çš„å†™æ³•ã€‚ outputè¿˜æœ‰å¾ˆå¤šoptions,å¯ä»¥å‚ç…§å®˜æ–¹æ–‡æ¡£æ¥çœ‹ã€‚output webpack4 modemode: development/production ä¸»è¦åŒºåˆ«åœ¨æ˜¯å¦å‹ç¼©ã€‚å¦‚æœé…ç½®ä¸­ä¸å†™ï¼Œé»˜è®¤æ˜¯ production,å¹¶ä¸”ä¼šæœ‰ warningã€‚ webpackæ‰“åŒ…åæ§åˆ¶å°ä¿¡æ¯ï¼šhash æœ¬æ¬¡æ‰“åŒ…çš„å”¯ä¸€ä¸€ä¸ªhashå€¼Version webpackçš„ç‰ˆæœ¬Time æ‰“åŒ…è€—æ—¶Asset æ‰“åŒ…åçš„æ–‡ä»¶åSize æ‰“åŒ…åçš„æ–‡ä»¶å¤§å°Chunks æ‰“åŒ…åæ–‡ä»¶å¯¹åº”çš„idChunk Names æ¯ä¸€ä¸ªæ‰“åŒ…åæ–‡ä»¶å¯¹åº”çš„æ‰“åŒ…æ–‡ä»¶åå­— æœ‰çš„æ—¶å€™æœ‰è­¦å‘Šæ˜¯å› ä¸ºæ²¡æœ‰é…ç½®æ‰“åŒ…çš„æ¨¡å¼ï¼šmodeï¼Œmodeæœ‰ä¸¤ç§è®¾ç½®ï¼šé»˜è®¤çš„æ˜¯productionï¼Œä»£ç ä¼šè¢«å‹ç¼©ï¼Œè¿˜å¯ä»¥æ˜¯developmentï¼Œä»£ç ä¸å‹ç¼© loaderwebpack é»˜è®¤åªçŸ¥é“æ‰“åŒ…jsæ–‡ä»¶ï¼Œpng,css ç­‰æ˜¯ä¸çŸ¥é“åº”è¯¥æ€ä¹ˆå¤„ç†çš„ã€‚ æ‰€ä»¥å¯¹äº png, css, vue è¿™ä¸€ç±»çš„æ¨¡å—èµ„æºï¼Œæˆ‘ä»¬å°±å¾—åœ¨webpacké…ç½®ä¸­ï¼Œå‘Šè¯‰webpackæ€ä¹ˆæ‰“åŒ…ã€‚å…·ä½“å°±æ˜¯æ”¾åœ¨ module é‡Œï¼Œé…ç½®ç›¸å…³çš„ruleï¼Œç„¶åç”¨ç›¸å…³çš„ loader å»å¤„ç†ã€‚ å› æ­¤å¯ä»¥ç†è§£ä¸ºï¼šloaderå°±æ˜¯æ‰“åŒ…æ–¹æ¡ˆï¼Œå¯¹éjsç»“å°¾æ¨¡å—ï¼Œè¦ç”¨loaderè¿›è¡Œå¤„ç†ã€‚ å¤„ç†å›¾ç‰‡çš„loaderè¿™é‡Œä¸¾ä¾‹ä¸¤ç§å¤„ç†å›¾ç‰‡çš„loader, file-loaderåŠurl-loader 12345678910111213141516module.exports = &#123; module: &#123; rules: [ &#123; test: /\\.(png|jpg|jpeg)$/, use: &#123; loader: 'file-loader', options: &#123; name: '[name]_[hash].[ext]', outputPath: 'images/', &#125; &#125; &#125; ] &#125;&#125; æ›´å¤šç›¸å…³é…ç½®ï¼Œè¦å‚è€ƒ webpack loader ä¸€èŠ‚ã€‚æ ‡æ³¨ä¸¤ä¸ªç»å¸¸ç”¨åˆ°çš„ç‚¹ï¼š nameæ ‡æ˜ä½ è¦ç”Ÿæˆå›¾ç‰‡çš„åç§°ï¼Œæ¯”å¦‚[name].[ext]å°±æ˜¯åŸæ–‡ä»¶åè¾“å‡ºï¼Œ[name]_[hash].[ext]å°±æ˜¯åç§°+hashåçš„æ–‡ä»¶ï¼Œå¦‚ï¼š1_752df31a916202d90967bed23f618507.pngã€‚ outputPathæ ‡æ˜ä½ è¦æŠŠæ–‡ä»¶æ”¾åœ¨å“ªä¸ªç›®å½•ä¸‹ï¼Œå¦‚dist/imagesä¸‹ã€‚è®¾ç½®è¿™é‡ŒoutputPathè¿˜å¯ä»¥æ˜¯ä¸ªå‡½æ•°ã€‚å¦‚ä¸‹ 1234567outputPath: (url, resourcePath, context) =&gt; &#123; if (/images/.test(context)) &#123; return `image_output_path/$&#123;url&#125;`; &#125; return `output_path/$&#123;url&#125;`;&#125; é‡Œé¢ file-loader åšäº†ä¸¤ä»¶äº‹æƒ…ï¼š ç§»åŠ¨æ–‡ä»¶åˆ°distæ–‡ä»¶ä¸‹ å¾—åˆ°å›¾ç‰‡åç§°ï¼Œä½œä¸ºè¿”å›å€¼ï¼Œè¿”å›åç§° æ³¨æ„file-loaderä¸ä¸€å®šæ˜¯é’ˆå¯¹å›¾ç‰‡ï¼Œå¯¹txtç­‰å…¶ä»–æ–‡ä»¶ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚ è¿˜æœ‰ä¸€ä¸ªæ˜¯ url-loader, url-loader å’Œ file-loaderã€‚ url-loaderå¯ä»¥æŠŠå›¾ç‰‡è½¬æ¢æˆbase64ç¼–ç ï¼Œå¹¶æ”¾äºjsä¸­ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯èŠ‚çº¦äº†ä¸€æ¬¡httpè¯·æ±‚ï¼Œåå¤„æ˜¯å¦‚æœå›¾ç‰‡å¤ªå¤§ï¼Œè½¬æ¢æˆçš„base64å¤ªå¤§ï¼Œå°±ä¼šå¯¼è‡´jså¤ªå¤§ï¼Œå½±å“é¡µé¢çš„åŠ è½½å’Œæ‰§è¡Œã€‚ å› æ­¤æ­£ç¡®ä½¿ç”¨ url-loader çš„å½¢å¼æ˜¯å¦‚æœå›¾ç‰‡å¾ˆå°ï¼Œæ¯”å¦‚æ˜¯ä¸ª icon, é‚£ä¹ˆç”¨ url-loader å°±å¤ªé€‚åˆäº†ã€‚ æ¯”å¦‚æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆæ¥å†™ï¼š 123456789101112131415module: &#123; rules: [ &#123; test: /\\.(png|jpg|jpeg|)$/, use: &#123; loader: 'url-loader', options: &#123; name: '[name]_[hash].[ext]', outputPath: 'images/', limit: 20480 &#125; &#125; &#125; ] &#125; å¦‚æœæ–‡ä»¶æ¯” 20k è¦å¤§ï¼Œ åˆ™url-loaderä¼šè‡ªåŠ¨ä½¿ç”¨file-loaderæ¥å¤„ç†æ–‡ä»¶ã€‚ å¤„ç†cssçš„loader1234567891011121314151617181920212223module.exports = &#123; //... module: &#123; rule: [ &#123; test: /\\.css$/, use: [ 'style-loader', &#123; loader: 'css-loader', options: &#123; importLoaders: 2, modules: true &#125; &#125;, 'sass-loader', 'postcss-loader' ] &#125; ] &#125;&#125; æ³¨æ„ï¼šloaderçš„æ‰§è¡Œé¡ºåºæ˜¯ä»ä¸‹åˆ°ä¸Šï¼Œä»å³åˆ°å·¦ï¼Œå¦‚ä¸Šé¢å°±æ˜¯å…ˆæ‰§è¡Œ postcss-loader, æœ€åæ‰§è¡Œstyle-loaderã€‚å…¶ä¸­åŒºåˆ«è§£é‡Šå¦‚ä¸‹ï¼š style-loader ç”¨æ¥æŠŠ style èŠ‚ç‚¹æ·»åŠ åˆ° dom ä¸Šçš„ï¼Œå³è´Ÿè´£æŠŠcssä»£ç æŒ‚è½½åˆ°ä¸­é—´ã€‚ css-loader ç”¨æ¥æŠŠä¸€ä¸ªæˆ–å¤šä¸ªcssæ–‡ä»¶åˆå¹¶æˆä¸€æ®µcssä»£ç ï¼Œæ¯”å¦‚æœ‰å¤šä¸ªcssæ–‡ä»¶ï¼Œå¯ä»¥åˆæˆä¸€ä¸ªã€‚ postcss-loader å¯ä»¥ç”¨æ¥å¸®æˆ‘ä»¬åšcssæ·»åŠ å‰ç¼€ï¼Œæˆ–è€…å‹ç¼©ä¼˜åŒ–cssç­‰å·¥ä½œã€‚ä¸€èˆ¬postcss-loaderéœ€è¦å»ºç«‹ä¸€ä¸ªpostcss.config.jsç”¨æ¥å†™ç›¸å…³é…ç½®ã€‚å¦‚ï¼š 12345module.exports = &#123; plugins: [ require('autoprefixer') ]&#125; è§£é‡Šcss-loaderéƒ¨åˆ†å‚æ•°çš„å«ä¹‰ï¼š importLoaders: 2ä¿è¯ä¸ç®¡æ˜¯jsä¸­å¼•ç”¨cssæ–‡ä»¶ï¼Œè¿˜æ˜¯jsä¸­å¼•ç”¨jsæ–‡ä»¶ï¼Œéƒ½è¦ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡è¿›è¡Œä½¿ç”¨loader, è€Œä¸æ˜¯åªæœ‰indexé‡Œé¢importçš„cssè¢«ä»ä¸‹åˆ°ä¸Šæ‰§è¡Œï¼Œè€Œcssé‡Œé¢å¼•ç”¨çš„æ–‡ä»¶ä¸ä¼šä»ä¸‹åˆ°ä¸Šæ‰§è¡Œã€‚ modules: trueä½¿cssæ”¯æŒæ¨¡å—åŒ–å¼•ç”¨ï¼Œå¦‚ä¸æƒ³è®©æŸä¸ªcssæ–‡ä»¶ä½œç”¨äºå…¨å±€ã€‚123import style from './1.css'img.classList.add(style.avatar) è¿™æ ·ï¼Œstyleä¸­çš„æ ·å¼å¯ä»¥åªé’ˆå¯¹æŸäº›åœ°æ–¹ç”Ÿæ•ˆï¼Œè€Œä¸æ˜¯å…¨å±€ç”Ÿæ•ˆã€‚å…¶å®æˆ‘æœ€ç»å¸¸ç”¨çš„æ˜¯ import &#39;./1.css&#39; ä½œç”¨äºå…¨å±€,å› ä¸ºæˆ‘ä»¬çš„æ ·å¼éƒ½æ˜¯é‡æ„ç»Ÿä¸€ç»™åˆ°çš„ã€‚ å¤„ç†å­—ä½“æ–‡ä»¶çš„loaderå½“æˆ‘ä»¬å†cssã€sassæ–‡ä»¶ä¸­å¼•å…¥äº†å­—ä½“æ–‡ä»¶ï¼Œå¦‚eot, ttf, svg,å¦‚æœæˆ‘ä»¬ä¸å‘Šè¯‰webpackï¼Œwebpackä¼šæŠ¥é”™1234@font-face &#123; font-family: \"iconfont\", src: url('./font/iconfont.eot')&#125; å› ä¸ºwebpackå¹¶ä¸çŸ¥é“å¦‚ä½•å»å¤„ç†å¹¶å¼•å…¥è¿™äº›æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»™è¿™äº›ç»“å°¾çš„æ–‡ä»¶ï¼ˆå­—ä½“ï¼‰ï¼Œä½¿ç”¨ file-loaderï¼Œå¦‚ï¼š123456&#123; test: /\\.(eot|ttf|svg)$/, use: &#123; loader: 'file-loader' &#125;&#125; é™¤äº†ä¸Šè¿°loader,è¿˜æœ‰å…¶ä»–å¦‚ xml-loader, cvs-loader ç­‰,å¯ä»¥å‚è€ƒç€ä¸€èŠ‚ã€‚loader1234567891011121314151617181920212223242526272829303132333435363738394041424344 const path = require('path'); module.exports = &#123; entry: './src/index.js', output: &#123; filename: 'bundle.js', path: path.resolve(__dirname, 'dist') &#125;,- module: &#123;- rules: [- &#123;- test: /\\.css$/,- use: [- 'style-loader',- 'css-loader'- ]- &#125;,- &#123;- test: /\\.(png|svg|jpg|gif)$/,- use: [- 'file-loader'- ]- &#125;,- &#123;- test: /\\.(woff|woff2|eot|ttf|otf)$/,- use: [- 'file-loader'- ]- &#125;,- &#123;- test: /\\.(csv|tsv)$/,- use: [- 'csv-loader'- ]- &#125;,- &#123;- test: /\\.xml$/,- use: [- 'xml-loader'- ]- &#125;- ]- &#125; &#125;; æ€»ç»“æœ¬ç¯‡ä¸»è¦è·Ÿ loader ç›¸å…³ã€‚ç†è§£webpackæ˜¯ä»»ä½•æ—¶å€™å¯ä»¥æŠŠä»»ä½•ç±»å‹çš„æ–‡ä»¶éƒ½å½“æˆæ¨¡å—å»å¤„ç†ã€‚ ç†è§£ loader æ˜¯ä¸ºäº†å‘Šè¯‰ webpack ä»€ä¹ˆæ ·çš„æ–‡ä»¶ï¼Œåº”è¯¥ç”¨ä»€ä¹ˆæ ·çš„ä¸œè¥¿å¤„ç†ã€‚ å³loader æ˜¯æ‰“åŒ…æ–¹æ¡ˆï¼Œæ˜¯å‘Šè¯‰ webpack é js ç»“å°¾çš„åº”è¯¥æ€ä¹ˆå¤„ç†ã€‚","categories":[],"tags":[]},{"title":"import or require?","slug":"import-or-require","date":"2018-12-05T13:25:18.000Z","updated":"2018-12-05T07:16:21.000Z","comments":true,"path":"2018/12/05/import-or-require/","link":"","permalink":"http://sevencai.github.io/2018/12/05/import-or-require/","excerpt":"","text":"ä¹‹æ‰€ä»¥ä¼šå»å†™è¿™ä¸ªï¼Œæ˜¯å› ä¸ºè‡ªå·±æœ€è¿‘é‡åˆ°äº† import çš„ä¸€ä¸ªé—®é¢˜ã€‚ æ‰¾é—®é¢˜çš„è¿‡ç§°ä¸­ï¼Œå‘ç°è‡ªå·±è™½ç„¶ä¸€ç›´åœ¨ç”¨ importï¼Œä½†å¯¹ require/import çš„åŒºåˆ«å¹¶æ²¡æœ‰äº†è§£çš„å¾ˆå…¨é¢ã€‚ å…·ä½“çš„ç‚¹å°±åœ¨ Imports are hoistedã€‚è¶æ­¤æœºä¼šå¤§æ¦‚çš„é‡æ–°æ€»ç»“ä¸‹ã€‚ å†å²è¿½æº¯ äº†è§£å†å²ï¼Œä¸ä¸€å®šæ˜¯ä½¿ç”¨å†å²ï¼Œå´å¯ä»¥å¯¹æ•´ä½“çš„çŸ¥è¯†æœ‰ä¸ªå¤§è‡´çš„è®¤è¯†ã€‚æˆ‘è‡ªå·±æ²¡æœ‰ç»å†è¿‡ SeaJS/RequireJS æ—¶ä»£ï¼Œæ‰€ä»¥å¯¹å®ƒé‡Œé¢å…·ä½“çš„åŸç†å®ç°å’Œç”¨æ³•ä¸æ˜¯ç‰¹åˆ«ç†Ÿæ‚‰ã€‚åªæ˜¯çœ‹åˆ°ç»„é‡Œä»¥å‰åŒäº‹çš„æ—§ä»£ç ï¼Œæ‰å‘ç°é‚£å‡ å¹´ç¡®å®å¯èƒ½å¾ˆç«ã€‚ å…³äº CommonJS, RequireJS, SeaJS , æˆ‘å¤§è‡´çš„ç”»äº†å¦‚ä¸‹ä¸€ä¸ªå›¾æ¥æè¿°ï¼š æ€»ç»“ä¸ºä¸‹é¢å‡ ç‚¹ï¼š CommonJS å›  Nodejs è€Œç”Ÿï¼Œæ˜¯ Nodejs çš„è§„èŒƒï¼Œä¸€ç›´æ²¿ç”¨è‡³ä»Šã€‚ ç”±äºæµè§ˆå™¨ç«¯ä¹Ÿéœ€è¦æ¨¡å—åŒ–çš„åŸå› ï¼Œç”± CommonJS è¡ç”Ÿå‡ºæ¥äº† AMD å’Œ CMD è§„èŒƒã€‚ åŸºäº AMD/CMD è§„èŒƒï¼Œå‡ºç°äº†ä¸¤ä¸ªåŸºäºæ­¤è§„èŒƒçš„åº“ã€‚åˆ†åˆ«æ˜¯ RequireJS, SeaJSã€‚ RequireJS æ˜¯ AMD çš„è§„èŒƒã€‚ç‰¹ç‚¹æ˜¯ï¼šæå‰åŠ è½½ã€‚ SeaJS æ˜¯ CMD çš„è§„èŒƒã€‚ç‰¹ç‚¹æ˜¯ï¼šæŒ‰éœ€åŠ è½½ã€‚ç”¨åˆ°æ—¶æ‰åŠ è½½ã€‚ ç°åœ¨æ–°çš„æ ‡å‡† ES6 import/export å‡ºç°ï¼Œä½†æ˜¯å¾ˆå¤šæµè§ˆå™¨è¿˜æœªå®ç°ï¼Œæ‰€ä»¥æœ€ç»ˆè¿˜æ˜¯éœ€è¦ç”¨ babel è½¬æ¢æˆ CommonJSã€‚ import/export æ˜¯å¤§åŠ¿æ‰€è¶‹ã€‚ å…·ä½“çš„æƒ³çœ‹ AMD/CMD çš„åŒºåˆ«ï¼Œå¯ä»¥å‚è€ƒ 16 å¹´æˆ‘æ€»ç»“çš„æ–‡ä»¶ã€‚AMDå’ŒCMDçš„åŒºåˆ«å’Œè”ç³»ã€‚ import / require åŒºåˆ« (Commonjs pk ES6) å†™æ³•ä¸åŒCommonJS çš„æ¨¡å—åŒ–ï¼Œrequire/exports åŸºæœ¬ä¸Šåªæœ‰ä¸‹é¢è¿™å‡ ç§å†™æ³•ã€‚123456const fs = require('fs')exports.fs = fsmodule.exports = fsfs.readFileSync(path) import çš„å†™æ³•å¤šç§å¤šæ ·ï¼Œæ¯”å¦‚12345678910111213import * as cookie from './cookie'import &#123; getCookie, setCookie &#125; from './cookie'import cookie, &#123; getCookie &#125; from './cookie'// ä¸‹é¢ä¸¤è€…ç›¸åŒimport &#123; default as cookie &#125; from './cookie'import cookie from './cookie'export default cookieexport cookieexport &#123; getCookie, setCookie &#125; ç­‰ç­‰å†™æ³•ã€‚ import æ¯”è¾ƒçµæ´»ï¼Œå¹¶ä¸”æ”¯æŒéƒ¨åˆ†æ¨¡å—çš„å¯¼å…¥ã€‚ä¸åƒ require å…¨éƒ¨å¯¼å…¥ã€‚ åŠ è½½é¡ºåºä¸åŒ - Imports are hoistedES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶åŠ è½½ï¼Œä½¿å¾—é™æ€åˆ†ææˆä¸ºå¯èƒ½ã€‚ import ä¼šæå‰åŠ è½½ï¼Œç±»ä¼¼äº JS é‡Œçš„æ¦‚å¿µ å˜é‡æå‡ã€‚ä¹Ÿå°±å¯ä»¥ç†è§£ä¸º import æ€»è¢«å…ˆç§»åˆ°ä¸Šé¢å»æ‰§è¡Œã€‚1234567891011// config.jsconsole.log('in config')export default &#123; port: 80 &#125;// main.jsconsole.log('begin load')import config from './config'console.log('load finished') æ‰§è¡Œ main.js å°†è¿”å›ï¼š123in configbegin loadload finished ä¹Ÿå°±æ˜¯è¯´è¿™ä¹ˆå†™ä¸ä¼šæŠ¥é”™ï¼š123renderData()import &#123; renderData &#125; from '../util' ä½†æ˜¯è¿™ä¹ˆå†™ä¼šæŠ¥é”™ï¼š123456// æŠ¥é”™if (x === true) &#123; import MyModual from &apos;./myModual&apos;;&#125;import x+var from &apos;./&apos; + filename import æ˜¯åœ¨ç¼–è¯‘æ—¶ï¼Œif è¿™äº›è¯­å¥éƒ½ä¼šè¢«å¿½ç•¥ï¼Œä¼šè¢«æåˆ°æœ€ä¸Šé¢ã€‚å› æ­¤ä¼šæŠ¥è¯­æ³•é”™è¯¯ï¼Œè€Œä¸æ˜¯æ‰§è¡Œçš„é”™è¯¯ã€‚æ‰€ä»¥import export æœ€å¥½å°±æ”¾åœ¨æœ€é¡¶å±‚ã€‚ä¸è¦åœ¨å‡½æ•°æˆ–è€…æ¡ä»¶è¯­å¥ä¸­ã€‚ require æ˜¯éé™æ€ç¼–è¯‘ç±»å‹ã€‚æ˜¯ CommonsJS è¿™ç§ï¼Œè¿è¡Œæ—¶åŠ è½½,æ‰€ä»¥å¯ä»¥åŠ¨æ€å»æ‹¼æ¥æ¨¡å—ã€‚ å¯¹äºRequireæ¥è¯´è¿è¡Œç»“æœå°±æ˜¯ï¼š12345678910// config.jsconsole.log('in config')module.exports = &#123;port: 80&#125;// main.jsconsole.log('begin load')var config = require('./config.mjs')console.log('load finished') å¾—åˆ°çš„ç»“æœï¼Œè·Ÿæˆ‘ä»¬çš„é¢„æœŸç›¸åŒã€‚123begin loadin configload finished Imports åªå¯è¯» - Imports are read-only views on exportsè¿™ç‚¹å¯ä»¥é˜…è¯»è¿™ä¸ªæ–‡æ¡£ï¼šè®²çš„å¾ˆæ¸…æ¥šã€‚çœ‹ä¸ªä¾‹å­ï¼š12345678910111213// counter.jsexport let counter = 3;export function incCounter() &#123; counter++;&#125;// main.jsimport &#123; counter, incCounter &#125; from './counter';// The imported value `counter` is liveconsole.log(counter); // 3incCounter();console.log(counter); // 4 ä¸Šé¢è¿™ç§æ˜¯okçš„ï¼Œä½†æ˜¯ä¸‹é¢è¿™ç§æ˜¯ä¸åˆæ³•çš„ï¼š123import &#123; counter, incCounter &#125; from './counter';counter++ // TypeError Note that while you canâ€™t change the values of imports, you can change the objects that they are referring to. For example: 12345678// lib.jsexport let obj = &#123;&#125;;// main.jsimport &#123; obj &#125; from './lib';obj.prop = 123; // OKobj = &#123;&#125;; // TypeError è¿™ç‚¹æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºï¼Œå˜é‡çš„åœ°å€æ˜¯ä¸èƒ½æ”¹å˜çš„ï¼Œé‡æ–°èµ‹å€¼æ—¶ï¼Œå˜é‡çš„åœ°å€å˜äº†ï¼Œè¿™ä¸ªä¸å…è®¸ï¼Œä½†æ˜¯ä½ å¦‚æœæ”¹å˜å¯¹è±¡çš„é‡Œé¢å±æ€§çš„å€¼ï¼Œåœ°å€æ˜¯ä¸å˜çš„ã€‚ è¿™ä¸ªå°±åƒä½ å£°æ˜ä¸€ä¸ª const obj, ä¹Ÿå¯ä»¥æ›´æ”¹ Obj.value ä¸€æ ·ã€‚ Require ä¸åŒï¼Œä½ å¯ä»¥ä¿®æ”¹é‡Œé¢çš„å†…å®¹ã€‚ æ¨èæ–‡ç« ï¼š ruanyifeng-es6-module å€¼å¼•ç”¨ or å€¼æ‹·è´123456789101112// counter.jsexport let count = 0setTimeout(function () &#123; console.log('increase count to', ++count, 'in counter.js after 500ms')&#125;, 500)// main.jsimport &#123;count&#125; from './counter.mjs'setTimeout(function () &#123; console.log('read count after 1000ms in es6 is', count)&#125;, 1000) å¾—åˆ°çš„ç»“æœæ˜¯ï¼š12increase count to 1 in counter.js after 500msread count after 1000ms in es6 is 1 å¦å¤–ä¸€æ®µä»£ç 1234567891011// counter.jsexports.count = 0setTimeout(function () &#123; console.log('increase count to', ++exports.count, 'in counter.js after 500ms')&#125;, 500)// main.jsconst &#123;count&#125; = require('./counter')setTimeout(function () &#123; console.log('read count after 1000ms in commonjs is', count)&#125;, 1000) å¾—åˆ°çš„ç»“æœæ˜¯ï¼š12increase count to 1 in counter.js after 500msread count after 1000ms in commonjs is 0 å¤§æ¦‚çš„æ„æ€å…¶å®å°±æ˜¯ï¼šCommonJSæ¨¡å—æ˜¯è¿è¡Œè¾“å‡º(åŠ è½½)ä¸€ä¸ªå€¼(æˆ–å¯¹è±¡)çš„æ‹·è´ï¼Œè€ŒES6æ¨¡å—åˆ™æ˜¯ç¼–è¯‘æ—¶è¾“å‡º(åŠ è½½)ä¸€ä¸ªå€¼çš„å¼•ç”¨(æˆ–è€…å«åšè¿æ¥). æ€»ç»“æœ¬åœ°æµ‹è¯• import æ—¶å¯ä»¥ä½¿ç”¨ --experimental-modules å®éªŒæ¨¡å—æ ‡å¿—æ¥å¯ç”¨åŠ è½½ ECMAScript Modules çš„ç‰¹æ€§ã€‚ ä½œä¸ºESæ¨¡å—åŠ è½½çš„æ–‡ä»¶åï¼Œé¡»ä»¥.mjsåç¼€ç»“å°¾ 1234node --experimental-modules app.mjs// æ­¤ç§æ–¹æ³•ï¼Œåœ¨è¾“å‡ºçš„æ—¶å€™ä¼šæç¤ºï¼š(node:6527) ExperimentalWarning: The ESM module loader is experimental. çº¿ä¸Šç¯å¢ƒè¿˜æ˜¯ç”¨ babel å»è½¬ ~","categories":[],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"async await åšäº†ä»€ä¹ˆäº‹æƒ…","slug":"async-await-åšäº†ä»€ä¹ˆäº‹æƒ…","date":"2018-12-03T13:10:02.000Z","updated":"2018-12-04T04:04:16.000Z","comments":true,"path":"2018/12/03/async-await-åšäº†ä»€ä¹ˆäº‹æƒ…/","link":"","permalink":"http://sevencai.github.io/2018/12/03/async-await-åšäº†ä»€ä¹ˆäº‹æƒ…/","excerpt":"","text":"ç»„é‡Œçš„ä¸€ä¸ªæœ‰è¶£åˆå¾ˆä¸¥è°¨çš„åŒäº‹ï¼Œä»Šå¤©åœ¨çº ç»“ä¸€ä¸ªä¸çœ‹èµ·æ¥æ˜¯é—®é¢˜çš„é—®é¢˜ï¼Œå…¶å®è¿™ç§æ„Ÿè§‰å°±åƒä½ ç»å¸¸è¿™ä¹ˆç”¨æˆ–è€…è¿™ä¹ˆæƒ³çš„ä¸€ä¸ªä¸œè¥¿ï¼ŒæŸä¸€å¤©æŸä¸ªæ—¶åˆ»ï¼Œä½ çªç„¶ä¸çŸ¥é“ä¸ºä»€ä¹ˆäº†ï¼Œå°±åƒæˆ‘å¶å°”ä¼šå»çº ç»“ä¸ºä»€ä¹ˆæŸä¸ªæ±‰å­—æ˜¯è¿™æ ·å†™ï¼š ä»–è®¤ä¸ºæœ€ååº”è¯¥ res === b,è€Œä¸æ˜¯ res === a, æˆ‘è®¤ä¸ºå¾ˆæ˜æ˜¾åº”è¯¥ res === a, å› ä¸ºå¤§å®¶å¹³æ—¶ä¸€ç›´éƒ½æ˜¯è¿™ä¹ˆç”¨çš„, ä½†æ˜¯è·Ÿä»–è®²ç†ç”±çš„æ—¶å€™ï¼Œç«Ÿç„¶è¯­å¡äº†ã€‚ å…³äº async ğŸš¶äºæ˜¯æˆ‘å»æ‰¾äº†ä¸€æ®µ MDN ä¸Šçš„è§£é‡Šï¼š å½“è°ƒç”¨ä¸€ä¸ª async å‡½æ•°æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚å½“è¿™ä¸ª async å‡½æ•°è¿”å›ä¸€ä¸ªå€¼æ—¶ï¼ŒPromise çš„ resolve æ–¹æ³•ä¼šè´Ÿè´£ä¼ é€’è¿™ä¸ªå€¼ï¼›å½“ async å‡½æ•°æŠ›å‡ºå¼‚å¸¸æ—¶ï¼ŒPromise çš„ reject æ–¹æ³•ä¹Ÿä¼šä¼ é€’è¿™ä¸ªå¼‚å¸¸å€¼ã€‚ ä¸Šé¢è¿™å¥è¯æˆ‘ç”¨ä¸¤ä¸ªç²—ä½“æ ‡æ˜äº†ä¸¤å¥è¯ï¼Œç¬¬ä¸€å¥è¯æ„æ€æ˜æ˜¾ï¼Œæ„ä¸ºï¼š 12345let a = &#123;&#125;async function test() &#123; return a&#125; è°ƒç”¨ test() å¾—åˆ°çš„æ˜¯ä¸€ä¸ª Promise, ä¹Ÿå°±æ˜¯æ— è®ºå‡½æ•°å†…è¿”å›ï¼ˆreturnï¼‰çš„æ˜¯ä»€ä¹ˆï¼ˆå¸¸é‡ or å­—ç¬¦ä¸² or Promise or å…¶å®ƒï¼‰ï¼Œ async æ€»ä¼šç”¨ Promise.resolve åŒ…ä¸€å±‚ï¼Œå¦‚è‹¥ async é‡Œé¢æœ‰å¼‚å¸¸ï¼Œ ä¼š throw Errorã€‚ å¦‚æœ test å†…ä»€ä¹ˆéƒ½ä¸è¿”å›ï¼Œä¹Ÿä¼šå¾—åˆ° Promise.resolve(undefined), æ€»ä¹‹ async æ€»è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚ å†çœ‹åé¢ä¸€å¥è§£é‡Šï¼š Promise çš„ resolve æ–¹æ³•ä¼šè´Ÿè´£ä¼ é€’è¿™ä¸ªå€¼ï¼› å“‡ï¼Œæ˜¯ä¸æ˜¯çªç„¶é—´è§‰å¾—æˆ‘åŒäº‹ç–‘æƒ‘çš„æ˜¯å¯¹çš„äº†ã€‚å…¶å®ä¸è¦å—è¿™å¥è¯çš„å½±å“ã€‚å®ƒè¯´çš„ä¼ é€’ï¼Œå…¶å®å°±æ˜¯returnè¿‡å»çš„æ—¶å€™æ˜¯ä¼ é€’çš„ã€‚æ€»ç»“ä¸‹ï¼š æˆ‘ä»¬å°±ç†è§£ä¸ºï¼šasync è¿”å›äº†ä¸€ä¸ªåŒ…å«æ”¹å€¼çš„ Promiseã€‚ åˆ†æä¸‹é¢è¿™æ®µä»£ç çš„æ‰§è¡Œï¼š 123test() .then(res =&gt; res === a) // true é‚£ä¹ˆä¸ºä»€ä¹ˆ test().then(a =&gt; { a === {} }) åˆæ˜¯å¯¹çš„äº†å‘¢ï¼Ÿ ä¸æ˜¯è¯´è¿”å›äº†ä¸€ä¸ª Promise å—ï¼Ÿ æ€ä¹ˆåˆæ˜¯ä¸€ä¸ªå¯¹è±¡å€¼äº†ï¼Ÿ(æ³¨æ„è¿™é‡Œæ˜¯å€¼å¼•ç”¨ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥è¿™ä¹ˆæ¯”è¾ƒ) è¿™æ˜¯å› ä¸º Promise.then é‡Œé¢ä¼šåœ¨é‡æ–°æ¥æ”¶è¿™ä¸ªå€¼çš„æ—¶å€™ï¼Œå¾—åˆ°çš„ä¸å†æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè€Œæ˜¯ä¸€ä¸ªè¢«è§£æè¿‡äº†çš„å€¼ã€‚ ä¹Ÿå°±æ˜¯è¯´ä¸‹é¢è¿™æ®µä»£ç çš„å«ä¹‰ï¼š 12345678.then(r =&gt; &#123; // è¿”å›ä¸€ä¸ª Promise ï¼Œå†…å®¹ä¸º statusCode 404 return getServerStatusCode(r);&#125;).then(res =&gt; &#123; // res ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä¸æ˜¯ä¸€ä¸ª Promise, å› ä¸ºå·²ç»è¢«è§£æè¿‡äº† console.log(res.statusCode);&#125;) è¿™ä¸ªæ—¶å€™ï¼Œä½  then é‡Œé¢çš„å€¼ï¼Œå°±è·Ÿä½ ç”¨ await å¾—åˆ°çš„ä¸€æ ·äº†ã€‚ å…³äº await ğŸ‘‚await ç­‰å¾…çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ await æ“ä½œç¬¦ç”¨äºç­‰å¾…ä¸€ä¸ªPromise å¯¹è±¡ã€‚å®ƒåªèƒ½åœ¨å¼‚æ­¥å‡½æ•° async function ä¸­ä½¿ç”¨ã€‚ ä¸Šé¢æ˜¯ MDN é‡Œçš„è¯´æ˜ï¼Œæˆ‘è§‰å¾—ä¸å¤ªå¯¹ï¼Œ await ä¸ä¸€å®šæ˜¯ç­‰å¾…ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå®ƒè¦ç­‰å¾…çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡æˆ–è€…ä»»ä½•è¦ç­‰å¾…çš„å€¼ã€‚ã€‚ å¦‚æœå®ƒç­‰å¾…çš„ä¸æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¦‚ await 3 , é‚£ä¹ˆè¡¨è¾¾å¼çš„è¿ç®—ç»“æœå°±æ˜¯å®ƒç­‰å¾…çš„ä¸œè¥¿ã€‚ å¦‚æœå®ƒç­‰å¾…çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œ å¦‚ await Promise.resolve(3), é‚£ä¹ˆ await ä¼šé˜»å¡åé¢çš„ä»£ç ï¼Œç­‰å¾… Promise å¯¹è±¡ resolve or rejectã€‚ çœ‹ä¸‹ä¸‹é¢è¿™ç§æƒ…å†µï¼š 12345678910111213141516171819var a = Promise.reject(&#123;&#125;)async function abc() &#123; return a &#125;async function main() &#123; let obj = null try &#123; obj = await abc() &#125; catch (err) &#123; console.log(\"err\") &#125; console.log(\"main\", obj === a) // false console.log(\"test\", obj === &#123;&#125;) // false console.log(obj) // null console.log(JSON.stringify(obj) === JSON.stringify(a))&#125;main() å¾ˆæ˜æ˜¾ï¼Œ obj æ˜¯ç­‰äº null çš„ï¼Œå› ä¸º await ç­‰å¾…çš„æ˜¯ä¸€ä¸ª reject çš„ç»“æœã€‚å¯¼è‡´äº†å¼‚å¸¸è¢«æŠ›å‡ºæ¥äº†ã€‚æ‰€ä»¥èµ‹å€¼ç­‰å·¥ä½œéƒ½æ²¡æœ‰è¿›è¡Œã€‚ await è¡¨è¾¾å¼ä¼šæš‚åœå½“å‰ async function çš„æ‰§è¡Œï¼Œç­‰å¾… Promise å¤„ç†å®Œæˆã€‚è‹¥ Promise æ­£å¸¸å¤„ç†(fulfilled)ï¼Œå…¶å›è°ƒçš„resolveå‡½æ•°å‚æ•°ä½œä¸º await è¡¨è¾¾å¼çš„å€¼ï¼Œç»§ç»­æ‰§è¡Œ async functionã€‚ è‹¥ Promise å¤„ç†å¼‚å¸¸(rejected)ï¼Œawait è¡¨è¾¾å¼ä¼šæŠŠ Promise çš„å¼‚å¸¸åŸå› æŠ›å‡ºã€‚ å¦å¤–ï¼Œå¦‚æœ await æ“ä½œç¬¦åçš„è¡¨è¾¾å¼çš„å€¼ä¸æ˜¯ä¸€ä¸ª Promiseï¼Œåˆ™è¿”å›è¯¥å€¼æœ¬èº«ã€‚ MDN çš„è§£é‡Šè·Ÿæˆ‘ä»¬ç†è§£çš„ç›¸åŒã€‚ä¹Ÿå°±æ˜¯è¯´ await å¦‚æœå¾—åˆ°çš„æ˜¯ä¸€ä¸ª reject çš„ç»“æœï¼Œä¼šç›´æ¥ throw ä¸€ä¸ª Error å‡ºæ¥ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸ºäº†é¿å…æŠ¥é”™ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ async await è¿›è¡Œ try catch çš„åŸå› ã€‚ ä½¿ç”¨ async await è¦æ³¨æ„çš„åœ°æ–¹async await è®¾è®¡æœ¬èº«æ˜¯ä¸ºäº†è®©æˆ‘ä»¬é˜²æ­¢åœ°ç‹±å›è°ƒçš„ï¼Œä½†æ˜¯æ˜¯ä¸èƒ½å¤Ÿæ»¥ç”¨ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªå¾ˆç»å…¸çš„ä¾‹å­ï¼š123456(async () =&gt; &#123; const pizza = await selectPizza() const drink = await selectDrink() order(pizza, drink); // async call&#125;)(); ä¸Šé¢çš„ getPizzaInfo å’Œ getDrinkInfo å®é™…å¹¶æ²¡æœ‰ä»»ä½•ä¾èµ–å…³ç³»ï¼Œè¿™ä¹ˆå†™è¿˜å¢åŠ äº†ç­‰å¾…çš„æ—¶é—´ã€‚æ‰€ä»¥åœ¨ç”¨ async await çš„æ—¶å€™ï¼Œä¸€å®šè¦å……åˆ†ç†è§£ä»–ä»¬çš„å…³ç³»ã€‚å¯ä»¥ä¼˜åŒ–å¦‚ä¸‹ï¼š 1234567891011(async () =&gt; &#123; const pizzaPromise = selectPizza(); const drinkPromise = selectDrink(); const pizza = await pizzaPromise; const drink = await drinkPromise; order(pizza, drink); // async call&#125;)();// æˆ–è€…(async () =&gt; &#123; Promise.all([selectPizza(), selectDrink()]).then(order); // async call&#125;)(); å†ä¸¾ä¸ªä¾‹å­ï¼š1234567a(() =&gt; &#123; b();&#125;);c(() =&gt; &#123; d();&#125;); æœ€åå†™æˆäº†ï¼š1234await a();await b();await c();await d(); è¿™ç§åŸæœ¬ d åªéœ€è¦ç­‰å¾… c çš„ï¼Œç»“æœå˜æˆè¦ç­‰å¾… a,b,cã€‚ æ—¶é—´æ…¢äº†å¾ˆå¤šã€‚æ€§èƒ½ä¸å¥½ã€‚ç¨æ”¹ä¸€ä¸‹ã€‚ 12345678const aPromise = a()const cPromise = c()await aPromise()b()await cPromise()d() è¿™æ ·ä¼šç¨å¾®å¥½ç‚¹äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰é—®é¢˜ï¼Œ dç”±åŸæ¥çš„éœ€è¦ç­‰å¾… c, å˜æˆäº†éœ€è¦ç­‰å¾… a,c(å¦‚æœaçš„è¿”å›æ—¶é—´è¦å¤§äºc) æ‰€ä»¥å¯ä»¥æ”¹æˆä¸‹é¢è¿™ä¸¤ç§æ–¹å¼ï¼š123456789101112131415161718(async() &#123; await a() b()&#125;)()(async() &#123; await c() d()&#125;)()// æˆ–è€…æ”¹ä¸ºPromise.all([a(), c()]) .then(res =&gt; &#123; return Promise.all([b(), d()]) &#125;) æ€»ä¹‹ç”¨ async, await çš„æ—¶å€™å¾—å¤šæƒ³æƒ³ã€‚ æ€»ç»“æœ‰å¥½å¥‡å¿ƒå’Œæ¢ç´¢çŸ¥è¯†çš„æ¬²æœ›æ˜¯å¥½äº‹ï¼Œå½“åˆ«äººé—®ä½ çš„é—®é¢˜çš„æ—¶å€™ï¼Œå¦‚æœä½ ä¸èƒ½æŠŠåˆ«äººè§£é‡Šæ¸…æ¥šçš„æ—¶å€™ï¼Œé‚£ä¹ˆå¯èƒ½ä»–çš„é—®é¢˜åŒæ ·å°±æ˜¯ä½ çš„é—®é¢˜~","categories":[],"tags":[]},{"title":"æ€»ç»“å‡ ä¸ªæœ€è¿‘é‡åˆ°çš„é—®é¢˜","slug":"æ€»ç»“å‡ ä¸ªæœ€è¿‘é‡åˆ°çš„é—®é¢˜","date":"2018-11-27T13:08:19.000Z","updated":"2018-11-27T13:19:43.000Z","comments":true,"path":"2018/11/27/æ€»ç»“å‡ ä¸ªæœ€è¿‘é‡åˆ°çš„é—®é¢˜/","link":"","permalink":"http://sevencai.github.io/2018/11/27/æ€»ç»“å‡ ä¸ªæœ€è¿‘é‡åˆ°çš„é—®é¢˜/","excerpt":"","text":"æœ€è¿‘çœ‹äº†äº›æ–‡ç« ï¼Œé‡åˆ°äº†å†™é—®é¢˜ï¼ŒèŠ±äº†ç‚¹æ—¶é—´æ€»ç»“å¦‚ä¸‹ã€‚ localhost å’Œ 127.0.0.1ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„ç”µè„‘å¯èƒ½æœ‰ä¸‰å—ç½‘å¡ã€‚åˆ†åˆ«æ˜¯ğŸŒ¹ï¼š ä¸€å—å« loopback çš„è™šæ‹Ÿç½‘å¡ ä¸€å—å« ethernet çš„æœ‰é™ç½‘å¡ ä¸€å—å« wlan çš„æ— é™ç½‘å¡ æˆ‘ä»¬ç”µè„‘çš„æœ¬æœº IP ï¼Œå¯ä»¥ç†è§£ä¸ºæ—¶çœŸå®ç½‘å¡çš„ IP, æœ‰é™å’Œæ— é™åˆ†åˆ«æœ‰ä¸€ä¸ªã€‚æ˜¯ç½‘ç»œå‡ºå£IPã€‚ ç°åœ¨ä¸»è¦æ˜¯äº†è§£ä¸‹è¿™ä¸ª è™šæ‹Ÿçš„ç½‘å¡ loopback å®ƒæ˜¯ä»€ä¹ˆï¼Œä»¥åŠå®ƒå’Œ 127.0.0.1 çš„å…³ç³»ã€‚ 127.0.0.1 åˆ° 127.255.255.255æ•´ä¸ªéƒ½æ˜¯ç¯å›åœ°å€(loopback)ï¼Œç”¨æ¥æµ‹è¯•æœ¬æœºçš„TCP/IPåè®®æ ˆï¼Œå‘å¾€è¿™æ®µAç±»åœ°å€æ•°æ®åŒ…ä¸ä¼šå‡ºç½‘å¡ï¼Œç½‘ç»œè®¾å¤‡ä¸ä¼šå¯¹å…¶åšè·¯ç”±, ä¹Ÿå°±æ˜¯åªåœ¨æœ¬åœ°åšå›ç¯è®¿é—®ï¼Œæ•…åªèƒ½æœ¬æœºè®¿é—®ã€‚ æ‰€ä»¥ç¯å›åœ°å€æ˜¯ä¸»æœºç”¨äºå‘è‡ªèº«å‘é€é€šä¿¡çš„ä¸€ä¸ªç‰¹æ®Šåœ°å€ï¼Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç›®çš„åœ°å€ã€‚å› æ­¤å¦‚æœä¸€å°ä¸»æœºä¸Šçš„ä¸¤é¡¹æœåŠ¡å¦‚æœä½¿ç”¨çš„æ˜¯ç¯å›åœ°å€è€Œéåˆ†é…çš„ä¸»æœºåœ°å€ï¼Œå°±å¯ä»¥ç»•å¼€ TCP/IP åè®®æ ˆçš„ä¸‹å±‚ï¼Œä¸ç”¨å†é€šè¿‡é“¾è·¯å±‚ï¼Œç‰©ç†å±‚ï¼Œä»¥å¤ªç½‘ç­‰ä¼ å‡ºå»ã€‚ è€Œlocalhost æ˜¯ä¸€ä¸ª åŸŸåï¼Œä¸€èˆ¬æŒ‡å‘ 127.0.0.1ï¼Œ å®é™…ä¸Šå®ƒä¹Ÿå¯ä»¥æŒ‡å‘ä»»ä½•ä¸€ä¸ªip, å¯ä»¥å»ç³»ç»Ÿæ–‡ä»¶ä¸­ä¿®æ”¹ã€‚ ä¹‹æ‰€ä»¥å»äº†è§£è¿™ä¸ªï¼Œå…¶å®æ˜¯å› ä¸ºæœ€è¿‘è¸©äº†ä¸‹é¢ä¸ªå‘ï¼Œé¡ºå¸¦ä¹Ÿå»äº†è§£äº†ä¸‹è¿™ä¸ªã€‚ whistle è½¬å‘ header host è¢«æ›´æ”¹é—®é¢˜âåŒäº‹Bä¸ºäº†åœ¨é¡µé¢å†… include ä¸€ä¸ª php cgi è¿”å›çš„ token, å¸Œæœ›èƒ½å¤Ÿåœ¨ apache é‡Œé¢é…ç½®ä»£ç†è½¬å‘ï¼Œå½“çœ‹åˆ°äº†è¿™ä¸ªincludeçš„ cgi åï¼Œå³è½¬å‘åˆ°å¯¹åº”çš„ æœºå™¨ä¸Šã€‚ å¥¹å‘ç° php çš„æ¥å£å·²ç»æˆåŠŸè½¬å‘åˆ°æµ‹è¯•æœºå™¨ä¸Šï¼Œä½†æ˜¯è¿”å›çš„å†…å®¹ä¸æ­£å¸¸ï¼Œåœ¨å¸®å¥¹è°ƒè¯•æ¥å£åï¼Œå‘ç°åå°æ¥å£éªŒè¯äº† Valid Host, è€Œå¥¹çš„ host è¿˜æ˜¯æœ¬æœºçš„ localhostã€‚ å¥¹ç›¸å…³çš„whistle é…ç½®ä¸ºï¼š1pay.qq.com localhost/wechat_h5/dist/h5/store/views/ å¯ä»¥é€šè¿‡ pay.qq.com/index.shtml ç›´æ¥è®¿é—®åˆ°å¯¹åº”çš„æœ¬åœ°é¡µé¢ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆ header é‡Œé¢çš„ host ç«Ÿç„¶ä¸æ˜¯ pay.qq.com è€Œæ˜¯ localhost å‘¢ï¼ŸâŒ è¿™é‡Œæ˜¯ç”±äº whistle å¯¼è‡´çš„ã€‚ whistle å¯¹äºä¸Šé¢è¿™ç§é…ç½®ï¼Œä¼šè®¤ä¸ºæ˜¯ä¸€ä¸ª rule, ç›´æ¥æ•´ä¸ªé“¾æ¥ç±»ä¼¼è¢« 302 è·³è½¬äº†ï¼Œå¯¼è‡´äº† header é‡Œçš„ host ä¹Ÿè¢«ä¿®æ”¹ä¸ºäº† localhost, æ‰€ä»¥ä¸èƒ½é€šè¿‡æ¥å£æ ¡éªŒã€‚ éœ€è¦æ”¹æˆå¦‚ä¸‹é…ç½®ï¼š1pay.qq.com/wechat_h5/dist/h5/store/views/ localhost è¿™ç§æƒ…å†µï¼Œwhistle ä¼šè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ª host ä»£ç†ï¼Œ header é‡Œé¢çš„å†…å®¹ä¸ä¼šå—å½±å“ã€‚ ä¸¤ç§ç±»ä¼¼ç›¸ä¼¼çš„å†™æ³•ï¼Œè¿˜æ˜¯æœ‰ä¸ä¸€æ ·çš„æ•ˆæœï¼Œå¦‚æœä¸æ˜¯è¿™ç§åå°ä¼šéªŒè¯ valid host çš„æƒ…å†µï¼Œä¸¤ç§éƒ½å¯ä»¥ç”¨ã€‚ es6-promise ä¸æ”¯æŒ finally?es6-promise æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ promise polyfill åº“ ï¼Œä½†æ˜¯é—æ†¾çš„æ˜¯ç›®å‰å®ƒè¿˜ä¸æ”¯æŒ finallyï¼Œå¦‚æœç”¨ es6-promise ï¼Œåˆæƒ³ç”¨ finally ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿå¯ä»¥ç®€å•çš„ç”¨ then æ¥ä»£æ›¿ finallyã€‚ 123456789101112131415printPersonFullName() &#123; return fetch('./data/person.json') .then(response =&gt; &#123; return response.json(); &#125;) .then(person =&gt; &#123; console.log(`$&#123;person.firstName&#125; $&#123;person.lastName&#125;`); &#125;) .catch(e =&gt; &#123; console.log('error') &#125;) .then(() =&gt; &#123; console.log('finally'); &#125;) &#125; è¿™æ ·æœ€åä¸€ä¸ª then æ–¹æ³•ä¸€å®šä¼šè¿›å…¥ï¼ŒåŠæ—¶ä¹‹å‰ catch åˆ°äº† errorã€‚å¯ä»¥ç®€å•çš„æ¥æ›¿ä»£ finallyã€‚ ç¥å¥‡çš„translate3dios safari ä¸‹ï¼Œå¦‚æœä½ ç»å¸¸ç”¨ position: fixedï¼Œ å¯èƒ½ä¼šé‡åˆ°ä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜ï¼Œæ¯”å¦‚é¡µé¢å¡ä½ï¼Œé¡µé¢ç™½å±ç­‰é—®é¢˜ã€‚ è¿™æ—¶å€™ä½ å¯ä»¥è¯•è¯•ç¥å¥‡çš„ translate3d, å®ƒä¼šè§¦å‘ GPU çš„é‡æ–°åŠ é€Ÿã€‚12345678.Element-header &#123; transform: translate3d(0,0,0);&#125;.Element-header--fixed &#123; top: 0; position: fixed;&#125; ä¸å¤ªäº†è§£ CSS çš„æˆ‘ï¼Œé è¿™ä¸ªè§£å†³äº†å¾ˆå¤šé—®é¢˜ã€‚ç›¸å…³å‚è€ƒæ–‡ç« ã€‚ å»ºè®®æ˜¯safariä¸­èƒ½ä¸ç”¨fixedå°±ä¸ç”¨ fixedã€‚ Promise Anti-patternsæœ€è¿‘çœ‹äº†ä¸€ç¯‡æ–‡ç« ï¼Œè®²çš„ä¸é”™ï¼Œå¤§æ¦‚è®²çš„å°±æ˜¯è¯´å¸¸è§çš„ä¸€äº›é”™è¯¯çš„ Promise ç”¨æ³•ã€‚åœ¨è¿™é‡Œè®°å½•ä¸‹ï¼Œä¾›è‡ªå·±ç»å¸¸ç¿»çœ‹ã€‚åŸæ–‡ç« åœ°å€åœ¨æ­¤ã€‚ Nested Promises12345loadSomething().then(function(something) &#123; loadAnotherthing().then(function(another) &#123; DoSomethingOnThem(something, another); &#125;);&#125;); To fix:1234q.all([loadSomething(), loadAnotherThing()]) .spread(function(something, another) &#123; DoSomethingOnThem(something, another);&#125;); The Broken Chain12345678function anAsyncCall() &#123; var promise = doSomethingAsync(); promise.then(function() &#123; somethingComplicated(); &#125;); return promise;&#125; To Fixed:123456function anAsyncCall() &#123; var promise = doSomethingAsync(); return promise.then(function() &#123; somethingComplicated() &#125;);&#125; The Collection Kerfuffle12345678910111213function workMyCollection(arr) &#123; var resultArr = []; function _recursive(idx) &#123; if (idx &gt;= resultArr.length) return resultArr; return doSomethingAsync(arr[idx]).then(function(res) &#123; resultArr.push(res); return _recursive(idx + 1); &#125;); &#125; return _recursive(0);&#125; To fix, use map &amp; reduce:1234567891011121314function workMyCollection(arr) &#123; return q.all(arr.map(function(item) &#123; return doSomethingAsync(item); &#125;));&#125;// or you want them in seriesfunction workMyCollection(arr) &#123; return arr.reduce(function(promise, item) &#123; return promise.then(function(result) &#123; return doSomethingAsyncWithResult(item, result); &#125;); &#125;, q());&#125; The Ghost Promise123456789var promise;if (asyncCallNeeded) promise = doSomethingAsync();else promise = Q.resolve(42);promise.then(function() &#123; doSomethingCool();&#125;); To fix:12345678910// ç”¨ Q åŒ…ä¸€å±‚Q(asyncCallNeeded ? doSomethingAsync() : 42) .then( function(value)&#123; doSomethingGood(); &#125;) .catch( function(err) &#123; handleTheError(); &#125;); The Overly Keen Error Handler1234567somethingAsync.then( function() &#123; return somethingElseAsync(); &#125;, function(err) &#123; handleMyError(err);&#125;); To fix :12345678// é¿å…ä¸Šé¢fufilledå†…çš„errorä¸è¢« catch åˆ°somethingAsync .then(function() &#123; return somethingElseAsync(); &#125;) .catch(function(err) &#123; handleMyError(err); &#125;); The Forgotten Promise123456789var deferred = Q.defer();doSomethingAsync().then(function(res) &#123; res = manipulateMeInSomeWay(res); deferred.resolve(res);&#125;, function(err) &#123; deferred.reject(err);&#125;);return deferred.promise; To fix:1234// é¿å…ä¸Šè¿°æ— æ„ä¹‰çš„åˆ›å»º promisereturn doSomethingAsync().then(function(res) &#123; return manipulateMeInSomeWay(res);&#125;); æ€»ç»“çœ‹äº†ä¸€äº›æ–‡ç« ï¼Œå…¶å®å¤šçœ‹çœ‹è¿™äº›æ€»ç»“ç±»çš„æ–‡ç« ï¼Œç„¶åè‡ªå·±æŠŠè‡ªå·±å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜æ€»ç»“å‡ºæ¥æ˜¯ä¸ªå¾ˆå¥½çš„äº‹æƒ…ï¼Œæ¢³ç†äº†è‡ªå·±çš„è„‘è¢‹ç“œå“ˆå“ˆã€‚ ä»Šå¤©å¥½ç´¯å•Šï¼Œå¯èƒ½æ˜¯ç”Ÿç—…çš„åŸå› ï¼Œæ—©ç‚¹å›å®¶äº†ã€‚9ç‚¹20ã€‚ç»™è€å¦ˆæ‰“ä¸ªâ˜ï¸ï¼Œå›å»å†çœ‹çœ‹ä¹¦ï¼Œé›é›ç‹—ğŸ©ï¼Œå®Œç¾ğŸ˜Š~","categories":[],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"è®°å‡ ä¸ªå°çŸ¥è¯†ç‚¹","slug":"è®°å‡ ä¸ªå°çŸ¥è¯†ç‚¹","date":"2018-11-20T13:14:33.000Z","updated":"2018-11-20T13:21:50.000Z","comments":true,"path":"2018/11/20/è®°å‡ ä¸ªå°çŸ¥è¯†ç‚¹/","link":"","permalink":"http://sevencai.github.io/2018/11/20/è®°å‡ ä¸ªå°çŸ¥è¯†ç‚¹/","excerpt":"","text":"å¥½ä¹…éƒ½æ²¡æœ‰æ›´æ–°åšå®¢äº†ï¼Œä¹‹å‰ç»å†äº†ç–¯ç‹‚çš„ä¸€æ®µåŠ ç­æ—¶é—´ï¼Œæ”¶è·äº†ä¸‹é¢ä¸€å¥è¯ï¼Œå¯¹æˆ‘æ¥è¯´å¾ˆçè´µçš„ç»éªŒã€‚ğŸ“’ å†çŸ­ä¹Ÿè¦è®°å¾—æ€è€ƒï¼Œå†å¿™ä¹Ÿè¦è®°å¾—æ—¶ä¸æ—¶åœä¸‹æ¥ï¼Œä¸æ…Œä¸å¿™ä¸€æ­¥æ­¥èµ°ç¨³~ğŸ“š åœ¨ url ä¸Šå¢åŠ å‚æ•°ä¸‹é¢è¿™æ®µæ˜¯ä¸€æ®µç»™ url å¢åŠ å‚æ•°çš„ä»£ç ç‰‡æ®µï¼š1234567891011121314/** * åœ¨ url ä¸Šæ·»åŠ å‚æ•° * @param arr Array or Object * @param url * @return &#123;string|*&#125; */export function addParam(arr, url) &#123; var names = Object.keys(arr) var postfix = serializeParams(arr) url = delParam(names, url) url += /(\\?|&amp;)$/.test(url) ? \"\" + postfix : /\\?/.test(url) ? \"&amp;\" + postfix : \"?\" + postfix return url&#125; é™¤å»å†™æ³•é—®é¢˜ï¼Œé€»è¾‘ä¸Šèƒ½çœ‹å‡ºæœ‰ä»€ä¹ˆé—®é¢˜å—âŒï¼Ÿ å®ƒåªæ”¯æŒä¸å¸¦ hash çš„å¢åŠ å‚æ•°ï¼Œå¯¹äºå¸¦ hash çš„url, å®ƒåŸºæœ¬ä¸èƒ½ä½¿ç”¨ã€‚å› ä¸ºè¿™ä¸ªæ–¹æ³•å·²ç»è¢«å…¶ä»–äººä½¿ç”¨ï¼Œä¸ºäº†æœ€å°çš„æ”¹åŠ¨æ€§ï¼Œå¯ä»¥åœ¨ä¸Šé¢å†å°è£…ä¸€æ¬¡ã€‚ 12345678910export function addHashParam(arr, url) &#123; let [prefix, suffix] = url.split(\"#\") let addedUrl = addParam(arr, prefix) if (suffix) &#123; return [addedUrl, \"#\", suffix].join(\"\") &#125; return addedUrl&#125; ç®€å•çš„ split ä¸€ä¸‹ï¼Œå†å¯¹ hash ä¹‹å‰çš„è¿›è¡Œ addParam, æœ€åå†æ‹¼æ¥å›å»å³å¯ã€‚ chrome breakpointsä»Šå¤©åˆæŠŠ chrome çš„ breakpoints çš„æ–‡æ¡£çŸäº†ä¸€éã€‚å¸Œæœ›è‡ªå·±èƒ½æŠŠä¸‹é¢è¿™ä¸ªå›¾è®°æ¸…æ¥šï¼š å¹³æ—¶è¿˜æ˜¯å¾—åˆ»æ„æœ‰æ„çš„å»ä½¿ç”¨ä¸åŒçš„ç±»å‹æ–­ç‚¹å½¢å¼ï¼Œè¿™æ ·æ‰ä¸ä¼šå¦‚æœçªç„¶äº‹ä»¶å¾ˆç´§å‘ç°é—®é¢˜æ—¶ï¼Œæ‰‹å¿™è„šä¹±ã€‚ æ¯”å¦‚ä¸Šé¢è¿™äº›æ–­ç‚¹ç±»å‹ä¸­ï¼Œ Line-of-codeï¼ŒConditional line-of-codeï¼ŒException ç”¨çš„æ¯”è¾ƒå¤šï¼Œå…¶ä»–å‡ ä¸ªå¦‚ DOM, Xhr, Function ç”¨çš„æ¯”è¾ƒğŸ“’å°‘ã€‚ å…³äºç½‘ç»œçš„å°çŸ¥è¯†æœ€è¿‘å…¬å¸çš„ç½‘ç»œéƒ¨åˆ†æ‰“é€šäº†ï¼Œå¯¹äº mac pro è€Œè¨€ï¼Œä»¥å‰éå¸¸ä¸å¥½çœŸæœºè°ƒè¯•ï¼Œç°åœ¨éå¸¸æ–¹ä¾¿äº†æˆ‘ä»¬ã€‚å»äº†è§£äº†ä¸‹è¿™é‡Œé¢çš„å·¥ä½œã€‚ åŒä¸€ç½‘æ®µï¼šè¦åˆ¤æ–­ä¸¤ä¸ªIPåœ°å€æ˜¯ä¸æ˜¯åœ¨åŒä¸€ä¸ªç½‘æ®µï¼Œå°±å°†å®ƒä»¬çš„IPåœ°å€åˆ†åˆ«ä¸å­ç½‘æ©ç åšä¸è¿ç®—ï¼Œå¾—åˆ°çš„ç»“æœä¸€ç½‘ç»œå·ï¼Œå¦‚æœç½‘ç»œå·ç›¸åŒï¼Œå°±åœ¨åŒä¸€å­ç½‘ï¼Œå¦åˆ™ï¼Œä¸åœ¨åŒä¸€å­ç½‘ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¦‚æœä¸¤ä¸ªè®¾å¤‡çš„ IP åœ°å€å‰ä¸‰ä½éƒ½æ˜¯ä¸€æ ·çš„è¯ï¼Œå°±ç®—æ˜¯ä½äºåŒä¸€ç½‘æ®µã€‚ æŠ“åŒ…æˆ–è€…çœŸæœºè°ƒè¯•éœ€è¦ç”µè„‘å’Œæ‰‹æœºåœ¨åŒä¸€ç½‘æ®µä¸‹ã€‚ ç°åœ¨ç”±äºç½‘ç»œæ‰“é€šï¼Œéƒ½åœ¨åŒä¸€å±€åŸŸç½‘å†…ï¼Œç›´æ¥æ‰‹æœºä¸Šé…ç½®ä»£ç†ï¼Œè¿æ¥ç”µè„‘ç›¸åº”çš„ç«¯å£å³å¯ã€‚ä¸€èˆ¬æˆ‘ä»¬ä¸ºäº†æŠ“åŒ…ï¼Œç”µè„‘ä¸Šä¼šè£… fiddler or charles or whistle, æˆ‘è¿™é‡Œä½¿ç”¨ whistle å¼€å¯äº†ä¸€ä¸ªæ–°ç«¯å£ï¼Œæ‰‹æœºå°±è¿è¿™ä¸ªç«¯å£å³å¯æŠ“åŒ…ã€‚ åŸå…ˆç”±äºæˆ‘ä»¬çš„æ‰‹æœºå’Œç”µè„‘ä¸æ˜¯åŒä¸€ä¸ªç½‘ç»œï¼Œæ‰€ä»¥æ‰éœ€è¦è½¯APå¦‚ å°ç±³ WIFI è¿™ç§ä¸œè¥¿å»ä½¿æ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€ä¸ªç½‘ç»œé‡Œï¼Œè¿›è¡ŒæŠ“åŒ…ã€‚ è¿™é‡Œå‡ºæ¥äº†ä¸€ä¸ªæ–°è¯ï¼Œå«åš è½¯APã€‚ è½¯APæŒ‡çš„æ˜¯ï¼šâ€œè½¯APâ€çš„æ— çº¿äº§å“åœ¨å¸‚åœºä¸Šé¢‡ä¸ºå¸¸è§ï¼Œè½¯APå°±æ˜¯Soft-APï¼Œå®ƒçš„ç¡¬ä»¶éƒ¨åˆ†å°±æ˜¯ä¸€å—æ ‡å‡†çš„æ— çº¿ç½‘å¡ï¼Œä½†å…¶é€šè¿‡é©±åŠ¨ç¨‹åºä½¿å…¶æä¾›ä¸APä¸€æ ·çš„ä¿¡å·è½¬æ¥ã€è·¯ç”±ç­‰åŠŸèƒ½ã€‚ä¸ä¼ ç»ŸAPç›¸æ¯”ï¼Œå®ƒçš„æˆæœ¬å¾ˆä½ï¼ŒåŠŸèƒ½ä¸Šä¹Ÿèƒ½å‡‘åˆã€‚ ç®€å•çš„ç†è§£è¯AP å°±æ˜¯ AccessPoint ,æ˜¯æ— é™è®¿é—®çƒ­ç‚¹çš„ç®€ç§°ï¼Œæ— é™è·¯ç”±å™¨å¯ä»¥ç§°ä¸º AP, è½¯AP åˆ™æ˜¯ç”¨è½¯ä»¶å’Œæ— çº¿ç‹å¡ç»“åˆæ¨¡æ‹Ÿå‡ºæ¥çš„ã€‚ æ˜¯å¦éœ€è¦è¿™ä¸ªè½¯APè·Ÿæˆ‘ä»¬çš„ç½‘ç»œæœ‰å…³ç³»ã€‚è‹¥ç”µè„‘å’Œæ‰‹æœºå¤„äºä¸€ä¸ªç½‘æ®µï¼Œå°±ä¸éœ€è¦è½¯APåˆ›å»ºWIFIç½‘ç»œã€‚è‹¥ä¸åœ¨ä¸€ä¸ªç½‘ç»œï¼Œå°±éœ€è¦ç”¨åˆ°è½¯APè½¯ä»¶ã€‚æ¯”å¦‚ä½ çš„ç”µè„‘æ˜¯è¿çš„è‡ªå®¶çš„WIFI,ä½ çš„æ‰‹æœºæ˜¯4Gç½‘ç»œã€‚æˆ–è€…ä½ çš„ç”µè„‘æ˜¯æœ‰é™ç½‘ç»œï¼Œæ‰‹æœºæ˜¯æ— çº¿ç½‘ç»œï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½å°±ä¸åœ¨ä¸€ä¸ªç½‘æ®µä¸Šã€‚ åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…æ˜¯å¯ä»¥ç›¸äº’è¿æ¥åˆ°å¯¹æ–¹çš„å¹¿æ’­çš„ï¼Œä¹Ÿå¯ä»¥å†’è®¤æ¥æ”¶ç«¯æ¥æˆªå–æ•°æ®ã€‚æˆ–è€…æ··ä¹±arpæ•°æ®åŒ…ï¼Œè¿›è¡Œå…¨éƒ¨æŠ“å–ã€‚é‚£ä¹ˆå¦‚ä½•å°†macå’ŒiPhoneè¿æ¥åˆ°åŒä¸€ä¸ªå±€åŸŸç½‘å‘¢ï¼Ÿæ–¹æ³•ä¸€ï¼Œå°†ä¸¤ä¸ªè®¾å¤‡éƒ½è¿æ¥ä¸€ä¸ªwifiè·¯ç”±å™¨ï¼›æ–¹æ³•äºŒï¼Œå°†macè¿æ¥ä»¥å¤ªç½‘ï¼Œç„¶ååœ¨ ç³»ç»Ÿåå¥½è®¾ç½®â€”â€”å…±äº« ä¸­è®¾ç½®å…±äº«ä»¥å¤ªç½‘æ¥æºçš„è¿æ¥ï¼Œç„¶åç”¨wifiç«¯å£å…±äº«ç»™ç”µè„‘ï¼ˆæ‰‹æœºï¼‰ã€‚ç„¶åå†å°†æ‰‹æœºå»è¿æ¥ç”µè„‘å‘æ•£å‡ºçš„wifiã€‚ æ€»ç»“è¦å¯¹æœªæ¥æœ‰ä¿¡å¿ƒï¼Œè¦å¯¹è‡ªå·±åšçš„äº‹æƒ…å†™çš„ä»£ç æŠ±æœ‰ä¿¡å¿µï¼Œè¦è·Ÿéšè‡ªå·±çš„å¿ƒã€‚ï¼ˆä¸æ˜¯å¯¹åˆ«äººçš„é¸¡æ±¤ï¼Œæ˜¯å¯¹è‡ªå·±çš„é¼“åŠ±ï¼ŒåŠ æ²¹ï¼‰ğŸŒ¹","categories":[],"tags":[{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"http://sevencai.github.io/tags/ç¬”è®°/"}]},{"title":"è®°å‡ ä¸ªå°é—®é¢˜","slug":"è®°å‡ ä¸ªå°é—®é¢˜","date":"2018-08-31T13:06:47.000Z","updated":"2018-08-31T13:08:45.000Z","comments":true,"path":"2018/08/31/è®°å‡ ä¸ªå°é—®é¢˜/","link":"","permalink":"http://sevencai.github.io/2018/08/31/è®°å‡ ä¸ªå°é—®é¢˜/","excerpt":"","text":"swiper v-for ä¸­ click ä¸ç”Ÿæ•ˆ123456&lt;swiper-slide v-for=\"(item, index) in bannerAds\" v-bind:key=\"index\" @click.native=\"linkAds(item)\" :style=\"'background-image:url('+ item.url +')'\"&gt;&lt;/swiper-slide&gt; å¦‚æœä½ çš„ swiper ä¹Ÿæ˜¯ä½¿ç”¨äº† v-for å¹¶ä¸” click ä½œç”¨åœ¨ v-for æ‰€åœ¨çš„å…ƒç´ ï¼Œé‚£ä¹ˆæœ‰å¯èƒ½ä¼šå¯¼è‡´ click äº‹ä»¶ä¸ä¼šæ‰§è¡Œã€‚è¿™æ—¶å€™è¯•è¯•åœ¨ç”¨ @click.native å¯è§£å†³é—®é¢˜ã€‚ ç±»ä¼¼çš„é—®é¢˜è¿˜æœ‰ router-link ä¸ŠåŠ  click ä¹Ÿä¸ç”Ÿæ•ˆã€‚æ–¹æ³•ç›¸åŒã€‚ ä¸€èˆ¬æ˜¯è‡ªå·±å®šä¹‰çš„ç»„ä»¶ï¼Œæˆ–è€… vue è‡ªå®šä¹‰çš„æ ‡ç­¾ï¼Œå¦‚ä¸Šé¢çš„ router-linkä¼šæœ‰è¿™ä¸ªé—®é¢˜ã€‚ å¯ä»¥ç†è§£ä¸ºï¼Œ.native ä¿®é¥°ç¬¦å°±æ˜¯ç”¨æ¥æ³¨å†Œå…ƒç´ çš„åŸç”Ÿäº‹ä»¶è€Œä¸æ˜¯ç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶çš„ã€‚æ˜¯æŠŠç»„ä»¶å˜å›åŸç”ŸDOMçš„ä¸€ç§æ–¹å¼ï¼Œç›¸å½“äºç»™ç»„ä»¶ç»‘å®šåŸç”Ÿäº‹ä»¶ã€‚å¯¹åŸç”Ÿhtmlæ ‡ç­¾æ— ç”¨ã€‚å› ä¸ºæœ¬èº«Vueæ˜¯æœ‰è‡ªå·±çš„ä¸€å¥—è¿›è¡Œä¼ é€’çš„æœºåˆ¶ï¼Œè¿™æ ·å‘Šè¯‰äº†Vue,ç”¨åŸç”Ÿçš„äº‹ä»¶ï¼Œè€Œä¸æ˜¯Vueè‡ªå·±çš„é‚£ä¸€å¥—äº‹ä»¶è§¦å‘æœºåˆ¶ã€‚ å¯¹è±¡çš„ filterä¸€èˆ¬æˆ‘ä»¬ä¼šå¾ˆä¹ æƒ¯å»ç”¨ arr.filter å»å¸®æˆ‘ä»¬åšä¸€äº›è¿‡æ»¤çš„äº‹æƒ…ï¼Œé‚£ä¹ˆå¦‚æœæ˜¯æƒ³è¦ç»™ object map åšä¸€äº›è¿‡æ»¤çš„äº‹æƒ…ï¼Œæˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·å°è£…ï¼š 1234567891011121314151617181920212223242526/*** * å¯¹è±¡è¿‡æ»¤å™¨ * @param obj * @param filterFunction */export function objectFilter(obj, filterFunction) &#123; return Object.assign( ...Object.keys(obj) .filter(key =&gt; filterFunction(obj[key])) .map(key =&gt; (&#123; [key]: obj[key] &#125;)) )&#125;/** * å¯¹è±¡è¿‡æ»¤å™¨ * arr.reduce(callback[, initialValue]) * callback(accumulator, currentValue, currentIndex, array) * @param obj * @param filterFunction * @returns &#123;&#123;&#125;&#125; */export function filterObject(obj, filterFunction) &#123; return Object.keys(obj) .filter(key =&gt; filterFunction(obj[key])) .reduce((res, currKey) =&gt; (res[currKey] = obj[key]), &#123;&#125;)&#125; Ravené…ç½®æŸäº›æ—¶å€™ä¸å‘é€é”™è¯¯æ•°æ®shouldSendCallbackè®¾ç½®åªæœ‰ production ç¯å¢ƒæ‰å‘é€é”™è¯¯æ•°æ®ï¼Œæœ¬åœ°çš„é”™è¯¯å†…å®¹ä¸å‘é€åˆ° sentry ä¸Šã€‚ dataCallbackåœ¨å‘é€æ•°æ®ä¹‹å‰æƒ³è¦åšçš„äº‹æƒ…ï¼Œå¯ä»¥æ”¾è¿™é‡Œé¢ã€‚12345678910111213141516Raven.config(\"xxxx\", &#123; environment: process.env.NODE_ENV, release: process.env.VERSION, sampleRate: 0.1, dataCallback: data =&gt; &#123; if (process.env.NODE_ENV != \"production\") &#123; console.log(data) &#125; return data &#125;, shouldSendCallback: () =&gt; &#123; return process.env.NODE_ENV == \"production\" &#125;&#125;) .addPlugin(RavenVue, Vue) .install()","categories":[],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"The Linux Command Line è¯»ä¹¦ç¬”è®°ï¼ˆä¸‰ï¼‰","slug":"The-Linux-Command-Line-è¯»ä¹¦ç¬”è®°ï¼ˆä¸‰ï¼‰","date":"2018-08-23T07:27:57.000Z","updated":"2018-08-23T07:55:37.000Z","comments":true,"path":"2018/08/23/The-Linux-Command-Line-è¯»ä¹¦ç¬”è®°ï¼ˆä¸‰ï¼‰/","link":"","permalink":"http://sevencai.github.io/2018/08/23/The-Linux-Command-Line-è¯»ä¹¦ç¬”è®°ï¼ˆä¸‰ï¼‰/","excerpt":"","text":"ç¬¬11ç« ï¼šshell ç¯å¢ƒ ğŸ¡ shell åœ¨ shell ä¼šè¯ä¸­ä¿å­˜ç€å¤§é‡ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯è¢«ç§°ä¸º (shell çš„) ç¯å¢ƒã€‚ ç¨‹åºè·å–ç¯å¢ƒä¸­çš„æ•°æ®ï¼ˆå³ç¯å¢ƒå˜é‡ï¼‰æ¥äº†è§£æœ¬æœºçš„é…ç½®ã€‚è™½ç„¶å¤§å¤šæ•°ç¨‹åºç”¨é…ç½®æ–‡ä»¶æ¥å­˜å‚¨ç¨‹åºè®¾ç½®ï¼Œ ä¸€äº›ç¨‹åºä¼šæ ¹æ®ç¯å¢ƒå˜é‡æ¥è°ƒæ•´ä»–ä»¬çš„è¡Œä¸ºã€‚çŸ¥é“äº†è¿™äº›ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ç¯å¢ƒå˜é‡æ¥è‡ªå®šåˆ¶ shell ä½“éªŒã€‚1234- printenv - æ‰“å°éƒ¨åˆ†æˆ–æ‰€æœ‰çš„ç¯å¢ƒå˜é‡- set - è®¾ç½® shell é€‰é¡¹- export â€” å¯¼å‡ºç¯å¢ƒå˜é‡ï¼Œè®©éšåæ‰§è¡Œçš„ç¨‹åºçŸ¥é“ã€‚- alias - åˆ›å»ºå‘½ä»¤åˆ«å printenv &amp; set shell åœ¨ç¯å¢ƒä¸­å­˜å‚¨äº†ä¸¤ç§åŸºæœ¬ç±»å‹çš„æ•°æ®ï¼Œè™½ç„¶ bash å‡ ä¹æ— æ³•åˆ†è¾¨è¿™äº›æ•°æ®çš„ç±»å‹ã€‚ å®ƒä»¬æ˜¯ç¯å¢ƒå˜é‡å’Œ shell å˜é‡ã€‚Shell å˜é‡æ˜¯ bash å­˜æ”¾çš„å°‘é‡æ•°æ®ã€‚å‰©ä¸‹çš„éƒ½æ˜¯ ç¯å¢ƒå˜é‡ã€‚é™¤äº†å˜é‡ï¼Œshell ä¹Ÿå­˜å‚¨äº†ä¸€äº›å¯ç¼–ç¨‹çš„æ•°æ®ï¼Œå³åˆ«åå’Œ shell å‡½æ•°ã€‚ æˆ‘ä»¬å¯ä»¥ç”¨ bash çš„å†…å»ºå‘½ä»¤ setï¼Œæˆ–è€…æ˜¯ printenv ç¨‹åºæ¥æŸ¥çœ‹ç¯å¢ƒå˜é‡ã€‚set å‘½ä»¤å¯ä»¥ æ˜¾ç¤º shell æˆ–ç¯å¢ƒå˜é‡ï¼Œè€Œ printenv åªæ˜¯æ˜¾ç¤ºç¯å¢ƒå˜é‡ã€‚ 1234printenv | less// printenv æ”¯æŒæŸ¥çœ‹æŸä¸ªç¯å¢ƒå˜é‡printenv USER =&gt; sevencai å½“ä½¿ç”¨æ²¡æœ‰å¸¦é€‰é¡¹å’Œå‚æ•°çš„ set å‘½ä»¤æ—¶ï¼Œshell å˜é‡ï¼Œç¯å¢ƒå˜é‡ï¼Œå’Œå®šä¹‰çš„ shell å‡½æ•° éƒ½ä¼šè¢«æ˜¾ç¤ºã€‚ä¸åŒäº printenv å‘½ä»¤ï¼Œset å‘½ä»¤çš„è¾“å‡ºå¾ˆå‹å¥½åœ°æŒ‰ç…§é¦–å­—æ¯é¡ºåºæ’åˆ—ï¼š 12345set | lessecho $HOME// åˆ«åæ— æ³•é€šè¿‡ä½¿ç”¨ set æˆ– printenv æ¥æŸ¥çœ‹ã€‚ ç”¨ä¸å¸¦å‚æ•°çš„ alias æ¥æŸ¥çœ‹åˆ«å:alias å¦‚ä½•å»ºç«‹ shell ç¯å¢ƒï¼Ÿ When we log on to the system, the bash program starts, and reads a series of configuration scripts called startup files, which define the default environment shared by all users. This is followed by more startup files in our home directory that define our personal environment. The exact sequence depends on the type of shell session being started. There are two kinds: a login shell session and a non-login shell session. ç™»å½•shellæˆ–è€…éç™»å½•shelléƒ½ä¼šå»è¯»å–ç›¸åº”çš„æ–‡ä»¶ï¼Œä½†æ˜¯è¯»å–çš„æ–‡ä»¶å¤šå°‘ä¼šæœ‰åŒºåˆ«ã€‚ä¾‹å¦‚ï¼š ç™»å½•shellå¯èƒ½ä¼šè¯»å–ï¼š éç™»å½•shellå¯èƒ½ä¼šè¯»å–ï¼š ä¸€ä¸ªå…¸å‹çš„ .bashrc æ–‡ä»¶å¯èƒ½é•¿ä¸‹é¢è¿™æ ·ï¼š12345678# .bash_profile# Get the aliases and functionsif [ -f ~/.bashrc ]; then. ~/.bashrcfi# User specific environment and startup programsPATH=$PATH:$HOME/binexport PATH ç¿»è¯‘è¿‡æ¥å¯èƒ½æ˜¯ï¼š12If the file ~/.bashrc exists, thenread the ~/.bashrc file. æ˜¯å¦æ›¾ç»å¯¹ shell æ€æ ·çŸ¥é“åœ¨å“ªé‡Œæ‰¾åˆ°æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥çš„å‘½ä»¤æ„Ÿåˆ°è¿·æƒ‘ï¼Ÿä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬è¾“å…¥ ls åï¼Œ shell ä¸ä¼šæŸ¥æ‰¾æ•´ä¸ªè®¡ç®—æœºç³»ç»Ÿæ¥æ‰¾åˆ° /bin/lsï¼ˆls å‘½ä»¤çš„å…¨è·¯å¾„åï¼‰ï¼Œç›¸åï¼Œå®ƒæŸ¥æ‰¾ä¸€ä¸ªç›®å½•åˆ—è¡¨ï¼Œ è¿™äº›ç›®å½•åŒ…å«åœ¨ PATH å˜é‡ä¸­ã€‚ æˆ‘ä»¬å¯¹äºæ–‡ä»¶ .bashrc çš„ä¿®æ”¹ä¸ä¼šç”Ÿæ•ˆï¼Œç›´åˆ°æˆ‘ä»¬å…³é—­ç»ˆç«¯ä¼šè¯ï¼Œå†é‡æ–°å¯åŠ¨ä¸€ä¸ªæ–°çš„ä¼šè¯ï¼Œ å› ä¸º .bashrc æ–‡ä»¶åªæ˜¯åœ¨åˆšå¼€å§‹å¯åŠ¨ç»ˆç«¯ä¼šè¯æ—¶è¯»å–ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥å¼ºè¿« bash é‡æ–°è¯»å–ä¿®æ”¹è¿‡çš„ .bashrc æ–‡ä»¶ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š1234alias l.='ls -d .* --color=auto'alias ll='ls -l --color=auto'source .bashrc ç¬¬12ç« ï¼š viç®€ä»‹ğŸ©è¿™ä¸ªæˆ‘å·²ç»æ¯”è¾ƒç†Ÿæ‚‰äº†ï¼Œè¿™é‡Œè¿˜æ˜¯åˆ—å‡ºä¸‹ä¹¦é‡Œçš„æ€»ç»“ï¼Œæ•´ä½“çš„æ€»ç»“ä¹¦é‡Œå†™çš„æŒºå¥½ï¼š viï¼ˆå‘éŸ³â€œvee eyeâ€ï¼‰ï¼Œå¤§å¤šæ•° Linux å‘è¡Œç‰ˆä¸åŒ…å«çœŸæ­£çš„ viï¼›è€Œæ˜¯è‡ªå¸¦ä¸€æ¬¾é«˜çº§æ›¿ä»£ç‰ˆæœ¬ï¼Œå«åš vimï¼ˆå®ƒæ˜¯â€œvi improvedâ€çš„ç®€å†™ï¼‰ç”± Bram Moolenaar å¼€å‘çš„ã€‚vim ç›¸å¯¹äºä¼ ç»Ÿçš„ Unix vi æ¥è¯´ï¼Œå–å¾—äº†å®è´¨æ€§è¿›æ­¥ã€‚é€šå¸¸ï¼Œvim åœ¨ Linux ç³»ç»Ÿä¸­æ˜¯â€œviâ€çš„ç¬¦å·é“¾æ¥ï¼ˆæˆ–åˆ«åï¼‰ã€‚ ç§»åŠ¨å…‰æ ‡ è¡¥å……ä¸€ä¸ªï¼š0,$,^,g_ çš„åŒºåˆ«å’Œè”ç³»ã€‚0,$æ˜¯åˆ°è¡Œå¤´å’Œè¡Œå°¾ï¼Œ^,g_åˆ°éblankå­—ç¬¦ä½ç½®ã€‚Jåˆå¹¶è¡Œã€‚ æ–‡æœ¬åˆ é™¤å‘½ä»¤ å¤åˆ¶å‘½ä»¤ å…¨å±€æŸ¥æ‰¾ä¸æ›¿æ¢å¦‚:%s/Line/line/g æŸ¥æ‰¾ä¸€è¡Œå†…çš„æ˜¯ç”¨ f å‘½ä»¤ï¼ŒæŸ¥æ‰¾ä¸‹ä¸€ä¸ªå‡ºç°çš„ï¼Œæ˜¯ç”¨ /å‘½ä»¤ã€‚ å¤šè¡Œç¼–è¾‘ vi file1 file2 file3â€¦ :n ä»è¿™ä¸ªæ–‡ä»¶åˆ‡æ¢ä¸‹ä¸€ä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨è¿™ä¸ª ex å‘½ä»¤ :N å›åˆ°å…ˆå‰çš„æ–‡ä»¶ä½¿ç”¨:N :buffers æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ­£åœ¨ç¼–è¾‘çš„æ–‡ä»¶åˆ—è¡¨ï¼Œä½¿ç”¨:buffers å‘½ä»¤ã€‚è¿è¡Œè¿™ä¸ª å‘½ä»¤åï¼Œå±å¹•é¡¶éƒ¨å°±ä¼šæ˜¾ç¤ºå‡ºä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨, :buffers 2 å°±åˆ‡æ¢åˆ°2å·æ–‡ä»¶äº†ã€‚ ç¬¬13ç« ï¼šè‡ªå®šåˆ¶ shell æç¤ºç¬¦ ğŸ’‰å’Œ Linux å†…çš„è®¸å¤šç¨‹åºä¸€æ ·ï¼Œshell æç¤ºç¬¦æ˜¯å¯é«˜åº¦é…ç½®çš„ï¼Œè™½ç„¶æˆ‘ä»¬æŠŠå®ƒç›¸å½“å¤šåœ°çœ‹ä½œæ˜¯ç†æ‰€å½“ç„¶çš„ï¼Œ ä½†æ˜¯æˆ‘ä»¬ä¸€æ—¦å­¦ä¼šäº†æ€æ ·æ§åˆ¶å®ƒï¼Œshell æç¤ºç¬¦æ˜¯ä¸€ä¸ªç›¸å½“æœ‰ç”¨çš„å·¥å…·ã€‚ æˆ‘ä»¬çš„é»˜è®¤æç¤ºç¬¦å¦‚ä¸‹ï¼š1[me@linuxbox ~]$ æ³¨æ„å®ƒåŒ…å«æˆ‘ä»¬çš„ç”¨æˆ·åï¼Œä¸»æœºåå’Œå½“å‰å·¥ä½œç›®å½•ï¼Œä½†æ˜¯å®ƒåˆæ˜¯æ€æ ·å¾—åˆ°è¿™äº›ä¸œè¥¿çš„å‘¢ï¼Ÿ ç»“æœè¯æ˜éå¸¸ç®€å•ã€‚æç¤ºç¬¦æ˜¯ç”±ä¸€ä¸ªç¯å¢ƒå˜é‡å®šä¹‰çš„ï¼Œå«åš PS1ï¼ˆæ˜¯â€œprompt string oneâ€ çš„ç®€å†™ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ echo å‘½ä»¤æ¥æŸ¥çœ‹ PS1çš„å†…å®¹ã€‚ è®¤è¯†$PS112[me@linuxbox ~]$ echo $PS1$&#123;ret_status&#125; %&#123;$fg[cyan]%&#125;%c%&#123;$reset_color%&#125; $(git_prompt_info) æ›´æ”¹ $PS1æˆ‘ä»¬å¯ä»¥é¦–å…ˆå¤‡ä»½ä¸‹ $PS1, ç„¶åå†éšæ„ä¿®æ”¹ $PS1, æœ€åå†é‡æ–°å˜å›æ¥å°±å¯ä»¥äº†ã€‚12345678// å¤‡ä»½ PS1ps1_old=\"$PS1\"// éšæ„ä¿®æ”¹ PS1$ PS1=\"\\a\\$ \"// æœ€åæ”¹å›æ¥PS1=$ps1_old å…¶å®è¿™ä¸ªæˆ‘å¹³æ—¶è‚¯å®šä¸ä¼šç”¨ï¼Œä½†æ˜¯çœ‹ç€çœ‹ç€è¿˜æŒºæœ‰æ„æ€çš„ï¼Œå°±éšæ„è®°å½•äº†ä¸‹ã€‚ æ€»ç»“ ğŸŒºè¿™å‡ ä¸ªç« èŠ‚ä¸»è¦æ˜¯æ€»ç»“äº†é…ç½®æ–‡ä»¶å’Œ shell ç¯å¢ƒè¿™ ä¸€å¼ ã€‚è¿™ç« å†…å®¹å°‘ç”¨ï¼Œä½†æ˜¯å¯¹äºç†è§£æ•´ä½“ shell æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚ æ—¶é—´éƒ½æ˜¯æŒ¤å‡ºæ¥çš„ï¼Œäº‹å®è¯æ˜åˆ©ç”¨å¥½ä¸­åˆå’Œæ™šä¸Šå›å®¶ä¹‹å‰çš„æ—¶é—´ï¼Œä¹Ÿæ˜¯èƒ½æœ‰æ‰€æ”¶è·ã€‚ğŸ“š","categories":[],"tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://sevencai.github.io/tags/è¯»ä¹¦ç¬”è®°/"}]},{"title":"The Linux Command Line è¯»ä¹¦ç¬”è®°ï¼ˆäºŒï¼‰","slug":"The-Linux-Command-Line-è¯»ä¹¦ç¬”è®°ï¼ˆäºŒï¼‰","date":"2018-08-17T09:11:25.000Z","updated":"2018-08-17T09:29:08.000Z","comments":true,"path":"2018/08/17/The-Linux-Command-Line-è¯»ä¹¦ç¬”è®°ï¼ˆäºŒï¼‰/","link":"","permalink":"http://sevencai.github.io/2018/08/17/The-Linux-Command-Line-è¯»ä¹¦ç¬”è®°ï¼ˆäºŒï¼‰/","excerpt":"","text":"ç¬¬ä¹ç« -æƒé™ç®¡ç†ğŸ« Unix ä¼ ç»Ÿä¸­çš„æ“ä½œç³»ç»Ÿä¸åŒäºé‚£äº› MS-DOS ä¼ ç»Ÿä¸­çš„ç³»ç»Ÿï¼ŒåŒºåˆ«åœ¨äºå®ƒä»¬ä¸ä»…æ˜¯å¤šä»»åŠ¡ç³»ç»Ÿï¼Œè€Œä¸”ä¹Ÿæ˜¯ å¤šç”¨æˆ·ç³»ç»Ÿã€‚è¿™åˆ°åº•æ„å‘³ç€ä»€ä¹ˆï¼Ÿå®ƒæ„å‘³ç€å¤šä¸ªç”¨æˆ·å¯ä»¥åœ¨åŒä¸€æ—¶é—´ä½¿ç”¨åŒä¸€å°è®¡ç®—æœºã€‚ä¸ºäº†ä½¿å¤šç”¨æˆ·ç‰¹æ€§ä»˜è¯¸å®è·µï¼Œé‚£ä¹ˆå¿…é¡»å‘æ˜ä¸€ç§æ–¹æ³•æ¥é˜»æ­¢ç”¨æˆ·å½¼æ­¤ä¹‹é—´å—åˆ°å½±å“ã€‚æ¯•ç«Ÿï¼Œä¸€ä¸ª ç”¨æˆ·çš„è¡Œä¸ºä¸èƒ½å¯¼è‡´è®¡ç®—æœºå´©æºƒï¼Œä¹Ÿä¸èƒ½ä¹±åŠ¨å±äºå¦ä¸€ä¸ªç”¨æˆ·çš„æ–‡ä»¶ã€‚ ä¸»è¦çš„å‘½ä»¤æœ‰ï¼š12345678id â€“ æ˜¾ç¤ºç”¨æˆ·èº«ä»½å·ï¼ˆæ¯ä¸ªç”¨æˆ·éƒ½ä¼šæœ‰ä¸ª idï¼‰chmod â€“ æ›´æ”¹æ–‡ä»¶æ¨¡å¼umask â€“ è®¾ç½®é»˜è®¤çš„æ–‡ä»¶æƒé™ (è¿™ä¸ªæˆ‘åŸºæœ¬ä¸ä¼šç”¨åˆ°ï¼Œæš‚æ—¶å¿½ç•¥)su â€“ ä»¥å¦ä¸€ä¸ªç”¨æˆ·çš„èº«ä»½æ¥è¿è¡Œ shellsudo â€“ ä»¥å¦ä¸€ä¸ªç”¨æˆ·çš„èº«ä»½æ¥æ‰§è¡Œå‘½ä»¤chown â€“ æ›´æ”¹æ–‡ä»¶æ‰€æœ‰è€…chgrp â€“ æ›´æ”¹æ–‡ä»¶ç»„æ‰€æœ‰æƒpasswd â€“ æ›´æ”¹ç”¨æˆ·å¯†ç  chmod-æ›´æ”¹æ–‡ä»¶æ¨¡å¼1-rw-r--r-- 1 sevencai TENCENT\\Domain Users 523 8 15 15:36 README.md åˆ—è¡¨çš„å‰åä¸ªå­—ç¬¦æ˜¯æ–‡ä»¶çš„å±æ€§ã€‚è¿™åä¸ªå­—ç¬¦çš„ç¬¬ä¸€ä¸ªå­—ç¬¦è¡¨æ˜æ–‡ä»¶ç±»å‹ã€‚ å…·ä½“å¯èƒ½æœ‰çš„å€¼æœ‰ï¼š å‰©ä¸‹çš„ä¹ä¸ªå­—ç¬¦å«åšæ–‡ä»¶æ¨¡å¼ï¼Œä»£è¡¨ç€æ–‡ä»¶æ‰€æœ‰è€…ã€æ–‡ä»¶ç»„æ‰€æœ‰è€…å’Œå…¶ä»–äººçš„è¯»ã€å†™å’Œæ‰§è¡Œæƒé™ã€‚ å¦‚-rwxr-xr-xæ ‡è¯†çš„å«ä¹‰æ˜¯ï¼šä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œå¯¹æ–‡ä»¶æ‰€æœ‰è€…æ¥è¯´å¯è¯»ã€å¯å†™ã€å¯æ‰§è¡Œã€‚ä¹Ÿå¯ä»¥è¢«å…¶ä»–çš„æ‰€æœ‰äººè¯»å–å’Œæ‰§è¡Œã€‚ æˆ‘ä»¬ä½¿ç”¨å…«è¿›åˆ¶æ•°å­—æ¥è®¾ç½®æ‰€æœŸæœ›çš„æƒé™æ¨¡å¼ã€‚å› ä¸ºæ¯ä¸ªå…«è¿›åˆ¶æ•°å­—ä»£è¡¨äº† 3ä¸ªäºŒè¿›åˆ¶æ•°å­—ï¼Œè¿™ç§å¯¹åº”å…³ç³»ï¼Œæ­£å¥½æ˜ å°„åˆ°ç”¨æ¥å­˜å‚¨æ–‡ä»¶æ¨¡å¼æ‰€ä½¿ç”¨çš„æ–¹æ¡ˆä¸Šã€‚ å¯¹åº”çš„å€¼ä¸ºï¼š é€šè¿‡ä½¿ç”¨3ä¸ªå…«è¿›åˆ¶æ•°å­—ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè®¾ç½®æ–‡ä»¶æ‰€æœ‰è€…ã€ç”¨æˆ·ç»„å’Œå…¶ä»–äººçš„æƒé™ï¼š 12chmod 600 foo.txtchmod 755 shell.sh é€šè¿‡ä¼ é€’å‚æ•° â€œ600â€ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè®¾ç½®æ–‡ä»¶æ‰€æœ‰è€…çš„æƒé™ä¸ºè¯»å†™æƒé™ï¼Œè€Œåˆ é™¤ç”¨æˆ·ç»„å’Œå…¶ä»–äººçš„æ‰€æœ‰ æƒé™ã€‚è™½ç„¶å…«è¿›åˆ¶åˆ°äºŒè¿›åˆ¶çš„æ˜ å°„çœ‹èµ·æ¥ä¸æ–¹ä¾¿ï¼Œä½†é€šå¸¸åªä¼šç”¨åˆ°ä¸€äº›å¸¸è§çš„æ˜ å°„å…³ç³»ï¼š 7 (rwx)ï¼Œ6 (rw-)ï¼Œ5 (r-x)ï¼Œ4 (râ€“)ï¼Œå’Œ 0 (â€”)ã€‚ chmod å‘½ä»¤è¿˜æ”¯æŒä¸€ç§ç¬¦å·è¡¨ç¤ºæ³•ï¼Œæ¥æŒ‡å®šæ–‡ä»¶æ¨¡å¼ã€‚ç¬¦å·è¡¨ç¤ºæ³•åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šæ›´æ”¹ä¼šå½±å“è°ï¼Œ è¦æ‰§è¡Œå“ªä¸ªæ“ä½œï¼Œè¦è®¾ç½®å“ªç§æƒé™ã€‚é€šè¿‡å­—ç¬¦ â€œuâ€ã€â€œgâ€ã€â€œoâ€å’Œ â€œaâ€ çš„ç»„åˆæ¥æŒ‡å®š è¦å½±å“çš„å¯¹è±¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š å¦‚æœæ²¡æœ‰æŒ‡å®šå­—ç¬¦ï¼Œåˆ™å‡å®šä½¿ç”¨â€allâ€ã€‚æ‰§è¡Œçš„æ“ä½œå¯èƒ½æ˜¯ä¸€ä¸ªâ€œï¼‹â€å­—ç¬¦ï¼Œè¡¨ç¤ºåŠ ä¸Šä¸€ä¸ªæƒé™ï¼Œ ä¸€ä¸ªâ€œï¼â€ï¼Œè¡¨ç¤ºåˆ æ‰ä¸€ä¸ªæƒé™ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªâ€œï¼â€ï¼Œè¡¨ç¤ºåªæœ‰æŒ‡å®šçš„æƒé™å¯ç”¨ï¼Œå…¶å®ƒæ‰€æœ‰çš„æƒé™è¢«åˆ é™¤ã€‚ æœ‰ä¸‹é¢è¿™äº›ä¾‹å­ï¼ˆæˆ‘æ„Ÿè§‰è¿™ç§æˆ‘åº”è¯¥ä¸ä¼šç»å¸¸ç”¨ï¼Œå…ˆå‰ä¸€ç›´ç”¨ä¸Šé¢çš„äºŒè¿›åˆ¶æ¨¡å¼æ¯”è¾ƒå¤šï¼‰ï¼š su åŠ sudo su ï¼ ä»¥å…¶ä»–ç”¨æˆ·èº«ä»½å’Œç»„ ID è¿è¡Œä¸€ä¸ª shellè¯­æ³•ç±»ä¼¼ï¼š su [-[l]] [user] å¦‚æœåŒ…å«â€-lâ€é€‰é¡¹ï¼Œé‚£ä¹ˆä¼šä¸ºæŒ‡å®šç”¨æˆ·å¯åŠ¨ä¸€ä¸ªéœ€è¦ç™»å½•çš„ shellã€‚è¿™æ„å‘³ç€ä¼šåŠ è½½æ­¤ç”¨æˆ·çš„ shell ç¯å¢ƒï¼Œ å¹¶ä¸”å·¥ä½œç›®å½•ä¼šæ›´æ”¹åˆ°è¿™ä¸ªç”¨æˆ·çš„å®¶ç›®å½•ã€‚è¿™é€šå¸¸æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ã€‚å¦‚æœä¸æŒ‡å®šç”¨æˆ·ï¼Œé‚£ä¹ˆå°±å‡å®šæ˜¯ è¶…çº§ç”¨æˆ·ã€‚æ³¨æ„ï¼ˆä¸å¯æ€è®®åœ°ï¼‰ï¼Œé€‰é¡¹â€-lâ€å¯ä»¥ç¼©å†™ä¸ºâ€-â€œï¼Œè¿™æ˜¯ç»å¸¸ç”¨åˆ°çš„å½¢å¼ã€‚ å› æ­¤ä¸ºäº†å¯åŠ¨è¶…çº§ç”¨æˆ·æˆ‘ä»¬å¯èƒ½ä¼šè¿™æ ·æ‰§è¡Œsu -ã€‚ å¦‚æœä»¥su -c &#39;command&#39;è¿™æ ·çš„æ–¹å¼å¯åŠ¨ä¸€ä¸ª shell, æ˜¯å¯ä»¥æ‰§è¡Œå•ä¸ªçš„commandå‘½ä»¤ï¼Œè€Œä¸æ˜¯é‡æ–°å¯åŠ¨äº†ä¸€ä¸ªå¯ä»¥äº¤äº’çš„shellã€‚æ³¨æ„ command è¦ç”¨ å¼•å·å¼•èµ·æ¥ã€‚å¦‚su -c &#39;ls -l /root/*&#39;ã€‚ sudo å‘½ä»¤åœ¨å¾ˆå¤šæ–¹é¢éƒ½ç›¸ä¼¼äº su å‘½ä»¤ï¼Œä½†æ˜¯ sudo è¿˜æœ‰ä¸€äº›éå¸¸é‡è¦çš„åŠŸèƒ½ã€‚ç®¡ç†å‘˜èƒ½å¤Ÿé…ç½® sudo å‘½ä»¤ï¼Œä»è€Œå…è®¸ä¸€ä¸ªæ™®é€šç”¨æˆ·ä»¥ä¸åŒçš„èº«ä»½ï¼ˆé€šå¸¸æ˜¯è¶…çº§ç”¨æˆ·ï¼‰ï¼Œé€šè¿‡ä¸€ç§éå¸¸å¯æ§çš„æ–¹å¼ æ¥æ‰§è¡Œå‘½ä»¤ã€‚å°¤å…¶æ˜¯ï¼Œåªæœ‰ä¸€ä¸ªç”¨æˆ·å¯ä»¥æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªç‰¹æ®Šå‘½ä»¤æ—¶ï¼Œï¼ˆæ›´ä½“ç°äº† sudo å‘½ä»¤çš„æ–¹ä¾¿æ€§ï¼‰ã€‚ æ‰§è¡Œ sudo -lå¯ä»¥çœ‹å½“å‰è¢«èµ‹äºˆäº†å“ªäº›æƒé™å¦‚ï¼š123456âœ midas-welfare git:(master) sudo -lPassword:Matching Defaults entries for sevencai on SEVENCAI-MB2: env_reset ......User sevencai may run the following commands on SEVENCAI-MB2: (ALL) ALL æ‰€ä»¥è¿™é‡Œæ€»ç»“ä¸‹ su å’Œ sudo çš„åŒºåˆ«å’Œè”ç³»ï¼š sudo å‘½ä»¤éœ€è¦è¾“å…¥å½“å‰ç”¨æˆ·çš„å¯†ç ï¼Œsu å‘½ä»¤éœ€è¦è¾“å…¥ root ç”¨æˆ·çš„å¯†ç ã€‚ sudo å‘½ä»¤åªå…è®¸ä½¿ç”¨æå‡çš„æƒé™è¿è¡Œå•ä¸ªå‘½ä»¤ï¼Œè€Œ su å‘½ä»¤ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„ shellï¼ŒåŒæ—¶å…è®¸ä½¿ç”¨ root æƒé™è¿è¡Œå°½å¯èƒ½å¤šçš„å‘½ä»¤ï¼Œç›´åˆ°æ˜ç¡®é€€å‡ºç™»å½• æ‰€ä»¥æ ¹æ®ç¬¬ä¸€æ¡ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“å°±å®‰å…¨æ€§è€Œè¨€ï¼Œsudo æ¯” su æ›´å¥½ã€‚suæ„å‘³ç€è¦ä¸å…¶ä»–ç”¨æˆ·å…±äº« root å¯†ç ï¼Œè¿™æ˜¯ä¸€ä»¶æ¯”è¾ƒå±é™©çš„äº‹æƒ…ã€‚å¹¶ä¸”å¯¹äº su è€Œè¨€å¦‚æœè¦æ’¤é”€ç‰¹å®šç”¨æˆ·çš„è¶…çº§ï¼ˆrootï¼‰æƒé™ï¼Œå”¯ä¸€çš„åŠæ³•å°±æ˜¯æ›´æ”¹ root å¯†ç ï¼Œç„¶åå†å‘ŠçŸ¥å…¶ä»–ç”¨æˆ·ã€‚å¾ˆéº»çƒ¦ã€‚ä½†æ˜¯ sudo å°±ä¸ä¸€æ ·äº†,å¦‚æœæƒ³è¦é˜»æ­¢æŸä¸ªç”¨æˆ·è®¿é—® root æƒé™ï¼Œåªéœ€è¦è°ƒæ•´ sudoers è¿™ä¸ªæ–‡ä»¶ä¸­çš„é…ç½®å³å¯ã€‚ The key difference between sudo and su is sudo runs a command as root, whereas su makes you root. chown ï¼ æ›´æ”¹æ–‡ä»¶æ‰€æœ‰è€…å’Œç”¨æˆ·ç»„chown å‘½ä»¤è¢«ç”¨æ¥æ›´æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€æœ‰è€…å’Œç”¨æˆ·ç»„ã€‚ä½¿ç”¨è¿™ä¸ªå‘½ä»¤éœ€è¦è¶…çº§ç”¨æˆ·æƒé™ã€‚ 1chown [owner][:[group]] file... ä¸‹é¢è¿™ä¸ªä¾‹å­æ¯”è¾ƒå®ç”¨ï¼Œæœ‰ä¸¤ä¸ªç”¨æˆ·ï¼Œjanetæ‹¥æœ‰è¶…çº§ç”¨æˆ·è®¿é—®æƒé™ï¼Œè€Œ tony æ²¡æœ‰ã€‚ç”¨æˆ· janet æƒ³è¦ä» å¥¹çš„å®¶ç›®å½•å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶åˆ°ç”¨æˆ· tony çš„å®¶ç›®å½•ã€‚å› ä¸ºç”¨æˆ· janet æƒ³è¦ tony èƒ½å¤Ÿç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ï¼Œ janet æŠŠè¿™ä¸ªæ–‡ä»¶çš„æ‰€æœ‰è€…æ›´æ”¹ä¸º tony: 1234567[janet@linuxbox ~]$ sudo cp myfile.txt ~tonyPassword:[janet@linuxbox ~]$ sudo ls -l ~tony/myfile.txt-rw-r--r-- 1 root root 8031 2008-03-20 14:30 /home/tony/myfile.txt[janet@linuxbox ~]$ sudo chown tony: ~tony/myfile.txt[janet@linuxbox ~]$ sudo ls -l ~tony/myfile.txt-rw-r--r-- 1 tony tony 8031 2008-03-20 14:30 /home/tony/myfile.txt æ›´æ”¹ç”¨æˆ·å¯†ç 12passwd [user]sudo passwd root æ›´æ”¹ root ç”¨æˆ·çš„å¯†ç  passwd å‘½ä»¤å°†ä¼šè¯•ç€å¼ºè¿«ä½ ä½¿ç”¨â€œå¼ºâ€å¯†ç ã€‚è¿™æ„å‘³ç€å®ƒä¼šæ‹’ç»æ¥å—å¤ªçŸ­çš„å¯†ç ã€ä¸å…ˆå‰ç›¸ä¼¼çš„å¯†ç ã€ å­—å…¸ä¸­çš„å•è¯ä½œä¸ºå¯†ç æˆ–è€…æ˜¯å¤ªå®¹æ˜“çŒœåˆ°çš„å¯†ç ã€‚ ç¬¬åç« ï¼šè¿›ç¨‹ğŸš“å†…æ ¸ç»´æŠ¤æ¯ä¸ªè¿›ç¨‹çš„ä¿¡æ¯ï¼Œä»¥æ­¤æ¥ä¿æŒäº‹æƒ…æœ‰åºã€‚ä¾‹å¦‚ï¼Œç³»ç»Ÿåˆ†é…ç»™æ¯ä¸ªè¿›ç¨‹ä¸€ä¸ªæ•°å­—ï¼Œè¿™ä¸ªæ•°å­—å«åš è¿›ç¨‹(process) ID æˆ– PIDã€‚PID å·æŒ‰å‡åºåˆ†é…ï¼Œinit è¿›ç¨‹çš„ PID æ€»æ˜¯1ã€‚å†…æ ¸ä¹Ÿå¯¹åˆ†é…ç»™æ¯ä¸ªè¿›ç¨‹çš„å†…å­˜å’Œå°±ç»ªçŠ¶æ€è¿›è¡Œè·Ÿè¸ªä»¥ä¾¿ç»§ç»­æ‰§è¡Œè¿™ä¸ªè¿›ç¨‹ã€‚ åƒæ–‡ä»¶ä¸€æ ·ï¼Œè¿›ç¨‹ä¹Ÿæœ‰æ‰€æœ‰è€…å’Œç”¨æˆ· IDï¼Œæœ‰æ•ˆç”¨æˆ· IDï¼Œç­‰ç­‰ã€‚ 12345678- ps â€“ æŠ¥å‘Šå½“å‰è¿›ç¨‹å¿«ç…§- top â€“ æ˜¾ç¤ºä»»åŠ¡- jobs â€“ åˆ—å‡ºæ´»è·ƒçš„ä»»åŠ¡- bg â€“ æŠŠä¸€ä¸ªä»»åŠ¡æ”¾åˆ°åå°æ‰§è¡Œ- fg â€“ æŠŠä¸€ä¸ªä»»åŠ¡æ”¾åˆ°å‰å°æ‰§è¡Œ- kill â€“ ç»™ä¸€ä¸ªè¿›ç¨‹å‘é€ä¿¡å·- killall â€“ æ€æ­»æŒ‡å®šåå­—çš„è¿›ç¨‹- shutdown â€“ å…³æœºæˆ–é‡å¯ç³»ç»Ÿ æŸ¥çœ‹è¿›ç¨‹æŸ¥çœ‹è¿›ç¨‹ï¼Œæœ€å¸¸ä½¿ç”¨åœ°å‘½ä»¤ï¼ˆæœ‰å‡ ä¸ªå‘½ä»¤ï¼‰æ˜¯ ps(process)ã€‚1234567ps PID TTY TIME CMD54944 ttys000 0:00.14 /Applications/iTerm.app/Contents/MacOS/iTerm2 --server login -fp sevencai55003 ttys000 0:00.61 -zsh10488 ttys001 0:00.27 /Applications/iTerm.app/Contents/MacOS/iTerm2 --server login -fp sevencai10492 ttys001 0:02.66 -zsh é»˜è®¤æƒ…å†µä¸‹ï¼Œps ä¸ä¼šæ˜¾ç¤ºå¾ˆå¤šè¿›ç¨‹ä¿¡æ¯ï¼Œåªæ˜¯åˆ—å‡ºä¸å½“å‰ç»ˆç«¯ä¼šè¯ç›¸å…³çš„è¿›ç¨‹ã€‚ä¸ºäº†å¾—åˆ°æ›´å¤šä¿¡æ¯ï¼Œ æˆ‘ä»¬éœ€è¦åŠ ä¸Šä¸€äº›é€‰é¡¹ã€‚TTY æ˜¯ â€œTeletypeâ€(ç›´è¯‘ç”µä¼ æ‰“å­—æœº) çš„ç®€å†™ï¼Œæ˜¯æŒ‡è¿›ç¨‹çš„æ§åˆ¶ç»ˆç«¯ã€‚TIME å­—æ®µè¡¨ç¤º è¿›ç¨‹æ‰€æ¶ˆè€—çš„ CPU æ—¶é—´æ•°ã€‚ 123456// åŠ ä¸Š â€œxâ€ é€‰é¡¹ï¼ˆæ³¨æ„æ²¡æœ‰å¼€å¤´çš„ â€œ-â€œ å­—ç¬¦ï¼‰ï¼Œå‘Šè¯‰ ps å‘½ä»¤ï¼Œå±•ç¤ºæ‰€æœ‰è¿›ç¨‹ï¼Œä¸ç®¡å®ƒä»¬ç”±ä»€ä¹ˆ ç»ˆç«¯ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰æ§åˆ¶ã€‚åœ¨ TTY ä¸€æ ä¸­å‡ºç°çš„ â€œ?â€ ï¼Œè¡¨ç¤ºæ²¡æœ‰æ§åˆ¶ç»ˆç«¯ã€‚ä½¿ç”¨è¿™ä¸ª â€œxâ€ é€‰é¡¹ï¼Œå¯ä»¥ çœ‹åˆ°æˆ‘ä»¬æ‰€æ‹¥æœ‰çš„æ¯ä¸ªè¿›ç¨‹çš„ä¿¡æ¯ã€‚ps xps x | less// èƒ½å¤Ÿæ˜¾ç¤ºå±äºæ¯ä¸ªç”¨æˆ·çš„è¿›ç¨‹ä¿¡æ¯ã€‚ä½¿ç”¨è¿™ä¸ªé€‰é¡¹ï¼Œå¯ä»¥å”¤é†’ â€œBSD é£æ ¼â€ çš„è¾“å‡ºç»“æœã€‚ps aux ç”¨ top å‘½ä»¤åŠ¨æ€æŸ¥çœ‹è¿›ç¨‹è™½ç„¶ ps å‘½ä»¤èƒ½å¤Ÿå±•ç¤ºè®¸å¤šè®¡ç®—æœºè¿è¡ŒçŠ¶æ€çš„ä¿¡æ¯ï¼Œä½†æ˜¯å®ƒåªæ˜¯æä¾› ps å‘½ä»¤æ‰§è¡Œæ—¶åˆ»çš„æœºå™¨çŠ¶æ€å¿«ç…§ã€‚ ä¸ºäº†çœ‹åˆ°æ›´å¤šåŠ¨æ€çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ top å‘½ä»¤ã€‚ top ç¨‹åºæ¥å—ä¸€ç³»åˆ—ä»é”®ç›˜è¾“å…¥çš„å‘½ä»¤ã€‚ä¸¤ä¸ªæœ€æœ‰è¶£çš„å‘½ä»¤æ˜¯ h å’Œ qã€‚hï¼Œæ˜¾ç¤ºç¨‹åºçš„å¸®åŠ©å±å¹•ï¼Œqï¼Œ é€€å‡º top ç¨‹åºã€‚ é€šè¿‡ kill å‘½ä»¤ç»™è¿›ç¨‹å‘é€ä¿¡å·1234kill [-signal] PID...kill -1 13546kill -9 pid (æˆ‘ç»å¸¸ç”¨) å…·ä½“çš„ -signal çš„å¯é€‰å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š æ€»ç»“ğŸŒ¹åŠ ä¸Šè¿™ç¯‡æ–‡ç« ï¼ŒThe Linux Command Line çš„ç¬¬ä¸€ç« å°±ç»“æŸäº†ã€‚æˆ‘é›¶é›¶æ•£æ•£çš„èŠ±çš„æ—¶é—´å»æ•´ç†çš„ï¼Œä¸­é—´ä¹Ÿå»é™¤äº†ä¸€äº›æˆ‘åŸºæœ¬ä¸Šä¸æ€ä¹ˆç”¨åˆ°çš„ï¼Œç€é‡åŠ å¼ºäº†ä¸‹æˆ‘ç»å¸¸ç”¨åˆ°çš„ä¸€äº›å‘½ä»¤ã€‚ æ¯”å¦‚ kill ï¼Œæˆ‘ä»¥å‰ç»å¸¸ç”¨åˆ° kill -9, ä½†æ˜¯å…¶å®ä¸€ç›´ä¸çŸ¥é“è¿™ä¸ª -9 æ˜¯ä»€ä¹ˆä¸œè¥¿ã€‚ç°åœ¨è¿›è¡Œç¨å¾®ç³»ç»Ÿä¸€ç‚¹çš„å­¦ä¹ ï¼Œæ‰“å‘½ä»¤ä¸å†ä¾é ç†Ÿæ‚‰å’Œæ›¾ç»ç”¨è¿‡ï¼Œè€Œæ˜¯æœ‰ç†è§£çš„ã€‚ğŸ“šâ„ï¸ åŒ…æ‹¬è¿˜æœ‰ sudo åŠ su, ä»¥å‰ä¸€ç›´æœ‰ç”¨è¿‡ï¼Œä½†æ˜¯æ¨¡æ‹Ÿä¸¤å¯ï¼Œå¹¶ä¸çŸ¥é“ä¸¤è€…çš„åŒºåˆ«ã€‚ç°åœ¨éƒ½å¤§è‡´çš„æœ‰äº†è§£ã€‚ä»¥åçœ‹è¿ç»´åŒå­¦æ•²å‘½ä»¤ï¼Œæˆ‘çœ‹å®ƒæ•² su or sudo å°±çŸ¥é“å®ƒæ˜¯å¤§æ¦‚çš„åŒºåˆ«æ˜¯ä»€ä¹ˆäº†ã€‚æƒ³è¦åšä»€ä¹ˆäº‹æƒ…ã€‚ğŸ¶","categories":[],"tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://sevencai.github.io/tags/è¯»ä¹¦ç¬”è®°/"}]},{"title":"The Linux Command Line è¯»ä¹¦ç¬”è®°ï¼ˆä¸€ï¼‰","slug":"The-Linux-Command-Line-è¯»ä¹¦ç¬”è®°ï¼ˆä¸€ï¼‰","date":"2018-08-10T12:54:15.000Z","updated":"2018-08-10T13:18:59.000Z","comments":true,"path":"2018/08/10/The-Linux-Command-Line-è¯»ä¹¦ç¬”è®°ï¼ˆä¸€ï¼‰/","link":"","permalink":"http://sevencai.github.io/2018/08/10/The-Linux-Command-Line-è¯»ä¹¦ç¬”è®°ï¼ˆä¸€ï¼‰/","excerpt":"","text":"è¿™ç¯‡æ–‡ç« æ˜¯æˆ‘è¯» The Linux Command Line çš„è¯»ä¹¦ç¬”è®°ã€‚ç”µå­ç‰ˆçš„ä¹¦çš„åœ°å€æ˜¯ï¼šTLCLã€‚ç›¸æ¯”äºé¸Ÿå”ï¼Œè¿™æœ¬ä¹¦å¥½åœ¨æ¯”è¾ƒå°‘ï¼Œé‡ç‚¹æ¯”è¾ƒçªå‡ºï¼Œå¤§éƒ¨åˆ†é‡Œé¢çš„å‘½ä»¤éƒ½æ˜¯æˆ‘ä¼šç»å¸¸ç”¨åˆ°çš„ã€‚ç¼ºç‚¹æ˜¯ä¹Ÿå­˜åœ¨å°‘é‡å†—ä½™çš„å†…å®¹ã€‚ä¸ä¾¿äºæˆ‘æŸ¥æ‰¾å’Œå­¦ä¹ ã€‚å› æ­¤æˆ‘æŠŠæˆ‘éœ€è¦çš„ä¸œè¥¿ä»ä¸­æŠ½å–å‡ºæ¥ï¼Œæ€»ç»“å¹¶ä¸”æç‚¼ï¼Œä»¥ä¾¿æ—¥åçš„æŸ¥æ‰¾å’Œå­¦ä¹ ã€‚æ­¤ç¯‡ç¬”è®°ğŸ“’æ˜¯ä¹¦çš„ç¬¬ä¸€ç« åˆ°ç¬¬ä¹ç« ã€‚ ç¬¬ä¸€ç« ï¼šä»€ä¹ˆæ˜¯ shellğŸ shell å°±æ˜¯ä¸€ä¸ªç¨‹åºï¼Œå®ƒæ¥å—ä»é”®ç›˜è¾“å…¥çš„å‘½ä»¤ï¼Œ ç„¶åæŠŠå‘½ä»¤ä¼ é€’ç»™æ“ä½œç³»ç»Ÿå»æ‰§è¡Œã€‚å‡ ä¹æ‰€æœ‰çš„ Linux å‘è¡Œç‰ˆéƒ½æä¾›ä¸€ä¸ªåä¸º bash çš„ æ¥è‡ª GNU é¡¹ç›®çš„ shell ç¨‹åºã€‚â€œbashâ€ æ˜¯ â€œBourne Again SHellâ€ çš„é¦–å­—æ¯ç¼©å†™ï¼Œ æ‰€æŒ‡çš„æ˜¯è¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œbash æ˜¯æœ€åˆ Unix ä¸Šç”± Steve Bourne å†™æˆ shell ç¨‹åº sh çš„å¢å¼ºç‰ˆã€‚ [me@linuxbox ~]$ ä»£è¡¨ username@machinename ï¼Œåé¢å¯èƒ½æ˜¯ $ or #ï¼Œå…¶ä¸­ # ä»£è¡¨äº†ä½ æœ‰ root æƒé™ï¼Œ å¯¹åº”çš„ $ å¯èƒ½ä»£è¡¨çš„å°±æ˜¯æ™®é€šçš„ç”¨æˆ·ã€‚ ä¸€äº›ç®€å•çš„å‘½ä»¤å¦‚ä¸‹ï¼š 1234date å½“å‰æ—¶é—´cal æ—¥æœŸdf æŸ¥çœ‹ç£ç›˜å‰©ä½™ç©ºé—´çš„æ•°é‡exit ç»ˆæ­¢ä¼šè¯ ç¬¬äºŒç« ï¼šæ–‡ä»¶ç³»ç»Ÿä¸­è·³è½¬ç›¸å…³å‘½ä»¤ï¼š1234567pwd æ‰“å°å‡ºå½“å‰å·¥ä½œç›®å½•åcd dir æ›´æ”¹ç›®å½•ls åˆ—å‡ºç›®å½•å†…å®¹ï¼Œä¸åŒ…æ‹¬å¸¦ . çš„éšè—ç›®å½•ls -a å¯ä»¥åˆ—å‡ºå¸¦ . éšè—çš„ç›®å½•cd æ›´æ”¹å·¥ä½œç›®å½•åˆ°ä½ çš„å®¶ç›®å½•cd - æ›´æ”¹å·¥ä½œç›®å½•åˆ°å…ˆå‰çš„å·¥ä½œç›®å½•cd ~user_name æ›´æ”¹å·¥ä½œç›®å½•åˆ°ç”¨æˆ·å®¶ç›®å½• ç¬¬ä¸‰ç« ï¼šæ¢ç©¶æ“ä½œç³»ç»Ÿç›¸å…³å‘½ä»¤ï¼š1234567ls åˆ—å‡ºç›®å½•å†…å®¹file ç¡®å®šæ–‡ä»¶ç±»å‹less æµè§ˆæ–‡ä»¶å†…å®¹ls -l ä½¿ç”¨ ls å‘½ä»¤çš„â€œ-lâ€é€‰é¡¹ï¼Œåˆ™ç»“æœä»¥é•¿æ¨¡å¼è¾“å‡º === llls -lt \"t\"é€‰é¡¹æŒ‰æ–‡ä»¶ä¿®æ”¹æ—¶é—´çš„å…ˆåæ¥æ’åºfile filename æŸ¥çœ‹æ–‡ä»¶çš„ç±»å‹ å‘½ä»¤æ ¼å¼ å‘½ä»¤åç»å¸¸ä¼šå¸¦æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç”¨æ¥æ›´æ­£å‘½ä»¤è¡Œä¸ºçš„é€‰é¡¹ï¼Œ æ›´è¿›ä¸€æ­¥ï¼Œé€‰é¡¹åé¢ä¼šå¸¦æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°ï¼Œè¿™äº›å‚æ•°æ˜¯å‘½ä»¤ä½œç”¨çš„å¯¹è±¡ã€‚12command -options argumentsls -lt --reverse options : é€‰é¡¹, ä¸€èˆ¬æ˜¯ -l è¿™ç§å½¢å¼ï¼Œä¹Ÿæ”¯æŒé•¿é€‰é¡¹ï¼Œé•¿é€‰é¡¹ç”±ä¸¤ä¸ªä¸­åˆ’çº¿åŠ ä¸Šä¸€ä¸ªå­—ç»„æˆã€‚å¦‚ --reverseã€‚ å½“ç„¶ä¹Ÿæœ‰ä¸¤ç§åˆå¹¶çš„ã€‚å¦‚ä¸Šã€‚ ä¸‹é¢è¿™å¼ å›¾æ¥æºäºä¹¦é‡Œçš„å¯¹lsçš„å‘½ä»¤çš„ä¸€éƒ¨åˆ†åˆ—ä¸¾ï¼Œçº¢è‰²çš„æ¡†æ˜¯æˆ‘ç»å¸¸ç”¨çš„ï¼š lessless å‘½ä»¤æ˜¯ä¸€ä¸ªç”¨æ¥æµè§ˆæ–‡æœ¬æ–‡ä»¶çš„ç¨‹åº,less ç¨‹åºå…è®¸ä½ å‰åæ»šåŠ¨æ–‡ä»¶ã€‚ æ ¼å¼ä¸ºï¼š less filenameå¦‚ less a.logå¦‚ ps -ef | less ä»¥åˆ†é¡µçš„å½¢å¼æŸ¥çœ‹å½“å‰è¿›ç¨‹ (è¿™ä¸ªå¥½ç”¨) ä¸Šé¢è¿™ä¸ªå›¾é‡Œæ˜¯ä¸æ˜¯æ„Ÿè§‰è·Ÿ vim å‘½ä»¤å¾ˆåƒï¼Œæˆ‘å†è¡¥å……å‡ ä¸ªï¼Œæ˜¯æˆ‘ç»å¸¸ç”¨åˆ°çš„ï¼š 12345678910- /å­—ç¬¦ä¸²ï¼šå‘ä¸‹æœç´¢\"å­—ç¬¦ä¸²\"çš„åŠŸèƒ½- ?å­—ç¬¦ä¸²ï¼šå‘ä¸Šæœç´¢\"å­—ç¬¦ä¸²\"çš„åŠŸèƒ½- nï¼šé‡å¤å‰ä¸€ä¸ªæœç´¢ï¼ˆä¸ / æˆ– ? æœ‰å…³ï¼‰- Nï¼šåå‘é‡å¤å‰ä¸€ä¸ªæœç´¢ï¼ˆä¸ / æˆ– ? æœ‰å…³ï¼‰- b å‘åç¿»ä¸€é¡µ- d å‘åç¿»åŠé¡µ- ç©ºæ ¼é”® æ»šåŠ¨ä¸€é¡µ- å›è½¦é”® æ»šåŠ¨ä¸€è¡Œ- u å‘å‰æ»šåŠ¨åŠé¡µ- y å‘å‰æ»šåŠ¨ä¸€è¡Œ ç¬¬å››ç« ï¼šæ“ä½œæ–‡ä»¶å’Œç›®å½•ä¸»è¦å‘½ä»¤æœ‰ï¼š12345- cp â€” å¤åˆ¶æ–‡ä»¶å’Œç›®å½•- mv â€” ç§»åŠ¨/é‡å‘½åæ–‡ä»¶å’Œç›®å½•- mkdir â€” åˆ›å»ºç›®å½•- rm â€” åˆ é™¤æ–‡ä»¶å’Œç›®å½•- ln â€” åˆ›å»ºç¡¬é“¾æ¥å’Œç¬¦å·é“¾æ¥ è¿™å‡ ä¸ªå‘½ä»¤æˆ‘ä»¬æœ€ç†Ÿæ‚‰ä¸è¿‡äº†ã€‚ä¸‹é¢ç®€å•çš„åˆ—ä¸¾äº†è¿™å‡ ä¸ªçš„ä¸€äº›åŸºæœ¬ç”¨æ³•ã€‚ cp å¤åˆ¶æ–‡ä»¶å’Œç›®å½• 123456789101112131415// è‹¥ file2 å­˜åœ¨ï¼Œåˆ™è¦†ç›–oré‡å†™ï¼Œè‹¥ä¸å­˜åœ¨åˆ™åˆ›å»ºcp file1 file2// -i ä»£è¡¨ info, æ‰€ä»¥è·Ÿä¸Šé¢ç›¸åŒï¼Œåªæ˜¯è¦†ç›–oré‡å†™ä¼šæœ‰æç¤ºcp -i file1 file2// å¤åˆ¶æ–‡ä»¶ file1 å’Œæ–‡ä»¶ file2 åˆ°ç›®å½• dir1ã€‚ç›®å½• dir1 å¿…é¡»å­˜åœ¨cp file1 file2 dir1// ä½¿ç”¨ä¸€ä¸ªé€šé…ç¬¦ï¼Œåœ¨ç›®å½• dir1 ä¸­çš„æ‰€æœ‰æ–‡ä»¶éƒ½è¢«å¤åˆ¶åˆ°ç›®å½• dir2 ä¸­ã€‚ dir2 å¿…é¡»å·²ç»å­˜åœ¨cp dir1/* dir2// å¤åˆ¶ç›®å½• dir1 ä¸­çš„å†…å®¹åˆ°ç›®å½• dir2ã€‚// å¦‚æœç›®å½• dir2 ä¸å­˜åœ¨ï¼Œ åˆ›å»ºç›®å½• dir2ï¼Œæ“ä½œå®Œæˆåï¼Œç›®å½• dir2 ä¸­çš„å†…å®¹å’Œ dir1 ä¸­çš„ä¸€æ ·cp -r dir1 dir2 mv ç§»åŠ¨å’Œé‡å‘½åæ–‡ä»¶ 123456789// å¦‚æœ file2 å­˜åœ¨ï¼Œå®ƒçš„å†…å®¹ä¼šè¢« file1 çš„å†…å®¹é‡å†™ã€‚// å¦‚æœ file2 ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»º file2ã€‚ è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œfile1 éƒ½ä¸å†å­˜åœ¨mv file1 file2// é‡å†™æ—¶ä¼šæç¤ºç”¨æˆ·mv -i file1 file2// ç§»åŠ¨ file1 å’Œ file2 åˆ°ç›®å½• dir1 ä¸­ã€‚dir1 å¿…é¡»å·²ç»å­˜åœ¨mv file1 file2 dir1 rm - åˆ é™¤æ–‡ä»¶å’Œç›®å½•1234567891011// é»˜é»˜åœ°åˆ é™¤æ–‡ä»¶rm file1// é™¤äº†åœ¨åˆ é™¤æ–‡ä»¶ä¹‹å‰ï¼Œæç¤ºç”¨æˆ·ç¡®è®¤ä¿¡æ¯ä¹‹å¤–ï¼Œå’Œä¸Šé¢çš„å‘½ä»¤ä½œç”¨ä¸€æ ·rm -i file1// åˆ é™¤æ–‡ä»¶ file1, ç›®å½• dir1ï¼ŒåŠ dir1 ä¸­çš„å†…å®¹rm -r file1 dir1// åŒä¸Šï¼Œé™¤äº†å¦‚æœæ–‡ä»¶ file1ï¼Œæˆ–ç›®å½• dir1 ä¸å­˜åœ¨çš„è¯ï¼Œrm ä»ä¼šç»§ç»­æ‰§è¡Œã€‚rm -rf file1 dir1 ä¸è¦ç”¨ rm -rf, ç”¨ rm -ri å§ï¼Œç»™è‡ªå·±ä¸€ç‚¹åæ‚”çš„ä½™åœ°ã€‚ ln â€” åˆ›å»ºé“¾æ¥ å»ºç«‹ç¬¦å·é“¾æ¥çš„ç›®çš„æ˜¯ä¸ºäº†å…‹æœç¡¬é“¾æ¥çš„ä¸¤ä¸ªç¼ºç‚¹ï¼šç¡¬é“¾æ¥ä¸èƒ½è·¨è¶Šç‰©ç†è®¾å¤‡ï¼Œ ç¡¬é“¾æ¥ä¸èƒ½å…³è”ç›®å½•ï¼Œåªèƒ½æ˜¯æ–‡ä»¶ã€‚ç¬¦å·é“¾æ¥æ˜¯æ–‡ä»¶çš„ç‰¹æ®Šç±»å‹ï¼Œå®ƒåŒ…å«ä¸€ä¸ªæŒ‡å‘ ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•çš„æ–‡æœ¬æŒ‡é’ˆã€‚123456// åˆ›å»ºç¡¬é“¾æ¥ln file link// åˆ›å»ºç¬¦å·é“¾æ¥ï¼ˆsoftï¼‰ln -s æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶ln -s item link å…³äºè¿™é‡Œæˆ‘æœ‰ä¸€äº›å®é™…å¯ä»¥ç”¨åˆ°è½¯ç¡¬é“¾æ¥çš„åœºæ™¯ã€‚ç¨åå†è¡¥å……ã€‚ é€šé…ç¬¦ä¹¦é‡Œå…ˆç®€å•çš„è®²äº†ä¸‹é€šé…ç¬¦ï¼Œæˆ‘è§‰å¾—åªçœ‹ä¾‹å­å°±å¥½äº†ã€‚ ç¬¬äº”ç« ï¼šä½¿ç”¨å‘½ä»¤ä¸»è¦çš„å‡ ä¸ªæœ‰ï¼š1234567- type â€“ æ˜¾ç¤ºå‘½ä»¤çš„ç±»å‹- which â€“ æ˜¾ç¤ºä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºçš„ä½ç½®- man â€“ æ˜¾ç¤ºå‘½ä»¤æ‰‹å†Œé¡µ- apropos â€“ æ˜¾ç¤ºä¸€ç³»åˆ—é€‚åˆçš„å‘½ä»¤- info â€“ æ˜¾ç¤ºå‘½ä»¤ info- whatis â€“ æ˜¾ç¤ºä¸€ä¸ªå‘½ä»¤çš„ç®€æ´æè¿°- alias â€“ åˆ›å»ºå‘½ä»¤åˆ«å ä¸‹é¢ä¸¾ä¸€äº›ä¾‹å­ï¼Œè¿™ä¸ªæ›´å¥½ç†è§£ä¸€äº›ï¼š12345678910111213141516171819202122// type å‘½ä»¤æ˜¯ shell å†…éƒ¨å‘½ä»¤ï¼Œå®ƒä¼šæ˜¾ç¤ºå‘½ä»¤çš„ç±»åˆ«ï¼Œç»™å‡ºä¸€ä¸ªç‰¹å®šçš„å‘½ä»¤åï¼ˆåšä¸ºå‚æ•°ï¼‰type ls =&gt; ls is an alias for ls -Gtype cd =&gt; cd is a shell builtintype type =&gt; type is a shell builtins// è¿™ä¸ªå‘½ä»¤åªå¯¹å¯æ‰§è¡Œç¨‹åºæœ‰æ•ˆï¼Œä¸åŒ…æ‹¬å†…å»ºå‘½ä»¤å’Œå‘½ä»¤åˆ«åwhich node =&gt; /usr/local/bin/nodewhich npm =&gt; /usr/local/bin/npm// è¾“å…¥â€œhelpâ€ï¼Œæ¥ç€æ˜¯ shell å†…éƒ¨å‘½ä»¤å, æ³¨æ„åé¢è·Ÿçš„ä¸€å®šè¦æ˜¯ builtin commandshelp cdhelp help// --help - æ˜¾ç¤ºç”¨æ³•ä¿¡æ¯,å®ƒä¸è¦æ±‚æ˜¯ builtin commands, æ˜¯å¯æ‰§è¡Œç¨‹åºå³å¯mkdir --help | lesstar --help// è®¸å¤šå¸Œæœ›è¢«å‘½ä»¤è¡Œä½¿ç”¨çš„å¯æ‰§è¡Œç¨‹åº// æä¾›äº†ä¸€ä¸ªæ­£å¼çš„æ–‡æ¡£ï¼Œå«åšæ‰‹å†Œæˆ–æ‰‹å†Œé¡µ(man page)ã€‚// ä¸€ä¸ªç‰¹æ®Šçš„å«åš man çš„åˆ†é¡µç¨‹åºï¼Œå¯ç”¨æ¥æµè§ˆä»–ä»¬ã€‚man whichman ls å…³äº alias æˆ‘è§‰å¾—å¾ˆå¥½ç”¨ï¼Œå•ç‹¬æ‹¿å‡ºæ¥ï¼š è¯­æ³•æ˜¯ï¼š alias name=&#39;string&#39;å®é™…ä¸Šæˆ‘ä»¬å¹³æ—¶å†™ å‘½ä»¤ æ—¶ï¼Œæ˜¯å¯ä»¥å‡ ä¸ªä¸€èµ·å†™çš„ï¼Œæ¯”å¦‚ cd /usr; ls; cd -ã€‚å¦‚æœè¿™ä¸ªå‘½ä»¤ä½ ç»å¸¸ç”¨ï¼Œè€Œä¸”ä¸æƒ³è¦æ¯æ¬¡éƒ½æ‰“æŠ˜ä¸‰ä¸ªå‘½ä»¤ï¼Œé‚£ä¹ˆä½ å¯ä»¥æŠŠå®ƒåšæˆä¸€ä¸ªåˆ«åã€‚è¿™æ ·æ¯æ¬¡å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„åˆ‡æ¢äº†ã€‚å¦‚æˆ‘ä»¬ç»™ä¸Šé¢ä¸€ä¸ªå‘½ä»¤èµ·åå« test, åœ¨æ¯æ¬¡èµ·åˆ«åå‰ï¼Œè®°å¾—ç”¨ type è¯•ä¸‹ï¼Œçœ‹è¿™ä¸ªåˆ«åæ˜¯å¦è¢«å ç”¨äº†ã€‚ 1234567891011// bash: type: foo: not found å¯ä»¥åˆ›å»ºä¸ºåˆ«åtype test// test is a shell builtin å·²ç»è¢«ä½¿ç”¨äº†ï¼Œä¸èƒ½åˆ›å»ºäº†type test// test ä¸ºæˆ‘ä»¬çš„å‘½ä»¤äº†alias test='cd /usr; ls; cd -'// æ­¤æ—¶æˆ‘ä»¬æŸ¥çœ‹å°±ä¼šæ˜¾ç¤ºï¼š foo is aliased to `cd /usr; ls ; cd -'type test ç¬¬å…­ç« ï¼šé‡å®šå‘ â€I/Oâ€ä»£è¡¨è¾“å…¥/è¾“å‡ºï¼Œ é€šè¿‡è¿™ä¸ªå·¥å…·ï¼Œä½ å¯ä»¥é‡å®šå‘å‘½ä»¤çš„è¾“å…¥è¾“å‡ºï¼Œå‘½ä»¤çš„è¾“å…¥æ¥è‡ªæ–‡ä»¶ï¼Œè€Œè¾“å‡ºä¹Ÿå­˜åˆ°æ–‡ä»¶ã€‚ ä¹Ÿå¯ä»¥æŠŠå¤šä¸ªå‘½ä»¤è¿æ¥èµ·æ¥ç»„æˆä¸€ä¸ªå¼ºå¤§çš„å‘½ä»¤ç®¡é“ã€‚ ä¸»è¦çš„å‘½ä»¤æœ‰ï¼š12345678- cat ï¼ è¿æ¥æ–‡ä»¶- sort ï¼ æ’åºæ–‡æœ¬è¡Œ- uniq ï¼ æŠ¥é“æˆ–çœç•¥é‡å¤è¡Œ- grep ï¼ æ‰“å°åŒ¹é…è¡Œ- wc ï¼ æ‰“å°æ–‡ä»¶ä¸­æ¢è¡Œç¬¦ï¼Œå­—ï¼Œå’Œå­—èŠ‚ä¸ªæ•°- head ï¼ è¾“å‡ºæ–‡ä»¶ç¬¬ä¸€éƒ¨åˆ†- tail - è¾“å‡ºæ–‡ä»¶æœ€åä¸€éƒ¨åˆ†- tee - ä»æ ‡å‡†è¾“å…¥è¯»å–æ•°æ®ï¼Œå¹¶åŒæ—¶å†™åˆ°æ ‡å‡†è¾“å‡ºå’Œæ–‡ä»¶ æ ‡å‡†è¾“å‡ºé‡å®šå‘1234ls -l ls-output.txtls -l /bin/usr &gt; ls-output.txt ä¸è¿½åŠ ï¼Œæ¯æ¬¡éƒ½è¢«ä»å¤´è¦†ç›–ls -l /usr/bin &gt;&gt; ls-output.txt è¿½åŠ åˆ°æ–‡ä»¶ä¸­&gt; ls-output.txt æ¸…ç©ºæŸä¸ªæ–‡ä»¶ æ ‡å‡†é”™è¯¯é‡å®šå‘ æ ‡å‡†é”™è¯¯é‡å®šå‘æ²¡æœ‰ä¸“ç”¨çš„é‡å®šå‘æ“ä½œç¬¦ã€‚ä¸ºäº†é‡å®šå‘æ ‡å‡†é”™è¯¯ï¼Œæˆ‘ä»¬å¿…é¡»å‚è€ƒå…¶æ–‡ä»¶æè¿°ç¬¦ã€‚ ä¸€ä¸ªç¨‹åºå¯ä»¥åœ¨å‡ ä¸ªç¼–å·çš„æ–‡ä»¶æµä¸­çš„ä»»ä¸€ä¸ªä¸Šäº§ç”Ÿè¾“å‡ºã€‚è™½ç„¶æˆ‘ä»¬å·²ç»å°†è¿™äº›æ–‡ä»¶æµçš„å‰ ä¸‰ä¸ªç§°ä½œæ ‡å‡†è¾“å…¥ã€è¾“å‡ºå’Œé”™è¯¯ï¼Œshell å†…éƒ¨åˆ†åˆ«å°†å…¶ç§°ä¸ºæ–‡ä»¶æè¿°ç¬¦0ã€1å’Œ2ã€‚shell ä½¿ç”¨æ–‡ä»¶æè¿°ç¬¦æä¾› äº†ä¸€ç§è¡¨ç¤ºæ³•æ¥é‡å®šå‘æ–‡ä»¶ã€‚å› ä¸ºæ ‡å‡†é”™è¯¯å’Œæ–‡ä»¶æè¿°ç¬¦2ä¸€æ ·ï¼Œæˆ‘ä»¬ç”¨è¿™ç§ è¡¨ç¤ºæ³•æ¥é‡å®šå‘æ ‡å‡†é”™è¯¯ï¼š 123456789// å½“ /bin/usr ä¸å­˜åœ¨æ—¶æŠ¥é”™å°†è¾“å‡ºåˆ° ls-error.txt ä¸­ls -l /bin/usr 2&gt; ls-error.txt// æœ‰çš„æ—¶å€™å¯èƒ½æˆ‘ä»¬éœ€è¦é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯åˆ°åŒä¸€ä¸ªæ–‡ä»¶ls -l /bin/usr &gt; ls-output.txt 2&gt;&amp;1// ç°åœ¨çš„ bash ç‰ˆæœ¬æä¾›äº†ç¬¬äºŒç§æ–¹æ³•ï¼Œæ›´ç²¾ç®€åˆç†çš„æ–¹æ³•æ¥æ‰§è¡Œè¿™ç§è”åˆçš„é‡å®šå‘// ä½¿ç”¨å•å•ä¸€ä¸ªè¡¨ç¤ºæ³• &amp;&gt; æ¥é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯åˆ°æ–‡ä»¶ls -l /bin/usr &amp;&gt; ls-output.txt å¤„ç†ä¸éœ€è¦çš„è¾“å‡ºæœ‰æ—¶å€™â€œæ²‰é»˜æ˜¯é‡‘â€ï¼Œæˆ‘ä»¬ä¸æƒ³è¦ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºç»“æœï¼Œåªæƒ³æŠŠå®ƒä»¬æ‰”æ‰ã€‚è¿™ç§æƒ…å†µ å°¤å…¶é€‚ç”¨äºé”™è¯¯å’ŒçŠ¶æ€ä¿¡æ¯ã€‚ç³»ç»Ÿé€šè¿‡é‡å®šå‘è¾“å‡ºç»“æœåˆ°ä¸€ä¸ªå«åšâ€/dev/nullâ€çš„ç‰¹æ®Šæ–‡ä»¶ï¼Œ ä¸ºæˆ‘ä»¬æä¾›äº†è§£å†³é—®é¢˜çš„æ–¹æ³•ã€‚è¿™ä¸ªæ–‡ä»¶æ˜¯ç³»ç»Ÿè®¾å¤‡ï¼Œå«åšä½å­˜å‚¨æ¡¶ï¼Œå®ƒå¯ä»¥ æ¥å—è¾“å…¥ï¼Œå¹¶ä¸”å¯¹è¾“å…¥ä¸åšä»»ä½•å¤„ç†ã€‚ä¸ºäº†éšç’å‘½ä»¤é”™è¯¯ä¿¡æ¯ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·åšã€‚12// å¤„ç†ä¸éœ€è¦çš„è¾“å‡ºls -l /bin/usr 2&gt; /dev/null ä¸Šé¢çš„æ¯”è¾ƒå°‘ç”¨åˆ°ï¼ŒåŸºæœ¬ä¸Šæˆ‘ä¹‹å‰æ²¡æœ‰ç”¨åˆ°è¿‡ã€‚ æ ‡å‡†è¾“å…¥é‡å®šå‘cat å‘½ä»¤12345// cat å‘½ä»¤è¯»å–ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶// cat ç»å¸¸è¢«ç”¨æ¥æ˜¾ç¤ºç®€çŸ­çš„æ–‡æœ¬æ–‡ä»¶ä¸åˆ†é¡µcat [file]cat z.txtcat &lt; lazy_dog.txt å°†æ ‡å‡†è¾“å…¥ï¼Œè¾“å‡ºåˆ° æ–‡ä»¶ä¸­ ç®¡é“çº¿ å‘½ä»¤ä»æ ‡å‡†è¾“å…¥è¯»å–æ•°æ®å¹¶è¾“é€åˆ°æ ‡å‡†è¾“å‡ºçš„èƒ½åŠ›è¢«ä¸€ä¸ªç§°ä¸ºç®¡é“çº¿çš„ shell ç‰¹æ€§æ‰€åˆ©ç”¨ã€‚ ä½¿ç”¨ç®¡é“æ“ä½œç¬¦â€|â€ï¼ˆç«–æ ï¼‰ï¼Œä¸€ä¸ªå‘½ä»¤çš„æ ‡å‡†è¾“å‡ºå¯ä»¥é€šè¿‡ç®¡é“é€è‡³å¦ä¸€ä¸ªå‘½ä»¤çš„æ ‡å‡†è¾“å…¥ï¼š 12command1 | command2ls -l /usr/bin | less ç®¡é“çº¿ç»å¸¸ç”¨æ¥å¯¹æ•°æ®å®Œæˆå¤æ‚çš„æ“ä½œã€‚æœ‰å¯èƒ½ä¼šæŠŠå‡ ä¸ªå‘½ä»¤æ”¾åœ¨ä¸€èµ·ç»„æˆä¸€ä¸ªç®¡é“çº¿ã€‚ é€šå¸¸ï¼Œä»¥è¿™ç§æ–¹å¼ä½¿ç”¨çš„å‘½ä»¤è¢«ç§°ä¸ºè¿‡æ»¤å™¨ã€‚è¿‡æ»¤å™¨æ¥å—è¾“å…¥ï¼Œä»¥æŸç§æ–¹å¼æ”¹å˜å®ƒï¼Œç„¶å è¾“å‡ºå®ƒã€‚ 1ls /bin /usr/bin | sort | less uniq - æŠ¥é“æˆ–å¿½ç•¥é‡å¤è¡Œ12// åˆ—è¡¨ä¸­ä¸åŒ…å«é‡å¤å¥å­ls /bin /usr/bin | sort | uniq | less wc ï¼ æ‰“å°è¡Œæ•°ã€å­—æ•°å’Œå­—èŠ‚æ•°123456// wcï¼ˆå­—è®¡æ•°ï¼‰å‘½ä»¤æ˜¯ç”¨æ¥æ˜¾ç¤ºæ–‡ä»¶æ‰€åŒ…å«çš„è¡Œæ•°ã€å­—æ•°å’Œå­—èŠ‚æ•°wc ls-output.txt7902 64566 503634 ls-output.txt// â€-lâ€é€‰é¡¹é™åˆ¶å‘½ä»¤è¾“å‡ºåªèƒ½ æŠ¥é“è¡Œæ•°ã€‚æ·»åŠ  wc åˆ°ç®¡é“çº¿æ¥ç»Ÿè®¡æ•°æ®ï¼Œæ˜¯ä¸ªå¾ˆä¾¿åˆ©çš„æ–¹æ³•ls /bin /usr/bin | sort | uniq | wc -l grep ï¼ æ‰“å°åŒ¹é…è¡Œgrep æ˜¯ä¸ªå¾ˆå¼ºå¤§çš„ç¨‹åºï¼Œç”¨æ¥æ‰¾åˆ°æ–‡ä»¶ä¸­çš„åŒ¹é…æ–‡æœ¬ã€‚è¿™æ ·ä½¿ç”¨ grep å‘½ä»¤ï¼š12â€-iâ€ä½¿å¾— grep åœ¨æ‰§è¡Œæœç´¢æ—¶å¿½ç•¥å¤§å°å†™ï¼ˆé€šå¸¸ï¼Œæœç´¢æ˜¯å¤§å°å†™ æ•æ„Ÿçš„ï¼‰ï¼Œâ€-vâ€é€‰é¡¹ä¼šå‘Šè¯‰ grep åªæ‰“å°ä¸åŒ¹é…çš„è¡Œã€‚ls /bin /usr/bin | sort | uniq | grep zip head / tail ï¼ æ‰“å°æ–‡ä»¶å¼€å¤´éƒ¨åˆ†/ç»“å°¾éƒ¨åˆ†12345678// head å‘½ä»¤æ‰“å°æ–‡ä»¶çš„å‰åè¡Œï¼Œè€Œ tail å‘½ä»¤æ‰“å°æ–‡ä»¶çš„ååè¡Œã€‚ -n ç”¨æ¥æŒ‡å®šhead -n 5 ls-output.txttotal 343496tail -n 5 ls-output.txtls /usr/bin | tail -n 5// tail æœ‰ä¸€ä¸ªé€‰é¡¹å…è®¸ä½ å®æ—¶åœ°æµè§ˆæ–‡ä»¶ã€‚å½“è§‚å¯Ÿæ—¥å¿—æ–‡ä»¶çš„è¿›å±•æ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒä»¬åŒæ—¶åœ¨è¢«å†™å…¥ã€‚tail -f /var/log/messages ä½¿ç”¨â€-fâ€é€‰é¡¹ï¼Œtail å‘½ä»¤ç»§ç»­ç›‘æµ‹è¿™ä¸ªæ–‡ä»¶ï¼Œå½“æ–°çš„å†…å®¹æ·»åŠ åˆ°æ–‡ä»¶åï¼Œå®ƒä»¬ä¼šç«‹å³ å‡ºç°åœ¨å±å¹•ä¸Šã€‚è¿™ä¼šä¸€ç›´ç»§ç»­ä¸‹å»ç›´åˆ°ä½ è¾“å…¥ Ctrl-cã€‚ tee ï¼ ä» Stdin è¯»å–æ•°æ®ï¼Œå¹¶åŒæ—¶è¾“å‡ºåˆ° Stdout å’Œæ–‡ä»¶ä¸ºäº†å’Œæˆ‘ä»¬çš„ç®¡é“éšå–»ä¿æŒä¸€è‡´ï¼ŒLinux æä¾›äº†ä¸€ä¸ªå«åš tee çš„å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤åˆ¶é€ äº† ä¸€ä¸ªâ€teeâ€ï¼Œå®‰è£…åˆ°æˆ‘ä»¬çš„ç®¡é“ä¸Šã€‚tee ç¨‹åºä»æ ‡å‡†è¾“å…¥è¯»å…¥æ•°æ®ï¼Œå¹¶ä¸”åŒæ—¶å¤åˆ¶æ•°æ® åˆ°æ ‡å‡†è¾“å‡ºï¼ˆå…è®¸æ•°æ®ç»§ç»­éšç€ç®¡é“çº¿æµåŠ¨ï¼‰å’Œä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ã€‚å½“åœ¨æŸä¸ªä¸­é—´å¤„ç† é˜¶æ®µæ¥æ•æ‰ä¸€ä¸ªç®¡é“çº¿çš„å†…å®¹æ—¶ï¼Œè¿™å¾ˆæœ‰å¸®åŠ©ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬é‡å¤æ‰§è¡Œä¸€ä¸ªå…ˆå‰çš„ä¾‹å­ï¼Œ è¿™æ¬¡åŒ…å« tee å‘½ä»¤ï¼Œåœ¨ grep è¿‡æ»¤ç®¡é“çº¿çš„å†…å®¹ä¹‹å‰ï¼Œæ¥æ•æ‰æ•´ä¸ªç›®å½•åˆ—è¡¨åˆ°æ–‡ä»¶ ls.txtï¼š1ls /usr/bin | tee ls.txt | grep zip ä» shell çœ¼ä¸­çœ‹ä¸–ç•Œ- Echo1- echo ï¼ æ˜¾ç¤ºä¸€è¡Œæ–‡æœ¬ åˆ©ç”¨ echo ä½ å¯ä»¥åšä¸‹é¢è¿™äº›äº‹æƒ…ã€‚è¿™ä¸ª echo è·Ÿ php é‡Œçš„ echo éå¸¸çš„åƒã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657echo this is a test// this is a testecho *// Applications Desktop Documents Downloads Library Movies Music Pictures Publicecho D*// Desktop Documents Downloadsecho *s// Documents Pictures Templates Videosecho [[:upper:]]*// Desktop Documents Music Pictures Public Templates Videosecho /usr/*/share// /usr/a/share /user/b/shareecho ~// /Users/sevencaiecho $((2 + 2))// 4echo $(($((5**2)) * 3))// 5*5 *3 = 75echo Front-&#123;A,B,C&#125;-Back// Front-A-Back Front-B-Back Front-C-Backecho Number_&#123;1,5&#125;// Number_1 Number_2 Number_3 Number_4 Number_5echo $USER// sevencai// æŸ¥çœ‹æœ‰æ•ˆå˜é‡printenv | less// å‘½ä»¤æ›¿æ¢echo $(ls)ls -l $(which cp) // åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå•è¯åˆ†å‰²æœºåˆ¶ä¼šåœ¨å•è¯ä¸­å¯»æ‰¾ç©ºæ ¼ï¼Œåˆ¶è¡¨ç¬¦ï¼Œå’Œæ¢è¡Œç¬¦ï¼Œå¹¶æŠŠå®ƒä»¬çœ‹ä½œ å•è¯ä¹‹é—´çš„ç•Œå®šç¬¦ã€‚è¿™æ„å‘³ç€æ— å¼•ç”¨çš„ç©ºæ ¼ï¼Œåˆ¶è¡¨ç¬¦å’Œæ¢è¡Œç¬¦éƒ½ä¸æ˜¯æ–‡æœ¬çš„ä¸€éƒ¨åˆ†ï¼Œ å®ƒä»¬åªä½œä¸ºåˆ†éš”ç¬¦ä½¿ç”¨ã€‚ç”±äºå®ƒä»¬æŠŠå•è¯åˆ†ä¸ºä¸åŒçš„å‚æ•°ï¼Œæ‰€ä»¥åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ å‘½ä»¤è¡ŒåŒ…å«ä¸€ä¸ªå¸¦æœ‰å››ä¸ªä¸åŒå‚æ•°çš„å‘½ä»¤ã€‚echo this is a test// this is a test// $1 å½“åšç¬¬ä¸€ä¸ªå˜é‡ï¼Œå› ä¸º `1` æ˜¯æ²¡æœ‰å®šä¹‰çš„å˜é‡ï¼Œæ‰€ä»¥ä¸ºç©ºecho The total is $100.00// The total is 00.00// åœ¨åŒå¼•å·ä¸­ï¼Œå‚æ•°å±•å¼€ã€ç®—æœ¯è¡¨è¾¾å¼å±•å¼€å’Œå‘½ä»¤æ›¿æ¢ä»ç„¶æœ‰æ•ˆecho \"$USER $((2+2)) $(cal)\"echo \"this is a test\"// this is a test è¿™é‡Œæˆ‘è§‰å¾—å¤§è‡´çš„äº†è§£ä¸‹å°±è¡Œã€‚å› ä¸ºçœŸå®æƒ…å†µä¸‹ï¼Œæˆ‘ç”¨åˆ°çš„éå¸¸éå¸¸å°‘ã€‚ é”®ç›˜é«˜çº§æŠ€å·§ç§»åŠ¨å…‰æ ‡ å‰ªåˆ‡å¤åˆ¶ æ€»ç»“ä»Šå¤©å°±åˆ°è¿™é‡Œå§ï¼Œæˆ‘æ‹…å¿ƒå› ä¸ºä»Šå¤©å·²ç»çœ‹äº†å¾ˆå¤šäº†ï¼Œå°±åé¢æŠŠè¿™ä¸ªçœ‹å®Œè¿™æœ¬ä¹¦è®°å½•ä¸‹æ¥å½“åšä»»åŠ¡å»å®Œæˆäº†ï¼Œè¿™æ ·è¿èƒŒäº†æˆ‘çš„åˆè¡·ã€‚æ‰€ä»¥æœ‰æ•ˆçš„æ—¶é—´ï¼Œåšæ­£ç¡®çš„äº‹æƒ…ã€‚æ”¹å¤©æˆ‘å†æ¥æ€»ç»“åé¢å‡ ç« èŠ‚ã€‚ å›å®¶ğŸŒ¶å•¦ï¼Œâœˆï¸æ˜å¤©å»æ¥æˆ‘çš„å°ç‹—ç‹—ï¼Œå¯ä¹ï¼ï¼ï¼ å˜»å˜»ã€‚å¼€å¿ƒã€‚å¼€å¿ƒã€‚","categories":[],"tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://sevencai.github.io/tags/è¯»ä¹¦ç¬”è®°/"}]},{"title":"é¡¹ç›®æ€»ç»“","slug":"é¡¹ç›®æ€»ç»“","date":"2018-08-09T13:23:13.000Z","updated":"2018-08-09T14:03:48.000Z","comments":true,"path":"2018/08/09/é¡¹ç›®æ€»ç»“/","link":"","permalink":"http://sevencai.github.io/2018/08/09/é¡¹ç›®æ€»ç»“/","excerpt":"","text":"æœ€è¿‘ä¸€ä¸ªå¤šæœˆåŠ äº†å¾ˆå¤šç­ï¼Œåšäº†ä¸€ä¸ªæ¯”è¾ƒç´§æ€¥çš„é¡¹ç›® Nodejs + Vueå…¨å®¶æ¡¶ï¼Œæ„Ÿè§‰è‡ªå·±æ”¶è·å¤šå¤šã€‚ä»Šå¤©å·²ç»å‘å¸ƒäº†ç°ç½‘ç‰ˆæœ¬ï¼Œè¶çƒ­æ€»ç»“å’Œæ¢³ç†ä¸‹ã€‚ å†™åœ¨å‰é¢ Nodejs koa2, async awaitç”¨çš„å¾ˆèˆ’é€‚ã€‚ Vue å…¨å®¶æ¡¶,vue webpack vuexå¯å¿«é€Ÿå¼€å‘ã€‚ å‰åç«¯åˆ†ç¦»ï¼ŒNodejs ç«¯çº¯åš Api å±‚ã€‚ pm2 è¿›ç¨‹ç®¡ç†å·¥å…·ã€‚åˆç†Ÿæ‚‰äº†å¾ˆå¤šå‘½ä»¤å’Œè¸©äº†ä¸€äº›å‘ã€‚ log4jsæ—¥å¿—æ‰“å°å·¥å…·ã€‚äº†è§£äº†éƒ¨é—¨çš„æ—¥å¿—è§„èŒƒï¼Œç”¨äºæŸ¥è¯¢é—®é¢˜ã€‚ æ•°æ®åº“ç”¨çš„ sequelizeã€‚ ç™»å½•ç”¨çš„ koa-generic-sessionã€‚ äº†è§£äº† ToB çš„ä¸€äº›æ¦‚å¿µåŠæ€æƒ³ã€‚ ä»¥åå°±æŠ›å¼ƒ PHP è¿™ä¸ªä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€å§ã€‚ä»¥ä¸‹ä¸»è¦æ˜¯è‡ªå·±å¯¹è‡ªå·±é—®é¢˜çš„ä¸€äº›æ¢³ç†ã€‚å¹¶ä¸æ¶‰åŠåˆ°ä»»ä½•çš„çœŸå®é¡¹ç›®ä»£ç âŒ¨ï¸ğŸ ã€‚ è·å–ç”¨æˆ·çš„IPä¿¡æ¯åœ¨å¾ˆå¤šç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬Nodejså±‚éœ€è¦æŠŠç”¨æˆ·çš„ ip ä¼ ç»™åå°çš„ cgi, cgi ä¼šæ ¹æ®è¿™ä¸ª ip åšä¸€äº›ç­–ç•¥ï¼Œå¦‚é£æ§ï¼Œè¥é”€ç­‰ç­‰ã€‚è¿™å°±æ¶‰åŠåˆ° ip æ€ä¹ˆå–çš„æ¦‚å¿µï¼Œä½ å¯èƒ½ä¼šæ¥è§¦åˆ°è¿™å‡ ä¸ª ip: ctx.request.ip ctx.headers[â€˜x-forwarded-forâ€™] ctx.headers[â€˜x-real-ipâ€™] å…ˆæ¥æ™®åŠä¸‹ x-forwarded-foråŠ x-real-ipã€‚ x-forwarded-forçš„æ ¼å¼ä¸€èˆ¬ä¸ºï¼šX-Forwarded-For: client1, proxy1, proxy2 å¦‚ï¼šX-Forwarded-For: 1.1.1.1, 2.2.2.2, 3.3.3.3 æœ€å·¦è¾¹ï¼ˆclient1ï¼‰æ˜¯æœ€åŸå§‹å®¢æˆ·ç«¯çš„IPåœ°å€, ä»£ç†æœåŠ¡å™¨æ¯æˆåŠŸæ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ï¼Œå°±æŠŠè¯·æ±‚æ¥æºIPåœ°å€æ·»åŠ åˆ°å³è¾¹ã€‚ åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¿™ä¸ªè¯·æ±‚æˆåŠŸé€šè¿‡äº†ä¸‰å°ä»£ç†æœåŠ¡å™¨ï¼šproxy1, proxy2 åŠ proxy3ã€‚è¯·æ±‚ç”±client1å‘å‡ºï¼Œåˆ°è¾¾äº†proxy3ï¼ˆproxy3å¯èƒ½æ˜¯è¯·æ±‚çš„ç»ˆç‚¹ï¼‰ã€‚è¯·æ±‚åˆšä»client1ä¸­å‘å‡ºæ—¶ï¼ŒXFFæ˜¯ç©ºçš„ï¼Œè¯·æ±‚è¢«å‘å¾€proxy1ï¼›é€šè¿‡proxy1çš„æ—¶å€™ï¼Œclient1è¢«æ·»åŠ åˆ°XFFä¸­ï¼Œä¹‹åè¯·æ±‚è¢«å‘å¾€proxy2;é€šè¿‡proxy2çš„æ—¶å€™ï¼Œproxy1è¢«æ·»åŠ åˆ°XFFä¸­ï¼Œä¹‹åè¯·æ±‚è¢«å‘å¾€proxy3ï¼›é€šè¿‡proxy3æ—¶ï¼Œproxy2è¢«æ·»åŠ åˆ°XFFä¸­ï¼Œä¹‹åè¯·æ±‚çš„çš„å»å‘ä¸æ˜ï¼Œå¦‚æœproxy3ä¸æ˜¯è¯·æ±‚ç»ˆç‚¹ï¼Œè¯·æ±‚ä¼šè¢«ç»§ç»­è½¬å‘ã€‚é‰´äºä¼ªé€ è¿™ä¸€å­—æ®µéå¸¸å®¹æ˜“ï¼Œåº”è¯¥è°¨æ…ä½¿ç”¨X-Forwarded-Forå­—æ®µã€‚æ­£å¸¸æƒ…å†µä¸‹XFFä¸­æœ€åä¸€ä¸ªIPåœ°å€æ˜¯æœ€åä¸€ä¸ªä»£ç†æœåŠ¡å™¨çš„IPåœ°å€, è¿™é€šå¸¸æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¯é çš„ä¿¡æ¯æ¥æºã€‚ â€“ç»´åŸºç™¾ç§‘ è€Œ x-real-ipæ²¡æœ‰ç›¸å…³æ ‡å‡†ï¼Œä½†æ˜¯åœ¨åå‘ä»£ç†å’Œæ­£å‘ä»£ç†ä¸‹ï¼Œå®ƒçš„å€¼å¯èƒ½ä¸åŒã€‚æ­£å‘ä»£ç†æ—¶ï¼Œè®°å½•çš„æ˜¯å®¢æˆ·ç«¯çš„çœŸå®ipã€‚ åå‘ä»£ç†æ—¶ï¼Œè®°å½•çš„æ˜¯æœ€åä¸€çº§çš„ä»£ç†ipã€‚ æ‰€ä»¥ï¼šx-real-ip åŠ x-forwarded-forè¿™ä¸¤ä¸ª ip å°±æ˜¯å¾ˆæ™®é€šçš„è¯·æ±‚å¤´ï¼Œå®ƒä»¬æ˜¯å¯ä»¥è¢«ç¯¡æ”¹çš„ã€‚æ¯”å¦‚ï¼š1curl http://www.my.com:8089 -H 'X-Forwarded-For: 1.1.1.1' -H 'X-Real-IP: 2.2.2.2' é‚£ä¹ˆè¿™ä¸¤ä¸ªå€¼éƒ½å®¹æ˜“è¢«ç¯¡æ”¹ï¼Œä¸å¯ä¿¡ï¼Œæˆ‘ä»¬è¦æ‹¿åˆ°ç”¨æˆ·çœŸå®çš„ ip æ€ä¹ˆåŠå‘¢ï¼Ÿ ä¸€èˆ¬åœ¨å»ºç«‹ TCP è¿æ¥æ—¶ï¼Œä¼šäº§ç”ŸçœŸå®çš„ IP, å«åš Remote Addressã€‚å› ä¸ºæ˜¯å»ºç«‹åœ¨ TCP ä¸­ï¼Œæ‰€ä»¥è¿™ä¸ª ip ä¸èƒ½è¢«ç¯¡æ”¹ã€‚ä¸€æ—¦ç¯¡æ”¹ï¼Œæ¡æ‰‹ä¸æˆåŠŸï¼Œé‚£ä¹ˆåé¢è‡ªç„¶å°±æ²¡æœ‰äº†ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬è¦å–çœŸå®çš„ ip,åº”è¯¥ä»è¿™ä¸ªå­—æ®µé‡Œå–ã€‚ å®é™…ä¸Šåº”è¯¥å–é‚£ä¸ªå€¼ï¼Œè·Ÿä½  nginx çš„é…ç½®æœ‰å…³ç³»ã€‚æ¯”å¦‚ä¸€èˆ¬é…ç½® nginx åå‘ä»£ç†çš„æ—¶å€™å¯èƒ½è¿™æ ·é…ç½®ï¼š12345proxy_set_header X-Real-IP $remote_addr;proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;// è‹¥ XFF æœ‰å€¼ï¼Œåˆ™ $proxy_add_x_forwarded_for = $XFF, $remote_addr ($XFFä¸$remote_addré€—å·åˆ†å‰²ï¼Œ$remote_addråœ¨å…¶å)// è‹¥ XFF æ²¡æœ‰å€¼ï¼Œåˆ™ $proxy_add_x_forwarded_for = $remote_addr åƒè¿™æ ·èµ‹å€¼åï¼Œå¦‚æœä½ æ˜¯é€šè¿‡ nginx åå‘ä»£ç†æ¥çš„ï¼Œnginx ä¼šæŠŠç”¨æˆ·å®é™… ip ï¼ˆ$remote_addrï¼‰èµ‹å€¼ç»™ X-Real-IP,è¿™æ—¶å€™å®ƒä¹Ÿæ˜¯çœŸå®çš„ç”¨æˆ·IPäº†ã€‚è€Œ XFF ä¹Ÿæ˜¯æœ‰äº†ç”¨æˆ·çš„çœŸå®IPã€‚ é€šè¿‡è¿™æ ·çš„ nginx é…ç½®ã€‚æ•´ä¸ªå†…å®¹å°±æ— æ³•è¢«ç¯¡æ”¹å’Œæ„é€ ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä» X-Real-IP å’Œ XFFçš„æœ€åä¸€æˆª è·å¾—ç”¨æˆ·çœŸå®çš„ IP äº†ã€‚ æ‰€ä»¥æˆ‘æœ€åæ˜¯æ€ä¹ˆä¼ ä»€ä¹ˆå­—æ®µç»™åå°çš„å‘¢ï¼Ÿæˆ‘æœ€åä¼ çš„æ˜¯ x-forwarded-ipï¼Œ æ‹¿åˆ°è¿™ä¸€ç³»åˆ—çš„ ip list åï¼Œåå°ä¼šå»é€šè¿‡ç½‘æ®µæ ¡éªŒï¼Œåˆ¤æ–­å‡ºå“ªä¸ªæ˜¯å¤–ç½‘ ip, ç„¶åæŠŠè¿™ä¸ª ip å½“æˆæ˜¯ç”¨æˆ·çœŸå®çš„ ipã€‚ cgi è¿˜æ˜¯å¾ˆä¸¥è°¨çš„ã€‚ æœ€å¼€å§‹è°ˆåˆ°çš„ ctx.request.ip æ˜¯æœ€åä¸€æ¬¡çš„ ip, æ‰€ä»¥æœ‰å¯èƒ½æ˜¯ä»£ç†æœºå™¨çš„ ipã€‚ é‡åˆ°ä¸€ç¯‡å¥½æ–‡ç« ï¼šx-forwarded-for-header-in-http ä¸€ä¸ªå®ä¾‹ï¼Œåˆ¤æ–­ç”¨æˆ·IPæ˜¯å¦æ­£å¸¸ï¼šå¾®ä¿¡H5æ”¯ä»˜éœ€åˆ¤æ–­ä¸‹å•IPå’Œæ”¯ä»˜IPæ˜¯å¦ä¸€è‡´ å…³äº PM2 çš„ cluster æ¨¡å¼pm2 æ˜¯å¾ˆå¥½çš„è¿›ç¨‹ç®¡ç†å™¨ï¼Œæœ‰è‡ªåŠ¨é‡å¯ç­‰åŠŸèƒ½ï¼Œå¹¶ä¸”è¿˜è‡ªå¸¦è´Ÿè½½å‡è¡¡ã€‚æˆ‘è¿™é‡Œå°±ä¸è®²å…·ä½“çš„ cluster æ¨¡å¼å’Œ pm2 äº†ã€‚å°±åªè®²ä¸‹æˆ‘é‡åˆ°çš„å‘ã€‚ cluster æ¨¡å¼ä¸‹ï¼Œlog4js æ—¥å¿—ï¼Œæ— æ³•æ­£å¸¸æ‰“å°ã€‚è¿™ä¸ªå·²ç»æœ‰ç›¸å…³çš„ issue,åœ°å€åœ¨è¿™é‡Œã€‚å¤§æ¦‚çš„æ„æ€æ˜¯ cluster æ¨¡å¼ä¸‹ï¼Œå¹¶æ²¡æœ‰ master è¿›ç¨‹ï¼Œè€Œæ˜¯åªæœ‰å¤šä¸ª worker å­è¿›ç¨‹ã€‚è€Œ log4js åªåœ¨ master è¿›ç¨‹ä¸‹ï¼Œæ‰ä¼šè¿›è¡Œæ‰“å°æ—¥å¿—çš„æ“ä½œã€‚ä¹‹æ‰€ä»¥è¿™æ ·æ˜¯å› ä¸ºå¤šä¸ª worker æ“ä½œåŒä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼ˆä¸€èˆ¬æˆ‘ä»¬æ—¥å¿—æ–‡ä»¶åªæœ‰ä¸€å¥—é…ç½®ï¼‰å¯èƒ½ä¼šå¯¼è‡´æœ‰é”™ä¹±ç­‰é—®é¢˜ã€‚æœ‰è§£å†³é—®é¢˜çš„æ–¹æ³•ï¼Œéƒ½åœ¨é‚£ä¸ª issue é‡Œï¼Œä½†æ˜¯æˆ‘æ€»è§‰å¾—ä¸å¤ªå¥½ã€‚ å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œåœ¨ cluster æ¨¡å¼ä¸‹ï¼Œåˆ©ç”¨ restart å‘½ä»¤æ— æ³•å®Œå…¨é‡å¯è¿›ç¨‹ï¼Œfork æ¨¡å¼ä¸‹å°±ä¸ä¼šï¼ŒçŒœæµ‹æ˜¯ cluster æ¨¡å¼æœ‰å¤šä¸ª worker, é‡å¯æ˜¯å¦éœ€è¦ restart æŒ‡å®šæ˜¯å“ªä¸ªå­è¿›ç¨‹æ‰å¯ä»¥ï¼Ÿè¿˜å‘ç°ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå­è¿›ç¨‹ï¼Œä¸æŒ‡å®šä¹Ÿä¼šä¸èƒ½é‡å¯ã€‚æˆ‘æ˜å¤©ä¼šå»éªŒè¯ä¸‹ã€‚ é‡åˆ°äº†ä¸€ç¯‡å¥½æ–‡ç« ï¼š using-pm2-to-manage-cluster ç™»å½•æ€éªŒè¯æˆ‘ä»¬åˆ©ç”¨äº†koa session, cookie session è¿™ç§å½¢å¼ã€‚å¼€å§‹çš„æ—¶å€™æˆ‘æŠŠè¿™é‡Œæƒ³å¤æ‚äº†ï¼Œæƒ³è¦ç»“åˆå¾®ä¿¡çš„ç™»å½•æ€ã€‚ä½†å®é™…ä¸Šçº¯ session cookie è¿™ç§åè€Œæ›´å¥½ã€‚ å¤§æ¦‚æµç¨‹æ˜¯ï¼šç”¨æˆ·ç™»å½•ç½‘ç«™ï¼Œè°ƒç”¨å¾®ä¿¡ç™»å½•ï¼Œæ‹‰èµ·æˆæƒï¼Œæˆæƒçš„åœ°å€è°ƒç”¨ Nodejs åå°çš„ä¸€ä¸ªè‡ªå·±å°è£…çš„æ¥å£ã€‚åœ¨è¿™ä¸ªæ¥å£é‡Œè·å¾—ç”¨æˆ·çš„ openid ï¼Œæ ¡éªŒç”¨æˆ·çš„æƒé™å¹¶ä¸”è®¾ç½® ctx.session.sessionIdï¼Œç„¶åè¿”å›åˆ°å‰ç«¯ï¼Œå‰ç«¯è°ƒç”¨åå°çš„æ¥å£ï¼Œé€šè¿‡å·²ç»ç§ä¸‹çš„ sessionId å³å¯åˆ¤æ–­å‡ºç”¨æˆ·çš„æƒé™ï¼Œç„¶åå†è¿”å›ç»™å‰ç«¯ã€‚å‰ç«¯å†é’ˆå¯¹èº«ä»½åˆ°å¯¹åº”çš„è·¯ç”±ã€‚ é‚£ä¹ˆä½ è‚¯å®šä¼šé—®ï¼Œä¸ºä»€ä¹ˆä¸åœ¨ç›´æ¥è®¾ç½® sessionId çš„æ—¶å€™æŠŠç”¨æˆ·ä¿¡æ¯è¿”å›äº†å‘¢ï¼Ÿè¿™æ ·ä¹Ÿå¯ä»¥çš„ï¼Œé‚£ä¹ˆç›¸å½“äºä½ å¾®ä¿¡æˆæƒçš„å›è°ƒåœ°å€è¦å†™ä¸€ä¸ªå‰ç«¯çš„é¡µé¢ï¼Œ ç„¶ååœ¨è¿™ä¸ªé¡µé¢ä¸­å†æ¥åˆ¤æ–­ç”¨æˆ·æ ¹æ®èº«ä»½åˆ°å“ªä¸ªé¡µé¢ã€‚è¿™ä¸ªå‰ç«¯é¡µé¢ä½ éœ€è¦å•ç‹¬çš„ä¹Ÿå»ç»´æŠ¤ã€‚è¿™æ ·ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä½ ä¹Ÿè®¸ä¼šé—®ï¼Œæˆ‘ä¸ç”¨å•ç‹¬å†å†™ä¸ªé¡µé¢ï¼Œç”¨é¦–é¡µå°±å¥½äº†ã€‚ä½†æ˜¯ç”¨é¦–é¡µä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æœ€ç»ˆç”±äºæˆæƒï¼Œä½ çš„é¦–é¡µå°±å¸¦ä¸Šäº† code, è¿˜è¦ç”¨ replaceState ä»€ä¹ˆçš„å»æ‰ï¼Œæˆ‘è§‰å¾—å¾ˆä¸æ•´æ´ã€‚ä½†æ˜¯ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚è¿™ä¸¤ç§æ–¹å¼æœ¬è´¨ä¸Šéƒ½å¯ä»¥ã€‚åªä¸è¿‡ç¬¬ä¸€ç§å·æ‡’äº†ï¼Œç›´æ¥redirectåˆ°é¦–é¡µï¼Œé¦–é¡µå†å‘ä¸€æ¬¡è¯·æ±‚ã€‚ æˆ‘ç”¨çš„ç™»å½•ä¸­é—´ä»¶æ˜¯ï¼š koa-generic-sessionã€‚app.useä¸‹é¢è¿™ä¸ªä¸­é—´ä»¶å³å¯ã€‚12345678const sequelizeObj = connectDb.db[dbName]sessionConfig.options.store = new SequelizeStore(sequelizeObj, &#123; sync: false, tableName: 't_session'&#125;)return session(sessionConfig.options) å­˜å‚¨å¹¶æ²¡æœ‰å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œæ˜¯å­˜åœ¨äº†æ•°æ®åº“é‡Œï¼Œè¿™é‡Œç”¨çš„koa-generic-session-sequelizeã€‚ä¸æ”¾åœ¨å†…å­˜é‡Œçš„åŸå› æ˜¯æœ‰å¤šå°æœºå™¨ï¼Œå­˜åœ¨å†…å­˜ä¸­ä¸èƒ½å…±äº«åº”è¯¥ä¼šæœ‰é—®é¢˜ã€‚ è®¾ç½® session cookie çš„æ—¶å€™ï¼Œåœ¨å‰ç«¯ cookie é‡Œï¼Œå°±ä¼šæœ‰å¯¹åº”çš„å€¼ï¼Œç„¶åæ¯æ¬¡è¯·æ±‚é¡µé¢ï¼Œéƒ½ä¼šæŠŠè¿™ä¸ª cookie å¸¦ä¸Šï¼Œå»æ•°æ®åº“é‡Œæ‰¾å¯¹åº”çš„ session æ˜¯å¦å¤±æ•ˆã€‚å¦‚æœæ²¡æœ‰å¤±æ•ˆï¼Œè®¤ä¸ºok,é‚£ä¹ˆå°±å¯ä»¥è·³è¿‡éªŒè¯çš„è¿‡ç§°äº†ã€‚ è¿˜å¯ä»¥åŠ ä¸Š app.keys ï¼Œç„¶åå†å¯¹åº”çš„ options é‡ŒåŠ ä¸Š signkeysã€‚ 1234app.keys = ['im a newer secret', 'i like turtle'];app.keys = new KeyGrip(['im a newer secret', 'i like turtle'], 'sha256');ctx.cookies.set('name', 'tobi', &#123; signed: true &#125;); è¿™æ ·ï¼Œä½ çš„ cookie çš„å€¼ï¼Œå°±ä¼šè¢«åŠ å¯†äº†ã€‚å‰ç«¯çœ‹åˆ°çš„ cookie å¯èƒ½æ˜¯ä¸€ä¸ªåŠ å¯†è¿‡çš„ä¸²ã€‚ç„¶åä½ åˆ°æœåŠ¡å™¨ç«¯ get cookie çš„æ—¶å€™ï¼Œå®ƒä¼šè‡ªåŠ¨å¸®ä½ è§£å¯†ã€‚å¾—åˆ°å¯¹åº”çš„å€¼å»å’Œæ•°æ®åº“é‡Œçš„sessionè¿›è¡Œæ¯”å¯¹ã€‚ é‚£å¦‚æœå‰ç«¯çš„å¾®ä¿¡ç™»å½•æ€è¿‡æœŸäº†æ€ä¹ˆåŠå‘¢ï¼Ÿæ¯”è¾ƒç®€å•ï¼Œå‰ç«¯å‘ç°ç™»å½•æ€å¤±è´¥ï¼Œæ¯”å¦‚ç™»å½•æ€å¤±è´¥çš„è¿”å›ç æ˜¯1111ï¼Œé‚£ä¹ˆ1111æ—¶é‡æ–°æ‹‰èµ·å¾®ä¿¡ç™»å½•å³å¯ã€‚ æ—¥å¿—ç®¡ç†æ—¥å¿—ç®¡ç†å¯¹äºä¸€ä¸ªå¤§å‹çš„é¡¹ç›®æ¥è¯´ï¼Œå°¤å…¶æ˜¯æ¶‰åŠåˆ°æ”¯ä»˜çš„éå¸¸é‡è¦ï¼Œä»–ç”¨äºå¸®ä½ æŸ¥çœ‹ç”¨æˆ·åšäº†ä»€ä¹ˆäº‹æƒ…ï¼Œæˆ–è€…ç³»ç»Ÿå‡ºäº†ä»€ä¹ˆâŒã€‚éå¸¸çš„é‡è¦ã€‚ æ—¥å¿—æˆ‘è¿™é‡Œç”¨çš„ log4js, åˆ†ä¸ºäº†å››ç§ category, åˆ†åˆ«ç”¨æ¥è®°å½• db æ“ä½œï¼Œè®¿é—®æ—¥å¿—ï¼Œå¼€å‘è€… debug ä¿¡æ¯ï¼Œcgi ä¿¡æ¯æ—¥å¿—ï¼Œé”™è¯¯æ—¥å¿—ã€‚è¿™äº›éœ€è¦æ”¾åœ¨ä¸åŒçš„æ–‡ä»¶é‡Œï¼Œä¾¿äºå¼€å‘è€…æ‰¾é—®é¢˜ã€‚ ä½ å¯ä»¥è®¾ç½®ä¸åŒçš„ categories, æ¯ä¸ª categories é‡Œè®¾ç½® level å’Œä¸åŒçš„ appendersã€‚ æ¯ä¸€ä¸ª appenders éƒ½å¯ä»¥è®¾ç½®ä¸åŒ filename ç­‰ç­‰ã€‚ é‚£ä¹ˆè¿™ä¸ª db çš„æ“ä½œæ—¥å¿—ï¼Œæ€ä¹ˆæ‰“å°å‘¢ï¼Ÿ sequelize å»ºç«‹è·Ÿ db é“¾æ¥æ—¶ï¼Œå¯ä»¥ä¼ å…¥ logging è¿™ä¸ª option, åœ¨è¿™ä¸ª logging é‡Œè®¾ç½® sequelize çš„æ‰“å°æ–¹æ³•ã€‚å¦‚ä¸‹é¢æˆ‘å°±æ˜¯æŠŠæ‰“å°dbçš„æ“ä½œæ—¥å¿—é€šè¿‡ log4js æ‰“å…¥äº†æ—¥å¿—ä¸­ï¼š 123db.options.logging = msg =&gt; &#123; dbLogger.debug(msg)&#125; koa2 çš„é”™è¯¯å¤„ç†è¿™ä¸ªé”™è¯¯å¤„ç†çš„æ–¹æ³•ï¼Œç½‘ä¸Šåˆ°å¤„éƒ½æ˜¯çš„äº†ï¼š12345678910111213141516171819// é”™è¯¯å¤„ç†ä¸­é—´ä»¶module.exports = async (ctx, next) =&gt; &#123; try &#123; await next() &#125; catch (err) &#123; ctx.response.status = err.statusCode || err.status || 500 ctx.response.body = &#123; message: 'ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åå†è¯•!' &#125; ctx.app.emit('error', err, ctx) &#125;&#125;// app.js ä¸­æ¥æ”¶ error äº‹ä»¶ï¼Œå¹¶ä¸”ä¸ŠæŠ¥åˆ°é”™è¯¯æ—¥å¿—ä¸­app.on('error', (err, ctx) =&gt; &#123; ctx.errorLogger(`name=$&#123;err.name&#125;&amp;msg=$&#123;encodeURIComponent(err.message)&#125;&amp;stack=$&#123;encodeURIComponent(err.stack)&#125;`)&#125;) è¿™é‡Œæ³¨æ„å¦‚æœä½ ç›´æ¥æ‰“å°çš„æ˜¯ err å¯¹è±¡ï¼Œä¸€èˆ¬åªæœ‰å®ƒçš„ msg ä¼šè¢«æ‰“å°å‡ºæ¥ï¼Œå¦‚æœä½ æƒ³è¦æ›´å¤šä¿¡æ¯ï¼Œä¸€å®šè¦æŠŠ stack æ‰“å‡ºæ¥ã€‚è¿™ä¸ªæˆ‘ç–å¿½äº†ï¼ŒåŒäº‹å¸®æˆ‘æå‡ºæ¥äº†ï¼Œå¾ˆæ£’å¾ˆä¼˜ç§€ã€‚ æˆ‘å»ç½‘ä¸ŠæŸ¥äº†ä¸‹ï¼Œè¿™ä¸ªé”™è¯¯å¤„ç†å…¶å®æ˜¯ koa2 é‡Œçš„é»˜è®¤æ–¹å¼ï¼Œåªä¸è¿‡æˆ‘ä»¬åˆè‡ªå·±å»é‡å†™äº†ï¼Œä»–æœ¬èº«çš„æ˜¯è¿™æ ·çš„ï¼š å¯ä»¥çœ‹ä¸‹è¿™ç¯‡æ–‡æ¡£ï¼šerror-handling.md#default-error-handler ä»–é‡Œé¢æ¨èäº†ä¸€ç§å†™æ³•ï¼š1234567891011app.use(async (ctx, next) =&gt; &#123; try &#123; await next(); &#125; catch (err) &#123; // will only respond with JSON ctx.status = err.statusCode || err.status || 500; ctx.body = &#123; message: err.message &#125;; &#125;&#125;) æˆ‘è§‰å¾—è¿™ç§å†™æ³•å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œå› ä¸ºå¦‚æœä½ è¿™ä¸ªæ˜¯æ•°æ®åº“çš„æŸäº›åœ°æ–¹å‡ºé”™äº†ï¼Œå¯èƒ½ä¼šåœ¨ err.message é‡Œæš´éœ²ä¸€äº›ä½ æœºå™¨ ip åŠä¸€äº›å…¶ä»–çš„ä¿¡æ¯ï¼Œè¿™ä¸ªæ˜¯ä¸å®‰å…¨çš„ã€‚ç»Ÿä¸€ç»™ç”¨æˆ·ä¸€ä¸ªå›å¤ï¼Œç„¶åæ‰“åˆ°ç³»ç»Ÿé”™è¯¯æ—¥å¿—ä¸­ï¼Œæ˜¯æ¯”è¾ƒå¥½çš„åšæ³•ã€‚ è¿™é‡Œé€”ä¸­çœ‹åˆ°äº†ä¸€ç¯‡æ–‡ç« ï¼š å¤§æ¦‚è®²çš„æ˜¯koaé”™è¯¯å¤„ç†çš„å†™æ³• æ³¨æ„é”™è¯¯å¤„ç†æœ€å¥½è¢«å½“åšæœ€å‰é¢çš„ä¸€ä¸ªä¸­é—´ä»¶ã€‚ æ€»ç»“å…ˆå†™è¿™ä¹ˆå¤šï¼Œå…¶å®è¿˜æœ‰å¾ˆå¤šå¾ˆå°çš„ç»†èŠ‚ã€‚ä¸‹æ¬¡å†æ•´ç†æ•´ç†ï¼Œå½“ç„¶ä¸Šé¢åªæ˜¯æˆ‘è‡ªå·±çš„ç†è§£ï¼Œå¯èƒ½ä¹Ÿæœ‰æˆ‘ç†è§£é”™äº†çš„ã€‚æˆ‘ä¼šç»å¸¸çœ‹å®ƒï¼Œç„¶åçœ‹è‡ªå·±æ˜¯å¦åé¢åˆæ–°çš„è®¤è¯†æ¥æ¨ç¿»ç°åœ¨çš„æƒ³æ³•ã€‚è¿™ä¸ªé¡¹ç›®æ˜¯æˆ‘è·Ÿç€ç»„é‡Œå¦å¤–ä¸€ä¸ªå¾ˆå¤šå¹´ç»éªŒçš„è€å¸æœºä¸€èµ·åšçš„ï¼Œåœ¨ä»–èº«ä¸Šï¼Œæˆ‘å­¦ä¹ åˆ°äº†ä¸¥è°¨çš„æ€åº¦ã€‚æœ‰å¾ˆå¤šåœ°æ–¹ä»–éƒ½æ¯”æˆ‘æœ‰ç»éªŒï¼Œä¹Ÿç»™æˆ‘æŒ‡å‡ºäº†ä¸€äº›é—®é¢˜ã€‚æ‰€ä»¥è¯´å…¬å¸å’Œè€æ¿ç»™ä»–é‚£ä¹ˆå¤šå·¥èµ„æ˜¯åº”è¯¥çš„å•Šã€‚ä¼˜ç§€å“ˆå“ˆã€‚ğŸ‘ğŸ“š ğŸŒ²å¸Œæœ›ä¸‹æ¬¡æœ‰æœºä¼šè¯•ä¸‹ Vue SSRã€‚","categories":[],"tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"http://sevencai.github.io/tags/Nodejs/"}]},{"title":"Ajax è¯·æ±‚åå°æ¥å£ã€ä¸‹è½½æ–‡ä»¶ã€‘æ–¹æ³•","slug":"Ajax-è¯·æ±‚åå°æ¥å£ä¸‹è½½æ–‡ä»¶æ–¹æ³•","date":"2018-07-11T14:03:14.000Z","updated":"2018-07-12T12:29:40.000Z","comments":true,"path":"2018/07/11/Ajax-è¯·æ±‚åå°æ¥å£ä¸‹è½½æ–‡ä»¶æ–¹æ³•/","link":"","permalink":"http://sevencai.github.io/2018/07/11/Ajax-è¯·æ±‚åå°æ¥å£ä¸‹è½½æ–‡ä»¶æ–¹æ³•/","excerpt":"","text":"ä½ çš„ç®¡ç†å°æœ‰ä¸€ä¸ªåŠŸèƒ½æ˜¯ç‚¹å‡»[æŸ¥çœ‹æ–‡ä»¶]ï¼Œä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°çš„åŠŸèƒ½ã€‚ä½ å¯èƒ½è‡ªç„¶çš„å‘åå°æ¥å£ï¼ˆå¯èƒ½æ˜¯ Nodejs çš„ä¸€ä¸ª Restful Apiï¼‰è¯·æ±‚ä¸‹è½½ã€‚ä½†æ˜¯ä½ å‘ç°ä½ åå°çš„ Nodejs è™½ç„¶è®¾ç½®äº†æ­£ç¡®çš„å“åº”å¤´ï¼ˆContent-position, Content-typeï¼‰å´è¿˜æ˜¯æ²¡æœ‰å¼¹å‡ºä¿å­˜æ–‡ä»¶çš„æ¡†ã€‚ åŸå› æ˜¯æœªç»è¿‡å¤„ç†çš„ ajaxï¼ˆå¦‚jquery ajaxè¯·æ±‚ï¼‰ è¯·æ±‚ä¸èƒ½å¤„ç†æ­£ç¡®çš„äºŒè¿›åˆ¶ï¼ˆæµï¼‰ç±»å‹çš„æ–‡ä»¶ã€‚ ä¸‹é¢æˆ‘æ€»ç»“äº†å‡ ç§æ–¹å¼å¯ä»¥è§£å†³æ­¤é—®é¢˜-&gt; ğŸ“šğŸŒ² åˆ©ç”¨iframeNodejs ç«¯æ­£å¸¸çš„è®¾ç½®ç›¸åº”å¤´ï¼ŒContent-disposition: attachment, filename=ã€‚ç„¶åè¯»åˆ°æœåŠ¡å™¨ä¸Šå¯¹åº”çš„æ–‡ä»¶èµ‹å€¼ç»™ ctx.body å³å¯ã€‚ä¸‹é¢æ˜¯ä¸€ç§å‚è€ƒçš„ä»£ç ï¼š 12345678const filePath = path.join(path.resolve(__dirname, '../uploads'), $&#123;fileStamp&#125;)ctx.set(&#123; 'Content-disposition': `attachment; filename=$&#123;encodeURIComponent(fileStamp)&#125;`, 'Content-type': 'application/octet-stream'&#125;)ctx.body = fs.createReadStream(filePath) å‰ç«¯åˆ©ç”¨ iframe çš„ src å±æ€§ï¼Œè¿›è¡Œé‡æ–°èµ‹å€¼ã€‚æ³¨æ„ iframe è®¾ä¸º display: none å±æ€§ã€‚ 123456&lt;iframe ref=\"downloadIframe\" src=\"\" frameborder=\"0\" style=\"display: none;\"&gt;&lt;/iframe&gt;// ç‚¹å‡»æŸ¥çœ‹æ—¶æ‰§è¡Œ downloadFiledownloadFile(fileStamp) &#123; this.$refs.downloadIframe.src = `/download/$&#123;fileStamp&#125;`&#125; åˆ©ç”¨URL.createObjectURL URL.createObjectURL() é™æ€æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ª DOMStringï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªè¡¨ç¤ºå‚æ•°ä¸­ç»™å‡ºçš„å¯¹è±¡çš„URLã€‚è¿™ä¸ª URL çš„ç”Ÿå‘½å‘¨æœŸå’Œåˆ›å»ºå®ƒçš„çª—å£ä¸­çš„ document ç»‘å®šã€‚è¿™ä¸ªæ–°çš„URL å¯¹è±¡è¡¨ç¤ºæŒ‡å®šçš„ File å¯¹è±¡æˆ– Blob å¯¹è±¡ã€‚ ä¸€ä¸ª Blobå¯¹è±¡è¡¨ç¤ºä¸€ä¸ªä¸å¯å˜çš„, åŸå§‹æ•°æ®çš„ç±»ä¼¼æ–‡ä»¶å¯¹è±¡ã€‚Blobè¡¨ç¤ºçš„æ•°æ®ä¸ä¸€å®šæ˜¯ä¸€ä¸ªJavaScriptåŸç”Ÿæ ¼å¼ã€‚ File æ¥å£åŸºäºBlobï¼Œç»§æ‰¿ blobåŠŸèƒ½å¹¶å°†å…¶æ‰©å±•ä¸ºæ”¯æŒç”¨æˆ·ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ã€‚ï¼ˆHTML5æ–°å¢ç‰¹æ€§ï¼‰ è¿™ç§æ–¹æ³•æˆ‘å·²ç»åœ¨ä¸Šç¯‡æ–‡ç« åˆšå¥½æœ‰ç”¨åˆ°ï¼Œå¯ä»¥åˆ©ç”¨æµè§ˆå™¨åŸç”Ÿ fetch æ–¹æ³•ï¼Œç„¶åè§£æä¸º blob ç±»å‹ã€‚å†åˆ©ç”¨aæ ‡ç­¾çš„ download å±æ€§å³å¯ã€‚å‚è€ƒä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132function fetchApi (url, data) &#123; return fetch(url, &#123; body: JSON.stringify(data), headers: &#123; 'Content-Type': 'application/json' &#125;, cache: 'no-cache', method: 'POST', mode: 'cors' &#125;)&#125;// æ³¨æ„è¿™é‡Œè¦æ˜¯ response.blob()function getImageData(url, data) &#123; return fetchApi(url, data) .then(response =&gt; response.blob())&#125;function getImage(data) &#123; getImageData('/downloadImage', data) .then(response =&gt; &#123; let a = document.createElement('a') let url = window.URL.createObjectURL(response) let filename = `$&#123;data.scene&#125;-$&#123;+new Date()&#125;.png` a.href = url a.download = filename a.click() window.URL.revokeObjectURL(url) &#125;)&#125; å½“ç„¶ä½ å¯ä»¥ä¸ç”¨ fetch çš„è¿™ä¸ªæ–¹æ³•ï¼Œç›´æ¥åœ¨ xhr é‡Œè¿›è¡Œå°è£…ã€‚æˆ‘çœ‹åˆ° stackoverflow ä¸Šæœ‰ä¸ªå¾ˆå¥½çš„æ–‡ç« ï¼Œåœ°å€æˆ³è¿™é‡Œï¼Œæˆ‘è§‰çš„æœ€é«˜å›ç­”è€…å·²ç»è§£é‡Šçš„å¾ˆå¥½äº†ï¼Œä¸‹é¢å¼•ç”¨å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546var xhr = new XMLHttpRequest();xhr.open('POST', url, true);xhr.responseType = 'arraybuffer';xhr.onload = function () &#123; if (this.status === 200) &#123; var filename = \"\"; var disposition = xhr.getResponseHeader('Content-Disposition'); if (disposition &amp;&amp; disposition.indexOf('attachment') !== -1) &#123; var filenameRegex = /filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/; var matches = filenameRegex.exec(disposition); if (matches != null &amp;&amp; matches[1]) filename = matches[1].replace(/['\"]/g, ''); &#125; var type = xhr.getResponseHeader('Content-Type'); var blob = typeof File === 'function' ? new File([this.response], filename, &#123; type: type &#125;) : new Blob([this.response], &#123; type: type &#125;); if (typeof window.navigator.msSaveBlob !== 'undefined') &#123; // IE workaround for \"HTML7007: One or more blob URLs were revoked by closing the blob for which they were created. These URLs will no longer resolve as the data backing the URL has been freed.\" window.navigator.msSaveBlob(blob, filename); &#125; else &#123; var URL = window.URL || window.webkitURL; var downloadUrl = URL.createObjectURL(blob); if (filename) &#123; // use HTML5 a[download] attribute to specify filename var a = document.createElement(\"a\"); // safari doesn't support this yet if (typeof a.download === 'undefined') &#123; window.location = downloadUrl; &#125; else &#123; a.href = downloadUrl; a.download = filename; document.body.appendChild(a); a.click(); &#125; &#125; else &#123; window.location = downloadUrl; &#125; setTimeout(function () &#123; URL.revokeObjectURL(downloadUrl); &#125;, 100); // cleanup &#125; &#125;&#125;;xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');xhr.send($.param(params)); å¤§æ¦‚çš„æ€è·¯æ˜¯åˆ©ç”¨ xhr åŸç”Ÿå¯¹è±¡çš„ onload åï¼Œè¿›è¡Œnew blob()å¯¹è±¡ã€‚ å†æ‰§è¡ŒURL.createObjectURL(blob)çš„æ“ä½œã€‚ æ€»ç»“å…¶å®è¿˜æœ‰åˆ«çš„æ–¹æ³•ï¼Œå¦‚ POST ä¸€ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯è¿™ä¸ªä¼šåˆ·æ–°å½“å‰çš„ Urlã€‚ä¸Šé¢ä¸¤ç§æƒ…å†µå…¶å®æ˜¯ä¸¤ç§æ€è·¯ã€‚ POST è¯·æ±‚è·Ÿ Iframe ç±»ä¼¼,åŒæ ·è¿˜å¯ä»¥ window.open æˆ–è€… window.location æ¥åšè¿™ä»¶äº‹æƒ…ã€‚","categories":[],"tags":[]},{"title":"koa2 ç”Ÿæˆå¸¦åœºæ™¯å€¼å‚æ•°çš„å¸¦LogoäºŒç»´ç ","slug":"koa2-ç”Ÿæˆå¸¦åœºæ™¯å€¼å‚æ•°çš„å¸¦LogoäºŒç»´ç ","date":"2018-06-21T12:14:37.000Z","updated":"2018-06-21T13:13:21.000Z","comments":true,"path":"2018/06/21/koa2-ç”Ÿæˆå¸¦åœºæ™¯å€¼å‚æ•°çš„å¸¦LogoäºŒç»´ç /","link":"","permalink":"http://sevencai.github.io/2018/06/21/koa2-ç”Ÿæˆå¸¦åœºæ™¯å€¼å‚æ•°çš„å¸¦LogoäºŒç»´ç /","excerpt":"","text":"ä¸Šæ¬¡å†™ Koa è¿˜æ˜¯2016å¹´åˆšæ¥å…¬å¸å®ä¹ çš„æ—¶å€™ï¼Œé‚£æ—¶å€™æˆ‘è¿˜åœ¨ä¸Šå¤§ä¸‰ã€‚è½¬çœ¼è§2å¹´è¿‡å»äº†ï¼Œæˆ‘ä¹Ÿæ­£å¼å·¥ä½œå¿«ä¸€å¹´äº†ã€‚ Koa ä¹Ÿä»åŸæ¥æ¯”è¾ƒéš¾ç”¨çš„ generator ï¼Œyield å˜æˆäº†ç°åœ¨çš„ async await ã€‚çœŸå¥½ã€‚ è¿™æ¬¡æ–‡ç« çš„èƒŒæ™¯æ˜¯ï¼Œäº§å“éœ€è¦ç»™å…¬ä¼—å·æ‹‰æ–°ã€‚éœ€è¦ç”Ÿæˆå„ç§å¸¦å‚æ•°çš„äºŒç»´ç ã€‚è¿™ä¸ªå¸¦å‚æ•°çš„äºŒç»´ç å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œæ¯”å¦‚ç»Ÿè®¡æ–°æ‹‰çš„å…³æ³¨æ˜¯ä»å“ªä¸ªåœºæ™¯å€¼ä¸‹æ¥çš„ã€‚æ¯”å¦‚å…³æ³¨æ—¶ï¼Œä¸åŒåœºæ™¯å€¼æœ‰ä¸åŒçš„å…¬ä¼—å·å›å¤å†…å®¹ã€‚ åœ¨ç»å†äº†å¥½å‡ æ¬¡æ¯æ¬¡æ‰‹åŠ¨è·Ÿå¥¹ç”Ÿæˆåï¼Œæˆ‘ä¸‹å®šäº†å†³å¿ƒï¼Œè·Ÿäº§å“è¦äº†2å¤©æ’æœŸï¼Œç»™å¥¹åšä¸€ä¸ªå·¥å…·ã€‚è‡ªåŠ¨ç”Ÿæˆå¸¦ Logo çš„äºŒç»´ç ã€‚ä¸»è¦æ˜¯æ‰‹å·¥å»æ“ä½œæ¯”è¾ƒç¹çï¼Œéœ€è¦ç»å†ä¸‹é¢å‡ æ­¥ï¼š å…ˆå»è·å¾— access_token å†è°ƒç”¨å¾®ä¿¡åˆ›å»ºå¸¦å‚æ•°å€¼äºŒç»´ç çš„æ¥å£qrcode/createï¼Œè·å¾— ticket å†æ‹¿ ticket æ¢äºŒç»´ç  è¿™å…¶ä¸­ï¼Œå¸¦å‚æ•°çš„äºŒç»´ç åˆåˆ†ä¸ºäº†ä¸¤ç§ï¼Œæ°¸ä¹…å’Œä¸´æ—¶äºŒç»´ç ã€‚å…·ä½“æ¥å£å¯ä»¥å‚è€ƒå…¬ä¼—å·çš„æ–‡æ¡£ï¼Œ å¹¶ä¸”æ¯æ¬¡äº§å“è‡ªå·±æ‹¿åˆ° ticket æ¢çš„äºŒç»´ç åï¼Œè¿˜éœ€è¦è‡ªå·±å» P logo, å¤§å°ä¹Ÿè¦è‡ªå·±å»è°ƒã€‚æ€»ä¹‹æ¯”è¾ƒéº»çƒ¦ã€‚ æ‰€ä»¥è¿™ç¯‡æ–‡ç« ï¼Œä¸»è¦å°±æ˜¯ç”¨ Koa2 ç”Ÿæˆå¸¦åœºæ™¯å€¼å‚æ•°çš„å…¬ä¼—å·äºŒç»´ç ã€‚ğŸ’—ğŸŒ¹ è®¾è®¡é¦–å…ˆæˆ‘ç¡®å®šäº† koa server ç«¯ï¼Œåªåšæ¥å£å±‚ã€‚æ„æ€æ˜¯åªç”¨æ¥å¤„ç†å‰ç«¯çš„è¯·æ±‚ã€‚ GET or POSTã€‚ å‰ç«¯ä¸»è¦åšè¡¨å•éªŒè¯ï¼Œè·å–äº§å“æƒ³è¦çš„äºŒç»´ç ç±»å‹ä¿¡æ¯ç­‰ã€‚ç„¶åä¼ ç»™åå°ã€‚åå°æ ¹æ®ä¿¡æ¯ï¼Œå»æ‹¿ access_token, ç„¶åè°ƒç”¨å¾®ä¿¡äºŒç»´ç ï¼Œå†æ·»åŠ  logo ç­‰ã€‚ç„¶åè¿”å›ç»™å‰ç«¯ã€‚æœ€åçš„æ•ˆæœæ˜¯è¿™æ ·çš„ï¼š äº§å“å¯ä»¥é€‰æ‹©ï¼Œæ˜¯ä¸´æ—¶è¿˜æ˜¯æ°¸ä¹…ï¼Œé€‰æ‹©æ˜¯åªè¦é“¾æ¥è¿˜æ˜¯ä¸‹è½½å›¾ç‰‡ï¼Œæ˜¯å¦æ·»åŠ  Logo ï¼Œå›¾ç‰‡çš„å¤§å°ç­‰ç­‰ã€‚ æœ€åå¦‚æœå›¾ç‰‡ç±»å‹é€‰çš„æ˜¯ã€æˆ‘è¦ç”Ÿæˆå›¾ç‰‡ã€‘å°±å¯ä»¥ç”Ÿæˆç±»ä¼¼ä¸‹é¢äºŒç»´ç å•¦ï¼Œ å¦‚æœæ˜¯ç‚¹å‡»çš„ ã€æˆ‘åªè¦é“¾æ¥ã€‘ï¼Œé‚£ä¹ˆæˆ‘åªä¼šè¿”å›ä¸€ä¸ªå¸¦ticketçš„é“¾æ¥ã€‚ çº¢è‰²çš„ç¬”éƒ¨åˆ†æ˜¯ä¸ºäº†é®ä½äºŒç»´ç ä¿¡æ¯ï¼Œå› ä¸ºæ˜¯è‡ªå·±çš„æµ‹è¯•å·ã€‚ä¸»è¦ç”¨åˆ°äº†ä¸‹é¢è¿™äº› npm åº“ï¼š koa-router, koa-static, qr-image, request-promise, stream-to-promise, image-size æµç¨‹æ§åˆ¶å†™èµ·æ¥ä»£ç æ²¡æœ‰ç‰¹åˆ«çš„åœ°æ–¹ï¼Œç”¨ koa-router åšè·¯ç”±ï¼Œæ¯”å¦‚äº§å“é€‰æ‹©ç”Ÿæˆé“¾æ¥ï¼Œè¿˜æ˜¯ç”Ÿæˆå›¾ç‰‡ï¼Œæˆ‘é€‰æ‹©äº†è·¯ç”±åˆ°ä¸¤ä¸ªæ¥å£ã€‚ åœ¨é…ç½®æ–‡ä»¶ï¼Œ route.js ä¸­ï¼Œé…ç½®ç›¸åº”è·¯ç”±çš„è¯·æ±‚ä»¥åŠå¯¹åº”çš„ controller 1234module.exports = &#123; &apos;post /getLink&apos;: &apos;controllers/createLink&apos;, &apos;post /downloadImage&apos;: &apos;controllers/createImage&apos;&#125; è¿™è¡¨æ˜ï¼š å½“å‰ç«¯ post getLink è¿™ä¸ªæ¥å£æ—¶ï¼Œ ç”¨ controllers ä¸‹çš„ createLink æ¥å¤„ç†ã€‚å½“å‰ç«¯ post downloadImage è¿™ä¸ªæ¥å£æ—¶ï¼Œç”¨ controllers ä¸‹çš„ downloadImage æ¥å¤„ç†ã€‚ ç„¶åå†åœ¨è‡ªå·±å†™ä¸ªæ³¨å†Œè·¯ç”±çš„ middleware12345678910111213141516module.exports = (app, router) =&gt; ( Object.keys(routesConfig).forEach(route =&gt; &#123; const [method, path] = route.split(' ') const controller = require('../' + routesConfig[route]) if (typeof controller !== 'function' || typeof router[method] !== 'function') &#123; return &#125; if (method === 'post') &#123; app.use(bodyParser()) &#125; router.post(path, controller) &#125;)) ç„¶ååœ¨ å…¥å£æ–‡ä»¶ä¸­ä½¿ç”¨è¿™ä¸ª middleware å¹¶ä¸”æ³¨å†Œåˆ° koa-router ä¸Šå³å¯ã€‚123routeMiddleware(App, router)App.use(router.routes()).use(router.allowedMethods()) æœ€åæ˜¯å¯¹åº”çš„ controller é‡Œå¤„ç†æ–‡ä»¶, æ¯”å¦‚å¦‚ä¸‹æ˜¯ downloadImage çš„ controller, æŠŠ data ä¼ ç»™äº†æ ¸å¿ƒå¤„ç†ä¸šåŠ¡æµç¨‹çš„ç±»æ–‡ä»¶ã€‚ç„¶åå†è¿”å›ç›¸åº”çš„å›¾ç‰‡å³å¯ã€‚ 1234567891011121314151617/** * åˆ›å»ºäºŒç»´ç  * @param ctx * @returns &#123;Promise&lt;void&gt;&#125; */const Core = require('../server/core')module.exports = async (ctx) =&gt; &#123; const data = ctx.request.body const core = new Core(data) const result = await core.downloadQrCodeImage() ctx.type = 'png' ctx.set('Content-type', 'image/png') ctx.body = result&#125; å‰ç«¯æ¥å—åˆ°è¿™ä¸ª image åï¼Œå†åˆ©ç”¨ createObjectURL, revokeObjectURL ç«‹å³ä¸‹è½½å›¾ç‰‡å³å¯ã€‚ä¸‹é¢å±•ç¤ºçš„æ˜¯å‰ç«¯è¿™ä¸€éƒ¨åˆ†å¤„ç†çš„é€»è¾‘ã€‚12345678910111213141516171819202122232425262728293031function fetchApi (url, data) &#123; return fetch(url, &#123; body: JSON.stringify(data), headers: &#123; 'Content-Type': 'application/json' &#125;, cache: 'no-cache', method: 'POST', mode: 'cors' &#125;)&#125;function getImageData(url, data) &#123; return fetchApi(url, data) .then(response =&gt; response.blob())&#125;function getImage(data) &#123; getImageData('/downloadImage', data) .then(response =&gt; &#123; let a = document.createElement('a') let url = window.URL.createObjectURL(response) let filename = `$&#123;data.scene&#125;-$&#123;+new Date()&#125;.png` a.href = url a.download = filename a.click() window.URL.revokeObjectURL(url) &#125;)&#125; æˆ‘ç”¨çš„æµè§ˆå™¨åŸç”Ÿçš„ Fetch Apiï¼Œ å› ä¸ºä¸æƒ³åœ¨å‰ç«¯è¿˜å¼•å…¥åˆ«çš„åº“ã€‚æ³¨æ„ fetchApi è¿”å›ä¸åŒçš„å†…å®¹ï¼Œè¦ç”¨ä¸åŒçš„å†…å®¹å¤„ç†ã€‚æ¯”å¦‚ä¸Šé¢çš„å›¾ç‰‡æ˜¯ç”¨çš„ response.blob() å¤„ç†ï¼Œå¦‚æœæ˜¯è¿”å›çš„jsonï¼Œ éœ€è¦ç”¨ response.json() å¤„ç†ã€‚ è·å– AccessTokenæ³¨æ„å¦‚æœæ²¡æœ‰è‡ªå·±çš„è·å– AccessToken çš„ä¸­æ§æœåŠ¡å™¨ï¼Œä¸€å®šè¦ç¼“å­˜ accessToken, accessToken æœ‰è¿‡æœŸæ—¶é—´ï¼Œå¹¶ä¸”ä¸€å¤©æœ‰è°ƒç”¨ä¸Šé™ã€‚éƒ¨é—¨å†…æœ‰ä¸“é—¨çš„ä¸­æ§æœåŠ¡å™¨ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯è‡ªå·±è¯•äº†ä¸‹è‡ªå·±åšç¼“å­˜çš„æµç¨‹ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940 const rp = require('request-promise') const cachePath = './cache/token.txt' /** * è·å¾— access_token * è‹¥ç¼“å­˜æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™ä»ç¼“å­˜ä¸­è¯»å– * è‹¥ç¼“å­˜æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè°ƒç”¨ update æ¥å£æ›´æ–° * @returns &#123;Promise&lt;*&gt;&#125; */async getAccessToken () &#123; let token = '' if (fs.existsSync(cachePath)) &#123; token = JSON.parse(fs.readFileSync(cachePath)) &#125; if (!token || token.timeout &lt; Date.now()) &#123; let res = JSON.parse(await this.updateAccessToken()) res.timeout = Date.now() + (res.expires_in - 200) * 1000 fs.writeFileSync(cachePath, JSON.stringify(res)) return res &#125; else &#123; return token &#125;&#125;/** * æ›´æ–°å¾®ä¿¡ Access_token * æ­¤å¤„æœ‰æ¯å¤©è°ƒç”¨ 2000 æ¬¡é™åˆ¶ * 2h å³å¤±æ•ˆ * @returns &#123;Promise&lt;*&gt;&#125; */async updateAccessToken () &#123; const &#123; appid, appkey &#125; = serverConfig const url = `https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=$&#123;appid&#125;&amp;secret=$&#123;appkey&#125;` return rp.get(url)&#125; ç›¸å½“äºæ¯æ¬¡è°ƒç”¨åï¼Œè¦é‡æ–°å†™å…¥æ–‡ä»¶è¿‡æœŸæ—¶é—´ï¼Œå¦‚æœè¿‡æœŸæ—¶é—´åˆ°äº†ï¼Œé‚£ä¹ˆé‡æ–°å»æ›´æ–°ã€‚ä¹‹æ‰€ä»¥æ‹¿ re.expires_in - 200, æ˜¯ä¸ºäº†ç•™ç‚¹ buffer, è¿™ä¸ªå€¼å½“ç„¶å¯ä»¥è‡ªå·±å»è®¾ç½®ã€‚ ç”ŸæˆäºŒç»´ç è¿™é‡Œçš„ logo, å› ä¸ºæˆ‘ä»¬å…¬ä¼—å·åªæœ‰ä¸€ä¸ª logo, æ•…ç›´æ¥æ˜¯ä»æ–‡ä»¶ä¸­è¯»å–äº†ã€‚ä»¥åè€ƒè™‘æŠŠè¿™ä¸ªæ”¾åœ¨ github çš„è¯ï¼Œå¯èƒ½ä¼šæ”¯æŒç”¨æˆ·å¯ä»¥è‡ªå·±ä¸Šä¼  Logoã€‚ è¿˜æœ‰ä¸€ä¸ªåœ°æ–¹è¦æ³¨æ„ï¼Œå°±æ˜¯è®¡ç®— logo çš„ä½ç½®ã€‚ç›´æ¥é™¤ä»¥äºŒç»´ç çš„é«˜å®½ä¸€åŠæ˜¯ä¸è¡Œçš„ï¼Œè¿˜è¦å‡å» logo çš„ä¸€åŠå“¦ã€‚ æˆ‘è¿™è¾¹åœ¨è¿”å›ç»™å‰ç«¯ä¸‹è½½çš„æ—¶å€™ï¼Œä¹Ÿ save åˆ°æœ¬åœ°äº†ï¼Œæ‹…å¿ƒäº§å“ä¸¢å¤±ä¿¡æ¯ã€‚save çš„æ—¶å€™ï¼Œæˆ‘ä»¥åœºæ™¯å€¼å’Œæ—¶é—´ä¸ºåå­—ï¼Œä¼šæ–¹ä¾¿æ—¥åå¥½æ‰¾ä¸€äº›ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041 /** * æ·»åŠ  logo * @param imageStream * @returns &#123;Promise&lt;*&gt;&#125; */async getLogo (imageStream) &#123; const imgBuffer = await streamToPromise(imageStream) const &#123; width: imgWidth, height: imgHeight &#125; = imgSize(imgBuffer) const logoWrapper = images(\"./static/assets/logo.png\").size(imgWidth / 4) const x = (imgWidth - logoWrapper.width()) / 2 const y = (imgHeight - logoWrapper.height()) / 2 return await this.drawImage(imgBuffer, logoWrapper, x, y)&#125;/** * ç”»å›¾ * @param imgBuffer * @param logoWrapper * @param x * @param y * @returns &#123;Promise&lt;any&gt;&#125; */async drawImage (imgBuffer, logoWrapper, x, y) &#123; return new Promise((resolve, reject) =&gt; &#123; const image = images(imgBuffer) .draw(logoWrapper, x, y) .save(`./static/image/$&#123;this.scene&#125;-$&#123;+new Date()&#125;.png`, &#123; quality : 50 &#125;) if (!image) &#123; reject() &#125; resolve(image) &#125;)&#125; å…¥å£æ–‡ä»¶å…¥å£æ–‡ä»¶è·Ÿå¹³å¸¸çš„å…¥å£æ–‡ä»¶åŸºæœ¬ä¸Šæ²¡æœ‰ä»€ä¹ˆå¤§åŒºåˆ«ã€‚æ¯”è¾ƒç®€å•ã€‚12345678910111213141516171819202122const Koa = require('koa')const path = require('path')const Router = require('koa-router')const StaticServer = require('koa-static')const config = require('./config')const routeMiddleware = require('./middleware/route')const App = new Koa()const router = new Router()const staticPath = './static'App.use(StaticServer(path.join(__dirname, staticPath)))routeMiddleware(App, router)App.use(router.routes()).use(router.allowedMethods())App.listen(config.port, () =&gt; &#123; console.log(`App listening on port $&#123;config.port&#125;`)&#125;) æ€»ç»“æƒ³å½“ä¸€ä¸ªä¼˜ç§€çš„ Nodejs å·¥ç¨‹å¸ˆï¼Œä½†æ˜¯å‘ç°è‡ªå·±è¿˜è¿œè¿œä¸å¤Ÿï¼Œæ¯”å¦‚ fs çš„å‡½æ•°ä¸ç†Ÿã€‚æ¯”å¦‚å¯¹ Buffer, Stream ç†è§£çš„ä¸å¤Ÿæ·±å…¥ã€‚è¿˜æ˜¯å†™çš„å¤ªå°‘äº†ã€‚ä¸è¿‡æ€»ç®—æ˜¯æŒ‰æ—¶å®Œæˆäº†ã€‚è§£æ”¾äº†åŠ³åŠ¨åŠ›ã€‚ğŸš« ä¸‹ä¸€æ­¥æ‰“ç®—ä¼˜åŒ–ä¸‹ä»£ç ï¼Œçœ‹èƒ½ä¸èƒ½æ”¯æŒ upload logo, æ”¯æŒä¼  appid, appkey, è¿™æ ·åˆ«äººä¹Ÿå¯ä»¥ç”¨äº†ã€‚è¿˜æœ‰å¾ˆå¤šåŸºç¡€å·¥ä½œæ²¡æœ‰åšï¼Œæ¯”å¦‚ async, await çš„é”™è¯¯å¤„ç†ï¼Œæ¯”å¦‚ logger, pm2 ç­‰ã€‚è¿™ä¸ªä¼šæ…¢æ…¢å®Œå–„ï¼ŒåŸºç¡€åŠŸèƒ½å·² OKã€‚ ğŸ“šğŸ ","categories":[],"tags":[]},{"title":"å°ç¨‹åºå†…åµŒå¤ç”¨H5å¹¶æ‹‰èµ·å¾®ä¿¡æ”¯ä»˜è§£å†³ï¼ˆæ›¿ä»£ï¼‰æ–¹æ¡ˆ","slug":"å°ç¨‹åºå†…åµŒå¤ç”¨H5å¹¶æ‹‰èµ·å¾®ä¿¡æ”¯ä»˜è§£å†³ï¼ˆæ›¿ä»£ï¼‰æ–¹æ¡ˆ","date":"2018-06-13T12:45:56.000Z","updated":"2018-06-13T13:45:39.000Z","comments":true,"path":"2018/06/13/å°ç¨‹åºå†…åµŒå¤ç”¨H5å¹¶æ‹‰èµ·å¾®ä¿¡æ”¯ä»˜è§£å†³ï¼ˆæ›¿ä»£ï¼‰æ–¹æ¡ˆ/","link":"","permalink":"http://sevencai.github.io/2018/06/13/å°ç¨‹åºå†…åµŒå¤ç”¨H5å¹¶æ‹‰èµ·å¾®ä¿¡æ”¯ä»˜è§£å†³ï¼ˆæ›¿ä»£ï¼‰æ–¹æ¡ˆ/","excerpt":"","text":"è‡ªä»å°ç¨‹åºå‡ºæ¥åï¼Œä½ è‚¯å®šæœ‰è¿™æ ·çš„æƒ³æ³•ã€‚å°ç¨‹åºå†…éƒ¨åˆ†é¡µé¢å¥½æƒ³å¤ç”¨ä»¥å‰çš„H5ï¼Œé‡å¤çš„å»å¼€å‘æµªè´¹äº†å¤§é‡çš„æ—¶é—´å’Œç²¾åŠ›ã€‚ ä½†æ˜¯å†…åµŒåœ¨å°ç¨‹åºä¸­çš„H5ä¸æ”¯æŒæ‹‰èµ·å¾®ä¿¡æ”¯ä»˜ã€‚ä¹Ÿå°±æ˜¯è¯´å°ç¨‹åºå†…ï¼Œå°ç¨‹åºåµŒå…¥çš„H5å†…åªèƒ½è°ƒç”¨å°ç¨‹åºæ”¯ä»˜ã€‚ äºæ˜¯å‘¢ï¼Œæˆ‘å°±æƒ³åˆ°äº†è¿™ä¹ˆä¸€ä¸ªåŠæ³•ã€‚æœ‰äº›å±±å¯¨ï¼Œå¹¶ä¸”ä¸å®˜æ–¹ï¼ˆå®˜æ–¹å½“ç„¶æ˜¯å¸Œæœ›ä½ ç›´æ¥åœ¨å°ç¨‹åºå†…å®Œæˆä¸€åˆ‡ï¼Œä¸‹å•åˆ°æ”¯ä»˜ï¼‰ï¼Œä½†æ˜¯å´å¯ä»¥è§£å†³é—®é¢˜ã€‚O(âˆ©_âˆ©)O~~â˜ï¸â¤ï¸ è§£å†³æ–¹æ¡ˆæˆ‘ä»¬å¯ä»¥ç”¨å°ç¨‹åºçš„ web view èƒ½åŠ›åµŒå…¥ H5, åµŒå…¥åï¼Œåœ¨ H5 ä¸­è¿›è¡Œæ”¯ä»˜ä¸‹å•ï¼Œå¾—åˆ°å‚æ•°å¦‚ ï¼š timeStamp, nouncestr, signType,paySign ç­‰ç­‰å‚æ•°ã€‚ç„¶åå†é€šè¿‡ wx.miniProgram.navigateTo è·³è½¬åˆ°ä¸€ä¸ªå°ç¨‹åºé¡µé¢ï¼Œåœ¨è¿™ä¸ªé¡µé¢è¿›è¡Œè°ƒç”¨ wx.requestPayment è¿›è¡Œæ‹‰èµ·æ”¯ä»˜ã€‚æ‹‰èµ·æ”¯ä»˜åï¼Œå¯ä»¥å†è·³åˆ°å°ç¨‹åºç»“æœé¡µã€‚ å¦‚æœä½ æ‹…å¿ƒé€šè¿‡ navigateTo çš„ url ä¼ å‚æœ‰ä¸å®‰å…¨çš„é—®é¢˜ï¼Œå¯ä»¥è‡ªå·±å¯¹å‚æ•°è¿›è¡ŒåŠ è§£å¯†ã€‚ äº²æµ‹æ˜¯å¯ä»¥è¡Œå¾—é€šçš„ã€‚ä¸‹å›¾ä¸ºåœ¨ ã€H5 é¡µé¢ä¸‹çš„å•ã€‘è·å¾—æ”¯ä»˜å‚æ•°çš„é¡µé¢ã€‚ ä¸‹å›¾ä¸ºå›¾äºŒï¼Œã€åœ¨å°ç¨‹åºå†…æ‹‰èµ·çš„å¾®ä¿¡æ”¯ä»˜ã€‘ã€‚å¯ä»¥é€šè¿‡å³ä¸Šè§’çš„è½¬å‘é€€å‡ºæŒ‰é’®çœ‹å‡ºæ˜¯å°ç¨‹åºæ‹‰èµ·çš„æ”¯ä»˜ã€‚è¿™æ ·æ”¯ä»˜å®Œæˆåï¼Œç”¨æˆ·å¯ä»¥ç‚¹å‡»åé€€é€€åˆ°åˆšåˆšçš„H5é¡µé¢ã€‚ ä½ ä¹Ÿå¯ä»¥ç›´æ¥æ”¯ä»˜å®Œæˆï¼Œè°ƒåˆ°ä½ è‡ªå·±çš„å°ç¨‹åºçš„æ”¯ä»˜ç»“æœé¡µç­‰å·¥ä½œã€‚åœ¨å°ç¨‹åºçš„æ”¯ä»˜ç»“æœé¡µä¸­ï¼Œä½ è¿˜å¯ä»¥è®¾ç½®æŒ‰é’®ï¼Œå†æ¥å¼•å¯¼ç”¨æˆ·æ˜¯è¿›å…¥å°ç¨‹åºé¦–é¡µï¼Œè¿˜æ˜¯åˆšåˆšä½ è·³è½¬çš„H5çš„é¡µé¢ç­‰ç­‰ã€‚ é‡åˆ°çš„é—®é¢˜æˆ‘æƒ³æŠŠä¸‹å•çš„å‚æ•°ä»¥ JSON.stringfy(obj) çš„å½¢å¼ä¼ è¿‡å»ï¼Œå‘ç°å‚æ•°ä¸€ç›´å¾ˆå¥‡æ€ªçš„è¢«æˆªæ–­ã€‚çœ‹åˆ°å…¶ä»–æœ‰çš„å¼€å‘è€…ä¹Ÿé‡åˆ°äº†ç±»ä¼¼çš„é—®é¢˜ã€‚ ä¹Ÿå°±æ˜¯è¯´ä¸‹é¢è¿™ç§æ–¹å¼æ˜¯æœ‰é—®é¢˜çš„ï¼Œä»¥ä¸ºæ˜¯ç‰¹æ®Šå­—ç¬¦å¯¼è‡´çš„ï¼Œä½†æ˜¯å‘ç° encode ä»¥åè¿˜æ˜¯è¢«æˆªæ–­ã€‚æˆ‘è§‰å¾—æœ‰å¯èƒ½æ˜¯å°ç¨‹åºæœ¬èº«çš„é—®é¢˜ã€‚ 1234567891011121314151617181920212223242526272829// H5 å†…wx.miniProgram.navigateTo(&#123; url: `/pages/wxpay/wxpay?info=$&#123;JSON.stringify(obj)&#125;`&#125;)// å°ç¨‹åºå†…Page(&#123; onLoad(options) &#123; // å› ä¸ºè¢«æˆªæ–­äº†ï¼Œæ‰€ä»¥è¿™é‡Œ JSON.parse æŠ¥é”™ const data = JSON.parse(options.info) const obj = &#123; 'timeStamp': data.time, 'nonceStr': data.nounce, 'package': data.package, 'signType': 'MD5', 'paySign': data.sign, &#125;; wx.requestPayment(&#123; ...obj, success(res) &#123; console.log('success', res) &#125;, fail(res) &#123; console.log('fail', res) &#125; &#125;) &#125;&#125;) åæ¥è€è€å®å®çš„ç”¨å¤šä¸ªå‚æ•°ç©¿å‚sign=xxx&amp;signature=xxx&amp;noncestr=xxxï¼Œå‘ç° package ä¸­çš„=åé¢çš„éƒ¨åˆ†ä¹Ÿè¢«æˆªæ–­äº†ã€‚ encodeURI, encodeURIComponent éƒ½æ²¡ç”¨ã€‚ è¿™é‡Œæ²¡æœ‰æƒ³æ¸…æ¥šã€‚çœ‹äº†æ–‡æ¡£å’ŒæŸ¥äº†èµ„æ–™ä¹Ÿæ²¡å¼„æ¸…æ¥šå°ç¨‹åºåœ¨è¿™é‡Œé¢åšäº†ä»€ä¹ˆäº‹æƒ…ã€‚å…ˆæ”¾æ”¾ï¼ŒæŠŠæ–¹æ¡ˆè·‘ä¸è·‘çš„é€šè§£å†³ã€‚ æ‰€ä»¥å¹²è„†å°±æŠŠ prepay_id= xxx åé¢çš„ xxx å•ç‹¬å–å‡ºæ¥ã€‚åé¢è°ƒç”¨ requestPayment å†æ‹¼ä¸Šã€‚ æœ€ç»ˆä»£ç æœ€åæˆ‘æµ‹è¯•é€šè¿‡çš„ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627// H5 å†…wx.miniProgram.navigateTo(&#123; url: \"/pages/wxpay/wxpay?time=\" + info.wx_time + \"&amp;nounce=\" + info.wx_noncenum + \"&amp;package=\"+info.wx_package.split(\"=\")[1] + \"&amp;sign=\" + info.wx_sign&#125;)// å°ç¨‹åºå†…Page(&#123; onLoad(options) &#123; const obj = &#123; 'timeStamp': options.time, 'nonceStr': options.nounce, 'package': \"prepay_id=\" + options.package, 'signType': 'MD5', 'paySign': options.sign, &#125;; wx.requestPayment(&#123; ...obj, success(res) &#123; console.log('success', res) &#125;, fail(res) &#123; console.log('fail', res) &#125; &#125;) &#125;&#125;) æ€»ç»“ç›¸è¾ƒäºæ­£å¸¸çš„ç›´æ¥åœ¨è®¢å•é¡µä¸‹è®¢å•ï¼Œè¿™é‡Œå¤šäº†ä¸€æ­¥ï¼Œå°±æ˜¯ä»H5è·³è¿‡æ¥åï¼Œè¿˜è¦æ‹‰èµ·å°ç¨‹åºçš„ä¸€ä¸ªæ”¯ä»˜é¡µï¼Œå•ç‹¬æ‹‰èµ·æ”¯ä»˜æ¡†ã€‚ ä½“éªŒå½“ç„¶æ˜¯æ²¡æœ‰å®Œå…¨åœ¨å°ç¨‹åºä¸­ï¼Œä¸åµŒå…¥H5å¥½çš„ã€‚å¦‚æœæ˜¯è¦å¿«é€Ÿè¿­ä»£å¼€å‘çš„è¯ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§æ–¹æ³•ã€‚ æ€»ä¹‹çŸ¥é“äº†è¿™æ˜¯ä¸€ç§æ›¿ä»£çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ–è€…è¯´ä¸€ç§æ²¡æœ‰åŠæ³•çš„åŠæ³•ã€‚ğŸ“šğŸŒ²è¿˜æ˜¯å¾ˆå¼€å¿ƒçš„ã€‚ æœ€åæ¬¢è¿æ¥åˆ°å¾®ä¿¡-&gt;é’±åŒ…å…¥å£çš„Qbå……å€¼å…¥å£æ¥å……å„ç§æ¸¸æˆå¸ï¼ŒQb, åŒ…æœˆæœåŠ¡å“¦ã€‚æœ‰çš„æ—¶å€™è¿˜æœ‰ä¼˜æƒ ã€‚","categories":[],"tags":[{"name":"å°ç¨‹åº","slug":"å°ç¨‹åº","permalink":"http://sevencai.github.io/tags/å°ç¨‹åº/"}]},{"title":"æ™šæ¥çš„æ—¥æœ¬ä¹‹è¡Œ","slug":"æ™šæ¥çš„æ—¥æœ¬ä¹‹è¡Œ","date":"2018-06-02T06:48:05.000Z","updated":"2018-06-02T08:18:17.000Z","comments":true,"path":"2018/06/02/æ™šæ¥çš„æ—¥æœ¬ä¹‹è¡Œ/","link":"","permalink":"http://sevencai.github.io/2018/06/02/æ™šæ¥çš„æ—¥æœ¬ä¹‹è¡Œ/","excerpt":"","text":"å…¶å®å•Šï¼Œæ—…è¡Œçš„æ„ä¹‰ï¼Œä¸ä¸€å®šè¦æ˜¯è·¯ä¸Šçš„é£æ™¯ï¼Œæ›´æ˜¯ä½ è·¯ä¸Šçš„åŒè¡Œäººã€‚ 2018å¹´5æœˆ23 åˆ° 27 æˆ‘åœ¨æ—¥æœ¬ã€‚ TOP 10 å¹²å‡€æ•´æ´çš„æ—¥æœ¬è¡—é“ æš–å¿ƒè´Ÿè´£çš„é¢†é˜Ÿå°å“¥å“¥ ğŸ’– æœ‰è¶£æœ‰çˆ±çš„åŒä¼´ ğŸšš æ¢…ç”°çš„è´­ç‰©ä¸­å¿ƒ â„ï¸ 250 çš„ç‰›è‚‰è‡ªåŠ©é¤ å¤§é˜ªå¤§å­¦çš„ç‹è€…è£è€€ å¸…æ°”çš„æ—¥æœ¬å°å“¥å“¥ è€é¾„åŒ–çš„æ—¥æœ¬ ğŸ’³ å¥½ï¼ˆç¬¬å››å£°ï¼‰åƒå¯çˆ±çš„å°é¹¿ æœ€çˆ±çš„è®¸åŠ äºŒå’Œæ¶›å“¥ ğŸ’ æœ€çˆ±çš„å›¾ç‰‡æˆ–è®¸æ˜¯å¤ªä¹…æ²¡æœ‰æœºä¼šè·ŸåŠ¨ç‰©æ¥è§¦äº†ã€‚çœ‹åˆ°å¥¹ä»¬ç®€ç›´ä¸èƒ½è‡ªæ‹”ï¼Œå¥½æƒ³ä¸€ç›´å–‚å¥¹ä»¬ä¸œè¥¿åƒã€‚ä¸Šç½‘æŸ¥äº†ä¸‹ï¼Œå¥¹ä»¬çš„ç‚¹å¤´è¦åƒçš„ï¼Œå®é™…åœ¨åŠ¨ç‰©ç•Œå¹¶ä¸æ˜¯è¡¨ç¤ºå‹å¥½çš„è¡Œä¸ºï¼Œè¶Šçˆ±é èº¬çš„å°é¹¿ï¼Œå…¶å®æ”»å‡»æ€§å°±è¶Šå¼ºã€‚ä½†æ˜¯å•Šï¼Œå¥¹ä¸€ç‚¹å¤´ï¼Œä½ å°±ä¸èˆå¾—ä¸ç»™å¥¹åƒä¸œè¥¿ã€‚ ä¸Šé¢è¿™å¼ å›¾ç‰‡ï¼Œæ˜¯ç¬¬ä¸€å¤©é…’åº—èµ·æ¥åï¼Œæˆ‘è·Ÿå®¤å‹å»å¤–è¾¹é€›çš„æ—¶å€™æ‹çš„ã€‚å°æ²³ç‰¹åˆ«å¹²å‡€ï¼Œæˆ¿å­é¢œè‰²ç‰¹åˆ«ç¾ã€‚ è¿™å¼ å›¾ç‰‡æ˜¯ç¬¬ä¸€å¤©èµ¶åˆ°é…’åº—çš„æ—¶å€™ï¼Œå¤©ä¸‹èµ·äº†å°é›¨ï¼Œå¤–è¾¹æœ‰åƒå¤§ç†Šå®¶ä¸€æ ·çš„æˆ¿å­ğŸ¡ã€‚è§‰å¾—ç‰¹åˆ«çš„èˆ’æœã€‚ å°ç‹—è¿‡å¾—ä¸å¼€å¿ƒå—ï¼Ÿä¸ºä»€ä¹ˆçœ¼é‡Œä¼šæœ‰æ‚²ä¼¤å’Œéš¾è¿‡ã€‚ çŒœçŒœæˆ‘æƒ³æ‹çš„å°æœ‹å‹æ˜¯ï¼Ÿ ç™½è‰²çš„èˆ¹ï¼Œè“è“çš„æµ·ï¼Œé«˜é«˜çš„æ ‘ï¼Œç™½è‰²çš„æ¡Œå­å’Œæ¤…å­ï¼Œç»¿è‰²çš„å±±ã€‚ï¼ˆåŸè°…æˆ‘çš„è¯­æ–‡æ°´å¹³ï¼Œåªèƒ½æè¿°æˆè¿™ç§æ°´å¹³äº†ï¼‰ åƒç›¸æ‰‘é¤çš„æ—¶å€™ï¼Œä¸å¥½åƒã€‚ä¹Ÿæ²¡æœ‰åƒé¥±ğŸ˜ã€‚ä½†æ˜¯çœ‹åœ¨é€äº†æˆ‘ ç´¢éš† çš„ä»½ä¸Šï¼Œ5æ˜Ÿå¥½è¯„ã€‚ å…¶å®ï¼Œå°è±¡æœ€æ·±çš„ä¸ä»…ä»…è¿™ä¸ªå°ç‹—ï¼Œè¿˜æœ‰ä»–çš„ä¸»äººã€‚ä¸»äººå¤§æ¦‚60å²ï¼Œæˆ‘çœ‹ç‹—ç‹—çš„æ—¶å€™ï¼Œä»–å†²æˆ‘ç¬‘äº†ä¸‹ï¼Œç„¶åè¯´äº†ä¸€ä¸²æˆ‘å¬ä¸æ‡‚çš„æ—¥è¯­ã€‚å¯èƒ½æ˜¯åœ¨è¯´ï¼Œæ²¡å…³ç³»ï¼Œä½ å¯ä»¥æ‘¸æ‘¸å®ƒï¼Œä»–ä¸å’¬äººã€‚ æœ€å€¼å¾—çš„äº‹æƒ…æœ€å€¼å¾—çš„äº‹æƒ…ï¼Œå½“ç„¶å°±æ˜¯è§åˆ°å¾ä½³2å•¦ã€‚çœ‹ç€å¥¹é‚£ä¸ªä¹±çš„è·ŸçŒªåœˆä¸€æ ·çš„å®¿èˆï¼Œæˆ‘è§‰å¾—æ˜¯æ—¶å€™è¦ç»™å¥¹çˆ¸çˆ¸æ‰“æŠ¥å‘Šäº†ï¼Œæ€ä¹ˆè¶Šé•¿å¤§è¶Šä¹±äº†å‘¢ï¼Ÿ ä»¥å‰æˆ‘ä»¬å®¿èˆ4ä¸ªï¼Œå¥¹è¿˜ç®—æ’å€’æ•°ç¬¬2çš„ï¼Œç°åœ¨è‚¯å®šæ˜¯å€’æ•°ç¬¬1äº†ã€‚ è§å¾—æ—¶é—´å¤ªå°‘äº†ï¼Œå·²ç»å°½æˆ‘æœ€å¤§çš„èƒ½åŠ›å»æŒ¤æ—¶é—´ã€‚ä»¥åè¦æ˜¯è¿˜å»æ—¥æœ¬ï¼Œæˆ‘ä¸€å®šè‡ªç”±è¡Œï¼Œç„¶åæ¯å¤©éƒ½è·Ÿå¥¹ç¡ã€‚ç™½å¤©ä¸€èµ·é€›åƒé€›åƒï¼Œå°±åƒæˆ‘ä»¬ä¸€èµ·å¤§å­¦çš„æ—¶å€™é‚£æ ·ã€‚ ä¸€ä¸ªäººåœ¨å¤–ï¼Œé‚£ç§æ— åŠ©çš„æ—¶å€™ï¼Œè‚¯å®šå¾ˆå¤šã€‚èµ¶ç´§å›å›½ï¼Œå¸¦ä½ åƒå°é¾™è™¾ã€‚ğŸ’— åœ¨æˆ‘å»æ—¥æœ¬çš„æ—¶å€™ï¼Œæ¶›å“¥ä»–ä»¬éƒ¨é—¨çš„å›¢ï¼Œä¹Ÿæ­£å¥½åœ¨æ—¥æœ¬äº†ï¼Œæ‰€ä»¥å¾ˆä¸å®¹æ˜“çš„ï¼Œæˆ‘ä»¬åœ¨æ—¥æœ¬ä¹Ÿè§åˆ°äº†ï¼Œä»–ä»¬ä¸ºäº†é¡ºåº”æˆ‘çš„æ—¶é—´ï¼Œæ—¶é—´å¾ˆç´§å¼ ã€‚æˆ‘ä»¬çš„ç¼˜åˆ†ï¼Œè‚¯å®šè¿˜è¦æŒç»­å¾ˆä¹…ï¼Œå¾ˆä¹…ğŸŒ²ã€‚ è·¯ç—´çš„æˆ‘å¦‚æœæ˜¯ä¸èµ¶çš„è·¯ç¨‹ï¼Œæˆ‘è‚¯å®šæ˜¯ä¸€ä¸ªäººæ…¢æ…¢æ‚ æ‚ çš„æ‰¾åœ°æ–¹ç©äº†ã€‚å°±ç®—è¿·è·¯äº†ä¹Ÿä¸è¦ç´§ï¼Œåæ­£æ€»èƒ½æ‰¾åˆ°å›å®¶çš„è·¯ã€‚ä½†æ˜¯è·Ÿå›¢ä¸ä¸€æ ·ï¼Œä¸€å®šè¦ä¿è¯å¤§å®¶ä¸ä¼šå› ä¸ºæˆ‘è€½è¯¯æ—¶é—´ã€‚æ‰€ä»¥æ•´ä¸ªè·¯ç¨‹æˆ‘å°±æ˜¯æ ¹æœ¬æ‘¸ä¸æ¸…ä¸œå—è¥¿åŒ—ã€‚è¿˜å¥½æœ‰å¾ä½³2ï¼Œå°æ™ºå’Œyunhuiã€‚ è®¤è·¯è¿™ä»¶äº‹ï¼Œæœ‰æ—¶å€™çœŸçš„æ„Ÿè§‰æ— èƒ½ä¸ºåŠ›ã€‚â˜¹ï¸ è´­ç‰©ç»™å¦ˆå¦ˆä»–ä»¬ä¹°äº†ä¸¤åŒé‹å­ï¼Œè¿˜ç»™å«‚å­ä¹°äº†å¾ˆå¤šæŠ¤è‚¤å“ï¼Œè¿˜ç»™åŒäº‹å¸¦äº†å¾ˆå¤šæŠ¤è‚¤å“ã€‚ç»™çˆ¸çˆ¸ä¹°äº†ä¸ªè¡¨ï¼Œå“¥å“¥å•¥éƒ½æ²¡ç»™ä¹°ã€‚å“ˆå“ˆï¼Œä»–è‚¯å®šæ€€ç–‘æˆ‘ä¸æ˜¯äº²å¦¹å¦¹ã€‚ä¸è¿‡ï¼Œæˆ‘ç»™ä»–å³å°†å‡ºç”Ÿçš„å°å®å®ï¼Œä¹°äº†è¡£æœã€‚ç»™è‡ªå·±è¿˜ä¹°äº†å¾ˆå¤šé¢è†œã€‚é€šè¿‡ä¹°ä¸œè¥¿è¿™ä»¶äº‹æƒ…ï¼Œå‘Šè¯‰äº†æˆ‘ä¸€å®šè¦åŠªåŠ›å·¥ä½œï¼Œç„¶åèµšå¾ˆå¤šé’±ã€‚ ç¬¬ä¸€å¤©æ™šä¸Šï¼Œåƒäº†å¾ˆå¥½åƒçš„å†°æ·‡æ·‹ğŸ¨ã€‚è¶…çº§å¼€å¿ƒã€‚è¿˜å–äº†å¾ˆä¾¿å®œå¾ˆå¥½å–çš„é…¸å¥¶ï¼Œæ—¥æœ¬çš„ä¾¿åˆ©åº—ğŸªæ˜¯ä¸ªå¥½åœ°æ–¹ã€‚ è·¯ä¸Šçš„äººå„¿æˆ‘è¿™æ¬¡çš„å®¤å‹ä¸æ˜¯è·Ÿæˆ‘ä¸€ä¸ªéƒ¨é—¨çš„ã€‚å½“æˆ‘æå‡ºï¼Œèƒ½ä¸èƒ½å¾ä½³2è·Ÿæˆ‘ä¸€èµ·ä½ä¸€æ™šä¸Šçš„æ—¶å€™ï¼Œå¥¹é©¬ä¸Šå°±ç­”åº”äº†ã€‚çœŸçš„å¥½è°¢è°¢ã€‚å·²ç»æ˜¯ä¸¤ä¸ªå­©å­çš„å¦ˆå¦ˆäº†ï¼Œç„¶è€Œä¸€ç‚¹éƒ½çœ‹ä¸å‡ºæ¥ã€‚ğŸ‘ æˆ‘çš„é¢†é˜Ÿï¼Œæ˜¯è·Ÿæˆ‘ä¸€ä¸ªéƒ¨é—¨çš„ï¼Œä½†æ˜¯ä»¥å‰ä»æ¥æ²¡æœ‰è§è¿‡ï¼Œå¯èƒ½æ˜¯æ²¡æœ‰å·¥ä½œä¸Šçš„äº¤é›†ï¼Œæˆ‘ä»¬é€šå¸¸ç§°å‘¼ä»–ä¸ºå°æ™ºã€‚å°æ™ºéå¸¸çš„é è°±ï¼Œä¹Ÿæ˜¯ä¸ªè¶…çº§æš–å¿ƒçš„å°å“¥å“¥ï¼Œæ¯æ¬¡éƒ½å¸®å¤§å®¶æŠŠäº‹æƒ…å®‰æ’çš„å¾ˆå¥½ã€‚ä¸çŸ¥é“ä»–è‡ªå·±æœ‰æ²¡æœ‰ç©å¥½ã€‚æ¯æ¬¡æ‰¾ä¸åˆ°åœ°æ–¹äº†ï¼Œå°±è·Ÿä»–æ‰“ç”µè¯ã€‚ä»–è¿˜æ¯æ¬¡éƒ½å¸®æˆ‘æè¡Œæã€‚è§‰å¾—å¥½æ¸©æš–ã€‚ç¬”èŠ¯ã€‚ğŸ’– yunhui, æ˜¯è·Ÿæˆ‘ä¸€ä¸ªéƒ¨é—¨çš„ï¼Œä»¥å‰æ²¡æœ‰è§è¿‡ï¼Œä½†æ˜¯æœ‰é—®è¿‡ä»–é—®é¢˜ã€‚ä»–éå¸¸çš„çˆ±ç¬‘ï¼Œæ„Ÿè§‰ä¸€ç¬‘èµ·æ¥ï¼Œè®©åˆ«äººä¹Ÿä¼šå¼€å¿ƒã€‚yunhui ç»å¯¹æ˜¯ä¸ªæ—…è¡Œçš„å¥½ä¼™ä¼´ï¼Œæœ‰è¶³å¤Ÿçš„å¥½å¥‡å¿ƒï¼Œä¹Ÿæœ‰è¶³å¤Ÿçš„è€åŠ›ã€‚æ”»ç•¥ä¹Ÿåšçš„å¾ˆæ£’ï¼Œå…³é”®æ˜¯ä¹Ÿè®¤è·¯ã€‚ğŸ“š æˆ‘å¸ˆçˆ¶ï¼Œjiaqian, é£å“¥ï¼Œèµµå®£ï¼Œå’¸é±¼, amyï¼Œ tinaå°±ä¸è¯´äº†ï¼Œä»¥å‰éƒ½å¾ˆç†Ÿäº†,å› ä¸ºä»–ä»¬åœ¨ï¼Œè®©æˆ‘è§‰å¾—è¿™æ¬¡æ—…è¡Œï¼Œä¸€ç‚¹éƒ½ä¸é™Œç”Ÿï¼Œä¹Ÿä¸æ‹˜è°¨ã€‚ æ‘é•¿ï¼Œç¬¬ä¸€æ¬¡è·Ÿä»–è¯´äº†è¯ï¼Œæ„Ÿè§‰å¥½å¼€å¿ƒï¼Œè¿˜è®°å¾—ä»–é‚£æ¬¡è¯¸è‘›äº®æŠŠæˆ‘ä»¬æ•´ä¸ªç»„è™çš„è¶…çº§éš¾å—ã€‚æ€»ç®—æ˜¯è®¤è¯†çœŸäººäº†ã€‚ æ—¥æœ¬çš„å°å§å§éƒ½è¯´è¯å¾ˆå°å£°ï¼Œå¾ˆæœ‰ç¤¼è²Œã€‚æ—¥æœ¬çš„å­¦ç”Ÿéƒ½ç©¿åˆ¶æœï¼Œæ„Ÿè§‰å¾ˆå¥½ã€‚å¾ˆå¸…æ°”ã€‚ğŸ˜Š æ—¥æœ¬è€å¥¶å¥¶è·Ÿæˆ‘è¯´è°¢è°¢çš„æ—¶å€™ï¼Œæˆ‘å¥½æƒ³å›å¥¹ä¸ç”¨è°¢ã€‚ä½†æ˜¯æ†‹äº†åŠå¤©ï¼Œæ»¡è„¸é€šçº¢ï¼Œè¿˜æ˜¯ä¸€ä¸ªå­—éƒ½æ²¡æŒ¤å‡ºæ¥ã€‚ ç¬¬ä¸€å¤©æ™šä¸Šçš„é…’åº—çš„å°å§å§ï¼Œæƒ³æŠŠä¼è¿˜ç»™å¥¹ï¼Œä¸€è·¯ä¸Šï¼Œæƒ³äº†åŠå¤©æ€ä¹ˆè¿˜ç»™å¥¹ï¼Œç»“æœåˆ°äº†é‚£é‡Œï¼Œä¸€ä¸ªå­—éƒ½æ²¡æœ‰è¯´å‡ºæ¥ã€‚â˜¹ï¸ æˆ‘ä»¬çš„å¯¼æ¸¸ï¼Œæœ´å²›å¾ˆæ¸©å’Œï¼Œå·²ç»åŠ äº†ä»–å¾®ä¿¡ï¼ŒåŠ äº†åï¼Œæ•´ä¸ªæœ‹å‹åœˆï¼Œéƒ½æ˜¯ä»£è´­çš„æ¶ˆæ¯äº†ï¼Œå“ˆå“ˆã€‚æœ´å¯¼èŒèŒå“’ã€‚âœˆï¸ æ€»ç»“å¾ˆå¼€å¿ƒçš„ä¸€æ¬¡æ—…è¡Œï¼Œè™½ç„¶ä¿¡ç”¨å¡ğŸ’³éƒ½æ²¡çŸ¥è§‰äº†ã€‚ä¸€ç”Ÿä¼šæœ‰å¾ˆå¤šæ—…è¡Œï¼Œä½†æ˜¯è¿™æ¬¡è‚¯å®šæ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚ä½ é‡åˆ°çš„é£æ™¯ï¼Œä½ é‡åˆ°çš„äººï¼Œä½ æ‹çš„ç…§ç‰‡ï¼Œä½ è„‘æµ·é‡Œé‚£ä¸ªçˆ·çˆ·çš„å¾®ç¬‘ï¼Œä½ å¯¹æŸäº›äººçš„æ„Ÿæƒ…ï¼Œåˆæˆ–è€…æ˜¯æ—…è¡Œä¸­ä¸é‚£ä¹ˆé¡ºåˆ©å¼€å¿ƒçš„åœ°æ–¹ï¼Œéƒ½æ˜¯æ—…è¡Œçš„å®è´µæ‰€åœ¨ã€‚ æˆ‘æœ‰çš„æ—¶å€™æƒ³ï¼Œäººç”Ÿé‚£ä¹ˆä¸å¯é¢„æµ‹ï¼Œä¹Ÿè®¸æ˜å¤©ä½ å°±æ²¡æœ‰æœºä¼šå»ä½“éªŒå¾ˆå¤šäº‹æƒ…ã€‚æ‰€ä»¥ä½ ä»Šå¤©åšçš„äº‹æƒ…ï¼Œä¼šä¸ä¼šæ˜¯æœ€åä¸€å¤©ä½ æƒ³åšçš„äº‹æƒ…ã€‚ä¸è¦åæ‚”ã€‚ä¹Ÿä¸è¦é—æ†¾ã€‚å› ä¸ºä¸Šå¸ç»™ä½ ç•™ä¸‹çš„è·¯ï¼Œéƒ½æ˜¯æœ‰ä»–çš„é“ç†ã€‚å¼€å¿ƒçš„ï¼Œä¸å¼€å¿ƒçš„ï¼Œå®ƒéƒ½æ˜¯ä½ ç”Ÿæ´»ä¸­ï¼Œæˆ–è€…è¯´å‘½è¿ä¸­çš„ä¸€éƒ¨åˆ†ã€‚ æˆ‘ç›¸ä¿¡ connecting the dotsã€‚ â¤ï¸ ğŸšš ğŸ“š ä»¥åæœ‰æœºä¼šè·Ÿå®¶äººä¸€èµ·å»ã€‚","categories":[],"tags":[{"name":"ç”Ÿæ´»æ—¥å¿—","slug":"ç”Ÿæ´»æ—¥å¿—","permalink":"http://sevencai.github.io/tags/ç”Ÿæ´»æ—¥å¿—/"}]},{"title":"ä¼˜åŒ–ä»£ç ä¹‹throttle & debounce","slug":"ä¼˜åŒ–ä»£ç ä¹‹-throttle-debounce","date":"2018-06-02T06:09:15.000Z","updated":"2018-06-02T06:39:56.000Z","comments":true,"path":"2018/06/02/ä¼˜åŒ–ä»£ç ä¹‹-throttle-debounce/","link":"","permalink":"http://sevencai.github.io/2018/06/02/ä¼˜åŒ–ä»£ç ä¹‹-throttle-debounce/","excerpt":"","text":"è¿™å‡ å¤©ç¿»äº†ä¸‹ä»¥å‰å†™çš„ä»£ç ï¼Œå‘ç°è‡ªå·±ä»¥å‰è™½ç„¶æœ‰ç”¨ debounce æˆ–è€… throttle çš„æ„è¯†ï¼Œä½†æ˜¯ç¡®æ²¡æœ‰æŠŠä»£ç å°è£…çš„å¾ˆå¥½ã€‚æ¯”å¦‚æ²¡æœ‰ç”¨åˆ°é—­åŒ…å»å°è£… timer, è€Œæ˜¯æŠŠ timer æ”¾åœ¨äº† vue data çš„å˜é‡é‡Œã€‚å› æ­¤å°±å‡ºç°äº†è¿™ç¯‡æ–‡ç« ï¼Œæ€»ç»“ä¸‹ debounce å’Œ throttle è¿ç”¨åœºæ™¯ä»¥åŠå¯¹åº”çš„è‡ªå·±çš„å®ç°ã€‚å¹¶ä¸”é‡æ„äº†ä»¥å‰çš„ä»£ç ã€‚ è¿ç”¨åœºæ™¯æ¯”å¦‚æˆ‘æ›¾ç»åœ¨ä¸€ä¸ªé¡¹ç›®é‡Œï¼Œå°±ä¸¤ç§åœºæ™¯éƒ½ç”¨åˆ°äº†ã€‚ ç¬¬ä¸€ç§æ¯”å¦‚å½“ç”¨æˆ·åœ¨æœç´¢æ¡†é‡Œè¾“å…¥äº†æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä¼šå»å‘åå°è¯·æ±‚ï¼Œæœç´¢å‡ºæ¥çš„å¯¹åº”ç»“æœã€‚ ä½†æ˜¯ç”¨æˆ·çš„è¾“å…¥å¯èƒ½æ˜¯ä¸æ–­çš„è¿›è¡Œçš„ï¼Œå¦‚æœæˆ‘æ¯æ¬¡éƒ½å»è¯·æ±‚ï¼Œé‚£ä¹ˆå…¶å®æ˜¯æ— æ•ˆå¹¶ä¸”æµªè´¹çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨ç”¨æˆ·è¾“å…¥æœ€åä¸€ä¸ªå­—çš„æ—¶å€™ï¼Œå†å»å‘è¯·æ±‚ã€‚ ç”¨åˆ°çš„å°±æ˜¯ debounce çš„åŸç†ï¼Œæ¯æ¬¡çš„è¯·æ±‚éƒ½å»¶è¿Ÿä¸€æ®µæ—¶é—´å»å‘å‡ºï¼Œå½“æœ‰æ–°çš„è¯·æ±‚æ¥çš„æ—¶å€™ï¼Œæ¸…ç©ºä¸Šæ¬¡çš„è¯·æ±‚ï¼Œç„¶åé‡æ–°æ‰§è¡Œå»¶è¿Ÿä¸€æ®µæ—¶é—´å»è¯·æ±‚ï¼Œç›´åˆ°ç”¨æˆ·æ²¡æœ‰å†è¯·æ±‚çš„æ—¶å€™ï¼Œæ‰§è¡Œçš„å°±æ˜¯æœ€åä¸€æ¬¡å»¶è¿Ÿè¯·æ±‚ã€‚ è¿™ç§åªå»æ‰§è¡Œæœ€åä¸€æ¬¡çš„å°±æ˜¯æˆ‘ä»¬è¯´çš„ debounceã€‚å¯ä»¥æŠŠå®ƒç†è§£ä¸ºç‹¬å å‹çš„å‡½æ•°ã€‚ ç¬¬äºŒç§æ¯”å¦‚å½“ç”¨æˆ·æ»šåŠ¨çš„æ—¶å€™ï¼Œå½“æ»‘åˆ°äº†è¿™ä¸ªå­—æ¯å¼€å¤´çš„æ—¶å€™ï¼Œæç¤ºç»™ç”¨æˆ·ï¼Œä½ å·²ç»åˆ°äº† H å¼€å¤´çš„åˆ—è¡¨å†…å®¹äº†ã€‚æ­£å¸¸çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„åšæ³•æ˜¯ä¸€ç›´ç›‘å¬ scroll äº‹ä»¶ï¼Œç„¶åè®¡ç®—å½“å‰çš„ li æ˜¯ä¸æ˜¯åˆ°äº†å¯¹åº” H å­—æ¯å¼€å¤´äº†ï¼Œåˆ°äº†åˆ™è®¾ç½®ç›¸åº”çš„æç¤ºã€‚ ä½†æ˜¯è¦çŸ¥é“ scroll äº‹ä»¶ï¼Œæ¯æ¬¡éƒ½ä¼šè§¦å‘å¾ˆå¤šæ¬¡ï¼Œå¦‚æœæ¯æ¬¡è¿›è¡Œç›¸åº”çš„è®¡ç®—ï¼Œå°±ä¼šå¾ˆå¡é¡¿ï¼Œå°¤å…¶åœ¨ä¸€äº›è€çš„æœºå™¨ä¸Šã€‚ é‚£ä¹ˆè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ç”¨ throttle äº†ï¼Œæ¯ä¸€æ®µäº‹ä»¶ï¼Œæ¯”å¦‚ 500 ms å»æ‰§è¡Œä¸€æ¬¡è®¡ç®—ï¼Œè€Œä¸æ˜¯æ¯æ¬¡ scroll éƒ½æ‰§è¡Œã€‚ å¯ä»¥æŠŠ throttle ç†è§£ä¸ºèŠ‚åˆ¶å‹çš„å‡½æ•°ã€‚ ä¸Šé¢ä¸¤ä¸ªæ˜¯æˆ‘é‡åˆ°è¿‡çš„ä¸¤ä¸ªåœºæ™¯ï¼Œå…·ä½“å…¶ä»–åœºæ™¯è¿˜å¯ä»¥å‚è€ƒï¼š 1234567891011// å½“ onresize çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªæƒ³çŸ¥é“æœ€åä¸€æ¬¡çš„å¤§å°window.onresize = debounce(caculate, 500);// å½“ç”¨æˆ·ä¸€æ®µæ—¶é—´é¢‘ç¹ç‚¹å‡»æ—¶ï¼Œåªä»¥æœ€åä¸€æ¬¡ä¸ºæ ‡å‡†button.onclick = debounce(sendMail, 300);// onscroll æ—¶å®šä½å…ƒç´ window.onscroll = throttle(caculatePosition, 100);// é¼ æ ‡ç§»åŠ¨ï¼Œmousemove äº‹ä»¶window.onmousemove = throttle(getElement, 100) å®ç°ä»£ç åœ¨ underscore lodash é‡Œï¼Œéƒ½æœ‰ç›¸åº”çš„å®ç°äº†ã€‚ä½†æ˜¯æˆ‘æ„Ÿè§‰ä¸å¤ªå¥½ç†è§£é¢ï¼Œæ‰€ä»¥æŒ‰ç…§è‡ªå·±çš„ç†è§£ï¼Œå†™å‡ºäº†é€‚åº”è‡ªå·±çš„ debounce å’Œ throttleã€‚ å…·ä½“ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233/** * debounce * @param fn * @param wait * @param leading * @returns &#123;Function&#125; */function debounce(fn, wait, &#123; leading = false &#125;) &#123; let context, args = arguments, timer = null, firstInvoke = true function excute() &#123; fn.apply(context, args) &#125; return function () &#123; context = this if (firstInvoke &amp;&amp; leading) &#123; excute() firstInvoke = false &#125; if (timer) &#123; clearTimeout(timer) timer = null &#125; timer = setTimeout(excute, wait) &#125;&#125; leading å‚æ•°ç”¨äºæ§åˆ¶ç¬¬ä¸€æ¬¡æ˜¯å¦éœ€è¦åœ¨æœ€å¼€å§‹å°±è§¦å‘ä¸€æ¬¡ã€‚ä¸»è¦çš„æ€æƒ³å°±æ˜¯åªè¦é‡æ–°æœ‰è°ƒç”¨ï¼Œå°±æŠŠåŸæ¥çš„é‚£ä¸ªè¢«å»¶è¿Ÿæ‰§è¡Œäº†çš„æ–¹æ³•å–æ¶ˆã€‚ å–æ¶ˆçš„æ–¹æ³•æ˜¯è®¾ç½® timer ä¸º nullã€‚firstInvoke ç”¨äºæ ‡è¯†æ–¹æ³•çŸ¥å¦è¢«æ‰§è¡Œäº†ä¸€æ¬¡äº†ã€‚ ä¸‹é¢æ˜¯ throttle çš„å®ç°ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142/*** throttle* @param fn* @param wait* @param leading* @param trailing* @returns &#123;Function&#125;*/function throttle(fn, wait, &#123; leading = true, trailing = true &#125;) &#123; let context, lastExec = 0, timer, args, firstInvoke = true function excute() &#123; fn.apply(context, args) lastExec = +new Date() &#125; return function (...arg) &#123; let now = +new Date() args = arg context = this clearTimeout(timer) if (firstInvoke &amp;&amp; leading) &#123; excute() firstInvoke = false &#125; if (!lastExec) &#123; lastExec = now &#125; if (!!wait &amp;&amp; (now - lastExec) &gt;= wait) &#123; excute() &#125; else if (trailing) &#123; timer = setTimeout(excute, wait) &#125; &#125;&#125; throttle å› ä¸ºæ˜¯æŒ‰é¢‘ç‡è§¦å‘ï¼Œæ‰€ä»¥æ¯æ¬¡çš„æ—¶é—´é—´éš”æ˜¯ç›¸åŒçš„ã€‚æ‰€ä»¥å½“æ²¡åˆ°è¯¥æ‰§è¡Œçš„æ—¶é—´ç‚¹çš„æ—¶å€™ï¼Œå°±æŠŠå‰©ä½™çš„æ—¶é—´é‡æ–°è®¾ç½®ç»™ setTimeout ã€‚wait å³ä¸ºå¤šå°‘ç§’æ‰§è¡Œä¸€æ¬¡çš„æ—¶é—´ã€‚çœ‹äº† underscroll é‡Œçš„æºç ï¼Œå®ƒè¿˜è®¾ç½®äº† trailing è¿™äº›å‚æ•°ã€‚trailing è¡¨ç¤ºå½“æœ€åä¸€æ¬¡æ²¡åˆ°æ‰§è¡Œæ—¶é—´æ—¶ï¼Œä½ ä¸æƒ³è¦å»¶è¿Ÿæ‰§è¡Œè¿™ä¸ªå‡½æ•°äº†ã€‚ä¹Ÿå°±æ˜¯æœ€åä¸€æ¬¡è°ƒç”¨å°†è¢«å¿½ç•¥ã€‚ ä¸‹é¢è´´ä¸€ä¸‹ underscroll çš„å®ç°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445// Returns a function, that, when invoked, will only be triggered at most once// during a given window of time. Normally, the throttled function will run// as much as it can, without ever going more than once per `wait` duration;// but if you&apos;d like to disable the execution on the leading edge, pass// `&#123;leading: false&#125;`. To disable execution on the trailing edge, ditto._.throttle = function(func, wait, options) &#123; var timeout, context, args, result; var previous = 0; if (!options) options = &#123;&#125;; var later = function() &#123; previous = options.leading === false ? 0 : _.now(); timeout = null; result = func.apply(context, args); if (!timeout) context = args = null; &#125;; var throttled = function() &#123; var now = _.now(); if (!previous &amp;&amp; options.leading === false) previous = now; var remaining = wait - (now - previous); context = this; args = arguments; if (remaining &lt;= 0 || remaining &gt; wait) &#123; if (timeout) &#123; clearTimeout(timeout); timeout = null; &#125; previous = now; result = func.apply(context, args); if (!timeout) context = args = null; &#125; else if (!timeout &amp;&amp; options.trailing !== false) &#123; timeout = setTimeout(later, remaining); &#125; return result; &#125;; throttled.cancel = function() &#123; clearTimeout(timeout); previous = 0; timeout = context = args = null; &#125;; return throttled;&#125;; underscore æŠŠ throttle å’Œ debounce åˆ†å¼€æ¥å®ç°äº†ï¼Œä½†æ˜¯æœ‰äº›åˆ«çš„å°è£…çš„åº“åˆ™æ˜¯ç”¨ä¸€ä¸ªå‡½æ•°å®ç°ã€‚ä¸‹é¢æ˜¯ underscore debounce çš„å®ç° 1234567891011121314151617181920212223242526272829303132// Returns a function, that, as long as it continues to be invoked, will not // be triggered. The function will be called after it stops being called for // N milliseconds. If `immediate` is passed, trigger the function on the // leading edge, instead of the trailing. _.debounce = function(func, wait, immediate) &#123; var timeout, result; var later = function(context, args) &#123; timeout = null; if (args) result = func.apply(context, args); &#125;; var debounced = restArguments(function(args) &#123; if (timeout) clearTimeout(timeout); if (immediate) &#123; var callNow = !timeout; timeout = setTimeout(later, wait); if (callNow) result = func.apply(this, args); &#125; else &#123; timeout = _.delay(later, wait, this, args); &#125; return result; &#125;); debounced.cancel = function() &#123; clearTimeout(timeout); timeout = null; &#125;; return debounced; &#125;; æ€»ç»“å‰©ä¸‹çš„æ—¶é—´å°±æ˜¯å»ä¼˜åŒ–ä»£ç å•¦ã€‚çœ‹äº†ä¸‹åˆ«äººçš„æºç ï¼Œç„¶åè‡ªå·±åˆæŒ‰ç…§è‡ªå·±çš„æ–¹å¼å®ç°äº†ä¸‹ï¼Œè¿˜æ˜¯å¾ˆæœ‰æ”¶è·çš„ã€‚ ä¸è¿‡ï¼Œå¦‚æœ underscore å·²ç»æœ‰è¿™ä¹ˆæˆç†Ÿçš„ä¸œè¥¿ï¼Œå®é™…ä¸Šï¼Œæˆ‘è§‰å¾—å¯ä»¥ä¸ç”¨é‡å¤çš„å»åšè¿™ä¸ªå·¥ä½œã€‚ç”¨åˆ«äººæˆç†Ÿçš„å†…å®¹å°±å¥½äº†ã€‚è‡ªå·±äº†è§£äº†åŸç†ï¼Œè‡ªå·±å¯ä»¥å®ç°ï¼Œæœ‰é—®é¢˜çŸ¥é“æ€ä¹ˆå»æŸ¥å°±å¥½ã€‚","categories":[],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"è§£å†³webpackç¼–è¯‘åå¯¼è‡´-webkit-boxè¢«å¼ºåˆ¶å»é™¤äº†çš„é—®é¢˜","slug":"è§£å†³webpackç¼–è¯‘åå¯¼è‡´-webkit-boxè¢«å¼ºåˆ¶å»é™¤äº†çš„é—®é¢˜","date":"2018-05-11T12:12:36.000Z","updated":"2018-05-11T12:29:35.000Z","comments":true,"path":"2018/05/11/è§£å†³webpackç¼–è¯‘åå¯¼è‡´-webkit-boxè¢«å¼ºåˆ¶å»é™¤äº†çš„é—®é¢˜/","link":"","permalink":"http://sevencai.github.io/2018/05/11/è§£å†³webpackç¼–è¯‘åå¯¼è‡´-webkit-boxè¢«å¼ºåˆ¶å»é™¤äº†çš„é—®é¢˜/","excerpt":"","text":"é—®é¢˜ä»Šå¤©é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå‘ç°é‡æ„åŒäº‹çš„ dist css åœ¨æˆ‘è¿™é‡Œæœ‰å…¼å®¹æ€§é—®é¢˜ã€‚æˆ‘åªå¼•ç”¨äº†ä»–çš„æºæ–‡ä»¶ï¼Œæœªç»è¿‡ä»»ä½•æ›´æ”¹ã€‚æ’å¤„äº†ç”±äº Dom ç»“æ„ä¸åŒçš„åŸå› ä¹‹å¤–ï¼Œå”¯ä¸€çš„ä¸ä¸€æ ·çš„åœ°æ–¹ï¼Œå°±æ˜¯æˆ‘å¼•å…¥ä»–çš„æ–‡ä»¶åï¼Œåœ¨æœ¬åœ°è¿˜è¿›è¡Œäº†webpack ç¼–è¯‘ã€‚é‚£ä¹ˆé—®é¢˜åªèƒ½å‡ºåœ¨äº†è¿™é‡Œäº†ã€‚ ç»è¿‡å¯¹æ¯”ä¸¤ä»½æ–‡ä»¶å‘ç°ï¼Œå¯¹æ¯”å¦‚ä¸‹12345678910111213// é‡æ„åŒäº‹çš„css.detail-title&#123; -ms-flex:1; flex:1; -webkit-box-flex:1; box-flex:1&#125;// æˆ‘ç¼–è¯‘åçš„æ–‡ä»¶.detail-title&#123; -ms-flex:1; flex:1; box-flex:1&#125; å’¦ï¼Œ -webkit-box-flex ç«Ÿç„¶è¢«è‡ªåŠ¨å»é™¤äº†ã€‚éš¾é“è¯´åœ¨æŸç§ webpack æ’ä»¶ä¸‹ï¼Œ -webkit-box ä¼šè‡ªåŠ¨è¢«å»é™¤å—ï¼Ÿ åœ¨ç½‘ä¸Šæœäº†ä¸‹ï¼Œå‘ç°ç¡®å®æ˜¯æœ‰è¿™ç§æƒ…å†µã€‚æœ‰äº›æ’ä»¶çš„æœºåˆ¶åˆ¤æ–­è¿™ä¸ªå†…å®¹æ˜¯ä¸éœ€è¦çš„ï¼Œå¼ºè¡Œè¢«å»é™¤äº†ã€‚å¯ä»¥çœ‹è¿™ä¸ª issueã€‚ å³ä½¿ä½ æ˜¯ä½¿ç”¨äº† postCss, autoprefix å»æ·»åŠ äº†å‰ç¼€ï¼Œä½†æ˜¯ä½ ç”¨äº†å»é™¤çš„æ’ä»¶ä¹Ÿä¼šè¢«å»é™¤ã€‚ è§£å†³åŠæ³•é¦–å…ˆçœ‹ä¸‹æ˜¯ä»€ä¹ˆæ’ä»¶å¯¼è‡´äº†ä½ çš„ä»£ç è¢«å¼ºåˆ¶çš„å»é™¤äº†ã€‚ å¤§æ¦‚çš„åŸå› å¯èƒ½æœ‰ä»¥ä¸‹å‡ ç§ï¼š æœ€å¼€å§‹å¯èƒ½æ˜¯ç”±äº UglifyJsPlugin ä¸­é»˜è®¤æŠŠ minimize = true å¼€å¯äº†ï¼Œ è€Œè¿™ä¸ªå­—æ®µåœ¨css-loaderå’Œpostcss-loaderä¸­è®¾ç½®æˆ true ä¼šå¼€å¯ä¼˜åŒ–æ¨¡å¼ï¼Œæ‰€ä»¥ä¼šå¯¹ä»£ç è¿›è¡Œä¼˜åŒ–å‹ç¼©ã€‚ä½† css-loader ä¸­åˆä¼šä½¿ç”¨ cssnano è¿›è¡Œå‹ç¼©ï¼Œ è€Œ cssnanoä¸­åˆä¼šè¿›è¡Œæ— å…³å‰ç¼€çš„æ¸…ç†ã€‚ ä¸ºä»€ä¹ˆæ’ä»¶ç«Ÿç„¶ä¼šå½±å“åˆ°loader ? å¯ä»¥å…³æ³¨ä¸‹è¿™ä¸ª issueã€‚ è¿™ä¸ªæ’ä»¶(UglifyJsPlugin) åœ¨ webpack2.x è²Œä¼¼å·²ç»ä¿®å¤äº†ã€‚ css-loaderåŠautoprefixerä¹Ÿå·²ç»åšäº†ç›¸åº”çš„ä¼˜åŒ–å¤„ç†ã€‚å¦‚æœä½ æ²¡æœ‰å‡çº§ï¼Œä½ å¯ä»¥è®¾ç½®ä¸‹é¢çš„æ–¹å¼è¯•è¯•ï¼š css-loader ä¼ é€’å‚æ•°ï¼š?minimize&amp;-autoprefixer å‘ autoprefixer ä¼ é€’å‚æ•° 123postcss: function() &#123; return [autoprefixer, cssnano(&#123; safe: true &#125;)];&#125;, å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œå†æ£€æŸ¥ä¸‹ï¼Œä»£ç é‡Œæœ‰æ²¡æœ‰ç”¨åˆ°å…¶ä»–çš„å»é™¤ä¼˜åŒ–å·¥å…·ã€‚ æˆ‘è¿™è¾¹å‡ºçš„é—®é¢˜å°±æ˜¯åœ¨è¿™é‡Œã€‚ç”¨äº†OptimizeCSSPlugin, å®ƒé»˜è®¤æŠŠå‰ç¼€ç»™å»æ‰äº†ã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ç›´æ¥æŠŠè¿™ä¸ª plugin åˆ é™¤äº†ã€‚ä¹‹æ‰€ä»¥æˆ‘è¿™é‡Œå¯ä»¥ç›´æ¥åˆ é™¤ï¼Œæ˜¯å› ä¸ºé‡æ„åŒäº‹ç»™åˆ°çš„å°±æ˜¯å»é™¤å‹ç¼©å¥½äº†çš„ã€‚æ²¡æœ‰å¿…è¦å†å»å‹ç¼©å»é™¤ä¸€æ¬¡ã€‚ 12345678// Compress extracted CSS. We are using this plugin so that possible// duplicated CSS from different components can be deduped.new OptimizeCSSPlugin(&#123; cssProcessorOptions: config.build.productionSourceMap ? &#123; safe: true, map: &#123; inline: false &#125; &#125; : &#123; safe: true &#125;&#125;), å†æ¥çœ‹ä¸‹ä¸ºä»€ä¹ˆç”¨äº†OptimizeCSSPluginå»é™¤äº†prefixå‘¢ï¼Ÿçœ‹äº†ä¸‹æºç ï¼Œä¹Ÿæ˜¯åˆå¼•å…¥äº†cssnanoï¼š123if (this.options.cssProcessor === undefined) &#123; this.options.cssProcessor = require('cssnano');&#125; å¼•ç”³é—®é¢˜ - ssi æ‰¾ä¸åˆ°å®šä¹‰çš„å˜é‡ç”±è¿™ä¸ªæ‰“åŒ…çš„é—®é¢˜ï¼Œæƒ³åˆ°äº†å‰å‡ å¤©çš„å¦ä¸€ä¸ª webpack çš„é—®é¢˜ï¼Œ index.shtml æ–‡ä»¶ä¸­å¼•å…¥çš„ ssi, å¦‚æœå˜é‡ç”¨ ${variable} è¯»å–ï¼Œè€Œä¸æ˜¯$variable è¯»å–ï¼Œwebpack ç¼–è¯‘æ—¶å°±ä¼šæŠ¥é”™ã€‚ä½†å®é™…ä¸Šï¼Œè¿™ä¸¤ç§è¯­æ³•éƒ½æ˜¯å¯ä»¥è¢« server ç«¯è§£æçš„ã€‚æ¢ç©¶äº†ä¸‹ä¼šè¢«æŠ¥é”™çš„åŸå› ï¼š webpack çš„ HtmlWebpackPlugin åœ¨ç¼–è¯‘æ¨¡æ¿çš„æ—¶å€™ï¼Œç”¨çš„æ˜¯ lodash çš„ template æ–¹å¼, ä¹Ÿå°±æ˜¯ ${variable} çš„å½¢å¼ã€‚ æ‰€ä»¥ä½ ç”¨äº† ${variable} çš„å½¢å¼çš„è¯ï¼Œä»–å°±ä¼šå»ç¼–è¯‘è¿™ä¸ªå˜é‡ï¼Œä½†æ˜¯å‘¢ï¼Œè¿™ä¸ª variable ä½ æ˜¯ä» ssi ä¸Šè¯»çš„ï¼Œåˆæ²¡æœ‰å®šä¹‰ï¼Œå®ƒæ‰¾ä¸åˆ°ï¼Œæ‰€ä»¥å°±ä¼šæŠ¥é”™äº†ã€‚ æ‰€ä»¥å°±è€è€å®å®çš„ï¼Œå¦‚æœä½ ç”¨çš„ htmlWebpackPlugin å°±ç”¨ $varialbe çš„å½¢å¼å§ã€‚ 12345// correct&lt;!--#include virtual=&quot;xxx.cgi?refresh_token=$wxRefreshToken&amp;appid=$wxAppid&quot; --&gt;&apos;;// wrong: wxAppid is not defined&lt;!--#include virtual=&quot;xxx.cgi?refresh_token=$wxRefreshToken&amp;appid=$&#123;wxAppid&#125;&quot; --&gt;&apos;; æ€»ç»“ç›¸å…³å‚è€ƒ issue1: # Why does the UglifyJsPlugin affect other loaders? issue2: # ã€Œå‰ç«¯ã€ä»UglifyJSPluginå¼ºåˆ¶å¼€å¯csså‹ç¼©æ¢ç©¶webpackæ’ä»¶è¿è¡Œæœºåˆ¶ issue3: # Using plugin â€œwebpack.optimize.UglifyJsPluginâ€ led to remove the style â€œdisplay: -webkit-flex; è§‰å¾—ç•¥å‘ã€‚è¿˜æ˜¯èŠ±äº†å¤§æ¦‚ä¸€ä¸‹åˆçœ‹è¿™ä¸ªé—®é¢˜ï¼Œå‘œå‘œå‘œ(à²¥ _ à²¥)!","categories":[],"tags":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"http://sevencai.github.io/tags/å·¥å…·/"}]},{"title":"å°ç¨‹åºæ”¯æŒåˆ†åŒ…åŠ è½½å’Œæ— éœ€ç”¨æˆ·æˆæƒè·å¾—å¤´åƒ","slug":"å°ç¨‹åºæ”¯æŒåˆ†åŒ…åŠ è½½å’Œæ— éœ€ç”¨æˆ·æˆæƒè·å¾—å¤´åƒ","date":"2018-04-23T06:56:06.000Z","updated":"2018-04-23T07:06:23.000Z","comments":true,"path":"2018/04/23/å°ç¨‹åºæ”¯æŒåˆ†åŒ…åŠ è½½å’Œæ— éœ€ç”¨æˆ·æˆæƒè·å¾—å¤´åƒ/","link":"","permalink":"http://sevencai.github.io/2018/04/23/å°ç¨‹åºæ”¯æŒåˆ†åŒ…åŠ è½½å’Œæ— éœ€ç”¨æˆ·æˆæƒè·å¾—å¤´åƒ/","excerpt":"","text":"ç»“è®ºï¼šå¢åŠ äº†åˆ†åŒ…åŠ è½½ç‰¹æ€§ï¼Œé€Ÿåº¦å¿«äº†å¾ˆå¤šã€‚ä¿®æ”¹äº†ç”¨æˆ·æˆæƒé€»è¾‘ï¼Œä½¿ç”¨ open-data èƒ½åŠ›æ”¹ä¸ºäº†å®Œå…¨ä¸ç”¨ç”¨æˆ·æˆæƒå³å¯è·å¾—æ˜µç§°å¤´åƒç¾¤åç§°ç­‰ã€‚ æ”¹ç‰ˆæ•ˆæœæ˜ŸæœŸå…­çš„æ—¶å€™æŠŠæ‰‹è¾¹çš„å°ç¨‹åºæ”¹ä¸ºäº†åˆ†åŒ…åŠ è½½ã€‚äº§å“æ˜¯æ²¡æœ‰æè¿™ä¸ªéœ€æ±‚çš„ï¼Œä½†æ˜¯å¿ƒæƒ³ä¸‹æ¬¡åšå°ç¨‹åºçš„éœ€æ±‚ä¼°è®¡è¦å¾ˆä¹…ä»¥åäº†ï¼Œå°±æ˜ŸæœŸå…­åŠ äº†ä¸‹ç­ã€‚æ•ˆæœè¿˜æ˜¯å¾ˆå¥½çš„ã€‚ é¦–å±åŠ è½½æ—¶é—´ç”±ï¼š 7.95s å‡å°‘åˆ°äº† 5.00så¹³å‡ cpu å æ¯”å³ï¼š19.19% å‡å°‘åˆ°äº† 4.77% æˆ‘å¹¶ä¸çŸ¥é“å¾ˆæ¸…æ¥šè¿™ä¸ªå¹³å‡ cpu å æ¯”æ˜¯æ€ä¹ˆè¢«ç®—å‡ºæ¥çš„ã€‚å¦‚æœè¿™ä¸ªæ•°æ®çš„å˜åŒ–èƒ½å¤Ÿå¾®ä¿¡å›¢é˜Ÿèƒ½å¤Ÿè§£é‡Šçš„æ›´è¯¦ç»†äº›å°±å¥½äº†ã€‚ åœ¨åˆ†åŒ…çš„åŠ è½½è¿‡ç¨‹ä¸­ï¼Œæ¯”å¦‚é¦–é¡µæ˜¯ä¸€ä¸ª packageAï¼Œ åˆ°åˆ—è¡¨é¡µæ˜¯ä¸€ä¸ª packageB, è¿™ä¸ªè¿‡ç¨‹åœ¨ç¬¬ä¸€æ¬¡è®¿é—®åˆ—è¡¨é¡µçš„æ—¶å€™ï¼Œä¼šå†å»ä¸‹è½½ä»£ç ã€‚å¾®ä¿¡åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¸®åŠ©äº†å¼€å‘è€…æ˜¾ç¤ºäº†æç¤ºï¼š ç±»ä¼¼äºé¡µé¢åŠ è½½ä¸­ã€‚ è¿™ä¸ªè¿˜æ˜¯å¾ˆå‹å¥½çš„ã€‚ ä½†æ˜¯ä½¿ç”¨åˆ†åŒ…åŠ è½½ç»™å¼€å‘è€…å¸¦æ¥çš„æˆæœ¬ä¹Ÿå¾ˆå¤§ï¼ŒåŸºæœ¬ä¸Šç›®å½•éƒ½è¢«æ›´æ”¹äº†ã€‚ç»“æ„ä¹Ÿè¢«æ›´æ”¹äº†ã€‚å…¶å®æˆ‘æ˜¯è§‰å¾—å¦‚æœèƒ½å¤Ÿä¸æ›´æ”¹ç›®å½•ï¼Œåªåœ¨ json é‡Œé¢é…ç½®å¥½æ‰“åŒ…çš„æ–¹æ¡ˆæ˜¯æœ€å¥½çš„ã€‚å…¶å®ä»”ç»†æƒ³æƒ³ä¸æ›´æ”¹ç›®å½•ä¹Ÿæ˜¯è¡Œçš„å§ï¼Ÿ å°ç¨‹åºç»å†è¿‡å‡ æ¬¡çš„â€œæ”¹ç‰ˆâ€ï¼Œæœ€å¼€å§‹çš„ pages, åæ¥çš„ component, å…ˆåœ¨çš„ subPackage, è™½ç„¶ä¸€ç›´å†å˜å¾—æ›´å¥½ï¼Œä½†æ˜¯å¯¹äºä¸€å¼€å§‹å°±å¼€å‘å°ç¨‹åºçš„å¼€å‘è€…æ¥è¯´ï¼Œæˆ–è€…è‡³å°‘å¯¹æˆ‘æ¥è¯´ï¼Œæ˜¯ä¸é‚£ä¹ˆå‹å¥½çš„ã€‚ä»¥åç­‰è¿™é‡Œé€æ¸æ›´åŠ æˆç†Ÿäº†ï¼Œåº”è¯¥ä¼šå¥½çš„ã€‚ æ€ä¹ˆå¼€å‘åˆ†åŒ…åŠ è½½?é¦–å…ˆå¼€å§‹æŠŠç›®å½•ç»“æ„å®šå¥½ï¼Œé…ç½®åœ¨ app.json é‡Œï¼Œè¿™ä¸ªé…ç½®å®é™…å°±æ˜¯å°ç¨‹åºä¼šæ€ä¹ˆåˆ†åŒ…åŠ è½½ã€‚ 1234567891011121314151617181920212223242526&#123; \"pages\": [ \"pages/index/index\" ], \"window\": &#123; \"backgroundTextStyle\": \"light\", \"navigationBarBackgroundColor\": \"#3b8cff\", \"backgroundColor\": \"#3b8cff\", \"navigationBarTitleText\": \"è…¾è®¯å……å€¼\", \"navigationBarTextStyle\": \"light\" &#125;, \"subPackages\": [ &#123; \"root\": \"result\", \"pages\": [ \"pages/result/result\" ] &#125;, &#123; \"root\": \"userCenter\", \"pages\": [ \"pages/user_center/user_center\" ] &#125; ]&#125; å¦‚ä¸Šé¢çš„ç›®å½•ç»“æ„ï¼Œé™¤äº†ä¸ªäººä¸­å¿ƒä»¥åŠç»“æœé¡µä»¥å¤–çš„å†…å®¹éƒ½æ˜¯ä¼šåœ¨ç¬¬ä¸€æ¬¡ä¸‹è½½äº†ã€‚ å¾…é¡µé¢è·³è½¬åˆ° result ç»“æœé¡µï¼Œç›¸å…³ä»£ç æ‰ä¼šè¢«ä¸‹è½½å¹¶åŠ è½½ã€‚ æ³¨æ„ç”±äºé¡µé¢çš„ç›®å½•å‘ç”Ÿäº†å˜åŒ–ï¼Œä»¥å‰å¦‚æœæ˜¯é€šè¿‡ç›¸å¯¹è·¯å¾„å¼•ç”¨å¦‚ util é‡Œçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆè·¯å¾„éƒ½æ˜¯è¦æ›´æ”¹çš„ã€‚å»ºè®®è¿™é‡Œéƒ½ä½¿ç”¨ /images/a.png or /utils/a.jsè¿™ç§ç»å¯¹è·¯å¾„æ¯”è¾ƒå¥½ã€‚ æ€ä¹ˆè·å¾—æ˜µç§°è¿˜ä¸éœ€è¦ç”¨æˆ·æˆæƒï¼Ÿå‰å¤©å¾®ä¿¡å‘å¸ƒäº†æ–°çš„æ–‡ç« ï¼Œåœ°å€æˆ³è¿™é‡Œ,é‡Œé¢è®²åˆ°äº†ï¼š ç”¨æˆ·åœ¨æ²¡æœ‰ä»»ä½•æ“ä½œçš„æƒ…å†µç›´æ¥å¼¹å‡ºæˆæƒçš„ç™»å½•æ–¹å¼å°†é€æ¸ä¸å†æ”¯æŒï¼Œå—å½±å“çš„æœ‰ wx.getUserInfo æ¥å£ï¼Œä»¥åŠ wx.authorize æ¥å£ä¼ å…¥ scope=â€scope.userInfoâ€ çš„æƒ…å†µã€‚ å®ƒæ¨èäº†ä¸¤ç§åšæ³•ï¼š 1ã€æŒ‰é’®ç»„ä»¶çš„ç™»å½•æ–¹å¼ï¼Œç”¨æˆ·ä¸»åŠ¨ç‚¹å‡»æŒ‰é’®å¯ä»¥æ‹‰èµ·ç”¨æˆ·æˆæƒå¼¹æ¡†ï¼Œè·å–ç”¨æˆ·å¤´åƒã€æ˜µç§°ç­‰ä¿¡æ¯ï¼›2ã€åœ¨ä¸è·å–ç”¨æˆ·ä¿¡æ¯çš„æƒ…å†µä¸‹ï¼Œå¯å±•ç¤ºç”¨æˆ·å¤´åƒæ˜µç§°ã€‚ ç¬¬ä¸€ç§ç”¨äºä½ çœŸçš„æ˜¯éœ€è¦è·å¾—åˆ°æ˜µç§°å’Œå›¾æ ‡ï¼Œåšä¸€äº›å…¶ä»–çš„å·¥ä½œï¼Œæ¯”å¦‚å­˜å‚¨çš„å·¥ä½œã€‚è¿™ç§æƒ…å†µï¼Œå¼€å‘è€…æ˜¯å¯ä»¥å¾—åˆ°æ˜µç§°å’Œå›¾æ ‡çš„å€¼çš„ã€‚ä½†æ˜¯å®ƒä¹Ÿéœ€è¦ç”¨æˆ·å»è§¦å‘ï¼Œæ¯”å¦‚ä½ ç‚¹å‡»ä¸ªäººä¸­å¿ƒçš„æ—¶å€™ï¼Œæ˜¯ä¸€ä¸ª btn, è¿™ä¸ª button, ä¼šè°ƒç”¨ getUserInfo è¿™ç§æ“ä½œã€‚ &lt;button open-type=&quot;getUserInfo&quot; bindgetuserinfo=&quot;userInfoHandler&quot;&gt;å¾®ä¿¡ç™»å½•&lt;/button&gt; æ³¨æ„æ—¢ç„¶è¿˜æ˜¯è°ƒç”¨äº†æˆæƒï¼Œé‚£ä¹ˆä¸€å®šè¿˜æ˜¯ä¼šå¼¹æ¡†æç¤ºç”¨æˆ·æ˜¯å¦å…è®¸æˆæƒï¼Œå¦‚æœç”¨æˆ·æ‹’ç»äº†ä¹Ÿæ˜¯å¾—ä¸åˆ°çš„ã€‚ ç¬¬äºŒç§ï¼Œå¦‚æœä½ åªæ˜¯éœ€è¦ç”¨æˆ·çš„æ˜µç§°å’Œå¤´åƒå±•ç¤ºåœ¨é¡µé¢é‡Œï¼Œè€Œä¸æ˜¯çœŸæ­£çš„éœ€è¦è·å¾—è¿™äº›æ•°æ®å­˜å‚¨åœ¨æŸä¸ªåœ°æ–¹æˆ–è€…å‘åå°æ¥å£ä¼ é€’è¿™äº›å€¼ã€‚é‚£ä¹ˆå°±å‘Šåˆ«wx.authorizeå’Œwx.getUserInfoå§ã€‚ æˆ‘ä»”ç»†æƒ³äº†ä¸‹æˆ‘ä»¬çš„å……å€¼é¡µé¢ï¼Œå­˜å‚¨çš„éƒ½æ˜¯ openidï¼Œæ²¡æœ‰éœ€è¦å»çœŸæ­£çš„ç”¨åˆ° nickName å’Œ avatar è¿™äº›ã€‚åªæ˜¯ä¸ºäº†å†é¡µé¢å±•ç¤ºè€Œå·²ï¼Œæ‰€ä»¥ï¼š 123&lt;open-data type=&quot;groupName&quot; open-gid=&quot;xxxxxx&quot;&gt;&lt;/open-data&gt;&lt;open-data type=&quot;userAvatarUrl&quot;&gt;&lt;/open-data&gt;&lt;open-data type=&quot;userGender&quot; lang=&quot;zh_CN&quot;&gt;&lt;/open-data&gt; åˆ©ç”¨ open-data æ—¢å¯ä»¥å®Œç¾çš„è§£å†³å•¦ã€‚ ä¹Ÿå¯ä»¥ç»™å®ƒåŠ å…¥ class, è·Ÿæ­£å¸¸çš„ view æ˜¯ç±»ä¼¼çš„ã€‚ è¿™æ ·å°±å®Œç¾å•¦ï¼Œä»¥åå†ä¹Ÿä¸éœ€è¦ç”¨æˆ·æˆæƒå•¦ã€‚å˜¿å˜¿å˜¿ã€‚ï¼ˆäº§å“å¼€å¿ƒï¼Œæˆ‘ä¹Ÿå¼€å¿ƒï¼‰ å¯¹äº†è¿™é‡Œæ³¨æ„ï¼Œopen-data åªèƒ½åœ¨çœŸæœºä¸Šè¯•å‡ºæ¥ï¼Œæˆ‘çš„ç›®å‰ç‰ˆæœ¬çš„å¼€å‘è€…å·¥å…·æ˜¯å±•ç¤ºä¸å‡ºæ¥çš„ã€‚å¦‚æœä½ å¼€å‘è€…å·¥å…·ä¸Šå‡ºä¸æ¥ï¼Œå°±è¯•è¯•çœŸæœºã€‚å¯èƒ½æ˜¯ç‰ˆæœ¬åŸå› ã€‚ æ³¨æ„äº‹é¡¹ å¾®ä¿¡ 6.6 å®¢æˆ·ç«¯ï¼Œ1.7.3 åŠä»¥ä¸ŠåŸºç¡€åº“å¼€å§‹æ”¯æŒï¼Œè¯·æ›´æ–°è‡³æœ€æ–°å®¢æˆ·ç«¯ç‰ˆæœ¬ï¼Œå¼€å‘è€…å·¥å…·è¯·ä½¿ç”¨ 1.01.1712150 åŠä»¥ä¸Šç‰ˆæœ¬ æ³¨æ„è¿™é‡Œçš„åˆ†åŒ…åŠ è½½å¿…é¡»åœ¨1.7.3åŠä»¥ä¸Šå¼€å§‹æ”¯æŒã€‚ä¸ºäº†èƒ½å¤Ÿåœ¨ 1.7.3 ä»¥ä¸‹è‡³å°‘é¡µé¢æ­£å¸¸ã€‚ä½ å¯ä»¥å…¼å®¹ã€‚æˆ–è€…å†å¾®ä¿¡å…¬ä¼—å¹³å°åé¢æ¥è®¾ç½®ï¼Œæœ€ä½ç‰ˆæœ¬ä¸º 1.7.3,è¿™ç§æƒ…å†µä¸‹ï¼š è‹¥ç”¨æˆ·ä½¿ç”¨çš„åŸºç¡€åº“ç‰ˆæœ¬ä½äºè®¾ç½®çš„æœ€ä½ç‰ˆæœ¬è¦æ±‚ï¼Œåˆ™æ— æ³•æ­£å¸¸ä½¿ç”¨å°ç¨‹åºï¼Œå¹¶æç¤ºæ›´æ–°å¾®ä¿¡ç‰ˆæœ¬ã€‚ open-data æ˜¯åœ¨ 1.4.4 ä»¥ä¸Šï¼Œå¥½åƒï¼Œæ‰€ä»¥å¦‚æœä½ è®¾ç½®äº†åˆ†åŒ…åŠ è½½çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªè‚¯å®šä¹Ÿæ²¡é—®é¢˜å•¦ã€‚ æ€»ç»“ä¸»è¦æ˜¯ä»£ç ç›®å½•ç»“æ„æ”¹å˜äº†ï¼Œå¯¼è‡´æ¯”å¦‚ä»¥å‰ä»£ç é‡Œçš„ navigateTo({url: &#39;../../result/result&#39;})è·¯å¾„éƒ½éœ€è¦æ”¹å˜ï¼Œè¿™äº›è¯è´¹äº†æ—¶é—´é‡æ„ã€‚ä½†æ˜¯çœ‹åˆ°ç»“æœä¸Šæ˜¯å¿«äº†è¿™ä¹ˆå¤šçš„å°±å¥½ã€‚ è¿˜æœ‰å°±æ˜¯ä¸ºä»€ä¹ˆ page é‡Œä¸èƒ½ç”¨ behavior? åªæœ‰ component é‡Œé¢èƒ½ç”¨ï¼Ÿ è¿™ä¸ªæˆ‘æ„Ÿè§‰ä¸å¤ªåˆç†ã€‚vue é‡Œé¢ æ¯ä¸ª page ä¹Ÿæ˜¯ä¸€ä¸ª component æ¥ç€ã€‚ å…¶å®æ’ä»¶çš„åŠŸèƒ½æˆ‘ä¹Ÿæƒ³è¯•è¯•ï¼Œä½†æ˜¯ç°åœ¨è¿˜æ²¡æœ‰æƒ³åˆ°å¯ä»¥ä½¿ç”¨çš„åœºæ™¯ã€‚ä¹Ÿè®¸æ˜¯ä»¥åå¯ä»¥åƒäº¤æ˜“è®°å½•è¿™ç§åšæˆå°ç¨‹åºï¼Œåˆ«çš„å¤–éƒ¨ä¸šåŠ¡å°±å¯åŠ äº†å§ï¼Ÿ","categories":[],"tags":[{"name":"å°ç¨‹åº","slug":"å°ç¨‹åº","permalink":"http://sevencai.github.io/tags/å°ç¨‹åº/"}]},{"title":"é•¿åˆ—è¡¨å›¾ç‰‡ä¼˜åŒ–æ–¹å¼","slug":"é•¿åˆ—è¡¨å›¾ç‰‡ä¼˜åŒ–æ–¹å¼","date":"2018-03-22T09:57:50.000Z","updated":"2018-03-22T11:17:39.000Z","comments":true,"path":"2018/03/22/é•¿åˆ—è¡¨å›¾ç‰‡ä¼˜åŒ–æ–¹å¼/","link":"","permalink":"http://sevencai.github.io/2018/03/22/é•¿åˆ—è¡¨å›¾ç‰‡ä¼˜åŒ–æ–¹å¼/","excerpt":"","text":"æœ€è¿‘åœ¨çš„ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæœ¬æ¥ä¸é•¿çš„åˆ—è¡¨é¡µå˜å¾—å¾ˆé•¿å¾ˆé•¿ã€‚å¹¶ä¸”æ¯ä¸ªliéƒ½ä¼šæœ‰ä¸€ä¸ªå›¾ç‰‡ã€‚è¿™å°±è¿«ä½¿æˆ‘å¿…é¡»è¦æƒ³åŠæ³•ä¼˜åŒ–è¿™ä¸ªé•¿åˆ—è¡¨äº†ã€‚ä»¥å‰æ€»ä»¥ä¸ºæ˜¯ä¸æ˜¯å¯¹äºé•¿åˆ—è¡¨è€Œè¨€æ€§èƒ½çš„ç“¶é¢ˆæ›´å¤šåœ¨ä¸ dom å’Œjs, ä½†æ˜¯å®é™…ä¸Šå›¾ç‰‡ä»ç„¶ä¹Ÿå å¾ˆå¤§ä¸€éƒ¨åˆ†ã€‚ä¸ºäº†ç”¨æˆ·è€ƒè™‘ï¼Œæ€ä¹ˆæ ·å‡å°‘å›¾ç‰‡å¸¦æ¥çš„æµé‡ï¼Œå¯¹äºèŠ‚çœå¸¦å®½åŠç”¨æˆ·çš„ç”µæ± ååˆ†é‡è¦ã€‚ é•¿åˆ—è¡¨å¯ä»¥ä»ä»¥ä¸‹è¿™å‡ ä¸ªæ–¹é¢å»ä¼˜åŒ–ï¼š å›¾ç‰‡æ‡’åŠ è½½å›¾ç‰‡æ‡’åŠ è½½ï¼Œé•¿åˆ—è¡¨æœ€å¤§çš„é—®é¢˜å°±æ˜¯å›¾ç‰‡å¤ªå¤šï¼Œå¦‚æœä¸€æ¬¡æ€§æŠŠå›¾ç‰‡å…¨éƒ¨è¯·æ±‚äº†ï¼Œé‚£ä¹ˆé¡µé¢æ¸²æŸ“é€Ÿåº¦ä¼šå¾ˆæ…¢ï¼Œå¦‚æœç”¨æˆ·ç‚¹ä¸åˆ°ï¼Œè¿˜ä¼šé€ æˆå¾ˆå¤§çš„æµªè´¹ï¼Œç”šè‡³ä¼šæœ‰æ€§èƒ½ç“¶é¢ˆã€‚ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ‡’åŠ è½½å‘¢ï¼Ÿä¸ºäº†åŠ é€Ÿé¡µé¢çš„åŠ è½½é€Ÿåº¦ï¼Œå‡å°‘ä¸å¿…è¦çš„è¯·æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†æœªå‡ºç°åœ¨å¯è§†åŒºåŸŸçš„å›¾ç‰‡å…ˆä¸åšåŠ è½½ï¼Œç­‰åˆ°æ»šåŠ¨åˆ°å¯è§†åŒºåŸŸä»¥åå†å»åŠ è½½ã€‚è¿™æ ·æå‡äº†æ€§èƒ½å’Œæé«˜äº†ç”¨æˆ·ä½“éªŒã€‚ é‚£ä¹ˆåŸç†å°±å¾ˆç®€å•äº†ï¼šä¸€å¼€å§‹æ—¶ï¼Œæ‰€æœ‰å›¾ç‰‡éƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„ src, æŒ‡å‘æœ¬åœ°çš„ä¸€ä¸ª default.png ,å¹¶ä¸”æŠŠimgçš„çœŸå®çš„åœ°å€æ”¾åœ¨ data-srcä¸Šã€‚å½“æ»šåŠ¨æ—¶ï¼Œåˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨å¯è§†åŒºåŸŸï¼Œå¦‚æœåœ¨å¯è§†åŒºåŸŸ,é‚£ä¹ˆå†æŠŠ data-src ä¸Šçš„å€¼å†™å…¥çœŸæ­£çš„ src ä¸­ã€‚ ä»å›¾ç‰‡æœ¬èº«ä¼˜åŒ–ç¬¬äºŒç§æ€è·¯å°±æ˜¯ä»å›¾ç‰‡çš„æœ¬èº«å»ä¼˜åŒ–ï¼Œæ¯”å¦‚æ›´æ¢å›¾ç‰‡æ ¼å¼ã€‚ç”± png,jpg,jpeg,gif è½¬æ¢ä¸ºæ›´å¥½çš„ webpã€‚ WebP çš„ä¼˜åŠ¿åœ¨ä¸å®ƒæ›´å¥½çš„å›¾åƒæ•°æ®å‹ç¼©ç®—æ³•ï¼Œèƒ½å¤Ÿå°†å›¾ç‰‡è½¬æ¢ä¸ºæ›´å°çš„ä½“ç§¯ï¼Œå…·æœ‰æ— æŸå’Œæœ‰æŸçš„å‹ç¼©æ¨¡å¼ã€‚å¦‚æœæ˜¯é€‰æ‹©äº†æœ‰æŸå‹ç¼©ï¼Œä¹Ÿæ‹¥æœ‰è‚‰çœ¼æ— æ³•è¯†åˆ«å·®å¼‚çš„å›¾åƒè´¨é‡ã€‚è™½ç„¶å®ƒåœ¨é¡µé¢æ¸²æŸ“çš„æ—¶å€™æµè§ˆå™¨æ¯”jpgä¼šèŠ±ç¨é•¿çš„æ—¶é—´è§£æå®ƒçš„ç®—æ³•ï¼Œä½†æ˜¯æƒè¡¡å®ƒæ‰€å¸¦æ¥çš„ä½“ç§¯çš„å‡å°‘æ¥çœ‹ï¼ŒWebP è¿˜æ˜¯æœ€ä¼˜ç§€çš„ã€‚ å…³äºå®ƒçš„æœ‰æŸå’Œæ— æŸæ¥è¯´ï¼Œæ— æŸçš„ä½“ç§¯å‡å°‘ä¼šç¨å¾®å°ä¸€äº›ï¼Œè€Œæœ‰æŸçš„ä½“ç§¯ä¼šå‡å°‘çš„éå¸¸å¤šã€‚å¦‚æœä¸æ˜¯å¯¹å›¾ç‰‡è´¨é‡è¦æ±‚å¾ˆå¤šï¼Œå¯¹äºä¸€èˆ¬çš„å›¾ç‰‡ï¼Œç”¨æœ‰æŸå°±å¾ˆå¥½äº†ã€‚webpæ— æŸå‹ç¼©å¯ä»¥å‡å°‘å›¾ç‰‡ä¸€åŠçš„å¤§å°è€Œè¾¾åˆ°åŒæ ·æ— æŸçš„æ•ˆæœã€‚å¯ä»¥çœ‹ä¸‹é¢ä¸€ä»½æ•°æ®ï¼š YouTubeçš„è§†é¢‘ç¼©ç•¥å›¾é‡‡ç”¨WebPåï¼Œç½‘é¡µåŠ è½½é€Ÿåº¦æå‡äº†10%ï¼›è°·æ­Œç½‘ä¸Šåº”ç”¨å•†åº—é‡‡ç”¨WebPåï¼Œæ¯å¤©å¯èŠ‚çœå‡ TBçš„å¸¦å®½ï¼Œé¡µé¢å¹³å‡åŠ è½½æ—¶é—´å¤§çº¦å‡å°‘1/3ï¼›è°·æ­Œç§»åŠ¨åº”ç”¨å¸‚åœºé‡‡ç”¨WebPå›¾ç‰‡æ ¼å¼åï¼Œæ¯å¤©èŠ‚çœäº†50TBçš„å­˜å‚¨ç©ºé—´ï¼›2014å¹´è…¾è®¯æ–°é—»å®¢æˆ·ç«¯åº”ç”¨äº†WebPåï¼Œæµé‡å³°å€¼å¸¦å®½é™ä½9GBï¼Œç½‘ç»œè¿æ¥å»¶æ—¶ä¸å˜çš„å‰æä¸‹ï¼Œå¹³å‡å›¾ç‰‡å»¶æ—¶å’Œæ•°æ®ä¸‹è½½å»¶æ—¶é™ä½äº†100msï¼›2014å¹´ç©ºé—´è£…æ‰®ä¹Ÿå…¨é‡è½¬æ¢æˆWebPï¼Œå¸¦å®½ä¸Šä¹Ÿæœ‰æ˜¾è‘—é™ä½ã€‚ ä½†æ˜¯ WebP ä¸æ˜¯æ¯ä¸ªæµè§ˆå™¨éƒ½æ”¯æŒã€‚æ‰€ä»¥è¦å®è·µçš„è¯å¯ä»¥ä»ä¸‹é¢ä¸¤ä¸ªæ–¹é¢è€ƒè™‘ï¼š ä»æœåŠ¡ç«¯è€ƒè™‘ï¼šå¦‚æœæµè§ˆå™¨æ”¯æŒ WebP ,é‚£ä¹ˆä¼šåœ¨ request header accepté‡Œï¼Œå‘é€image/webp, æœåŠ¡å™¨æ”¶åˆ°ä»¥åæ ¹æ®è¿™ä¸ªæ¥å»è¿”å›ç»™å®¢æˆ·ç«¯å›¾ç‰‡ã€‚è¯·æ±‚å¤´é‡Œæœ‰ï¼Œåˆ™å‘é€webpçš„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±å‘é€æ™®é€šjpgçš„ã€‚ ä¸è¿‡è¿™ä¸ªå¯¹æœåŠ¡å™¨è¦æ±‚æ¯”è¾ƒé«˜ï¼Œå¹¶ä¸”ç°åœ¨å›¾ç‰‡å¤§å¤šæ”¾åœ¨ CDN ä¸Šï¼ŒCDNå»åšè¿™ç§ç­–ç•¥å¯èƒ½ä¼šç¨å¾®éº»çƒ¦ç‚¹ã€‚ ä»å‰ç«¯è€ƒè™‘ï¼šå‰ç«¯å»æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒ WebP, æ”¯æŒå°±å‘é€ WebP çš„å›¾ç‰‡è¯·æ±‚ï¼Œä¸æ”¯æŒå°±å‘é€ JPG,PNG ç­‰çš„ã€‚ä¸‹é¢æ˜¯ä¸€è¡Œä»£ç åˆ¤æ–­æ˜¯å¦æ”¯æŒWebPã€‚ 1var isSupportWebp = !!\\[\\].map &amp;&amp; document.createElement(&apos;canvas&apos;).toDataURL(&apos;image/webp&apos;).indexOf(&apos;data:image/webp&apos;) == 0; !!\\[\\].mapä¸»è¦æ˜¯åˆ¤æ–­æ˜¯å¦æ˜¯IE9+ï¼Œä»¥å…toDataURLæ–¹æ³•ä¼šæŒ‚æ‰ã€‚å¦‚æœä½ ç›´æ¥å¯¹æ•°ç»„åŸå‹æ‰©å±•äº†mapæ–¹æ³•ï¼Œåˆ™éœ€è¦ä½¿ç”¨!!\\[\\].mapä»¥å¤–çš„æ–¹æ³•è¿›è¡Œåˆ¤æ–­ï¼Œä¾‹å¦‚!!window.addEventListenerç­‰ã€‚ å“ˆå“ˆï¼Œè¿™ä¸ªæˆ‘æ˜¯å¶ç„¶åœ¨zhangxinxuçš„åšå®¢ä¸Šçœ‹åˆ°çš„ï¼Œæ„Ÿè§‰è¿™ä¸ªè¦æ¯”å…¶ä»–çš„æ–¹æ³•æ›´åŠ ç®€æ´å’Œå¥½ã€‚åœ°å€åœ¨è¿™é‡Œã€‚ æœ€åæˆ‘æ²¡æœ‰åšè¿™ä¸€å±‚ä¼˜åŒ–ï¼Œå› ä¸ºå›¾ç‰‡å¤ªå¤šï¼Œå·²ç»è¢«å‘åˆ°äº†CDN ä¸Šï¼Œå›¾ç‰‡æºå¯èƒ½éƒ½ä¸åœ¨äº†ï¼Œæ²¡æœ‰è®©ä»–ä»¬å»æŠŠå›¾ç‰‡å˜æˆ WebPã€‚ å¦‚æœä¸€å¼€å§‹å°±é—® CDC çš„åŒäº‹è¦ä¸¤ç§å›¾ç‰‡æ ¼å¼å°±å¥½äº†ã€‚sadã€‚ ä»£ç å®ç°1é¦–å…ˆæœ‰ä¸¤ç§åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨å¯è§†åŒºåŸŸçš„æ–¹æ³•ï¼š offsetTop - scrollTop &lt; clientHeight ï¼Œä»£è¡¨åœ¨å¯è§†åŒºã€‚ IntersectionObserverï¼Œè¿™ä¸ª Api å¯ä»¥ç›´æ¥æ¥åˆ¤æ–­ã€‚ æ³¨æ„å¯ä»¥ç”¨ throttle é˜²æ­¢è¯·æ±‚æ¬¡æ•°è¿‡é«˜ï¼Œåœ¨ä¸€å®šçš„æ—¶é—´èŒƒå›´å†…åªè¯·æ±‚1æ¬¡ã€‚ä¸‹é¢çš„ä»£ç æ˜¯éšæ„å†™çš„ï¼Œæ²¡æœ‰è·‘è¿‡ã€‚å¯ä»¥å½“åšä¼ªç æ¥çœ‹ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041const checkVisible = (ele) =&gt; &#123; let scrollTop = document.documentElement.scrollTop || document.body.scrollTop let clientHeight = document.documentElement.clientHeight return ele.offsetTop - scrollTop &lt; clientHeight&#125;let imgs = document.getElementsByTagName(&quot;img&quot;), nums = imgs.lengthconst lazyLoad = () =&gt; &#123; for (let i = 0; i &lt; nums; i++) &#123; if (checkVisible(imgs[i]) &amp;&amp; imgs[i].getAttribute(&quot;src&quot;) === &quot;default.png&quot;) &#123; imgs[i].src = imgs[i].getAttribute(&quot;data-src&quot;) &#125; &#125;&#125;const throttle = (action, delay) =&gt; &#123; let timeout = null let lastRun = 0 return function () &#123; if (timeout) &#123; return &#125; let elapsed = Date.now() - lastRun let context = this let args = arguments let runCallback = function () &#123; lastRun = Date.now() timeout = false action.apply(context, args) &#125; if (elapsed &gt;= delay) &#123; runCallback() &#125; else &#123; timeout = setTimeout(runCallback, delay) &#125; &#125;&#125;document.addEventListener(&quot;scroll&quot;, throttle(lazyLoad, 1000)) ä»£ç å®ç°2å› ä¸ºé¡¹ç›®æœ¬èº«æ˜¯Vueå†™çš„ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿå»åœ¨ç½‘ä¸Šæ‰¾äº†ç›¸åº”çš„directives, å·²ç»æœ‰äº†å¾ˆå¥½çš„ä¸€äº›å®ç°ã€‚ä»–ä»¬çš„æ¯”è¾ƒå®Œæ•´ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªï¼šhttps://github.com/hilongjw/vue-lazyloadï¼Œç”¨æ³•å¾ˆç®€å•ï¼š 12345Vue.use(VueLazyload, &#123; preLoad: 1.3, attempt: 2, listenEvents: [&quot;scroll&quot;]&#125;) ç„¶åå† img æ ‡ç­¾ä¸Šï¼Œä½¿ç”¨è¿™ä¸ª directiveï¼Œ v-lazy å³å¯ï¼š1&lt;img class=&quot;mod-service__pic&quot; v-lazy=&quot;list.icon&quot; aria-hidden=&quot;true&quot; v-bind:alt=&quot;list.name&quot;&gt; æ€»ç»“åœ¨åšè¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘è¿˜çœ‹äº†ä¸€äº›å…¶ä»–çš„å†…å®¹ï¼Œæ¯”å¦‚ png8, png24, svg,è¿™äº›ã€‚ä¹Ÿå»çœ‹äº†ä¸‹vue-lazyloadè¿™ä¸ªåº“çš„æºç ã€‚æ”¶è´§å¤šå¤šã€‚","categories":[],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"isObjEmpty/once function/template rendering/cdnçš„å®ç°å’Œè§£é‡Š","slug":"isObjEmpty-once-function-template-rendering-cdnçš„å®ç°å’Œè§£é‡Š","date":"2018-03-21T03:03:57.000Z","updated":"2018-03-21T03:18:23.000Z","comments":true,"path":"2018/03/21/isObjEmpty-once-function-template-rendering-cdnçš„å®ç°å’Œè§£é‡Š/","link":"","permalink":"http://sevencai.github.io/2018/03/21/isObjEmpty-once-function-template-rendering-cdnçš„å®ç°å’Œè§£é‡Š/","excerpt":"","text":"æ€»ç»“äº†å‡ ç§åˆ¤æ–­ Object æ˜¯å¦ä¸ºç©ºçš„æ–¹æ³•æ€»ç»“ once function (åªæ‰§è¡Œä¸€æ¬¡å‡½æ•°ä»£ç )å®ç°ä¸¤ç§ç®€å•çš„å­—ç¬¦ä¸²æ¨¡æ¿æ›¿æ¢æ–¹æ³•é‡æ–°å½’çº³æ€»ç»“äº†ä¸‹CDNå’ŒDNSçš„åè¯è§£é‡Š once function è®©å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡è¿™é‡Œåˆ©ç”¨äº†é—­åŒ…å¾ˆå¥½çš„ä¿å­˜äº†å†…å±‚å‡½æ•°çš„è¿”å›å€¼å†…å®¹ã€‚123456789101112131415161718192021// å®šä¹‰const once = (fn, context) =&gt; &#123; var result return function () &#123; if (fn) &#123; result = fn.apply(context || this, arguments) fn = null &#125; return result &#125;&#125;// ä½¿ç”¨let logOnce = once(function () &#123; return Array.prototype.slice.call(arguments)[0]&#125;)logOnce(4,5) // get 4logOnce(6,7) // get 4 å®ç°ç®€å•çš„æ¨¡æ¿å­—ç¬¦ä¸²æ›¿æ¢ç»å¸¸ä¼šæœ‰ä¸‹é¢çš„éœ€æ±‚ï¼š1234567let template = `æˆ‘å«&#123;&#123;name&#125;&#125;, æˆ‘çš„æ€§åˆ«æ˜¯&#123;&#123;sex&#125;&#125;`let person = &#123; name: &apos;Seven&apos;, sex: &apos;female&apos;&#125;console.log(&apos;æˆ‘å«Seven, æˆ‘çš„æ€§åˆ«æ˜¯female&apos;) ä¸‹é¢æ˜¯ä¸€ç§ç®€å•çš„å®ç°ï¼ŒæŠŠæ¨¡æ¿å’Œå¯¹è±¡ï¼Œç»“åˆä¸ºç›®æ ‡å­—ç¬¦ä¸²ï¼Œæ–¹æ³•1å¦‚ä¸‹ã€‚1234const parseTemplateByRegFunc = (obj, template) =&gt; &#123; return template.replace(/\\&#123;\\&#123;(.*?)\\&#125;\\&#125;/g, (match, key) =&gt; obj[key.trim()])&#125;parseTemplateByRegFunc(&#123;name: &apos;seven&apos;&#125;, &apos;æˆ‘å«&#123;&#123; name&#125;&#125;&apos;) // æˆ‘å«seven æ–¹æ³•2æ¯”è¾ƒå®¹æ˜“æƒ³åˆ°ï¼Œå®ç°å¦‚ä¸‹ï¼š12345678const parseTemplateByObjectKeys = (obj, template) =&gt; &#123; Object.keys(obj).forEach(key =&gt; &#123; template = template.replace(new RegExp(`&#123;&#123;\\\\s*$&#123;key&#125;\\\\s*&#125;&#125;`, &apos;g&apos;), obj[key]) &#125;) return template&#125;parseTemplateByObjectKeys(&#123;name: &apos;seven&apos;&#125;, &apos;æˆ‘å«&#123;&#123; name&#125;&#125;&apos;) // æˆ‘å«seven ç®€å•çš„æŠŠ obj é‡Œé¢æ¯ä¸ªkey éƒ½æ›¿æ¢ä¸€æ¬¡ã€‚æ–¹æ³•1ç”¨åˆ°çš„æ˜¯replaceçš„ç‰¹æ€§ã€‚ å…³äº CDNDNS æ˜¯åŸŸåè§£æç³»ç»Ÿï¼Œå®ƒä½œä¸ºå°†åŸŸåå’ŒIPåœ°å€ç›¸äº’æ˜ å°„çš„ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œèƒ½å¤Ÿä½¿äººæ›´æ–¹ä¾¿åœ°è®¿é—®äº’è”ç½‘ã€‚å…¶ä¸­æœ‰ä¸€é¡¹æŠ€æœ¯æ˜¯ä¼šæ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„IPç»™ç”¨æˆ·ã€‚è¿™ç§æ ¹æ®æ¯å°æœºå™¨çš„è´Ÿè½½é‡ï¼Œè¯¥æœºå™¨ç¦»ç”¨æˆ·åœ°ç†ä½ç½®çš„è·ç¦»ç­‰ç­‰ï¼Œè¿”å›åˆé€‚çš„IPçš„æŠ€æœ¯ç§°ä¹‹ä¸º DNS é‡å®šå‘ã€‚CDNå°±æ˜¯åˆ©ç”¨çš„DNSé‡å®šå‘æŠ€æœ¯ã€‚ CDNçš„å…¨ç§°æ˜¯Content Delivery Networkï¼Œå³å†…å®¹åˆ†å‘ç½‘ç»œã€‚å…¶åŸºæœ¬æ€è·¯æ˜¯å°½å¯èƒ½é¿å¼€äº’è”ç½‘ä¸Šæœ‰å¯èƒ½å½±å“æ•°æ®ä¼ è¾“é€Ÿåº¦å’Œç¨³å®šæ€§çš„ç“¶é¢ˆå’Œç¯èŠ‚ï¼Œä½¿å†…å®¹ä¼ è¾“çš„æ›´å¿«ã€æ›´ç¨³å®šã€‚é€šè¿‡åœ¨ç½‘ç»œå„å¤„æ”¾ç½®èŠ‚ç‚¹æœåŠ¡å™¨æ‰€æ„æˆçš„åœ¨ç°æœ‰çš„äº’è”ç½‘åŸºç¡€ä¹‹ä¸Šçš„ä¸€å±‚æ™ºèƒ½è™šæ‹Ÿç½‘ç»œï¼ŒCDNç³»ç»Ÿèƒ½å¤Ÿå®æ—¶åœ°æ ¹æ®ç½‘ç»œæµé‡å’Œå„èŠ‚ç‚¹çš„è¿æ¥ã€è´Ÿè½½çŠ¶å†µä»¥åŠåˆ°ç”¨æˆ·çš„è·ç¦»å’Œå“åº”æ—¶é—´ç­‰ç»¼åˆä¿¡æ¯å°†ç”¨æˆ·çš„è¯·æ±‚é‡æ–°å¯¼å‘ç¦»ç”¨æˆ·æœ€è¿‘çš„æœåŠ¡èŠ‚ç‚¹ä¸Šã€‚å…¶ç›®çš„æ˜¯ä½¿ç”¨æˆ·å¯å°±è¿‘å–å¾—æ‰€éœ€å†…å®¹ï¼Œè§£å†³ Internetç½‘ç»œæ‹¥æŒ¤çš„çŠ¶å†µï¼Œæé«˜ç”¨æˆ·è®¿é—®ç½‘ç«™çš„å“åº”é€Ÿåº¦ã€‚ ä¸Šé¢çš„å†…å®¹ä»¥å‰æ˜¯çŸ¥é“çš„ï¼Œè¿™é‡Œé‡æ–°å½’çº³äº†ä¸‹ã€‚ isObjEmpty çš„å®ç°ï¼ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼‰ä½¿ç”¨ for â€¦ inï¼Œå¦‚æœè¿›å…¥äº†å¾ªåï¼Œä»£è¡¨å¯¹è±¡ä¸ä¸ºç©ºï¼š123456for (let key in obj) &#123; if (obj.hasOwnProperty(key)) &#123; return false &#125;&#125;return true ä½¿ç”¨ Object keysï¼Œ å¾—åˆ°ç©ºæ•°ç»„ï¼Œåˆ™ä»£è¡¨å¯¹è±¡ä¸ºç©ºï¼š1return Object.keys(obj).length === 0 ä½¿ç”¨ JSON.stringify å’Œ ç©ºå¯¹è±¡å¯¹æ¯”ï¼š1return JSON.stringify(obj) === JSON.stringify(&#123;&#125;)","categories":[],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"è¿›é˜¶æˆ‘çš„Vim","slug":"è¿›é˜¶æˆ‘çš„Vim","date":"2018-03-15T13:02:14.000Z","updated":"2018-03-15T13:17:03.000Z","comments":true,"path":"2018/03/15/è¿›é˜¶æˆ‘çš„Vim/","link":"","permalink":"http://sevencai.github.io/2018/03/15/è¿›é˜¶æˆ‘çš„Vim/","excerpt":"","text":"è¿™ä¸¤å¤©åšäº†ä¸€ä¸ªå¾ˆç¹ççš„éœ€æ±‚ï¼Œç®€å•çš„æ¥è¯´ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªäº§å“é…ç½®çš„å¤æ‚çš„excelè¡¨ï¼Œè½¬å…¥ä¸ºjson, ç„¶åå†ç”¨ javascript è„šæœ¬æ‹¼æ¥ä¸ºå¯¹åº” php é¡µé¢å¯æ‰§è¡Œä»£ç ã€‚ç¹ççš„æ˜¯é…ç½®å¤šä¸”æ‚ï¼Œå¹¶ä¸”äº§å“çš„å½’ç±»excel è½¬æ¢ä¸ºçš„ json å¹¶ä¸å¯ç”¨ã€‚äºæ˜¯æˆ‘è¿˜éœ€è¦åœ¨ä»–ä»¬çš„excelè¡¨é‡Œï¼Œè¿›è¡Œæ›´æ”¹ã€‚å…¶å®è¿™ä¸ªå·¥ä½œåº”è¯¥åšä¸€ä¸ªé…ç½®å°ï¼Œè®©äº§å“å»ç»´æŠ¤ã€‚ ä»¥åå°±ä¸ç”¨å¼€å‘æ‰‹åŠ¨ç»´æŠ¤è¿™ä¸ªé…ç½®è¡¨ã€‚ æ€»ä¹‹æ˜¯æå‰åšå®Œäº†ï¼Œè™½ç„¶åšçš„è¿‡ç¨‹ä¸­, ä¸æ˜¯æ€€ç€éå¸¸æ„‰å¿«çš„å¿ƒæƒ…åšçš„ã€‚æ™šä¸Šå‰©äº†ç‚¹å¤šçš„æ—¶é—´ï¼ŒæŠŠ vim ç¨å¾®è¿›é˜¶äº†ä¸€ç‚¹ã€‚ä»¥å‰çš„åŸºæœ¬å‘½ä»¤éƒ½å·²ç»ç†Ÿç»ƒä½¿ç”¨äº†ã€‚ç°åœ¨æ€»ç»“ä¸‹ç”¨çš„ä¸æ˜¯å¾ˆç†Ÿçš„å‡ ä¸ªåœ°æ–¹ã€‚ å‡ ä¸ªè¿˜æ²¡æœ‰ç”¨ç†Ÿç»ƒçš„æŒ‡ä»¤cw æ›¿æ¢ä»å…‰æ ‡æ‰€åœ¨ä½ç½®ååˆ°ä¸€ä¸ªå•è¯ç»“å°¾çš„å­—ç¬¦, ä¸åŒäºa,i,oå“¦ã€‚ 0,$,^,g_ çš„åŒºåˆ«å’Œè”ç³»ã€‚0,$æ˜¯åˆ°è¡Œå¤´å’Œè¡Œå°¾ï¼Œ^,g_åˆ°éblankå­—ç¬¦ä½ç½®ã€‚ ctrl+r å’Œ u, å› ä¸º WebStorm é‡Œè¿™äº›éƒ½è¿˜å¯ä»¥ç”¨ä»¥å‰çš„ ctrl+z ä¹‹ç±»çš„æ‰§è¡Œã€‚æ‰€ä»¥è¿™ä¸¤ä¸ªå‘½ä»¤æœ‰ç‚¹è¢«æˆ‘å¿½ç•¥äº†ã€‚å…¶å®åº”è¯¥æ”¹è¿‡æ¥ã€‚ w åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„å¼€å¤´ã€‚e åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„ç»“å°¾ã€‚å¦‚æœä½ è®¤ä¸ºå•è¯æ˜¯ç”±blankå­—ç¬¦åˆ†éš”ç¬¦ï¼Œé‚£ä¹ˆä½ éœ€è¦ä½¿ç”¨å¤§å†™çš„Eå’ŒWã€‚ æŸ¥æ‰¾è¶…èƒ½åŠ› fa åˆ°ä¸‹ä¸€ä¸ªä¸ºaçš„å­—ç¬¦å¤„ï¼Œä½ ä¹Ÿå¯ä»¥fsåˆ°ä¸‹ä¸€ä¸ªä¸ºsçš„å­—ç¬¦ã€‚ t, åˆ°é€—å·å‰çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚é€—å·å¯ä»¥å˜æˆå…¶å®ƒå­—ç¬¦ã€‚ 3fa åœ¨å½“å‰è¡ŒæŸ¥æ‰¾ç¬¬ä¸‰ä¸ªå‡ºç°çš„aã€‚ Få’ŒT å’Œ få’Œt ä¸€æ ·ï¼Œåªä¸è¿‡æ˜¯ç›¸åæ–¹å‘ã€‚ /pattern æœç´¢ pattern çš„å­—ç¬¦ä¸², å¦‚æœåˆå¤šä¸ªï¼ŒæŒ‰nåˆ°ä¸‹ä¸€ä¸ªã€‚ t, åˆ°é€—å·å‰çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚é€—å·å¯ä»¥å˜æˆå…¶å®ƒå­—ç¬¦ã€‚ dt. åˆ é™¤å½“å‰å­—ç¬¦åˆ°.ä¸ºæ­¢çš„æ‰€æœ‰å†…å®¹ã€‚ æ³¨æ„è¡¥å……ä¸‹normalæ¨¡å¼ä¸‹æŒ‰/å³å¯è¿›å…¥æŸ¥æ‰¾æ¨¡å¼ï¼Œ nä¸ºä¸‹ä¸€ä¸ªï¼ŒNä¸ºä¸Šä¸€ä¸ªã€‚å¦‚æœæ˜¯ /singer\\cä»£è¡¨æŸ¥æ‰¾singer,å¹¶ä¸”å¤§å°å†™ä¸æ•æ„Ÿã€‚å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯å¤§å°å†™æ•æ„Ÿçš„ã€‚ç›¸åº”çš„ï¼Œ\\Cä»£è¡¨å¤§å°å†™æ•æ„Ÿã€‚ ä½ è¿˜å¯ä»¥åœ¨æ­¤æ¨¡å¼ä¸‹åŠ å…¥æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ¯”å¦‚/inger$ ï¼Œè¿™æ—¶ä»¥ingerç»“å°¾çš„éƒ½ä¼šè¢«æŸ¥å‡ºæ¥ã€‚ åœ¨normalæ¨¡å¼ä¸‹çš„æŸ¥æ‰¾ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ç›´æ¥æŒ‰*,æ¥æŸ¥æ‰¾å½“å‰å…‰æ ‡æ‰€åœ¨çš„å•è¯ã€‚è¿™æ—¶å€™çš„æŸ¥æ‰¾çš„å•è¯å‰åéƒ½æ˜¯ç©ºç™½å­—ç¬¦æˆ–è€…æ ‡ç‚¹ç¬¦å·ã€‚ä¾‹å¦‚å½“å‰ä¸ºfooï¼Œ å¯ä»¥åŒ¹é…foo barä¸­çš„fooï¼Œä½†ä¸å¯åŒ¹é…foobarä¸­çš„fooã€‚ç»å¸¸ç”¨äºæŸ¥æ‰¾å‡½æ•°ã€‚å¦‚æœæƒ³è¦åŒ…å«å…³ç³»ï¼Œä½¿ç”¨g*å³å¯ã€‚ æ›¿æ¢èƒ½åŠ›åˆšåˆšæåˆ°äº†æŸ¥æ‰¾çš„èƒ½åŠ›ï¼Œnormalä¸‹ä½¿ç”¨/å³å¯è¿›å…¥æŸ¥æ‰¾æ¨¡å¼ã€‚æ›¿æ¢æ¨¡å¼åˆ™æ˜¯ä½¿ç”¨:sã€‚å…·ä½“æƒ…å†µå¦‚ä¸‹ï¼š1:&#123;ä½œç”¨èŒƒå›´&#125;s/&#123;ç›®æ ‡&#125;/&#123;æ›¿æ¢&#125;/&#123;æ›¿æ¢æ ‡å¿—&#125; :%s/singer/author/gä¼šåœ¨å…¨å±€èŒƒå›´(%)æŸ¥æ‰¾singerå¹¶æ›¿æ¢ä¸ºauthorï¼Œæ‰€æœ‰å‡ºç°éƒ½ä¼šè¢«æ›¿æ¢ï¼ˆgï¼‰ã€‚å¦‚æœä½¿ç”¨:s/singer/authoråˆ™åªä¼šåœ¨å½“å‰è¡Œæ›¿æ¢ä¸€ä¸ªã€‚ è¿™é‡Œçš„ä½œç”¨èŒƒå›´å¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼š %å…¨æ–‡æŸ¥æ‰¾ï¼Œ å¦‚ :%s/singer/author/g ä¸å¡«å†™é»˜è®¤å½“å‰è¡Œï¼Œå¦‚:s/singer/author/g :5,12s/singer/author/g, ç¬¬5-12è¡Œ :.,+2s/singer/author/gï¼Œ å½“å‰è¡Œå’Œæ¥ä¸‹æ¥çš„2è¡Œã€‚ æ³¨æ„.æ˜¯å½“å‰è¡Œï¼Œ ,æ˜¯åˆ†éš”ç¬¦ :â€™&lt;,â€™&gt;s/singer/author/gæŠŠé€‰åŒºå†…çš„å†…å®¹æ›¿æ¢ã€‚æ³¨æ„ä¸‹ï¼šåœ¨Visualæ¨¡å¼ä¸‹é€‰æ‹©åŒºåŸŸåè¾“å…¥:ï¼ŒVimå³å¯è‡ªåŠ¨è¡¥å…¨ä¸º :&#39;&lt;,&#39;&gt;ã€‚WebStormä¹Ÿä¼šåšåŒæ ·çš„äº‹æƒ…ã€‚ è¿™é‡Œçš„æ›¿æ¢æ ‡è¯†å¯ä»¥æ€»ç»“å¦‚ä¸‹ä»£è¡¨ï¼š %s/singer/author, ç©ºæ ‡è¯†è¡¨ç¤ºï¼šåªæ›¿æ¢ä»å…‰æ ‡ä½ç½®å¼€å§‹ï¼Œç›®æ ‡çš„ç¬¬ä¸€æ¬¡å‡ºç° %s/singer/author/g, global è¡¨ç¤ºå…¨å±€ iè¡¨ç¤ºå¤§å°å†™ä¸æ•æ„ŸæŸ¥æ‰¾ï¼ŒIè¡¨ç¤ºå¤§å°å†™æ•æ„Ÿ :%s/singer/author/gc cè¡¨ç¤ºå…¨å±€æŸ¥æ‰¾åæ›¿æ¢éœ€è¦è¢«ç¡®è®¤ã€‚å®ƒå¯èƒ½ä¼šå¼¹å‡ºä¸€å¥ï¼šReplace with author ? (y/n/â€¦)ä¹‹ç±»çš„ä¸œè¥¿ã€‚ åŒºåŸŸé€‰åˆ™ &lt;action&gt;a&lt;object&gt;ä»¥åŠ &lt;action&gt;i&lt;object&gt;å…¶å®è¿™ä¸ªæˆ‘å·²ç»å¾ˆç†Ÿäº†ï¼Œä»Šå¤©çœ‹åˆ°äº†åˆ«äººçš„æ€»ç»“ï¼ˆæ³¨ï¼šä¸‹é¢çš„è¿™æ®µä¸ºå¼•ç”¨å†…å®¹ï¼Œå¼•ç”¨åœ°å€ä¸ºï¼šcoolshellï¼‰ã€‚ actionå¯ä»¥æ˜¯ä»»ä½•çš„å‘½ä»¤ï¼Œå¦‚ d (åˆ é™¤), y (æ‹·è´), v (å¯ä»¥è§†æ¨¡å¼é€‰æ‹©)ã€‚ object å¯èƒ½æ˜¯ï¼š w ä¸€ä¸ªå•è¯ï¼Œ W ä¸€ä¸ªä»¥ç©ºæ ¼ä¸ºåˆ†éš”çš„å•è¯ï¼Œ s ä¸€ä¸ªå¥å­—ï¼Œ p ä¸€ä¸ªæ®µè½ã€‚ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç‰¹åˆ«çš„å­—ç¬¦ï¼š&quot;ã€ &#39;ã€ )ã€ }ã€ ]ã€‚ aå’Œiçš„åŒºåˆ«ä¹Ÿå¾ˆå¥½åˆ†ã€‚iä¸åŒ…æ‹¬ï¼ŒaåŒ…æ‹¬äº†ã€‚çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ã€‚ å‡è®¾ä½ æœ‰ä¸€ä¸ªå­—ç¬¦ä¸² (map (+) (&quot;foo&quot;)).è€Œå…‰æ ‡é”®åœ¨ç¬¬ä¸€ä¸ª o çš„ä½ç½®ã€‚ vi&quot; â†’ ä¼šé€‰æ‹© foo. va&quot; â†’ ä¼šé€‰æ‹© &quot;foo&quot;. vi) â†’ ä¼šé€‰æ‹© &quot;foo&quot;. va) â†’ ä¼šé€‰æ‹©(&quot;foo&quot;). v2i) â†’ ä¼šé€‰æ‹© map (+) (&quot;foo&quot;) v2a) â†’ ä¼šé€‰æ‹© (map (+) (&quot;foo&quot;)) VIM çš„Visualæ¨¡å¼vim åˆ†ä¸º3ä¸­ visual æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯ï¼š Visual é»˜è®¤æ¨¡å¼ï¼šnormal ä¸‹ ï¼ŒæŒ‰ v è¿›å…¥ visual é»˜è®¤æ¨¡å¼ã€‚è¿™ä¸ªæ¨¡å¼ä¸‹å¯ä»¥ hjkl è¿›è¡Œå„ç§ä¸Šä¸‹ç§»åŠ¨ã€‚é€‰ä¸­æ–‡æœ¬åï¼Œå¯ä»¥è¿›è¡Œ y,d,p,^,$ç­‰æ“ä½œã€‚ Visual Line æ¨¡å¼normalä¸‹ï¼ŒæŒ‰ V è¿›å…¥ visual lineæ¨¡å¼ã€‚ ä½¿ç”¨ j/ké”®å¯ä»¥é€‰ä¸­ä¸€è¡Œæˆ–è€…å¤šè¡Œã€‚è¿›è¡Œæ­£è¡Œæ“ä½œã€‚ Visual Block æ¨¡å¼æŒ‰ä½ ctrl + v, è¿›å…¥ visual blockæ¨¡å¼ã€‚æ­¤æ¨¡å¼ä¸‹ï¼Œé€‰ä¸­æƒ³è¦é€‰ä¸­çš„å†…å®¹ï¼ˆå¯ä»¥ç»“åˆ$^ï¼‰ã€‚é€‰ä¸­åï¼Œè¾“å…¥I,i,A,a,C,cç­‰æ“ä½œï¼Œè¾“å…¥æƒ³è¦è¾“å…¥çš„å†…å®¹ã€‚å†æŒ‰ä¸‹Escé”®ï¼Œå³å¯å…¨éƒ¨è¡Œéƒ½æœ‰å¡«å…¥çš„å†…å®¹ã€‚ç±»ä¼¼äº sublimeã€‚ æ³¨æ„ Iï¼ŒAï¼ŒC çš„åŒºåˆ«ï¼Œå°±è·Ÿä»–ä»¬åŸæ¥çš„æ„æ€ä¸€æ ·ï¼Œæ¯”å¦‚I,Aæ˜¯æ’å…¥ï¼Œåªæ˜¯æ’å…¥çš„åœ°æ–¹å¯èƒ½ä¸åŒã€‚Cæ˜¯æ›¿æ¢ã€‚ æ¯”å¦‚Ctrl+v jj$åˆ°æ¯ä¸€è¡Œè¡Œæœ«ï¼Œå†Iï¼Œå¡«å…¥;ï¼Œå°±å¯ä»¥å‡ è¡Œä¸€èµ·å¡«åˆ†å¥½äº†ã€‚ Visual Block æ¨¡å¼ä¸‹ï¼Œè¿˜å¯ä»¥åšä¸‹é¢è¿™äº›äº‹æƒ…ï¼š å¯ä»¥ç»“åˆ&lt;&gt;è¿›è¡Œç§»åŠ¨ã€‚ ä½¿ç”¨JæŠŠé€‰ä¸­çš„è¡Œè¿æ¥èµ·æ¥å˜æˆ ä¸€è¡Œã€‚ ä½¿ç”¨=è‡ªåŠ¨ç»™ç¼©è¿›ã€‚ è¿™äº›åŠŸèƒ½éƒ½å¾ˆå¥½ç”¨ã€‚ æ€»ç»“è¿™é‡Œé¢çš„ä¸œè¥¿ï¼Œæœ‰äº›å¤§å¤šæˆ‘éƒ½ç”¨è¿‡ï¼Œä¹ŸçŸ¥é“ã€‚ä½†æ˜¯æ¯æ¬¡å»ç”¨çš„æ—¶å€™æœ‰æ—¶å€™è¿˜è¦å†å»æŸ¥ä¸‹å‘½ä»¤ã€‚æ€ªä¸å¥½çš„ã€‚æ€»ç»“ä¸‹ï¼Œä»¥åå¿˜è®°äº†å°±åœ¨åšå®¢é‡Œç¿»ç¿»å§ã€‚å¼€å¿ƒã€‚","categories":[],"tags":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/tags/å·¥å…·-é…ç½®/"}]},{"title":"è®°æœ€æ–°å‡ ä¸ªæ–°çš„å°çŸ¥è¯†ç‚¹","slug":"è®°æœ€æ–°å‡ ä¸ªæ–°çš„å°çŸ¥è¯†ç‚¹","date":"2018-03-08T08:15:01.000Z","updated":"2018-03-08T08:34:59.000Z","comments":true,"path":"2018/03/08/è®°æœ€æ–°å‡ ä¸ªæ–°çš„å°çŸ¥è¯†ç‚¹/","link":"","permalink":"http://sevencai.github.io/2018/03/08/è®°æœ€æ–°å‡ ä¸ªæ–°çš„å°çŸ¥è¯†ç‚¹/","excerpt":"","text":"è®°å½•ä¸‹æœ€è¿‘é›¶é›¶æ•£æ•£å­¦çš„å‡ ä¸ªçŸ¥è¯†ç‚¹ã€‚ å›¾ç‰‡æ˜¾ç¤ºæ–¹å¼æœ‰çš„æ—¶å€™çœ‹åˆ°ç½‘ç»œä¸Šæœ‰äº›å›¾ç¤ºç”±æ¨¡ç³Šå˜æ¸…æ™°ï¼Œæœ‰äº›æ˜¯ä¸€ç›´æ¸…æ™°ï¼Œä½†æ˜¯ä¼šé€è¡Œæ˜¾ç¤ºï¼ˆæ…¢æ…¢çš„å±•ç¤ºå…¨ï¼‰ï¼Œ æ˜¯ä»€ä¹ˆå› ç´ å¯¼è‡´äº†ä»–ä»¬çš„æ˜¾ç¤ºæ–¹å¼ï¼Ÿ å®é™…æ˜¯å›¾ç‰‡åœ¨å‹ç¼©çš„æ—¶å€™ç®—æ³•å†³å®šäº†å®ƒçš„æ˜¾ç¤ºæ–¹å¼ã€‚æ¯”å¦‚ï¼šå°æ³¢ç®—æ³•ï¼šå…ˆæ¨¡ç³Šç„¶åæ¸…æ™°ç¦»æ•£ä½™å¼¦å˜æ¢ï¼šæ¸…æ™°ï¼Œé€è¡Œæ˜¾ç¤º å‰ç«¯å¯ä»¥å‡†å¤‡å¤šç§æ ·å­æˆ–è€…åˆ†è¾¨ç‡çš„å›¾ç‰‡ï¼Œå½“ç½‘ç»œå¥½æˆ–è€…ç½‘ç»œä¸å¥½ï¼Œå†æˆ–è€…ä¸åŒçš„å±å¹•åˆ†è¾¨ç‡çš„å›¾ç‰‡ã€‚ç°åœ¨å‡ºæ¥äº†ä¸€ç§æ–°çš„æ–¹å¼ï¼š HTML &lt;picture&gt;å…ƒç´ æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œç”¨æ¥ä¸ºå…¶å†…éƒ¨ç‰¹å®šçš„ &lt;img&gt;å…ƒç´ æä¾›å¤šæ ·çš„ &lt;source&gt; å…ƒç´ ã€‚æµè§ˆå™¨ä¼šæ ¹æ®å½“å‰é¡µé¢ï¼ˆå³å›¾ç‰‡æ‰€åœ¨çš„ç›’å­çš„å®¹å™¨ï¼‰çš„å¸ƒå±€ä»¥åŠå½“å‰æµè§ˆçš„è®¾å¤‡ï¼ˆæ¯”å¦‚æ™®é€šçš„å±å¹•å’Œé«˜æ¸…å±å¹•ï¼‰å»ä»ä¸­é€‰æ‹©æœ€åˆé€‚çš„èµ„æºã€‚12345&lt;picture&gt; &lt;source srcset=&quot;smaller.png&quot; media=&quot;(max-width:700px)&quot;&gt;&lt;/source&gt; &lt;source srcset=&quot;bigger.png&quot; media=&quot;(max-width:1000px)&quot;&gt;&lt;/source&gt; &lt;img srcset=&quot;default.png&quot; alt=&quot;ç¾å¥³&quot;&gt;&lt;/picture&gt; å½“ç„¶å¹¶ä¸æ˜¯æ¯ä¸ªæµè§ˆå™¨éƒ½æ”¯æŒ,åœ¨å®éªŒä¸­ã€‚ å›¾ç‰‡åˆ†ç±» jpg,jpeg,ä»¥24ä½é¢œè‰²å­˜å‚¨å•ä¸ªä½å›¾ï¼Œå¯å‹ç¼© pngï¼Œå¯åšé€æ˜å›¾ç‰‡ï¼Œä½“ç§¯è¾ƒå¤§ï¼Œéœ€è¦æ¸…æ™°çš„æ˜¾ç¤ºé¢œè‰²ä¸°å¯Œçš„å›¾ç‰‡æ—¶ç”¨ gifï¼Œå…¨é€/å…¨ä¸é€ï¼Œä¸æ”¯æŒåŠé€æ˜ svgï¼ŒçŸ¢é‡å›¾ï¼Œåœ°å›¾ä¸­ç”¨çš„å¤šï¼Œä½“ç§¯å° æ³¨æ„æœ‰çš„æ—¶å€™åªæŠŠ å°¾ç¼€æ¯”å¦‚.jpgæ›´æ”¹ä¸º.png ä¸è¡Œï¼Œå› ä¸ºåªæ˜¯åç§°æ”¹äº†ï¼Œå®é™…ä¸Šå®ƒæœ¬è´¨æ²¡æœ‰æ›´æ”¹ã€‚éœ€è¦ç”¨å·¥å…·è½¬æ¢ã€‚ æ’­æ”¾å™¨å½¢å¼ã€videoæ’­æ”¾å™¨ã€‘ä¼˜ç‚¹ï¼šä¸éœ€è¦ä¸‹è½½é¢å¤–èµ„æºï¼ˆå¦‚ï¼šflashæ’­æ”¾å™¨éœ€è¦ä¸‹è½½.swfè¾…åŠ©æ’ä»¶ï¼‰ï¼Œæ§åˆ¶ç®€å•æœ‰è¾ƒä¸ºå®Œæ•´çš„apiã€‚ç¼ºç‚¹ï¼šæ¯ä¸ªæµè§ˆå™¨çš„å¤–è§‚éƒ½ä¸ä¸€æ ·ï¼Œå¦‚æœè¦ç»Ÿä¸€éœ€è¦è‡ªå·±å†™uiå®ç°ã€‚ ã€flashæ’­æ”¾å™¨ã€‘flash æ’­æ”¾å™¨ï¼Œå…¼å®¹æ€§æ¯”è¾ƒå¥½ï¼Œåªéœ€è¦ä¸‹è½½ flash player å³å¯ä½¿ç”¨ã€‚ç¼ºç‚¹æ˜¯å¿…é¡»è¦ä¸‹è½½é¢å¤–çš„ swf æ‰å¯ä»¥ã€‚ è§†é¢‘çš„å¤–éƒ¨èµ„æºå¯ä½¿ç”¨ link åŠ è½½æ ·å¼ï¼Œè¿™æ ·å¯ä»¥è¢«æå‰åŠ è½½ã€‚è®©è§†é¢‘å…ˆè¿è¡Œã€‚è¿™æ˜¯ä¸ªå° hackã€‚ ç¼“å­˜é¡µé¢åˆ·æ–°çš„æ—¶å€™ sessionStorage (æ ‡å‡†æµè§ˆå™¨) æ˜¯ä»ç„¶å­˜åœ¨çš„ï¼Œåªæœ‰å…³é—­çš„æ—¶å€™æ‰ä¸å­˜åœ¨ã€‚åŒä¸€ä¸ªæµè§ˆå™¨ï¼Œä¸åŒçš„æ ‡ç­¾ï¼Œä¹Ÿæ˜¯ä¸å…±äº«çš„ã€‚ userData æ˜¯ IE çš„å…ˆé©±è€…ã€‚ cookie æ‰€æœ‰æµè§ˆå™¨åŸºæœ¬éƒ½æ”¯æŒï¼Œå¤§å°é™åˆ¶ä¸åŒæµè§ˆå™¨ä¹Ÿä¸åŒï¼Œä¼šæŠŠæ•°æ®å¸¦ç»™æœåŠ¡å™¨ã€‚ openDataBase æ˜¯ç±»ä¼¼äºæœ¬åœ°æ•°æ®åº“è¿™ç§å½¢å¼ã€‚å¯ä»¥åšçš„ä¸œè¥¿æ›´å¤šã€‚ localStorage çš„ç¼ºç‚¹æ˜¯ IE9, IE10 ä¸æ”¯æŒ, æ³¨æ„ä¸‹ safari è¯»ä¸åˆ° chrome çš„ localStorageã€‚ localStorage ä¸èƒ½è·¨åŸŸï¼Œæ‰€ä»¥å­˜å‚¨çš„æ—¶å€™æ˜¯åœ¨ localStorage ä¸‹ï¼ŒæŒ‰ç…§åŸŸåå­˜æ”¾çš„ã€‚ é€ æˆé¡µé¢å¡æ­»çš„åŸå› å¦‚æœé¡µé¢çªç„¶ä¸€ç›´ loading æˆ–è€… å¡æ­»ï¼Œå¯èƒ½æœ‰ä»¥ä¸‹ä¸€äº›åŸå› ã€‚ æ­»å¾ªç¯ (while 1 äº† ï¼Ÿ) å¤§æ–‡ä»¶å ç”¨èµ„æº loading é¢‘ç¹çš„è¯»å†™æœ¬åœ°èµ„æº é¡µé¢çš„é‡ç»˜å’Œå›æµå›æµä¸€å®šè§¦å‘é‡ç»˜ï¼Œä½†æ˜¯é‡ç»˜ä¸ä¸€å®šè§¦å‘å›æµã€‚DOMå…ƒç´ çš„æ·»åŠ ã€ä¿®æ”¹(å†…å®¹)ã€åˆ é™¤(Reflow+Repaint)ä»…ä¿®æ”¹DOMå…ƒç´ çš„å­—ä½“é¢œè‰²(åªæœ‰Repaintã€å› ä¸ºä¸éœ€è¦è°ƒæ•´å¸ƒå±€) å¦‚ä½•åˆ¤æ–­æ˜¯å¦é‡ç»˜äº†å‘¢ï¼Ÿ1chrome å¼€å‘è€…å·¥å…· =&gt; settings ,more tools, rendering, Paint flashingå³å¯, çœ‹åˆ°ç»¿è‰²çš„éƒ¨åˆ†å³ä¸ºå‘ç”Ÿäº†é‡ç»˜çš„éƒ¨åˆ† è§¦å‘é‡ç»˜å¯èƒ½æœ‰çš„æƒ…å†µï¼š1ã€æ”¹å˜å­—ä½“2ã€å¢åŠ æˆ–ç§»é™¤æ ·å¼è¡¨3ã€å†…å®¹å˜åŒ–ï¼Œå¦‚ç”¨æˆ·åœ¨inputæ¡†è¾“å…¥æ–‡å­—4ã€æ¿€æ´»cssä¼ªç±»ï¼Œå¦‚:hover5ã€è„šæœ¬æ“ä½œDOM6ã€è®¡ç®—å¯è§çš„å®½é«˜å±æ€§7ã€è®¾ç½®styleå±æ€§çš„å€¼ git å¸¸ç”¨å‘½ä»¤æ€»ç»“æˆ‘æ€»ç»“äº†å·²ç»å¥½å¤šæ¬¡äº†ï¼Œæœ‰äº›å‘½ä»¤ä¸€æ®µæ—¶é—´ä¸ç”¨åˆä¼šå¿˜è®°ã€‚å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ã€‚ 123456789101112131415161718192021222324252627282930313233343536git log --pretty=onelinegit log --graphgit reset --hard HEAD^git reset --hard ç‰ˆæœ¬ï¼ˆå¯çœç•¥å†™ï¼‰// add åæ”¾å¼ƒgit checkout -- file// add -&gt; commit åæ”¾å¼ƒgit reset HEAD filegit checkout --filegit remote add origin git@server-name:path/repo-name.gitgit push -u origin mastergit checkout -b devç­‰åŒäºgit branch devgit checkout devgit branch -d/-D devgit stash apply æ¢å¤git stash drop æ¢å¤ååˆ é™¤ stashgit stash pop = git stash apply + git stash dropgit stash listgit branch --set-upstream dev origin/devgit tag name æ‰“æ ‡ç­¾git tag æ˜¾ç¤ºæ‰€æœ‰ taggit tag -d v0.1 åˆ é™¤æŸä¸ªtaggit push origin v1.0 æ¨é€æŸä¸ªæ ‡ç­¾git push origin --tags ä¸€æ¬¡æ¨é€æ‰€æœ‰ tag å½“æ‰‹å¤´å·¥ä½œæ²¡æœ‰å®Œæˆæ—¶ï¼Œå…ˆæŠŠå·¥ä½œç°åœºgit stashä¸€ä¸‹ï¼Œç„¶åå»ä¿®å¤bugï¼Œä¿®å¤åï¼Œå†git stash popï¼Œå›åˆ°å·¥ä½œç°åœºã€‚ rebase merge çš„ä½¿ç”¨æ³•åˆ™ã€‚ In general the way to get the best of both worlds is to rebase local changes youâ€™ve made but havenâ€™t shared yet before you push them in order to clean up your story, but never rebase anything youâ€™ve pushed somewhere å­¦ä¹ ä¸€æ®µä»£ç è¿™æ˜¯æœ€è¿‘åœ¨æ…•è¯¾ä¸Šçœ‹åˆ°çš„ä¸€æ®µä»£ç ï¼Œæ²¡äº‹æ²¡äº‹çœ‹çœ‹åˆ«äººçš„ä»£ç è¿˜æ˜¯æœ‰ç‚¹æ”¶è·çš„ï¼Œæ¯”è¾ƒä¸‹è‡ªå·±è§‰å¾—å¥½çš„å’Œè‡ªå·±è§‰å¾—åˆ«äººå¯èƒ½æœ‰æ‰€éœ€è¦æ”¹è¿›çš„ã€‚ä¸‹é¢è¿™äº›ä»£ç æ˜¯ä¸€ä½è€å¸ˆå†™çš„ï¼Œå¤§æ¦‚å°±æ˜¯æ ¹æ®ç‰ˆæœ¬å·æ¥åˆ¤æ–­èµ„æºæ˜¯ä¸æ˜¯éœ€è¦ç¼“å­˜ï¼Œå¦‚æœç‰ˆæœ¬å·æ›´æ–°äº†ï¼Œå°±å»é‡æ–°æ‹‰å–èµ„æºï¼Œå¹¶ä¸”æ›´æ–°æœ¬åœ°ç¼“å­˜ã€‚å¦‚æœç‰ˆæœ¬å·æ²¡æœ‰æ›´æ–°ï¼Œå°±ç›´æ¥ç”¨æœ¬åœ°çš„ç¼“å­˜ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266window.Xhrfactory = function() &#123; this.init.apply(this, arguments);&#125;;window.Xhrfactory.prototype = &#123; init: function() &#123; this.xhr = this.create(); &#125;, create: function() &#123; var xhr = null; if (window.XMLHttpRequest) &#123; xhr = new XMLHttpRequest(); &#125; else if (window.ActiveXobject) &#123; xhr = new ActiveXobject(&apos;Msml2.Xmlhttp&apos;); &#125; else &#123; xhr = new ActiveXobject(&apos;Microsoft.Xmlhttp&apos;); &#125; return xhr; &#125;, readystate: function(callback) &#123; this.xhr.onreadystatechange = function() &#123; if (this.readyState === 4 &amp;&amp; this.status === 200) &#123; callback(this.responseText); console.log(this); &#125; &#125; &#125;, para: function(data) &#123; var datastr = &apos;&apos;; if (data &amp;&amp; Object.prototype.toString.call(data) === &quot;[object object]&quot;) &#123; for (var i in data) &#123; for (var i = 0; i &lt; lenght; i++) &#123; datastr += i + &apos;=&apos; data[i] + &apos;&amp;&apos;; &#125; &#125; &#125; &#125;, get: function(url, data, callback) &#123; this.readystate(callback); var newurl = url; var datastr = this.para(data); newurl = url + &apos;?&apos; + datastr; this.xhr.open(&apos;get&apos;, newurl, true); this.xhr.send(null); &#125;&#125;;// åå°ç¨‹åºçš„æ¨¡æ¿å˜é‡var localStorageSign = &apos;on&apos;;// ç‰ˆæœ¬æ§åˆ¶var resourceVersion = &apos;12312443243202&apos;;// æœ¬åœ°çš„Sdkä¸»æ–¹æ³•window.mLocalSdk = &#123; resourceJavascriptList: [&#123; id: &apos;1232131241&apos;, url: &apos;/dest/js/lib/core.js&apos;, type: &apos;javascript&apos; &#125;, &#123; id: &apos;1232131242&apos;, url: &apos;/dest/js/lib/log.js&apos;, type: &apos;javascript&apos; &#125;, &#123; id: &apos;1232131243&apos;, url: &apos;/dest/js/lib/report.js&apos;, type: &apos;javascript&apos; &#125;], needUpdate: (function() &#123; return localStorage.getItem(&apos;resourceVersion&apos;) === resourceVersion; &#125;)(), isIE: (function() &#123; var v = 3; var div = document.createElement(&apos;div&apos;); var all = div.getElementsByTagName(&apos;i&apos;); while ( div.innerHTML = &apos;&lt;!-- [if gt IE&apos; + (++v) + &apos;]&gt;&lt;i&gt;&lt;/i&gt;&lt;![endif] --&gt;&apos;, !all[0]) &#123; if(v &gt; 11)&#123;return false&#125; &#125; return v &gt; 3 ? v : false; &#125;)(), checkHedge: function() &#123; var localStorageLength = localStorage.length; var localStorageSize = 0; for (var i = 0; i &lt; localStorageLength; i++) &#123; var key = localStorage.key(i); localStorageSize += localStorage.getItem(key).length; &#125; return localStorageSize; &#125;, saveSdk: function() &#123; try &#123; localStorage.setItem(&apos;resourceVersion&apos;, resourceVersion); &#125; catch (oException) &#123; if (oException.name == &apos;QuotaExceededError&apos;) &#123; localStorage.clear(); localStorage.setItem(&apos;resourceVersion&apos;, resourceVersion); &#125; alert(&apos;QuotaExceededError&apos;); &#125; for (var i = 0; i &lt; this.resourceJavascriptList.length; i++) &#123; _self = this; (function(i)&#123; var scriptId = _self.resourceJavascriptList[i][&apos;id&apos;]; var xhr = new Xhrfactory(); xhr.get(_self.resourceJavascriptList[i][&apos;url&apos;], null, function(data) &#123; try &#123; localStorage.setItem(scriptId, data); &#125; catch (oException) &#123; console.log(&apos;oException&apos;,oException); if (oException.name == &apos;QuotaExceededError&apos;) &#123; localStorage.clear(); localStorage.setItem(scriptId, data); &#125; &#125; &#125;); &#125;)(i); // XXX addhtml åŠ è½½åˆ°é¡µé¢ &#125; &#125;, startup: function() &#123; // æ»¡è¶³ä¸€ä¸‹æ¡ä»¶ var _self = this; if (localStorageSign === &apos;on&apos; &amp;&amp; !this.isIE &amp;&amp; window.localStorage) &#123; if (this.needUpdate === true) &#123; //ä¸éœ€è¦æ›´æ–° return (function() &#123; for (var i = 0; i &lt; _self.resourceJavascriptList.length; i++) &#123; // è·å–æœ¬åœ°ç¼“å­˜åˆ—è¡¨ è¾“å…¥åˆ°htmlä¸Š var scriptId = _self.resourceJavascriptList[i][&apos;id&apos;]; // æŠŠæˆ‘ä»¬çš„åˆ—è¡¨ä¸­çš„jsæ–‡ä»¶ æ¸²æŸ“åˆ°é¡µé¢ // å»è¯»å–æœ¬åœ°æ–‡ä»¶ window.mDomUtils.addJavascriptByInline(scriptId); &#125; &#125;)(); &#125; else &#123; // ä¿å­˜æˆ‘ä»¬è¯·æ±‚åˆ°çš„jsæ–‡ä»¶ return (function() &#123; _self.saveSdk(); for (var i = 0; i &lt; _self.resourceJavascriptList.length; i++) &#123; // è·å–æœ¬åœ°ç¼“å­˜åˆ—è¡¨ è¾“å…¥åˆ°htmlä¸Š var scriptId = _self.resourceJavascriptList[i][&apos;id&apos;]; // æŠŠæˆ‘ä»¬çš„ åˆ—è¡¨ä¸­çš„jsæ–‡ä»¶ æ¸²æŸ“åˆ°é¡µé¢ // å»è¯»å–æœ¬åœ°æ–‡ä»¶ window.mDomUtils.addJavascriptByInline(scriptId); &#125; &#125;)(); //*** // æŠŠä»ç½‘ç»œè·å–åˆ°çš„javascript è¾“å…¥åˆ°htmlä¸Šï¼› // save localstroage &#125; &#125; else &#123; return function() &#123; alert(2); for (var i = 0; i &lt; resourceJavascriptList.length; i++) &#123; // è·å–æœ¬åœ°ç¼“å­˜åˆ—è¡¨ è¾“å…¥åˆ°htmlä¸Š var scriptId = resourceJavascriptList[i][&apos;scriptId&apos;]; // æŠŠæˆ‘ä»¬çš„åˆ—è¡¨ä¸­çš„jsæ–‡ä»¶ æ¸²æŸ“åˆ°é¡µé¢ // è¯»å–ç½‘ç»œä¸Šå¾—åˆ°çš„èµ„æº window.mDomUtils.addJavascriptByLink(scriptId, resourceJavascriptList[i][&apos;url&apos;]); &#125; &#125; //*** // æŠŠä»ç½‘ç»œè·å–åˆ°çš„javascript è¾“å…¥åˆ°htmlä¸Šï¼› // åŸå§‹æ–¹æ³•åŠ è½½javascriopt &#125; &#125; // å†™å…¥æœ¬åœ°localstorage&#125;;window.mDomUtils = &#123; // å†…è”æ–¹å¼æ·»åŠ javascript addJavascriptByInline: function(scriptId) &#123; var script = document.createElement(&apos;script&apos;); script.setAttribute(&apos;type&apos;, &apos;text/javascript&apos;); script.id = scriptId; var heads = document.getElementsByTagName(&apos;head&apos;); if (heads.lenght) &#123; heads[0].appendChild(script); &#125; else &#123; document.documentElement.appendChild(script); &#125; script.innerHTML = localStorage.getItem(scriptId); &#125;, // å¤–é“¾æ–¹å¼æ·»åŠ javascript addJavascriptByLink: function(scriptId, url) &#123; var script = document.createElemet(&apos;script&apos;); script.setAttribute(&apos;type&apos;, &apos;text/javascript&apos;); script.setAttribute(&apos;src&apos;, url); script.id = scriptId; var heads = document.getElementsByTagName(&apos;head&apos;); if (heads.length) &#123; heads[0].appendChild(script); &#125; else &#123; document.documentElement.appendChild(script); &#125; &#125;, // å¤–é“¾æ–¹å¼æ·»åŠ css addCssByLink: function(url) &#123; var doc = document; var link = doc.createElemet(&apos;link&apos;); link.setAttribute(&apos;type&apos;, &apos;text/css&apos;); link.setAttribute(&apos;rel&apos;, &apos;stylesheet&apos;); link.setAttribute(&apos;href&apos;, url); var heads = doc.getElementsByTagName(&apos;head&apos;); if (heads.length) &#123; heads[0].appendChild(link); &#125; else &#123; doc.documentElement.appendChild(link); &#125; &#125;, // å¤–é“¾æ–¹å¼æ·»åŠ css addCssByLink: function(cssString) &#123; var doc = document; var link = doc.createElemet(&apos;link&apos;); link.setAttribute(&apos;type&apos;, &apos;text/css&apos;); link.setAttribute(&apos;rel&apos;, &apos;stylesheet&apos;); if (link.stylesheet) &#123; // IEæ”¯æŒ link.stylesheet.cssText = cssString; &#125; else &#123; // w3c var cssText = doc.createTextNode(cssString); link.appendChild(cssText); &#125; var heads = doc.getElementsByTagName(&apos;head&apos;); if (heads.length) &#123; heads[0].appendChild(link); &#125; else &#123; doc.documentElement.appendChild(link); &#125; &#125;&#125;; è§‰å¾—æ¯”è¾ƒå¥½çš„ï¼Œä¸€ä¸ªæ˜¯å®ƒåˆ¤æ–­ IE çš„æ–¹æ³•ï¼Œåˆ©ç”¨äº†åªæœ‰ IE å¯ä»¥è¯†åˆ«çš„ç‰¹æ€§ã€‚å¦å¤–ä¸€ä¸ªæ˜¯å®ƒåˆ¤æ–­ localStorage ç¼“å­˜çš„å¤§å°ã€‚ è¿˜æœ‰ä¸€ä¸ªæ˜¯å®ƒåˆ©ç”¨äº†è‡ªæ‰§è¡Œå‡½æ•°æ¥å»åšå…¶å®åªç”¨å»åˆå§‹åŒ–ä¸€æ¬¡çš„å·¥ä½œã€‚æ¯”å¦‚åˆ¤æ–­æœ¬åœ°çš„ç¼“å­˜æ˜¯å¦æ˜¯éœ€è¦è·Ÿæ–°ï¼ˆæ ¹æ®ç‰ˆæœ¬å·ï¼‰ï¼Œè€Œä¸æ˜¯åšæˆä¸€ä¸ªå‡½æ•°æ¯æ¬¡å»æ‰§è¡Œä¸€æ¬¡ã€‚ ä¸å¥½çš„å°±æ˜¯ï¼Œå¯èƒ½æ˜¯å› ä¸ºç°åœºå†™ä»£ç ï¼Œéšæœºæƒ³çš„ï¼Œæ‰€ä»¥æœ‰äº›åœ°æ–¹å¯ä»¥å°è£…ï¼Œéƒ½æ²¡æœ‰å°è£…å¥½ã€‚","categories":[],"tags":[{"name":"çŸ¥è¯†ç‚¹","slug":"çŸ¥è¯†ç‚¹","permalink":"http://sevencai.github.io/tags/çŸ¥è¯†ç‚¹/"}]},{"title":"å°ç¨‹åºä½¿ç”¨ component ç»„ä»¶é‡æ„","slug":"å°ç¨‹åºä½¿ç”¨-component-ç»„ä»¶é‡æ„","date":"2018-03-05T13:40:58.000Z","updated":"2018-03-05T13:48:41.000Z","comments":true,"path":"2018/03/05/å°ç¨‹åºä½¿ç”¨-component-ç»„ä»¶é‡æ„/","link":"","permalink":"http://sevencai.github.io/2018/03/05/å°ç¨‹åºä½¿ç”¨-component-ç»„ä»¶é‡æ„/","excerpt":"","text":"ä¸–ç•Œä¸Šæ²¡æœ‰ä¸€è¹´è€Œå°±çš„äº‹æƒ…ï¼Œä»»ä½•äº‹æƒ…ï¼Œéƒ½æœ‰èµ·æºï¼Œå‘å±•å’Œæœªæ¥ã€‚å¦‚æœä½ è·Ÿä»–å°±å…³ï¼Œé‚£å°±é€‚åº”å®ƒï¼Œè€Œä¸è¦æŠ±æ€¨å®ƒçš„å˜åŒ–ï¼Œæˆ–è€…æŠ±æ€¨ä»–ä¸ºä»€ä¹ˆä¸ä¸€å¼€å§‹å°±è¿™ä¹ˆåšã€‚ å°è®°å°ç¨‹åºåæ¥å‡ºäº† component, çœ‹äº†çœ‹è‡ªå·±çš„ä»£ç ï¼Œè¿˜æ˜¯æœ€åˆçš„ template + class,å¿ƒé‡Œå¥½éš¾å—ã€‚ äºæ˜¯èŠ±äº†2å¤©æ—¶é—´é‡æ„äº†ã€‚è¿™æ®µæ—¶é—´æ²¡æœ‰äº§å“æ’æœŸï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘æ˜¯æ‹¿åˆ«çš„é¡¹ç›®çš„æ—¶é—´å»é‡æ„çš„ã€‚æ—¶é—´ç•¥ç´§å¼ ï¼Œä¸è¿‡è¿˜æ˜¯ä¸€ç‚¹ç‚¹çš„å®Œæˆäº†ã€‚ component ç›¸å½“äºä¸€ä¸ªå®Œæ•´çš„ç»„ä»¶ï¼Œä½ å¯ä»¥å¯¹è¿™ä¸ªç»„ä»¶å®šä¹‰ä¸åŒçš„å†…å®¹ã€‚æœ‰è‡ªå·±çš„äº‹ä»¶å’Œ data, è¿™ä¸ªå€’æ˜¯è·Ÿ vue å¾ˆåƒã€‚ ä½†æ˜¯æ³¨æ„ component ä¸­çš„ css é™¤äº†ç»§æ‰¿å±æ€§ï¼ˆh1,emï¼‰ç­‰ä»¥å¤–ï¼Œå…¶ä»–çš„æ ·å­å¿…é¡»éƒ½å†™å…¥ component ä¸­ã€‚å¦‚æœä½ ä¸æƒ³åšè¿™ä»¶äº‹ï¼Œå°±æŠŠ app.wxss å¼•å…¥åˆ° component ä¸­å§ã€‚ï¼ˆè™½ç„¶æˆ‘ä¹Ÿå¾ˆä¸æƒ…æ„¿ï¼‰ ç”¨æ³•ç”¨ Component({})å£°æ˜ã€‚å†…éƒ¨å¯ä»¥æœ‰è‡ªå·±çš„ data, methods, behaviors,è¿˜æœ‰ç±»ä¼¼äº vue çš„ attach, ready ç­‰å‡½æ•°ã€‚ 123456789101112131415161718import rechargeItem from 'behaviors/jump-to-order'Component(&#123; behaviors: [rechargeItem], properties: &#123; recommendList: &#123; type: Array, value: [] &#125; &#125;, methods: &#123; bindClickEvent() &#123; &#125; &#125;&#125;) behaviors å¯ä»¥ç†è§£ä¸º mixins, å¤šä¸ªç»„ä»¶éƒ½å¯èƒ½ç”¨åˆ°åŒæ ·çš„å†…å®¹ï¼Œå°±æŠŠå®ƒæŠ½ç¦»ä¸º behaviors å§ã€‚ æ¯”å¦‚ä¸Šé¢ï¼Œè°ƒåˆ°è®¢å•é¡µå¯ä»¥ä»å¾ˆå¤š component è¿‡æ¥ï¼Œæ¯”å¦‚ æ¨èï¼Œæœç´¢ã€‚é‚£ä¹ˆå°±æŠ½ç¦»æˆä¸€ä¸ª behavior, ç”¨åˆ°çš„æ—¶å€™å¼•å…¥è¿›æ¥å³å¯ã€‚ æ³¨æ„ä»»ä½•ä¸€ä¸ª component éƒ½éœ€è¦å£°æ˜å®ƒæ˜¯ä¸€ä¸ª component, æˆ‘çŒœæµ‹æ˜¯è¦è¯­ä¹‰æ›´å¥½å§ï¼Œå…å¾—è·Ÿ page ææ··äº†(ä½†æ˜¯ component å’Œ page å£°æ˜å°±ä¸ä¸€æ ·ï¼Œå…¶å®æ²¡å¿…è¦å•ç‹¬å†åœ¨ json ä¸­å£°æ˜ä¸‹ï¼Ÿ)ã€‚component ä¸éœ€è¦å†åœ¨ app.json é‡Œé¢å£°æ˜ï¼Œå› ä¸ºå®ƒä¸æ˜¯ä¸€ä¸ª pageã€‚ 123&#123; &quot;component&quot;: true&#125; ç„¶åéœ€è¦å¼•å…¥è¿™ä¸ªç»„ä»¶çš„åœ°æ–¹ï¼Œè¿™æ ·å¼•å…¥ï¼š 12345&#123; &quot;usingComponents&quot;: &#123; &quot;recommend&quot;: &quot;../page_component/recommend/recommend&quot;, &#125;&#125; ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥å¼•å…¥å³å¯ï¼š1&lt;recommend recommendList=&quot;&#123;&#123;recommendList&#125;&#125;&quot;&gt;&lt;/recommend&gt; è¿™é‡Œçš„ recommendList ç±»ä¼¼äº vue çš„ props, å¯ä»¥ç”¨äºä»çˆ¶ç»„ä»¶ï¼ˆpageï¼‰ä¼ é€’å†…å®¹åˆ°å­ç»„ä»¶ã€‚ ç„¶åå°±å†åŸå…ˆçš„ properties ä¸­æ¥å—å³å¯ã€‚ä¹Ÿå¯ä»¥ç”¨ this.dataè®¿é—®åˆ°ã€‚ æ€»ç»“å…¶å®æ˜¯ä¸æƒ³å†™è¿™ä¸ªæ–‡ç« çš„çš„ï¼Œå› ä¸ºæ–‡ç« æœ¬èº«æ²¡æœ‰å•¥å¤ªå¤§çš„æ„ä¹‰ï¼Œè¿™äº›å¥½å¥½å­¦ä¹ å®˜ç½‘éƒ½å¯ä»¥çŸ¥é“çš„ã€‚ä½†æ˜¯ä¸å†™çš„è¯æ€»è§‰å¾—è‡ªå·±è¿™ä¸¤å¤©æ²¡å¹²å•¥ã€‚ä½†å®é™…ä¸Šï¼Œæˆ‘è§‰å¾—æˆ‘è‡ªå·±åšçš„äº‹æƒ…æœ‰æ„ä¹‰ï¼Œå› ä¸ºä»£ç æ›´å¥½äº†å‘€ã€‚è€Œä¸”å¯è¯»æ€§ä¹Ÿæ›´å¼ºäº†ï¼Œæ˜¯ component çš„ï¼Œtemplateçš„ï¼Œpageçš„ï¼Œapi modules çš„ï¼Œéƒ½æ¸…æ¸…æ¥šæ¥šäº†ã€‚å¼€å¿ƒã€‚ ä¼°è®¡éšåçš„ä¸€æ®µæ—¶é—´éƒ½ä¸ä¼šå†ç¢°å°ç¨‹åºäº†ï¼Œä¸‹æ¬¡è®²è®²å­¦ä¹ åˆ°çš„ vue æºç çš„å†…å®¹å§ã€‚","categories":[],"tags":[{"name":"å°ç¨‹åº","slug":"å°ç¨‹åº","permalink":"http://sevencai.github.io/tags/å°ç¨‹åº/"}]},{"title":"å‡½æ•°ç«‹å³è¡¨è¾¾å¼æ•´ç†","slug":"å‡½æ•°ç«‹å³è¡¨è¾¾å¼æ•´ç†","date":"2018-02-27T14:09:32.000Z","updated":"2018-02-28T03:22:57.000Z","comments":true,"path":"2018/02/27/å‡½æ•°ç«‹å³è¡¨è¾¾å¼æ•´ç†/","link":"","permalink":"http://sevencai.github.io/2018/02/27/å‡½æ•°ç«‹å³è¡¨è¾¾å¼æ•´ç†/","excerpt":"","text":"æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯ Javascript çš„ç«‹å³æ‰§è¡Œå‡½æ•°çš„æ¯”è¾ƒä¸æ€»ç»“, åˆ—ä¸¾äº†ç°åœ¨å¤§éƒ¨åˆ†çš„ç«‹å³æ‰§è¡Œå‡½æ•°çš„å†™æ³•ï¼Œå¹¶ä¸”åˆ†æäº†é”™è¯¯çš„åŸå› å’Œæ­£ç¡®çš„åŸå› ã€‚ é—®é¢˜æ¥çœ‹å‡ ç§å†™æ³•ï¼Œä½ èƒ½åˆ†è¾¨å‡ºæ¥ï¼Œå“ªä¸ªæ˜¯æ­£ç¡®çš„ï¼Œå“ªä¸ªæ˜¯é”™è¯¯çš„å—ï¼Ÿ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657// å†™æ³•1function a() &#123; console.log(&quot;a&quot;)&#125;();// å†™æ³•2(function b() &#123; console.log(&quot;b&quot;)&#125;());// å†™æ³•3ï¼ˆfunction c() &#123; console.log(&quot;c&quot;)&#125;)();// å†™æ³•4var d = function d() &#123; console.log(&quot;d&quot;)&#125;(d)()// å†™æ³•5var e = function e() &#123; console.log(&quot;e&quot;)&#125;;(e)()// å†™æ³•6!function f() &#123; console.log(&quot;f&quot;)&#125;();// å†™æ³•7+function g() &#123; console.log(&quot;g&quot;)&#125;;// å†™æ³•8var h = function () &#123; console.log(&quot;h&quot;)&#125;();// å†™æ³•9(a === 1) &amp;&amp; function () &#123; /* ... */ &#125; ();// å†™æ³• 101, function () &#123; /* ... */ &#125;();// å†™æ³• 11function ï¼ˆï¼‰&#123; console.log(&quot;a&quot;)&#125;();// å†™æ³• 12function j() &#123; console.log(&quot;j&quot;)&#125;(1) ä¸Šé¢çš„å†™æ³•ä¸­ï¼Œæœ‰å‡ ç§æ˜¯é”™è¯¯âŒçš„ï¼Œä½ æ‰¾å‡ºæ¥äº†å—ï¼Ÿ è§£æé¦–å…ˆåŸºæœ¬çŸ¥è¯†æ˜¯ï¼Œå£°æ˜ javascript çš„å‡½æ•°æœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯è¯­å¥ï¼ˆå‡½æ•°å£°æ˜ï¼‰çš„å½¢å¼å’Œè¡¨è¾¾å¼çš„å½¢å¼ï¼Œå…¶ä¸­è¯­å¥çš„å½¢å¼æ˜¯æœ‰å˜é‡æå‡çš„è¯´æ³•çš„ï¼Œè€Œè¡¨è¾¾å¼ä¸ä¼šï¼š12345// å‡½æ•°å£°æ˜function f() &#123;&#125;// è¡¨è¾¾å¼var f = function f() &#123;&#125; å¯¹äº Javscript å¼•æ“è€Œè¨€ï¼Œ å¦‚æœ function å…³é”®å­—å‡ºç°åœ¨è¡Œé¦–ï¼Œä¼šè¢«è§£ææˆå‡½æ•°å£°æ˜çš„å½¢å¼ã€‚å‡½æ•°å£°æ˜å¿…é¡»åŒ…æ‹¬ ï¼š å…³é”®è¯ function, å‡½æ•°åï¼Œå½¢å‚ï¼Œå‡½æ•°ä½“ã€‚ ç¬¬ä¸€ç§ï¼ˆå†™æ³•1ï¼‰âŒï¼Œå› ä¸ºç›´æ¥å¼€å¤´å‡ºç° function å…³é”®å­—ï¼Œ æœ‰å‡½æ•°åï¼Œæµè§ˆå™¨ä¼šè®¤ä¸ºè¿™æ˜¯å‡½æ•°å£°æ˜ï¼Œä¸‹é¢æ˜¯å‡½æ•°çš„å®šä¹‰ï¼Œä½†æ˜¯å®ƒåˆæ˜¯ä»¥åœ†æ‹¬å·ç»“å°¾ï¼Œæ‰€ä»¥å°±æŠ¥é”™äº†ã€‚ å®é™…ä¸Šå†™æ³•1ç­‰åŒäºï¼š1234function a() &#123; // ...&#125;() è¿™ä¸ªç©ºçš„()é‡Œé¢æ²¡æœ‰æ“ä½œç¬¦ï¼Œæ‰€ä»¥æŠ¥äº†ç›¸åº”çš„é”™ã€‚æŠ¥é”™çš„å†…å®¹æ˜¯Uncaught SyntaxError: Unexpected token )ã€‚ è€Œç¬¬11ç§ï¼ˆå†™æ³•11ï¼‰ï¼Œæµè§ˆå™¨ä¹Ÿè®¤ä¸ºæ˜¯å‡½æ•°å£°æ˜çš„å½¢å¼ï¼Œä½†æ˜¯å´æ²¡æœ‰æ‰¾åˆ°å‡½æ•°åï¼Œæ‰€ä»¥ä¹Ÿæ˜¯é”™è¯¯âŒçš„ã€‚æŠ¥é”™æ˜¯ï¼šVM143:1 Uncaught SyntaxError: Unexpected token ( ã€‚æ‰€ä»¥è¯´è¿™ä¸¤ç§ç±»ä¼¼ï¼Œä½†æ˜¯æŠ¥é”™çš„åŸå› å¹¶ä¸ç›¸åŒã€‚ å¯¹äºå†™æ³•12ï¼Œ å®é™…ä¸Šç­‰åŒäº1234function j() &#123; console.log(&quot;j&quot;)&#125;(1) æ‰€ä»¥å®é™…ä¸Šï¼Œå®ƒä¸ä¼šæŠ¥é”™ï¼Œå› ä¸º()æœ‰æ“ä½œç¬¦ï¼Œä½†æ˜¯ j å‡½æ•°ä¹Ÿä¸ä¼šè¢«æ‰§è¡Œï¼Œ æœ€åè¿”å›çš„æ˜¯ 1ï¼Œ å› ä¸ºåªæœ‰ (1) æ‰§è¡Œäº†ã€‚ é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆ2ï¼Œ3å†™æ³•æ˜¯æ­£ç¡®âœ…çš„å‘¢ï¼Ÿå› ä¸ºå½“æµè§ˆå™¨è§£æç¢°åˆ°äº†()æ—¶ï¼Œ()é‡Œé¢ä¸èƒ½åŒ…å«å‡½æ•°å£°æ˜ï¼Œæ‰€ä»¥æµè§ˆå™¨ä¼šæŠŠè¿™ä¸ªè§£ææˆå‡½æ•°è¡¨è¾¾å¼ã€‚å½“å®ƒæ˜¯å‡½æ•°è¡¨è¾¾å¼çš„æ—¶å€™ï¼Œè‡ªç„¶å°±ç«‹å³æ‰§è¡Œäº†ã€‚å¹¶ä¸”ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚ å› æ­¤ä¸‹é¢ä¸¤ç§éƒ½æ˜¯æ­£ç¡®çš„ã€‚12(function()&#123; /* ... */ &#125;());(function()&#123; /* ... */ &#125;)(); æ‰€ä»¥å¦‚æœæˆ‘ä»¬è¦è®©å®ƒå¯ä»¥è¢«æµè§ˆå™¨è¯†åˆ«ï¼Œé‚£ä¹ˆå°±è®©æµè§ˆå™¨çŸ¥é“å®ƒæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼å§ã€‚ å› æ­¤6ï¼Œ7ï¼Œ9ï¼Œ10ä»–ä»¬éƒ½æ˜¯æ­£ç¡®çš„ã€‚9,10è¿™ä¸¤ç§å†™æ³•ï¼Œå‰é¢ä¸€ä¸ªæ˜¯è¡¨è¾¾å¼ï¼Œæµè§ˆå™¨è‡ªç„¶ä¹Ÿè®¤ä¸ºåé¢ä¸€ä¸ªä¹Ÿæ˜¯è¡¨è¾¾å¼ã€‚ è¿™ç§ç§°ä¸ºâ€œç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼â€ï¼ˆImmediately-Invoked Function Expressionï¼‰ï¼Œç®€ç§° IIFEã€‚ ç„¶è€Œå®é™…ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå«ç«‹å³æ‰§è¡Œå‡½æ•°ã€‚ ä½†æ˜¯æ³¨æ„ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼åé¢ä¸€å®šè¦æ˜¯æœ‰åˆ†å·ï¼Œå¦‚ä¸‹ï¼š1234!function () &#123; /* ... */ &#125;();~function () &#123; /* ... */ &#125;();-function () &#123; /* ... */ &#125;();+function () &#123; /* ... */ &#125;(); å¦‚æœæ²¡æœ‰åˆ†å·ï¼Œæµè§ˆå™¨åˆä¼šé”™è¯¯çš„è¯†åˆ«äº†ã€‚è®¤ä¸ºç¬¬äºŒè¡Œæ˜¯ç¬¬ä¸€è¡Œçš„å‚æ•°ã€‚æ‰€ä»¥å†™æ³•4æ­£ç¡®ï¼Œå†™æ³•5é”™è¯¯âŒï¼Œ è¿™ä¸ªä¸€å®šè¦æ³¨æ„äº†ã€‚ ä½œç”¨ç«‹å³æ‰§è¡Œå‡½æ•°çš„ä½œç”¨ï¼Œæœ€å¸¸è§çš„æ˜¯é…åˆé—­åŒ…çš„ä½¿ç”¨ï¼Œæ¥ä¿å­˜å‡½æ•°å±€éƒ¨çŠ¶æ€ã€‚å› ä¸ºç«‹å³æ‰§è¡Œå‡½æ•°ä¹Ÿèƒ½å¤Ÿä¼ å‚æ•°ã€‚æ‰€ä»¥æœ‰äº†æœ€ç»å…¸çš„ï¼š1234567for(var i = 0; i &lt; 5; i++) &#123; (function (i) &#123; setTimeout(() =&gt; &#123; console.log(&quot;i&quot;,i) &#125;,0) &#125;)(i)&#125; è¿™æ ·å¯ä»¥åˆ†åˆ«æ‰“å°å‡º i ä» 1-5ï¼Œ ä½†æ˜¯å¦‚æœä½ åƒä¸‹é¢è¿™æ ·å†™ï¼Œå°±ä¼šæ‰“å°å‡º5ä¸ª5äº†ã€‚12345for(var i = 0; i &lt; 5; i++) &#123; setTimeout(() =&gt; &#123; console.log(&quot;i&quot;,i) &#125;,0)&#125; æ›´ä¸ºç»å…¸çš„ä¸€ä¸ªä¾‹å­å¦‚ä¸‹, ä½ æƒ³è¦å¯¹æ¯ä¸ª a å…ƒç´ éƒ½ç»‘å®šä¸€ä¸ªä¸åŒçš„äº‹ä»¶ï¼Œè¿™é‡Œ log å‡º i çš„å€¼ã€‚ä½†æ˜¯å´å¾—ä¸åˆ°ä½ æƒ³è¦çš„ç»“æœï¼Œå› ä¸ºåœ¨æˆ‘ä»¬æ‰§è¡Œç‚¹å‡»äº‹ä»¶çš„æ—¶å€™ï¼Œ i å·²ç»è¢«æ‰§è¡Œå®Œï¼Œä¸º5äº†ã€‚æ‰€ä»¥å¯¹äº a0, a1,a2,a3éƒ½æ²¡æœ‰è¢«ç»‘å®šç›¸åº”çš„äº‹ä»¶ã€‚1234567var elems = document.getElementsByTagName( &apos;a&apos; );for ( var i = 0; i &lt; elems.length; i++ ) &#123; elems[i].addEventListener( &apos;click&apos;, function(e)&#123; console.log( &apos;i,&apos; + i ); &#125;, &apos;false&apos; );&#125; æˆ‘ä»¬ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°å’Œé—­åŒ…æ¥æ”¹å†™ä¸‹ï¼š123456789var elems = document.getElementsByTagName( &apos;a&apos; );for (var i = 0; i &lt; eles.length; i++) &#123; (function (i) &#123; elems[i].addEventListener( &apos;click&apos;, function(e)&#123; console.log( &apos;i,&apos; + i ); &#125;, &apos;false&apos; ); &#125;)(i)&#125; è¿™æ ·å°± ok äº†ã€‚æ³¨æ„ i ä¸€å®šè¦åœ¨å¤–éƒ¨æ‹¬å·å’Œé‡Œé¢çš„æ‹¬å·éƒ½ä¼ é€’è¿›å»ï¼Œå¦åˆ™ i ä¸ä¼šè¢«é”ä½ã€‚ ç«‹å³æ‰§è¡Œå‡½æ•°å½“ç„¶è¿˜æœ‰åˆ«çš„å¥½å¤„ï¼Œç»å¸¸è§çš„å°±æ˜¯å‡å°‘å…¨å±€å˜é‡çš„å®šä¹‰ï¼Œæ¯”å¦‚ jquery çš„å®šä¹‰ï¼š12345(function( $ ) &#123; $.fn.myPlugin = function() &#123; var a = 1; &#125;;&#125;)( jQuery ); è¿™æ ·å‡å°‘äº†å…¨å±€å˜é‡ï¼Œæ¯ä¸ªæ’ä»¶è‡ªå·±ç”¨è‡ªå·±çš„å˜é‡ï¼Œä»¥é˜²æ­¢å†²çªã€‚æ€§èƒ½ä¹Ÿä¼šå¥½äº›ã€‚ æ€»ç»“ä¸»è¦æ˜¯ä»¥å‰å…¶å®è¿™äº›çŸ¥è¯†ç‚¹éƒ½æ˜¯çŸ¥é“çš„ï¼Œä½†æ˜¯æ²¡æœ‰ç³»ç»Ÿçš„æ€»ç»“æˆ–è€…æ€è€ƒè¿‡ï¼Œè¿™æ¬¡ç®—æ˜¯æœ‰ä¸ªç¨å¾®æ•´ä½“ä¸€ç‚¹çš„è®¤è¯†ã€‚","categories":[],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"GBK, GB2312, UTF-8, Unicode,encodeURI, escapeçš„åŒºåˆ«å’Œè”ç³»","slug":"GBK-GB2312-UTF-8-Unicode-encodeURI-escapeçš„åŒºåˆ«å’Œè”ç³»","date":"2018-02-27T04:00:04.000Z","updated":"2018-02-28T03:09:30.000Z","comments":true,"path":"2018/02/27/GBK-GB2312-UTF-8-Unicode-encodeURI-escapeçš„åŒºåˆ«å’Œè”ç³»/","link":"","permalink":"http://sevencai.github.io/2018/02/27/GBK-GB2312-UTF-8-Unicode-encodeURI-escapeçš„åŒºåˆ«å’Œè”ç³»/","excerpt":"","text":"æœ¬ç¯‡ç›®çš„ä¸»è¦æ˜¯ææ¸…æ¥šUTF-8, GBK, Unicode, ASCIIç ï¼ŒUnicode, escape, encodeURIComponent, encodeURI ç¼–ç ç­‰ç­‰çš„åŒºåˆ«å’Œè”ç³»ã€‚ æ–‡ç« èµ·æºäº‹æƒ…èµ·æºæ˜¯ï¼Œä»Šå¤©åœ¨åšå°ç¨‹åºçš„æ—¶å€™ï¼Œå‘ç°æˆ‘è¯·æ±‚ä¸šåŠ¡æ¥å£æ—¶ï¼Œä¸šåŠ¡æ¥å£è¿”å›çš„æ˜¯gbkç¼–ç ã€‚ ç„¶åè¿™ä¸ªåœ¨å°ç¨‹åºä¸­ä¸æ”¯æŒï¼Œä¼šè¿”å›å†…å®¹å¦‚ï¼šfail response data convert to UTF8 fail, åœ¨ pc ç«¯åŠ android ç«¯è¡¨ç°æ­£å¸¸ï¼Œä½†æ˜¯åœ¨ ios ä¸‹ä¼šè¿”å›æ­¤é”™è¯¯ç ã€‚ äºæ˜¯å¾ˆä¸å¥½æ„æ€çš„æ‰¾åˆ°äº†ä¸šåŠ¡æ–¹çš„åŒäº‹ï¼Œçœ‹èƒ½ä¸èƒ½æŠŠè¿”å›çš„å†…å®¹å˜æˆæ ‡å‡†çš„ utf8 æ—  bomç¼–ç æ ¼å¼ã€‚è¯è¯´ï¼Œæˆ‘é‡åˆ°çš„è¿™ä¸ªåŒäº‹çœŸçš„å¥½ nice, ä»¥å‰è·¨éƒ¨é—¨çš„åˆä½œæ²¡æœ‰1-2å¤©ä¸‹ä¸æ¥ï¼Œè¿™ä¸ªåŒäº‹æ•ˆç‡æ¯”è¾ƒé«˜ï¼Œæ¯æ¬¡æœ‰é—®é¢˜æ‰¾åˆ°ä»–ï¼Œéƒ½èƒ½å¤Ÿå¾ˆå¿«çš„åé¦ˆç»™æˆ‘ï¼ˆæ„Ÿæ©ï¼‰ã€‚ç„¶åä»–å°±è·Ÿæˆ‘è¯´äº†ä¸‹é¢è¿™æ ·ä¸€å¥è¯ï¼š ä½ è¯·æ±‚å‚æ•°ç”¨gbkç¼–ç  æˆ‘è¿”å›ç»™ä½ utf8ä½ çœ‹å¦‚ä½•ï¼Ÿ å¤§æ¦‚æ˜¯éƒ½ç»Ÿä¸€ç”¨ utf8 å¯¹äºä»–æ”¹åŠ¨æ¯”è¾ƒå¤§ï¼Œäºæ˜¯ä»–æå‡ºæˆ‘è¯·æ±‚çš„æ—¶å€™ç”¨ gbk ç¼–ç ã€‚äºæ˜¯æˆ‘æŠŠè¿™æ®µè¯é”™è¯¯ç†è§£ä¸ºäº†ï¼š ä½ è¯·æ±‚çš„æ—¶å€™ï¼Œç”¨ gbk ç¼–ç è¯·æ±‚ï¼Œæˆ‘è¿”å›ç»™ä½  utf8ã€‚ ä¹Ÿå°±æ˜¯è¯´æˆ‘ä¼šåœ¨è¯·æ±‚ header é‡ŒåŠ å…¥ charset=gbk, ä»–è¿”å›ç»™æˆ‘ utf8 ç¼–ç å†…å®¹å°±å¥½ã€‚ ä½†å®é™…ä¸ŠåŒäº‹è¿™å¥è¯çš„æ„æ€æ˜¯ï¼š æŠŠè°ƒç”¨ä»–æ¥å£çš„è¯·æ±‚å‚æ•°ç”¨gbkç¼–ç ï¼Œè€Œä¸æ˜¯åœ¨è¯·æ±‚å¤´é‡ŒåŠ  headerã€‚æˆ‘æ‰äº†å‚æ•°ä¸¤ä¸ªå­—ã€‚ å› ä¸ºæˆ‘ä»¬ç»„å†…çš„å‰ç«¯ç»Ÿä¸€ç”¨çš„éƒ½æ˜¯ utf8, ç¼–ç éƒ½æ˜¯ç”¨ encodeURI, encodeURIComponent, ä»¥å‰ä¹Ÿæ²¡æœ‰ç”¨è¿‡æŠŠå‚æ•°åš gbk ç¼–ç çš„è¿™ç§æ–¹å¼ï¼Œå¯¼è‡´äº†æˆ‘è®¤ä¸ºæ˜¯åœ¨è¯·æ±‚å¤´é‡Œè¯·æ±‚ç”¨ gbkã€‚ å¹¶ä¸”å¯¹ encodeURI ç­‰ç­‰çš„ä¸æ·±å…¥äº†è§£ï¼Œå¯¼è‡´äº†æˆ‘æµªè´¹äº†åŒäº‹çš„æ—¶é—´ã€‚ encodeURI, encodeURIComponent éƒ½æ˜¯é’ˆå¯¹ utf-8 çš„ç¼–ç ï¼Œ ä¸èƒ½å¤ŸæŒ‡å®šç¼–ç æ–¹å¼ã€‚ gbk ç¼–ç åœ¨ github ä¸Šæœ‰è¿™ç§æˆç†Ÿçš„ npmã€‚ å¤§æ¦‚çš„æ€è·¯æ˜¯,å¦‚æœæ˜¯ ASCII ç ï¼Œç›´æ¥ encodeï¼Œ åˆ¤æ–­ä¸æ˜¯ ASCII ç åï¼Œå†è¿›è¡Œ GBK çš„æ¯”å¯¹ç¼–ç ã€‚123456789101112131415export const encodeUrlGbk = (str) =\\&gt; &#123; return str &amp;&amp; str.replace(/./g,function (a) &#123; var code = a.charCodeAt(0); if (_isAscii(code)) &#123; return encodeURIComponent(a); &#125; else &#123; var key = code.toString(16); if (key.length !== 4) &#123; key = (&apos;000&apos; \\+ key).match(/....$/)\\[0\\]; &#125; return _charHash.U2Ghash\\[key\\] || a; &#125; &#125;);&#125; è™½ç„¶é—®é¢˜è§£å†³äº†ï¼Œä½†æ˜¯å‘ç°äº†è‡ªå·±å¯¹è¿™å—æ˜¯ä¸æ˜¯æ ¹æœ¬æ²¡æœ‰å¼„æ¸…æ¥šï¼Œä»Šå¤©ä»”ç»†çš„æŸ¥äº†èµ„æ–™ï¼Œä»æ–°å­¦ä¹ å’Œè®¤è¯†ä¸‹ï¼Œæƒ³æŠŠè¿™äº›å†…å®¹éƒ½äº†è§£å¹¶ä¸”æ¯”è¾ƒæ¸…æ¥šã€‚ escape, encodeURIComponent, encodeURI çš„åŒºåˆ«å’Œè”ç³»å¦‚æœä½ æƒ³ç›´æ¥çœ‹ç»“è®ºï¼Œå¯ä»¥è·³è¿‡ä¸‹éƒ¨åˆ†å¼•ç”¨å†…å®¹ã€‚ escape() å‡½æ•°å¯å¯¹å­—ç¬¦ä¸²è¿›è¡Œç¼–ç ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æ‰€æœ‰çš„è®¡ç®—æœºä¸Šè¯»å–è¯¥å­—ç¬¦ä¸²ã€‚ è¯¥æ–¹æ³•ä¸ä¼šå¯¹ ASCII å­—æ¯å’Œæ•°å­—è¿›è¡Œç¼–ç ï¼Œä¹Ÿä¸ä¼šå¯¹ä¸‹é¢è¿™äº› ASCII æ ‡ç‚¹ç¬¦å·è¿›è¡Œç¼–ç ï¼š * @ - _ + . / ã€‚å…¶ä»–æ‰€æœ‰çš„å­—ç¬¦éƒ½ä¼šè¢«è½¬ä¹‰åºåˆ—æ›¿æ¢ã€‚ä»–çš„è§£ç ä¸º unescapeã€‚ ECMAScript v3 åå¯¹ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œåº”ç”¨ä½¿ç”¨ decodeURI() å’Œ decodeURIComponent() æ›¿ä»£å®ƒã€‚ encodeURI() å‡½æ•°å¯æŠŠå­—ç¬¦ä¸²ä½œä¸º URI è¿›è¡Œç¼–ç ã€‚ è¯¥æ–¹æ³•ä¸ä¼šå¯¹ ASCII å­—æ¯å’Œæ•°å­—è¿›è¡Œç¼–ç ï¼Œä¹Ÿä¸ä¼šå¯¹è¿™äº› ASCII æ ‡ç‚¹ç¬¦å·è¿›è¡Œç¼–ç ï¼š - _ . ! ~ * â€˜ ( ) ã€‚ è¯¥æ–¹æ³•çš„ç›®çš„æ˜¯å¯¹ URI è¿›è¡Œå®Œæ•´çš„ç¼–ç ï¼Œå› æ­¤å¯¹ä»¥ä¸‹åœ¨ URI ä¸­å…·æœ‰ç‰¹æ®Šå«ä¹‰çš„ ASCII æ ‡ç‚¹ç¬¦å·ï¼ŒencodeURI() å‡½æ•°æ˜¯ä¸ä¼šè¿›è¡Œè½¬ä¹‰çš„ï¼š;/?:@&amp;=+$,# å¦‚æœ URI ç»„ä»¶ä¸­å«æœ‰åˆ†éš”ç¬¦ï¼Œæ¯”å¦‚ ? å’Œ #ï¼Œåˆ™åº”å½“ä½¿ç”¨ encodeURIComponent() æ–¹æ³•åˆ†åˆ«å¯¹å„ç»„ä»¶è¿›è¡Œç¼–ç ã€‚ encodeURIComponent() å‡½æ•°å¯æŠŠå­—ç¬¦ä¸²ä½œä¸º URI ç»„ä»¶è¿›è¡Œç¼–ç ã€‚ è¯¥æ–¹æ³•ä¸ä¼šå¯¹ ASCII å­—æ¯å’Œæ•°å­—è¿›è¡Œç¼–ç ï¼Œä¹Ÿä¸ä¼šå¯¹è¿™äº› ASCII æ ‡ç‚¹ç¬¦å·è¿›è¡Œç¼–ç ï¼š - _ . ! ~ * â€˜ ( ) ã€‚ï¼ˆè¿™ç‚¹ä¸ encodeURI ç›¸åŒï¼‰ å…¶ä»–å­—ç¬¦ï¼ˆæ¯”å¦‚ ï¼š;/?:@&amp;=+$,# è¿™äº›ç”¨äºåˆ†éš” URI ç»„ä»¶çš„æ ‡ç‚¹ç¬¦å·ï¼‰ï¼Œéƒ½æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªåå…­è¿›åˆ¶çš„è½¬ä¹‰åºåˆ—æ›¿æ¢çš„ã€‚ ï¼ˆè¿™ç‚¹ä¸ encodeURIComponent ä¸åŒï¼‰ å…³äºè¿™ä¸‰ä¸ªå‡½æ•°æ€»ç»“ä¸‹å¦‚ä¸‹ï¼š å¦‚æœæ˜¯è·Ÿurlç¼–ç æœ‰å…³ç³»çš„ï¼Œå…ˆå¿˜æ‰ escape è¿™ä¸ªå‡½æ•°ï¼Œä»–è·Ÿ url ç¼–ç æ¯«æ— å…³ç³»ï¼Œå®ƒåªæ˜¯èƒ½å¤Ÿè¾¾åˆ°ç±»ä¼¼äº URL Encode è¿™ç±»ä¼¼çš„æ•ˆæœï¼Œä½†æ˜¯å®ƒå¯¹äºé ASCII å­—ç¬¦ä½¿ç”¨äº†ä¸€ç§éæ ‡å‡†çš„å®ç°ï¼Œæ¯”å¦‚æŸäº›æ±‰å­—ä¼šè¢«ç¼–ç æˆ %uxxxx è¿™ç§å½¢å¼ï¼Œ åœ¨å°ç¨‹åºä¸­ï¼Œurlä½¿ç”¨ escape, ä¼šæŠ¥é”™ï¼š fail request:fail _invalid url è¿™ç±»ä¼¼çš„æ¶ˆæ¯ã€‚å¹¶ä¸” W3C æŠŠè¿™ä¸ªå‡½æ•°åºŸå¼ƒäº†ï¼Œèƒ½ä¸ä½¿ç”¨å°½é‡ä¸è¦å»ä½¿ç”¨ å¯¹äº url çš„ç¼–ç ï¼Œå°±ä½¿ç”¨ encodeURI åŠ encodeURIComponent, ä»–ä»¬éƒ½æ˜¯ä¸ºäº† url ç¼–ç è€Œè®¾è®¡ï¼Œä¸åŒçš„åœ°æ–¹åœ¨äº encodeURI ç”¨äºå¯¹å®Œæ•´çš„ url è¿›è¡Œç¼–ç ï¼Œäºæ˜¯URLä¸­çš„åŠŸèƒ½å­—ç¬¦ï¼Œæ¯”å¦‚&amp;, ?, /, =ç­‰ç­‰è¿™äº›å¹¶ä¸ä¼šè¢«è½¬ä¹‰ï¼Œ è€Œ encodeURIComponent è¢«è®¾è®¡ç”¨æ¥å¯¹æŸæ®µ queryï¼ˆæŸä¸ªå€¼ï¼‰ ç¼–ç ã€‚æ‰€ä»¥æ­£ç¡®ç”¨æ³•æ˜¯ encodeURIComponent ç»å¸¸ç”¨äºå¯¹æ¯ä¸ª key value è¿›è¡Œåˆ†åˆ«ç¼–ç ã€‚ å»¶ä¼¸é˜…è¯»-escape, encodeURIçš„ç¼–ç æ–¹å¼-ç™¾åˆ†å·ç¼–ç  ç™¾åˆ†å·ç¼–ç ï¼ˆè‹±è¯­ï¼šPercent-encodingï¼‰, ä¹Ÿç§°ä½œURLç¼–ç ï¼ˆè‹±è¯­ï¼šURL encodingï¼‰, æ˜¯ç‰¹å®šä¸Šä¸‹æ–‡çš„ç»Ÿä¸€èµ„æºå®šä½ç¬¦ (URL)çš„ç¼–ç æœºåˆ¶. å®é™…ä¸Šä¹Ÿé€‚ç”¨äºç»Ÿä¸€èµ„æºæ ‡å¿—ç¬¦ï¼ˆURIï¼‰çš„ç¼–ç ã€‚ä¹Ÿç”¨äºä¸ºâ€application/x-www-form-urlencodedâ€ MIMEå‡†å¤‡æ•°æ®, å› ä¸ºå®ƒç”¨äºé€šè¿‡HTTPçš„è¯·æ±‚æ“ä½œ(request)æäº¤HTMLè¡¨å•æ•°æ®ã€‚ å¯¹äº escape ä»¥åŠ encodeURI éƒ½æ˜¯å±äº percent-encodingã€‚å·®ä¸å¤šéƒ½æ˜¯æŠŠ URI éæ³•å­—ç¬¦è½¬åŒ–ä¸ºåˆæ³•å­—ç¬¦ï¼Œ è½¬åŒ–ä»¥åæœ‰ %, æ‰€ä»¥æˆ‘çŒœæ‰å« percent-encoding å§ï¼Œå“ˆå“ˆã€‚ é¦–å…ˆ escape å’Œ encodeURI åœ¨å¤„ç† 0xff ä»¥å†…çš„å†…å®¹æ—¶ï¼Œéƒ½æ˜¯ç›¸åŒçš„ã€‚ä¹Ÿå°±æ˜¯è¯´æ˜¯ %xx, è¿™é‡Œçš„ xx æ˜¯å­—ç¬¦çš„ 16è¿›åˆ¶ unicode (æ­¤æ—¶çš„ unicode === utf8å€¼ï¼Œ æ‰€ä»¥ escape çš„å€¼ä¹Ÿç­‰äº encodeURI çš„å€¼)ã€‚ ä½† escape åœ¨å¤„ç† 0xff ä¹‹å¤–çš„æ—¶å€™ï¼Œ ç›´æ¥ä½¿ç”¨å­—ç¬¦çš„ unicode , å¹¶ä¸”åœ¨å‰é¢å†åŠ ä¸Šä¸€ä¸ª %uï¼ˆä¸æ ‡å‡†ï¼‰ , è€Œ encodeURI æ˜¯å…ˆå¯¹ unicode è¿›è¡Œ utf-8 ç¼–ç ï¼Œå†åœ¨æ¯ä¸ª utf-8 ç¼–ç å‰åŠ ä¸Š %ï¼ˆæ ‡å‡†ï¼‰ã€‚ æ¯”å¦‚ä¸­æ–‡çš„ã€æˆ‘ã€‘å­—ï¼Œ ä»–çš„ unicode ä¸º 0x6211, å¯¹ä»–è¿›è¡Œ utf8 ç¼–ç å˜æˆäº† 0xe6, 0x88, 0x91, å› æ­¤ escape å¾—åˆ°çš„å€¼ä¸º \\u6211, ä½†æ˜¯encodeURI çš„ç»“æœæ˜¯ %E6%88%91ã€‚ å¯¹ escape, encodeURI è¿™äº›å…¶å®ä»¥å‰æ˜¯äº†è§£çš„ï¼Œ ä½†æ˜¯è¿™æ¬¡æ˜¯çœŸæ­£çš„æ€»ç»“æ¸…æ¥šäº†ï¼ŒæŒºå¼€å¿ƒã€‚ä¸Šé¢æ˜¯ä¸æ˜¯æåˆ°äº†å¾ˆå¤šæ¯”å¦‚ utf8, gbk, unicode ä¹‹ç±»çš„è¯ã€‚ ä¸‹é¢å¯¹è¿™äº›åè¯ä¹Ÿåšä¸€äº›ç®€å•çš„å½’ç±»å’Œæ€»ç»“ã€‚ UTF-8, Unicode, ASCIIç çš„åŒºåˆ«å’Œè”ç³» ASCIIï¼ˆAmerican Standard Code for Information Interchangeï¼Œç¾å›½ä¿¡æ¯äº¤æ¢æ ‡å‡†ä»£ç ï¼‰æ˜¯åŸºäºæ‹‰ä¸å­—æ¯çš„ä¸€å¥—ç”µè„‘ç¼–ç ç³»ç»Ÿï¼Œä¸»è¦ç”¨äºæ˜¾ç¤ºç°ä»£è‹±è¯­å’Œå…¶ä»–è¥¿æ¬§è¯­è¨€ã€‚å®ƒæ˜¯ç°ä»Šæœ€é€šç”¨çš„å•å­—èŠ‚ç¼–ç ç³»ç»Ÿï¼Œå¹¶ç­‰åŒäºå›½é™…æ ‡å‡†ISO/IEC 646ã€‚ æ³¨æ„ ASCII ç æ˜¯ American Standard Code for Information Interchangeçš„ç®€ç§°ï¼Œ åé¢çš„ä¸¤ä¸ªII å¹¶ä¸æ˜¯ç½—é©¬æ•°å­—2å“¦ã€‚ æˆ‘ä»¬çŸ¥é“è®¡ç®—æœºé‡Œé¢å­˜å‚¨æ‰€æœ‰ä¿¡æ¯éƒ½æ˜¯é€šè¿‡ä¸€ä¸ªäºŒè¿›åˆ¶å€¼ã€‚æ¯ä¸€ä¸ªäºŒè¿›åˆ¶ä½ï¼ˆbitï¼‰éƒ½æœ‰ä¸¤ç§çŠ¶æ€ 0æˆ–è€…1ï¼Œ è§„å®šäº†8ä¸ªäºŒè¿›åˆ¶ä½ä¸ºä¸€ä¸ªå­—èŠ‚ï¼ˆbyteï¼‰ï¼Œå¯ä»¥è¡¨ç¤º256ç§çŠ¶æ€ï¼ŒåŒ…æ‹¬äº† 00000000 åˆ° 11111111 ã€‚ ç¾å›½ğŸ‡ºğŸ‡¸äººä»¬è‡ªç„¶æƒ³åˆ°äº†å¯ä»¥ä»–ä»¬è‡ªå·±è§„å®šä¸€å¥—å­—ç¬¦ç¼–ç ï¼ŒæŠŠ26è‹±æ–‡å­—æ¯ï¼ŒåŠä¸€äº›ç‰¹æ®Šç¬¦å·å’Œæ§åˆ¶å­—ç¬¦ç»Ÿä¸€ç¼–ç ã€‚ä»–ä»¬ä¸€å…±è§„å®šäº† 128ä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚è¯´ A æ˜¯ 65ï¼ˆ01000001ï¼‰ã€‚128ä½åªéœ€è¦å ç”¨7ä½ï¼Œæœ€é«˜ä½ç»Ÿä¸€ä¸º0ã€‚ æ¯”å¦‚é‡åˆ°0x10 å°±æ˜¯æ¢è¡Œï¼Œ é‡åˆ° Ox1b å°±æ‰“å°åç™½å­—ã€‚è¿™ç±»0x20ä»¥ä¸‹çš„å­—èŠ‚ç§°ä¸ºæ§åˆ¶å­—èŠ‚ã€‚ç©ºæ ¼ï¼Œæ ‡ç‚¹ç¬¦å·ï¼Œæ•°å­—ï¼Œå¤§å°å†™å­—æ¯ç”¨è¿ç»­çš„å­—èŠ‚çŠ¶æ€è¡¨ç¤ºï¼Œä¸€ç›´åˆ°127å·ã€‚ æ‰€ä»¥ ASCIIç å°±æ˜¯0-127è¿™å¥—ç¼–ç æ–¹æ¡ˆæ‰€å½¢æˆçš„ç¼–ç ï¼Œè¿™å¥—ç¼–ç æ–¹æ¡ˆå«åšANSIã€‚ ä¸‹é¢ç»™å‡ºä¸¤ç§åˆ¤æ–­å­—ç¬¦æ˜¯ä¸æ˜¯ ASCII ç çš„æ–¹æ¡ˆï¼š1234567isASCII (unicode) &#123; return ((unicode === 0x20AC) || (unicode &lt;= 0x007F &amp;&amp; unicode &gt;= 0x0000));&#125;// å¦å¤–ä¸€ç§ç”¨æ­£åˆ™åˆ¤æ–­isASCII(str) &#123; return /^\\[\\\\x00-\\\\x7F\\]*$/.test(str);&#125; ä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œè‹±è¯­ç”¨128ä¸ªç¼–ç å°±è¶³å¤Ÿäº†ï¼Œä½†æ˜¯å…¶ä»–è¯­è¨€ç”¨è¿™äº›å­—ç¬¦æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œäºæ˜¯å»¶ä¼¸å‡ºäº†256ç¼–ç ï¼Œä¹Ÿå°±æ˜¯æœ€é«˜ä½ä¹Ÿè¢«ä½¿ç”¨ä¸Š(è¿™ç§°ä¸ºæ‰©å±•å­—ç¬¦é›†)ã€‚ä½†æ˜¯ä¸åŒçš„å›½å®¶æœ‰ä¸åŒçš„å­—æ¯ï¼ŒåŒæ ·çš„ç¼–ç å¯èƒ½ä¹Ÿä»£è¡¨ç€ä¸åŒçš„å†…å®¹ã€‚æ¯”å¦‚ 150ï¼Œå¯èƒ½æ³•å›½æ˜¯ä¸€ä¸ªï¼Œä¿„è¯­åˆæ˜¯ä¸€ä¸ªã€‚ä»–ä»¬0-127éƒ½æ˜¯ç›¸åŒï¼Œä½†æ˜¯128-256ä¸ä¸€å®šç›¸åŒäº†ï¼Œè¿™å°±çœ‹ä¸åŒçš„å›½å®¶è‡ªå·±çš„åˆ¶å®šæ–¹å¼äº†ã€‚ ä½†æ˜¯å†æƒ³æƒ³ä¸­å›½ğŸ‡¨ğŸ‡³å°±æ›´å¯æ€•äº†ï¼Œä¸€å…±æœ‰10å‡ ä¸‡çš„æ–‡å­—ã€‚æ˜¾ç„¶256ç§ç¬¦å·æ˜¯æ²¡æœ‰åŠæ³•å®Œå…¨è¡¨è¾¾çš„ã€‚äºæ˜¯åˆå‡ºç°äº†å¤šå­—èŠ‚çš„å½¢å¼ã€‚æ¯”å¦‚ä¸¤ä¸ªå­—èŠ‚ï¼Œåšå¤šè¡¨ç¤º 256*256 ç§ã€‚å¤§æ¦‚åˆ6wå¤šç¬¦å·ã€‚æœ€å¸¸è§çš„ä¸­æ–‡ç¼–ç å°±æ˜¯è¿™ç§2ä¸ªå­—èŠ‚çš„ç¼–ç æ–¹å¼ï¼Œå¦‚ GB2312ã€‚ ä¸‹é¢å°±ä»‹ç»ä¸‹ GB2312, GBKç­‰çš„åŒºåˆ«å’Œè”ç³»ã€‚ GB2312,GBK,GB18030çš„åŒºåˆ«å’Œè”ç³»ä¸­å›½ç”¨åˆ°è®¡ç®—æœºæ¯”è¾ƒæ™šï¼Œé‚£ä¸ªæ—¶å€™ 256ä¸ªç¬¦å·å·²ç»æ²¡æœ‰å¯ä»¥ç”¨æ¥è¡¨è¾¾ä¸­æ–‡æ–‡å­—çš„äº†ã€‚å¹¶ä¸”ä¸­æ–‡10w+ä¸ªï¼Œåªèƒ½å¤Ÿå¦è¾Ÿè¹Šå¾„äº†ã€‚äºæ˜¯ä¸­å›½äººæŠŠ127å·ä¹‹åçš„å­—ç¬¦éƒ½å»æ‰äº†ï¼Œå¹¶ä¸”è¿›è¡Œäº†è§„å®šã€‚ æ¯ä¸ªæ±‰å­—åŠç¬¦å·ä»¥ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºã€‚ç¬¬ä¸€ä¸ªä¸ºé«˜å­—èŠ‚ï¼Œç¬¬äºŒä¸ªä¸ºä½å­—èŠ‚ã€‚ä¸€ä¸ªå°äº127çš„å­—ç¬¦çš„æ„ä¹‰ä¸åŸæ¥ç›¸åŒï¼Œä½†ä¸¤ä¸ªå¤§äº127çš„å­—ç¬¦è¿åœ¨ä¸€èµ·æ—¶ï¼Œå°±è¡¨ç¤ºä¸€ä¸ªæ±‰å­—ï¼Œå‰é¢çš„ä¸€ä¸ªå­—èŠ‚ï¼ˆé«˜å­—èŠ‚ï¼‰ä»0xA1ç”¨åˆ° 0xF7ï¼Œåé¢ä¸€ä¸ªå­—èŠ‚ï¼ˆä½å­—èŠ‚ï¼‰ä»0xA1åˆ°0xFEã€‚ å…·ä½“è¿™ä¸ªå­—ç¬¦èŒƒå›´çš„å¾—æ¥ï¼Œæ¶‰åŠåŒºä½ç­‰çŸ¥è¯†ï¼Œè¿™äº›æˆ‘ä¸æ‰“ç®—è®¤è¯†ï¼Œä¸åšä»‹ç»ã€‚ è¿™ç§æ–¹æ¡ˆç§°ä¹‹ä¸ºGB2312, ä»–æ˜¯å¯¹ASCIIç çš„ä¸­æ–‡æ‰©å±•ã€‚è¿™æ ·å°± 6000+æ±‰å­—å¯ä»¥å¾—åˆ°è¡¨ç¤ºã€‚ GB 2312æ ‡å‡†å…±æ”¶å½•6763ä¸ªæ±‰å­—ï¼Œå…¶ä¸­ä¸€çº§æ±‰å­—3755ä¸ªï¼ŒäºŒçº§æ±‰å­—3008ä¸ªï¼›åŒæ—¶æ”¶å½•äº†åŒ…æ‹¬æ‹‰ä¸å­—æ¯ã€å¸Œè…Šå­—æ¯ã€æ—¥æ–‡å¹³å‡ååŠç‰‡å‡åå­—æ¯ã€ä¿„è¯­è¥¿é‡Œå°”å­—æ¯åœ¨å†…çš„682ä¸ªå­—ç¬¦ã€‚ GB 2312çš„å‡ºç°ï¼ŒåŸºæœ¬æ»¡è¶³äº†æ±‰å­—çš„è®¡ç®—æœºå¤„ç†éœ€è¦ï¼Œå®ƒæ‰€æ”¶å½•çš„æ±‰å­—å·²ç»è¦†ç›–ä¸­å›½å¤§é™†99.75%çš„ä½¿ç”¨é¢‘ç‡ã€‚ä½†å¯¹äºäººåã€å¤æ±‰è¯­ç­‰æ–¹é¢å‡ºç°çš„ç½•ç”¨å­—å’Œç¹ä½“å­—ï¼ŒGB 2312ä¸èƒ½å¤„ç†ï¼Œå› æ­¤åæ¥GBKåŠGB 18030æ±‰å­—å­—ç¬¦é›†ç›¸ç»§å‡ºç°ä»¥è§£å†³è¿™äº›é—®é¢˜ã€‚â€“wiki åæ¥GB2312è¿™ç§æ–¹æ¡ˆè¿˜æ˜¯ä¸å¤Ÿç”¨ï¼Œäºæ˜¯å°±ä¸å†è¦æ±‚ä½å­—èŠ‚ä¸€å®šæ˜¯127ä¹‹åçš„å†…ç ï¼Œ åªè¦æ˜¯ç¬¬ä¸€ä¸ªå­—èŠ‚å¤§äº127ï¼Œå°±è¡¨ç¤ºè¿™æ˜¯æ±‰å­—çš„å¼€å§‹ï¼Œä¸ç”¨ç®¡ä½å­—èŠ‚æ˜¯å¦æ˜¯æ‰©å±•å­—ç¬¦é›†çš„å†…å®¹ã€‚è¿™ç§GB2312è¢«æ‰©å±•ä¹‹åçš„å†…å®¹ç§°ä¹‹ä¸º GBKï¼Œ GBK åŒ…æ‹¬äº†GB2312çš„æ‰€æœ‰å†…å®¹ï¼Œå¹¶ä¸”æ–°å¢åŠ äº†20000ä¸ªæ±‰å­—ã€‚ åæ¥å°‘æ•°æ°‘æ—ä¹Ÿéœ€è¦ç”¨ç”µè„‘ï¼Œäºæ˜¯åˆå¢åŠ äº†å°‘æ•°åæ—çš„å†…å®¹ï¼ŒGBK è¢«æ‰©å±•ä¸ºäº† GB18030ã€‚ ä¹Ÿå°±æ˜¯è¯´ GB18030 &gt; GBK &gt; GB2312ã€‚ è¿™ä¸€ç³»åˆ—çš„ä¸­æ–‡ç¼–ç ï¼Œç§°ä¸º DBCS(Double Byte Character Set åŒå­—èŠ‚å­—ç¬¦é›†)ã€‚ åœ¨DBCSç³»åˆ—æ ‡å‡†é‡Œï¼Œæœ€å¤§çš„ç‰¹ç‚¹æ˜¯ä¸¤å­—èŠ‚é•¿çš„æ±‰å­—å­—ç¬¦å’Œä¸€å­—èŠ‚é•¿çš„è‹±æ–‡å­—ç¬¦å¹¶å­˜äºåŒä¸€å¥—ç¼–ç æ–¹æ¡ˆé‡Œï¼Œå› æ­¤ä»–ä»¬å†™çš„ç¨‹åºä¸ºäº†æ”¯æŒä¸­æ–‡å¤„ç†ï¼Œå¿…é¡»è¦æ³¨æ„å­—ä¸²é‡Œçš„æ¯ä¸€ä¸ªå­—èŠ‚çš„å€¼ï¼Œå¦‚æœè¿™ä¸ªå€¼æ˜¯å¤§äº127çš„ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºä¸€ä¸ªåŒå­—èŠ‚å­—ç¬¦é›†é‡Œçš„å­—ç¬¦å‡ºç°äº†ã€‚â€“wiki äºæ˜¯å°±å‡ºç°äº†åæ¥ç¼–ç¨‹æ—¶å€™çš„é»˜å¿µï¼š ä¸€ä¸ªä¸­æ–‡å­—ç¬¦å ä¸¤ä¸ªå­—èŠ‚ï¼Œ1ä¸ªè‹±æ–‡å­—ç¬¦å ç”¨1ä¸ªå­—èŠ‚ã€‚ æ³¨æ„è¿™ä¸ªæ—¶å€™ GBK, GB2312 ç­‰ï¼Œåªæ˜¯ä¸­æ–‡å¯¹äºASCIIç çš„æ‰©å±•ï¼Œå’Œ UTF8,Unicode è¿™äº›å¹¶æ— è”ç³»ã€‚ä¸‹é¢å†æ¥çœ‹çœ‹ Unicode åŠ UTF-8ã€‚ Unicode åŠ UTF-8 ç»“è®ºï¼š UTF-8 æ˜¯ Unicode çš„å®ç°æ–¹å¼ä¹‹ä¸€ã€‚ å‰é¢æˆ‘ä»¬è¯´è¿‡ï¼Œä¸–ç•Œä¸Šå­˜åœ¨ç€å¾ˆå¤šç¼–ç æ–¹å¼ï¼Œæ¯ä¸ªå›½å®¶å¯èƒ½ä¼šå»è§„å®šå’Œåˆ¶ä½œè‡ªå·±çš„ç¼–ç æ–¹å¼ã€‚ä¸åŒçš„äºŒè¿›åˆ¶å› è€Œæœ‰å¯èƒ½ä¼šè¢«è§£é‡Šæˆä¸åŒçš„å†…å®¹ã€‚ å› æ­¤å¦‚æœä½ ä¸çŸ¥é“ä¸€ä¸ªæ–‡ä»¶çš„ç¼–ç ï¼Œç„¶åéšæ„ç”¨ç¼–è¾‘å™¨æ‰“å¼€äº†å°±ä¼šå‡ºç°æˆ‘ä»¬ç»å¸¸å‡ºç°çš„ä¹±ç ç°è±¡ã€‚ èªæ˜çš„äººä»¬å½“ç„¶æ„è¯†åˆ°äº†è¿™ä¸€ç‚¹ï¼Œæ‰€ä»¥å¦‚æœæœ‰ä¸€ç§ç¼–ç æ–¹å¼èƒ½å¤ŸæŠŠä¸–ç•Œæ‰€æœ‰çš„ç¬¦å·éƒ½çº³å…¥å…¶ä¸­ï¼Œé‚£è¯¥å¤šå¥½ï¼Ÿ å†ä¹Ÿä¸ä¼šæœ‰ä¹±ç ç°è±¡äº†ã€‚ äºæ˜¯ Unicode å‡ºç°äº†ï¼ˆunion code ï¼Ÿï¼‰ , ä¸€å®šè¦æ³¨æ„ Unicode å¹¶ä¸æ˜¯ä¸€ä¸ªç¼–ç æ–¹å¼ï¼Œä¸æ˜¯ä¸€ä¸ªç®—æ³•ï¼Œè€Œæ˜¯ä¸€ä¸ªé›†åˆï¼Œé›†åˆäº†æ‰€æœ‰çš„ç¬¦å·ï¼Œå®ƒåªæ˜¯è§„å®šäº†æ‰€æœ‰ç¬¦å·çš„äºŒè¿›åˆ¶ä»£ç ï¼Œå¹¶æ²¡æœ‰ä¸€ä¸ªç®—æ³•æ¥è¯´æ€ä¹ˆå­˜å‚¨è¿™ä¸ªå†…å®¹ã€‚æ¯”å¦‚U+0041è¡¨ç¤ºå¤§å†™å­—æ¯Aã€‚ ï¼ˆå…¶å®æˆ‘åœ¨æƒ³ï¼Œå®ƒèƒ½æŠŠæ‰€æœ‰ç¬¦å·å½•å…¥è¿›å»ï¼Œå·²ç»æ˜¯å¾ˆå¤§çš„å·¥ä½œé‡äº†ã€‚ï¼‰ è¿™é‡Œå°±æœ‰ä¸¤ä¸ªä¸¥é‡çš„é—®é¢˜ï¼Œç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚ä½•æ‰èƒ½åŒºåˆ« Unicode å’Œ ASCII ï¼Ÿè®¡ç®—æœºæ€ä¹ˆçŸ¥é“ä¸‰ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç¬¦å·ï¼Œè€Œä¸æ˜¯åˆ†åˆ«è¡¨ç¤ºä¸‰ä¸ªç¬¦å·å‘¢ï¼Ÿç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œè‹±æ–‡å­—æ¯åªç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºå°±å¤Ÿäº†ï¼Œå¦‚æœ Unicode ç»Ÿä¸€è§„å®šï¼Œæ¯ä¸ªç¬¦å·ç”¨ä¸‰ä¸ªæˆ–å››ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œé‚£ä¹ˆæ¯ä¸ªè‹±æ–‡å­—æ¯å‰éƒ½å¿…ç„¶æœ‰äºŒåˆ°ä¸‰ä¸ªå­—èŠ‚æ˜¯0ï¼Œè¿™å¯¹äºå­˜å‚¨æ¥è¯´æ˜¯æå¤§çš„æµªè´¹ï¼Œæ–‡æœ¬æ–‡ä»¶çš„å¤§å°ä¼šå› æ­¤å¤§å‡ºäºŒä¸‰å€ï¼Œè¿™æ˜¯æ— æ³•æ¥å—çš„ã€‚ â€”- å¼•ç”¨è‡ªé˜®ä¸€å³°çš„æ–‡ç«  åæ¥çš„äººä»¬ä¹Ÿè¿›è¡Œäº†å¾ˆå¤šå°è¯•ï¼Œ å‘æ˜äº† unicode çš„å¤šç§å­˜å‚¨æ–¹å¼ï¼ˆä¸åŒçš„äºŒè¿›åˆ¶ç¼–ç æ–¹å¼æˆ–è€…ç§°ä¹‹ä¸ºä¸€ç§ç®—æ³•ï¼‰ã€‚ç›´åˆ° UTF-8 è¿™ç§ç¼–ç æ–¹å¼çš„å‡ºç°ï¼Œ Unicode æ‰å¾—ä»¥æ¨å¹¿ã€‚ æ‰€ä»¥å‰é¢æ‰è¯´ UTF-8 æ˜¯ä¸€ç§æ˜¯Unicodeçš„å®ç°æ–¹å¼ã€‚ UTF-8ï¼ˆ8-bit Unicode Transformation Formatï¼‰æ˜¯ä¸€ç§é’ˆå¯¹Unicodeçš„å¯å˜é•¿åº¦å­—ç¬¦ç¼–ç ï¼Œä¹Ÿæ˜¯ä¸€ç§å‰ç¼€ç ã€‚å®ƒå¯ä»¥ç”¨æ¥è¡¨ç¤ºUnicodeæ ‡å‡†ä¸­çš„ä»»ä½•å­—ç¬¦ï¼Œä¸”å…¶ç¼–ç ä¸­çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ä»ä¸ASCIIå…¼å®¹ï¼Œè¿™ä½¿å¾—åŸæ¥å¤„ç†ASCIIå­—ç¬¦çš„è½¯ä»¶æ— é¡»æˆ–åªé¡»åšå°‘éƒ¨åˆ†ä¿®æ”¹ï¼Œå³å¯ç»§ç»­ä½¿ç”¨ã€‚å› æ­¤ï¼Œå®ƒé€æ¸æˆä¸ºç”µå­é‚®ä»¶ã€ç½‘é¡µåŠå…¶ä»–å­˜å‚¨æˆ–å‘é€æ–‡å­—çš„åº”ç”¨ä¸­ï¼Œä¼˜å…ˆé‡‡ç”¨çš„ç¼–ç ã€‚ å…³é”®å­—æ˜¯å¯å˜é•¿åº¦å­—ç¬¦ç¼–ç ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äºä¸åŒç±»å‹çš„ç¬¦å·ï¼Œå®ƒå ç”¨çš„å­—èŠ‚é•¿åº¦ä¸ä¸€æ ·ã€‚è¿™æ ·å¯ä»¥èŠ‚çœå¾ˆå¤šç©ºé—´ã€‚å¹¶ä¸”æ¯”è¾ƒçµæ´»ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå®ƒä½¿ç”¨1-4ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºã€‚æ¯”å¦‚ï¼š 128ä¸ªUS-ASCIIå­—ç¬¦åªéœ€ä¸€ä¸ªå­—èŠ‚ç¼–ç ï¼ˆUnicodeèŒƒå›´ç”±U+0000è‡³U+007Fï¼‰ã€‚ å¸¦æœ‰é™„åŠ ç¬¦å·çš„æ‹‰ä¸æ–‡ã€å¸Œè…Šæ–‡ã€è¥¿é‡Œå°”å­—æ¯ã€äºšç¾å°¼äºšè¯­ã€å¸Œä¼¯æ¥æ–‡ã€é˜¿æ‹‰ä¼¯æ–‡ã€å™åˆ©äºšæ–‡åŠå®ƒæ‹¿å­—æ¯åˆ™éœ€è¦ä¸¤ä¸ªå­—èŠ‚ç¼–ç ï¼ˆUnicodeèŒƒå›´ç”±U+0080è‡³U+07FFï¼‰ã€‚ å…¶ä»–åŸºæœ¬å¤šæ–‡ç§å¹³é¢ï¼ˆBMPï¼‰ä¸­çš„å­—ç¬¦ï¼ˆè¿™åŒ…å«äº†å¤§éƒ¨åˆ†å¸¸ç”¨å­—ï¼Œå¦‚å¤§éƒ¨åˆ†çš„æ±‰å­—ï¼‰ä½¿ç”¨ä¸‰ä¸ªå­—èŠ‚ç¼–ç ï¼ˆUnicodeèŒƒå›´ç”±U+0800è‡³U+FFFFï¼‰ã€‚ å…¶ä»–æå°‘ä½¿ç”¨çš„Unicode è¾…åŠ©å¹³é¢çš„å­—ç¬¦ä½¿ç”¨å››è‡³å…­å­—èŠ‚ç¼–ç ï¼ˆUnicodeèŒƒå›´ç”±U+10000è‡³U+1FFFFFä½¿ç”¨å››å­—èŠ‚ï¼ŒUnicodeèŒƒå›´ç”±U+200000è‡³U+3FFFFFFä½¿ç”¨äº”å­—èŠ‚ï¼ŒUnicodeèŒƒå›´ç”±U+4000000è‡³U+7FFFFFFFä½¿ç”¨å…­å­—èŠ‚ï¼‰ã€‚ â€“wiki utf-8çš„å…·ä½“ç¼–ç å®ç°ï¼Œæˆ‘å¼•ç”¨äº†é˜®ä¸€å³°è€å¸ˆçš„æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ï¼Œä»–æ€»æ˜¯èƒ½æŠŠå¤æ‚çš„ä¸œè¥¿è®²çš„å¾ˆç®€å•ã€‚ åœ°å€ä¸ºï¼šascii_unicode_and_utf (ä»¥ä¸‹å†…å®¹ä¸ºå¼•ç”¨å†…å®¹) UTF-8 çš„ç¼–ç è§„åˆ™å¾ˆç®€å•ï¼Œåªæœ‰äºŒæ¡ï¼š 1ï¼‰å¯¹äºå•å­—èŠ‚çš„ç¬¦å·ï¼Œå­—èŠ‚çš„ç¬¬ä¸€ä½è®¾ä¸º0ï¼Œåé¢7ä½ä¸ºè¿™ä¸ªç¬¦å·çš„ Unicode ç ã€‚å› æ­¤å¯¹äºè‹±è¯­å­—æ¯ï¼ŒUTF-8 ç¼–ç å’Œ ASCII ç æ˜¯ç›¸åŒçš„ã€‚ 2ï¼‰å¯¹äºnå­—èŠ‚çš„ç¬¦å·ï¼ˆn &gt; 1ï¼‰ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰nä½éƒ½è®¾ä¸º1ï¼Œç¬¬n + 1ä½è®¾ä¸º0ï¼Œåé¢å­—èŠ‚çš„å‰ä¸¤ä½ä¸€å¾‹è®¾ä¸º10ã€‚å‰©ä¸‹çš„æ²¡æœ‰æåŠçš„äºŒè¿›åˆ¶ä½ï¼Œå…¨éƒ¨ä¸ºè¿™ä¸ªç¬¦å·çš„ Unicode ç ã€‚ ä¸‹è¡¨æ€»ç»“äº†ç¼–ç è§„åˆ™ï¼Œå­—æ¯xè¡¨ç¤ºå¯ç”¨ç¼–ç çš„ä½ã€‚ Unicodeç¬¦å·èŒƒå›´ | UTF-8ç¼–ç æ–¹å¼(åå…­è¿›åˆ¶) | ï¼ˆäºŒè¿›åˆ¶ï¼‰â€”â€”â€”â€”â€”â€”â€”-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”0000 0000-0000 007F | 0xxxxxxx0000 0080-0000 07FF | 110xxxxx 10xxxxxx0000 0800-0000 FFFF | 1110xxxx 10xxxxxx 10xxxxxx0001 0000-0010 FFFF | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx è·Ÿæ®ä¸Šè¡¨ï¼Œè§£è¯» UTF-8 ç¼–ç éå¸¸ç®€å•ã€‚å¦‚æœä¸€ä¸ªå­—èŠ‚çš„ç¬¬ä¸€ä½æ˜¯0ï¼Œåˆ™è¿™ä¸ªå­—èŠ‚å•ç‹¬å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼›å¦‚æœç¬¬ä¸€ä½æ˜¯1ï¼Œåˆ™è¿ç»­æœ‰å¤šå°‘ä¸ª1ï¼Œå°±è¡¨ç¤ºå½“å‰å­—ç¬¦å ç”¨å¤šå°‘ä¸ªå­—èŠ‚ã€‚ æ€»ç»“å¥½å¼€å¿ƒï¼Œå¤§æ¦‚çš„æŠŠè¿™äº›ä¸œè¥¿éƒ½æœ‰äº†ä¸€äº›äº†è§£ã€‚ä¸å†åªæ˜¯åœç•™åœ¨è®¤è¯†é˜¶æ®µï¼Œè€Œæ˜¯äº†è§£é˜¶æ®µäº†ã€‚ç®—æ˜¯å¯¹è¿™ä¸¤å¤©çš„ä¸€ä¸ªäº¤ä»£äº†ã€‚","categories":[],"tags":[]},{"title":"è®¾ç½®æˆ‘çš„ eslint é…ç½®","slug":"è®¾ç½®æˆ‘çš„-eslint-é…ç½®","date":"2018-01-23T09:16:21.000Z","updated":"2018-01-23T09:52:22.000Z","comments":true,"path":"2018/01/23/è®¾ç½®æˆ‘çš„-eslint-é…ç½®/","link":"","permalink":"http://sevencai.github.io/2018/01/23/è®¾ç½®æˆ‘çš„-eslint-é…ç½®/","excerpt":"","text":"æœ¬ç¯‡ä¸»è¦è®°å½•äº†æˆ‘é’ˆå¯¹è‡ªå·±çš„ä¹ æƒ¯ï¼Œå¯¹ eslint çš„ä¸€äº›é…ç½®çš„æ›´æ”¹ã€‚æˆ‘ä¸€èˆ¬ç”¨çš„æ˜¯ Airbnb çš„ç¼–ç è§„èŒƒã€‚ æœ€å¼€å§‹æˆ‘ä¼šè‡ªå·±å»é…ç½® webpack çš„ç›¸å…³æ’ä»¶ç­‰ã€‚åæ¥å‘ç°ä¸­é—´å»ä½¿ç”¨çš„æˆæœ¬å¤ªé«˜äº†ï¼Œå¾€å¾€é…ç½®å°±èŠ±è´¹äº†æˆ‘ä¸å°‘æ—¶é—´ï¼Œç°åœ¨æˆ‘ä¸»è¦æ˜¯ä½¿ç”¨ä¸€äº›æ¯”è¾ƒæˆç†Ÿçš„ cli, æ¯”å¦‚ vue-cli, react-cli ç­‰ã€‚ä¸‹é¢çš„è¿™ä»½ eslint ç»§æ‰¿è‡ª airbnb-base, è¦†ç›–äº†ä¸€äº›æˆ‘ä¸ä¹ æƒ¯ä½¿ç”¨çš„é…ç½®ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273// https://eslint.org/docs/user-guide/configuringmodule.exports = &#123; root: true, parserOptions: &#123; parser: 'babel-eslint' &#125;, env: &#123; browser: true, &#125;, // consider switching to `plugin:vue/strongly-recommended` or `plugin:vue/recommended` for stricter rules. extends: ['plugin:vue/essential', 'airbnb-base'], // required to lint *.vue files plugins: [ 'vue' ], // check if imports actually resolve settings: &#123; 'import/resolver': &#123; webpack: &#123; config: 'build/webpack.base.conf.js' &#125; &#125; &#125;, // add your custom rules here rules: &#123; // don't require .vue extension when importing 'import/extensions': ['error', 'always', &#123; js: 'never', vue: 'never' &#125;], // disallow reassignment of function parameters // disallow parameter object manipulation except for specific exclusions 'no-param-reassign': ['error', &#123; props: true, ignorePropertyModificationsFor: [ 'vm', 'state', // for vuex state 'acc', // for reduce accumulators 'e' // for e.returnvalue ] &#125;], // allow optionalDependencies 'import/no-extraneous-dependencies': ['error', &#123; optionalDependencies: ['test/unit/index.js'] &#125;], // ç¦æ­¢åˆ†å· auto 'semi': [ 'error', 'never' ], // ç¦æ­¢ä½¿ç”¨æ‹–å°¾é€—å· 'comma-dangle': [ 'error', 'never' ], // ç®­å¤´å‡½æ•°çš„æ‹¬å·ï¼Œåªåœ¨æœ‰å¤šä¸ªå‚æ•°æ—¶æ‰ä½¿ç”¨ 'arrow-parens': [ 'error', 'as-needed' ], 'arrow-body-style': [ 'error', 'always' ], // å…è®¸æˆ‘ä½¿ç”¨ è¡¨è¾¾å¼ 'no-unused-expressions': ['error', &#123; 'allowShortCircuit': true, 'allowTernary': true &#125;], // æ”¾å®½æœ€å¤§çš„æ”¯æŒå®½åº¦ 'max-len': [2, 150, 4, &#123; 'ignoreUrls': true &#125;], // allow debugger during development 'no-debugger': process.env.NODE_ENV === 'production' ? 'error' : 'off' &#125;&#125; è¿™ä¸Šé¢å› ä¸ºæ˜¯å·²ç»ç»§æ‰¿è‡ª airbnb-base ,æ‰€ä»¥å¾ˆå¤šé»˜è®¤çš„é…ç½®éƒ½æ²¡æœ‰å†™ä¸‹æ¥ï¼Œæ¯”å¦‚ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455// å¼ºåˆ¶å•å¼•å· auto\"quotes\": [ \"error\", \"single\"], // å˜é‡å®šä¹‰æˆ–å‚æ•°å£°æ˜æœªä½¿ç”¨\"no-cond-assign\": [ \"warn\"],// å…³é”®å­—ç©ºæ ¼ auto\"keyword-spacing\": [ \"error\", &#123; \"before\": true, \"after\": true &#125;],// å¼ºåˆ¶å•è¡Œä»£ç å—ä¸­ä½¿ç”¨ç©ºæ ¼ auto\"block-spacing\": [ \"error\", \"always\"],// é€—å·å‰é¢ä¸èƒ½ç”±ç©ºæ ¼, åé¢è¦ç©ºæ ¼ auto\"comma-spacing\": [ \"error\", &#123; \"before\": false, \"after\": true &#125;],// å†’å·å‰é¢ä¸èƒ½æœ‰ç©ºæ ¼, åé¢å¿…é¡»æœ‰ç©ºæ ¼, é”®å€¼éœ€æ°´å¹³å¯¹é½ auto\"key-spacing\": [ \"error\", &#123; \"beforeColon\": false, \"afterColon\": true, \"align\": \"value\" &#125;],// å‚æ•°æœªä½¿ç”¨æç¤º\"no-unused-vars\": [ \"warn\", &#123; \"var\": \"all\", \"all\": \"all\" &#125;], // å‡½æ•°å·¦æ‹¬å·å·¦è¾¹ä¸èƒ½æœ‰ç©ºæ ¼ auto\"space-before-function-paren\": [ \"error\", &#123; \"anonymous\": \"always\", \"named\": \"never\" &#125;] å¯¹äº†ï¼Œé¡ºä¾¿è®°å½•ä¸€ä¸ª vue-cli é…ç½®çš„é—®é¢˜ï¼ˆä¸å€¼å¾—å¼€ä¸€ä¸ªæ–°æ–‡ç« ï¼Œä½†æ˜¯æƒ³è®°å½•ä¸‹ï¼‰ã€‚ æœ‰çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬é…ç½®äº† host , åœ¨æœ¬åœ°è®¿é—®æ˜¯ä¹Ÿè®¸ä¼šå‡ºç° invalid host ä¹‹ç±»çš„é”™è¯¯ï¼Œæ­£å¸¸è®¿é—®ä¸äº†é¡µé¢ï¼Œè¿™ä¸ªæ—¶å€™åªéœ€è¦æ‰¾åˆ° devServer, å¢åŠ ä¸€ä¸ª disableHostCheck: true å³å¯ã€‚è®©å®ƒä¸å»æ£€æµ‹ host, ç­‰åˆ°æ­£å¼ä¸Šçº¿ï¼Œå†æŠŠè¿™ä¸ªå»æ‰æˆ–è€…æ›´æ”¹ä¸º false å³å¯ã€‚ 123456789devServer: &#123; disableHostCheck: true, clientLogLevel: &apos;warning&apos;, historyApiFallback: &#123; rewrites: [ &#123; from: /.*/, to: path.posix.join(config.dev.assetsPublicPath, &apos;index.shtml&apos;) &#125;, ], &#125; ...... åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ eslint å½“ç„¶æ˜¯å¥½å¤„å¤šå¤šï¼Œè§„èŒƒè‡ªå·±çš„ä»£ç ï¼Œå¿ƒæƒ…ä¹Ÿä¼šå¥½å¾ˆå¤šã€‚ä¸‹é¢æ˜¯æˆ‘è®°å½•çš„ä¸€äº›å¯¹ airbnb ï¼Œè‡ªå·±è€æ˜¯ä¼šå¿˜è®°çš„å‡ ä¸ªç‚¹ã€‚ No Object.assignPrefer the object spread operator over Object.assign to shallow-copy objects. Use the object rest operator to get a new object with certain properties omitted. 1234567891011121314// very badconst original = &#123; a: 1, b: 2 &#125;;const copy = Object.assign(original, &#123; c: 3 &#125;); // this mutates `original` à² _à² delete copy.a; // so does this// badconst original = &#123; a: 1, b: 2 &#125;;const copy = Object.assign(&#123;&#125;, original, &#123; c: 3 &#125;); // copy =&gt; &#123; a: 1, b: 2, c: 3 &#125;// goodconst original = &#123; a: 1, b: 2 &#125;;const copy = &#123; ...original, c: 3 &#125;; // copy =&gt; &#123; a: 1, b: 2, c: 3 &#125;const &#123; a, ...noA &#125; = copy; // noA =&gt; &#123; b: 2, c: 3 &#125; Use array spreads â€¦ to copy arrays.1234567891011// badconst len = items.length;const itemsCopy = [];let i;for (i = 0; i &lt; len; i += 1) &#123; itemsCopy[i] = items[i];&#125;// goodconst itemsCopy = [...items]; To convert an array-like object to an array, use spreads â€¦ instead of Array.from.1234567const foo = document.querySelectorAll('.foo');// goodconst nodes = Array.from(foo);// bestconst nodes = [...foo]; Use Array.from instead of spread â€¦ for mapping over iterables, because it avoids creating an intermediate array.12345// badconst baz = [...foo].map(bar);// goodconst baz = Array.from(foo, bar); Use object destructuring when accessing and using multiple properties of an object. eslint: prefer-destructuring jscs: requireObjectDestructuring123456789101112131415161718// badfunction getFullName(user) &#123; const firstName = user.firstName; const lastName = user.lastName; return `$&#123;firstName&#125; $&#123;lastName&#125;`;&#125;// goodfunction getFullName(user) &#123; const &#123; firstName, lastName &#125; = user; return `$&#123;firstName&#125; $&#123;lastName&#125;`;&#125;// bestfunction getFullName(&#123; firstName, lastName &#125;) &#123; return `$&#123;firstName&#125; $&#123;lastName&#125;`;&#125; Use array destructuring. eslint: prefer-destructuring jscs: requireArrayDestructuring12345678const arr = [1, 2, 3, 4];// badconst first = arr[0];const second = arr[1];// goodconst [first, second] = arr; Never use arguments, opt to use rest syntax â€¦ instead. eslint: prefer-rest-paramsè‡ªå·±è€æ˜¯ç”¨ç¬¬ä¸€ç§æ–¹æ³•ï¼Œå“ˆå“ˆï¼Œç¬¬äºŒç§å¤šå¥½ã€‚12345678910// badfunction concatenateAll() &#123; const args = Array.prototype.slice.call(arguments); return args.join(&apos;&apos;);&#125;// goodfunction concatenateAll(...args) &#123; return args.join(&apos;&apos;);&#125; Why? Modules are the future, letâ€™s start using the future now.1234567891011// badconst AirbnbStyleGuide = require(&apos;./AirbnbStyleGuide&apos;);module.exports = AirbnbStyleGuide.es6;// okimport AirbnbStyleGuide from &apos;./AirbnbStyleGuide&apos;;export default AirbnbStyleGuide.es6;// bestimport &#123; es6 &#125; from &apos;./AirbnbStyleGuide&apos;;export default es6; Do not use wildcard imports.æœ‰çš„æ—¶å€™æˆ‘è¿˜æ˜¯ä¼šç”¨åˆ° * çš„ï¼Œå› ä¸ºä¹Ÿè®¸é‡Œé¢çš„å†…å®¹å¦‚æœæˆ‘éƒ½éœ€è¦ä½¿ç”¨åˆ°å‘¢ã€‚Why? This makes sure you have a single default export.12345// badimport * as AirbnbStyleGuide from &apos;./AirbnbStyleGuide&apos;;// goodimport AirbnbStyleGuide from &apos;./AirbnbStyleGuide&apos;; In modules with a single export, prefer default export over named export. eslint: import/prefer-default-export Why? To encourage more files that only ever export one thing, which is better for readability and maintainability. 12345// badexport function foo() &#123;&#125;// goodexport default function foo() &#123;&#125; Multiline imports should be indented just like multiline array and object literals.Why? The curly braces follow the same indentation rules as every other curly brace block in the style guide, as do the trailing commas.1234567891011// badimport &#123;longNameA, longNameB, longNameC, longNameD, longNameE&#125; from &apos;path&apos;;// goodimport &#123; longNameA, longNameB, longNameC, longNameD, longNameE,&#125; from &apos;path&apos;;","categories":[],"tags":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/tags/å·¥å…·-é…ç½®/"}]},{"title":"2017æˆ‘çš„å¹´åº¦å°ç»“","slug":"2017æˆ‘çš„å¹´åº¦å°ç»“","date":"2018-01-02T11:33:28.000Z","updated":"2018-01-02T13:14:49.000Z","comments":true,"path":"2018/01/02/2017æˆ‘çš„å¹´åº¦å°ç»“/","link":"","permalink":"http://sevencai.github.io/2018/01/02/2017æˆ‘çš„å¹´åº¦å°ç»“/","excerpt":"","text":"2017 å¹´ 6 æœˆåº•ï¼Œæˆ‘æ¯•ä¸šäº†ã€‚4æœˆä»½åˆ°äº†å­¦æ ¡ï¼ŒèŠ±äº†å¤§æ¦‚1ä¸ªåŠæœˆå­¦è½¦ï¼ŒåŠä¸ªå¤šæœˆè®ºæ–‡ï¼ŒåŠä¸ªæœˆè·Ÿæˆ‘æœ€çˆ±çš„å®¤å‹ä¸€èµ·æµªã€‚å¯èƒ½æ˜¯å…ˆå‰ä¸€ç›´å®ä¹ ï¼Œå·²ç»ç†Ÿæ‚‰äº†ã€å“¦ï¼ŒåŸæ¥å·¥ä½œæ˜¯è¿™ä¸ªæ ·å­ã€‘ï¼Œå½“7æœˆä»½å†æ¬¡å›åˆ°å…¬å¸çš„æ—¶å€™ï¼Œæˆ‘ä¸€ç‚¹éƒ½æ²¡æœ‰è§‰å¾—ä¸é€‚åº”ã€‚ä¹Ÿæ²¡æœ‰16å¹´åˆšæ¥çš„æ‡µå’Œææ…Œã€‚ å½“æ—¶çš„æ‡µæ˜¯ä»å­¦æ ¡åˆ°ç¤¾ä¼šçš„è½¬å˜ï¼Œå¾ˆå¤šä¸œè¥¿éƒ½ä¸æ‡‚ã€‚è®°å¾—åˆšæ¥çš„ç¬¬ä¸€å¤©ï¼Œ ä¸­åˆå¤§å®¶éƒ½åœ¨ç¡è§‰ï¼Œå½“æ—¶æˆ‘å¯¼å¸ˆååœ¨æˆ‘å‰é¢ï¼Œæˆ‘ä¸­åˆæ•²äº†ä¸€ä¸ªä¸­åˆçš„é”®ç›˜ï¼ŒæŠŠç¯å¢ƒå¸ƒç½®å¥½äº†ã€‚ä½†æ˜¯åé¢æ‰æ„è¯†åˆ°ï¼Œæˆ‘é‚£å¤©è‚¯å®šå½±å“äº†æˆ‘å¸ˆçˆ¶ä¼‘æ¯ã€‚é‚£å¤©æˆ‘ä¸€ä¸ŠåˆåŠ ä¸€ä¸‹åˆæ²¡æœ‰å»å•æ‰€ï¼Œæ²¡æœ‰å–æ°´ã€‚å› ä¸ºä¸å¥½æ„æ€é—®ï¼Œç»„é‡Œçš„åŒäº‹éƒ½æ˜¯ç”·ç”Ÿã€‚ å½“æ—¶çš„ææ…Œæ¥è‡ªå¯¹å·¥ä½œçš„ä¸ç†Ÿæ‚‰ï¼Œå¯¹ç¯å¢ƒçš„ä¸é€‚åº”ã€‚æˆ‘å½“æ—¶è§‰å¾—å¥½åƒä»€ä¹ˆéƒ½ä¸æ‡‚ï¼Œå·¥å…·ä¹Ÿä¸æ‡‚ï¼ŒçŸ¥è¯†ç‚¹ä¹Ÿä¸å†æ˜¯å­¦æ ¡ç”¨çš„é‚£äº›ï¼Œç„¶åä¸šåŠ¡é€»è¾‘ä¹Ÿä¸æ‡‚ã€‚å¥½åœ¨æˆ‘çœŸçš„æœ‰ä¸ªå¾ˆå¥½å¾ˆå¥½çš„å¸ˆçˆ¶ã€‚ç›´åˆ°ç°åœ¨æˆ‘è·Ÿä»–ä¸€èµ·åšé¡¹ç›®ï¼Œä¸æ‡‚çš„éƒ½æ˜¯é—®ä»–ã€‚ä»–å¾ˆè€å¿ƒï¼Œæ‡‚çš„å¾ˆå¤šï¼Œä¹Ÿéå¸¸å¸…æ°”ï¼ŒçœŸçš„è¿™ä¸€å¹´ä»¥æ¥ï¼Œå¤šäºäº†çš„å¯¼å¸ˆã€‚æ„Ÿæ©ã€‚å¥½åœ¨æˆ‘è‡ªå·±ä¹Ÿè¿˜ç®—åŠªåŠ›ï¼Œä¸€å¹´ä¸‹æ¥çœŸçš„è§‰å¾—è‡ªå·±è¿›æ­¥äº†ã€‚ è¿›æ­¥äº†å“ªäº›ï¼Ÿ æˆ‘æ—¶å¸¸ä¼šå»çœ‹ä¸€äº›è·Ÿæˆ‘ä¸€èµ·è¿›æ¥çš„æ¯•ä¸šç”Ÿï¼Œçœ‹çœ‹ä»–ä»¬çš„æˆé•¿é€Ÿåº¦ã€‚çœ‹åˆ°æœ‰çš„ä¼˜ç§€çš„å‰ç«¯ï¼Œéƒ½å·²ç»æ˜¯ nodejs çš„ collabrator äº†ï¼Œå†™çš„æ–‡ç« ä¹Ÿå¾ˆæœ‰æ„æ€ã€‚ æˆ‘ä¼šç»å¸¸é­ç­–è‡ªå·±è¦å‘ä»–ä»¬çœ‹é½ï¼Œè™½ç„¶æˆ‘ç°åœ¨æ²¡æœ‰ä»–ä»¬è¿™ä¹ˆå‰å®³ï¼Œå·¥ä½œå¤§éƒ¨åˆ†ä¹Ÿæ˜¯å†™ä¸šåŠ¡é€»è¾‘ã€‚ä½†æ˜¯å¹¶ä¸ä»£è¡¨æˆ‘æ²¡æœ‰åŠªåŠ›å’Œæ¢¦æƒ³ï¼Œè‡³å°‘æˆ‘è¿˜çŸ¥é“è‡ªå·±ä¸è¶³ï¼Œè¿˜çŸ¥é“è‡ªå·±æƒ³è¦åŠªåŠ›çš„æ–¹å‘ã€‚è¯´çš„ä¸šåŠ¡å±‚é¢ï¼Œæˆ‘è§‰å¾—æˆ‘å·²ç»è¿›æ­¥å¾ˆå¤šäº†ï¼Œå› ä¸ºè…¾è®¯æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å…¬å¸ï¼Œä¸šåŠ¡å¾ˆå¤šå¾ˆæ‚ï¼Œæˆ‘ä»¬éƒ¨é—¨åˆæ‰¿è½½äº†å…¬å¸çš„æ•´ä¸ªè™šæ‹Ÿæ”¯ä»˜çš„ä½“ç³»ï¼Œæ¶‰åŠåˆ°çš„å°±ä¸æ˜¯å•ä¸ªä¸šåŠ¡ï¼Œè€Œæ˜¯ä¸€ç¾¤ä¸šåŠ¡ç»„ã€‚å„ç§å„æ ·çš„æ¸¸æˆå¸ï¼Œqå¸ä»¥åŠåŒ…æœˆæœåŠ¡ç­‰ã€‚é€šè¿‡ç»„é‡Œçš„ä¸€ä¸ªé¡¹ç›®æˆ‘å·²ç»äº†è§£äº†å¾ˆå¤šäº†ï¼Œä¸åœ¨æ˜¯å½“æ—¶é‚£ä¸ªè¿å¬ä»–ä»¬è®¨è®ºé—®é¢˜éƒ½å¬ä¸æ‡‚çš„æˆ‘äº†ã€‚ æˆ‘æœ‰æ²¡æœ‰æƒ³è¿‡æ”¾å¼ƒè¿‡ï¼Ÿ æ²¡æœ‰æ”¾å¼ƒè¿‡ï¼Œåªæœ‰éš¾è¿‡è¿‡ï¼Œ æœ‰çš„æ—¶å€™å·¥ä½œæä¸å®šï¼Œ åŠ äº†å‡ ä¸ªæ˜ŸæœŸå¾ˆé•¿æ—¶é—´çš„ç­ï¼Œæœ‰çš„æ—¶å€™ä¸€ä¸ªé—®é¢˜æ‰¾äº†ä¸€å¤©å‘ç°æ˜¯é‡æ„çš„ bug, æœ‰çš„æ—¶å€™è·ŸåŒäº‹æ²Ÿé€šä¸é¡ºç•…çš„æ—¶å€™ï¼Œéƒ½æœ‰éš¾è¿‡è¿‡ã€‚ä½†æ˜¯ä½ ä¼šå‘ç°ï¼Œå†éš¾çš„é—®é¢˜æ€»æœ‰è§£å†³çš„ä¸€å¤©ï¼ŒçœŸçš„ä¸€åˆ‡éƒ½ä¼šè¿‡å»ã€‚å°±æ¯”å¦‚ä½ å¾ˆåœ¨æ„çš„ä»Šå¤©ï¼Œåœ¨å¾ˆå¤šå¹´åï¼Œä¹Ÿåªæ˜¯ä½ äººç”Ÿä¸­çš„ä¸€ç‚¹ç‚¹ã€‚æœ‰ä¸€æ¬¡ï¼Œè·¯è¿‡ç§‘æŠ€å›­çš„å¤©æ¡¥ï¼Œå“‡çš„ä¸€ä¸‹å°±å“­äº†ï¼Œæ²¡æœ‰åŸå› ï¼Œä¸æ˜¯å› ä¸ºå·¥ä½œï¼Œä¹Ÿä¸æ˜¯å› ä¸ºç”Ÿæ´»ï¼Œå“­çš„å¾ˆæƒ¨å¾ˆæ”¾è‚†ï¼Œä½†æ˜¯å“­å®Œå¥½å¼€å¿ƒã€‚å“ˆå“ˆã€‚ æåˆ°äº†ç§‘æŠ€å›­çš„å¤©æ¡¥ï¼Œæˆ‘ä»Šå¹´ä¸€æ•´å¹´åªè¦ä¸æ˜¯ä¸‹é›¨æˆ–è€…å¤§å§¨å¦ˆï¼Œéƒ½æ˜¯èµ°è·¯å›å®¶ï¼Œå·®ä¸å¤š5km, èµ°åˆ°è…¾å¤§åº•ä¸‹çš„æ—¶å€™ï¼Œå¦‚æœå¤§é¾™ä¹Ÿä¸‹ç­ï¼Œä»–å°±ä¼šé€æˆ‘å›å®¶ã€‚å¯æ˜¯å¤§éƒ¨åˆ†æ—¶é—´ä»–ä¹Ÿå¾ˆå¿™ï¼Œä¸€èˆ¬éƒ½åˆ°11ï¼Œ12ç‚¹äº†ï¼Œæˆ‘å°±ä¼šä¸€ä¸ªäººå›å®¶ã€‚å·®ä¸å¤š10ç‚¹20å·¦å³ä¸‹ç­ï¼Œ 11ç‚¹å·¦å³èƒ½åˆ°å®¶ã€‚æåˆ°è¿™é‡Œä¸çŸ¥é“ä¸ºå•¥ä»–å¾ˆå¿™ï¼Œå¯èƒ½ä¹Ÿæ˜¯å¿™ä¸šåŠ¡ã€‚å¤§é¾™æ˜¯ä¸ªéå¸¸ä¼˜ç§€çš„å‘˜å·¥ï¼Œè‡³å°‘åœ¨æˆ‘å¿ƒé‡Œæ˜¯ã€‚å¦‚æœæˆ‘æ˜¯ä¸ªè€æ¿ï¼Œæˆ‘ä¸€å®šé›‡ä½£ä»–å½“æˆ‘çš„å‘˜å·¥ï¼Œå¾ˆè®¤çœŸï¼Œå¾ˆè´Ÿè´£ï¼Œå¾ˆä¼šå¤„ç†é—®é¢˜ï¼Œæ²Ÿé€šèƒ½åŠ›å¾ˆå¼ºã€‚ä½†æ˜¯å†™ä»£ç æ–¹é¢ï¼Œæˆ‘è§‰å¾—ä»–æ²¡æœ‰ä»€ä¹ˆè¿›æ­¥ï¼Œå¯èƒ½æ˜¯å› ä¸ºä»–ç°åœ¨å·²ç»é€æ¸è½¬è¿ç»´äº†ã€‚æˆ‘è¿™æ¯•ä¸šåŠå¹´æ¥éƒ½æ²¡æœ‰æ„Ÿè¿‡å†’ï¼Œæˆ‘æ€€ç–‘è·Ÿæˆ‘æ¯å¤©èµ°è·¯å›å®¶æœ‰å…³ç³»ï¼Œ è¿˜æœ‰æˆ‘ç°åœ¨ä½çš„æˆ¿å­å¾ˆé€šæ°”ã€‚å˜»å˜»ã€‚ æˆ‘æƒ³åˆ°å“ªé‡Œå°±å†™åˆ°å“ªé‡Œäº†ã€‚åˆšåˆšæåˆ°äº†å¤§å§¨å¦ˆï¼Œè¿™ä¸ªæ˜¯æˆ‘å·¥ä½œçš„å…‹æ˜Ÿã€‚ ä¸¤æ¬¡è¯·ç—…å‡å…¶å®éƒ½æ˜¯å› ä¸ºå¤§å§¨å¦ˆã€‚ä¸çŸ¥é“ä¸ºå•¥ï¼Œä»é«˜ä¸­èµ·ï¼Œæˆ‘å°±ååº”è¿™ä¹ˆæ¿€çƒˆã€‚è€æ˜¯åŠ¨ä¸åŠ¨å°±ç–¼çš„æ™•å€’ï¼Œä½ è‚¯å®šä¸æ‡‚æˆ‘çš„ç—›è‹¦ã€‚çœŸçš„æ˜¯æŠ˜ç£¨æ­»æˆ‘äº†ã€‚å¥½åœ¨å¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨å‘¨æœ«ã€‚æ–°çš„ä¸€å¹´æˆ‘å¸Œæœ›ä¸Šå¸èƒ½ä¿ä½‘æˆ‘ä¸å†ç–¼çš„æ™•å€’ã€‚ æˆ‘ä¸€ç›´æƒ³å†™ä¸€ç¯‡å…³äºäººæ€§å–„è‰¯çš„æ–‡ç« ã€‚å¯¹äºè¿™ä¸ªæˆ‘æ·±æœ‰ç†è§£ã€‚å› ä¸ºæˆ‘çš„å¤§å§¨å¦ˆï¼Œæˆ‘çœŸçš„è®¤è¯†åˆ°ä¸–ç•Œä¸Šçš„å¥½äººçœŸçš„å¾ˆå¤šã€‚å–„è‰¯çš„äººéƒ½å¾ˆå¤šã€‚ ç¬¬ä¸€æ¬¡æ™•å€’æ˜¯é«˜ä¸­è·Ÿå¦ˆå¦ˆåœ¨è¶…å¸‚é€›å®¶å…·ï¼Œé€›ç€é€›ç€å°±æ™•å€’åœ¨äº†æ²™å‘ä¸Šï¼Œå¦ˆå¦ˆè¯´æˆ‘å½“æ—¶è„¸è‰²å‘ç™½ï¼Œæµ‘èº«å‡ºæ±—ï¼Œåªæœ‰ä¸€ç‚¹ä¸€ç‚¹çš„æ„è¯†æ˜¯å¦ˆå¦ˆå“æ­»äº†ï¼Œèµ¶ç´§è·Ÿä¼¯ä¼¯ä¸€èµ·æŠŠæˆ‘é€åˆ°äº†åŒ»é™¢ã€‚ æˆ‘å¥½çˆ±å¥½çˆ±æˆ‘çš„å¦ˆå¦ˆã€‚åæ¥è¿˜æœ‰å‡ æ¬¡å°è±¡æ·±åˆ»çš„ï¼Œé«˜ä¸­åˆä¸€æ¬¡æ™•å€’åœ¨äº†å•æ‰€ï¼Œè€å¸ˆæŠŠæˆ‘å¸¦åˆ°äº†åŒ»åŠ¡å®¤ï¼Œç»™æˆ‘ä»˜äº†åŒ»è¯è´¹ã€‚å½“æ—¶æˆ‘ä¸€ä¸ªæ˜ŸæœŸä¸€å…±å°±20å—é’±ï¼Œæ²¡æœ‰é’±è¿˜ç»™ä»–ï¼Œä»–å°±è¯´æ²¡å…³ç³»ï¼Œä¸ç”¨è¿˜ï¼Œåé¢å†è¿˜éƒ½å¯ä»¥çš„ã€‚åæ¥æˆ‘è¿‡äº†å¥½å‡ ä¸ªæ˜ŸæœŸæ‰è¿˜ç»™ä»–ã€‚è¿˜æœ‰å¥½å‡ æ¬¡æ˜¯è·Ÿå¤§é¾™åœ¨ä¸€èµ·ï¼Œæœ‰ä¸€æ¬¡å¤§é¾™å»æˆ‘å®¶æ¥æˆ‘ï¼Œæˆ‘å‡†å¤‡è·Ÿä»–ä¸€èµ·å»è…¾å¤§åŠ ç­ã€‚ç»“æœåœ°é“ä¸Šå¿½ç„¶æ˜å€’äº†ï¼Œå®Œå…¨å¤±å»äº†æ„è¯†ï¼Œ åæ¥å¤§é¾™æŠŠæˆ‘æ‰˜ä¸‹äº†åœ°é“ï¼Œæœ‰äººç»™æˆ‘è®©äº†ä½ç½®ï¼Œæˆ‘ä¸€ä¼šå°±é†’äº†ï¼Œå½“æ—¶å®Œå…¨å‡ºä¸äº†åœ°é“ç«™ï¼ŒçŸ­çŸ­2åˆ†é’Ÿçš„è·¯ç¨‹ï¼Œæˆ‘èµ°äº†åŠä¸ªå°æ—¶ï¼Œä¸€ç›´ååœ¨åœ°ä¸Šï¼Œæƒ³æƒ³å½“æ—¶æ¥æ¥å¾€å¾€é‚£ä¹ˆå¤šäººï¼Œå¤§é¾™éƒ½å®Œå…¨æ²¡æœ‰å«Œå¼ƒæˆ‘ï¼Œè¿˜ç»™æˆ‘ä¹°æ°´å–ï¼ŒçœŸçš„å¾ˆæ„ŸåŠ¨ã€‚è¿˜æœ‰ä¸€æ¬¡æ˜¯åœ¨è¶…å¸‚é—¨å£ï¼Œå‡ºæ¥å°±ä¸è¡Œäº†ï¼Œæ‰«åœ°çš„é˜¿å§¨å¸®æˆ‘å«äº†äººï¼Œæ”¶è¥å‘˜å§å§ç»™æˆ‘æ‹¿äº†ç‰›å¥¶ï¼Œåæ¥æ‰“ç”µè¯è®©å¤§é¾™é€äº†æˆ‘å›å®¶ã€‚ æˆ‘å½“æ—¶å¿ƒæƒ³ï¼Œ æˆ‘ä¸€å®šè¦å½“ä¸€ä¸ªå¥½äººï¼Œæœ‰èƒ½åŠ›ä¹Ÿå»å¸®åŠ©åˆ«äººã€‚å› ä¸ºæˆ‘å—åˆ°äº†å¤ªå¤šäººçš„å¸®åŠ©ï¼Œè™½ç„¶å†ä»–ä»¬çœ‹èµ·æ¥è™½ç„¶å¾®ä¸è¶³é“ï¼Œä½†æ˜¯è¿™äº›å°å°çš„ä¸¾åŠ¨ï¼Œéƒ½è®©é‚£æ—¶å€™çš„æˆ‘æ„Ÿåˆ°äº†æ·±æ·±çš„åŠ›é‡ã€‚è¿˜æœ‰åœ¨åŠå…¬å®¤ç–¼çš„ä¸è¡Œçš„ï¼Œæˆ‘çœŸçš„è§‰å¾—å¥½ä¸¢äººå¥½ä¸¢äººã€‚ æ‰¯è¿œäº†ï¼Œä¸è¿‡éƒ½æ˜¯æˆ‘çš„è¿™ä¸€å¹´æœ€æ·±çš„æ„Ÿå—ã€‚å†æåˆ°å·¥ä½œæ€»ç»“ï¼Œä¸ŠåŠå¹´å®ä¹ çš„æ—¶å€™ï¼Œè¿˜æœ‰å¥½äº›äº§å‡ºï¼Œä¸‹åŠå¹´çš„æ—¶å€™å¾ˆå¿™ï¼Œå†™çš„æ–‡ç« å¾ˆå°‘äº†ã€‚å…¶å®æˆ‘æœ‰å­¦åˆ°å¾ˆå¤šä¸œè¥¿ï¼Œä½†æ˜¯éƒ½æ²¡æœ‰äº§å‡ºï¼Œå› ä¸ºæ²¡æœ‰æ—¶é—´å»æ€»ç»“ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†æˆ‘æœ‰äº›ä¸œè¥¿åŠçŸ¥åŠè§£ã€‚ä¸‹åŠå¹´çš„æ—¶å€™ä¸€ç›´åœ¨ç”¨ vue å…¨å®¶æ¡¶ï¼Œvue çœŸçš„æ˜¯ä¸ªå¥½æ¡†æ¶ã€‚ç°åœ¨åªæ˜¯åœç•™åœ¨ç†Ÿæ‚‰æ€ä¹ˆç”¨çš„é˜¶æ®µï¼Œä¸‹ä¸ªé˜¶æ®µäº‰å–èƒ½æŠŠé‡Œé¢æ ¸å¿ƒå®ç°çš„æœºåˆ¶äº†è§£æ¸…æ¥šã€‚ ä»Šå¹´è‡ªå·±å†™ä»£ç ï¼Œæ€»æ˜¯è¿™æ ·å†™ï¼š create by sevencai@2017/11/11contact seven.cailidan@gmail.com å°±æ˜¯çŸ­çŸ­çš„è¿™å‡ è¡Œå­—ï¼Œè®©æˆ‘æœ‰åŠ¨åŠ›å»ä¸æ–­çš„ review è‡ªå·±çš„ä»£ç ï¼Œèƒ½ä¸èƒ½å†™çš„æ›´å¥½ï¼Œæ˜¯ä¸æ˜¯è¯­æ³•æ²¡æœ‰ç¬¦åˆè§„èŒƒï¼Œæ˜¯ä¸æ˜¯æœ‰å¯ä»¥ä¼˜åŒ–çš„æ–¹æ³•ã€‚æˆ‘è§‰å¾—è¿™ç‚¹æ²¡æœ‰å˜è¿‡ï¼Œæˆ‘ä¸æƒ³è®©ä»¥åå¦‚æœæœ‰äººçœ‹æˆ‘çš„ä»£ç ï¼Œè¯´æˆ‘å†™çš„ä¸å¥½ã€‚è‡³å°‘ä¸è¦é‚£ä¹ˆéš¾çœ‹ï¼Œå°½åŠ›åšåˆ°æœ€å¥½ã€‚ ä¸ç®¡é¡¹ç›®å†æ€ä¹ˆèµ¶ï¼Œ æˆ‘ä¸€ç›´æé†’ç€è‡ªå·±ã€‚åƒä¸‡ä¸è¦è¢«åäººéª‚ï¼Œè¯´ä¸å®šä½ çš„ä»£ç è¦è·‘10å¹´å‘¢ã€‚ æ²¡æœ‰å»æ—…è¡Œï¼Œ å› ä¸ºæ²¡æœ‰é’±ã€‚å¤§é¾™å“¥è·Ÿæˆ‘æ˜¯åŒä¸€ç±»äººã€‚ä»¥å‰å¤§å­¦çš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šæ¯å¹´éƒ½è·Ÿå°ä¼™ä¼´ä»¬å»æ—…è¡Œï¼Œæ¯ä¸ªäººå°±1000å—é’±ï¼Œåšç¡¬åº§ï¼Œç¡æ—…é¦†ï¼Œ3ï¼Œ4ä¸ªäººæŒ¤åœ¨ä¸€ä¸ªæˆ¿é—´é‡Œï¼Œä¹°ä¸€ä»½ä¸œè¥¿å¤§å®¶ä¸€èµ·åƒï¼Œéƒ½æ˜¯å¾ˆç¾å¥½çš„å›å¿†ï¼Œä½†æ˜¯åˆ°äº†å·¥ä½œï¼ŒçœŸçš„æ˜¯å› ä¸ºæ²¡æœ‰é‚£1000å—é’±äº†å—ï¼Ÿ è¿˜æ˜¯å› ä¸ºè‡ªå·±å·²ç»æ‡’åˆ°è¿å»çœ‹æ›´è¿œæ›´å¤§çš„ä¸–ç•Œçš„å¿ƒéƒ½æ²¡æœ‰äº†ï¼Ÿ æˆ‘è§‰å¾—æ˜¯ç¬¬äºŒç§ã€‚äººå¯æ€•çš„ä¸æ˜¯æ²¡æœ‰ç›®æ ‡ï¼Œå¯æ€•çš„æ˜¯è¿˜è¦ä¸ºè‡ªå·±æ²¡æœ‰ç›®æ ‡æ‰¾å€Ÿå£ã€‚å—¯ï¼Œå°±æ˜¯è¿™æ ·ã€‚è¦æ”¹å˜ã€‚ æåˆ°äº†2018ï¼Œ 2018æ˜¯ä¸ªä¸ä¸€æ ·çš„ä¸€å¹´ã€‚ 2018ï¼Œå¦ˆå¦ˆå°±50å²äº†ã€‚ 2018ï¼Œæˆ‘çš„å°ä¾„å­è¦å‡ºç”Ÿäº†ã€‚2018ï¼Œæ˜¯æˆ‘è·Ÿå¤§é¾™è®¤è¯†çš„ç¬¬7å¹´ã€‚ 2018ï¼Œæˆ‘å°†åœ¨é¹…å‚å·¥ä½œæ»¡ä¸€å¹´ã€‚ 2008å¹´çš„æ—¶å€™ï¼Œçˆ¸çˆ¸å¸¦æˆ‘å»äº†åŒ—äº¬ï¼Œçœ‹äº†åˆ«äººå‡æ——ã€‚è½¬çœ¼é—´10å¹´å°±è¿‡å»äº†ã€‚2018ï¼Œæˆ‘æƒ³å»è¶ŸåŒ—äº¬ï¼Œçˆ¬ä¸‹é•¿åŸï¼Œå»èƒ¡åŒé‡Œåƒéå°åƒã€‚å¯¹è‡ªå·±æœ‰ä¸‹é¢äº›æœŸå¾…ã€‚ç­‰åˆ°2018ç»“æŸçš„æ—¶å€™ï¼Œå†æ¥çœ‹çœ‹è‡ªå·±çš„è¿™äº› flag æœ‰æ²¡æœ‰æˆåŠŸã€‚ åŠæ¸¯æ¾³é€šè¡Œè¯ï¼Œå¸¦å¦ˆå¦ˆæ¥æ·±åœ³é¦™æ¸¯ï¼Œé€›ä¸€é€›ã€‚åƒä¸€æ¬¡ä¸‰åƒæ—¥æœ¬æ–™ç†ã€‚ å»ä¸€è¶ŸåŒ—äº¬ï¼Œçˆ¬ä¸‹é•¿åŸã€‚ åšæŒè¿åŠ¨ï¼Œæ¯å¤©ä¸­åˆåšæŒåƒé¥­ï¼Œæ™šä¸Šåƒæ°´æœï¼Œé”»ç‚¼é”»ç‚¼èº«ä½“ï¼Œå‡ºå‡ºæ±—ã€‚ èƒ½ç˜¦8æ–¤ï¼ˆè¿™ä¸ªæ€•æ˜¯æœ€ä¸å¯èƒ½å®ç°çš„äº†ï¼Œä½†æ˜¯æ¢¦æƒ³è¿˜æ˜¯è¦æœ‰çš„ï¼Œä¸‡ä¸€å‘¢ï¼‰ã€‚ æ™šä¸Š1ç‚¹ä¹‹å‰ç¡è§‰ã€‚ï¼ˆ12.59å…³æ‰‹æœºç¡è§‰ï¼‰ è·Ÿæœ€çˆ±çš„é›ªç´ï¼Œç›¼ç›¼æˆ–è€…å¹²å¤«ï¼Œä¼Ÿæˆä»–ä»¬å‡ ä¸ªä¸€èµ·å»è¶Ÿæˆéƒ½ã€‚ åœ¨æŠŠè‡ªå·±å·¥ä½œåšå¥½çš„æƒ…å†µä¸‹ï¼Œå¯¹ä¸šåŠ¡ç†Ÿæ‚‰çš„æƒ…å†µä¸‹ï¼Œå¤šæå‡è‡ªå·±çš„ä¸“ä¸šæŠ€èƒ½ã€‚ æŠŠé¸Ÿå“¥çš„ linux ç§æˆ¿èœå¥½å¥½å†å­¦ä¹ ä¸‹ã€‚ å¯¹ JS åŸç”Ÿï¼Œè¿˜è¦å†å¤šèŠ±æ—¶é—´å¼„æ¸…æ¥šï¼Œæœ€å¥½å†æŠŠä¹¦å®Œæ•´çš„è¿‡ä¸€éã€‚ å¤šå­¦ç‚¹ Nodejs ã€Http å§, äº‰å–æŠŠå­¦çš„å†…å®¹éƒ½æ•´ç†åˆ°åšå®¢æ¥ï¼Œä¸è¦å·æ‡’ã€‚ çŸ¥å…¶ç„¶ï¼ŒçŸ¥å…¶æ‰€ä»¥ç„¶ã€‚ 2018ï¼ ä½ è¦å»çœ‹æ›´å¤§æ›´è¿œçš„ä¸–ç•Œï¼ä¸æ­¢è„šä¸‹ï¼Œä¸æ­¢ä¹¦ä¸­ï¼Œä¸æ­¢å°†æ¥ï¼(To discover a bigger world!)","categories":[],"tags":[{"name":"ç”Ÿæ´»ä¸æ€»ç»“","slug":"ç”Ÿæ´»ä¸æ€»ç»“","permalink":"http://sevencai.github.io/tags/ç”Ÿæ´»ä¸æ€»ç»“/"}]},{"title":"mac ä¸‹ zsh: command not found","slug":"mac-ä¸‹-zsh-command-not-found","date":"2017-12-15T02:54:30.000Z","updated":"2017-12-15T03:53:20.000Z","comments":true,"path":"2017/12/15/mac-ä¸‹-zsh-command-not-found/","link":"","permalink":"http://sevencai.github.io/2017/12/15/mac-ä¸‹-zsh-command-not-found/","excerpt":"","text":"ç®€å•æ¥è¯´ï¼Œæ˜¯æˆ‘ä½¿ç”¨ tnpm install -g webpack æˆ–è€…ä»»ä½•ä½¿ç”¨ -g æ¥å®‰è£…çš„å…¨å±€ npm åŒ…éƒ½æŠ¥é”™ï¼š zsh: command not found, æƒ³åˆ°äº†è‚¯å®šæ˜¯ç¯å¢ƒå˜é‡å¼•èµ·çš„ï¼Œzsh æ‰¾ä¸åˆ°å…¨å±€åŒ…å®‰è£…çš„ä½ç½®ã€‚ zsh çš„é…ç½®æ–‡ä»¶åœ¨ ~/.zshrc æ–‡ä»¶ä¸­ï¼Œé‡Œé¢å·²ç»æœ‰è¢«é…ç½®äº†çš„ç¯å¢ƒå˜é‡å¦‚ï¼š 123export $PATH = /usr/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin// æˆ–è€…ä½ å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯å·¥å…·ä¸­ echo $PATH æŸ¥çœ‹æš´éœ²çš„å…¨å±€ç¯å¢ƒå˜é‡ å‘ç°é—®é¢˜åï¼Œæ‰¾åˆ°äº† npm -g å®‰è£…çš„å…¨éƒ¨ç›®å½•ä¸ºï¼ˆâ€¦ä¸ºè‡ªå·±çš„ç›®å½•ï¼‰ /usr/local/bin/node/.../bin ä¸‹ï¼Œ æ·»åŠ åˆ° $PATH åé¢å³å¯ã€‚ æ¯ä¸ª : ä»£è¡¨çš„æ˜¯å¤šä¸ªç¯å¢ƒå˜é‡çš„åˆ†å‰²ã€‚ è¿‡ç¨‹ä¸­åšäº†ä¸€ä»¶ç‰¹åˆ«å‚»çš„äº‹æƒ…ï¼Œæ²¡æœ‰æŠŠ npm çš„ç›®å½•ç›´æ¥åœ¨åŸæ¥çš„ export åé¢åŠ ï¼Œè€Œæ˜¯ç›´æ¥æ–°å»ºäº†ä¸€è¡Œï¼Œå¤§æ¦‚æ˜¯ä¸‹é¢è¿™æ ·ï¼š 123456789export PATH = /usr/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbinexport PATH = /usr/local/bin/node/.../binzsh å¯åŠ¨ä¼šæŠ¥é”™ï¼š/Users/sevencai/.oh-my-zsh/oh-my-zsh.sh:3: command not found: envenv_default:1: command not found: envenv_default:1: command not found: grepenv_default:1: command not found: envenv_default:1: command not found: grep è¿™æ ·ä¼šå¯¼è‡´æœ€åçš„ç¯å¢ƒå˜é‡æ˜¯åé¢ä¸€é¡¹ï¼Œå‰é¢è¢«è¦†ç›–äº†ã€‚å¯¼è‡´ä¸€äº›æœ€åŸºæœ¬çš„å‘½ä»¤ï¼Œå¦‚ cat/vi/vim éƒ½ä¸èƒ½ä½¿ç”¨äº†ã€‚å“ˆå“ˆï¼Œè¿viéƒ½ä¸èƒ½ç”¨äº†ï¼Œæˆ‘çŸ¥é“é”™äº†ï¼Œæ€ä¹ˆæ”¹å›æ¥ï¼Ÿ ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­export PATH=/bin:/usr/bin:/usr/local/binï¼Œ ç„¶åå†å» vi ~/.zshrc æ›´æ”¹å°±å¥½äº†ã€‚ zshrc æ˜¯ zsh çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚æœä½ ä¸æ˜¯ç”¨çš„ zsh, è€Œæ˜¯ bash æˆ–è€… shell , é…ç½®æ–‡ä»¶å°±ä¸æ˜¯è¿™ä¸ªäº†ï¼Œæœ‰å¯èƒ½æ˜¯ .bash_profile ä¹‹ç±»çš„ã€‚ è®°å¾—æ¯æ¬¡ modify â€¦rc æ–‡ä»¶åéƒ½ source ä¸‹å“¦ï¼Œ è¦ä¸ä¸ä¼šç”Ÿæ•ˆã€‚ ä¸Šé¢æˆ–è€…ç›´æ¥ä½¿ç”¨ï¼š12export PATH = /usr/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbinexport PATH = $PATH:/usr/local/bin/node/.../bin å³åœ¨è·¯å¾„å‰æˆ–è·¯å¾„åæ·»åŠ  $PATH å˜é‡ï¼Œä¹Ÿå¯ã€‚","categories":[],"tags":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/tags/å·¥å…·-é…ç½®/"}]},{"title":"å—¯ï¼Œåˆæ˜¯çºªå½•å‡ ä¸ªå°çš„çŸ¥è¯†ç‚¹","slug":"å—¯ï¼Œåˆæ˜¯çºªå½•å‡ ä¸ªå°çš„çŸ¥è¯†ç‚¹","date":"2017-10-20T11:54:29.000Z","updated":"2017-12-19T12:40:23.000Z","comments":true,"path":"2017/10/20/å—¯ï¼Œåˆæ˜¯çºªå½•å‡ ä¸ªå°çš„çŸ¥è¯†ç‚¹/","link":"","permalink":"http://sevencai.github.io/2017/10/20/å—¯ï¼Œåˆæ˜¯çºªå½•å‡ ä¸ªå°çš„çŸ¥è¯†ç‚¹/","excerpt":"","text":"Hash maps without side effectsç®€å•çš„æ¥è¯´ï¼Œå½“æˆ‘ä»¬ç”¨ å¯¹è±¡å­—é¢é‡ {} æ¥åˆ›å»ºè¿™ä¸ª hash è¡¨æ—¶ï¼Œä»–ä¼šé»˜è®¤ä» Object ç»§æ‰¿å±æ€§ï¼Œè¿™ç­‰åŒäº Object.create(Object.prototype) , è¿™ä¹ˆæ¥åˆ›å»ºçš„è¯ï¼Œå°±ä¼šæœ‰è„æ•°æ®ï¼Œå› ä¸ºå…¶å®ä½ åªæ˜¯éœ€è¦ä¸€ä¸ª map è€Œå·²ã€‚å¹¶ä¸”åœ¨ for in çš„æ—¶å€™ï¼Œè¿˜éœ€è¦ä½¿ç”¨ hasOwnProperty æ¥åˆ¤æ–­ã€‚ ä½†å¦‚æœä½¿ç”¨ Object.create(null), æˆ‘ä»¬æ˜ç¡®çš„æŒ‡å®šå…¶åŸå‹ä¸º null, å› æ­¤ä»–æ‰æ˜¯çœŸæ­£çš„æ²¡æœ‰æ„é€ å™¨ï¼Œæ²¡æœ‰ toString(), hasOwnProperty, valueOf ç­‰ã€‚æ³¨æ„è¿™é‡Œä¸è¦ä½¿ç”¨ Object.create({}),è¿™ä¸ªæ•ˆæœè·Ÿå‰é¢æ˜¯ä¸€æ ·çš„ã€‚ 12345678910111213141516171819const dirtyMap = &#123;&#125;;const cleanMap = Object.create(null);dirtyMap.constructor // function Object() &#123; [native code] &#125;cleanMap.constructor // undefined// Iterating mapsconst key;for(key in dirtyMap)&#123; if (dirtyMap.hasOwnProperty(key)) &#123; // Check to avoid iterating over inherited properties. console.log(key + \" -&gt; \" + dirtyMap[key]); &#125;&#125;for(key in cleanMap)&#123; console.log(key + \" -&gt; \" + cleanMap[key]); // No need to add extra checks, as the object will always be clean&#125; angular åŒå‘ç»‘å®šå’Œ vueåŒå‘ç»‘å®šAngularJS é‡‡ç”¨â€œè„å€¼æ£€æµ‹â€çš„æ–¹å¼ï¼Œæ•°æ®å‘ç”Ÿå˜æ›´åï¼Œå¯¹äºæ‰€æœ‰çš„æ•°æ®å’Œè§†å›¾çš„ç»‘å®šå…³ç³»è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œè¯†åˆ«æ˜¯å¦æœ‰æ•°æ®å‘ç”Ÿäº†æ”¹å˜ï¼Œæœ‰å˜åŒ–è¿›è¡Œå¤„ç†ï¼Œå¯èƒ½è¿›ä¸€æ­¥å¼•å‘å…¶ä»–æ•°æ®çš„æ”¹å˜ï¼Œæ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹å¯èƒ½ä¼šå¾ªç¯å‡ æ¬¡ï¼Œä¸€ç›´åˆ°ä¸å†æœ‰æ•°æ®å˜åŒ–å‘ç”Ÿåï¼Œå°†å˜æ›´çš„æ•°æ®å‘é€åˆ°è§†å›¾ï¼Œæ›´æ–°é¡µé¢å±•ç°ã€‚å¦‚æœæ˜¯æ‰‹åŠ¨å¯¹ ViewModel çš„æ•°æ®è¿›è¡Œå˜æ›´ï¼Œä¸ºç¡®ä¿å˜æ›´åŒæ­¥åˆ°è§†å›¾ï¼Œéœ€è¦æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡â€œè„å€¼æ£€æµ‹â€ã€‚ VueJS åˆ™ä½¿ç”¨ ES5 æä¾›çš„ Object.defineProperty() æ–¹æ³•ï¼Œç›‘æ§å¯¹æ•°æ®çš„æ“ä½œï¼Œä»è€Œå¯ä»¥è‡ªåŠ¨è§¦å‘æ•°æ®åŒæ­¥ã€‚å¹¶ä¸”ï¼Œç”±äºæ˜¯åœ¨ä¸åŒçš„æ•°æ®ä¸Šè§¦å‘åŒæ­¥ï¼Œå¯ä»¥ç²¾ç¡®çš„å°†å˜æ›´å‘é€ç»™ç»‘å®šçš„è§†å›¾ï¼Œè€Œä¸æ˜¯å¯¹æ‰€æœ‰çš„æ•°æ®éƒ½æ‰§è¡Œä¸€æ¬¡æ£€æµ‹ã€‚ ç§»åŠ¨ç«¯è°ƒè¯•- erudaeruda ç±»ä¼¼äº å°ç¨‹åºçš„ console æ§åˆ¶å°ã€‚ä½†æ˜¯æ¯”å°ç¨‹åºçš„æ›´å¥½ï¼Œä»–è¿˜å¯ä»¥çœ‹ network,cookies,localStorage è¿™äº›éƒ½å¯ä»¥æ˜¾ç¤ºå‡ºæ¥ï¼Œéå¸¸çš„æ–¹ä¾¿ã€‚ç”¨æ³•ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚å¼•å…¥æ–‡ä»¶ï¼Œinitä¸‹å°±å¯ä»¥äº†ã€‚å¦‚æœè§‰å¾—å¼•å…¥äº†å¤šä½™çš„æ–‡ä»¶ï¼Œç”Ÿäº§ç¯å¢ƒå»æ‰å°±è¡Œã€‚ github åœ°å€æ˜¯ï¼šeruda 12&lt;script src=\"//cdn.jsdelivr.net/npm/eruda\"&gt;&lt;/script&gt;&lt;script&gt;eruda.init();&lt;/script&gt; ç¼–è¯‘å’Œè§£é‡Šçš„åŒºåˆ«ç¼–è¯‘å™¨ ç¼–è¯‘å™¨æ˜¯ä¸€ç§è®¡ç®—æœºç¨‹åºï¼Œè´Ÿè´£æŠŠä¸€ç§ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„æºç è½¬æ¢æˆå¦å¤–ä¸€ç§è®¡ç®—æœºä»£ç ï¼Œåè€…å¾€å¾€æ˜¯ä»¥äºŒè¿›åˆ¶çš„å½¢å¼è¢«ç§°ä¸ºç›®æ ‡ä»£ç (object code)ã€‚è¿™ä¸ªè½¬æ¢çš„è¿‡ç¨‹é€šå¸¸çš„ç›®çš„æ˜¯ç”Ÿæˆå¯æ‰§è¡Œçš„ç¨‹åºã€‚ ç¼–è¯‘å™¨éœ€è¦äº§å‡ºå¦å¤–ä¸€ä¸ªä»£ç ã€‚ä»–å¾€å¾€æ˜¯æ‰§è¡Œå‰çš„ä¸€æ­¥ï¼Œäº§å‡ºå¯æ‰§è¡Œæˆ–è€…å†éœ€è¦ç¼–è¯‘çš„ä»£ç ã€‚ è§£é‡Šå™¨ è§£é‡Šå™¨æ˜¯ä¸€ç§è®¡ç®—æœºç¨‹åºï¼Œå®ƒç›´æ¥æ‰§è¡Œç”±ç¼–ç¨‹è¯­è¨€æˆ–è„šæœ¬è¯­è¨€ç¼–å†™çš„ä»£ç ï¼Œå¹¶ä¸ä¼šæŠŠæºä»£ç é¢„ç¼–è¯‘æˆæœºå™¨ç ã€‚ä¸€ä¸ªè§£é‡Šå™¨ï¼Œé€šå¸¸ä¼šç”¨ä»¥ä¸‹çš„å§¿åŠ¿æ¥æ‰§è¡Œç¨‹åºä»£ç ï¼šåˆ†ææºä»£ç ï¼Œå¹¶ä¸”ç›´æ¥æ‰§è¡Œã€‚æŠŠæºä»£ç ç¿»è¯‘æˆç›¸å¯¹æ›´åŠ é«˜æ•ˆç‡çš„ä¸­é—´ç ï¼Œç„¶åç«‹å³æ‰§è¡Œå®ƒã€‚æ‰§è¡Œç”±è§£é‡Šå™¨å†…éƒ¨çš„ç¼–è¯‘å™¨é¢„ç¼–è¯‘åä¿å­˜çš„ä»£ç  å¯ä»¥æŠŠè§£é‡Šå™¨çœ‹æˆä¸€ä¸ªé»‘ç›’å­ï¼Œæˆ‘ä»¬è¾“å…¥æºç ï¼Œå®ƒå°±ä¼šå®æ—¶è¿”å›ç»“æœã€‚ æ€»ç»“èµ·æ¥å¯ä»¥åƒä¸‹é¢è¿™æ ·ç†è§£ï¼šç¼–è¯‘ Compileï¼šæŠŠæ•´ä¸ªç¨‹åºæºä»£ç ç¿»è¯‘æˆå¦å¤–ä¸€ç§ä»£ç ï¼Œç„¶åç­‰å¾…è¢«æ‰§è¡Œï¼Œå‘ç”Ÿåœ¨è¿è¡Œä¹‹å‰ï¼Œäº§ç‰©æ˜¯ã€Œå¦ä¸€ä»½ä»£ç ã€ã€‚ è§£é‡Š Interpretï¼šæŠŠç¨‹åºæºä»£ç ä¸€è¡Œä¸€è¡Œçš„è¯»æ‡‚ç„¶åæ‰§è¡Œï¼Œå‘ç”Ÿåœ¨è¿è¡Œæ—¶ï¼Œäº§ç‰©æ˜¯ã€Œè¿è¡Œç»“æœã€ã€‚ Javascript Style Guideæœ€è¿‘çœ‹åˆ°äº†ä¸€ä¸ªæˆ‘è§‰å¾—å¾ˆåˆç†çš„ Javascript çš„è§„èŒƒæŒ‡å—ã€‚ github åœ°å€æ˜¯ï¼š Airbnb Javascript Style Guide å¯ä»¥åˆ©ç”¨ä»–çš„ eslint è§„èŒƒè‡ªå·±çš„ä»£ç ã€‚æˆ‘è§‰å¾—ä¸é”™ã€‚ Google PageSpeed Insightsæƒ³è¦å¿«é€Ÿæé«˜ç½‘ç«™çš„æ€§èƒ½ï¼Œç”¨è¿™ä¸ªç½‘ç«™éå¸¸å¥½ã€‚ä»–ä¼šç»™ä½ è¯¦ç»†çš„åˆ†æï¼Œæ ¹æ®ç½‘é¡µçš„ä»£ç è´¨é‡å¾—å‡ºæŠ¥å‘Šã€‚å¼€å‘è€…æ ¹æ®è¿™ä¸ªæŠ¥å‘Šï¼Œè¿›è¡Œè°ƒæ•´ã€‚é™¤äº†è¿™ä¸ªå¤–ï¼Œä½¿ç”¨ WebPagetest ä¹Ÿæ˜¯å¾ˆå¥½çš„ã€‚ ä»€ä¹ˆæ˜¯å…³é”® CSSå¯¹CSSæ–‡ä»¶çš„è¯·æ±‚å¯ä»¥æ˜¾è‘—å¢åŠ ç½‘é¡µå‘ˆç°æ‰€éœ€çš„æ—¶é—´ã€‚ åŸå› æ˜¯é»˜è®¤æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨å°†å»¶è¿Ÿé¡µé¢å‘ˆç°ï¼Œç›´åˆ°å®ƒå®ŒæˆåŠ è½½ã€è§£æå’Œæ‰§è¡Œæ‰€æœ‰åœ¨â€œé¡µé¢â€ä¸­å¼•ç”¨çš„CSSæ–‡ä»¶ã€‚ è¿™æ ·åšæ˜¯å› ä¸ºå®ƒéœ€è¦è®¡ç®—é¡µé¢çš„å¸ƒå±€ã€‚ ä¸å¹¸çš„æ˜¯ï¼Œè¿™æ„å‘³ç€å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªéå¸¸å¤§çš„CSSæ–‡ä»¶ï¼Œå¹¶ä¸”éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½å®Œæˆä¸‹è½½ï¼Œæˆ‘ä»¬çš„ç”¨æˆ·å°†åœ¨æµè§ˆå™¨å¼€å§‹å‘ˆç°é¡µé¢ä¹‹å‰ç­‰å¾…æ•´ä¸ªæ–‡ä»¶è¢«ä¸‹è½½ä¸‹æ¥ã€‚ å¹¸è¿çš„æ˜¯ï¼Œæœ‰ä¸€ä¸ªå·§å¦™çš„æŠ€æœ¯ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿä¼˜åŒ–æˆ‘ä»¬çš„CSSçš„ä¼ è¾“å¹¶å‡è½»é˜»å¡ã€‚è¿™ç§æŠ€æœ¯è¢«ç§°ä¸ºä¼˜åŒ–å…³é”®æ¸²æŸ“è·¯å¾„ã€‚å…³é”®æ¸²æŸ“è·¯å¾„è¡¨ç¤ºæµè§ˆå™¨å‘ˆç°é¡µé¢çš„æ‰€æœ‰å¿…é¡»æ­¥éª¤ã€‚ æˆ‘ä»¬æƒ³è¦æ‰¾åˆ°æœ€å°çš„é˜»å¡CSSé›†åˆ ï¼Œæˆ–è€…å…³é”® CSSï¼Œä»¥ä½¿é¡µé¢æ˜¾ç¤ºç»™ç”¨æˆ·ã€‚ å…³é”®èµ„æºæ˜¯å¯èƒ½é˜»å¡é¡µé¢é¦–å±å‘ˆç°çš„æ‰€æœ‰èµ„æºã€‚ è¿™èƒŒåçš„æƒ³æ³•æ˜¯ï¼Œç½‘ç«™åº”è¯¥åœ¨å‰å‡ ä¸ªTCPæ•°æ®åŒ…å“åº”ä¸­ä¸ºç”¨æˆ·è·å–ç¬¬ä¸€ä¸ªå±å¹•çš„å†…å®¹ï¼ˆæˆ–â€œé¦–å±â€å†…å®¹ï¼‰ã€‚ äººå·¥å»æ‰¾ å…³é”® CSSï¼Œå½“ç„¶ä¸å¤ªæ–¹ä¾¿ï¼Œç°åœ¨å‡ºæ¥äº†å¾ˆå¤šçš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æå–å‡ºå…³é”®CSSï¼Œ æ¯”å¦‚ grunt è¿™ç±»å·¥å…·æ¥æå–ã€‚åªæ˜¯å•çº¯çš„å¥½å¥‡ä»€ä¹ˆæ˜¯å…³é”® CSSï¼Œ ä½†æ˜¯æˆ‘å·²ç»å¥½ä¹…æ²¡æœ‰å†™è¿‡ CSS äº†ã€‚ è§£å†³ä¸ª http ç¼“å­˜çš„å›°æƒ‘è®¿é—®ç™¾åº¦é¦–é¡µçš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆåˆ·æ–°é¡µé¢åï¼Œé™æ€èµ„æºéƒ½æ˜¯è¿”å› 200ï¼Œ from cache? æœ‰çš„äººé—®ï¼Œfrom cache ä¸æ˜¯è¿”å› 304 æ‰åˆç†å—ï¼Ÿ å…¶å®ä¸æ˜¯çš„ï¼Œç™¾åº¦é¦–é¡µå†èµ„æºåœ¨åˆ·æ–°åå®é™…æ²¡æœ‰å‘é€ä»»ä½•è¯·æ±‚ï¼Œ å› ä¸º caache-control çš„ç¼“å­˜æ—¶é—´è¿˜æ²¡åˆ°æœŸï¼Œä¹Ÿå°±æ˜¯åœ¨ chrome ä¸­æ ¹æœ¬æ²¡æœ‰å‘é€è¯·æ±‚ã€‚åªè¦æ˜¯ chrome æ²¡æœ‰å‘é€è¯·æ±‚ï¼Œèµ„æºä»æœ¬åœ°è¯»å–ï¼Œéƒ½ä¼šåœ¨ network ä¸­æ˜¾ç¤º çŠ¶æ€ä¸º 200ï¼Œ from cache, å…¶ä¸­çš„ response åªæ˜¯ä¸Šä¸€æ¬¡å›åŒ…ç•™ä¸‹çš„æ•°æ®ã€‚å¦‚æœ cache-control çš„ç¼“å­˜åˆ°æœŸäº†ï¼Œç„¶åå‘äº†è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œä½†æ˜¯æœåŠ¡å™¨é€šè¿‡ etag ç­‰ï¼Œå‘ç°èµ„æºæ²¡æ”¹å˜ï¼Œè¿™æ—¶å€™è‚¯å®šå°±æ˜¯è¿”å› 304 äº†ã€‚ä¸è¦è¢«ç»•é“å‘é‡Œäº†ã€‚ æ€»ç»“å¼€å§‹å·¥ä½œäº†ä»¥åï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯é›¶é›¶æ•£æ•£çš„å­¦ä¹ ã€‚æœ‰äº›ä¸œè¥¿æƒ³è¦ç³»ç»Ÿçš„å†™æˆåšå®¢ï¼Œä½†æ˜¯åŸºæœ¬ä¸Šä¸€ç¯‡ç²¾å¿ƒæƒ³å†™çš„æ–‡ç« ï¼Œè¦èŠ±è‡³å°‘3ä¸ªå°æ—¶ï¼Œæ—¶é—´ç•¥ä¸å¤Ÿã€‚æˆ‘ä¼šæƒ³åŠæ³•è§£å†³ã€‚æ¯”å¦‚ä¸Šé¢çš„åŒå‘ç»‘å®šï¼Œæƒ³ä»”ç»†çš„å†™ç¯‡æ–‡ç« è¯´è¯´é‡Œé¢çš„åŸç†ï¼Œå†æ¯”å¦‚ http ç¼“å­˜ã€‚","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"http://sevencai.github.io/tags/javascript/"}]},{"title":"çºªå½•æœ€è¿‘é‡åˆ°çš„å‘","slug":"çºªå½•æœ€è¿‘é‡åˆ°çš„å‘","date":"2017-10-01T13:39:56.000Z","updated":"2017-10-01T13:41:45.000Z","comments":true,"path":"2017/10/01/çºªå½•æœ€è¿‘é‡åˆ°çš„å‘/","link":"","permalink":"http://sevencai.github.io/2017/10/01/çºªå½•æœ€è¿‘é‡åˆ°çš„å‘/","excerpt":"","text":"è®°å½•æœ€è¿‘é‡åˆ°çš„å‘ssi æœªè¢«è§£æä»Šå¤©æ¥å…¥ ssi é…ç½®ï¼Œæœ¬ä»¥ä¸ºåªéœ€è¦ include åœ°å€æ­£ç¡®å°±è¡Œäº†ã€‚ç»“æœæ‰§è¡Œ gulp å‘½ä»¤åï¼Œç«Ÿç„¶ç”Ÿæˆçš„ dist é‡Œæ˜¾ç¤ºä¸å‡ºæ¥ ssi åœ°å€ã€‚æˆ‘ä»¥ä¸ºæ˜¯æˆ‘ virtual ç»å¯¹åœ°å€é”™è¯¯äº†ã€‚åæ¥æ¢æˆäº† file,è¿˜æ˜¯ä¸æ­£ç¡®ã€‚ æœ€ç»ˆå‘ç°æˆ‘åœ¨å‹ç¼© HTML çš„æ—¶å€™ï¼Œç”¨çš„ gulp-minify-html ç«Ÿç„¶æŠŠæˆ‘çš„ ssi å½“æˆæ³¨é‡Šç»™å»æ‰äº†ã€‚è§£å†³æ–¹æ³•æ˜¯ æŠŠè¿™ä¸ªæ’ä»¶æ¢æˆ gulp-htmlmin,è¿™ä¸ªè§£ææœºåˆ¶ä¼šç¨å¾®å¥½ä¸€äº›ï¼Œä¼šä¿ç•™æˆ‘çš„ ssi çš„å†…å®¹ã€‚ 1&lt;!--#include virtual=\"h5/test.js\"--&gt; Mixed Contentä»Šå¤©åœ¨å…¬å¸åŠ ç­ï¼Œçªç„¶åŒäº‹è®©æˆ‘å¸®ä»–çœ‹ä¸ªé—®é¢˜ï¼Œ é¡µé¢ç‚¹å‡»æ²¡ååº”ã€‚æˆ‘çŒœæµ‹æ˜¯ JS æœªè¢«æ­£å¸¸åŠ è½½ï¼Œä¸€çœ‹æœç„¶æ˜¯ï¼š é¡µé¢æ˜¾ç¤º 1Mixed Content: The page at was loaded over HTTPS, but requested an insecure script This request has been blocked; the content must be served over HTTPS. é”™è¯¯å°±ç›´ç™½çš„æ˜¾ç¤ºé¡µé¢æ˜¯ä»¥ https åŠ è½½çš„ï¼Œ ä½†æ˜¯å´è¯·æ±‚äº†ä¸€ä¸ªä¸å®‰å…¨çš„ script, è¿™ä¸ª script ä¸æ˜¯ https çš„ï¼Œè€Œæ˜¯ https çš„ã€‚å› æ­¤è¯·æ±‚è¢«æµè§ˆå™¨æ‹¦æˆªäº†ã€‚ è¿™ä¸ªé—®é¢˜æˆ‘ä»¥å‰æ˜¯çŸ¥é“çš„ï¼Œä½†æ˜¯è¿™æ¬¡æ‰çŸ¥é“è¿™ä¸ªç°è±¡åªå‡ºç°åœ¨ ios çš„æœºå™¨ä¸Šï¼Œ æŸäº› android å¯¹åº”çš„æµè§ˆå™¨ ä¸Šæ˜¯æ²¡é—®é¢˜çš„ã€‚å› æ­¤ä»”ç»†äº†è§£äº†ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œè®°å½•å¦‚ä¸‹ã€‚ ä»€ä¹ˆæ˜¯æ··åˆå†…å®¹ï¼Ÿ æ··åˆå†…å®¹åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å‡ºç°ï¼šåˆå§‹ HTML å†…å®¹é€šè¿‡å®‰å…¨çš„ HTTPS è¿æ¥åŠ è½½ï¼Œä½†å…¶ä»–èµ„æºï¼ˆä¾‹å¦‚ï¼Œå›¾åƒã€è§†é¢‘ã€æ ·å¼è¡¨ã€è„šæœ¬ï¼‰åˆ™é€šè¿‡ä¸å®‰å…¨çš„ HTTP è¿æ¥åŠ è½½ã€‚ä¹‹æ‰€ä»¥ç§°ä¸ºæ··åˆå†…å®¹ï¼Œæ˜¯å› ä¸ºåŒæ—¶åŠ è½½äº† HTTP å’Œ HTTPS å†…å®¹ä»¥æ˜¾ç¤ºåŒä¸€ä¸ªé¡µé¢ï¼Œä¸”é€šè¿‡ HTTPS åŠ è½½çš„åˆå§‹è¯·æ±‚æ˜¯å®‰å…¨çš„ã€‚ç°ä»£æµè§ˆå™¨ä¼šé’ˆå¯¹æ­¤ç±»å‹çš„å†…å®¹æ˜¾ç¤ºè­¦å‘Šï¼Œä»¥å‘ç”¨æˆ·è¡¨æ˜æ­¤é¡µé¢åŒ…å«ä¸å®‰å…¨çš„èµ„æºã€‚ ä¹‹æ‰€ä»¥ç”¨ https å¾ˆæ¸…æ¥šï¼Œ https å¯ä»¥å¸®åŠ©æˆ‘ä»¬ï¼š èº«ä»½éªŒè¯ï¼Œ ä¸è¢«é‡å®šå‘ æ•°æ®å®Œæ•´æ€§ï¼Œä¸ä¼šæœ‰äººç¯¡æ”¹æ­£åœ¨å‘é€å’Œæ¥æ”¶çš„å†…å®¹ ä¿å¯†æ€§ï¼Œä¼šä½¿ç”¨ TLS æä¾›åŠ å¯† ä½†æ˜¯å¹¶ä¸æ˜¯æ¯ä¸ªç½‘ç«™çš„æ¯ä¸ªè®¿é—®è€…éƒ½ä¼šä½¿ç”¨æœ€æ–°çš„æµè§ˆå™¨ï¼Œå¹¶ä¸”ä¸åŒçš„æµè§ˆå™¨å•†çš„ä¸åŒç‰ˆæœ¬çš„æµè§ˆå™¨å¤„ç†æ··åˆå†…å®¹çš„æ–¹å¼ä¹Ÿä¸æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚ æ³¨æ„æ··åˆå†…å®¹ä¸ä»…ä»…åœ¨ https å¼•å…¥ http æ–‡ä»¶ä¸­ï¼Œåœ¨ https é¡µé¢é‡Œé€šè¿‡ ajax çš„å½¢å¼è¯·æ±‚ http èµ„æºï¼Œä¹Ÿæ˜¯ä¼šè¢« block æ‰çš„ã€‚ å¦‚æœä½ çš„é¡¹ç›®å¾ˆå¤§ï¼Œä¸€ä¸‹å­æ²¡åŠæ³•å…¨éƒ¨è½¬æ¢å®Œæˆï¼Œå°±å¯ä»¥ä½¿ç”¨ï¼š 1&lt;meta http-equiv=\"Content-Security-Policy\" content=\"upgrade-insecure-requests\"&gt; å¯ä»¥åœ¨ç›¸åº”çš„é¡µé¢çš„é‡ŒåŠ ä¸Šè¿™å¥ä»£ç ï¼Œupgrade-insecure-requests æ„æ€æ˜¯è‡ªåŠ¨å°†httpçš„ä¸å®‰å…¨è¯·æ±‚å‡çº§ä¸ºhttpsã€‚ å¾®ä¿¡å¼€å‘å·¥å…·å¾®ä¿¡å¼€å‘å·¥å…·è‡ªä»æ›´æ–°äº†æ–°ç‰ˆæœ¬åï¼Œæˆ‘çœŸçš„è§‰å¾—å¥½éš¾ç”¨å•Šã€‚ã€‚ã€‚è¿™é‡Œè®°å½•ä¸€ä¸ªåˆšå¼€å§‹ä½¿ç”¨ å¾®ä¿¡å¼€å‘å·¥å…·å‘ç°æ— æ³•ä½¿ç”¨çš„æƒ…å†µã€‚æ˜¯å› ä¸ºä»–ä»¬å·¥å…·æœ‰ä¸ª bug, è‡ªåŠ¨æ²¡æœ‰è½¬æˆ httpsã€‚é‚£ä¸ªé”™è¯¯æ˜¯å¯ä»¥åœ¨å¾®ä¿¡å¼€å‘å·¥å…·çš„è¯·æ±‚ä¸­çœ‹åˆ°çš„ï¼Œæ˜¯ä¸ª debug è¯·æ±‚ã€‚è¦ç”¨ fiddler æˆ–è€… whistle é‡å®šå‘ä¸‹ï¼š 12# å¾®ä¿¡å¼€å‘è€…å·¥å…·https whistlehttp://mp.weixin.qq.com https://mp.weixin.qq.com é¡ºä¾¿æä¸‹ï¼šwhistle æ˜¯ä¸ªå¾ˆå¥½çš„ä»£æ›¿ fiddler çš„å·¥å…·ï¼Œå› ä¸ºé…ç½®æ›´åŠ çµæ´»ï¼Œæ¯”å¦‚æ­£åˆ™é€šé…å•¥çš„ï¼Œè€Œä¸”ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ï¼Œè·¨å¹³å°ä½¿ç”¨ï¼Œå®Œå…¨æ²¡æœ‰éš”é˜‚ã€‚","categories":[],"tags":[{"name":"javascripts","slug":"javascripts","permalink":"http://sevencai.github.io/tags/javascripts/"}]},{"title":"çºªå½•å‡ ä¸ªç‚¹","slug":"çºªå½•å‡ ä¸ªç‚¹","date":"2017-08-24T08:24:32.000Z","updated":"2017-12-19T12:40:23.000Z","comments":true,"path":"2017/08/24/çºªå½•å‡ ä¸ªç‚¹/","link":"","permalink":"http://sevencai.github.io/2017/08/24/çºªå½•å‡ ä¸ªç‚¹/","excerpt":"","text":"Object.create()åˆ›å»ºObjectçš„å®ä¾‹æœ‰ä¸‹é¢ä¸‰ç§æ–¹æ³•ï¼š123var o1 = Object.create(Object.prototype);var o2 = new Object;var o3 = &#123;&#125;; é€šè¿‡ï¼švar o4 = Object.create(null);å¯ä»¥åˆ›å»ºæ²¡æœ‰åŸå‹çš„Object,è¿™ä¸ªå¯¹è±¡ä¸èƒ½ä½¿ç”¨ toString,valueOfç­‰å‡½æ•°ã€‚ åˆ›å»ºä¸€ä¸ªä»¥å¦ä¸€ä¸ªç©ºå¯¹è±¡ä¸ºåŸå‹,ä¸”æ‹¥æœ‰ä¸€ä¸ªå±æ€§pçš„å¯¹è±¡1o = Object.create(&#123;&#125;, &#123; p: &#123; value: 42 &#125; &#125;) å­—ç¬¦ä¸²åˆ¤æ–­åœ¨æ¶‰åŠå…¶å®ƒè¿ç®—ç¬¦ï¼ˆè¯‘æ³¨ï¼šå¦‚ä¸‹é¢çš„å‡å·â€™-â€˜ï¼‰æ—¶ï¼ŒJavaScriptè¯­è¨€ä¸ä¼šæŠŠæ•°å­—å˜ä¸ºå­—ç¬¦ä¸²ã€‚12\"37\" - 7 // 30\"37\" + 7 // \"377\" å•ç›®åŠ æ³•è¿ç®—ç¬¦å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å•ç›®åŠ æ³•è¿ç®—ç¬¦ã€‚12\"1.1\" + \"1.1\" = \"1.11.1\"(+\"1.1\") + (+\"1.1\") = 2.2 // æ³¨ï¼šåŠ å…¥æ‹¬å·ä¸ºæ¸…æ¥šèµ·è§ï¼Œä¸æ˜¯å¿…éœ€çš„ã€‚ false åˆ¤æ–­å½“ä¼ é€’ç»™æ¡ä»¶è¯­å¥æ—¶ï¼Œæ‰€æœ‰å…¶ä»–å€¼ï¼ŒåŒ…æ‹¬æ‰€æœ‰å¯¹è±¡ä¼šè¢«è®¡ç®—ä¸º true ã€‚123456falseundefinednull0NaNç©ºå­—ç¬¦ä¸² (\"\") è¯·ä¸è¦æ··æ·†åŸå§‹çš„å¸ƒå°”å€¼trueå’Œfalse ä¸ å¸ƒå°”å¯¹è±¡çš„å€¼trueå’Œfalse.123var b = new Boolean(false);if (b) // this condition evaluates to trueif (b == true) // this condition evaluates to false promise catch error12345678910111213141516171819function imgLoad(url) &#123; return new Promise(function(resolve, reject) &#123; var request = new XMLHttpRequest(); request.open('GET', url); request.responseType = 'blob'; request.onload = function() &#123; if (request.status === 200) &#123; resolve(request.response); &#125; else &#123; reject(Error('Image didn\\'t load successfully; error code:' + request.statusText)); &#125; &#125;; request.onerror = function() &#123; reject(Error('There was a network error.')); &#125;; request.send(); &#125;);&#125; forâ€¦of statementè¯¥æ–°ç‰¹æ€§å±äº ECMAScript 2015ï¼ˆES6ï¼‰è§„èŒƒï¼Œåœ¨ä½¿ç”¨æ—¶è¯·æ³¨æ„æµè§ˆå™¨å…¼å®¹æ€§ã€‚ä¸‹é¢çš„è¿™ä¸ªä¾‹å­å±•ç¤ºäº† forâ€¦of å’Œ forâ€¦in ä¸¤ç§å¾ªç¯è¯­å¥ä¹‹é—´çš„åŒºåˆ«ã€‚ä¸ forâ€¦in å¾ªç¯éå†çš„ç»“æœæ˜¯æ•°ç»„å…ƒç´ çš„ä¸‹æ ‡ä¸åŒçš„æ˜¯ï¼Œ forâ€¦of éå†çš„ç»“æœæ˜¯å…ƒç´ çš„å€¼ï¼š12345678910let arr = [3, 5, 7];arr.foo = \"hello\";for (let i in arr) &#123; console.log(i); // logs \"0\", \"1\", \"2\", \"foo\"&#125;for (let i of arr) &#123; console.log(i); // logs \"3\", \"5\", \"7\" // æ³¨æ„è¿™é‡Œæ²¡æœ‰ hello&#125; å‰©ä½™å‚æ•°(rest parameters)å‰©ä½™å‚æ•°è¯­æ³•å…è®¸å°†ä¸ç¡®å®šæ•°é‡çš„å‚æ•°è¡¨ç¤ºä¸ºæ•°ç»„ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨å‰©ä½™å‚æ•°æ”¶é›†ä»ç¬¬äºŒä¸ªåˆ°æœ€åå‚æ•°ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†è¿™ä¸ªæ•°ç»„çš„æ¯ä¸€ä¸ªæ•°ä¸ç¬¬ä¸€ä¸ªå‚æ•°ç›¸ä¹˜ã€‚123456function multiply(multiplier, ...theArgs) &#123; return theArgs.map(x =&gt; multiplier * x);&#125;var arr = multiply(2, 1, 2, 3);console.log(arr); // [2, 4, 6] åˆ—ä¸¾å¯¹è±¡å±æ€§ä» ECMAScript 5 å¼€å§‹ï¼Œæœ‰ä¸‰ç§åŸç”Ÿçš„æ–¹æ³•ç”¨äºåˆ—å‡ºæˆ–æšä¸¾å¯¹è±¡çš„å±æ€§ï¼š 1.for...in å¾ªç¯è¯¥æ–¹æ³•ä¾æ¬¡è®¿é—®ä¸€ä¸ªå¯¹è±¡åŠå…¶åŸå‹é“¾ä¸­æ‰€æœ‰å¯æšä¸¾çš„å±æ€§ã€‚ 2.Object.keys(o)è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ o è‡ªèº«åŒ…å«ï¼ˆä¸åŒ…æ‹¬åŸå‹ä¸­ï¼‰çš„æ‰€æœ‰å±æ€§çš„åç§°çš„æ•°ç»„ã€‚ 3.Object.getOwnPropertyNames(o)è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…å«äº†å¯¹è±¡ o æ‰€æœ‰æ‹¥æœ‰çš„å±æ€§ï¼ˆæ— è®ºæ˜¯å¦å¯æšä¸¾ï¼‰çš„åç§°ã€‚ ä½¿ç”¨ defineProperty ä¸ºå·²å­˜åœ¨çš„å¯¹è±¡å®šä¹‰ setterset è¯­æ³•å°†å¯¹è±¡å±æ€§ç»‘å®šåˆ°è¦è°ƒç”¨çš„ä¸€ä¸ªå‡½æ•°ä¸Šï¼Œ å½“å°è¯•è®¾ç½®è¯¥å±æ€§æ—¶ã€‚123456789var o = &#123; a:0 &#125;Object.defineProperties(o, &#123; \"b\": &#123; get: function () &#123; return this.a + 1; &#125; &#125;, \"c\": &#123; set: function (x) &#123; this.a = x / 2; &#125; &#125;&#125;);o.c = 10 // Runs the setter, which assigns 10 / 2 (5) to the 'a' propertyconsole.log(o.b) // Runs the getter, which yields a + 1 or 6 ä½¿ç”¨definePropertyåœ¨å­˜åœ¨çš„å¯¹è±¡ä¸Šå®šä¹‰ getterget è¯­æ³•å°†ä¸€ä¸ªå¯¹è±¡å±æ€§ç»‘å®šåˆ°æŸ¥è¯¢è¯¥å±æ€§æ—¶å°†è¢«è°ƒç”¨çš„ä¸€ä¸ªå‡½æ•°ä¸Šã€‚1234var o = &#123; a:0 &#125;Object.defineProperty(o, \"b\", &#123; get: function () &#123; return this.a + 1; &#125; &#125;);console.log(o.b) // Runs the getter, which yields a + 1 (which is 1) defineProperty çš„ getter/setter æ–¹æ³•å°±æ˜¯ Vue åŒå‘ç»‘å®šçš„ä¸€éƒ¨åˆ†æœºåˆ¶ã€‚ åˆ¤æ–­æµè§ˆå™¨é«˜åº¦æ³¨æ„ï¼Œnavigatorçš„ä¿¡æ¯å¯ä»¥å¾ˆå®¹æ˜“åœ°è¢«ç”¨æˆ·ä¿®æ”¹ï¼Œæ‰€ä»¥JavaScriptè¯»å–çš„å€¼ä¸ä¸€å®šæ˜¯æ­£ç¡®çš„ã€‚å¾ˆå¤šåˆå­¦è€…ä¸ºäº†é’ˆå¯¹ä¸åŒæµè§ˆå™¨ç¼–å†™ä¸åŒçš„ä»£ç ï¼Œå–œæ¬¢ç”¨ifåˆ¤æ–­æµè§ˆå™¨ç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼š123456789var width;if (getIEVersion(navigator.userAgent) &lt; 9) &#123; width = document.body.clientWidth;&#125; else &#123; width = window.innerWidth;&#125;ä½†è¿™æ ·æ—¢å¯èƒ½åˆ¤æ–­ä¸å‡†ç¡®ï¼Œä¹Ÿå¾ˆéš¾ç»´æŠ¤ä»£ç ã€‚æ­£ç¡®çš„æ–¹æ³•æ˜¯å……åˆ†åˆ©ç”¨JavaScriptå¯¹ä¸å­˜åœ¨å±æ€§è¿”å›undefinedçš„ç‰¹æ€§ï¼Œç›´æ¥ç”¨çŸ­è·¯è¿ç®—ç¬¦||è®¡ç®—ï¼švar width = window.innerWidth || document.body.clientWidth; å‡ ä¸ªé«˜åº¦1.windowå¯¹è±¡ä¸ä½†å……å½“å…¨å±€ä½œç”¨åŸŸï¼Œè€Œä¸”è¡¨ç¤ºæµè§ˆå™¨çª—å£ã€‚ 2.windowå¯¹è±¡æœ‰innerWidthå’ŒinnerHeightå±æ€§ï¼Œå¯ä»¥è·å–æµè§ˆå™¨çª—å£çš„å†…éƒ¨å®½åº¦å’Œé«˜åº¦ã€‚å†…éƒ¨å®½é«˜æ˜¯æŒ‡é™¤å»èœå•æ ã€å·¥å…·æ ã€è¾¹æ¡†ç­‰å ä½å…ƒç´ åï¼Œç”¨äºæ˜¾ç¤ºç½‘é¡µçš„å‡€å®½é«˜ã€‚ 3.outerWidthå’ŒouterHeightå±æ€§ï¼Œå¯ä»¥è·å–æµè§ˆå™¨çª—å£çš„æ•´ä¸ªå®½é«˜ã€‚ 4.screenå¯¹è±¡è¡¨ç¤ºå±å¹•çš„ä¿¡æ¯ï¼Œå¸¸ç”¨çš„å±æ€§æœ‰ï¼šscreen.widthï¼šå±å¹•å®½åº¦ï¼Œä»¥åƒç´ ä¸ºå•ä½ï¼›screen.heightï¼šå±å¹•é«˜åº¦ï¼Œä»¥åƒç´ ä¸ºå•ä½ï¼› location å¯¹è±¡locationå¯¹è±¡è¡¨ç¤ºå½“å‰é¡µé¢çš„URLä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå®Œæ•´çš„URLï¼šhttp://www.example.com:8080/path/index.html?a=1&amp;b=2#TOPå¯ä»¥ç”¨location.hrefè·å–ã€‚è¦è·å¾—URLå„ä¸ªéƒ¨åˆ†çš„å€¼ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š 123456location.protocol; // 'http'location.host; // 'www.example.com'location.port; // '8080'location.pathname; // '/path/index.html'location.search; // '?a=1&amp;b=2'location.hash; // 'TOP' DOM å¯¹è±¡ä½ç‰ˆæœ¬çš„IE&lt;8ä¸æ”¯æŒquerySelectorå’ŒquerySelectorAllã€‚IE8ä»…æœ‰é™æ”¯æŒã€‚ JSON.stringifyå“ˆå“ˆï¼Œ ä»Šå¤©æ‰çŸ¥é“ JSON.stringify æœ‰ç¬¬äºŒä¸ªå‚æ•°å’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œæ˜¯ä¸æ˜¯å¾ˆèœã€‚ 123456789101112131415161718192021222324252627var obj = &#123; \"name\": \"å°æ˜\", \"age\": 14, \"skills\": [ \"JavaScript\", \"Java\", \"Python\", \"Lisp\" ]&#125;;// ä¼ å…¥æ•°ç»„ï¼Œç”¨äºç­›é€‰éœ€è¦å¾—åˆ°çš„keyå’Œvalueï¼Œä¼ å…¥keyJSON.stringify(obj, [\"name\", \"skills\"]);// =&gt; \"&#123;\"name\":\"å°æ˜\",\"skills\":[\"JavaScript\",\"Java\",\"Python\",\"Lisp\"]&#125;\"// ä¼ å…¥å‡½æ•°ï¼Œ ç”¨äºåœ¨åºåˆ—åŒ–ä¹‹å‰å¯¹æ¯å¯¹é”®å€¼è¿›è¡Œå¤„ç†function convert(key, value) &#123; if(typeof value === \"string\") &#123; return value.toUpperCase(); &#125; return value;&#125;JSON.stringify(obj, convert); åŒæ ·ï¼Œ JSON.parse ä¹Ÿæœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥å¤„ç†å¾—åˆ°åçš„JSONä¸²ã€‚ 1234567JSON.parse(obj, function (key, value) &#123; if(key === \"name\") &#123; return value + \"å°æœ‹å‹\"; &#125; return value;&#125;) filterfilter ä¸€èˆ¬å¯èƒ½æˆ‘ä»¬åªç”¨ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå…¶å®è¿˜æœ‰ç¬¬äºŒä¸ªï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ã€‚1234567var arr = ['A', 'B', 'C'];var r = arr.filter(function (element, index, self) &#123; console.log(element); // ä¾æ¬¡æ‰“å°'A', 'B', 'C' console.log(index); // ä¾æ¬¡æ‰“å°0, 1, 2 console.log(self); // selfå°±æ˜¯å˜é‡arr return true;&#125;); åˆ©ç”¨ filter å»é™¤é‡Œé¢æœªå®šä¹‰å…ƒç´ æˆ–è€…ç©ºå­—ç¬¦ä¸²ï¼š1234567var arr = ['A', '', null, undefined, 'R'];var newArr = arr.filter(function (ele) &#123; return ele &amp;&amp; ele.trim();&#125;)// =&gt; [\"A\", \"R\"] åˆ©ç”¨ filter å»é‡ï¼š1234567var fruits = ['apple', 'orange', 'banana', 'apple'];var r = fruits.filter(function (ele, index, self) &#123; return self.indexOf(ele) === index;&#125;)// =&gt; [\"apple\", \"orange\", \"banana\"] åˆ©ç”¨ filter å»é™¤å¶æ•°ï¼š1234567var arr = [1,2,3,4,5,6,7,8];var r = arr.filter(function (ele) &#123; return ele % 2 !== 0;&#125;)// =&gt; [1, 3, 5, 7] åƒä¸‡ä¸è¦ç›´æ¥ç”¨ JS é‡Œçš„ Sort12345678// çœ‹ä¸Šå»æ­£å¸¸çš„ç»“æœ:['Google', 'Apple', 'Microsoft'].sort(); // ['Apple', 'Google', 'Microsoft'];// appleæ’åœ¨äº†æœ€å:['Google', 'apple', 'Microsoft'].sort(); // ['Google', 'Microsoft\", 'apple']// æ— æ³•ç†è§£çš„ç»“æœ:[10, 20, 1, 2].sort(); // [1, 10, 2, 20] å­—ç¬¦ä¸²éƒ½æ˜¯æŒ‰ç…§ ASCII ç æ¥æ’åˆ—ï¼Œæ‰€ä»¥1,2 æ²¡é—®é¢˜ï¼Œåªæ˜¯å¹³å¸¸è¦æ³¨æ„è¿™ä¸ªåœ°æ–¹ã€‚åé¢ä¸€ä¸ªä¸€å®šè¦è®°ä½ Array.sort é»˜è®¤éƒ½ä¼šæŠŠå…ƒç´ è½¬æ¢ä¸º å­—ç¬¦ä¸²ï¼Œå†æ¥æ’åºã€‚æ‰€ä»¥è¿åŸºæœ¬çš„æ•°å­—æ’åºä»–éƒ½æ²¡åšå¥½ã€‚ ä½†æ˜¯ sort å¯ä»¥ä¼ å…¥ä¸€ä¸ª function ç”¨æ¥è‡ªå®šä¹‰æ’åºï¼š 123456789101112131415161718192021var arr = [10, 20, 1, 2];// ä»å°åˆ°å¤§var r = arr.sort(function (x, y) &#123; if(x &gt; y) return 1; if(x = y) return 0; if(x &lt; y) return -1;&#125;)// sort æ–¹æ³•ä¼šå¯¹åŸæ•°ç»„è¿›è¡Œä¿®æ”¹ï¼Œå¹¶ä¸”è¿”å›çš„ä¹Ÿæ˜¯ä¿®æ”¹åçš„æ•°ç»„// arr =&gt; [1, 2, 10, 20]// r =&gt; [1, 2, 10, 20]var r = arr.sort(function (x, y) &#123; if(x &lt; y) return 1; if(x = y) return 0; if(x &gt; y) return -1;&#125;)// arr =&gt; [20, 10, 2, 1]// r =&gt; [20, 10, 2, 1]","categories":[],"tags":[{"name":"other","slug":"other","permalink":"http://sevencai.github.io/tags/other/"}]},{"title":"Understanding Vuex","slug":"Understanding-Vuex","date":"2017-07-11T09:21:39.000Z","updated":"2017-07-12T06:44:46.000Z","comments":true,"path":"2017/07/11/Understanding-Vuex/","link":"","permalink":"http://sevencai.github.io/2017/07/11/Understanding-Vuex/","excerpt":"","text":"Recently, I try to use Vuex to do some small projects. After some studies, I find a better way for myself to understand and use it. Here, I just put them done in my blog for later reading. If you find any grammar mistakes or misleading opinions, please let me kown. Thank you. define a storeFirst define a store. A store should contain 4 parts, they are state mutaions actions getters after define these 4 parts, combine them by using Vue.Store(). State is an Object. It contains all the data information of your app. Each Vuex instance is just a single state tree. mutations are operations that actually mutates state. And state can only be changed by mutations. Each mutaion handler gets the entire state tree as the first argument, followed by additional payload arguments. Mutations must be synchronous and be recorded by plugins for debugging purposes. actions are functions that causes side effects and handle your logical process . Unlike mutations, you can involve asynchronous operations. getters are functions. letâ€™s see an counter example. 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152import Vue from 'vue'import Vuex from 'vuex'Vue.use(Vuex)//define root state object.const state = &#123; count: 0&#125;// define mutaionsconst mutations = &#123; increment (state) &#123; state.count++ &#125;, decrement (state) &#123; state.count-- &#125;&#125;// define actionsconst actions = &#123; increment: (&#123; commit &#125;) =&gt; commit('increment'), decrement: (&#123; commit &#125;) =&gt; commit('decrement'), incrementIfOdd (&#123; commit, state &#125;) &#123; if ((state.count + 1) % 2 === 0) &#123; commit('increment') &#125; &#125;, incrementAsync (&#123; commit &#125;) &#123; return new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; commit('increment') resolve() &#125;, 1000) &#125;) &#125;&#125;// define gettersconst getters = &#123; evenOrOdd: state =&gt; state.count % 2 === 0 ? 'even' : 'odd'&#125;// A Vuex instance is created by combining the state, mutations, actions,// and getters.export default new Vuex.Store(&#123; state, getters, actions, mutations&#125;) The above example comes from https://github.com/vuejs/vuex. You can see that all the four parts are been written in one file, which is bad for big and complex projects. To avoid this, just split them, and then combine them together. define entryYou may have an root element in your app. Just set the store and the view component to the root element. In this way , your store will be available in any place of your application.123456789import Vue from 'vue'import Counter from './Counter.vue'import store from './store'new Vue(&#123; el: '#app', store, render: h =&gt; h(Counter)&#125;) Then, you just need to include this file in your index.html. Shared.js is common code that you extract by webpack.bundle.js includes all the code that you need in this app. 12345&lt;body&gt; &lt;div id=\"app\"&gt;&lt;/div&gt; &lt;script src=\"shared.js\"&gt;&lt;/script&gt; &lt;script src=\"bundle.js\"&gt;&lt;/script&gt;&lt;/body&gt; write your view componentAfter defining the entry, We can begin write our component. Notice that you can use your Store Object now. Use $store.state.count to get your state info. And by functions like mapGetters and mapActions ,you can get the functions that you have just defined in store a moment ago. 12345678910111213141516171819202122232425&lt;template&gt; &lt;div id=\"app\"&gt; Clicked: &#123;&#123; $store.state.count &#125;&#125; times, count is &#123;&#123; evenOrOdd &#125;&#125;. &lt;button @click=\"increment\"&gt;+&lt;/button&gt; &lt;button @click=\"decrement\"&gt;-&lt;/button&gt; &lt;button @click=\"incrementIfOdd\"&gt;Increment if odd&lt;/button&gt; &lt;button @click=\"incrementAsync\"&gt;Increment async&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; import &#123; mapGetters, mapActions &#125; from 'vuex' export default &#123; computed: mapGetters([ 'evenOrOdd' ]), methods: mapActions([ 'increment', 'decrement', 'incrementIfOdd', 'incrementAsync' ]) &#125;&lt;/script&gt; run the appWe have just used ES2015 and vue, so itâ€™s necessary to use webpack compiling all the code. Actually, I am not very skilled in webpack. So I keep them down, and give some small introductions for later checking out. 1234567891011121314151617181920212223242526272829303132const webpack = require('webpack');const path = require('path');module.exports = &#123; entry: './app.js', output: &#123; path: __dirname, filename: 'bundle.js' &#125;, module: &#123; rules: [ &#123;test: /\\.js$/, exclude: /node_modules/, loader: 'babel-loader'&#125;, &#123;test: /\\.vue$/, loader: 'vue-loader'&#125; ] &#125;, plugins: [ new webpack.optimize.CommonsChunkPlugin(&#123; name: 'shared', filename: 'shared.js' &#125;), //get share.js new webpack.DefinePlugin(&#123; // ç¼–è¯‘æ—¶é…ç½®çš„å…¨å±€å˜é‡ 'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV || 'development') &#125;), new webpack.HotModuleReplacementPlugin(), //çƒ­æ›´æ–°æ’ä»¶ new webpack.NoEmitOnErrorsPlugin() //ä¸è§¦å‘é”™è¯¯,å³ç¼–è¯‘åè¿è¡Œçš„åŒ…æ­£å¸¸è¿è¡Œ ]&#125; After make the webpack.config,letâ€™s start the server. Here, we can use express to build a little server. 1234567891011121314151617181920212223242526272829303132const express = require('express')const webpack = require('webpack')const webpackConfig = require('./webpack.config')const webpackHotMiddleware = require('webpack-hot-middleware')const webpackDevMiddleware = require('webpack-dev-middleware')const opn = require('opn')const app = express()const port = process.env.PORT || 8080const autoOpenBrowser = true //you can load the config from your config file.const compiler = webpack(webpackConfig)app.use(webpackDevMiddleware(compiler, &#123; stats: &#123; colors: true, chunks: false &#125;&#125;))app.use(webpackHotMiddleware(compiler))app.use(express.static(__dirname))module.exports = app.listen(port, (err) =&gt; &#123; if(err) return console.log(`Server listening on http://localhost:$&#123;port&#125;, Ctrl+C to stop`) if(autoOpenBrowser) &#123; opn(`http://localhost:$&#123;port&#125;`) &#125;&#125;) npm package opn was used to force open the browser.","categories":[],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"ç”± Fetch è·¨åŸŸ çœ‹ CORS","slug":"ç”±-Fetch-API-çœ‹-CORS","date":"2017-03-06T07:59:49.000Z","updated":"2017-07-11T09:31:21.000Z","comments":true,"path":"2017/03/06/ç”±-Fetch-API-çœ‹-CORS/","link":"","permalink":"http://sevencai.github.io/2017/03/06/ç”±-Fetch-API-çœ‹-CORS/","excerpt":"","text":"æœ€è¿‘åœ¨çœ‹ react è·å–æœåŠ¡å™¨æ•°æ®æ—¶ï¼Œ çœ‹åˆ°äº†ä¸€æ–°çš„ API fetchï¼Œ ä¸Šæ‰‹æ¥ç”¨äº†ç”¨ï¼Œè§‰å¾—ååˆ†å¥½ç”¨ã€‚ä½†æ˜¯ä½¿ç”¨çš„è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œè¿˜æ˜¯å†³å®šæ•´ä½“çš„è®°å½•ä¸‹ã€‚ fetch ç±»ä¼¼äº Ajax, åŒºåˆ«è‡ªåœ¨ä¸ fetch ç»“åˆäº† promise çš„å‹å¥½è°ƒç”¨æ–¹å¼ï¼Œæœ‰æ•ˆçš„é˜²æ­¢äº† callback hellã€‚ fetch() allows you to make network requests similar to XMLHttpRequest (XHR). The main difference is that the Fetch API uses Promises, which enables a simpler and cleaner API, avoiding callback hell and having to remember the complex API of XMLHttpRequest. å¯¹æ¯”ä¼ ç»Ÿæ–¹å¼ä¸ fetchå…ˆæ„Ÿå—ä¸‹å¥½ç”¨åœ¨å“ªå„¿ï¼š123456789101112131415161718fetch('./api/some.json') .then( function(response) &#123; if (response.status !== 200) &#123; console.log('Looks like there was a problem. Status Code: ' + response.status); return; &#125; // Examine the text in the response response.json().then(function(data) &#123; console.log(data); &#125;); &#125; ) .catch(function(err) &#123; console.log('Fetch Error :-S', err); &#125;); ç›¸æ¯”äºä¼ ç»Ÿçš„ XMLHttpRequest çš„å¦‚ä¸‹å†™æ³•ï¼š 1234567891011121314function reqListener() &#123; var data = JSON.parse(this.responseText); console.log(data); &#125;function reqError(err) &#123; console.log('Fetch Error :-S', err); &#125;var oReq = new XMLHttpRequest(); oReq.onload = reqListener; oReq.onerror = reqError; oReq.open('get', './api/some.json', true); oReq.send(); ä¼ ç»Ÿçš„ XMLHttpRequest éœ€è¦ä½¿ç”¨ä¸¤ä¸ªå›è°ƒå‡½æ•°ï¼Œåˆ†åˆ«åœ¨ onload å’Œ onerror çš„æ—¶å€™ä½¿ç”¨ã€‚å¹¶ä¸”ä½¿ç”¨ open å’Œ send ä¸¤ä¸ª api, è¿™ä¹ˆçœ‹æ¥ fetch æ˜¯ä¸æ˜¯å¾ˆå¥½ç”¨ã€‚ fetch è·¨åŸŸåœ¨ç”¨ fetch çš„æ—¶å€™ï¼Œè·Ÿæ™®é€š ajax ä¸€æ ·ï¼Œç»å¸¸ä¼šé‡åˆ° è·¨åŸŸçš„æƒ…å†µï¼Œé‚£ä¹ˆè·¨åŸŸåº”è¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿ åˆ†ä¸ºä¸‹é¢ä¸¤ç§æƒ…å†µï¼Œä¹Ÿå¯ä»¥çœ‹æˆ‘åœ¨çŸ¥ä¹ä¸Šçš„å›ç­”ï¼š 1. å¦‚æœæœåŠ¡å™¨ä¸æ”¯æŒ CORSï¼Œ åˆ™ä¸ç”¨ä½¿ç”¨ Fetch Api äº†ã€‚ å› ä¸ºæ­¤æ—¶å¦‚æœä½ è®¾ç½®äº† {mode: &#39; cors &#39;}ï¼Œå°±ä¼šæŠ¥é”™å‘Šè¯‰ä½ ä½ è¯·æ±‚çš„æœåŠ¡å™¨ä¸æ”¯æŒ CORSã€‚å¤§æ¦‚ä¼šæŠ¥ä¸‹é¢çš„é”™è¯¯ï¼š Response to preflight request doesnâ€™t pass access control check: No â€˜Access-Control-Allow-Originâ€™ header is present on the requested resource. å¦‚æœè®¾ç½®æˆ {mode: &#39; no-cors &#39;}, è™½ç„¶ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯ç»“æœä¼š è¿”å›è¢«æ ‡è®°äº†ä¸º opaque çš„æ•°æ®ï¼Œè¡¨æ˜ä½ æ²¡æœ‰æƒé™è®¿é—®ã€‚ è¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨ JSONPã€‚ 2. å¦‚æœæœåŠ¡å™¨æ”¯æŒ CORS, åˆ™åœ¨å®¢æˆ·ç«¯è®¾ç½®ç›¸åº”çš„ Access-Control-Allow-Origin å³å¯å¾—åˆ°æ•°æ®ã€‚ 1234567891011let myHeaders = new Headers(&#123; 'Access-Control-Allow-Origin': '*', 'Content-Type': 'text/plain'&#125;);fetch(url, &#123; method: 'GET', headers: myHeaders, mode: 'cors'&#125;) .then((res) =&gt; &#123; // TODO &#125;) å›åˆ°åˆšåˆšçš„ç¬¬ä¸€ç§æƒ…å†µï¼Œ å¦‚æœ è®¾ç½® {mode: &#39;no-cors&#39;} è¿”å›çš„æ•°æ®éƒ½æ˜¯ opaque çš„ï¼Œé‚£è¿˜è¦è¿™ç§ mode å¹²å˜›å‘¢ï¼Ÿ no-cors is intended to make requests to other origins that do not have CORS headers and result in an opaque response, but as stated, this isnâ€™t possible in the window global scope at the moment. introduction-to-fetchè¿™ç¯‡æ–‡ç« ç»™äº†æˆ‘ä»¬è§£é‡Šï¼Œå°±æ˜¯æ¯”å¦‚ä½ å‘é€ä¸€äº› log_data çš„æ•°æ®ï¼Œ ä¸ŠæŠ¥ä¸€äº›æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™ä½ æ˜¯ä¸éœ€è¦è¿”å›çš„ï¼Œé‚£åˆ©ç”¨ no-cors å°±æ˜¯æ²¡é—®é¢˜çš„äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ {mode: â€˜no-corsâ€™} æ¨¡å¼å…è®¸æ¥è‡ª CDN çš„è„šæœ¬ã€å…¶ä»–åŸŸçš„å›¾ç‰‡å’Œå…¶ä»–ä¸€äº›è·¨åŸŸèµ„æºæˆ–è€…ä¸éœ€è¦è¿”å›èµ„æºçš„, ä½†æ˜¯ cors æ¨¡å¼ä¸€èˆ¬ç”¨æ¥è·¨åŸŸè¯·æ±‚ï¼Œä»è€Œä»ç¬¬ä¸‰æ–¹æä¾›çš„ API è·å–æ•°æ®ã€‚ ç¼ºç‚¹ä¸ä¼˜ç‚¹ä¼˜ç‚¹ä¸Šé¢å·²ç»è®²åˆ°äº†ï¼Œæ¯”å¦‚æ”¯æŒ primise çš„æ–¹å¼ï¼Œæ¯”å¦‚ç®€ä»‹çš„ API, å¤šæ ·çš„è®¾ç½®ã€‚ ä½†æ˜¯è¿˜æœ‰ä¸€ç§æƒ…å†µå¯èƒ½ä¼šä½¿ç”¨åˆ°ï¼š æ¯”å¦‚ä½ éœ€è¦çš„ä¼ ç»™æœåŠ¡å™¨çš„æ•°æ®å¾ˆå¤§ï¼Œè¿™æ—¶å€™ç”¨ä¼ ç»Ÿçš„ JSONP ä¸å¤ªåˆé€‚ï¼Œå› ä¸º JSONP åªæ”¯æŒ GET, ä¸æ”¯æŒ POST, è¿™ä¸ªæ—¶å€™ä¹Ÿå¯ä»¥ç”¨ Fetch, ç»™ç›¸åº”çš„æœåŠ¡å™¨è®¾ç½®ä¸€ä¸‹ CORS å³å¯ã€‚ æœ‰ä¸€ä¸ªç¼ºç‚¹æ˜¯æµè§ˆå™¨ä¸å…¼å®¹ï¼Œè¿˜æœ‰ä¸€ä¸ªç¼ºç‚¹ å’Œ promise ä¸€æ ·ï¼Œä¸€æ—¦å‘ç”Ÿäº†å°±ä¸èƒ½å–æ¶ˆã€‚ å…¶ä»–æ³¨æ„çš„åœ°æ–¹1.åœ¨ Firefox 39, Chrome 42 ä»¥ä¸Šéƒ½æ”¯æŒäº†ï¼Œ å¯¹äºå…¶ä»–æµè§ˆå™¨ï¼Œå»ºè®®ä½¿ç”¨ Fetch Polyfil 2.Fetch å¼•å…¥äº† 3 ä¸ªæ¥å£ï¼Œåˆ†åˆ«æ˜¯ Headersï¼ŒRequest å’Œ Responseï¼Œ è¿™é‡Œå°±ä¸è®²è§£å…·ä½“æ€ä¹ˆç”¨äº†ã€‚ ç†è§£CORSåœ¨ç”¨ fetch çš„è¿‡ç¨‹ä¸­ï¼Œ å‘ç°è‡ªå·±å¯¹ CORS çš„ç†è§£è¿˜æ˜¯ä¸å®Œå…¨ï¼Œåˆå­¦ä¹ äº†ä¸‹ï¼š è·¨æ¥æºèµ„æºå…±äº«ï¼ˆCORSï¼‰æ˜¯ä¸€ä»½æµè§ˆå™¨æŠ€æœ¯çš„è§„èŒƒï¼Œæä¾›äº† Web æœåŠ¡ä»ä¸åŒç½‘åŸŸä¼ æ¥æ²™ç›’è„šæœ¬çš„æ–¹æ³•ï¼Œä»¥é¿å¼€æµè§ˆå™¨çš„åŒæºç­–ç•¥[1]ï¼Œæ˜¯ JSONP æ¨¡å¼çš„ç°ä»£ç‰ˆã€‚ä¸ JSONP ä¸åŒï¼ŒCORS é™¤äº† GET è¦æ±‚æ–¹æ³•ä»¥å¤–ä¹Ÿæ”¯æŒå…¶ä»–çš„ HTTP è¦æ±‚ã€‚ç”¨ CORS å¯ä»¥è®©ç½‘é¡µè®¾è®¡å¸ˆç”¨ä¸€èˆ¬çš„ XMLHttpRequestï¼Œè¿™ç§æ–¹å¼çš„é”™è¯¯å¤„ç†æ¯” JSONP è¦æ¥çš„å¥½ã€‚å¦ä¸€æ–¹é¢ï¼ŒJSONP å¯ä»¥åœ¨ä¸æ”¯æŒ CORS çš„è€æ—§æµè§ˆå™¨ä¸Šè¿ä½œã€‚ç°ä»£çš„æµè§ˆå™¨éƒ½æ”¯æŒ CORS ç®€å•çš„è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå‘é€ä¸€ä¸ªå“åº”æ ‡å¤´ï¼Œ å°±å¯ä»¥å…è®¸ä¸€ä¸ªåŸŸä¸Šçš„ç½‘ç»œå‘å¦å¤–ä¸€ä¸ªåŸŸæäº¤è·¨åŸŸè¯·æ±‚ã€‚ è¿™ç§æ–¹æ³•å°±æ˜¯ CORS ,æ˜¯ä¸€ç§è·¨åŸŸçš„è®¿é—®æœºåˆ¶ã€‚ æ¯”å¦‚åœ¨æˆ‘çš„ php ä»£ç ä¸­ header ä¸€ä¸‹ï¼š 1header(\"Access-Control-Allow-Origin: *\"); ç„¶åå†æµè§ˆå™¨è¿”å›ç»™æˆ‘ä»¬çš„ Response Headers é‡Œé¢å°±æœ‰ä¸‹é¢çš„ä¿¡æ¯ï¼š CORS çš„è¯·æ±‚åˆåŒ…æ‹¬äº† ä¸¤ç±»ï¼Œæœ‰ç®€å•è¯·æ±‚ä»¥åŠéç®€å•è¯·æ±‚ä¸¤ç§ã€‚ä¸¤ç§å…·ä½“ä¸åŒåœ¨äºå¯¹æœåŠ¡å™¨è¯·æ±‚çš„ä¸åŒã€‚ å¦‚æœæ˜¯ç®€å•çš„ HEADã€GETã€POST ï¼ŒContent-Typeåªé™äºä¸‰ä¸ªå€¼ï¼šapplication/x-www-form-urlencodedã€multipart/form-dataã€text/plainï¼Œè¿™ç§æƒ…å†µå°±æ˜¯ç®€å•è¯·æ±‚ã€‚ å¦‚æœæœ‰è¯·æ±‚æ–¹æ³•æ˜¯PUTæˆ–DELETEï¼Œæˆ–è€…Content-Typeå­—æ®µçš„ç±»å‹æ˜¯application/json çš„æ—¶å€™ï¼Œé‚£ä¹ˆå¯ä»¥è®¤ä¸ºæ˜¯å¤æ‚è¯·æ±‚ã€‚ ä¸¤è€…çš„åŒºåˆ«åœ¨äº åè€…ï¼ˆå¤æ‚è¯·æ±‚ï¼‰å›å»åœ¨çœŸæ­£çš„è¯·æ±‚æœåŠ¡å™¨èµ„æºå‰ï¼Œ å…ˆå‘ä¸€æ¬¡é¢„æ£€è¯·æ±‚ï¼Œæµè§ˆå™¨å…ˆè¯¢é—®æœåŠ¡å™¨ï¼Œå½“å‰ç½‘é¡µæ‰€åœ¨çš„åŸŸåæ˜¯å¦åœ¨æœåŠ¡å™¨çš„è®¸å¯åå•ä¹‹ä¸­ï¼Œä»¥åŠå¯ä»¥ä½¿ç”¨å“ªäº›HTTPåŠ¨è¯å’Œå¤´ä¿¡æ¯å­—æ®µã€‚åªæœ‰å¾—åˆ°è‚¯å®šç­”å¤ï¼Œæµè§ˆå™¨æ‰ä¼šå‘å‡ºæ­£å¼çš„XMLHttpRequestè¯·æ±‚ï¼Œå¦åˆ™å°±æŠ¥é”™ã€‚è€Œç¬¬ä¸€ç§å°±æ˜¯ä¸ç®¡æ€ä¹ˆæ ·éƒ½ä¼šå…ˆå‘ä¸€æ¬¡ XMLHttpRequestã€‚ æ›´åŠ å…·ä½“çš„å¯ä»¥å‚è€ƒæ–‡ç« understanding/CORSå’Œæ–‡ç« from è½¯è€å¸ˆçš„cors other tipsåœ¨å­¦ä¹  fetch çš„è¿‡ç¨‹ä¸­ï¼Œ çœ‹åˆ°äº†ä¸€ç¯‡æ–‡ç« javascript ajax libraries, è¿™ç¯‡æ–‡ç« é‡Œé¢æ€»ç»“äº†ä¸‹æˆ‘ä»¬å‘èµ· http è¯·æ±‚æ—¶ï¼Œç”¨åˆ°çš„ä¸€äº›åº“çš„å¯¹æ¯”ã€‚æˆ‘è§‰å¾—æ€»ç»“çš„å¾ˆå¥½ã€‚é™„æ–‡ç« ä¸­çš„ä¸€ä¸ªå›¾ã€‚ æ€»ç»“æ€»ä½“æ¥è¯´å°±æ˜¯å­¦ä¹ äº†ä¸€ä¸ªæ–°çš„ API, ç„¶ååˆè¿›ä¸€æ­¥äº†è§£äº†ä¸‹ CORS, äº†è§£äº†ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ Fetch, CORS åˆæ˜¯åœºåˆä¸‹ç”¨ï¼Œå¹¶ä¸”åˆ†ä¸ºå“ªäº›ä¸­æƒ…å†µã€‚ é˜…è¯»å¹¶æ¨èèµ„æºå¦‚ä¸‹ï¼Œååˆ†æ„Ÿè°¢ï¼š introduction-to-fetch introduction-to-fetch fetchçš„å…·ä½“ä½¿ç”¨æ–¹æ³• CORSçš„ä¸¤ç§å¤„ç†æ–¹å¼","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"http://sevencai.github.io/tags/javascript/"}]},{"title":"æ¢ç´¢Promiseç”¨æ³•å’Œæœºåˆ¶","slug":"æ·±åº¦æ¢ç´¢Promiseæœºåˆ¶","date":"2017-02-27T13:36:38.000Z","updated":"2017-12-19T12:40:23.000Z","comments":true,"path":"2017/02/27/æ·±åº¦æ¢ç´¢Promiseæœºåˆ¶/","link":"","permalink":"http://sevencai.github.io/2017/02/27/æ·±åº¦æ¢ç´¢Promiseæœºåˆ¶/","excerpt":"","text":"ä»¥å‰å°±ä¼šç»å¸¸ç”¨åˆ° Promiseï¼Œä½†æ˜¯æ²¡æœ‰å»æ¢ç©¶å†…éƒ¨çš„å®ç°æœºåˆ¶ã€‚ æ­£å¥½ç”±è¿™æ¬¡åœ¨å°ç¨‹åºä¸­å¼•å…¥äº† Promise ï¼Œæ¢ç©¶ä¸‹å†…éƒ¨åŸç†ã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨ PromisePromise å¯ä»¥è®©æˆ‘ä»¬é¿å…å›è°ƒçš„åœ°ç‹±ã€‚ä»¥å‰æˆ‘ä»¬å¯èƒ½ä½¿ç”¨çš„æ˜¯ bluebird æˆ–è€… Q,ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†åŸç”Ÿçš„å®ç°ã€‚1234567891011func1(function (value1) &#123; func2(value1, function (value2) &#123; func3(value2, function (value3) &#123; func4(value3, function (value4) &#123; func5(value4, function (value5) &#123; // Do something with value 5 &#125;); &#125;); &#125;); &#125;);&#125;); ä½¿ç”¨ Promise åï¼Œå¯ä»¥æŠŠå¹³è¡Œçš„ä»£ç å˜æˆç«–çŠ¶çš„æ˜“è¯»çš„ä»£ç ã€‚12345func1(value) .then(func2) .then(func3) .then(func4) .then(func5) ä¸€ä¸ªæœ€å¸¸è§çš„ Promise çš„ä¾‹å­å¦‚ä¸‹ï¼š1234567891011var request = require('request');return new Promise((resolve, reject) =&gt; &#123; request.get(url, (error, response, body) =&gt; &#123; if(body) &#123; resolve(JSON.parse(body)); &#125; else &#123; resolve(&#123;&#125;); //reject(....); &#125; &#125;)&#125;) å°ç¨‹åº Promise åŒ–å®ç°å°ç¨‹åºé‡Œï¼ŒåŒ…æ‹¬å®˜æ–¹æ–‡æ¡£çš„ demo é‡Œä¼šçœ‹åˆ°å¾ˆå¤šçš„ cb, æ¯”å¦‚æˆ‘ä»¬è·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯å°±éœ€è¦ä¸‹é¢çš„æ“ä½œï¼š12345678910wx.login(&#123; success: function () &#123; wx.getUserInfo(&#123; success: function (res) &#123; that.globalData.userInfo = res.userInfo; typeof cb == \"function\" &amp;&amp; cb(that.globalData.userInfo) &#125; &#125;) &#125;&#125;); è¿™æ ·ç•¥å¾®æ·±çš„åµŒå¥—ä¸€å®šç¨‹åº¦çš„é˜»ç¢äº†æˆ‘ä»¬çš„é˜…è¯»å’Œç†è§£ï¼Œä»£ç æ•´ä½“ä¹Ÿä¸å¥½æŸ¥ bug å’Œ æ‰©å±•ã€‚æ‰€ä»¥æˆ‘è€ƒè™‘åˆ°ç”¨ Promise æ‰©å±•ä¸€å±‚ã€‚ ä½†æ˜¯ç”±äºå°ç¨‹åºå·²ç»å»é™¤äº† è‡ªå¸¦çš„ Promise ï¼Œæ‰€ä»¥éœ€è¦å¼€å‘è€…è‡ªåŠ¨å¼•å…¥ Promise åº“ï¼Œæˆ–è€…ç¼–å†™ç›¸åº”çš„ Promise åº“ã€‚è¿™é‡Œæˆ‘å¼•å…¥ es6-promise è¿™ä¸ªåº“ã€‚æ³¨æ„ä¸è¦ä½¿ç”¨ bluebird ï¼Œbluebird ä¼šå¯¼è‡´android ä¸Šæœ‰æŠ¥é”™ï¼Œå› ä¸ºè¿™ä¸ªé‡Œé¢æœ‰ç”¨åˆ°ä¸€äº›å°ç¨‹åºä¸æ”¯æŒçš„æ¯”å¦‚ document, windowä¹‹ç±»çš„å¯¹è±¡ã€‚ é€‰å–ä¸€å°æ®µæ²¡ä½¿ç”¨çš„ä»£ç å¦‚ä¸‹ï¼š12345678910var Promise = require('es6-promise').Promise; var wxLib = require('../wxLib);wxLib.login().then(()=&gt;&#123; wxLib.getUserInfo();&#125;).catch(()=&gt;&#123; wxLib.showErrorMsg();&#125;) promise æ›´æ˜“æˆ‘ä»¬çœ‹æ¸…æ•´ä¸ªçš„ç»“æ„ã€‚æ›´å¥½çš„æ§åˆ¶å¼‚æ­¥æµç¨‹ï¼Œ ä¹Ÿå¯ä»¥è®©æˆ‘ä»¬ä½¿ç”¨æœ¬æ¥ä¸æ–¹ä¾¿ä½¿ç”¨çš„ return, throw ç­‰ã€‚ æ›´å¤šå…¶ä»–çš„ç”¨æ³•å…³äº Promise çš„å‡ ä¸ªæ³¨æ„çš„åœ°æ–¹ Promise å¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥æ‰éœ€è¦ new Promise ç”Ÿæˆä¸€ä¸ª Pormise çš„å®ä¾‹å¯¹è±¡ã€‚ Promise æ„é€ å‡½æ•°æ¥å—äº†ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ resolve å’Œ reject, è¿™ä¸¤ä¸ªå‡½æ•°ç”± js å¼•æ“æä¾›ï¼Œä¸éœ€è¦è‡ªå·±å®ç°ã€‚ resolve æ˜¯å°† Promise å¯¹è±¡ä» æœªå®Œæˆ =&gt; æˆåŠŸã€‚ï¼ˆpending =&gt; resolvedï¼‰, reject æ˜¯ å°†å¯¹è±¡çš„çŠ¶æ€ä» æœªå®Œæˆ=&gt; å¤±è´¥ã€‚ï¼ˆpending=&gt;rejectedï¼‰ then æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå›è°ƒå‡½æ•°ã€‚ç¬¬ä¸€ä¸ªæ˜¯ Promise è¿”å› resolved çš„æ—¶å€™è°ƒç”¨çš„ï¼Œ ç¬¬äºŒä¸ªæ˜¯ è¿”å› rejected çš„æ—¶å€™è°ƒç”¨çš„ã€‚ Promise catch æ˜¯ .then(null, rejection)çš„åˆ«åï¼Œé‡Œé¢çš„å›è°ƒç”¨äºå‘ç”Ÿé”™è¯¯æ—¶ä½¿ç”¨ã€‚ 12345678910111213141516// è¿™ç§æƒ…å†µä¸ä¼šæ•æ‰then é‡Œçš„é”™è¯¯promise .then(function(data) &#123; // success &#125;, function(err) &#123; // error &#125;);// betterpromise .then(function(data) &#123; //cb // success &#125;) .catch(function(err) &#123; // error &#125;); å…³äºPromise.allçš„ç”¨æ³• var p = Promise.all([p1, p2, p3]);å…¶ä¸­ Promise.all ä¼šæ¥æ”¶ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œ p1,p2,p3éƒ½æ˜¯ Promise å¯¹è±¡çš„å®ä¾‹ã€‚ å¦‚æœä¸æ˜¯ï¼Œåˆ™è°ƒç”¨ Promise.resolve æ–¹æ³•ï¼Œå°†å‚æ•°è½¬åŒ–ä¸º Promise å®ä¾‹ã€‚ ä»–ä»¬ä¸‰ä¸ªä¹‹é—´çš„å…³ç³»æ˜¯ï¼š å¿…é¡»éƒ½å˜æˆ fulfilled ï¼Œ pæ‰æ˜¯ fulfilled, åªè¦æœ‰ä¸€ä¸ªæ˜¯ rejected, å°±ä¼šæ˜¯ rejected, å¹¶ä¸”è¿™ä¸ªç¬¬ä¸€ä¸ªè¢« reject çš„å®ä¾‹çš„è¿”å›å€¼å°±ä¼šç»™åˆ° Pã€‚ haha, æŒºå›¢ç»“çš„ã€‚ 12345678910111213141516171819202122let urls = [ '/api/commits', '/api/issues/opened', '/api/issues/assigned', '/api/issues/completed', '/api/issues/comments', '/api/pullrequests'];let promises = urls.map((url) =&gt; &#123; return new Promise((resolve, reject) =&gt; &#123; $.ajax(&#123; url: url &#125;) .done((data) =&gt; &#123; resolve(data); &#125;) &#125;)&#125;)Promise.all(promises) .then((results) =&gt; &#123; // results is an array list&#125;) æœ‰ä¸€ä¸ªæ–¹æ³•å«åš Promise.race() è·Ÿ Promise.all å·®ä¸å¤šã€‚ä¹Ÿæ˜¯ var p = Promise.race([p1, p2, p3]); p1, p2, p3 åªè¦æœ‰ä¸€ä¸ªç‡å…ˆæ”¹å˜ï¼Œp çš„çŠ¶æ€å°±ä¼šæ”¹ï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªç‡å…ˆæ”¹çš„è¿”å›å€¼ç»™åˆ° Pã€‚ Promise.resolve() çš„ ç”¨æ³•ä¸Šé¢æåˆ°äº†ï¼Œ promise.all å’Œ promise.race çš„å‚æ•° p1, p2, p3 éƒ½å¿…é¡»æ˜¯ promise çš„å®ä¾‹å¯¹è±¡ã€‚ å¦‚æœä¸æ˜¯ï¼Œå°±éœ€è¦è½¬åŒ–ä¸º Promise å¯¹è±¡ã€‚ Promise.resolve å°±æ´¾ä¸Šäº†ç”¨æ³•ã€‚ 12Promise.resolve('foo');new Promise(resolve =&gt; resolve('foo')); Promise.resolve æ–¹æ³•çš„å‚æ•°åˆ†æˆä¸‹é¢å‡ ä¸ªæƒ…å†µï¼š Promise.resolve(value); Promise.resolve(promise); Promise.resolve(thenable); 12345678910Promise.resolve(\"Success\").then(function(value) &#123; console.log(value); // \"Success\"&#125;, function(value) &#123; // ä¸ä¼šè¢«è°ƒç”¨&#125;);var p = Promise.resolve([1,2,3]);p.then(function(v) &#123; console.log(v[0]); // 1&#125;); å®ç°ä¸€ä¸ªç®€æ˜“çš„ Promiseè¿™é‡Œå®ç°çš„è¿‡ç¨‹æˆ‘å‚è€ƒé˜…è¯»äº†å¾ˆå¤šç¯‡æ–‡ç« ï¼Œæ„Ÿè°¢ï¼Œå…·ä½“æœ‰ï¼š å‰–æPromiseå†…éƒ¨ç»“æ„ how-do-promises-work JS Promiseçš„å®ç°åŸç† å…ˆæ­ä¸€ä¸ªç®€å•çš„æ¡†æ¶ã€‚ æ„é€ å‡½æ•°çš„å®ç°123456789101112131415161718192021// processor å°±æ˜¯ä¼ ç»™ Promise çš„å‡½æ•°function Promise(processor) &#123; this.status = 'pending'; this.data = undefined; this.onResolvedCb = []; this.onRejectedCb = []; this.resolve = (value) =&gt; &#123; //TODO &#125; this.reject = (reason) =&gt; &#123; //TODO &#125; try&#123; (typeof processor === 'function') &amp;&amp; processor(resolve, reject); &#125;catch(e) &#123; reject(e); &#125; &#125; ç„¶åæ˜¯å¯¹ resolve å’Œ reject çš„å®ç°ï¼Œ æˆ‘ä»¬ç”¨åŸç”Ÿçš„ Promise çš„æ—¶å€™ä¸éœ€è¦å®ç°è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œæ˜¯å› ä¸º JS å¼•æ“å·²ç»å¸®æˆ‘ä»¬åšäº†è¿™ä»¶äº‹æƒ…ã€‚ 123456789101112131415161718this.resolve = (value) =&gt; &#123; if(this.status === 'resolved' || this.status === 'pending') &#123; this.status = 'resolved'; this.data = value; for(var i = 0, l = this.onResolvedCb.length; i &lt; l; i++) &#123; //æ‰§è¡Œå›è°ƒå‡½æ•° this.onResolvedCb[i].value; &#125; &#125;&#125;// reject å°±å’Œ resolve éå¸¸åƒthis.reject = (reson) =&gt; &#123; if(this.status === 'rejected' || this.status === 'pending')&#123; this.status = 'rejected'; //...... &#125;&#125; then å‡½æ•°çš„å®ç°1234567891011121314151617181920212223242526272829Promise.prototype.then = (onResolved, onRejected) =&gt; &#123; onResolved = typeof onResolved === 'function' ? onResolved : function(value) &#123;&#125; onRejected = typeof onRejected === 'function' ? onRejected : function(reason) &#123;&#125; if(this.status === 'resolved')&#123; return new Promise((resolve, reject) =&gt; &#123; try&#123; let x = onResolved(self.data); if(x instanceof Promise) &#123; x.then(resolve, reject); &#125; resolve(x); &#125; catch (e) &#123; reject(e); &#125; &#125;) &#125;else if(this.status === 'rejected') &#123; return new Promise((resolve, reject) =&gt; &#123; //TODO &#125;) &#125;else&#123; //pending return new Promise((resolve, reject) =&gt; &#123; //TODO &#125;) &#125;&#125; æ€»ç»“ä¸Šé¢åªæ˜¯ä¸€ä¸ªç²—æµ…çš„å¤§æ¦‚ã€‚å¦‚æœè¦ä¸°å¯Œ Promise ï¼Œ è¿˜è¦å»å®ç°å¾ˆå¤šå…¶ä»–çš„å†…å®¹ï¼Œæ¯”å¦‚ catch ä¹‹ç±»çš„ã€‚å…³äºå¼‚æ­¥è¿˜æœ‰å¾ˆå¤šè¦å­¦ä¹ ï¼Œå…¶å®å¤§éƒ¨åˆ†éƒ½å­¦ä¹ è¿‡ï¼Œåªæ˜¯å› ä¸ºä½¿ç”¨çš„å°‘ï¼Œæ²¡æœ‰è€ƒè™‘ä»–å†…éƒ¨çš„å®ç°ï¼Œä¹Ÿæ¯”è¾ƒå®¹æ˜“å¿˜è®°ã€‚è¿˜æ˜¯å®è·µæ˜¯ç‹é“ã€‚","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"http://sevencai.github.io/tags/javascript/"}]},{"title":"React è¯»ä¹¦ç¬”è®°ï¼ˆä¸€ï¼‰","slug":"React-è¯»ä¹¦ç¬”è®°","date":"2017-02-21T03:07:36.000Z","updated":"2017-07-11T09:25:15.000Z","comments":true,"path":"2017/02/21/React-è¯»ä¹¦ç¬”è®°/","link":"","permalink":"http://sevencai.github.io/2017/02/21/React-è¯»ä¹¦ç¬”è®°/","excerpt":"","text":"æœ€è¿‘åˆæŠŠ React çš„å®˜æ–¹æ–‡æ¡£å’Œæœ‰å…³çš„ä¹¦ç±çœ‹äº†ä¸‹ï¼Œåˆæœ‰æ–°çš„æ”¶è·ã€‚ä¸‹é¢è®°å½•ä¸‹æˆ‘æœ€è¿‘æœ‰æ„Ÿå—çš„æˆ–è€…è§‰å¾—é‡è¦çš„ä¸€äº›åœ°æ–¹ã€‚ä¹Ÿä½“ä¼šåˆ°äº†å…¶å®æœ€å¥½çš„ä¹¦ç±å°±æ˜¯å®˜æ–¹æ–‡æ¡£ã€‚ è€Œä¸”Reactçš„æ–‡æ¡£å†™çš„å¾ˆå¥½ï¼Œæœ‰å¾ˆå¥½çš„ä¾‹å­ï¼Œæœ‰codepen,ä¹Ÿæœ‰ç›¸åº”çš„è§£é‡Šè¯´æ˜ã€‚èµã€‚ Adding React to an Existing ApplicationYou donâ€™t need to rewrite your app to start using React. We recommend adding React to a small part of your application, such as an individual widget, so you can see if it works well for your use case. å¦‚æœå·²ç»æœ‰ç°æœ‰çš„ Appï¼Œæ²¡æœ‰å¿…è¦é‡å¤´å…¨éƒ¨é‡æ„ï¼Œå¯ä»¥å…ˆé€‰å–å…¶ä¸­ä¸€ä¸ªæ¨¡å—ã€‚ React Only Updates Whatâ€™s NecessaryReact DOM compares the element and its children to the previous one, and only applies the DOM updates necessary to bring the DOM to the desired state. ä¹Ÿå°±æ˜¯ä¼ è¯´ä¸­çš„è™šæ‹ŸDOM,æ¯æ¬¡renderä¹‹å‰æ¯”è¾ƒå‰åèŠ‚ç‚¹çš„åŒºåˆ«ï¼Œåªæ›´æ–°éœ€è¦æ›´æ–°çš„éƒ¨åˆ†ã€‚ Components and PropsComponents let you split the UI into independent, reusable pieces, and think about each piece in isolation. Conceptually, components are like JavaScript functions. They accept arbitrary inputs (called â€œpropsâ€) and return React elements describing what should appear on the screen. ç»„ä»¶å°±åƒå‡½æ•°ä¸€æ ·ï¼Œæ¥å— props ï¼Œç„¶åè¿”å›å¯¹åº”çš„ å…ƒç´ ã€‚æ‰€ä»¥æˆ‘çš„ç†è§£ä¼¼ä¹ç»„ä»¶ä¸€å®šè¦æ˜¯å¯å¤ç”¨ï¼Œç®€æ´ï¼Œå¹¶ä¸”ä¿æŒç‹¬ç«‹ã€‚ Functional and Class Componentså‡½æ•°å’Œ es6 çš„ç±»éƒ½å¯ä»¥ç”Ÿæˆ Componentsã€‚123function Welcome(props) &#123; return &lt;h1&gt;Hello, &#123;props.name&#125;&lt;/h1&gt;;&#125; This function is a valid React component because it accepts a single â€œpropsâ€ object argument with data and returns a React element. We call such components â€œfunctionalâ€ because they are literally JavaScript functions. You can also use an ES6 class to define a component:12345class Welcome extends React.Component &#123; render() &#123; return &lt;h1&gt;Hello, &#123;this.props.name&#125;&lt;/h1&gt;; &#125;&#125; can both be used as12345const element = &lt;Welcome name=\"Sara\" /&gt;;ReactDOM.render( element, document.getElementById('root')); Rules to Followä¸è¦å®³æ€•æŠŠ å¤§çš„ components åˆ‡åˆ†æˆå°çš„ã€‚è¿™ä¸€ç‚¹æˆ‘å¼€å§‹å°±æœ‰ç‚¹å®³æ€•ã€‚æ€»è§‰å¾—åˆ†çš„å¤§äº†å°±è¶Šå¼€äº†ï¼Œæ˜¯ä¸æ˜¯è¶Šéš¾ç»´æŠ¤äº†ã€‚ä½†å®é™…ä¸Šåªè¦ç»„ä»¶ç¡®å®æ˜¯ç‹¬ç«‹å¯å¤ç”¨ï¼Œå°±å®Œå…¨å¯ä»¥å¤§èƒ†çš„åˆ†å‰²ã€‚ Extracting ComponentsDonâ€™t be afraid to split components into smaller components. Props are Read-OnlyReact is pretty flexible but it has a single strict rule: All React components must act like pure functions with respect to their props. 12345678910//pure, they do not attempt to change their inputs, and always return the same result for the same inputs.function sum(a, b) &#123; return a + b;&#125;//impure because it changes its own inputfunction withdraw(account, amount) &#123; account.total -= amount;&#125; So,we need State, State allows React components to change their output over time in response to user actions, network responses, and anything else, without violating this rule. Converting a Function to a ClassYou can convert a functional component like Clock to a class in five steps: Create an ES6 class with the same name that extends React.Component. Add a single empty method to it called render(). Move the body of the function into the render() method. Replace props with this.props in the render() body. Delete the remaining empty function declaration. 12345678910class Clock extends React.Component &#123; render() &#123; return ( &lt;div&gt; &lt;h1&gt;Hello, world!&lt;/h1&gt; &lt;h2&gt;It is &#123;this.props.date.toLocaleTimeString()&#125;.&lt;/h2&gt; &lt;/div&gt; ); &#125;&#125; Components defined as classes have some additional features. Local state is exactly that: a feature available only to classes. Adding Lifecycle Methods to a Class12345678910111213141516171819202122232425262728293031323334353637class Clock extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123;date: new Date()&#125;; &#125; componentDidMount() &#123; this.timerID = setInterval( () =&gt; this.tick(), 1000 ); &#125; componentWillUnmount() &#123; clearInterval(this.timerID); &#125; tick() &#123; this.setState(&#123; date: new Date() &#125;); &#125; render() &#123; return ( &lt;div&gt; &lt;h1&gt;Hello, world!&lt;/h1&gt; &lt;h2&gt;It is &#123;this.state.date.toLocaleTimeString()&#125;.&lt;/h2&gt; &lt;/div&gt; ); &#125;&#125;ReactDOM.render( &lt;Clock /&gt;, document.getElementById('root')); Using State Correctly Do Not Modify State Directly12345// Wrongthis.state.comment = 'Hello';//Correctthis.setState(&#123;comment: 'Hello'&#125;); The only place where you can assign this.state is the constructor. State Updates May Be Asynchronousæ„æ€æ˜¯stateçš„æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„ï¼Œå¹¶ä¸”ä¸ºäº†ç»†å«©é‚£ä¸ªï¼Œæœ‰å¯èƒ½ä¼šåˆå¹¶setStateã€‚æ‰€ä»¥ä¸èƒ½å¤Ÿä¾èµ–ä»–ä»¬å½“å‰çš„å€¼æ¥è®¡ç®—ä¸‹é¢çš„ä¸€ä¸ªçŠ¶æ€ã€‚React may batch multiple setState() calls into a single update for performance. Because this.props and this.state may be updated asynchronously, you should not rely on their values for calculating the next state. ä¸‹é¢å°±ä½¿ç”¨äº†prevStateæ¥ä¿å­˜äº†å½“å‰çš„state,è¿™æ ·å†è®¡ç®—ï¼Œå°±ä¸ä¼šå› setStateå¼‚æ­¥çš„åŸå› ï¼Œè€Œå¯¼è‡´ç»“æœé”™è¯¯ã€‚ 1234567891011121314151617// Wrongthis.setState(&#123; counter: this.state.counter + this.props.increment,&#125;);// Correctthis.setState((prevState, props) =&gt; (&#123; counter: prevState.counter + props.increment&#125;));// Correctthis.setState(function(prevState, props) &#123; return &#123; counter: prevState.counter + props.increment &#125;;&#125;); The Data Flows DownNeither parent nor child components can know if a certain component is stateful or stateless, and they shouldnâ€™t care whether it is defined as a function or a class. This is why state is often called local or encapsulated. It is not accessible to any component other than the one that owns and sets it. Handling Eventsè¿™é‡Œæ³¨æ„thisçš„ç»‘å®šæ–¹æ³•æœ‰ä¸‹é¢å‡ ç§ï¼šç¬¬ä¸€ç§ï¼šthis.handleClick = this.handleClick.bind(this);12345678910111213141516171819202122232425262728class Toggle extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123;isToggleOn: true&#125;; // This binding is necessary to make `this` work in the callback this.handleClick = this.handleClick.bind(this); &#125; handleClick() &#123; this.setState(prevState =&gt; (&#123; isToggleOn: !prevState.isToggleOn &#125;)); &#125; render() &#123; return ( &lt;button onClick=&#123;this.handleClick&#125;&gt; &#123;this.state.isToggleOn ? 'ON' : 'OFF'&#125; &lt;/button&gt; ); &#125;&#125;ReactDOM.render( &lt;Toggle /&gt;, document.getElementById('root')); ç¬¬äºŒç§ï¼šä½¿ç”¨arrow functions123handleClick = () =&gt; &#123; console.log('this is:', this);&#125; æˆ‘è‡ªå·±æ¯”è¾ƒå–œæ¬¢è¿™ç§ï¼Œç®€å•æ–¹ä¾¿ã€‚å¦‚æœçœŸçš„åƒç¬¬ä¸€ç§æ–¹æ³•ç»‘å®šï¼Œ ã€‚ã€‚æ€»è§‰å¾—å†™çš„ä»£ç ä¸å¤ªå¹²å‡€çš„æ ·å­ã€‚ ç¬¬ä¸‰ç§ï¼Œåœ¨callbackä¸­ä½¿ç”¨arror function12345678render() &#123;// This syntax ensures `this` is bound within handleClick return ( &lt;button onClick=&#123;(e) =&gt; this.handleClick(e)&#125;&gt; Click me &lt;/button&gt; );&#125; Conditional Rendering1234567function Greeting(props) &#123; const isLoggedIn = props.isLoggedIn; if (isLoggedIn) &#123; return &lt;UserGreeting /&gt;; &#125; return &lt;GuestGreeting /&gt;;&#125; ä¹Ÿå¯ä»¥åœ¨renderå‡½æ•°ä¸­ï¼š1234567891011121314151617render() &#123; const isLoggedIn = this.state.isLoggedIn; let button = null; if (isLoggedIn) &#123; button = &lt;LogoutButton onClick=&#123;this.handleLogoutClick&#125; /&gt;; &#125; else &#123; button = &lt;LoginButton onClick=&#123;this.handleLoginClick&#125; /&gt;; &#125; return ( &lt;div&gt; &lt;Greeting isLoggedIn=&#123;isLoggedIn&#125; /&gt; &#123;button&#125; &lt;/div&gt; );&#125; ä¹Ÿå¯ä»¥ä¸ç”¨if else, è€Œç”¨ condition ? true : falseã€‚ Preventing Component from Renderingç›´æ¥ return nullï¼Œå³å¯é˜²æ­¢rendering. In rare cases you might want a component to hide itself even though it was rendered by another component. To do this return null instead of its render output. 1234567891011function WarningBanner(props) &#123; if (!props.warn) &#123; return null; &#125; return ( &lt;div className=\"warning\"&gt; Warning! &lt;/div&gt; );&#125; Lists and KeysA â€œkeyâ€ is a special string attribute you need to include when creating lists of elements.1234567891011121314151617function NumberList(props) &#123; const numbers = props.numbers; const listItems = numbers.map((number) =&gt; &lt;li key=&#123;number.toString()&#125;&gt; &#123;number&#125; &lt;/li&gt; ); return ( &lt;ul&gt;&#123;listItems&#125;&lt;/ul&gt; );&#125;const numbers = [1, 2, 3, 4, 5];ReactDOM.render( &lt;NumberList numbers=&#123;numbers&#125; /&gt;, document.getElementById('root')); Keys help React identify which items have changed, are added, or are removed. Keys should be given to the elements inside the array to give the elements a stable identity. å¾®ä¿¡å°ç¨‹åºè²Œä¼¼ä¹Ÿæ˜¯å€Ÿç”¨äº†è¿™ç§æ–¹æ³•ã€‚æœ‰keyçš„æ—¶å€™æ¸²æŸ“ä¼šå¿«ä¸€ç‚¹ï¼Œæ€§èƒ½ä¼šæ›´å¥½ã€‚ å¦‚æœæ¸²æŸ“çš„ obj é‡Œé¢æœ‰å”¯ä¸€æ ‡ç¤º id, å°±ç”¨æ¬¡ id, å¦‚æœæ²¡æœ‰ï¼Œå°±ç”¨ index ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ 1234567891011121314//okconst todoItems = todos.map((todo) =&gt; &lt;li key=&#123;todo.id&#125;&gt; &#123;todo.text&#125; &lt;/li&gt;);//okconst todoItems = todos.map((todo, index) =&gt; // Only do this if items have no stable IDs &lt;li key=&#123;index&#125;&gt; &#123;todo.text&#125; &lt;/li&gt;); keyséœ€è¦æ³¨æ„çš„åœ°æ–¹Keys only make sense in the context of the surrounding array. keys ä¸€å®šåªèƒ½åœ¨éœ€è¦å®ƒå¹¶ä¸”å®ƒç¡®å®åœ¨æ­¤å¤„ï¼ˆä¸Šä¸‹æ–‡ï¼‰æœ‰æ„ä¹‰çš„æ—¶å€™å†ä½¿ç”¨ã€‚ 12345678910111213141516171819202122232425262728function ListItem(props) &#123; const value = props.value; return ( // Wrong! There is no need to specify the key here: &lt;li key=&#123;value.toString()&#125;&gt; &#123;value&#125; &lt;/li&gt; );&#125;function NumberList(props) &#123; const numbers = props.numbers; const listItems = numbers.map((number) =&gt; // Wrong! The key should have been specified here: &lt;ListItem value=&#123;number&#125; /&gt; ); return ( &lt;ul&gt; &#123;listItems&#125; &lt;/ul&gt; );&#125;const numbers = [1, 2, 3, 4, 5];ReactDOM.render( &lt;NumberList numbers=&#123;numbers&#125; /&gt;, document.getElementById('root')); æ­£ç¡®çš„ç”¨æ³•åº”è¯¥å¦‚ä¸‹ï¼š123456789101112131415161718192021222324function ListItem(props) &#123; // Correct! There is no need to specify the key here: return &lt;li&gt;&#123;props.value&#125;&lt;/li&gt;;&#125;function NumberList(props) &#123; const numbers = props.numbers; const listItems = numbers.map((number) =&gt; // Correct! Key should be specified inside the array. &lt;ListItem key=&#123;number.toString()&#125; value=&#123;number&#125; /&gt; ); return ( &lt;ul&gt; &#123;listItems&#125; &lt;/ul&gt; );&#125;const numbers = [1, 2, 3, 4, 5];ReactDOM.render( &lt;NumberList numbers=&#123;numbers&#125; /&gt;, document.getElementById('root')); æ€»ç»“èµ·æ¥å°±æ˜¯æœ‰ map çš„åé¢å°±éœ€è¦æœ‰ä¸ª key. A good rule of thumb is that elements inside the map() call need keys. Keys Must Only Be Unique Among SiblingsKeys used within arrays should be unique among their siblings. However they donâ€™t need to be globally unique. å½“ç„¶è¦æ˜¯å”¯ä¸€çš„ï¼Œå¦‚æœä¸å”¯ä¸€ä»–çš„æœ¬èº«çš„ä½œç”¨å°±å¤±å»äº†ã€‚åªè¦åœ¨ map é‡Œé¢ id æ˜¯å”¯ä¸€çš„å³å¯ã€‚ 1234567891011121314151617181920212223242526272829303132333435function Blog(props) &#123;//key 1 const sidebar = ( &lt;ul&gt; &#123;props.posts.map((post) =&gt; &lt;li key=&#123;post.id&#125;&gt; &#123;post.title&#125; &lt;/li&gt; )&#125; &lt;/ul&gt; );//key 2 const content = props.posts.map((post) =&gt; &lt;div key=&#123;post.id&#125;&gt; &lt;h3&gt;&#123;post.title&#125;&lt;/h3&gt; &lt;p&gt;&#123;post.content&#125;&lt;/p&gt; &lt;/div&gt; ); return ( &lt;div&gt; &#123;sidebar&#125; &lt;hr /&gt; &#123;content&#125; &lt;/div&gt; );&#125;const posts = [ &#123;id: 1, title: 'Hello World', content: 'Welcome to learning React!'&#125;, &#123;id: 2, title: 'Installation', content: 'You can install React from npm.'&#125;];ReactDOM.render( &lt;Blog posts=&#123;posts&#125; /&gt;, document.getElementById('root')); Keys serve as a hint to React but they donâ€™t get passed to your components. If you need the same value in your component, pass it explicitly as a prop with a different name. keys ä¸ä½œä¸ºä¸Šä¸‹æ–‡ä¼ é€’ç»™componentå‚æ•°, å¦‚æœéœ€è¦ key å€¼ä¼ ç»™ä¸‹é¢çš„ component å°±æ˜¾ç¤ºçš„ä¼ é€’ä¸‹å³å¯ã€‚ 123456const content = posts.map((post) =&gt; &lt;Post key=&#123;post.id&#125; id=&#123;post.id&#125; title=&#123;post.title&#125; /&gt;); Lifting State Up There should be a single â€œsource of truthâ€ for any data that changes in a React application. Usually, the state is first added to the component that needs it for rendering. Then, if other components also need it, you can lift it up to their closest common ancestor. Instead of trying to sync the state between different components, you should rely on the top-down data flow. åœ¨React åº”ç”¨ä¸­ä»»ä½•æ•°æ®å˜åŠ¨éƒ½åº”è¯¥æ˜¯åŸºäºä¸€ä¸ªâ€source of truthâ€ã€‚é€šå¸¸state è¢«é¦–å…ˆåŠ å…¥ç»„ä»¶å»æ¸²æŸ“ã€‚ç„¶åï¼Œå¦‚æœå¦ä¸€ä¸ªç»„ä»¶ä¹Ÿéœ€è¦å®ƒï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥å°†å®ƒä»¬æå‡åˆ°å®ƒä»¬çš„çˆ¶ç»„ä»¶ä¸­ã€‚è€Œä¸æ˜¯å°è¯•åœ¨ä¸åŒçš„ç»„ä»¶ä¸­åŒæ­¥stateï¼Œä½ åº”è¯¥ä¾èµ–top-down data flowã€‚ æå‡çŠ¶æ€æ¶‰åŠç¼–å†™æ¯”åŒå‘ç»‘å®šæ–¹æ³•æ›´å¤šçš„â€˜æ ·æ¿â€™ä»£ç ã€‚ä½†å¥½å¤„æ˜¯æ‰¾åˆ°å’Œéš”ç¦»bugéœ€è¦è¾ƒå°‘çš„å·¥ä½œã€‚ç”±äºä»»ä½•çŠ¶æ€å­˜åœ¨äºç‰¹å®šçš„ç»„ä»¶ä¸­ï¼Œå¹¶ä¸”è¯¥ç»„ä»¶å¯ä»¥å•ç‹¬æ”¹å˜å®ƒï¼Œæ‰€ä»¥å¤§å¤§å‡å°‘äº†é”™è¯¯çš„è¡¨é¢ç§¯ã€‚æ­¤å¤–ï¼Œä½ å¯ä»¥å®ç°ä»»ä½•è‡ªå®šä¹‰é€»è¾‘ä»¥æ‹’ç»æˆ–è½¬æ¢ç”¨æˆ·è¾“å…¥ã€‚ å¦‚æœæ•°æ®å¯ä»¥ä»propsæˆ–stateæ´¾ç”Ÿï¼Œé‚£ä¹ˆå®ƒå°±ä¸åº”è¯¥åœ¨çŠ¶æ€ä¹‹ä¸­ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åªå­˜å‚¨äº†æœ€åç¼–è¾‘çš„valueå’Œscaleï¼Œè€Œä¸æ˜¯å­˜å‚¨ä¸¤ä¸ªcelsiusValueå’ŒfahrenheitValueã€‚å¦ä¸€ä¸ªè¾“å…¥çš„å€¼æ€»æ˜¯å¯ä»¥ä»render()æ–¹æ³•ä¸­è®¡ç®—å‡ºæ¥ã€‚è¿™å…è®¸æˆ‘ä»¬æ¸…é™¤æˆ–åº”ç”¨å››èˆäº”å…¥åˆ°å…¶ä»–å­—æ®µï¼Œè€Œä¸ä¼šä¸¢å¤±ç”¨æˆ·è¾“å…¥çš„ä»»ä½•ç²¾åº¦ã€‚","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"http://sevencai.github.io/tags/javascript/"}]},{"title":"å°ç¨‹åºå¼€å‘ä½“ä¼š","slug":"å°ç¨‹åºå¼€å‘ä½“ä¼š","date":"2017-01-22T09:45:02.000Z","updated":"2017-02-09T12:02:02.000Z","comments":true,"path":"2017/01/22/å°ç¨‹åºå¼€å‘ä½“ä¼š/","link":"","permalink":"http://sevencai.github.io/2017/01/22/å°ç¨‹åºå¼€å‘ä½“ä¼š/","excerpt":"","text":"è¿‡å»çš„ä¸¤ä¸ªæœˆï¼Œåœ¨ç»„é‡Œå‚ä¸äº†ã€è…¾è®¯å……å€¼å°ç¨‹åºã€‘ä»¥åŠã€è…¾è®¯å‘¨è¾¹ã€‘ä¸¤ä¸ªé¡¹ç›®ã€‚å…¶ä¸­å……å€¼é¡¹ç›®ï¼Œç”±äºIOSå¯¹äºå¾®ä¿¡å°ç¨‹åºçš„è™šæ‹Ÿå•†å“çš„é™åˆ¶ï¼Œæš‚æ—¶ææµ…ä¸Šçº¿ï¼Œå‘¨è¾¹å·²ä¸Šã€‚ä¸‹é¢æ˜¯æˆ‘é‡åˆ°çš„ä¸€äº›ä½“ä¼šï¼Œå‘ï¼Œä»¥åŠä¸€äº›æ„Ÿå—ã€‚ å°ç¨‹åºå¿«çš„åŸç†è½»åº”ç”¨ï¼Œå¿«ä¸€å®šæ˜¯ä¸ªæœ€å¤§çš„ä¼˜ç‚¹ã€‚å°ç¨‹åºä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿå¹³æ—¶å¼€å‘æ˜¯åœ¨PCç«¯å¼€å‘è€…å·¥å…·ä¸Šï¼Œå¯ä»¥çœ‹åˆ°å„ä¸ªèµ„æºçš„è¯·æ±‚æƒ…å†µï¼ŒåŒ…æ‹¬jsï¼Œcgiç­‰ã€‚åœ¨çœŸå®æ‰‹æœºä¸Šï¼Œåˆæ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ èµ„æºæœ€åˆå…¨éƒ¨ä¸‹è½½ä¸‹æ¥ å›¾ç‰‡ç¼“å­˜ç­–ç•¥ å°ç¨‹åºå¤§å°é™åˆ¶ï¼Œæœ€å¤š1M å°ç¨‹åºé¡µé¢çŠ¶æ€ç¼“å­˜ï¼Œwebviewä¸ä¼šè¢«å›æ”¶é”€æ¯ æ¯ä¸ªç¨‹åºéƒ½æ˜¯å•ç‹¬çš„è¿›ç¨‹ï¼Œå¹¶ä¸”æœ€å¤š5ä¸ªè¿›ç¨‹ å‰æœŸæˆ‘æ›¾æŠ“äº†ä¸ªåŒ…è¯•è¯•ï¼Œå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°æ²¡æœ‰æˆ‘ä»¬å¹³æ—¶åœ¨å¼€å‘è€…å·¥å…·ä¸Šçœ‹åˆ°çš„jsç­‰èµ„æºï¼ŒåŸå› æ˜¯å°ç¨‹åºåœ¨ç¬¬ä¸€æ¬¡æ‰“å¼€æ—¶å°±æŠŠèµ„æºé¢„å…ˆå…¨éƒ¨ä»å¾®ä¿¡æœåŠ¡å™¨ down äº†ä¸‹æ¥åˆ°æœ¬åœ°ï¼Œï¼ˆappbrand/pkgç›®å½•ä¸‹ï¼Œåç¼€åä¸ºwxapkgï¼‰ï¼Œå­˜æ”¾åœ¨äº†æœ¬åœ°çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæ‰€ä»¥åœ¨ä½ ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œåªä¼šæœ‰CGIè¯·æ±‚å‘å‡ºï¼Œä¸ä¼šå†è¯·æ±‚å…¶ä»–ä»£ç èµ„æºäº†ã€‚ æ‰€ä»¥è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¾®ä¿¡ä¼šé™åˆ¶å¼€å‘è€…åŒ…çš„å¤§å°ä¸å¾—è¶…è¿‡1Mã€‚è¿™ä¿è¯äº†ç¬¬ä¸€æ¬¡åŠ è½½çš„é€Ÿåº¦ï¼Œä¹Ÿä¸è‡³äºåœ¨æ— WIFIæƒ…å†µä¸‹ï¼Œè€—è´¹å¤ªå¤šæµé‡ã€‚ æ‰€ä»¥å¦‚æœå®Œå…¨å¯ä»¥é€šè¿‡ä¸€äº›APIæ¯”å¦‚setStorageã€getStorageç­‰ä½¿ç”¨æˆ·åœ¨ç¦»çº¿çŠ¶æ€ä¸‹ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚ åæœŸæˆ‘å†æŠ“åŒ…æ—¶ï¼Œå‘ç°è¯·æ±‚åˆæœ‰äº†å†™å˜åŒ–ï¼Œå¦‚ä¸‹ï¼š çŒœæƒ³ï¼ˆæœªéªŒè¯ä»…å‚è€ƒï¼‰è¿™ä¸ªrid/sidå¯èƒ½æ˜¯ç”¨æ¥åˆ¤æ–­å°ç¨‹åºæœ‰æ²¡æœ‰èµ„æºå‘ç”Ÿå˜åŒ–ï¼Œæ¯”å¦‚å¦‚æœå¼€å‘è€…æäº¤äº†å®¡æ ¸æ–°ç‰ˆæœ¬ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±å»åˆ¤æ–­ï¼Œå¦‚æœæœ‰å˜åŒ–å°±ä»æœåŠ¡å™¨æ‹‰å»æ–°çš„èµ„æºã€‚å¦‚æœæ²¡æœ‰å˜åŠ¨ï¼Œå°±ç”¨æœ¬åœ°æ–‡ä»¶ä¸­çš„èµ„æºã€‚ å†ï¼šå¾®ä¿¡å¯¹äºè®¿é—®è¿‡çš„å›¾ç‰‡ï¼Œéƒ½æœ‰ç¼“å­˜ç­–ç•¥ï¼Œæ‰€ä»¥å¯¹æ¯”å¦‚è…¾è®¯å‘¨è¾¹å°ç¨‹åºè¿™æ ·çš„å›¾ç‰‡å¾ˆå¤šçš„åº”ç”¨ï¼Œä¹Ÿæ¯”è¾ƒå¿«ã€‚ å°ç¨‹åºå‘å¸ƒæµç¨‹æ€è€ƒ å¼€å‘è€…æœ¬åœ°å¼€å‘ï¼Œé€šè¿‡å¼€å‘è€…å·¥å…·ï¼Œæœ¬åœ°é¢„è§ˆï¼Œæäº¤å‘å¸ƒã€‚ç„¶åå¾®ä¿¡é€šè¿‡å®¡æ ¸ï¼Œå¼€å‘è€…å‘å¸ƒå®¡æ ¸ç‰ˆæœ¬ï¼Œç”¨æˆ·å³å¯æœåˆ°ã€‚ ä¸Šä¼ çš„ä»£ç æ˜¯åˆ°äº†å¾®ä¿¡æœåŠ¡å™¨ä¸Šï¼Œç»Ÿä¸€ç®¡ç†ã€‚æ‰€ä»¥è¿™é‡Œæ˜¯å¾®ä¿¡æœåŠ¡å™¨ï¼Œç¬¬ä¸‰æ–¹æœåŠ¡å™¨ï¼Œå¾®ä¿¡å®¢æˆ·ç«¯ä¸‰æ–¹çš„äº¤äº’ã€‚ è¿™ä¸ªè¿‡ç¨‹ä¸­æƒ…å½¢æ˜¯è¿™æ ·çš„ï¼š å°ç¨‹åºæ¡†æ¶åˆ†ä¸ºä¸¤å±‚ Viewè§†å›¾å±‚ï¼Œ ç”¨äºæ¸²æŸ“é¡µé¢ç»“æ„ã€‚ä½¿ç”¨Webviewæ¸²æŸ“ã€‚ App Serviceé€»è¾‘å±‚ï¼Œç”¨æ¥é€»è¾‘å¤„ç†ï¼Œç½‘ç»œè¯·æ±‚ï¼Œæ¥å£è°ƒç”¨ç­‰ç­‰ã€‚è¿è¡Œåœ¨JSCoreä¸­ã€‚ è§†å›¾å±‚å’Œé€»è¾‘å±‚é€šè¿‡JSBridgeé€šä¿¡ã€‚é€»è¾‘å±‚é€šçŸ¥è§†å›¾å±‚æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œä»è€Œå‡ºå‘è§†å›¾å±‚æ›´æ–°ã€‚è§†å›¾å±‚åˆ™ç»‘å®šäº‹ä»¶ï¼Œé€šçŸ¥åˆ°é€»è¾‘å±‚è¿›è¡Œç›¸åº”çš„ä¸šåŠ¡å¤„ç†ã€‚ å¦‚åœ¨è§†å›¾å±‚ï¼š123&lt;view&gt; &lt;button bindtap=\"updateData\"&gt;é¡µé¢è·³è½¬&lt;/button&gt;&lt;/view&gt; é€»è¾‘å±‚ï¼š123456789101112131415page(&#123; data: &#123; config: &#123; title: '', name: '' &#125; &#125;, updateData() &#123; this.setData(&#123; 'config.title': 'è…¾è®¯å‘¨è¾¹', 'config.name': 'Seven' &#125;); &#125;&#125;) åœ¨Viewå±‚æ¸²æŸ“æ•°æ®ç”¨æˆ·æ‰“å¼€å°ç¨‹åºåï¼Œé€‰æ‹©å·¦ä¸Šè§’çš„å…³é—­æˆ–æŒ‰è¿”å›é”®æ—¶å°ç¨‹åºåªæ˜¯éšè—åˆ°åå°ï¼Œwebviewä¸ä¼šè¢«é”€æ¯æˆ–è€…å›æ”¶ã€‚æ¯”å¦‚åœ¨iosä¸Šï¼Œä»å°ç¨‹åºè½¬åˆ°å¦å¤–ä¸€ä¸ªåº”ç”¨ä¸­ï¼Œå†å›æ¥å¾®ä¿¡ï¼Œæ‰“å¼€çš„webviewä»ç„¶å­˜åœ¨ã€‚å†androidä¸Šåˆ™æ˜¯å¯ä»¥åœ¨çª—å£è¿›ç¨‹ä¸­å†æ¬¡æ‰¾åˆ°å…ˆå‰æ‰“å¼€çš„å°ç¨‹åºã€‚ Nativeé¢„å…ˆåŠ è½½é¢å¤–ä¸€ä¸ªWebviewï¼Œå½“æ‰“å¼€æŒ‡å®šé¡µé¢æ—¶ï¼Œæ— éœ€è¯·æ±‚é¢å¤–èµ„æºï¼Œç›´æ¥æ¸²æŸ“ modelå’ŒviewåŒçº¿ç¨‹ï¼Œå•å‘æ•°æ®ç»‘å®š é‡æ¸²æŸ“ä½¿ç”¨Virtual DOMå‡å°‘å¼€é”€ï¼Œé‡‡ç”¨diffç®—æ³•å±€éƒ¨æ›´æ–° è¿™é‡Œçš„å•å‘æ•°æ®ç»‘å®šç¡®å®æ˜¯æœ‰ä¸æ–¹ä¾¿çš„åœ°æ–¹ã€‚å…ˆå‰ç”¨è¿‡Vueç­‰åŒå‘ç»‘å®šçš„ï¼Œèƒ½å¤ŸåŠæ—¶åé¦ˆç”¨æˆ·çš„è¾“å…¥ï¼Œç›¸å¯¹æ¥è¯´è¿™ç§å¯èƒ½æ›´æ–¹ä¾¿æ“ä½œï¼Œä¹Ÿæ›´é€‚åˆå°å‹åº”ç”¨ã€‚ä½†æ˜¯å•å‘ç»‘å®šå°±æ˜¯å¯èƒ½æ›´åŠ é«˜æ•ˆä¸€äº›äº†ã€‚ å…¶ä»–ç‰¹æ€§1.å°ç¨‹åºå¹¶å‘è¯·æ±‚æ•°ä¸è¶…è¿‡5ï¼Œè¿™é‡Œå¯ä»¥åšä¼˜åŒ–ï¼Œæ¯”å¦‚ä½¿ç”¨æ¥å£å°†æ‰€æœ‰çš„è¯·æ±‚åˆå¹¶ã€‚ 2.å°ç¨‹åºå…³äºç™»å½•æ€ä¸ç§»åŠ¨åº”ç”¨å’Œç½‘é¡µåº”ç”¨çš„ä¸åŒä¹‹å¤„æ˜¯æŠ›å¼ƒäº†access_tokençš„éªŒè¯æ–¹å¼ï¼Œè€Œæ˜¯é‡‡ç”¨session_keyåŠ ç­¾åçš„æ–¹å¼ï¼Œä¸ºå°ç¨‹åºä¸æœåŠ¡å™¨äº¤æ¢æ•æ„Ÿæ•°æ®æä¾›äº†å¯¹ç§°åŠ å¯†æ–¹æ³•ã€‚ç­¾åæ–¹æ³•å¯¹å°ç¨‹åºé€æ˜ï¼Œåç«¯æœåŠ¡å®ç°ç›¸åº”çš„è§£å¯†ç¨‹åºä»¥åŠç™»å½•æ€éªŒè¯å’Œæ§åˆ¶èƒ½åŠ›ã€‚ç”±äºæˆ‘ä»¬éƒ¨é—¨çš„åå°æ¥å£åŸºæœ¬éƒ½æ˜¯åŸºäºaccess_tokenè¿™ä¸€å¥—ï¼Œåæ¥ä¸WXä¾§åå•†è¿˜æ˜¯å¯ä»¥ç”¨ac.å¦åˆ™åå°å°±ä¼šæœ‰å¾ˆå¤§çš„æ”¹åŠ¨ã€‚ 3.è¦å¥½å¥½çš„åˆ©ç”¨å°ç¨‹åºæ¨¡æ¿æœºåˆ¶ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å¾ˆå¤šä»£ç é‡ï¼Œä¹Ÿæ›´ä¾¿äºç»´æŠ¤ã€‚ 4.å¯¹äºWXå®˜æ–¹æ–‡æ¡£ä¸Šçš„API,æœ€å¥½æ˜¯è‡ªå·±å°è£…ä¸€ä¸ªWXLIBæ–‡ä»¶ã€‚è¿™æ ·å¯ä»¥å‡å°‘ä»£ç é‡ï¼Œç»Ÿä¸€æ•´ä¸ªä»£ç ã€‚ä¾‹å¦‚ï¼š12345678910111213class wxLib &#123; constructor() &#123; &#125; share(obj) &#123; return &#123; title: obj.title, desc: obj.desc, path: obj.path &#125; &#125;&#125; åœ¨æ¯ä¸€ä¸ªæƒ³è¦åˆ†äº«çš„é¡µé¢å°±å¯ä»¥ï¼š12345678910import wxLib from '../../service/lib/wxLib';Page(&#123; onShareAppMessage() &#123; return wxLib.share(&#123; title: 'è…¾è®¯å‘¨è¾¹', desc: 'æ­£å“å‘¨è¾¹', path: 'page/index/index' &#125;); &#125;&#125;) (233,è¿™ä¸ªå¥½åƒçœ‹èµ·æ¥æ²¡æœ‰ä»£ç é‡å‡å°‘ï¼Œä½†æ˜¯ç»Ÿä¸€äº†ä»¥åï¼Œå…¶ä»–çš„ä¹Ÿç»Ÿä¸€ï¼Œå°±ä¼šå‘ç°åæ¥æ–¹ä¾¿å¾ˆå¤šã€‚) 5.å¯ä»¥åˆ©ç”¨æœ¬åœ°å­˜å‚¨ï¼Œè§£å†³ç¦»çº¿çš„æ—¶å€™ï¼Œé»‘å±æ— æ•°æ®çš„æƒ…å†µã€‚ 6.æ–‡æ¡£å¾ˆå®¹æ˜“ç†è§£ï¼ŒAPIä¹Ÿå¥½ç”¨ã€‚åŸºæœ¬ä¸ŠæŒ‰ç…§æ–‡æ¡£æ¥å¤§éƒ¨åˆ†åŠŸèƒ½éƒ½å¯ä»¥å®ç°ã€‚ å…³äºå°ç¨‹åºå®šä½å°ç¨‹åºå³ç”¨å³èµ°çš„å®šä½åŸæœ¬æ˜¯å¾ˆå¥½çš„ï¼Œæ¯”å¦‚éå¸¸é€‚åˆçº¿ä¸‹çš„è¥é”€ï¼Œéå¸¸é€‚åˆç”Ÿæ´»æœåŠ¡ã€‚æ¯”å¦‚æŸ¥ç«è½¦ç¥¨ï¼Œè†œæ‹œå•è½¦ï¼Œæ‰“éº»å°†å’Œç‰Œçš„å°æ¸¸æˆéƒ½å¾ˆåˆé€‚ã€‚ç”¨æˆ·ç”Ÿæ´»æ–¹ä¾¿ï¼Œå¨±ä¹ä¹Ÿæ–¹ä¾¿ã€‚ ä½†æ˜¯ç›®å‰æ¥çœ‹å°ç¨‹åºé™¤äº†åˆšå‘å¸ƒçš„æ—¶å€™ï¼Œç°åœ¨çš„æµé‡ç›®æµ‹å·²ç»è¶Šæ¥è¶Šå°‘ï¼Œé™¤å¼€å¾®ä¿¡å¥½åƒæ²¡æœ‰åšå¾ˆå¤šæ¨å¹¿ä»¥å¤–ï¼Œå°ç¨‹åºè¿˜æ²¡æœ‰å½¢æˆç”¨æˆ·çš„ä¹ æƒ¯ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚ å°ç¨‹åºè¦å‘å±•èµ·æ¥ï¼Œä¸€å®šæ˜¯è¦åœ¨ç”¨æˆ·å½¢æˆäº†ä½¿ç”¨ä¹ æƒ¯ï¼Œäº§ç”Ÿã€ä¸ç”¨è£…è¿™ä¸ªapp,ç›´æ¥ç”¨å°ç¨‹åºå°±å¯ä»¥æ»¡è¶³æˆ‘çš„éœ€æ±‚ã€‘çš„è¿™ç§æƒ³æ³•ã€‚ æœªæ¥ä¼šæ€æ ·ï¼Œå–å†³äºå¾®ä¿¡çš„æ¨å¹¿å’Œæœªæ¥é•¿è¿œçš„çœ‹æ³•ã€‚ä¹Ÿå–å†³æ˜¯ä¸æ˜¯æœ‰å¾ˆå¥½çš„å°ç¨‹åºå‡ºæ¥ã€‚æœŸå¾…æœªæ¥è¶…å‡ºæƒ³è±¡ã€‚ ä¸‹æ¬¡å‡†å¤‡å†™ä¸€äº›å°ç¨‹åºçš„ç”¨æ³•ï¼Œæ¯”å¦‚æ¨¡æ¿æ¶ˆæ¯ï¼Œå®¢æœç­‰ç­‰ã€‚ä»¥ä¸Šå†…å®¹å¦‚æœæœ‰ä¸å¯¹çš„åœ°æ–¹ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œæ„Ÿè°¢é˜…è¯»ã€‚","categories":[],"tags":[{"name":"å°ç¨‹åº javascript","slug":"å°ç¨‹åº-javascript","permalink":"http://sevencai.github.io/tags/å°ç¨‹åº-javascript/"}]},{"title":"åˆ©ç”¨onerror/onloadå†™çš„jsonpåœ¨IEä¸‹ä¸å…¼å®¹çš„é—®é¢˜","slug":"onloadåŠonerroråœ¨IEä¸‹ä¸å…¼å®¹çš„é—®é¢˜","date":"2017-01-22T09:01:43.000Z","updated":"2017-01-22T09:39:55.000Z","comments":true,"path":"2017/01/22/onloadåŠonerroråœ¨IEä¸‹ä¸å…¼å®¹çš„é—®é¢˜/","link":"","permalink":"http://sevencai.github.io/2017/01/22/onloadåŠonerroråœ¨IEä¸‹ä¸å…¼å®¹çš„é—®é¢˜/","excerpt":"","text":"æŸä¸€å¤©ï¼Œæˆ‘ç”¨ js å†™äº†ä¸€æ®µ jsonp çš„ä»£ç ã€‚ä»¥å‰åœ¨å­¦æ ¡ä¹Ÿè¿™ä¹ˆå†™ï¼Œå› ä¸ºåœ¨å­¦æ ¡æ²¡æœ‰æµ‹è¯•IEæ‰€æœ‰çš„ç‰ˆæœ¬å…¼å®¹æ€§ï¼Œä¸€ç›´è§‰å¾—è¿™æ®µä»£ç æœ¨æœ‰é—®é¢˜ã€‚ ä»£ç æ˜¯è¿™æ ·å­çš„ï¼š ç®€å•æ¥è¯´å°±æ˜¯å°†ä¸€ä¸ªscriptæ ‡ç­¾æ·»åŠ è¿›å…¥dom,è¿™æ ·å°±å¯ä»¥ä¼ªé€ ä¸€æ¬¡è¯·æ±‚ï¼Œå› ä¸ºåŒæºç­–ç•¥å¯ä»¥ç”¨script/imageä¹‹ç±»æ ‡ç­¾å›é¿æ‰ã€‚ 123456789101112131415161718192021222324252627282930Util.prototype.loadScript = function (url, params, cb) &#123; var path = url + '?' + this.serializeParam(params); var head = document.getElementsByTagName('head')[0]; var script = document.createElement('script'); var format = params.format.substr(6), result; window[format] = function (_res) &#123; result = _res; &#125;; var handler = function () &#123; if(!script) return; head.removeChild(script); script = null; window[format] = undefined; typeof cb == 'function' &amp;&amp; cb(result); &#125;; script.src = path; script.async = true; script.charset = 'utf-8'; script.type = 'text/javascript'; script.onload = handler; script.onerror = handler; head.insertBefore(script, head.firstChild);&#125;; ç›´åˆ°æµ‹è¯•åŒäº‹é‚£å¤©åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œå‘ç°IE7,IE6çš„æ—¶å€™ï¼Œè¯·æ±‚å¯ä»¥å‘é€ï¼Œä½†æ˜¯ callback å‡½æ•°æ²¡æœ‰æ‰§è¡Œã€‚å¯¼è‡´äº†ä¸€ä¸ªæŒ‰é’®å¥½åƒåƒç‚¹ä¸åŠ¨ä¸€æ ·ã€‚ è¿™ç§ bug ç®—å¾—ä¸Šæ˜¯ä¸¥é‡çš„ bug äº†ï¼Œç»è¿‡æ’æŸ¥ï¼Œå‘ç°ç¡®å®æ˜¯ä»£ç ä¸å®Œå–„ï¼Œæ²¡æœ‰è€ƒè™‘åˆ°ï¼š åœ¨å¤šæ•°æµè§ˆå™¨ï¼ˆåŒ…æ‹¬Firefoxå’ŒChromeï¼‰ä¸‹ä¼šè§¦å‘onloadå’Œonerrorï¼Œ ä½†æ˜¯åœ¨IEä¸‹åªä¼šè§¦å‘ onreadystatechangeï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨IE8åŠIE8ä»¥ä¸‹ï¼Œonerrorå’Œonloadéƒ½ä¸èƒ½å¤Ÿä½¿ç”¨ã€‚ æ‰€ä»¥è¦è°ƒç”¨å›è°ƒå‡½æ•°ä¸€å®šéœ€è¦å†å†™ä¸€ä¸ªé’ˆå¯¹ onreadystatechange æ—¶çš„æ“ä½œã€‚é”™è¯¯ä¸­æˆé•¿ã€‚ 123456script.onreadystatechange = function() &#123; var r = script.readyState; if (r === 'loaded' || r === 'complete') &#123; handler(); &#125;&#125;; å®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536Util.prototype.loadScript = function (url, params, cb) &#123; var path = url + '?' + this.serializeParam(params); var head = document.getElementsByTagName('head')[0]; var script = document.createElement('script'); var format = params.format.substr(6), result; window[format] = function (_res) &#123; result = _res; &#125;; var handler = function () &#123; if(!script) return; head.removeChild(script); script = null; window[format] = undefined; typeof cb == 'function' &amp;&amp; cb(result); &#125;; script.src = path; script.async = true; script.charset = 'utf-8'; script.type = 'text/javascript'; script.onreadystatechange = function() &#123; var r = script.readyState; if (r === 'loaded' || r === 'complete') &#123; handler(); &#125; &#125;; script.onload = handler; script.onerror = handler; head.insertBefore(script, head.firstChild);&#125;;","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"http://sevencai.github.io/tags/javascript/"}]},{"title":"Redux ä¸­ combineReducers å’Œ createStoreçš„å®ç°åŸç†","slug":"Redux ä¸­ combineReducers å’Œ createStoreçš„å®ç°åŸç†","date":"2016-10-25T14:46:27.000Z","updated":"2017-01-22T09:42:08.000Z","comments":true,"path":"2016/10/25/Redux ä¸­ combineReducers å’Œ createStoreçš„å®ç°åŸç†/","link":"","permalink":"http://sevencai.github.io/2016/10/25/Redux ä¸­ combineReducers å’Œ createStoreçš„å®ç°åŸç†/","excerpt":"","text":"æœ€è¿‘ä¸€ç›´åœ¨å­¦ä¹  redux, æ„Ÿåˆ°äº†æ·±æ·±çš„éš¾è¿‡ï¼Œéƒ½ä¸¤å¤©äº†ï¼Œæ„Ÿè§‰è¿˜æ˜¯ä¸çŸ¥é“æ€ä¹ˆå†™ä»£ç ï¼Œå€’ä¸æ˜¯ä¸çŸ¥é“æ˜¯Redux é‡Œé¢æ¶‰åŠçš„æ¦‚å¿µï¼Œæ˜¯ä¸çŸ¥é“ä»€ä¹ˆä»£ç è¯¥æ”¾åœ¨å“ªé‡Œã€‚æ€ä¹ˆæ ·ç»„ç»‡ç»“æ„ã€‚å¸Œæœ›å†è¿‡ä¸¤å¤©èƒ½æ›´æ¸…æ™°ã€‚ ä¸‹é¢æ˜¯ä¸­é—´å­¦ä¹ åˆ°çš„ combineReducers å’Œ createStore çš„å®ç°åŸç†ï¼Œäº†è§£è¿™äº›åï¼Œç¡®å®å¸®åŠ©äº†æˆ‘æ›´å¥½çš„ç†è§£æ•´ä¸ªæµç¨‹ã€‚ combineReducers çš„å®ç°åŸç†åœ¨æ¢ç©¶ combineReducers çš„å®ç°åŸç†ä¹‹å‰ï¼Œå…ˆçœ‹ä¸‹ combineReducers çš„ç”¨æ³•ï¼š 1234const todoApp = combineReducers(&#123; visibilityFilter, todos&#125;); è¿™é‡Œä¸ºäº†é€»è¾‘ä¸Šçš„åˆ†ç¦»ï¼Œæˆ‘ä»¬æŠŠ reducers æ‹†åˆ†æˆäº† visibilityFilter å’Œ todos, ç„¶ååˆ©ç”¨äº† combineReducers åˆæˆäº†ä¸€ä¸ª reducerã€‚ å…ˆçœ‹ä¸‹æˆ‘ä»¬çš„ todos å’Œ visibilityFilter æ˜¯è¿™æ ·çš„ï¼š123456789101112131415161718192021//todos const todos = (state = [], action) =&gt; &#123; switch (action.type) &#123; case 'ADD_TODO': //... case 'TOGGLE_TODO': //... default: return state &#125;&#125;//visibilityFilterconst visibilityFilter = (state = 'SHOW_ALL', action) =&gt; &#123; switch (action.type) &#123; case 'SET_VISIBILITY_FILTER': return action.filter default: return state &#125;&#125; æˆ‘ä»¬çš„ reducers ä¹Ÿæ˜¯è·Ÿè¿™é‡Œçš„æ¯ä¸€ä¸ªåˆ† reducer ä¸€æ ·ï¼Œéƒ½æ˜¯å‡½æ•°ï¼Œéƒ½è¦é€šè¿‡ä¼ å…¥ (state, action) æ¥å”¯ä¸€åˆ¤æ–­ä¸‹æ¬¡çš„çŠ¶æ€ã€‚æ‰€ä»¥æˆ‘ä»¬ combineReducers çš„ä½œç”¨å°±æ˜¯é‡æ–°ç”Ÿæˆä¸€ä¸ª å¯ä»¥ä¼ å…¥ (state, action) ä¸¤ä¸ªå€¼æ¥åˆ¤æ–­ next çš„ state çš„å€¼çš„å‡½æ•°ã€‚ æ‰€ä»¥è¿™ä¸‹æˆ‘ä»¬å°±å¯ä»¥ç†è§£ä¸‹é¢çš„ä»£ç ï¼ŒcombineReducers çš„å®ç°ï¼š 12345678910111213141516const combineReducers = ( reducers ) =&gt; &#123; return ( state = &#123;&#125;, action ) =&gt; &#123; return Object.keys(reducers).reduce( ( nextState, key ) =&gt; &#123; nextState[key] = reducers[key]( state[key], action ); return nextState; &#125;, &#123;&#125; ); &#125;;&#125;;export default combineReducers; è§£é‡Šä¸‹ï¼šé¦–å…ˆæ˜¯è¿”å›ä¸€ä¸ªå¯ä»¥ä¼ å…¥ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ã€‚æ‰€ä»¥æˆ‘ä»¬å…ˆ return ä¸€ä¸ª function, ç„¶åå†é€šè¿‡ reduce å‡½æ•°ï¼Œéå†æ¯ä¸€ä¸ª key å€¼ï¼Œ ç„¶åä¸ºå¯¹åº”çš„ state èµ‹å€¼ä¸ºæ–°çš„å‡½æ•°ã€‚ å½“æˆ‘ä»¬å½¢æˆäº†æ–°çš„ reducer ä»¥åï¼Œ ä¼ å…¥ä»»ä½• çš„ action å’Œ status å°±ä¼šè¿”å›ä¸€ä¸ªæ˜ç¡®çš„ çŠ¶æ€æ ‘äº†ã€‚å¯èƒ½æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­çš„ï¼š 12345678&#123; visibilityFilter: 'SHOW_ALL', todos: &#123; id: 0, text: 'Hello world', completed: false &#125;&#125; createStore çš„å®ç°åŸç†åŒæ ·æˆ‘ä»¬å…ˆçœ‹ä¸‹ createStore çš„ç”¨æ³•ï¼š123//let &#123; subscribe, dispatch, getState &#125; = createStore(reducer);import &#123; createStore &#125; from 'redux';const store = createStore(reducer) createStore é€šè¿‡ä¼ å…¥ æˆ‘ä»¬çš„ reducer å½¢æˆä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ store, è¿™ä¸ªå½¢æˆçš„ store æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæœ‰3ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ï¼š 123store.dispatch()store.subscribe() store.getState() æ‰€ä»¥å…¶å®æˆ‘ä»¬å°±æ˜¯è¦ç¼–è¾‘ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°é‡Œé¢å¯ä»¥æœ‰è¿™ä¸‰ä¸ªæ–¹æ³•æš´éœ²ç»™æˆ‘ä»¬ä½¿ç”¨ã€‚ åŸç†å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526const createStore = ( reducer ) =&gt; &#123; let state; let listeners = []; const getState = () =&gt; state; const dispatch = ( action ) =&gt; &#123; state = reducer(state, action); listeners.forEach(listener =&gt; listener()); &#125; const subscribe = ( listener ) =&gt; &#123; listeners.push(listener); return ()=&gt;&#123; listeners = listeners.filter(l =&gt; l !== listener) &#125; &#125; dispatch(&#123;&#125;); return &#123; getState, dispatch, subscribe &#125;&#125; å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ˜¯å…ˆå®ç°äº†è¿™ä¸‰ä¸ªæ–¹æ³•ã€‚ä¸‹é¢ç®€å•çœ‹ä¸‹æ€ä¹ˆç”¨è¿™ä¸‰ä¸ªæ–¹æ³•ï¼š 12345678910111213const &#123;createStore&#125; = Redux;const store = createStore(reducer);const render = () =&gt; &#123; document.body.innerHTML = store.getState();&#125;store.subscribe(render)render();document.addEventListener('click', ()=&gt;&#123; store.dispatch(&#123;type:'INCREMENT'&#125;);&#125;)","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"React","slug":"React","permalink":"http://sevencai.github.io/tags/React/"}]},{"title":"åœ¨åº”ç”¨(å¾®ä¿¡/æµè§ˆå™¨)ä¸­æ‹‰èµ·æ‰‹æœºQQ","slug":"åœ¨åº”ç”¨-å¾®ä¿¡-æµè§ˆå™¨-ä¸­æ‹‰èµ·æ‰‹æœºQQ","date":"2016-10-16T10:43:30.000Z","updated":"2016-12-12T02:33:10.000Z","comments":true,"path":"2016/10/16/åœ¨åº”ç”¨-å¾®ä¿¡-æµè§ˆå™¨-ä¸­æ‹‰èµ·æ‰‹æœºQQ/","link":"","permalink":"http://sevencai.github.io/2016/10/16/åœ¨åº”ç”¨-å¾®ä¿¡-æµè§ˆå™¨-ä¸­æ‹‰èµ·æ‰‹æœºQQ/","excerpt":"","text":"åœºæ™¯æ˜¯ï¼šå½“æˆ‘ä»¬åšä¸€äº›æ´»åŠ¨ç”¨æ¥æ‹‰æ–°ç­‰ç­‰æ—¶ï¼Œé€šå¸¸ä¼šé™åˆ¶ç”¨æˆ·åªåœ¨æ‰‹Qä¸­æ‰“å¼€ã€‚æ¯”å¦‚ç”¨æˆ·é€šè¿‡å¾®ä¿¡æ‰«ç åˆ°äº†æˆ‘ä»¬H5æ´»åŠ¨é¡µé¢ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä¼ªåè®®å°†æ‰‹Qæ‹‰èµ·ï¼Œå¹¶ä¸”å°†H5é¡µé¢æ‰“å¼€ã€‚ç”¨æˆ·åˆ°è¾¾çš„é€”å¾„æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚é€šè¿‡æµè§ˆå™¨ï¼Œé€šè¿‡å¾®ä¿¡ï¼Œé€šè¿‡å…¶ä»–APPåº”ç”¨ã€‚ æ­£è§£ä»£ç å…ˆä¸çœ‹åŸç†çš„è¯ï¼Œä»£ç åº”è¯¥æ˜¯åƒä¸‹é¢çš„ã€‚ä»Šå¤©æˆ‘ä¹Ÿå‚ç…§äº†è®¸å¤šåˆ«äººçš„ä»£ç ï¼Œä½†å¤§å¤šæ•°ä¸æ˜¯è¿™ä¸ªä¸å…¼å®¹ï¼Œå°±æ˜¯å¾®ä¿¡æ‹‰ä¸èµ·æ¥ã€‚æˆ–è€…æ˜¯ IOS æ‹‰èµ·æ­£å¸¸ï¼Œä½†æ˜¯ Android å°±æ˜¯ä¸è¡Œã€‚è¿™é€šå¸¸æ˜¯ç”±äºä»£ç æ²¡æœ‰å®Œå¤‡é€ æˆçš„ã€‚æ›´ä¸»è¦æ˜¯å› ä¸ºæˆ‘ä»¬çš„æµè§ˆå™¨ä»€ä¹ˆçš„éƒ½åœ¨æ—¶æ—¶æ›´æ–°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899/*** æ£€æµ‹æµè§ˆå™¨UA* @type &#123;Function&#125;*/var condition = (function() &#123; var ua = navigator.userAgent, chrome = ua.match(/Chrome\\/([\\d.]+)/) || ua.match(/CriOS\\/([\\d.]+)/); //åˆ©ç”¨æ­£åˆ™è·å¾—åŒ¹é… å®‰å“ UA var getAndroidVersion = function() &#123; var ua = navigator.userAgent.toLowerCase(), version = ua.match(/android\\s([0-9\\.]*)/); return version ? version[1].split('.')[0] : false; &#125;; return &#123; chrome: chrome, //true or false androidVersion: getAndroidVersion() //version &#125;&#125;);/*** è·å¾—ä¼ªåè®®* @param jumpURL* @returns &#123;string&#125;*/function getURL( normal ) &#123; if(normal) &#123; return 'mqqapi://forward/url?src_type=internal&amp;version=1&amp;url_prefix='+ btoa(location.href); &#125; return \"intent://forward/url?src_type=web&amp;style=default&amp;=1&amp;version=1&amp;url_prefix=\" + btoa(location.href) + \"#Intent;scheme=mqqapi;package=com.tencent.mobileqq;end\";&#125;/** * æ£€æµ‹æ˜¯å¦å®‰è£…äº†QQ,å¦‚æœæ²¡æœ‰å®‰è£…è¦å¼•å¯¼ç”¨æˆ·å®‰è£… */var checkIfInstallQQ = function() &#123; WeixinJSBridge.invoke(\"getInstallState\", &#123; \"packageUrl\": \"mqq://\", //ios \"packageName\": \"com.tencent.mobileqq\" //android &#125;, function(res) &#123; if(/^get_install_state:yes/.test(res.err_msg)) &#123; window.open( getURL( true ), '_self' ); window.setTimeout(function() &#123; WeixinJSBridge.invoke(\"closeWindow\"); &#125;, 1500); &#125; else if(/^get_install_state:no$/.test(res.err_msg)) &#123; if(confirm('æ‚¨è¿˜æ²¡æœ‰å®‰è£…æ‰‹Qï¼Œç°åœ¨å»ä¸‹è½½å®‰è£…ï¼Ÿ')) &#123; window.location.replace('http://im.qq.com/mobileqq/touch/index.html'); &#125; &#125; else &#123; Alert.show(&#123; showCancel:false, msg: \"err:\" + res.err_msg &#125;); &#125; &#125;);&#125;;/** * åˆ¤æ–­æ˜¯å¦åœ¨æ‰‹qä¸­æ‰“å¼€ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™åˆ¤æ–­æ˜¯å¦åœ¨å¾®ä¿¡æ‰“å¼€ * å¦‚æœåœ¨å¾®ä¿¡æ‰“å¼€ï¼Œè°ƒç”¨å¾®ä¿¡çš„ JSBridge */if( !U.ua.QQ )&#123; Alert.show(&#123; showCancel:false, msg: \"è¯·åœ¨æ‰‹qä¸­æ‰“å¼€æ­¤é¡µé¢\", onConfirm : function () &#123; //å¦‚æœåœ¨å¾®ä¿¡ä¸­æ‰“å¼€ if(U.ua.weixin) &#123; if (typeof WeixinJSBridge == \"object\" &amp;&amp; typeof WeixinJSBridge.invoke == \"function\") &#123; checkIfInstallQQ(); &#125; else &#123; if (document.addEventListener) &#123; document.addEventListener(\"WeixinJSBridgeReady\", checkIfInstallQQ, false); &#125; else if (document.attachEvent) &#123; document.attachEvent(\"WeixinJSBridgeReady\", checkIfInstallQQ); document.attachEvent(\"onWeixinJSBridgeReady\", checkIfInstallQQ); &#125; &#125; &#125;else&#123; //è¿™é‡Œä¹Ÿå¯ä»¥åˆ¤æ–­ä¸‹æ˜¯å¦å®‰è£…äº†æ‰‹Q if(U.ua.android &amp;&amp; condition.chrome &amp;&amp; condition.androidVersion() &gt;= 5) &#123; window.open( getURL(false) ); &#125;else&#123; window.open( getURL(true) ); &#125; &#125; &#125; &#125;); return;&#125; ä»£ç åˆ†ææ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬æ‹‰èµ·æ‰‹qï¼Œåˆ©ç”¨ä¼ªåè®®å°±å¯ä»¥äº†ã€‚ä¼ªåè®®æ˜¯å½¢å¦‚ä¸Šé¢çš„ä¸æ˜¯http,https,ftp,ä¹‹ç±»çš„åè®®ã€‚ä¾‹å¦‚ï¼š 123mqqapi://forward/url?src_type=internal&amp;version=1&amp;url_prefix='+ btoa(location.href)\"intent://forward/url?src_type=web&amp;style=default&amp;=1&amp;version=1&amp;url_prefix=\" + btoa(location.href) + \"#Intent;scheme=mqqapi;package=com.tencent.mobileqq;end\" mqqapiæ˜¯ä¸“é—¨æ‰èµ·æ‰‹Qçš„ï¼Œ åé¢çš„ btoa(location.href)æ˜¯ç”±äºæˆ‘ä»¬éœ€è¦åœ¨æ‰‹qæ‰“å¼€æˆ‘ä»¬çš„H5ï¼Œæ‰€ä»¥è¿™é‡Œè¦åˆ©ç”¨ location.href, å¹¶ä¸”éœ€è¦ base64çš„ç¼–ç ã€‚è¿™é‡Œçš„ç¼–ç æˆ‘ä»¬æ˜¯åˆ©ç”¨çš„ window.btoa å‡½æ•°ã€‚æ¯”èµ·è‡ªå·±å»ç¼–å†™ base64encodeï¼Œ è¿™ä¸ªæ–¹æ³•ç»™æˆ‘ä»¬æä¾›äº†ä¾¿åˆ©ã€‚ é‚£ä¹ˆæˆ‘ä»¬è°ƒç”¨è¿™ä¸€ä¸ª mqqapi å°±å¯ä»¥äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å»åˆ¤æ–­ä¸€ä¸ª intent å‘¢ï¼ŸåŸå› æ˜¯ï¼š Android 4.4 ä»¥ä¸Šå°†åŸç”Ÿçš„æµè§ˆå™¨æ¢æˆäº†chrome,è€ŒAndroid 5.å¼€å§‹çš„chromeä¸å†å…è®¸ä¼ ç»Ÿçš„schemeæ‹‰èµ·æ‰‹qã€‚ æ‰€ä»¥å½“æ‰“å¼€çš„æµè§ˆå™¨æ˜¯ Android5 çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±è¦å»è°ƒç”¨è¿™ä¸ª intent æ–°åè®®ï¼Œè€Œä¸æ˜¯åŸæ¥çš„ mqqapiåè®®ã€‚ä½†æ˜¯ä¹Ÿè¦æ³¨æ„ï¼Œè¿™é‡Œçš„æ‹‰èµ·appæ˜¯éœ€è¦ç”¨æˆ·æ“ä½œçš„ï¼Œéœ€è¦ç”¨æˆ·ç¡®å®šï¼ˆç‚¹å‡»ç¡®è®¤æŒ‰é’®ï¼‰æ‹‰èµ·æ‰å¯ä»¥ã€‚æ‰€ä»¥ä¸è¦ç”¨JSå®šæ—¶å™¨äº†ã€‚ å¦å¤–è¦æ³¨æ„ IOS 9.0 safari ï¼ŒIOS 9.0ä»¥åï¼ŒåŸç”Ÿçš„safariä¸æ”¯æŒiframe æ‹‰èµ· scheme äº†ã€‚å¯ä»¥ç”¨ location.href/top.location.hrefæ‹‰èµ·ã€‚ é‚£ä¹ˆä¸‹é¢è¿™äº›ä»£ç æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ 1234567 WeixinJSBridge.invoke(\"getInstallState\", &#123; \"packageUrl\": \"mqq://\", //ios \"packageName\": \"com.tencent.mobileqq\" //android &#125;, function(res) &#123; //......&#125; WeixinJSBridgeæ˜¯å¾®ä¿¡æµè§ˆå™¨å†…ç½®çš„ä¸€ä¸ªå¯¹è±¡ã€‚JS API å»ºç«‹åœ¨å†…ç½®çš„è¿™ä¸ªå¯¹è±¡ä¸­ã€‚ä½†æ˜¯æœ‰ä¸€ä¸ªå‘è¦æ³¨æ„ã€‚ WeixinJSBridge ä¸æ˜¯æˆ‘ä»¬ä¸€æ‰“å¼€ä¸€ä¸ª WebView å°±å¯ä»¥äº†çš„ã€‚æˆ‘ä»¬éœ€è¦åœ¨å®¢æˆ·ç«¯åˆå§‹åŒ–è¿™ä¸ªå¯¹è±¡ã€‚å½“è¿™ä¸ªå¯¹è±¡ ready çš„æ—¶å€™ï¼Œæˆ‘ä»¬å»ç›‘å¬ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ª WeixinJSBridgeReady äº‹ä»¶ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨è°ƒç”¨è¿™ä¸ª JS API çš„æ—¶å€™ï¼Œä¸€å®šè¦åˆ¤æ–­ä¸‹ WeixinJSBridge æ˜¯å¦å­˜åœ¨ã€‚ä¹Ÿå°±æ˜¯ 123typeof WeixinJSBridge == \"object\" &amp;&amp; typeof WeixinJSBridge.invoke == \"function\"document.addEventListener(\"WeixinJSBridgeReady\", checkIfInstallQQ, false); è¿™ä¸¤å¥è¯çš„ä½œç”¨ã€‚ WeixinJSBridge.invoke æ˜¯ WeixinJSBridge çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨æ¥å”¤èµ·ç›¸å…³çš„äº‹ä»¶ã€‚è¿™é‡Œæˆ‘ä»¬å”¤èµ·çš„æ˜¯ getInstallState è¿™ä¸ªäº‹ä»¶ã€‚ç”¨æ¥åˆ¤æ–­æ˜¯å¦ç”¨æˆ·å®‰è£…äº† æ‰‹æœºQQã€‚ å½“ç„¶è¿˜æœ‰å¾ˆå¤šåˆ«çš„ APIï¼Œæ¯”å¦‚ 1234document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() &#123; // é€šè¿‡ä¸‹é¢è¿™ä¸ªAPIéšè—åº•éƒ¨å¯¼èˆªæ ï¼Œâ€˜showToolbarâ€™æ˜¯æ˜¾ç¤ºå¯¼èˆªæ  WeixinJSBridge.call('hideToolbar');&#125;); å»¶ä¼¸å’Œæ‰©å±•è¿™é‡Œå»å­¦ä¹ äº†ä¸‹ä¸‹é¢è¿™äº›çš„åŒºåˆ«ã€‚æ˜¯å¯èƒ½ä¼šç¢°åˆ°çš„å‘ã€‚ â€œtop.location.hrefâ€æ˜¯æœ€å¤–å±‚çš„é¡µé¢è·³è½¬ â€œwindow.location.hrefâ€ã€â€location.hrefâ€æ˜¯æœ¬é¡µé¢è·³è½¬ = self.location.href â€œparent.location.hrefâ€æ˜¯ä¸Šä¸€å±‚é¡µé¢è·³è½¬. å…¶ä»–æ–¹æ³•ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨ window.open æ‰“å¼€çš„ï¼Œå…¶å®æˆ‘ä»¬è¿˜å¯ä»¥ç”¨ ifame æ‰“å¼€ã€‚å¦‚ä¸‹é¢çš„ä»£ç ï¼š 1234567891011121314151617// ios 9 åï¼Œsafari æ‰“ä¸å¼€ï¼Œå¯ä»¥ç”¨ location.href æˆ–è€… top.location.href å¤„ç†if(mqq.IOS)&#123; location.href = getURL(true);&#125;else&#123; //åˆ©ç”¨ iframe å¤„ç† var iframe = document.createElement(\"iframe\"); if(U.ua.android &amp;&amp; condition.chrome&amp;&amp; condition.androidVersion() &gt;= 5)&#123; iframe.src = getURL(false); &#125;else&#123; iframe.src = getURL(true); &#125; iframe.onload = function () &#123; setTimeout(function() &#123; document.body.appendChild(iframe); &#125;, 0); &#125;&#125; ä¸»è¦è¿™é‡Œä¹Ÿæ˜¯ä¸€ä¸ªç®€ç•¥çš„å†™æ³•ã€‚å¯ä»¥æ›´åŠ å®Œå–„çš„ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/tags/WEBå¼€å‘/"}]},{"title":"è®°ä¸€æ¬¡å®æˆ˜ Dom XSS æ¼æ´","slug":"è®°ä¸€æ¬¡å®æˆ˜-Dom-XSS-æ¼æ´","date":"2016-10-09T14:33:55.000Z","updated":"2017-12-19T12:41:00.000Z","comments":true,"path":"2016/10/09/è®°ä¸€æ¬¡å®æˆ˜-Dom-XSS-æ¼æ´/","link":"","permalink":"http://sevencai.github.io/2016/10/09/è®°ä¸€æ¬¡å®æˆ˜-Dom-XSS-æ¼æ´/","excerpt":"","text":"å›½åº†çš„å‰ä¸€å¤©ï¼Œçªç„¶æœ‰ä¸€ä¸ªæ¼æ´å•æ¥åˆ°æˆ‘è¿™é‡Œæ¥ï¼Œå½“æ—¶å¿ƒé‡Œå¾ˆç€æ€¥ï¼Œç¬¬ä¸€å®ä¹ ç”Ÿå°ç™½ï¼Œå¯¹äºæˆ‘ä»¬è¿™ç§æ”¯ä»˜éƒ¨é—¨æœ‰æ¼æ´ä¸æ˜¯å¾ˆå¯æ€•ï¼Œä»¥å‰æ²¡è§è¿‡ï¼Œè§‰å¾—æœ‰ç‚¹å“äººã€‚ç¬¬äºŒï¼Œä¸ºä»€ä¹ˆæ˜¯å›½åº†çš„å‰ä¸€å¤©å‘¢ï¼Œä¸èƒ½å‘ç‰ˆæœ¬ã€‚çœ‹äº†ä¸‹ï¼Œå°±æ˜¯ç†Ÿæ‚‰åˆä¸å¤ªç†Ÿæ‚‰çš„ Dom xss æ¼æ´ã€‚ç†Ÿæ‚‰æ˜¯å› ä¸ºä»¥å‰ä¹¦é‡Œç»å¸¸è§ï¼Œä¸ç†Ÿæ‚‰æ˜¯å› ä¸ºä»¥å‰æ²¡æœ‰å®è·µè¿‡ã€‚ ç°è±¡åŠè§£å†³åŠæ³•å®‰å…¨éƒ¨é—¨çš„åŒäº‹è¯´ï¼Œå®ƒæ›´æ”¹äº† uin, ç„¶åå°±å¯ä»¥è¾“å‡º ç”¨æˆ·uin, ä¹Ÿå°±æ˜¯ä¿—ç§°çš„ alert å‡ºæ¥ã€‚ å¤§æ¦‚æ˜¯è¿™æ ·ä¸€ä¸ªæ­¥éª¤ 12document.cookie = \"uin=&lt;img src=x onerror=alert('')&gt;\"ç„¶ååˆ·æ–°äº†æˆ‘çš„ç½‘é¡µï¼Œç”±äºæˆ‘è·å–cookieçš„æ–¹æ³•ä¸ä¸¥è°¨ï¼Œè¿™ä¸ªæ—¶å€™å°±alertå‡ºæ¥äº†ã€‚ è§£å†³æ–¹æ³•å½“ç„¶æ˜¯æ¢æ‰æˆ‘ä¸ä¸¥è°¨çš„è·å–cookieçš„æ–¹æ³•ï¼Œæ­£ç¡®è·å– cookie çš„æ–¹æ³•åº”è¯¥å¦‚ä¸‹ï¼š1234567891011121314151617function getCookie(b) &#123;var filterXSS = function(e) &#123; if (!e) return e; for (; e != unescape(e);) e = unescape(e); for (var r = [\"&lt;\", \"&gt;\", \"'\", '\"', \"%3c\", \"%3e\", \"%27\", \"%22\", \"%253c\", \"%253e\", \"%2527\", \"%2522\"], n = [\"&amp;#x3c;\", \"&amp;#x3e;\", \"&amp;#x27;\", \"&amp;#x22;\", \"%26%23x3c%3B\", \"%26%23x3e%3B\", \"%26%23x27%3B\", \"%26%23x22%3B\", \"%2526%2523x3c%253B\", \"%2526%2523x3e%253B\", \"%2526%2523x27%253B\", \"%2526%2523x22%253B\"], a = 0; a &lt; r.length; a++) e = e.replace(new RegExp(r[a], \"gi\"), n[a]); return e &#125;; var a; return filterXSS((a=document.cookie.match(RegExp(\"(^|;\\\\s*)\"+b+\"=([^;]*)(;|$)\")))?unescape(a[2]):null)&#125; æ¢ç©¶åŸå› é‚£ä¹ˆæˆ‘çš„ Cookie æ˜¯æ€ä¹ˆè·å–çš„å‘¢ï¼Ÿ 12var ret = document.cookie.match(new RegExp(\"(?:^|;\\\\s)\" + name + \"=(.*?)(?:;\\\\s|$)\"));return ret ? ret[1] : \"\"; ä¸ºå•¥æˆ‘çš„å°±ä¸ä¸¥è°¨äº†å‘¢ï¼Ÿ æ—¥å¸¸æˆ‘ä»¬çš„cookie æ˜¯è¿™æ ·ä¸€ç§æ ¼å¼ï¼š1ts_refer=ADTAGpay.index.header.paycenter; pgv_si=s3636090880; pgv_info=ssid=s9066946176; ts_last=pay.qq.com/; pgv_pvid=2986859684; ts_uid=8406093480 æ‰€ä»¥ä¸Šé¢ä»£ç é€šè¿‡ = å’Œ ; è·å¾—å¯¹åº”çš„ cookie , ä¼¼ä¹æ²¡æœ‰é”™ï¼Œä½†æ˜¯å¦‚æœä¸€é‡åˆ°æ¶æ„æ”»å‡»ï¼Œæ²¡æœ‰å¯¹ä¸åˆæ³•å­—ç¬¦è¿›è¡Œä»»æ„è½¬ä¹‰å°±è¾“å‡ºåˆ°é¡µé¢ä¸Šï¼Œå°±ä¼šé€ æˆ web å‰ç«¯çš„å®‰å…¨å¤§éšæ‚£ã€‚æ‰€ä»¥çœ‹åˆ°æœ€ä¸Šé¢æˆ‘ä»¬çš„å¥½æ–¹æ³•é‡Œé¢ï¼Œæ˜¯æœ‰å¯¹ä¸åˆæ³•å­—ç¬¦è¿›è¡Œè½¬ä¹‰çš„ã€‚æ‰€ä»¥æˆ‘ä»¬è¿™æ ·å¤„ç†åï¼Œå°±ä¼šå˜æˆä¸‹é¢è¿™æ ·ä¸€ä¸ªç»“æœï¼š å»¶ä¼¸è®°å¾—æˆ‘åˆšæ¥é¢è¯•çš„æ—¶å€™ï¼Œå½“æ—¶ qq é—®äº†æˆ‘è·å– cookie çš„æ–¹æ³•ï¼Œé‚£æ—¶ä¹‹å‰åšé¡¹ç›®å†™è¿‡è·å– cookie çš„æ–¹æ³•ï¼Œè¿˜æ˜¯ç‰¹åˆ«å‚»çš„æ–¹æ³•ï¼Œä»£ç å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š1234567891011121314151617181920212223242526272829function getCookie(c_name)&#123;if (document.cookie.length&gt;0) &#123; c_start=document.cookie.indexOf(c_name + \"=\") if (c_start!=-1) &#123; c_start=c_start + c_name.length+1 c_end=document.cookie.indexOf(\";\",c_start) if (c_end==-1) c_end=document.cookie.length return unescape(document.cookie.substring(c_start,c_end)) &#125; &#125;return \"\"&#125; æ²¡é”™ï¼Œå°±æ˜¯æ­£åˆ™ä¹Ÿæ²¡ç”¨ï¼Œç›´æ¥å»æ‰¾ = å’Œ ;ä¹‹é—´çš„ä¸²æ˜¯å¦ä¸è¦æŸ¥æ‰¾çš„ç›¸åŒã€‚è¿™ä¸ªæ–¹æ³•åœ¨ w3cShool ä¸Šä½œä¸ºäº†æ ‡å‡†æ–¹æ³•ï¼Œç°åœ¨çœ‹æ¥æ˜¯è¯¯å¯¼äººäº†ã€‚ å½“æ—¶ qq é—®æˆ‘æœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•ï¼Œæˆ‘è¯´æ­£åˆ™ï¼Œä½†æ˜¯æ­£åˆ™è¿˜ä¸èƒ½å¾ˆå¿«çš„å†™å‡ºæ¥ã€‚é‚£ä¹ˆè¿™ç§æ–¹æ³•é™¤äº†æ•ˆç‡ä¸é‚£ä¹ˆé«˜ä»¥å¤–ï¼Œæœ‰æ²¡æœ‰ä¸Šé¢æåˆ°çš„å®‰å…¨éšæ‚£å‘¢ï¼Ÿ**åšä¸ªå®éªŒï¼š 1document.cookie = \"a=123 b=other; b=678\"; è¿™ä¸ªçš„æ„æ€æ˜¯ cookie a çš„å€¼ä¸º 123 b=other, bçš„å€¼ä¸º 678, ä½†æ˜¯æˆ‘ä»¬é€šè¿‡ä¸Šé¢çš„ getCookie æ–¹æ³• åšå®éªŒæ—¶ï¼š12getCookie(&quot;b&quot;); //è¾“å‡º othergetCookie(&quot;a&quot;); //è¾“å‡º 123 b=other bçš„å€¼å¾ˆæ˜æ˜¾ä¸æ­£ç¡®äº†ã€‚è¿™æ ·å°±æ··æ·†äº†æ­£ç¡®çš„ cookieã€‚ æ‰€ä»¥è¿™ç§æ–¹æ³•ä¹Ÿä¸æ˜¯æ­£ç¡®çš„æ–¹æ³•ï¼Œè¿ç”¨æˆ‘ä»¬æœ€ä¸Šé¢æåˆ°çš„è§£å†³æ–¹æ³• å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ æ€»ç»“è¿˜æ˜¯å®æˆ˜å‡ºçœŸçŸ¥ï¼Œç»§ç»­å‰è¡Œï¼ä¸æ€•çŠ¯é”™ï¼Œç§¯ç´¯ç»éªŒã€‚æˆ‘å½“æ—¶è·Ÿå¸ˆå‚…è¯´æˆ‘é‡åˆ°äº† dom xss æ¼æ´ï¼Œå¸ˆå‚…é©¬ä¸Šå°±è®©æˆ‘å»æ£€æŸ¥ cookie è·å–çš„æ–¹æ³•ï¼Œè¿æ•´ä¸ªäº‹æƒ…çš„ç»è¿‡å°±æ²¡é—®ï¼Œå°±å¯ä»¥åšå‡ºå‡†ç¡®çš„åˆ¤æ–­ï¼Œè¿™å°±æ˜¯è€å¸æœºå•Šï¼Œå‘ä»–å­¦ä¹ ã€‚å¸Œæœ›ä»¥åçŸ¥é“ä¸€äº›æ›´å¤šå…³äºå®‰å…¨æ–¹é¢çš„å®æˆ˜ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/tags/WEBå¼€å‘/"}]},{"title":"Git åˆ†æ”¯ç®¡ç†ä¸å¤šäººåä½œ","slug":"Git-åˆ†æ”¯ç®¡ç†ä¸å¤šäººåä½œ","date":"2016-09-20T15:19:04.000Z","updated":"2016-12-12T02:28:14.000Z","comments":true,"path":"2016/09/20/Git-åˆ†æ”¯ç®¡ç†ä¸å¤šäººåä½œ/","link":"","permalink":"http://sevencai.github.io/2016/09/20/Git-åˆ†æ”¯ç®¡ç†ä¸å¤šäººåä½œ/","excerpt":"","text":"è¿™ä¸€ç¯‡æ–‡ç« ä¸»è¦å­¦ä¹ å’Œè®°å½•åˆ†æ”¯ç®¡ç†å’Œå¤šäººåˆä½œã€‚æˆ‘ä»¬çŸ¥é“ Git çš„åˆ†æ”¯ç®¡ç†éå¸¸å¿«ï¼Œè¿™æ˜¯å› ä¸º Git åªæ˜¯ç”Ÿæˆä¸€ä¸ªæŒ‡å‘å½“å‰ç‰ˆæœ¬çš„æŒ‡é’ˆã€‚ä½†æ˜¯ä»¥å‰çš„å¾ˆå¤šç®¡ç†è½¯ä»¶éƒ½æ˜¯ç”Ÿæˆä¸€ä»½ä»£ç çš„ç‰©ç†æ‹·è´ï¼Œå¯ä»¥æƒ³è±¡ï¼Œå¦‚æœä»£ç å¾ˆå¤§ï¼Œæ˜¯æœ‰å¤šæ…¢ã€‚ä½† Git çš„è¿™ä¸ªç‰¹ç‚¹ï¼Œä¹Ÿéœ€è¦æˆ‘ä»¬æ›´å¥½çš„æŒæ¡å®ƒçš„åˆ‡æ¢ï¼Œå¦åˆ™å¾ˆå®¹æ˜“é€ æˆé”™è¯¯ã€‚ åœ¨ SF ä¸Šçœ‹åˆ°äº†ä¸€å¼ å›¾ç‰‡ï¼Œè§‰å¾—éå¸¸å¥½,å›¾ç‰‡æ¥æºæ˜¯SFçš„è¿™ç¯‡æ–‡ç« ,æ„Ÿè°¢ï¼š åˆ›å»ºä¸åˆå¹¶åˆ†æ”¯åˆ›å»ºå’Œåˆå¹¶åˆ†æ”¯éƒ½å¯ä»¥çœ‹ä½œæ˜¯æŒ‡é’ˆçš„ç§»åŠ¨ã€‚æˆ‘ä»¬çœ‹ä¸‹ä¸‹é¢è¿™æ ·ä¸€å¥—æµç¨‹ï¼Œè¿™æ˜¯æœ€å¸¸è§çš„ï¼š git checkout -b dev //åˆ›å»ºä¸€ä¸ªæ–°çš„devï¼ˆ-båˆ›å»ºå¹¶åˆ‡æ¢ï¼‰ git add file.txt //åœ¨devåˆ†æ”¯ä¸­ä¿®æ”¹ file.txt æ–‡ä»¶ git commit -m &quot;add change on dev&quot; //åˆ°devåˆ†æ”¯æäº¤æ–°çš„ä»£ç  git checkout master //åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯ git merge dev //åœ¨ä¸»åˆ†æ”¯ä¸Šåˆå¹¶devåˆ†æ”¯ git branch -d dev //devå·¥ä½œå®Œæˆï¼Œåˆ é™¤è¯¥devåˆ†æ”¯ æˆ‘ç”»äº†ä¸€å¼ å›¾ç”¨äºæè¿°è¿™ä¸ªè¿‡ç¨‹ï¼š ä¸‹é¢æˆ‘ä»¬å­¦ä¹ ä¸€äº›åŸºæœ¬çš„å‘½ä»¤ï¼š æŸ¥çœ‹åˆ†æ”¯ï¼šgit branch åˆ›å»ºåˆ†æ”¯ï¼šgit branch &lt;name&gt; åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout &lt;name&gt; åˆ›å»º+åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout -b &lt;name&gt; åˆå¹¶æŸåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼šgit merge &lt;name&gt; åˆ é™¤åˆ†æ”¯ï¼šgit branch -d &lt;name&gt; æ‰€ä»¥ï¼š git checkout -b dev = git branch dev + git checkout devã€‚ åˆå¹¶åˆ†æ”¯ç¢°åˆ°çš„é—®é¢˜æœ‰æ—¶å€™æˆ‘ä»¬ä¼šç¢°åˆ°ä¸‹é¢è¿™ä¸ªé—®é¢˜ï¼š å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ–°å»ºäº†ä¸€ä¸ª feature1 åˆ†æ”¯ï¼Œè¿™ä¸ªæ—¶å€™æ¯”å¦‚ä¿®æ”¹äº† a æ–‡ä»¶çš„ç¬¬ä¸€è¡Œä»£ç ã€‚ç„¶åå½“æˆ‘ä»¬åˆ‡æ¢åˆ° master åˆ†æ”¯çš„æ—¶å€™ï¼Œå‘ç° master ä¹Ÿå·²ç»æœ‰äº†æ–°ç‰ˆæœ¬ã€‚ç„¶åæˆ‘ä»¬æŒ‰ç…§ä¸Šé¢å°†çš„æ–¹æ³• åˆ‡æ¢åˆ° master åˆ†æ”¯ï¼Œç„¶ååˆ©ç”¨ git merge feature1 æ¥è¿›è¡Œåˆå¹¶ã€‚ä½†æ˜¯å‘ç°ï¼Œ master åˆ†æ”¯ä¹Ÿæ˜¯ä¿®æ”¹äº† a æ–‡ä»¶çš„ç¬¬ä¸€è¡Œä»£ç ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±è¦æ‰‹åŠ¨å»è§£å†³å†²çªäº†ã€‚å¹¶ä¸”ä¼šåœ¨ a æ–‡ä»¶å‘ç°ä¸‹åˆ—é—®é¢˜ï¼š &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD Creating a new branch is a ======= Creating a new branch is b &gt;&gt;&gt;&gt;&gt;&gt;&gt; feature1 Git åˆ©ç”¨ &lt;&lt;&lt;&lt;&lt;&lt;&lt; ======= &gt;&gt;&gt;&gt;&gt;&gt;&gt;æ¥è¡¨æ˜å†²çªçš„åœ°æ–¹ï¼Œæˆ‘ä»¬æ‰‹åŠ¨è§£å†³åå†è¿›è¡Œç®€å•çš„åˆå¹¶å°±æ²¡æœ‰é—®é¢˜äº†ã€‚ç„¶åå†åˆ é™¤ feature1 åˆ†æ”¯ã€‚ è¯•è¯• git log --graphè¿™ä¸ªå‘½ä»¤ï¼Œä½ ä¼šå‘ç°åˆ†æ”¯åˆå¹¶å›¾ã€‚ åˆå¹¶åˆ†æ”¯æ—¶ï¼Œæœ‰æ—¶å€™ Git ä¼šç”¨ Fast forward æ¨¡å¼ï¼Œä½†è¿™ç§æ¨¡å¼ä¸‹ï¼Œåˆ é™¤åˆ†æ”¯åï¼Œä¼šä¸¢æ‰åˆ†æ”¯ä¿¡æ¯ã€‚å¦‚æœè¦å¼ºåˆ¶ç¦ç”¨ Fast forward æ¨¡å¼ï¼ŒGit å°±ä¼šåœ¨ merge æ—¶ç”Ÿæˆä¸€ä¸ªæ–°çš„ commit ï¼Œè¿™æ ·ï¼Œä»åˆ†æ”¯å†å²ä¸Šå°±å¯ä»¥çœ‹å‡ºåˆ†æ”¯ä¿¡æ¯ã€‚å¯ä»¥ç”¨ â€“no-ff å‚æ•°ï¼Œè¡¨ç¤ºç¦ç”¨ Fast forward ã€‚ git merge --no-ff -m &quot;no-ff merge&quot; develope //or git merge --no-ff develop çœ‹ä¸‹ä¸‹é¢è¿™å¼ å›¾å¼€äº†è§£ä¸‹æ˜¯å¦é€šè¿‡ â€“no-ff çš„åŒºåˆ«ã€‚ æ­£ç¡®çš„åˆ†æ”¯ç®¡ç†ç­–ç•¥åº”è¯¥æ˜¯è¿™æ ·çš„ã€‚ æ¯ä¸ªäººå¹²è‡ªå·±çš„æ´»ï¼Œåœ¨è‡ªå·±çš„åˆ†æ”¯ä¸Šå·¥ä½œï¼Œåˆ«äººä¸å—å½±å“ä¹Ÿçœ‹ä¸åˆ°ï¼Œç„¶åä¸€å®šæ—¶å€™åˆå¹¶åˆ° dev åˆ†æ”¯ä¸Šï¼Œè¿™æ ·å¤§å®¶å°±å¯ä»¥çœ‹åˆ°äº†ã€‚ç„¶åè¦åˆ°ä¸€å®šçš„æ—¶å€™å‘ç‰ˆæœ¬å†åˆå¹¶åˆ° git åˆ†æ”¯ä¸Šã€‚ ä¿®å¤bugåˆ†æ”¯æ¯”å¦‚æˆ‘å½“å‰åœ¨devåˆ†æ”¯å·¥ä½œï¼Œæ­¤æ—¶å·¥ä½œè¿˜æ²¡æœ‰å®Œæˆä¸èƒ½å¤Ÿ merge åˆ°master åˆ†æ”¯ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™å‘ç°æœ‰ä¸€ä¸ª bug éœ€è¦ä¿®å¤ã€‚æ€ä¹ˆç ´å‘¢ï¼Ÿ Git è¿˜æä¾›äº†ä¸€ä¸ª stash åŠŸèƒ½ï¼Œå¯ä»¥æŠŠå½“å‰å·¥ä½œç°åœºâ€œå‚¨è—â€èµ·æ¥ï¼Œç­‰ä»¥åæ¢å¤ç°åœºåç»§ç»­å·¥ä½œã€‚ git stash //ä¿å­˜ç°åœº git status //å‘ç°ç°åœºæ˜¯å¹²å‡€ git checkout master //åˆ‡æ¢åˆ° master åˆ†æ”¯ä¿®å¤ bug git checkout -b bug //åœ¨ master åˆ†æ”¯ä¸Š æ–°å»ºåˆ†æ”¯ bug git add bug001.txt git commit -m &quot;ä¿®å¤bug&quot; //æäº¤ä¿®æ”¹ git checkout master //åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯ git merge --no-ff -m &quot;merged bug&quot; bug //åˆå¹¶ bug åˆ†æ”¯ git branch -d bug //åˆ é™¤ bug åˆ†æ”¯ å¥½ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å·²ç»å®Œæˆäº† bug åˆ†æ”¯çš„ä¿®æ”¹ã€‚æˆ‘ä»¬è¦ä¼šåˆ°æˆ‘ä»¬çš„ dev åˆ†æ”¯æ¥ç»§ç»­æˆ‘ä»¬æ²¡æœ‰å®Œæˆçš„å·¥ä½œäº†ã€‚è¿›è¡Œå¦‚ä¸‹çš„è¿‡ç¨‹ã€‚ git checkout dev git status //nothing to commit git stash list //æŸ¥çœ‹ç°åœº git stash apply //æ¢å¤ç°åœº git stash drop //åˆ é™¤ stash git stash pop //æ¢å¤å¹¶ä¸”åˆ é™¤ stash git stash list //å†æ¬¡æŸ¥çœ‹ç°åœº è¿‡ç¨‹è§£é‡Šå¦‚ä¸‹ï¼šé¦–å…ˆæˆ‘ä»¬åˆ‡æ¢åˆ°äº† dev åˆ†æ”¯ã€‚ä½†æ˜¯æŸ¥çœ‹ git status å‘ç°å´æ˜¯ nothing to commit ï¼Œè¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢? æˆ‘ä»¬å¯ä»¥åˆ©ç”¨åˆ©ç”¨ git stash list æŸ¥çœ‹ä¸‹ã€‚å‘ç° Git ä¼šåˆ—å‡ºæ‰€æœ‰ä¿å­˜èµ·æ¥çš„ç°åœºï¼š stash@{0}: WIP on dev: 13d436c å·¥ä½œç°åœºè¿˜åœ¨ï¼Œ Git æŠŠ stash å†…å®¹å­˜åœ¨æŸä¸ªåœ°æ–¹äº†ï¼Œä½†æ˜¯éœ€è¦æ¢å¤ä¸€ä¸‹ã€‚ git stash apply &lt;ç°åœºåç§°&gt;//æ¢å¤ç°åœº git stash drop //åˆ é™¤ stash å…¶ä¸­ git stash apply stash@{0} çš„ç°åœºåç§°å¯ä»¥åŠ å¯ä»¥ä¸åŠ ï¼Œå¦‚æœä½  git stash äº†å¤šä¸‹ï¼Œå°±éœ€è¦æŒ‡æ˜äº†ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªï¼Œå°±ç›´æ¥ apply äº†ã€‚ apply åï¼Œä¿å­˜çš„ç°åœºè¿˜åœ¨ï¼Œä½†æ˜¯æˆ‘ä»¬æ˜¯ä¸éœ€è¦çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ é™¤å®ƒï¼Œå†ä½¿ç”¨ git stash drop å³å¯ã€‚è¿™ä¸¤ä¸ªå‘½ä»¤åˆåœ¨ä¸€èµ·å¯ä»¥ç”¨ git stash pop ä»£æ›¿ã€‚ æˆ‘ä»¬å†æ¬¡ä½¿ç”¨ git stash list å°±ä¼šå‘ç°æ²¡æœ‰å•¦ã€‚ æ‰€ä»¥æˆ‘ä»¬æ€»ç»“ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬è¦ä¿®å¤ bugï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºæ–°çš„bug åˆ†æ”¯ï¼Œç„¶ååˆå¹¶å†åˆ é™¤ã€‚ä½†å¦‚æœå½“å‰æ‰‹å¤´å·¥ä½œæ²¡æœ‰å®Œæˆæ—¶ï¼Œå…ˆè¦ç”¨ git stash ä¿å­˜ç°åœºï¼Œç„¶åå»ä¿®å¤bug,æœ€åå†åˆ©ç”¨ git stash pop å›åˆ°å·¥ä½œç°åœºã€‚ è¿™æ—¶å€™æœ‰äººä¼šé—®ï¼Œé‚£æˆ‘ä¸èƒ½è¿™æ ·å—ï¼Ÿ è™½ç„¶æˆ‘åœ¨ dev åˆ†æ”¯ä¸Šè¿›è¡Œäº†ä¿®æ”¹ï¼Œæˆ‘åˆ‡æ¢åˆ° master åˆ†æ”¯ä¸Šå»æ–°å»º bug åˆ†æ”¯ä¸è¡Œå—ï¼Ÿè¿™æ ·æˆ–å¾—åˆ°çš„ä¸æ˜¯ä» master åˆ†æ”¯çš„ä»£ç å—ï¼Ÿ dev ä¸Šçš„ä»£ç åˆæ²¡æœ‰æäº¤åˆ° master åˆ†æ”¯ä¸Šã€‚ ç­”æ¡ˆæ˜¯ä¸è¡Œçš„ã€‚åº”ä¸ºä½ åœ¨ dev ä¸Šçš„æ”¹å˜ï¼Œå³ä½¿åˆ‡æ¢åˆ° master åˆ†æ”¯å»æ–°å»ºåˆ†æ”¯éƒ½ä¸è¡Œï¼Œä¼šæŠŠä½  dev ä¸Šçš„æ›´æ”¹åˆ°æ–°å»ºçš„ bug åˆ†æ”¯ä¸Šã€‚å¯ä»¥è¯•ä¸‹ã€‚æˆ‘åšäº†å®éªŒæ˜¯è¿™æ ·ã€‚ æµ‹è¯•çš„è¿‡ç¨‹ä¸­ï¼Œ æˆ‘å‘ç°äº†ä¸€ä¸ªå¥½ç”¨çš„å‘½ä»¤,æ¯”å¦‚ä½ æ–°å»ºäº†ä¸€ä¸ª bug åˆ†æ”¯ï¼Œè¿™ä¸ª bugåˆ†æ”¯åšäº†ä¿®æ”¹ï¼Œä½†æ˜¯åæ¥åˆä¸æƒ³ç”¨äº†ï¼Œå¦‚æœç›´æ¥ç”¨æ™®é€šçš„git branch -d bug æ˜¯åˆ é™¤ä¸äº†çš„ã€‚è¦ç”¨ä¸‹é¢è¿™ä¸ªå‘½ä»¤ã€‚ git branch -D &lt;name&gt; ç‰¹åˆ«æ³¨æ„ä¸‹ï¼Œæˆ‘ä»¬ä¿®è¡¥äº†çš„ bug åˆ†æ”¯ï¼Œæœ€åä¸ä»…è¦åŒæ­¥åˆ° master åˆ†æ”¯ï¼Œå¯èƒ½è¿˜è¦åŒæ­¥åˆ°å½“å‰å·¥ä½œçš„ dev åˆ†æ”¯ã€‚æˆ‘ä»¬å¯ä»¥èµ·åä¸º fixbug-* æ¥å‘½åã€‚è¿™æ ·æˆ–è®¸æ¯”è¾ƒæ¸…æ¥šã€‚ å¤šäººåä½œä¸¤ä¸ªå°ä¼™ä¼´ Aå’ŒBï¼š Aå’ŒB éƒ½ä»è¿œç¨‹åº“ä¸­ clone ä»£ç ï¼Œç”±äºé»˜è®¤ clone éƒ½æ˜¯ æŠŠè¿œç¨‹ master åˆ†æ”¯å’Œæœ¬åœ° masteråˆ†æ”¯å…³è”äº†èµ·æ¥ï¼Œå¹¶ä¸”åç§°ä¸º originã€‚æ­¤æ—¶ A å’Œ B æœ¬åœ°éƒ½æœ‰ä¸€ä¸ª master åˆ†æ”¯ï¼Œä»–ä»¬éƒ½è¦å»ºç«‹è‡ªå·±çš„ dev åˆ†æ”¯ã€‚äºæ˜¯ A å’Œ B: git checkout -b dev æ­¤æ—¶ A å’Œ B åŒäº‹æŠŠä¿®æ”¹æ¨é€åˆ° è¿œç¨‹ origin çš„ dev ä¸Šï¼Œå¦‚æœç¬¬ä¸€æ¬¡æ²¡æœ‰ dev åˆ†æ”¯ï¼Œåˆ™ä¼šè‡ªåŠ¨å»ºç«‹ã€‚ git push origin dev è‹¥ A å’Œ B åŒæ—¶ä¿®æ”¹äº†åŒä¸€ä¸ªåœ°æ–¹ã€‚è¿™æ—¶å€™ A æ¨é€è¿‡å»ï¼Œ B å† git push origin dev çš„æ—¶å€™ï¼Œä¼š push å¤±è´¥ï¼Œè¦è§£å†³å†²çªï¼Œ æ‰€ä»¥ B éœ€è¦å…ˆ git pull , ä½†æ­¤æ—¶ git pull ä¹Ÿä¼šå¤±è´¥ï¼ŒåŸå› æ˜¯æ²¡æœ‰æŒ‡å®šæœ¬åœ° dev åˆ†æ”¯ä¸è¿œç¨‹ origin/dev åˆ†æ”¯çš„è¿æ¥ã€‚æ­¤æ—¶æˆ‘ä»¬ git branch --set-upstream dev origin/dev git pull git push origin dev æ€»ç»“åˆ°ç›®å‰ä¸ºæ­¢åˆ†æ”¯ç®¡ç†å°±ä¹Ÿå¼„å®Œäº†ã€‚è¿˜æœ‰ä¸€äº›å…¶ä»–åŠŸèƒ½ï¼Œæ¯”å¦‚æ‰“ tag ç­‰ç­‰ã€‚æˆ‘è§‰å¾—ä¸ä¼šç»å¸¸ç”¨åˆ°çš„ï¼Œå°±ä¸ç”¨å†™åœ¨è¿™é‡Œäº†ï¼Œå› ä¸ºä¸å¸¸ç”¨ï¼Œè‚¯å®šè¿˜ä¼šç»å¸¸å¿˜è®°ï¼ŒçŸ¥é“æœ‰è¿™ä¸ªä¸œè¥¿ï¼Œä»¥åå†æ¥æŸ¥å°±è¡Œå•¦ã€‚æ„Ÿè§‰å†™åšå®¢è¿˜æ˜¯å¾ˆå¥½çš„ã€‚å†™å®Œè¿™ä¸¤ç¯‡æ–‡ç« ï¼ŒåŸºæœ¬ä¸Šè‡ªå·±çš„æ€è·¯å°±æ¸…æ¥šäº†ã€‚ä»¥åå†é‡åˆ°é—®é¢˜å°±æ¥è¿™é‡Œé¢çœ‹å°±å¥½å•¦ã€‚å†æ¬¡æ„Ÿè°¢å»–é›ªå³°è€å¸ˆçš„æ–‡ç« ã€‚","categories":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/categories/å·¥å…·-é…ç½®/"}],"tags":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/tags/å·¥å…·-é…ç½®/"}]},{"title":"Git åŸºç¡€çŸ¥è¯†é‡æ–°æ¢³ç†","slug":"Git-åŸºç¡€çŸ¥è¯†é‡æ–°æ¢³ç†","date":"2016-09-20T15:18:31.000Z","updated":"2016-12-12T02:51:54.000Z","comments":true,"path":"2016/09/20/Git-åŸºç¡€çŸ¥è¯†é‡æ–°æ¢³ç†/","link":"","permalink":"http://sevencai.github.io/2016/09/20/Git-åŸºç¡€çŸ¥è¯†é‡æ–°æ¢³ç†/","excerpt":"","text":"ä»¥å‰åœ¨å­¦æ ¡çš„æ—¶å€™ç”¨gitåŸºæœ¬ä¸Šå°±é‚£å‡ ä¸ªå‘½ä»¤ï¼Œä¸€èˆ¬æ˜¯ç”¨äºpushåˆ°githubä¸Šåšå¤‡ä»½ã€‚æ¯”è¾ƒå®¹æ˜“ï¼Œæœ€è¿‘æ¶‰åŠåˆ°äº†gitçš„ä¸€äº›åˆ«çš„ç”¨é€”ï¼Œå¤šäººåˆä½œï¼Œåˆ›å»ºåˆ†æ”¯ç­‰ï¼Œå‘ç°è‡ªå·±æœ‰äº›å‘½ä»¤è¿˜æ˜¯ä¸ç†Ÿæ‚‰ï¼Œéœ€è¦è€æ˜¯æŸ¥æ–‡æ¡£ï¼Œæ‰€ä»¥é‡å¤´å¼€å§‹å­¦ä¹ ï¼Œå¹¶åšè®°å½•æ–¹ä¾¿ä»¥åæŸ¥é˜…ï¼Œä¸‹é¢æ˜¯æˆ‘çš„æ•´ç†ã€‚ Gitçš„ä¼˜ç‚¹é›†ä¸­å¼ vs åˆ†å¸ƒå¼é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç‰ˆæœ¬åº“æ˜¯é›†ä¸­å­˜æ”¾åœ¨ä¸­å¤®æœåŠ¡å™¨ï¼Œå¿…é¡»è”ç½‘å·¥ä½œã€‚å› æ­¤å¦‚æœæ˜¯å±€åŸŸç½‘å¸¦å®½å¤§ï¼Œå°šå¯ã€‚å¦‚æœæ˜¯åœ¨äº’è”ç½‘ä¸Šï¼Œå¯èƒ½ä¼šå¯¼è‡´èŠ±è´¹æ—¶é—´é•¿ã€‚ åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ¯ä¸ªäººç”µè„‘é‡Œéƒ½æœ‰å®Œæ•´çš„ç‰ˆæœ¬åº“ï¼Œ å®‰å…¨æ€§é«˜ï¼Œä¸€ä¸ªäººç”µè„‘åäº†ï¼Œå¯ä»¥å¤åˆ¶åˆ«çš„äººçš„å³å¯ã€‚ä¸éœ€è¦è”ç½‘å·¥ä½œã€‚aå’Œbæ”¹äº†ç›¸åŒçš„æ–‡ä»¶ï¼Œäº’ç›¸æ¨é€åˆ°å¯¹æ–¹çš„ç”µè„‘ï¼Œå°±å¯ä»¥çœ‹åˆ°ä¿®æ”¹çš„å†…å®¹ã€‚ åœ¨å®é™…ä½¿ç”¨åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„æ—¶å€™ï¼Œå…¶å®å¾ˆå°‘åœ¨ä¸¤äººä¹‹é—´çš„ç”µè„‘ä¸Šæ¨é€ç‰ˆæœ¬åº“çš„ä¿®æ”¹ï¼Œå› ä¸ºå¯èƒ½ä½ ä»¬ä¿©ä¸åœ¨ä¸€ä¸ªå±€åŸŸç½‘å†…ï¼Œä¸¤å°ç”µè„‘äº’ç›¸è®¿é—®ä¸äº†ï¼Œä¹Ÿå¯èƒ½ä»Šå¤©ä½ çš„åŒäº‹ç—…äº†ï¼Œä»–çš„ç”µè„‘å‹æ ¹æ²¡æœ‰å¼€æœºã€‚å› æ­¤ï¼Œåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿé€šå¸¸ä¹Ÿæœ‰ä¸€å°å……å½“â€œä¸­å¤®æœåŠ¡å™¨â€çš„ç”µè„‘ï¼Œä½†è¿™ä¸ªæœåŠ¡å™¨çš„ä½œç”¨ä»…ä»…æ˜¯ç”¨æ¥æ–¹ä¾¿â€œäº¤æ¢â€å¤§å®¶çš„ä¿®æ”¹ï¼Œæ²¡æœ‰å®ƒå¤§å®¶ä¹Ÿä¸€æ ·å¹²æ´»ï¼Œåªæ˜¯äº¤æ¢ä¿®æ”¹ä¸æ–¹ä¾¿è€Œå·²ã€‚ â€“from å»–é›ªå³°çš„gitç½‘ç«™ é‚£è¿™ä¸ªæ—¶å€™æœ‰äººä¼šé—®ï¼ŒåŒ…æ‹¬æˆ‘è‡ªå·±æœ€å¼€å§‹ä¹Ÿè§‰å¾—å¥‡æ€ªï¼š åˆ†å¸ƒå¼çš„ç‰ˆæœ¬æ§ç³»ç»Ÿå¦‚æœè¦åœ¨å¤šä¸ªäººä¹‹é—´åä½œä¸ä¹Ÿæ˜¯éœ€è¦ä¸€ä¸ªåƒgithubä¸€æ ·çš„çš„è¿œç¨‹ç‰ˆæœ¬åº“å—ï¼Œè¿™ä¸é›†ä¸­å¼çš„æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ åŒºåˆ«åœ¨äºï¼ŒGitä¸ä»…åŒ…å«ä»£ç åº“è¿˜åŒ…å«äº†å†å²åº“ï¼Œä½ æ¯ä¸€æ¬¡cloneä»£ç éƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„å’Œä¸­å¤®ä»“åº“ä¸€æ¨¡ä¸€æ ·çš„åº“ã€‚æ„å‘³ç€ä½ æœ¬åœ°ä¸ä¸­å¤®ä»“åº“ä¸€æ ·éƒ½æœ‰æ‰€æœ‰çš„æäº¤ä¿®æ”¹è®°å½•ã€‚è€ŒSVNçš„åªæœ‰ä»£ç åº“æ˜¯åœ¨æœ¬åœ°ï¼Œå…¶å†å²åº“å®åœ¨ä¸­å¤®ä»“åº“ï¼Œå› æ­¤æ¯æ¬¡å½“æˆ‘ä»¬æäº¤å’Œæ¯”å¯¹ä»£ç çš„æ—¶å€™éƒ½è¦è¿æ¥ä¸­å¤®ä»“åº“æ‰å¯ä»¥ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆè¯´Gitä¸éœ€è¦è”ç½‘çš„ä¸€ä¸ªåŸå› ã€‚ æ‰€ä»¥ä¸»è¦å·®åˆ«å°±åœ¨äºå†å²ç‰ˆæœ¬ç»´æŠ¤çš„ä½ç½®ã€‚ä¸€å¥è¯æ€»ç»“å°±æ˜¯ï¼šåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å®Œæ•´ä»“åº“ã€‚è¿™é‡Œçš„æ¯ä¸ªèŠ‚ç‚¹å°±æ˜¯æˆ‘ä»¬çš„ç»ˆç«¯çš„æ„æ€ã€‚ Git åŸç†-å·¥ä½œåŒºå’Œæš‚å­˜åŒºæœ‰è¿‡ä¸€ç‚¹ç‚¹è®¤è¯†çš„ç«¥é‹éƒ½çŸ¥é“ä¸€äº›åŸºæœ¬æ“ä½œï¼Œæ¯”å¦‚ git add , git commit ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ä¸€æ¬¡æ€§è¿›è¡Œ commit æ“ä½œï¼Œåè€Œè¦æ‰§è¡Œè¿™ä¹ˆå¤šæ­¥å‘¢ï¼Ÿ æ‰€ä»¥æˆ‘ä»¬ä¸€å®šè¦äº†è§£ Git å·¥ä½œåŸç†ï¼Œæ‰èƒ½å¤Ÿç†è§£ä¸‹é¢çš„å‘½ä»¤çš„ä¸€äº›æ„æ€ã€‚ ä¸Šé¢è¿™å¼ å›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®¤è¯†åˆ°ï¼š å·¥ä½œåŒºå¯ä»¥å½“æˆä½ å†™ä»£ç çš„åœ°æ–¹ã€‚ åœ¨ä½ é€šè¿‡ git init å‘½ä»¤ä¹‹åï¼Œä¼šåœ¨ä½ çš„æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆä¸€ä¸ª .git æ–‡ä»¶ï¼Œè¿™ä¸ªæˆ‘ä»¬ç§°ä¹‹ä¸º git çš„ç‰ˆæœ¬åº“ã€‚ å®ƒä¸ç®—åšå·¥ä½œåŒºï¼Œåœ¨è¿™ä¸ªç‰ˆæœ¬åº“é‡ŒåˆåŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼Œç¬¬ä¸€ä¸ªæ˜¯æš‚å­˜åŒº Stage ï¼Œç¬¬äºŒä¸ªæ˜¯ Git ä¸ºæˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºçš„ç¬¬ä¸€ä¸ªåˆ†æ”¯ master ï¼Œä»¥åŠæŒ‡å‘ master çš„ä¸€ä¸ªæŒ‡é’ˆå« HEAD ã€‚æˆ‘ä»¬ä¸€èˆ¬ä¸è¦å»åŠ¨è¿™ä¸ª .git æ–‡ä»¶ï¼Œå¦åˆ™å¯èƒ½ç ´åæˆ‘ä»¬çš„ç‰ˆæœ¬åº“ã€‚ é‚£ä¹ˆå½“æˆ‘ä»¬é€šè¿‡ git add çš„æ—¶å€™ï¼Œå…¶å®æ˜¯æŠŠå·¥ä½œåŒºçš„æ›´æ”¹ï¼Œæäº¤åˆ°äº†æš‚å­˜åŒº stage, ç„¶åæˆ‘ä»¬å†é€šè¿‡ git commit æäº¤åˆ° master ä¸»åˆ†æ”¯ã€‚ é€šè¿‡ä¸‹é¢ä¸€å¼ å›¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹çš„æ›´æ¸…æ¥šã€‚ ä»“åº“/ç‰ˆæœ¬åº“-Repositoryåˆ›å»ºç‰ˆæœ¬åº“å¦‚ä½•åˆ›å»ºç‰ˆæœ¬åº“ï¼Ÿ //åˆå§‹åŒ–ä¸€ä¸ªgitä»“åº“ git init //æ·»åŠ æ–‡ä»¶åˆ°gitä»“åº“,å¯å¤šæ¬¡ä½¿ç”¨ git add &lt;file1&gt; git add &lt;file2&gt; git commit -m &quot;è¯´æ˜&quot; //æŒæ¡ä»“åº“å½“å‰çš„çŠ¶æ€ git status //æŸ¥çœ‹ä¿®æ”¹å†…å®¹ git diff &lt;file1&gt; //æäº¤æ—¥å¿— git log (--pretty=oneline) -m åé¢è¾“å…¥çš„æ˜¯æœ¬æ¬¡æäº¤çš„è¯´æ˜,æœ€å¥½æœ‰æ„ä¹‰ã€‚é€šè¿‡ commit æˆ‘ä»¬å¯ä»¥ä¸€æ¬¡æäº¤å¾ˆå¤šæ–‡ä»¶ï¼Œæ‰€ä»¥å¯ä»¥ add å¤šæ¬¡ã€‚ é¦–å…ˆè¿™é‡Œå†æ˜ç¡®ä¸€ä¸‹ï¼Œæ‰€æœ‰çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå…¶å®åªèƒ½è·Ÿè¸ªæ–‡æœ¬æ–‡ä»¶çš„æ”¹åŠ¨ï¼Œæ¯”å¦‚TXTæ–‡ä»¶ï¼Œç½‘é¡µï¼Œæ‰€æœ‰çš„ç¨‹åºä»£ç ç­‰ç­‰ï¼ŒGitä¹Ÿä¸ä¾‹å¤–ã€‚ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå¯ä»¥å‘Šè¯‰ä½ æ¯æ¬¡çš„æ”¹åŠ¨ï¼Œæ¯”å¦‚åœ¨ç¬¬5è¡ŒåŠ äº†ä¸€ä¸ªå•è¯â€œLinuxâ€ï¼Œåœ¨ç¬¬8è¡Œåˆ äº†ä¸€ä¸ªå•è¯â€œWindowsâ€ã€‚è€Œå›¾ç‰‡ã€è§†é¢‘è¿™äº›äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè™½ç„¶ä¹Ÿèƒ½ç”±ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿç®¡ç†ï¼Œä½†æ²¡æ³•è·Ÿè¸ªæ–‡ä»¶çš„å˜åŒ–ï¼Œåªèƒ½æŠŠäºŒè¿›åˆ¶æ–‡ä»¶æ¯æ¬¡æ”¹åŠ¨ä¸²èµ·æ¥ï¼Œä¹Ÿå°±æ˜¯åªçŸ¥é“å›¾ç‰‡ä»100KBæ”¹æˆäº†120KBï¼Œä½†åˆ°åº•æ”¹äº†å•¥ï¼Œç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸çŸ¥é“ï¼Œä¹Ÿæ²¡æ³•çŸ¥é“ã€‚ â€“ from å»–é›ªå³°çš„gitç½‘ç«™ ç‰ˆæœ¬å›é€€ä¸Šé¢æåˆ°äº†å¯ä»¥ä½¿ç”¨ git log æ¥æŸ¥çœ‹æäº¤æ—¥å¿—ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° ä¸Šé¢çš„ commit åé¢æœ‰ä¸€ä¸²ç”¨ sha1 è®¡ç®—å‡ºæ¥çš„ä¸²ï¼Œå°±æ˜¯ commit_id äº†ã€‚é€šè¿‡è¿™ æ ·ä¸€ä¸ªä¸ª commit_id å°±å¯ä»¥çœ‹å‡ºæˆ‘ä»¬æäº¤å†å²çš„ä¸€æ¡çº¿äº†ã€‚é‚£å¦‚æœæˆ‘ä»¬è¦å›é€€ç‰ˆæœ¬æ€ä¹ˆåŠå‘¢ï¼Ÿ é¦–å…ˆ Git è‚¯å®šè¦çŸ¥é“ä½ è¦å›é€€åˆ°å“ªä¸ªç‰ˆæœ¬ï¼Œå¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬ä¸å¯èƒ½å†å»æ ¹æ®å†™ commit_id æ¥åˆ¤æ–­ï¼Œå› ä¸ºè¿™ä¸ªå¾ˆé•¿çš„ä¸€ä¸²è®©æˆ‘ä»¬é‡å¤æ˜¯å¾ˆè´¹è„‘å­çš„äº‹æƒ…ã€‚ åœ¨ Git ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ HEAD æ¥è¡¨ç¤ºå½“å‰çš„ç‰ˆæœ¬ï¼Œ ä¹Ÿå°±æ˜¯ä¸Šé¢å›¾ç‰‡é‡Œçœ‹åˆ°çš„ 13d436c4a928e3db2bfd08e15c9a8ce06780da91 è¿™ä¸ªã€‚ é‚£ä¹ˆä¸Šä¸€ä¸ªç‰ˆæœ¬æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ HEAD^ , ä¸Šä¸Šä¸€ä¸ªç”¨ HEAD^^, ç¬¬ä¸€ç™¾ä¸ªå°±æ˜¯ HEAD~100 ã€‚ å…·ä½“çš„å›é€€çš„å‘½ä»¤ï¼Œæˆ‘ä»¬ä½¿ç”¨ git resetã€‚ 1git reset --hard HEAD^ ä½†æ˜¯æ­¤æ—¶æˆ‘ä»¬å†å¾€å‰çœ‹ï¼Œ åˆšåˆšç¬¬ä¸€ä¸ª HEAD ç‰ˆæœ¬å·²ç»ä¸åœ¨äº†ï¼Œ è¿™å¯å’‹åŠï¼Ÿ å¦‚æœæˆ‘ä»¬æ²¡æœ‰å…³é—­åˆšåˆš git log çš„çª—å£ï¼Œ æ˜¯å¯ä»¥çš„ã€‚ //ç‰ˆæœ¬å·ä¸ç”¨å†™å…¨ï¼Œgitä¼šè‡ªåŠ¨å»æ‰¾ git reset --hard 13d436c4a... é‚£å¦‚æœæˆ‘å…³é—­äº†å‘¢ï¼Ÿ Git æä¾›äº†ä¸€ä¸ªå‘½ä»¤è®°å½•ä½ çš„æ¯ä¸€æ¬¡å‘½ä»¤. git reflog git reset --hard commit_id è¿™ä¸‹æˆ‘ä»¬å†åœ¨ git reflog é‡Œé¢æŸ¥çœ‹ï¼Œå°±å¯ä»¥çœ‹åˆ°ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„ commit_idäº†ï¼Œç„¶åæˆ‘ä»¬å†ç”¨ reset å‘½ä»¤å³å¯ã€‚ è¿™é‡Œæˆ‘ä»¬çœ‹åˆ°ä¸€ä¸ªç°è±¡ï¼Œ æˆ‘ä»¬ä½¿ç”¨ git reset åšç‰ˆæœ¬å›é€€çš„æ—¶å€™ï¼Œé€Ÿåº¦éå¸¸å¿«ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ å› ä¸º Git åœ¨å†…éƒ¨æœ‰ä¸ªæŒ‡å‘å½“å‰ç‰ˆæœ¬çš„HEADæŒ‡é’ˆï¼Œå½“ä½ å›é€€ç‰ˆæœ¬çš„æ—¶å€™ï¼Œ Git ä»…ä»…æ˜¯æŠŠ HEAD ä»æŒ‡å‘ äº†æ–°çš„ commit_id å¹¶å°†å·¥ä½œåŒºçš„æ–‡ä»¶æ›´æ–°ã€‚ æ’¤é”€ä¿®æ”¹å¯èƒ½æœ‰ä¸‹é¢å‡ ç§æƒ…å½¢ï¼š ä¿®æ”¹äº†å·¥ä½œåŒºçš„å†…å®¹ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä½¿ç”¨ git add æ·»åŠ åˆ°æš‚å­˜åŒºï¼Œ å¯ä»¥ä½¿ç”¨ git checkout -- file ã€‚è¿™æ ·å°±ç›´æ¥ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹ã€‚è¿™ç§æƒ…å†µä½¿ç”¨ git status ä¼šçœ‹åˆ°ä¸‹é¢çš„æç¤ºï¼ˆnot stagedï¼‰çš„ï¼š 123# Changes not staged for commit:# (use \"git add &lt;file&gt;...\" to update what will be committed)# (use \"git checkout -- &lt;file&gt;...\" to discard changes in working directory) ä¸ä½†ä¿®æ”¹äº†å·¥ä½œåŒºçš„æ–‡ä»¶ï¼Œè€Œä¸”è¿˜ä½¿ç”¨ git add æ·»åŠ åˆ°äº†æš‚å­˜åŒºï¼Œå¦‚æœæƒ³è¦ä¸¢å¼ƒæ›´æ”¹ä¸¤æ­¥èµ°ã€‚ç¬¬ä¸€æ­¥ç”¨å‘½ä»¤git reset HEAD fileï¼Œå°±å›åˆ°äº†ç¬¬ä¸€ç§æƒ…å†µï¼Œç¬¬äºŒæ­¥æŒ‰ç¬¬ä¸€ç§æƒ…å†µæ¥æ“ä½œã€‚ git reset HEAD file git checkout â€“file è¿™ç§æƒ…å†µä½¿ç”¨ git status ä¼šçœ‹åˆ°ä¸‹é¢çš„æç¤º(to be committed)çš„ï¼š # Changes to be committed: # (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage) å¦‚æœå·²ç» git commit äº†ï¼Œä¹Ÿå°±æ˜¯å·²ç»æäº¤åˆ°äº† master åˆ†æ”¯ä¸Šï¼Œé‚£ä¹ˆåº”è¯¥åº†å¹¸è¿˜æ²¡æœ‰ push åˆ°è¿œç¨‹ï¼Œè¿™æ—¶å€™æˆ‘ä»¬åˆ©ç”¨æˆ‘ä»¬ä¸Šé¢ä¸€ä¸ªå°èŠ‚æåˆ°çš„æ’¤é”€ç‰ˆæœ¬å³å¯ã€‚ å¦‚æœå·²ç» push äº†çš„è¯ï¼Œå°±æ²¡åŠæ³•å–½ ã€‚ã€‚ 1git reset --hard HEAD^ åˆ é™¤æ–‡ä»¶å¦‚æœæˆ‘ä»¬æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼š git add test.txt git commit -m &quot;add test.txt&quot; rm test.txt æ„æ€æ¯”è¾ƒæ˜ç™½ï¼Œå°±æ˜¯æˆ‘ä»¬å°† test.txt æ·»åŠ åˆ°äº† master åˆ†æ”¯ï¼Œä½†æ˜¯æˆ‘ä»¬åæ¥ä¸æƒ³è¦è¿™ä¸ªæ–‡ä»¶ï¼Œå°±åˆ é™¤äº†ã€‚äºæ˜¯ä½ åˆ©ç”¨ git status å°±ä¼šå‘ç°å¦‚ä¸‹çš„ä¿¡æ¯ï¼š # Changes not staged for commit: # (use &quot;git add/rm &lt;file&gt;...&quot; to update what will be committed) # (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory) # # deleted: test.txt # å‘Šè¯‰æˆ‘ä»¬å·²ç»åˆ é™¤äº† test.txt ï¼Œè¦åšä¿®æ”¹äº†ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æ”¹å˜æˆ‘ä»¬çš„æ›´æ”¹ï¼š git add test.txt git rm test.txt git commit -m &quot;delete test.txt&quot; é‚£å¦‚æœæˆ‘ä»¬æ‰§è¡Œäº† rm test.txt ä¹‹åï¼Œå‘ç°æˆ‘ä»¬å®é™…è¿˜æ˜¯æƒ³è¦è¿™ä¸ªæ–‡ä»¶çš„æ€ä¹ˆåŠå‘¢ï¼Ÿ æ²¡å…³ç³»ï¼Œå› ä¸ºæˆ‘ä»¬ç‰ˆæœ¬åº“é‡Œé¢ç¡®å®æ˜¯æœ‰è¿™ä¸ªæ–‡ä»¶çš„å•Šã€‚æ‰€ä»¥æˆ‘ä»¬åˆ©ç”¨ï¼š git checkout -- test.txt å³å¯æ¢å¤åˆ°æˆ‘ä»¬æœ€æ–°ç‰ˆæœ¬äº†ã€‚git checkout éå¸¸å¥½ç”¨ï¼Œæ³¨æ„ä¸€å®šè¦åŠ  -- å› ä¸ºå¦‚æœä¸åŠ å°±æ˜¯åˆ‡æ¢åˆ†æ”¯äº†ã€‚å®ƒå…¶å®å°±æ˜¯åˆ©ç”¨ç‰ˆæœ¬åº“é‡Œé¢çš„ç‰ˆæœ¬æ›¿æ¢å·¥ä½œåŒºçš„ç‰ˆæœ¬ï¼Œè¿™æ ·ä¸ç®¡æ˜¯æ·»åŠ ï¼Œä¿®æ”¹ï¼Œåˆ é™¤éƒ½å¯ä»¥ç¬é—´æ¢å¤ã€‚ Git è¿œç¨‹æ“ä½œå…³è”å¹¶å‘è¿œç¨‹æ¨é€åˆ†æ”¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥å…³è”æœ¬åœ°åº“å’Œè¿œç¨‹åº“å¹¶ä¸”æ¨é€åˆ†æ”¯ã€‚ //å…³è”åº“ git remote add origin git@server-name:path/repo-name.git //å°†æœ¬åœ°åˆ†æ”¯ master æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯ git push -u origin master æ³¨æ„ï¼Œè¿™é‡Œçš„ orgin ä»£è¡¨çš„å°±æ˜¯è¿œç¨‹ä»“åº“çš„åå­—ï¼Œ Git é»˜è®¤è¿™ä¹ˆåšï¼Œå¦‚æœæ”¹æˆåˆ«çš„å½“ç„¶ä¹Ÿæ˜¯å¯ä»¥çš„å•¦ã€‚ ç„¶åå°±æ˜¯è¿™é‡Œçš„ -u æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ ç”±äºè¿œç¨‹åº“æ˜¯ç©ºçš„ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡æ¨é€masteråˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Šäº†-uå‚æ•°ï¼ŒGitä¸ä½†ä¼šæŠŠæœ¬åœ°çš„masteråˆ†æ”¯å†…å®¹æ¨é€çš„è¿œç¨‹æ–°çš„masteråˆ†æ”¯ï¼Œè¿˜ä¼šæŠŠæœ¬åœ°çš„masteråˆ†æ”¯å’Œè¿œç¨‹çš„masteråˆ†æ”¯å…³è”èµ·æ¥ï¼Œåœ¨ä»¥åçš„æ¨é€æˆ–è€…æ‹‰å–æ—¶å°±å¯ä»¥ç®€åŒ–å‘½ä»¤ã€‚â€“from å»–é›ªå³° å¥½ï¼Œé‚£æˆ‘ä»¬ä»¥åå¦‚æœå†æ¨é€è¿˜è¦åšå†™ä»€ä¹ˆå‘¢ï¼Ÿ git push origin master ä»¥åæ¯æ¬¡æ¨é€å°±ç”¨è¿™ä¸ªå°±å¯ä»¥äº†ã€‚å°±ä¸éœ€è¦åš remote add äº†ã€‚ è¿™é‡Œè¦å¼ºè°ƒä¸€ä¸‹ï¼Œæœ‰å¾ˆå¤šäººéƒ½æ˜¯çœ‹ç€è¿™ä¹ˆç”¨ï¼Œå°±è¿™ä¹ˆç”¨äº†ï¼Œä½†æ˜¯ä¸çŸ¥é“ origin master åˆ†åˆ«ä»£è¡¨çš„ä»€ä¹ˆæ„æ€ï¼Œå°±å¯¼è‡´ä»¥åæ¯”å¦‚æˆ‘è¦æŠŠæœ¬åœ°çš„ develope åˆ†æ”¯å’Œè¿œç¨‹çš„ master åˆ†æ”¯æ¨é€æ€ä¹ˆå†™å‘¢ï¼Ÿæ‰€ä»¥å¼ºè°ƒå¦‚ä¸‹ï¼š 1git push &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;æœ¬åœ°åˆ†æ”¯å&gt;:&lt;è¿œç¨‹åˆ†æ”¯å&gt; å¦‚æœçœç•¥è¿œç¨‹åˆ†æ”¯åï¼Œåˆ™è¡¨ç¤ºå°†æœ¬åœ°åˆ†æ”¯æ¨é€ä¸ä¹‹å­˜åœ¨â€è¿½è¸ªå…³ç³»â€çš„è¿œç¨‹åˆ†æ”¯ï¼ˆé€šå¸¸ä¸¤è€…åŒåï¼‰ï¼Œå¦‚æœè¯¥è¿œç¨‹åˆ†æ”¯ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¢«æ–°å»ºã€‚å¦‚æœä¸åŒåå­—ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤ä½¿ä¹‹å…³è” 1git branch --set-upstream master origin/next ä¸Šé¢å‘½ä»¤æŒ‡å®š master åˆ†æ”¯è¿½è¸ª origin/next åˆ†æ”¯ã€‚ 1git push origin master ä¸Šé¢çš„ç®€å†™å‘½ä»¤å°±è¡¨ç¤ºçš„æ˜¯ï¼šå°†æœ¬åœ°çš„masteråˆ†æ”¯æ¨é€åˆ°originä¸»æœºçš„masteråˆ†æ”¯ã€‚å¦‚æœåè€…ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¢«æ–°å»ºã€‚ åƒä¸‡è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢çš„å‘½ä»¤æ˜¯çœç•¥äº†è¿œç¨‹åˆ†æ”¯åï¼Œè¿™æ˜¯å› ä¸ºä¸€èˆ¬æˆ‘ä»¬å¯ä»¥è®¤ä¸ºè¿œç¨‹åˆ†æ”¯å’Œæœ¬åœ°åˆ†æ”¯åç›¸åŒçš„åŸå› ã€‚é‚£å¦‚æœæˆ‘ä»¬çœç•¥äº†æœ¬åœ°åˆ†æ”¯åå‘¢ï¼Ÿ //åˆ é™¤ origin ä¸»æœºä¸Šçš„ master åˆ†æ”¯ git push origin :master # ç­‰åŒäº git push origin --delete master å¦‚æœçœç•¥æœ¬åœ°åˆ†æ”¯åï¼Œåˆ™è¡¨ç¤ºåˆ é™¤æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ï¼Œå› ä¸ºè¿™ç­‰åŒäºæ¨é€ä¸€ä¸ªç©ºçš„æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹åˆ†æ”¯ã€‚æ˜¯ä¸æ˜¯å¾ˆå¯æ€•ã€‚ã€‚æ‰€ä»¥ä¸€å®šè¦æ³¨æ„äº†ã€‚ä½ è¿˜å¯èƒ½è§è¿‡ä¸‹é¢ä¸‰ç§ç”¨æ³•ï¼š //å°†å½“å‰åˆ†æ”¯æ¨é€åˆ°originä¸»æœºçš„å¯¹åº”åˆ†æ”¯ git push origin git push git push -u origin master git push --all origin git push --force origin git push origin å¦‚æœå½“å‰åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯ä¹‹é—´å­˜åœ¨è¿½è¸ªå…³ç³»ï¼Œåˆ™æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯éƒ½å¯ä»¥çœç•¥ã€‚ git push å¦‚æœå½“å‰åˆ†æ”¯åªæœ‰ä¸€ä¸ªè¿½è¸ªåˆ†æ”¯ï¼Œé‚£ä¹ˆä¸»æœºåéƒ½å¯ä»¥çœç•¥ã€‚ git push -u origin master å¦‚æœå½“å‰åˆ†æ”¯ä¸å¤šä¸ªä¸»æœºå­˜åœ¨è¿½è¸ªå…³ç³»ï¼Œåˆ™å¯ä»¥ä½¿ç”¨-ué€‰é¡¹æŒ‡å®šä¸€ä¸ªé»˜è®¤ä¸»æœºï¼Œè¿™æ ·åé¢å°±å¯ä»¥ä¸åŠ ä»»ä½•å‚æ•°ä½¿ç”¨git pushã€‚(æ­¤å‘½ä»¤è¡¨ç¤ºå°†masteråˆ†æ”¯æ¨é€åˆ°originä¸»æœºçš„masteråˆ†æ”¯ï¼ŒåŒæ—¶æŒ‡å®šäº† orgin ä¸ºé»˜è®¤åˆ†æ”¯ï¼Œä»¥åå¯ä»¥ç›´æ¥ä½¿ç”¨ git push äº†ã€‚) git push --all origin è¡¨ç¤ºå°†æ‰€æœ‰æœ¬åœ°åˆ†æ”¯éƒ½æ¨é€åˆ°originä¸»æœºã€‚å¦‚æœä½ è¿œç¨‹ä¸»æœºä¸Šçš„ç‰ˆæœ¬æ¯”æœ¬åœ°çš„è¦æ–°ï¼Œä½ å¯ä»¥ä½¿ç”¨ git push --force origin è¿™æ ·å¯¼è‡´è¿œç¨‹ä¸»æœºä¸Šæ›´æ–°çš„ç‰ˆæœ¬è¢«è¦†ç›–ã€‚æ‰€ä»¥è¦æ…ç”¨ã€‚ git clone/pull/fetch/remoteåˆšåˆšè®²äº†æœ€é‡è¦çš„ git push æˆ‘ä»¬ä¸‹é¢æ¥çœ‹çœ‹ç¨å¾®ç®€å•ä¸€ç‚¹çš„ å…¶ä»–å‘½ä»¤ã€‚ git clone12git clone &lt;ç‰ˆæœ¬åº“çš„ç½‘å€&gt;git clone &lt;ç‰ˆæœ¬åº“çš„ç½‘å€&gt; &lt;æœ¬åœ°ç›®å½•å&gt; åé¢çš„ç½‘å€æœ‰å¾ˆå¤šæƒ…å†µï¼Œæ¯”å¦‚ä»¥ http, https, ssh, ftpç­‰ç­‰ã€‚å…¶ä¸­ Git åè®®çš„ä¸‹è½½é€Ÿåº¦ä¼šç¨å¾®å¿«ä¸€äº›ï¼Œç„¶å SSHå°±æ˜¯è¦è®¤è¯äº†ã€‚ git clone https://github.com/Christine95/Blog.git git clone git@github.com:Christine95/Blog.git git clone git@github.com:Christine95/Blog.git myBlog git clone -o Blog https://github.com/Christine95/Blog.git å¦‚æœä¸æŒ‡å®šåé¢çš„æœ¬åœ°ç›®å½•å(myBlog)çš„è¯ï¼Œå°±æ˜¯ä¸è¿œç¨‹åº“ç›¸åŒçš„åå­—ã€‚ å¦‚æœä¸æŒ‡å®š -o é€‰é¡¹ï¼Œæˆ‘ä»¬é€šè¿‡ git remote -v æŸ¥è¯¢æ—¶ï¼Œå°±æ˜¯åå­—é»˜è®¤ä¸º origin, æŒ‡å®šå°±æ˜¯åˆšåˆšçš„ Blog å•¦ã€‚ git remote//åªæœ‰åå­— git remote //æœ‰åå­—æœ‰è·¯å¾„ git remote -v //è¿œç¨‹ä¸»æœºè¯¦æƒ… git remote show &lt;ä¸»æœºå&gt; //æ·»åŠ è¿œç¨‹ä¸»æœº git remote add &lt;ä¸»æœºå&gt; &lt;ç½‘å€&gt; //åˆ é™¤è¿œç¨‹ä¸»æœº git remote rm &lt;ä¸»æœºå&gt; //é‡å‘½å git remote rename &lt;åŸä¸»æœºå&gt; &lt;æ–°ä¸»æœºå&gt; æˆ‘æ„Ÿè§‰è¿™ä¸ªå°±æ²¡å•¥è¯´çš„äº†ã€‚ç»å¸¸ç”¨å°±å¥½äº†ã€‚ git fetchå½“æˆ‘ä»¬è¿œç¨‹ä¸»æœºæœ‰äº†æ›´æ–°åï¼Œå¯ä»¥ä½¿ç”¨ git fetch å–å›è¿™äº›æ›´æ–°è‡³æœ¬åœ°ã€‚ 12git fetchgit fetch &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;åˆ†æ”¯å&gt; git fetch è¡¨ç¤ºå°†æŸä¸ªè¿œç¨‹ä¸»æœºçš„æ›´æ–°ï¼Œå…¨éƒ¨å–å›æœ¬åœ°ã€‚git fetch origin develope è¡¨ç¤ºåªæ›´æ–°è¿œç¨‹ä¸»æœºçš„ develope åˆ†æ”¯ã€‚ æ³¨æ„ï¼šå–å›äº†æ›´æ–°åï¼Œå¿…é¡»ç”¨â€è¿œç¨‹ä¸»æœºå/åˆ†æ”¯åâ€çš„å½¢å¼è¯»å–ã€‚å¦‚æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ï¼Œå°±å¿…é¡»ç”¨ origin/develope è¯»å–ã€‚æ¯”å¦‚ï¼š git branch -r //ä¼šå¾—åˆ°ç±»ä¼¼ï¼š origin/HEAD -&gt; origin/master origin/develope origin/html origin/master origin/test_d002 git branch -a //ä¼šå¾—åˆ°ç±»ä¼¼ï¼š remotes/origin/HEAD -&gt; origin/master remotes/origin/develope remotes/origin/html remotes/origin/master remotes/origin/test_d002 git branch å‘½ä»¤çš„ -r é€‰é¡¹ï¼Œå¯ä»¥ç”¨æ¥æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ï¼Œ-a é€‰é¡¹æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ã€‚è¿™é‡Œæ³¨æ„ï¼š git pull = git fetch + git merge git pull1git pull &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt; æ³¨æ„ä¸è¦å’Œ git push çš„&lt;æœ¬åœ°&gt;:&lt;è¿œç¨‹&gt; å¼„æ··æ·†äº†ã€‚æœ‰ä¾‹å­å¦‚ä¸‹ï¼š //å°†orginä¸»æœºä¸Šçš„nextåˆ†æ”¯å–å›å¹¶å’Œæœ¬åœ°masteråˆ†æ”¯åˆå¹¶ git pull origin next:master //å°†originä¸»æœºçš„nextåˆ†æ”¯å–å›å¹¶å’Œå½“å‰åˆ†æ”¯åˆå¹¶ git pull origin next //ä¸Šé¢ä¸€å¥å‘½ä»¤ç­‰äºä¸‹é¢ä¸¤æ¡å‘½ä»¤ git fetch origin git merge origin/next æœ‰ä¸€ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ï¼š å½“æˆ‘ä»¬ä½¿ç”¨æŸäº›å‘½ä»¤çš„æ—¶å€™ï¼ŒGitä¼šè‡ªåŠ¨åœ¨æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯ä¹‹é—´ï¼Œå»ºç«‹ä¸€ç§è¿½è¸ªå…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´å…³è”èµ·æ¥å•¦ã€‚æ¯”å¦‚ä½ ä½¿ç”¨ git clone çš„æ—¶å€™ï¼Œä¼šé»˜è®¤å°†è¿œç¨‹ä¸»æœºå’Œæœ¬åœ°åˆ†æ”¯å»ºç«‹ç›¸åŒçš„åå­—ã€‚æ¯”å¦‚ä½ å…‹éš†çš„æ˜¯è¿œç¨‹çš„ develope åˆ†æ”¯ï¼Œé‚£ä¹ˆä½ æœ¬åœ°å…‹éš†ä¸‹æ¥ä¹Ÿä¼šæ˜¯ develope åˆ†æ”¯ï¼Œç„¶åè‡ªåŠ¨è¿½è¸ª origin/developeåˆ†æ”¯ã€‚ ä½†æ˜¯ï¼Œæ¯”å¦‚è¯´æœ‰è¿™æ ·ä¸€ç§æƒ…å†µï¼Œæˆ‘å°±é‡åˆ°è¿‡ï¼ŒåŒäº‹è®©æˆ‘çœ‹ä¸€ä¸ªé¡¹ç›®ï¼Œæˆ‘å¾ˆè‡ªç„¶çš„å» clone master åˆ†æ”¯äº†ã€‚è¿™ä¸ªæ—¶å€™å‘ç° master åˆ†æ”¯å¹¶ä¸å¯¹ï¼Œæˆ‘åº”è¯¥å» clone develope åˆ†æ”¯çš„ã€‚å› ä¸ºåŒäº‹æœ‰äº›ä»£ç åœ¨ develope åˆ†æ”¯ä¸Šï¼Œä¸å† master åˆ†æ”¯ä¸Šã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘å½“ç„¶å¯ä»¥å»åˆ©ç”¨ git pull origin develope masterï¼Œä½†æ˜¯ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘æœ€å¥½è¿™ä¹ˆåšï¼š 1git branch --set-upstream master origin/develope è¿™æ ·å°±æŠŠæœ¬åœ°çš„ master åˆ†æ”¯å’Œè¿œç¨‹çš„ develope åˆ†æ”¯å…³è”å•¦ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç”¨ï¼š1git pull origin æ¥ pull ä»£ç å•¦ã€‚è¿™æ ·è¿ä¸»æœºåéƒ½çœç•¥äº†ã€‚åªç”¨å‘Šè¯‰ä»é‚£ä¸ªè¿œç¨‹ä¸»æœº pull å°±å¯ä»¥ã€‚ æ€»ç»“æœ¬æ¥æƒ³è¿™ä¸€ç¯‡æ–‡ç« èƒ½æ€»ç»“å®Œçš„ï¼Œç»“æœè¿åˆ†æ”¯ç®¡ç†éƒ½æ²¡è®²å®Œã€‚è¿˜æ˜¯å†³å®šä¸‹ä¸€ç¯‡æ–‡ç« å†å°†å•¦ã€‚è¦ä¸ç„¶ç¯‡å¹…å¤ªé•¿ï¼Œå°±ä¸é€‚åˆé˜…è¯»äº†ã€‚æ„Ÿè°¢ä¸‹é¢ä¸¤ç¯‡æ–‡ç« ï¼Œè®©æˆ‘æ¸…æ™°äº†å¾ˆå¤šï¼Œä¹Ÿå‡†å¤‡å°é¢èµ„åŠ©æ„Ÿè°¢ä¸‹å»–é›ªå³°è€å¸ˆçš„ç½‘ç«™å•¦ï¼Œæ¯•ç«Ÿæ˜¯èŠ±å¿ƒè¡€å†™è¿™ä¹ˆå¥½çš„æ•™ç¨‹ï¼š å»–é›ªå³°çš„gitæ•™ç¨‹ é˜®ä¸€å³°çš„gitæ–‡ç«  æœ€åè´´ä¸€å¼ é˜®ä¸€å³°è€å¸ˆè¿™ä¸ªæ–‡å­—é‡Œçš„ä¸€å¹…å›¾ï¼Œæˆ‘è§‰å¾—å¤ªæ£’äº†ã€‚","categories":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/categories/å·¥å…·-é…ç½®/"}],"tags":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/tags/å·¥å…·-é…ç½®/"}]},{"title":"fis3åŸºæœ¬ç”¨æ³•ä»‹ç»","slug":"fis3åŸºæœ¬ç”¨æ³•ä»‹ç»","date":"2016-08-24T08:21:08.000Z","updated":"2016-12-12T02:28:04.000Z","comments":true,"path":"2016/08/24/fis3åŸºæœ¬ç”¨æ³•ä»‹ç»/","link":"","permalink":"http://sevencai.github.io/2016/08/24/fis3åŸºæœ¬ç”¨æ³•ä»‹ç»/","excerpt":"","text":"ä»Šå¤©æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼Œå…¶å®æ˜¯å¾ˆå¸¸è§çš„ã€‚ä¸€èˆ¬æˆ‘ä»¬å…¬å¸éƒ½æ˜¯é™æ€èµ„æºæ”¾åœ¨ä¸€ä¸ªæœºå™¨ä¸Šï¼Œæ¯”å¦‚æ˜¯cdnä¸Šã€‚ç„¶åå†…å®¹é¡µé¢æ”¾åœ¨å¦å¤–ä¸€ä¸ªæœºå™¨ä¸Šã€‚è¿™æ ·å¾ˆå¥½çš„ä¸€ç‚¹æ˜¯cdnå¯ä»¥åšç¼“å­˜ã€‚è€Œä¸”æ•´ä¸ªåˆ†ç¦»çœ‹èµ·æ¥ä¹Ÿæ¯”è¾ƒæ¸…æ¥šã€‚ åœ¨æœ¬åœ°ï¼Œæˆ‘ç”¨çš„ç›¸å¯¹è·¯å¾„æ¯”å¦‚./images/1.png æˆ–è€…ç»å¯¹è·¯å¾„ images/1.png ã€‚è¿™æ ·å†™ç¬¬ä¸€ä¸ç»Ÿä¸€ã€‚ç¬¬äºŒï¼Œæˆ‘éœ€è¦æŠŠå›¾ç‰‡ï¼Œjsï¼Œcssæ”¾åˆ°cdnä¸Šï¼Œæ¯”å¦‚è¯´æ˜¯ï¼š**.qq.comä¸Šã€‚ä½†æ˜¯é¡µé¢åˆæ˜¯åœ¨å¦å¤–ä¸€ä¸ªæœºå™¨ä¸Šï¼Œæˆ–è€…è¯´åŸŸåä¸‹ï¼Œæ‰€ä»¥å¾ˆæ˜æ˜¾è¿™ä¸ªæ—¶å€™ä¸èƒ½ç”¨ç›¸å¯¹è·¯å¾„äº†ï¼Œåªèƒ½ç”¨urlçš„å½¢å¼ã€‚ é‚£ä¹ˆï¼Œæˆ‘è¦æ€ä¹ˆå»æ”¹å‘¢ï¼Ÿéš¾é“æ‰‹å·¥ä¸€ä¸ªä¸ªçš„å»æ”¹ï¼Ÿé‚£ä¸æ˜¯å¾ˆéº»çƒ¦ï¼Œè€Œä¸”åº”è¯¥æƒ³åˆ°å…¬å¸é‚£ä¹ˆå¤šäººï¼Œè‚¯å®šä¸æ˜¯ç”¨çš„è¿™ç§ç¬¨ä¸€ç‚¹çš„æ–¹æ³•ã€‚ä¸€èˆ¬æœ‰ç”¨gulpçš„ï¼Œæœ‰ç”¨webpackçš„ã€‚ä»Šå¤©æˆ‘åœ¨å¸ˆå‚…çš„å»ºè®®ä¸‹å»å­¦ä¹ äº†fisçš„ã€‚fisç”¨å¾ˆå°‘é‡çš„é…ç½®ï¼Œå°±å®Œæˆäº†æˆ‘éœ€è¦çš„åŠŸèƒ½ã€‚å”¯ä¸€ä¸€ç‚¹æˆ‘è§‰å¾—ä¸å¥½çš„ï¼Œå°±æ˜¯æ–‡æ¡£äº†ï¼Œæ–‡æ¡£è¦æ˜¯å†™çš„æ›´å¥½ä¸€ç‚¹ï¼Œæ¥åœ°æ°”ä¸€ç‚¹å°±æ›´å¥½å•¦ã€‚ FISç®€ä»‹ FIS3 æ˜¯é¢å‘å‰ç«¯çš„å·¥ç¨‹æ„å»ºå·¥å…·ã€‚è§£å†³å‰ç«¯å·¥ç¨‹ä¸­æ€§èƒ½ä¼˜åŒ–ã€èµ„æºåŠ è½½ï¼ˆå¼‚æ­¥ã€åŒæ­¥ã€æŒ‰éœ€ã€é¢„åŠ è½½ã€ä¾èµ–ç®¡ç†ã€åˆå¹¶ã€å†…åµŒï¼‰ã€æ¨¡å—åŒ–å¼€å‘ã€è‡ªåŠ¨åŒ–å·¥å…·ã€å¼€å‘è§„èŒƒã€ä»£ç éƒ¨ç½²ç­‰é—®é¢˜ã€‚ FISæ˜¯ç™¾åº¦å‡ºå“çš„ï¼Œä¸€èˆ¬çš„gulpæœ‰çš„åŠŸèƒ½ï¼Œå®ƒåŸºæœ¬éƒ½æœ‰ã€‚ä¸‹é¢æœ‰å‡ ä¸ªfisçš„å‡ ä¸ªç‰¹ç‚¹ï¼š FIS3 çš„æ„å»ºä¸ä¼šä¿®æ”¹æºç ï¼Œè€Œæ˜¯ä¼šé€šè¿‡ç”¨æˆ·è®¾ç½®ï¼Œå°†æ„å»ºç»“æœè¾“å‡ºåˆ°æŒ‡å®šçš„ç›®å½•ã€‚ æ–‡ä»¶æŒ‡çº¹ï¼Œå”¯ä¸€æ ‡è¯†ä¸€ä¸ªæ–‡ä»¶ã€‚åœ¨å¼€å¯å¼ºç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæ–‡ä»¶çš„ URL ä¸å‘ç”Ÿå˜åŒ–ï¼Œæ— æ³•åˆ·æ–°æµè§ˆå™¨ç¼“å­˜ã€‚ä¸€èˆ¬éƒ½éœ€è¦é€šè¿‡ä¸€äº›æ‰‹æ®µæ¥å¼ºåˆ·ç¼“å­˜ï¼Œä¸€ç§æ–¹å¼æ˜¯æ·»åŠ æ—¶é—´æˆ³ï¼Œæ¯æ¬¡ä¸Šçº¿æ›´æ–°æ–‡ä»¶ï¼Œç»™è¿™ä¸ªèµ„æºæ–‡ä»¶çš„ URL æ·»åŠ ä¸Šæ—¶é—´æˆ³ã€‚ CssSpriteå›¾ç‰‡åˆå¹¶å‹ç¼©äº†é™æ€èµ„æºï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹å›¾ç‰‡è¿›è¡Œåˆå¹¶ï¼Œæ¥å‡å°‘è¯·æ±‚æ•°é‡ã€‚FIS3 æä¾›äº†æ¯”è¾ƒç®€æ˜“ã€ä½¿ç”¨æ–¹ä¾¿çš„å›¾ç‰‡åˆå¹¶å·¥å…·ã€‚é€šè¿‡é…ç½®å³å¯è°ƒç”¨æ­¤å·¥å…·å¹¶å¯¹èµ„æºè¿›è¡Œåˆå¹¶ã€‚FIS3 æ„å»ºä¼šå¯¹ CSS ä¸­ï¼Œè·¯å¾„å¸¦ ?__sprite çš„å›¾ç‰‡è¿›è¡Œåˆå¹¶ã€‚ä¸ºäº†èŠ‚çœç¼–è¯‘çš„æ—¶é—´ï¼Œåˆ†é…åˆ° useSprite: true çš„ CSS æ–‡ä»¶æ‰ä¼šè¢«å¤„ç†ã€‚ å…¶å®è¿™äº›åŠŸèƒ½å…¶å®ƒçš„å‡ ç§æ–¹æ¡ˆåº”è¯¥éƒ½æœ‰ï¼Œä½†æ˜¯fisä¼šæ›´åŠ æ–¹ä¾¿ã€‚ç¬¬ä¸€ä¸ªæ·±æ·±çš„å¸å¼•ç€æˆ‘ã€‚ä¸æ”¹å˜æºç çœŸæ˜¯å¤ªå¥½äº†ã€‚å…·ä½“åŸå› ä¸‹æ–‡åˆ†æã€‚ FISåˆè¯†å®‰è£…å®‰è£…å¿…é¡»åœ¨å…¨å±€ç¯å¢ƒä¸‹ï¼š123npm install -g fis3 //å®‰è£…fis3 -v //æŸ¥çœ‹npm update -g fis3 //å‡çº§ å®Œæ•´ä¾‹å­12touch fis-conf.js //ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶fis3 release -d ../output //æ„å»ºåˆ°ä¸Šçº§ç›®å½•ä¸‹ ../outputå¯ä»¥æ¢æˆä»»æ„path ç®€å•çš„å¯¹æ¯”ä¸‹outputå’Œæºæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œå¯ä»¥å‘ç°ä¸åŒï¼Œèµ„æºè·¯å¾„å·²ç»è¢«æ¢äº†ã€‚å¯ä»¥åˆ©ç”¨diffmergeå·¥å…·æ¥çœ‹ã€‚ä¸‹é¢æ¥è‡ªæ–‡æ¡£ä¸­çš„ä¸€ä¸ªå›¾ç‰‡ã€‚ æˆ‘ä»¬å¯ä»¥å¾ˆæ˜æ˜¾çœ‹åˆ°ç›¸å¯¹è·¯å¾„å·²ç»è¢«æ›¿æ¢æˆäº†ç»å¯¹è·¯å¾„ã€‚å†åŠ æ·±ä¸€ç‚¹ï¼Œå¦‚ä½•å‹ç¼©js,csså‘¢ï¼Ÿæˆ‘ä»¬åªéœ€è¦è°ƒç”¨å®ƒå†…ç½®çš„æ’ä»¶å°±å¯ä»¥äº†ã€‚ fisé€šè¿‡æ­£åˆ™åŒ¹é…æ–‡ä»¶ã€‚ 123456789101112131415/ æ¸…é™¤å…¶ä»–é…ç½®ï¼Œåªä¿ç•™å¦‚ä¸‹é…ç½®fis.match('*.js', &#123; // fis-optimizer-uglify-js æ’ä»¶è¿›è¡Œå‹ç¼©ï¼Œå·²å†…ç½® optimizer: fis.plugin('uglify-js')&#125;);fis.match('*.css', &#123; // fis-optimizer-clean-css æ’ä»¶è¿›è¡Œå‹ç¼©ï¼Œå·²å†…ç½® optimizer: fis.plugin('clean-css')&#125;);fis.match('*.png', &#123; // fis-optimizer-png-compressor æ’ä»¶è¿›è¡Œå‹ç¼©ï¼Œå·²å†…ç½® optimizer: fis.plugin('png-compressor')&#125;); é‚£ä¹ˆæ€ä¹ˆè§£å†³æˆ‘ä»¬å¼€å¤´è¯´çš„é‚£ä¸ªé—®é¢˜å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬åŠ ä¸€ä¸ªreleaseå’Œurlï¼š 12345678910111213141516171819fis.match('*', &#123; useHash: false&#125;);// æ‰€æœ‰çš„ jsfis.match('js/*.js', &#123; //å‘å¸ƒåˆ°/static/js/xxxç›®å½•ä¸‹ optimizer: fis.plugin('uglify-js'), release : '/dist/$0', url : '//midas.gtimg.cn/**/dist$0'&#125;);// æ‰€æœ‰çš„ cssfis.match('css/*.css', &#123; //å‘å¸ƒåˆ°/static/css/xxxç›®å½•ä¸‹ optimizer: fis.plugin('clean-css'), release : '/dist/$0', url : '//midas.gtimg.cn/**/dist$0'&#125;); å…ˆå‹ç¼©ï¼Œåœ¨å‘å¸ƒåˆ°æŸä¸ªdistä¸‹å»ï¼Œç„¶åçœŸæ­£å‘å¸ƒçš„æ—¶å€™ç”¨æŸä¸ªurlæ›¿æ¢ã€‚è¿™ä¸ªurlå°±å¯ä»¥æ¢æˆæˆ‘ä»¬çš„cdnä¸Šçš„é“¾æ¥ã€‚ç„¶åæˆ‘ä»¬æŠŠå‹ç¼©åçš„distæ–‡ä»¶å¯¹åº”ä¸Šä¼ åˆ°cdnä¸Šå»å°±å¯ä»¥äº†ã€‚ æˆ‘ä»¬çœ‹ä¸‹æœ€åçš„ç»“æœæ˜¯ä¸æ˜¯è·Ÿæˆ‘ä»¬æƒ³çš„ä¸€æ ·ï¼š :) æ˜¯ä¸æ˜¯å¾ˆç®€å•çš„é…ç½®å°±å®Œæˆäº†ï¼Ÿè¿™é‡Œå¯ä»¥ç•™ä¸€ä¸ªæ€è€ƒçš„åœ°æ–¹ï¼Œå°±æ˜¯ä½ ä¼šå‘ç°ä¸Šé¢æ›¿æ¢éƒ½æ˜¯æ›¿æ¢htmlé‡Œé¢çš„ï¼Œé‚£å¦‚æœcss/jsé‡Œé¢ä¹Ÿæœ‰è·¯å¾„è¦æ›¿æ¢ï¼Œæ‰“æ¯”æ–¹cssé‡Œé¢å¼•å…¥äº†å›¾ç‰‡è·¯å¾„æ€ä¹ˆç ´å‘¢ï¼Ÿ FISå…¶ä»–åŠŸèƒ½åˆšåˆšæ˜¯å·²ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå‘Šè¯‰æˆ‘ä»¬fisçš„å·¥ä½œå¾ˆç®€å•çš„é…ç½®å°±å¯ä»¥å®Œæˆäº†ã€‚ç°åœ¨æˆ‘ä»¬çœ‹çœ‹fisè¿˜èƒ½å¹²ä»€ä¹ˆã€‚ å‹ç¼©æ–‡ä»¶,å›¾ç‰‡ï¼ˆèµ„æºï¼‰ é‡å®šå‘æ–‡ä»¶ç›®å½•å’Œurl åˆšåˆšå·²ç»è¯´äº†ä¸Šé¢ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹çœ‹è¿˜æœ‰ä»€ä¹ˆåŠŸèƒ½ï¼š æ–‡ä»¶æŒ‡çº¹ æ–‡ä»¶æŒ‡çº¹ï¼Œå”¯ä¸€æ ‡è¯†ä¸€ä¸ªæ–‡ä»¶ã€‚åœ¨å¼€å¯å¼ºç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæ–‡ä»¶çš„ URL ä¸å‘ç”Ÿå˜åŒ–ï¼Œæ— æ³•åˆ·æ–°æµè§ˆå™¨ç¼“å­˜ã€‚ä¸€èˆ¬éƒ½éœ€è¦é€šè¿‡ä¸€äº›æ‰‹æ®µæ¥å¼ºåˆ·ç¼“å­˜ï¼Œä¸€ç§æ–¹å¼æ˜¯æ·»åŠ æ—¶é—´æˆ³ï¼Œæ¯æ¬¡ä¸Šçº¿æ›´æ–°æ–‡ä»¶ï¼Œç»™è¿™ä¸ªèµ„æºæ–‡ä»¶çš„ URL æ·»åŠ ä¸Šæ—¶é—´æˆ³ã€‚ FIS3 é€‰æ‹©çš„æ˜¯æ·»åŠ  MD5 æˆ³ï¼Œç›´æ¥ä¿®æ”¹æ–‡ä»¶çš„ URLï¼Œè€Œä¸æ˜¯åœ¨å…¶åæ·»åŠ  queryã€‚ å¯¹ jsã€cssã€png å›¾ç‰‡å¼•ç”¨ URL æ·»åŠ  md5 æˆ³ï¼Œé…ç½®å¦‚ä¸‹ 12345678910//ä¸€èˆ¬æ–¹æ³•&lt;img src=\"a.png?t=12012121\"&gt;//æ¸…é™¤å…¶ä»–é…ç½®ï¼Œåªå‰©ä¸‹å¦‚ä¸‹é…ç½® fis.match('*.&#123;js,css,png&#125;', &#123; useHash: true&#125;);//æ‰§è¡Œè¾“å‡ºfis3 release -d ../output CssSpriteå›¾ç‰‡åˆå¹¶ å‹ç¼©äº†é™æ€èµ„æºï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹å›¾ç‰‡è¿›è¡Œåˆå¹¶ï¼Œæ¥å‡å°‘è¯·æ±‚æ•°é‡ã€‚ FIS3 æä¾›äº†æ¯”è¾ƒç®€æ˜“ã€ä½¿ç”¨æ–¹ä¾¿çš„å›¾ç‰‡åˆå¹¶å·¥å…·ã€‚é€šè¿‡é…ç½®å³å¯è°ƒç”¨æ­¤å·¥å…·å¹¶å¯¹èµ„æºè¿›è¡Œåˆå¹¶ã€‚ FIS3 æ„å»ºä¼šå¯¹ CSS ä¸­ï¼Œè·¯å¾„å¸¦ ?__sprite çš„å›¾ç‰‡è¿›è¡Œåˆå¹¶ã€‚ä¸ºäº†èŠ‚çœç¼–è¯‘çš„æ—¶é—´ï¼Œåˆ†é…åˆ° useSprite: true çš„ CSS æ–‡ä»¶æ‰ä¼šè¢«å¤„ç†ã€‚ åœ¨ä¸Šä¸€å¼ å¯¹æ¯”å›¾ç‰‡é‡Œé¢æ˜¯ä¸æ˜¯æœ‰ä¸€ä¸ªå¤šä½™çš„styleå¼€å¤´çš„png,é‚£ä¸ªå°±æ˜¯å›¾ç‰‡åˆå¹¶åçš„ä¸¤ä¸ªæ–‡ä»¶ï¼š å› ä¸ºæˆ‘ä»¬åœ¨cssé‡Œé¢ï¼š1234567li.list-1::before &#123; background-image: url('./img/list-1.png?__sprite');&#125;li.list-2::before &#123; background-image: url('./img/list-2.png?__sprite');&#125; è®¾ç½®äº†ä¸¤ä¸ªä»¥?__spriteçš„å›¾ç‰‡ï¼Œæ‰€ä»¥ä»–ä»¬ä¼šåˆå¹¶äº†ã€‚å¥½æ–¹ä¾¿ã€‚å½“ç„¶ä¸ä»¥è¿™ä¸ªç»“å°¾çš„è‚¯å®šä¸ä¼šåˆå¹¶äº†ã€‚åˆå¹¶çš„å¥½å¤„å½“ç„¶å°±æ˜¯å‡å°‘è¯·æ±‚æ•°é‡ã€‚å½“ç„¶äº†ï¼Œfisä¼šè‡ªåŠ¨å¸®ä½ æŠŠç²¾çµå›¾é‡æ–°å®šä½ã€‚æ‰€ä»¥ä½ ä¼šå‘ç°ä½ çš„cssä¼šå¤šäº†ä¸‹é¢è¿™äº›ä»£ç ï¼š12345content:\"\";position:absolute;height:15px;width:15px;left:-15px å…³é—­é»˜è®¤é…ç½®ã€æŸ¥çœ‹æ–‡ä»¶å±æ€§è¿™ä¸ªæ—¶å€™æˆ‘ä»¬åˆ©ç”¨é‡è¦çš„æŒ‡ä»¤fis3 inspectå¯ä»¥æŸ¥çœ‹æ–‡ä»¶åˆ†é…åˆ°çš„å±æ€§ï¼Œè¿™äº›å±æ€§å†³å®šäº†æ–‡ä»¶å°†å¦‚ä½•è¢«ç¼–è¯‘å¤„ç†ã€‚1fis3 inspect //æŸ¥çœ‹æ–‡ä»¶å‘½ä¸­å±æ€§çš„æƒ…å†µ å› ä¸ºæœ‰ä¸€äº›åŠŸèƒ½æ˜¯é»˜è®¤å¼€å¯äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å¼€å¯debugæ¨¡å¼ï¼Œå…³é—­è¿™äº›ï¼š 12345fis.media('debug').match('*.&#123;js,css,png&#125;', &#123; useHash: false, useSprite: false, optimizer: null&#125;) fis3 release debug å¯ç”¨ media debug çš„é…ç½®ï¼Œè¦†ç›–ä¸Šé¢çš„é…ç½®ï¼ŒæŠŠè¯¸å¤šåŠŸèƒ½å…³æ‰ã€‚ è°ƒè¯•FIS3 æ„å»ºåï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šå¯¹èµ„æºçš„ URL è¿›è¡Œä¿®æ”¹ï¼Œæ”¹æˆç»å¯¹è·¯å¾„ã€‚è¿™æ—¶å€™æœ¬åœ°åŒå‡»æ‰“å¼€æ–‡ä»¶æ˜¯æ— æ³•æ­£å¸¸å·¥ä½œçš„ã€‚è¿™ç»™å¼€å‘è°ƒè¯•å¸¦æ¥äº†ç»å¤§çš„å›°æƒ‘ã€‚ FIS3 å†…ç½®ä¸€ä¸ªç®€æ˜“ Web Serverï¼Œå¯ä»¥æ–¹ä¾¿è°ƒè¯•æ„å»ºç»“æœã€‚12345678910111213//æ„å»ºæ—¶ä¸æŒ‡å®šè¾“å‡ºç›®å½•ï¼Œå³ä¸æŒ‡å®š -d å‚æ•°æ—¶ï¼Œæ„å»ºç»“æœè¢«å‘é€åˆ°å†…ç½® Web Server çš„æ ¹ç›®å½•ä¸‹ã€‚æ­¤ç›®å½•å¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ‰“å¼€ã€‚fis3 server open//ä¸åŠ  -d å‚æ•°é»˜è®¤è¢«å‘å¸ƒåˆ°å†…ç½® Web Serverçš„æ ¹ç›®å½•ä¸‹ï¼Œå½“å¯åŠ¨æœåŠ¡æ—¶è®¿é—®æ­¤ç›®å½•ä¸‹çš„èµ„æºã€‚fis3 release//å¯åŠ¨æœ¬åœ° Web Serverè®¿é—®http://127.0.0.1:8080fis3 server start//FIS3 æ”¯æŒæ–‡ä»¶ç›‘å¬fis3 release -w//æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°fis3 release -wL æ€»ç»“ä¸Šé¢çš„å†…å®¹åªæ˜¯ä¸€å°éƒ¨åˆ†åŠŸèƒ½ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„åŠŸèƒ½ï¼Œæ¯”å¦‚åµŒå…¥èµ„æºï¼ˆimportç­‰ç­‰ï¼‰ï¼Œå®šä½èµ„æºï¼ˆä»html,css,jsä¸­å®šä½åˆ†ç¦»èµ„æºï¼‰ï¼Œéƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼Œå£°æ˜ä¾èµ–èƒ½åŠ›ç­‰ç­‰åŠŸèƒ½ã€‚","categories":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/categories/å·¥å…·-é…ç½®/"}],"tags":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/tags/å·¥å…·-é…ç½®/"}]},{"title":"å‡ ç§æ¸…é™¤å¤šä½™CSSçš„æ–¹æ³•å’ŒåŸºæœ¬åŸç†","slug":"å‡ ç§æ¸…é™¤å¤šä½™CSSçš„æ–¹æ³•å’ŒåŸºæœ¬åŸç†","date":"2016-08-23T13:09:19.000Z","updated":"2016-12-12T03:01:40.000Z","comments":true,"path":"2016/08/23/å‡ ç§æ¸…é™¤å¤šä½™CSSçš„æ–¹æ³•å’ŒåŸºæœ¬åŸç†/","link":"","permalink":"http://sevencai.github.io/2016/08/23/å‡ ç§æ¸…é™¤å¤šä½™CSSçš„æ–¹æ³•å’ŒåŸºæœ¬åŸç†/","excerpt":"","text":"æœ€è¿‘é‡åˆ°ä¸€ä¸ªå‘ï¼Œé‡æ„ç»™äº†é‡æ„ä»£ç ï¼Œä½†æ˜¯æ²¡æœ‰åˆ†ç¦»å¥½ï¼Œå¯¼è‡´æˆ‘å¼•å…¥äº†å¾ˆå¤šæ— ç”¨çš„cssã€‚è¿™äº›cssåˆå¼•å…¥äº†å¾ˆå¤šæ— ç”¨çš„å›¾ç‰‡ï¼Œä½¿æ•´ä¸ªçš„éå¸¸é‡è€Œä¸”å¾ˆæ— ç”¨ã€‚æˆ‘éœ€è¦æƒ³åŠæ³•æŠŠæ•´ä¸ªæ— ç”¨csséƒ½å»æ‰ã€‚ä¸‹é¢æ˜¯å‡ ç§æ–¹æ³•ã€‚ gulp-uncssgulp-uncssæ˜¯ä¸€ä¸ªgulpæ’ä»¶ï¼Œå’Œæ™®é€šgulpæ’ä»¶æ²¡æœ‰åŒºåˆ«ã€‚å…ˆå¼•å…¥gulpã€‚ç„¶ååˆ©ç”¨uncssæ–¹æ³•ä¼ å…¥éœ€è¦ä¼˜åŒ–çš„cssæ‰€åœ¨çš„é¡µé¢ã€‚æ³¨æ„è¿™é‡Œæ”¯æŒæœ¬åœ°æ–‡ä»¶ï¼Œæ­£åˆ™åŒ¹é…å’ŒurlåŒ¹é…ã€‚ 12345678910var gulp = require('gulp');var uncss = require('gulp-uncss');gulp.task('default', function () &#123; return gulp.src('site.css') .pipe(uncss(&#123; html: ['index.html', 'posts/**/*.html', 'http://example.com'] &#125;)) .pipe(gulp.dest('./out'));&#125;); å½“ç„¶ï¼Œä¹Ÿå¯ä»¥å’Œå…¶ä»–æ’ä»¶ä¸€èµ·ç”¨ã€‚å¦‚ä¸‹ï¼š 12345678910111213141516var gulp = require('gulp');var uncss = require('gulp-uncss');var sass = require('gulp-sass');var concat = require('gulp-concat');var nano = require('gulp-cssnano');gulp.task('default', function () &#123; return gulp.src('styles/**/*.scss') .pipe(sass()) .pipe(concat('main.css')) .pipe(uncss(&#123; html: ['index.html', 'posts/**/*.html', 'http://example.com'] &#125;)) .pipe(nano()) .pipe(gulp.dest('./out'));&#125;); æˆ‘è§‰å¾—å¾ˆæ–¹ä¾¿ï¼Œæœ€åé¡¹ç›®é‡Œå°±æ˜¯é‡‡ç”¨çš„è¿™ä¸ªæ–¹æ³•ã€‚ chromeæµè§ˆå™¨auditsåˆ©ç”¨chromeçš„è‡ªå¸¦å®¡è®¡åŠŸèƒ½ã€‚æ‰“å¼€chromeæµè§ˆå™¨ï¼Œç„¶åç‚¹å‡»Auditså®¡è®¡åŠŸèƒ½ã€‚ç„¶åç‚¹å‡»run,å°±å¯ä»¥åˆ†æå‡ºå’±ä»¬è¿™ä¸ªé¡µé¢å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹äº†ã€‚ ä½†æ˜¯è¿™æœ‰ä¸€ä¸ªç¼ºé™·ï¼Œå°±æ˜¯å®ƒåªèƒ½æ‰¾åˆ°ä½ çš„æœ‰å¤šå°‘æ ·å¼æ˜¯ä¸éœ€è¦çš„ï¼Œä¸èƒ½å¤Ÿè‡ªåŠ¨æŠŠæ¸…ç†åçš„cssç»™ä½ ã€‚ä½ è¿˜æ˜¯éœ€è¦æ‰‹åŠ¨å»ä½ çš„æ–‡ä»¶é‡Œå¯¹æ¯”ï¼Œç„¶ååˆ é™¤ã€‚å¯¹äºæ¯”è¾ƒå°‘çš„å¯ä»¥è¿™ä¹ˆç”¨ã€‚è¦æ˜¯æœ¬æ¥å°±æœ‰å¾ˆå¤šå¾ˆå¤šæ— ç”¨çš„ï¼Œé‚£ä¹ˆå°±å¾ˆä¸å¥½ä½¿äº†ã€‚è¿™ä¸ªæ—¶å€™ï¼Œç«ç‹å‡ºæ¥äº†ã€‚ firefoxæµè§ˆå™¨css usageä¸‹è½½css usageè¿™ä¸ªç«ç‹æ’ä»¶å¹¶å®‰è£…ï¼Œåœ°å€åœ¨ https://addons.mozilla.org/en-US/firefox/addon/css-usage/ã€‚ç„¶åf12,åˆ‡åˆ°CSS Usage é€‰é¡¹å¡ç‚¹å‡» scan æŒ‰é’®ï¼Œç¨åä¼šåˆ†æå‡ºå“ªäº›cssè§„åˆ™æœªä½¿ç”¨ã€‚ç„¶åç‚¹å‡» export cleaned css æŒ‰é’®ï¼Œå¯¼å‡ºæ¸…ç†å¥½çš„cssæ–‡ä»¶ï¼Œå°†åœ¨æ–°é¡µé¢æ‰“å¼€æ–°çš„cssæºæ–‡ä»¶ã€‚å³å¯ã€‚æ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚æ­¥éª¤æ˜¯(Scan-&gt;Clear-&gt;AutoScan)ã€‚ Scan: é€šè¿‡å­—é¢æ„æ€æˆ‘ä»¬å°±èƒ½çŸ¥é“,è¿™æ˜¯ä¸€ä¸ªæ‰«æå½“å‰é¡µé¢çš„å·¥å…·,å¦‚æœæˆ‘ä»¬çš„ç«™ç‚¹åªæœ‰ä¸€ä¸ªé¡µé¢æˆ–è€…å‡ ä¸ªé¡µé¢,æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨æ­¤åŠŸèƒ½æŒ‰é”®æ¥æŸ¥çœ‹é¡µé¢çš„csså®ç”¨æƒ…å†µ. Clear: æ¸…é™¤æ‰«æç»“æœ,ä½†æˆ‘ä»¬æŸ¥çœ‹å®Œç½‘é¡µ,å¹¶å¯¹CSS è¿›è¡Œäº†ä¿®æ”¹å,æˆ‘ä»¬å°±ä¸éœ€è¦ä»¥å‰çš„æ‰«æç»“æœäº†,é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ClearåŠŸèƒ½é”®,æ¸…é™¤ä»¥å‰çš„æ‰«æç»“æœç¼“å­˜,é‡æ–°å¼€å§‹æˆ‘ä»¬çš„æ‰«æ. AutoScan: æˆ‘ä»¬çš„ç½‘ç«™å¯èƒ½ä¼šæœ‰å¾ˆå¤šçš„é¡µé¢,æ›´æœ‰å¯èƒ½æœ‰å¾ˆå¤šçš„å¼¹å‡ºå±‚,å¦‚æœæˆ‘ä»¬æ¯æ¬¡éƒ½ç‚¹å‡»æ‰«æçš„è¯,ä¼šå ç”¨æˆ‘ä»¬å¤§é‡çš„æ—¶é—´,AutoScanåŠŸèƒ½é”®å¯ä»¥ä½¿æˆ‘ä»¬çš„æ‰«æå·¥ä½œæ›´è‡ªåŠ¨åŒ–,æé«˜æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡. tidycss-nodejsæ’ä»¶ ç»å¸¸çœ‹åˆ°æœ‰ç«¥é‹é—®ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆå·¥å…·èƒ½å¿«é€Ÿåˆ†æå‡ºç«™ç‚¹çš„CSSå†—ä½™ï¼Œäºæ˜¯å°±æœ‰äº†è¿™ä¸ªé¡¹ç›®ã€‚æœ¬è´¨ä¸Šï¼Œè¿™ä¸ªå·¥å…·æ˜¯ä¸ºäº†è§£å†³æˆ‘ä»¬ è…¾è®¯è¯¾å ‚ åœ¨å¤šäººå¼€å‘ä¸å¿«é€Ÿè¿­ä»£ä¸‹çš„CSSå†—ä½™é—®é¢˜ï¼Œä¸ºä»£ç Reviewæä¾›å¯è¡Œçš„å·¥å…·ã€‚-from tidycss github install tidycssåï¼Œä½¿ç”¨nodejsè¿è¡Œï¼Œä¹‹åå¹¶ä¼šç”ŸæˆæŠ¥è¡¨ã€‚åŸºæœ¬åŸç†æ€æƒ³è·Ÿä¸Šé¢å‡ ä¸ªéƒ½å·®ä¸å¤šã€‚æºç ä¹Ÿæ˜¯åˆ©ç”¨selectorã€‚1234567891011121314var tidy = require('tidycss');tidy( // ä½ è¦æ£€æµ‹å†—ä½™çš„url 'http://ke.qq.com', // å¯é€‰å‚æ•° &#123; // ä¸å¯¹common.xxxx.cssæ£€æµ‹å†—ä½™ï¼Œå› ä¸ºè¿™ä¸ªæ˜¯ç«™ç‚¹å…¬å…±æ–‡ä»¶ ignore: /common\\..*\\.css/, // å¿½ç•¥çš„é€‰æ‹©å™¨åˆ—è¡¨, å³è¿™é‡Œçš„é€‰æ‹©å™¨æ˜¯è¢«reviewåå¯å†—ä½™é¡¹ï¼Œ // æ¯”å¦‚æœ‰é€šè¿‡javascriptåŠ¨æ€ç”Ÿæˆçš„DOMæ ‘ unchecks: ['.mod-nav__course-all span:hover'] &#125;); å¯èƒ½çš„å‘è¿™ä¸­é—´å¯èƒ½å°±æ˜¯è¦å°½é‡çš„æŠŠç”¨åˆ°çš„cssåŠŸèƒ½éƒ½æ‹‰å‡ºæ¥ã€‚æ¯”å¦‚æœ‰ä¸€ä¸ªæ¨¡å—ï¼Œæ˜¯æˆ‘ç‚¹å‡»æŒ‰é’®æ‰èƒ½å‡ºç°åˆ—è¡¨ã€‚é‚£ä¹ˆå¦‚æœä½ ä¸ç‚¹å‡»æŒ‰é’®ï¼Œè¿™äº›æ’ä»¶å°±è·å–ä¸åˆ°åˆ—è¡¨è¿™äº›csså¯¹åº”çš„domï¼Œä¹Ÿå°±ä¼šè®¤ä¸ºè¿™äº›cssé€‰æ‹©å™¨æ˜¯æ— ç”¨çš„ã€‚å°±ä¼šæŠŠè¿™äº›é€‰æ‹©å™¨ç»™åˆ æ‰ã€‚é‚£ä¹ˆçœŸæ­£çš„ä½ æ˜¯ç¼ºå°‘è¿™äº›cssçš„ã€‚è¿™ä¸ªå¯èƒ½ç»“åˆåé¢åŸºæœ¬åŸç†ç†è§£ä¼šæ›´æ¸…æ¥šã€‚ åŸºæœ¬åŸç†é‚£ä¹ˆè¿™äº›å·¥å…·æ˜¯å¦‚ä½•åšåˆ°è¯†åˆ«æ²¡æœ‰ä½¿ç”¨è¿‡çš„csså‘¢ï¼Ÿ ä¸€ä¸ª css é€‰æ‹©å™¨æ˜¯æ— æ•ˆçš„ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æ˜¯æ— æ³•é€šè¿‡è¿™ä¸ªcssé€‰æ‹©å™¨æ‰¾åˆ°domå…ƒç´ ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨querySelectoråˆ¤æ–­æ”¹cssé€‰æ‹©å™¨å¯¹åº”çš„domæ˜¯å¦ä¸ºç©ºã€‚ä»è€ŒçŸ¥é“å“ªäº›æ˜¯æ²¡æœ‰ä½¿ç”¨çš„ã€‚ å…¶å®ä¸Šé¢è¿™ä¸ªgulpçš„æ’ä»¶gulp-uncssæ˜¯åˆ©ç”¨çš„å¦å¤–ä¸€ä¸ªåˆ«äººå†™å¥½çš„æ¨¡å—uncss,åªä¸è¿‡æŠŠå®ƒæ‰“åŒ…æˆäº†gulpçš„æ’ä»¶æ ¼å¼ã€‚ æˆ‘å»çœ‹äº†ä¸‹å®ƒçš„ï¼ˆuncssï¼‰æºç ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ä¸Šé¢é‚£ä¸ªæ€æƒ³ï¼Œæ‰¾å‡ºunusedçš„selector,æ‰¾å‡ºusedè¿‡äº†çš„selectorã€‚ç„¶åçœ‹äº†ä¸‹åˆ«äººå†™çš„ä»£ç ï¼Œå°±è§‰å¾—è¿˜è¦å¥½å¥½åŠªåŠ›ï¼Œå·®çš„å¤ªå¤šã€‚ä¸‹é¢æ”¾å‡ºæ ¸å¿ƒä»£ç ï¼Œæ–¹ä¾¿ä»¥åæˆ‘ç»å¸¸å­¦ä¹ ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244'use strict';var promise = require('bluebird'), phantom = require('./phantom.js'), postcss = require('postcss'), _ = require('lodash'); /* Some styles are applied only with user interaction, and therefore its * selectors cannot be used with querySelectorAll. * http://www.w3.org/TR/2001/CR-css3-selectors-20011113/ */var dePseudify = (function () &#123; var ignoredPseudos = [ /* link */ ':link', ':visited', /* user action */ ':hover', ':active', ':focus', /* UI element states */ ':enabled', ':disabled', ':checked', ':indeterminate', /* pseudo elements */ '::first-line', '::first-letter', '::selection', '::before', '::after', /* pseudo classes */ ':target', /* CSS2 pseudo elements */ ':before', ':after', /* Vendor-specific pseudo-elements: * https://developer.mozilla.org/ja/docs/Glossary/Vendor_Prefix */ '::?-(?:moz|ms|webkit|o)-[a-z0-9-]+' ], pseudosRegex = new RegExp(ignoredPseudos.join('|'), 'g'); return function (selector) &#123; return selector.replace(pseudosRegex, ''); &#125;;&#125;());/** * Private function used in filterUnusedRules. * @param &#123;Array&#125; selectors CSS selectors created by the CSS parser * @param &#123;Array&#125; ignore List of selectors to be ignored * @param &#123;Array&#125; usedSelectors List of Selectors found in the PhantomJS pages * @return &#123;Array&#125; The selectors matched in the DOMs */function filterUnusedSelectors(selectors, ignore, usedSelectors) &#123; /* There are some selectors not supported for matching, like * :before, :after * They should be removed only if the parent is not found. * Example: '.clearfix:before' should be removed only if there * is no '.clearfix' */ return selectors.filter(function (selector) &#123; selector = dePseudify(selector); /* TODO: process @-rules */ if (selector[0] === '@') &#123; return true; &#125; for (var i = 0, len = ignore.length; i &lt; len; ++i) &#123; if (_.isRegExp(ignore[i]) &amp;&amp; ignore[i].test(selector)) &#123; return true; &#125; if (ignore[i] === selector) &#123; return true; &#125; &#125; return usedSelectors.indexOf(selector) !== -1; &#125;);&#125;/** * Find which animations are used * @param &#123;Object&#125; css The postcss.Root node * @return &#123;Array&#125; */function getUsedAnimations(css) &#123; var usedAnimations = []; css.walkDecls(function (decl) &#123; if (_.endsWith(decl.prop, 'animation-name')) &#123; /* Multiple animations, separated by comma */ usedAnimations.push.apply(usedAnimations, postcss.list.comma(decl.value)); &#125; else if (_.endsWith(decl.prop, 'animation')) &#123; /* Support multiple animations */ postcss.list.comma(decl.value).forEach(function (anim) &#123; /* If declared as animation, it should be in the form 'name Xs etc..' */ usedAnimations.push(postcss.list.space(anim)[0]); &#125;); &#125; &#125;); return usedAnimations;&#125;/** * Filter @keyframes that are not used * @param &#123;Object&#125; css The postcss.Root node * @param &#123;Array&#125; animations * @param &#123;Array&#125; unusedRules * @return &#123;Array&#125; */function filterKeyframes(css, animations, unusedRules) &#123; css.walkAtRules(/keyframes$/, function (atRule) &#123; if (animations.indexOf(atRule.params) === -1) &#123; unusedRules.push(atRule); atRule.remove(); &#125; &#125;);&#125;/** * Filter rules with no selectors remaining * @param &#123;Object&#125; css The postcss.Root node * @return &#123;Array&#125; */function filterEmptyAtRules(css) &#123; /* Filter media queries with no remaining rules */ css.walkAtRules(function (atRule) &#123; if (atRule.name === 'media' &amp;&amp; atRule.nodes.length === 0) &#123; atRule.remove(); &#125; &#125;);&#125;/** * Find which selectors are used in &#123;pages&#125; * @param &#123;Array&#125; pages List of PhantomJS pages * @param &#123;Object&#125; css The postcss.Root node * @return &#123;promise&#125; */function getUsedSelectors(page, css) &#123; var usedSelectors = []; css.walkRules(function (rule) &#123; usedSelectors = _.concat(usedSelectors, rule.selectors.map(dePseudify)); &#125;); // TODO: Can this be written in a more straightforward fashion? return promise.map(usedSelectors, function (selector) &#123; return selector; &#125;).then(function(selector) &#123; return phantom.findAll(page, selector); &#125;);&#125;/** * Get all the selectors mentioned in &#123;css&#125; * @param &#123;Object&#125; css The postcss.Root node * @return &#123;Array&#125; */function getAllSelectors(css) &#123; var selectors = []; css.walkRules(function (rule) &#123; selectors = _.concat(selectors, rule.selector); &#125;); return selectors;&#125;/** * Remove css rules not used in the dom * @param &#123;Array&#125; pages List of PhantomJS pages * @param &#123;Object&#125; css The postcss.Root node * @param &#123;Array&#125; ignore List of selectors to be ignored * @param &#123;Array&#125; usedSelectors List of selectors that are found in &#123;pages&#125; * @return &#123;Object&#125; A css_parse-compatible stylesheet */function filterUnusedRules(pages, css, ignore, usedSelectors) &#123; var ignoreNextRule = false, unusedRules = [], unusedRuleSelectors, usedRuleSelectors; /* Rule format: * &#123; selectors: [ '...', '...' ], * declarations: [ &#123; property: '...', value: '...' &#125; ] * &#125;,. * Two steps: filter the unused selectors for each rule, * filter the rules with no selectors */ ignoreNextRule = false; css.walk(function (rule) &#123; if (rule.type === 'comment') &#123; // ignore next rule while using comment `/* uncss:ignore */` if (/^!?\\s?uncss:ignore\\s?$/.test(rule.text)) &#123; ignoreNextRule = true; &#125; &#125; else if (rule.type === 'rule') &#123; if (rule.parent.type === 'atrule' &amp;&amp; _.endsWith(rule.parent.name, 'keyframes')) &#123; // Don't remove animation keyframes that have selector names of '30%' or 'to' return; &#125; if (ignoreNextRule) &#123; ignoreNextRule = false; ignore = ignore.concat(rule.selectors); &#125; usedRuleSelectors = filterUnusedSelectors( rule.selectors, ignore, usedSelectors ); unusedRuleSelectors = rule.selectors.filter(function (selector) &#123; return usedRuleSelectors.indexOf(selector) &lt; 0; &#125;); if (unusedRuleSelectors &amp;&amp; unusedRuleSelectors.length) &#123; unusedRules.push(&#123; type: 'rule', selectors: unusedRuleSelectors, position: rule.source &#125;); &#125; if (usedRuleSelectors.length === 0) &#123; rule.remove(); &#125; else &#123; rule.selectors = usedRuleSelectors; &#125; &#125; &#125;); /* Filter the @media rules with no rules */ filterEmptyAtRules(css); /* Filter unused @keyframes */ filterKeyframes(css, getUsedAnimations(css), unusedRules); return css;&#125;/** * Main exposed function * @param &#123;Array&#125; pages List of PhantomJS pages * @param &#123;Object&#125; css The postcss.Root node * @param &#123;Array&#125; ignore List of selectors to be ignored * @return &#123;promise&#125; */module.exports = function uncss(pages, css, ignore) &#123; return promise.map(pages, function (page) &#123; return getUsedSelectors(page, css); &#125;).then(function (usedSelectors) &#123; usedSelectors = _.flatten(usedSelectors); var filteredCss = filterUnusedRules(pages, css, ignore, usedSelectors); var allSelectors = getAllSelectors(css); return [filteredCss, &#123; /* Get the selectors for the report */ all: allSelectors, unused: _.difference(allSelectors, usedSelectors), used: usedSelectors &#125;]; &#125;);&#125;; æ€»ç»“æ‰€ä»¥ï¼Œå¦‚æœæ˜¯åªæ˜¯è¦ä¸€ä¸ªæ•´ç†åçš„æ–‡ä»¶ï¼Œå°±ç”¨ç«ç‹å°±å¥½ã€‚å¦‚æœæ˜¯å·¥ç¨‹åŒ–é¡¹ç›®ï¼Œç”¨gulpçš„æ’ä»¶æ¯”è¾ƒå¥½ã€‚ä¸»è¦æ˜¯æ•´ç†äº†å‡ ç§æ–¹æ³•ã€‚ä¸­é—´ä¹Ÿå­¦åˆ°äº†ä¸å°‘ä¸œè¥¿ï¼Œæ¯”å¦‚å®¡è®¡auditsä»¥å‰å°±æ²¡æœ‰å…³æ³¨è¿‡ã€‚ç°åœ¨çŸ¥é“æ˜¯åˆ†æé¡µé¢æ€§èƒ½çš„ä¸€ä¸ªå¥½æ–¹æ³•äº†ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Css","slug":"Css","permalink":"http://sevencai.github.io/tags/Css/"}]},{"title":"ECMAScript2015 å¯¹è±¡æ‰©å±•","slug":"ECMAScript2015-å¯¹è±¡æ‰©å±•","date":"2016-08-19T13:34:22.000Z","updated":"2017-01-17T12:28:49.000Z","comments":true,"path":"2016/08/19/ECMAScript2015-å¯¹è±¡æ‰©å±•/","link":"","permalink":"http://sevencai.github.io/2016/08/19/ECMAScript2015-å¯¹è±¡æ‰©å±•/","excerpt":"","text":"ä¸Šç¯‡æ–‡ç« å­¦ä¹ å’Œè®°å½•äº†Object.definePropertyçš„ç”¨æ³•ï¼Œä¸»è¦æ˜¯å¯¹å±æ€§çš„æ‰©å±•å®šä¹‰ã€‚è¿™æ¬¡å­¦ä¹ ä¸‰ä¸ªAPIï¼Œæ˜¯å…³äºå¯¹è±¡æ“ä½œçš„ä¸‰ä¸ªæ‰©å±•ã€‚ åˆ†åˆ«æ˜¯ä¸‹é¢ä¸‰å¯¹ï¼Œå…·ä½“æ¥è®²è®²å®ƒä»¬çš„åŒºåˆ«å’Œè”ç³»ä»¥åŠç”¨æ³•ã€‚ Object.freeze() / Object.isFrozen() Object.seal() / Object.isSealed() Object.preventExtensions() / Object.isExtensible Object.freeze() / Object.isFrozen()Object.freeze()æ˜¯è¿™ä¸‰ä¸ªé‡Œé¢æœ€é«˜çº§åˆ«ã€‚é€šè¿‡Object.freeze(obj)çš„objï¼Œç›¸å½“äºå·²ç»å†»ç»“äº†ï¼šä¸èƒ½æ·»åŠ æ–°çš„å±æ€§ï¼Œä¸èƒ½ä¿®æ”¹å·²æœ‰å±æ€§çš„å€¼ï¼Œä¸èƒ½åˆ é™¤å·²æœ‰å±æ€§ï¼Œä»¥åŠä¸èƒ½ä¿®æ”¹å·²æœ‰å±æ€§çš„å¯æšä¸¾æ€§ã€å¯é…ç½®æ€§ã€å¯å†™æ€§çš„å¯¹è±¡ã€‚ ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªå¯¹è±¡ä¸å¯ä»¥å˜äº†ã€‚12345678var obj = &#123;a:1,b:2&#125;;obj.c = 3;Object.freeze(obj);obj.d = 4; //ä¸ä¼šæŠ›å‡ºå¼‚å¸¸obj.d //undefineddelete obj.c //false ä¸Šè¿°æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶objè¢«å†»ç»“äº†ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨å®ƒä¸Šé¢ä¿®æ”¹å±æ€§çš„æ—¶å€™ï¼Œä»ç„¶æ˜¯å¯ä»¥çš„ï¼Œåªæ˜¯ä¸ä¼šå¾—åˆ°æ­£ç¡®çš„å€¼ï¼Œä¸æŠ±é”™ã€‚è¿™å¾ˆæ˜æ˜¾ä¼šå¯¹æˆ‘ä»¬æ•´ä½“çš„ä»£ç é€ æˆå½±å“ï¼Œä»¥åæ’æŸ¥é”™è¯¯ä¹Ÿä¸æ–¹ä¾¿ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å®šä¹‰â€™use strictâ€™ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå°±å¯ä»¥æŠ¥é”™å•¦ã€‚12345'use strict'//TypeError: \"c\" is read-onlyobj.c = 0;Object.isFrozen(obj) //true ç„¶åæˆ‘ä»¬å¯ä»¥å®šä¹‰Object.isFrozenæ¥åˆ¤æ–­æ˜¯å¦è¯¥å¯¹è±¡è¢«å†»ç»“äº†ã€‚ Object.seal() / Object.isSealed()å¯†å°ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶è¿”å›è¢«å¯†å°åçš„å¯¹è±¡ã€‚å¯†å°å¯¹è±¡æ˜¯æŒ‡é‚£äº›ä¸èƒ½æ·»åŠ æ–°çš„å±æ€§ï¼Œä¸èƒ½åˆ é™¤å·²æœ‰å±æ€§ï¼Œä»¥åŠä¸èƒ½ä¿®æ”¹å·²æœ‰å±æ€§çš„å¯æšä¸¾æ€§ã€å¯é…ç½®æ€§ã€å¯å†™æ€§ï¼Œä½†å¯ä»¥ä¿®æ”¹å·²æœ‰å±æ€§çš„å€¼çš„å¯¹è±¡ã€‚ æ‰€ä»¥åœ¨Object.freezeçš„åŸºç¡€ä¸Šï¼Œå°±æ˜¯å¯ä»¥ä¿®æ”¹è‡ªå·±å·²ç»æœ‰äº†çš„å±æ€§ã€‚ä½†æ˜¯è¿˜æ˜¯ä¸èƒ½åˆ é™¤å’Œæ·»åŠ ã€‚ ä¹Ÿä¸èƒ½ä¿®æ”¹å·²æœ‰å±æ€§çš„å¯æšä¸¾ï¼Œå¯å†™ç­‰ç‰¹æ€§ã€‚ 12345678910111213141516171819var obj = &#123;a:1, b:2&#125;;Object.seal(obj);Object.isSealed(obj); // trueobj.c = 3; //ä¸æŠ›å‡ºå¼‚å¸¸obj.c // undefineddelete obj.b // false//å·²æœ‰å±æ€§å¯ä»¥å˜æ›´å€¼obj.b = 3;obj.b //3//TypeError: can't define property \"[object Object]\": Object is not extensibleObject.defineProperty(obj,a,&#123; value : 'r', writable : true, configurable : true&#125;) é€šè¿‡ä¸Šé¢ä¸€äº›ç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°Object.freezeå’ŒObject.sealçš„åŒºåˆ«äº†ã€‚Object.freezeæ›´åŠ ä¸¥æ ¼ï¼ŒObject.sealç›¸å½“äºå°è£…å¥½äº†è¿™ä¸ªå¯¹è±¡ï¼Œä¸å‡†å¤šä¸€ä¸ªï¼Œä¹Ÿä¸å‡†å°‘ä¸€ä¸ªï¼Œä½†æ˜¯ä½ å¯ä»¥åœ¨è¿™ä¸ªé‡Œé¢æ›´æ”¹åŸæ¥å·²æœ‰çš„ã€‚ Object.preventExtensions / Object.isExtensibleé˜»æ­¢å¯¹è±¡æ‰©å±•ï¼Œè®©ä¸€ä¸ªå¯¹è±¡å˜çš„ä¸å¯æ‰©å±•ï¼Œä¹Ÿå°±æ˜¯æ°¸è¿œä¸èƒ½å†æ·»åŠ æ–°çš„å±æ€§ã€‚åœ¨æ²¡æœ‰è¿™ä¸ªä¹‹å‰ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯å¯ä»¥è¿›è¡Œæ— é™åˆ¶çš„æ‰©å±•å±æ€§çš„ã€‚ 1234567891011121314var obj = &#123;a:1, b:2&#125;;obj.c = 3; Object.preventExtensions(obj);obj.d = 4; // ä¸æŠ›å‡ºå¼‚å¸¸obj.d // undefinedï¼Œä¸èƒ½æ‰©å±•å±æ€§Object.isExtensible(obj); // falseobj.a = 'a';obj.a // 'a',å¯ä»¥æ›´æ”¹å·²æœ‰çš„å±æ€§delete obj.a //å¯ä»¥åˆ é™¤å·²æœ‰å±æ€§obj.a //åˆ é™¤åå†æ·»åŠ ä¹Ÿä¸è¡Œ æ€»ç»“ä¸‰è€…æœ‰ç±»ä¼¼çš„ä½œç”¨ï¼Œä½†æ˜¯ç”¨æ³•å¾ˆä¸åŒã€‚å¯ä»¥é€šè¿‡è¿™äº›APIï¼Œå¯¹å¯¹è±¡å†è¿›è¡Œæ›´ä¸¥è°¨çš„æ§åˆ¶ã€‚è¿™æ ·ä»£ç çš„å¥å£®æ€§æ›´å¥½äº†ã€‚ä¹Ÿæ›´å®¹æ˜“è®©æˆ‘ä»¬å‘ç°é”™è¯¯ï¼Œå¤šäººåˆä½œçš„æ—¶å€™ä¹Ÿæ›´ä¸å®¹æ˜“å‡ºé”™ã€‚ä½†ä¸€å®šè¦è®°å¾—å†™ä¸¥æ ¼æ¨¡å¼çš„&#39;use strict&#39;å“Ÿã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"ES6","slug":"ES6","permalink":"http://sevencai.github.io/tags/ES6/"}]},{"title":"ECMAScript Object.defineProperty å±æ€§æè¿°ç¬¦","slug":"ECMAScript-Object-defineProperty-å±æ€§æè¿°ç¬¦","date":"2016-08-19T11:14:08.000Z","updated":"2016-12-12T02:59:58.000Z","comments":true,"path":"2016/08/19/ECMAScript-Object-defineProperty-å±æ€§æè¿°ç¬¦/","link":"","permalink":"http://sevencai.github.io/2016/08/19/ECMAScript-Object-defineProperty-å±æ€§æè¿°ç¬¦/","excerpt":"","text":"ECMAScript 5 å‡ºäº†ä¸€ä¸ªã€å±æ€§æè¿°ç¬¦ã€‘ï¼Œä¸»è¦æ˜¯ä¸ºäº†ã€ç»™å±æ€§å¢åŠ æ›´å¤šçš„æ§åˆ¶ã€‘ã€‚ä¸‹é¢æˆ‘ä»¬å°±è°ˆè®ºè¿™æ ·ä¸€ä¸ªæ–°çš„ç‰¹æ€§-Object.defineProperty()ã€‚ Object.defineProperty() æ–¹æ³•ç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å±æ€§ï¼Œ å¹¶è¿”å›è¿™ä¸ªå¯¹è±¡ã€‚ è¯­æ³•å®šä¹‰ Object.defineProperty(obj, prop, descriptor) obj : éœ€è¦å®šä¹‰å±æ€§çš„å¯¹è±¡ prop : éœ€è¢«å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§å descriptor : éœ€è¢«å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„æè¿°ç¬¦ ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ç”¨è¿™ä¸ªæ–°ç‰¹æ€§ï¼Ÿæˆ‘ä»¬ç»™å¯¹è±¡åˆ›å»ºå±æ€§æœ‰ä¸‹é¢è¿™æ ·å‡ ç§æ–¹æ³•ï¼š12345678910var person = &#123;&#125;;//ç¬¬ä¸€ç§æ–¹å¼person.name = 'Seven';//ç¬¬äºŒç§æ–¹å¼person[name] = 'Seven';//ç¬¬ä¸‰ç§æ–¹å¼Object.defineProperty(person, 'name', &#123; value : 'Seven'&#125;)person.name //Seven çœ‹èµ·æ¥å¥½åƒæœ€åä¸€ç§æ–°æ–¹æ³•æœ€éº»çƒ¦ï¼Œé‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜è¦ç”¨æœ€åä¸€ç§æ–¹æ³•å‘¢ï¼Ÿå› ä¸ºåé¢çš„descriptorå¯ä»¥è®©æˆ‘ä»¬åˆ¶å®šæ›´å¤šå¯¹å¯¹è±¡å±æ€§çš„ç­–ç•¥ã€‚ descriptoræ•°æ®æè¿°ç¬¦-writableä¸Šé¢æˆ‘ä»¬æåˆ°äº†æ›´å¤šç­–ç•¥ï¼Œå…¶å®è¿™ä¸ªæ›´å¤šç­–ç•¥å°±æ˜¯è®©å±æ€§å¯ä»¥æ›´å¤šä¸åŒçš„æƒé™ï¼Œæ¯”å¦‚è®©å®ƒåªèƒ½è¯»ï¼Œä¸èƒ½å†™ã€‚ å½“å±æ€§ç‰¹æ€§ï¼ˆproperty attributeï¼‰ writable è®¾ç½®ä¸ºfalseæ—¶ï¼Œè¡¨ç¤º non-writableï¼Œå±æ€§ä¸èƒ½è¢«ä¿®æ”¹ã€‚ 12345678Object.defineProperty(person,'sex'&#123; value:'girl', writable:false&#125;)person.sex // 'girl'person.sex = 'boy'person.sex //girl å½“æˆ‘ä»¬è®¾ç½®äº†descriptoré‡Œé¢çš„writableä¸ºfalseçš„æ—¶å€™ï¼Œè¿™ä¸ªsexå°±ä¸å¯ä»¥æ›´æ”¹äº†ã€‚è™½ç„¶ä½ å¯ä»¥è®¾ç½®ï¼Œä½†æ˜¯è®¾ç½®åç»“æœè¿˜æ˜¯girlä¸ä¼šå˜çš„ã€‚ æœ‰äººä¼šè¯´ï¼Œè¿™æ ·ä¸æ˜¯å¾ˆä¸å¥½å—ï¼Ÿå¦‚æœæˆ‘ä»¬åœ¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹æ”¹å†™äº†ï¼Œè¿æŠ¥é”™éƒ½ä¸æŠ¥ã€‚ä¼šé€ æˆå¾ˆå¤šbugã€‚å¾ˆéš¾æ’æŸ¥å‡ºåˆ°åº•æ˜¯å“ªé‡Œå‡ºäº†bugã€‚ è§£å†³æ–¹æ³•æ˜¯å†™ä¸Šuse strictã€‚è¿™æ ·å°±ä¼šæŠ¥é”™äº†ã€‚ 12345678// å®šä¹‰ä¸¥æ ¼æ¨¡å¼'use strict';var obj = &#123; &#125;;Object.defineProperty(obj, 'attr', &#123; value: 1, writable: false&#125;);obj.attr = 2; // throw exception descriptoræ•°æ®æè¿°ç¬¦-enumerableä¸Šé¢å·²ç»æåˆ°äº†ä¸€ä¸ªwritable,è¡¨ç¤ºæ˜¯å¦å¯å†™ã€‚ç°åœ¨åœ¨çœ‹ä¸€ä¸ªæ•°æ®æè¿°ç¬¦enumerableã€‚ å±æ€§ç‰¹æ€§ enumerable å®šä¹‰äº†å¯¹è±¡çš„å±æ€§æ˜¯å¦å¯ä»¥åœ¨ forâ€¦in å¾ªç¯å’Œ Object.keys() ä¸­è¢«æšä¸¾ã€‚ 123456789101112131415161718192021222324252627var o = &#123;&#125;;Object.defineProperty(o, \"a\", &#123; value : 1, enumerable:true&#125;);Object.defineProperty(o, \"b\", &#123; value : 2, enumerable:false&#125;);// enumerable defaults to falseObject.defineProperty(o, \"c\", &#123; value : 3&#125;);// å¦‚æœä½¿ç”¨ç›´æ¥èµ‹å€¼çš„æ–¹å¼åˆ›å»ºå¯¹è±¡çš„å±æ€§ï¼Œåˆ™è¿™ä¸ªå±æ€§çš„enumerableä¸ºtrueo.d = 4;for (var i in o) &#123; console.log(i);&#125;// æ‰“å° 'a' å’Œ 'd' (in undefined order)Object.keys(o); // [\"a\", \"d\"]o.propertyIsEnumerable('a'); // trueo.propertyIsEnumerable('b'); // falseo.propertyIsEnumerable('c'); // false ç›¸å½“äºå®šä¹‰äº†enumerableåï¼Œenumerableå¯ä»¥å°†å…¶â€œè—â€èµ·æ¥ï¼Œä¸è¢«å¾ªç¯çœ‹è§ã€‚ é‚£ä¹ˆå±æ€§æè¿°ç¬¦å¯ä»¥ä¿®æ”¹å—ï¼Ÿæ¯”å¦‚åŸæ¥æˆ‘è®¾ç½®äº†writableä¸ºfalse,æˆ‘ç°åœ¨æƒ³æ”¹å˜äº†ã€‚é‚£æˆ‘å¯ä»¥æ›´æ”¹å—ï¼Ÿè¿™å°±åˆæœ‰ä¸€ä¸ªä¸“é—¨çš„å±æ€§æè¿°ç¬¦ã€‚ descriptoræ•°æ®æè¿°ç¬¦-configurable å¦‚æœå±æ€§å·²ç»å­˜åœ¨ï¼ŒObject.defineProperty()å°†å°è¯•æ ¹æ®æè¿°ç¬¦ä¸­çš„å€¼ä»¥åŠå¯¹è±¡å½“å‰çš„é…ç½®æ¥ä¿®æ”¹è¿™ä¸ªå±æ€§ã€‚å¦‚æœæè¿°ç¬¦çš„ configurable ç‰¹æ€§ä¸ºfalseï¼ˆå³è¯¥ç‰¹æ€§ä¸ºnon-configurableï¼‰ï¼Œé‚£ä¹ˆé™¤äº† writable å¤–ï¼Œå…¶ä»–ç‰¹æ€§éƒ½ä¸èƒ½è¢«ä¿®æ”¹ï¼Œå¹¶ä¸”æ•°æ®å’Œå­˜å–æè¿°ç¬¦ä¹Ÿä¸èƒ½ç›¸äº’åˆ‡æ¢ã€‚ å¦‚æœä¸€ä¸ªå±æ€§çš„ configurable ä¸º falseï¼Œåˆ™å…¶ writable ç‰¹æ€§ä¹Ÿåªèƒ½ä¿®æ”¹ä¸º falseã€‚ å¦‚æœå°è¯•ä¿®æ”¹ non-configurable å±æ€§ç‰¹æ€§ï¼ˆé™¤ writable ä»¥å¤–ï¼‰ï¼Œå°†ä¼šäº§ç”Ÿä¸€ä¸ªTypeError å¼‚å¸¸ï¼Œé™¤éå½“å‰å€¼ä¸ä¿®æ”¹å€¼ç›¸åŒã€‚ configurable ç‰¹æ€§è¡¨ç¤ºå¯¹è±¡çš„å±æ€§æ˜¯å¦å¯ä»¥è¢«åˆ é™¤ï¼Œä»¥åŠé™¤ writable ç‰¹æ€§å¤–çš„å…¶ä»–ç‰¹æ€§æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹ã€‚ 12345678910var obj = &#123; &#125;;Object.defineProperty(obj, 'attr', &#123; value: 1, writable: false, configurable: true&#125;);Object.defineProperty(obj, 'attr', &#123; writable: true&#125;);obj.attr = 2; å› ä¸ºconfigurableæ˜¯trueï¼Œæ‰€ä»¥writableå¯ä»¥æ›´æ”¹ã€‚ 123456789101112131415161718192021222324252627282930313233343536var o = &#123;&#125;;Object.defineProperty(o, \"a\", &#123; get : function()&#123;return 1;&#125;, configurable : false&#125; );//å› ä¸ºä¸Šé¢å·²ç»å¯¹aå±æ€§å®šä¹‰äº†configurableä¸ºfalse,æ‰€ä»¥ä¸‹é¢çš„éƒ½æ˜¯é”™è¯¯çš„// throws a TypeErrorObject.defineProperty(o, \"a\", &#123; configurable : true&#125;);// throws a TypeErrorObject.defineProperty(o, \"a\", &#123; enumerable : true&#125;);// throws a TypeError (set was undefined previously)Object.defineProperty(o, \"a\", &#123; set : function()&#123;&#125;&#125;);// throws a TypeError (even though the new get does exactly the same thing)Object.defineProperty(o, \"a\", &#123; get : function()&#123;return 1;&#125;&#125;);// throws a TypeErrorObject.defineProperty(o, \"a\", &#123; value : 12&#125;);console.log(o.a); // logs 1delete o.a; // Nothing happensconsole.log(o.a); // logs 1 å­˜å–æè¿°ç¬¦ä¸Šé¢ä»‹ç»çš„æ˜¯æ•°æ®æè¿°ç¬¦ï¼Œç°åœ¨ä»‹ç»ä¸‹å­˜å–æè¿°ç¬¦ã€‚ 1234567var obj = &#123; &#125;;Object.defineProperty(obj, 'attr', &#123; set: function(val) &#123; this._attr = Math.max(0, val); &#125;, get: function() &#123; return this._attr; &#125;&#125;);obj.attr = -1;console.log(obj.attr); // 0 å°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥åˆ©ç”¨get/setæ¥å¯¹å±æ€§è¿›è¡Œä¸€å®šçš„æ§åˆ¶å’Œæ›´æ”¹ã€‚æˆ‘ä»¬æœ€åé€šè¿‡obj.attrå¾—åˆ°çš„å€¼å…¶å®å°±æ˜¯é€šè¿‡getè¿”å›çš„å€¼ã€‚è€Œæˆ‘ä»¬é€šè¿‡obj.attr = valueï¼Œè®¾ç½®çš„å€¼å…¶å®å°±æ˜¯setçš„å€¼ã€‚ 12345678910111213141516171819202122var pattern = &#123; get: function () &#123; return 'I alway return this string,whatever you have assigned'; &#125;, set: function () &#123; this.myname = 'this is my name string'; &#125;&#125;;function TestDefineSetAndGet() &#123; Object.defineProperty(this, 'myproperty', pattern);&#125;var instance = new TestDefineSetAndGet();instance.myproperty = 'test';// 'I alway return this string,whatever you have assigned'console.log(instance.myproperty);// 'this is my name string'console.log(instance.myname); ä¸Šé¢ä¸€ä¸ªä¾‹å­æ˜¯ä»mdnä¸Šé¢å­¦ä¹ åˆ°çš„ï¼Œä»”ç»†çœ‹ï¼Œå¦‚æœèƒ½çœ‹æ˜ç™½ï¼Œåº”è¯¥å°±èƒ½æ˜ç™½è¿™ä¸ªset/getçš„ç”¨æ³•äº†ã€‚ è·å–å¯¹è±¡æè¿°ç¬¦Object.getOwnPropertyDescriptor å¯ä»¥å¸®åŠ©æˆ‘ä»¬è·å¾—å¯¹è±¡æè¿°ç¬¦ã€‚æ¯”å¦‚æˆ‘ä»¬å®šä¹‰ï¼š1234567891011var obj = &#123;&#125;;Object.defineProperty(obj, attr, &#123; value : 'a', writable : false, configurable : true&#125;)var descriptor = Object.getOwnPropertyDescriptor(obj, attr);console.dir(descriptor); ç»“æœæ˜¯ï¼š{ value: &#39;a&#39;, writable: false, enumerable: false, configurable: true }ã€‚è¿™æ˜¯console.log çš„ç»“æœã€‚console.dir ä¼šæ˜¾ç¤ºçš„å¾ˆå¥½çœ‹ã€‚ æ³¨æ„äº‹é¡¹æ•°æ®æè¿°ç¬¦å’Œå­˜å–æè¿°ç¬¦ä¸èƒ½æ··åˆä½¿ç”¨,å¦åˆ™ä¼šæŠ¥é”™ï¼šTypeError: property descriptors must not specify a value or be writable when a getter or setter has been specifiedã€‚ 123456Object.defineProperty(o, \"conflict\", &#123; value: 'a', get: function() &#123; return 'b'; &#125;&#125;); å®šä¹‰å¤šä¸ªå±æ€§123456789101112var obj = &#123;&#125;;Object.defineProperties(obj, &#123; \"property1\": &#123; value: true, writable: true &#125;, \"property2\": &#123; value: \"Hello\", writable: false &#125; // etc. etc.&#125;); ç”¨é€”è¿™ä¸€éƒ¨åˆ†æ˜¯æˆ‘è§‰å¾—æœ€æœ‰ä»·å€¼çš„ä¸€éƒ¨åˆ†äº†ã€‚æ˜¯æˆ‘åœ¨è¿™ç¯‡æ–‡ç« é‡Œçœ‹åˆ°å¹¶å­¦ä¹ çš„ã€‚æ„Ÿè°¢ã€‚å¯ä»¥ä¼˜åŒ–å¯¹è±¡è·å–å’Œä¿®æ”¹å±æ€§çš„æ–¹å¼ã€‚ä¸‹é¢æˆ‘å°±ç›´æ¥å¼•ç”¨è¿™ä¸ªæ–‡ç« é‡Œçš„æè¿°äº†ã€‚ è¿™ä¸ªä¼˜åŒ–å¯¹è±¡è·å–å’Œä¿®æ”¹å±æ€§æ–¹å¼ï¼Œæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ è¿‡å»æˆ‘ä»¬åœ¨è®¾ç½®domèŠ‚ç‚¹transformæ—¶æ˜¯è¿™æ ·çš„ã€‚12345//åŠ å…¥æœ‰ä¸€ä¸ªç›®æ ‡èŠ‚ç‚¹ï¼Œ æˆ‘ä»¬æƒ³è®¾ç½®å…¶ä½ç§»æ—¶æ˜¯è¿™æ ·çš„var targetDom = document.getElementById('target');var transformText = 'translateX(' + 10 + 'px)';targetDom.style.webkitTransform = transformText;targetDom.style.transform = transformText; é€šè¿‡ä¸Šé¢ï¼Œå¯ä»¥çœ‹åˆ°å¦‚æœé¡µé¢æ˜¯éœ€è¦è®¸å¤šåŠ¨ç”»æ—¶ï¼Œæˆ‘ä»¬è¿™æ ·ç¼–å†™transformå±æ€§æ˜¯ååˆ†è›‹ç–¼çš„ã€‚ ä½†å¦‚æœé€šè¿‡Object.definePropertyï¼Œ æˆ‘ä»¬åˆ™å¯ä»¥123456789101112131415//è¿™é‡Œåªæ˜¯ç®€å•è®¾ç½®ä¸‹translateXçš„å±æ€§ï¼Œå…¶ä»–å¦‚scaleç­‰å±æ€§å¯è‡ªå·±å»å°è¯•Object.defineProperty(dom, 'translateX', &#123; set: function(value) &#123; var transformText = 'translateX(' + value + 'px)'; dom.style.webkitTransform = transformText; dom.style.transform = transformText; &#125;&#125;//è¿™æ ·å†åé¢è°ƒç”¨çš„æ—¶å€™, ååˆ†ç®€å•dom.translateX = 10;dom.translateX = -10;//ç”šè‡³å¯ä»¥æ‹“å±•è®¾ç½®å¦‚scale, originX, translateZ,ç­‰å„ä¸ªå±æ€§ï¼Œè¾¾åˆ°ä¸‹é¢çš„æ•ˆæœdom.scale = 1.5; //æ”¾å¤§1.5å€dom.originX = 5; //è®¾ç½®ä¸­å¿ƒç‚¹X æ€»ç»“ä¸»è¦å°±æ˜¯å­¦ä¹ äº†Object.definePropertyè¿™ä¸ªæ–°çš„ç‰¹æ€§ã€‚å…ˆå‰çŸ¥é“è¿™ä¸ªï¼Œä½†æ˜¯æ²¡æœ‰ä»”ç»†å»å­¦ä¹ ï¼Œæœ€è¿‘åœ¨äº†è§£vueçš„æ—¶å€™ï¼Œå¿½ç„¶æ„Ÿè§‰è¿™ä¸ªè¦å¥½å¥½å­¦ä¸‹äº†ã€‚å› ä¸ºè¿™äº›MVVMå¤§éƒ½æ˜¯é€šè¿‡è¿™ä¸ªæ–°ç‰¹æ€§æ¥å®ç°æ•°æ®ç»‘å®šçš„ã€‚å½“ç„¶angularä¸æ˜¯çš„ï¼Œangularæ˜¯é€šè¿‡è„æ•°æ®ã€‚ä¸‹é¢æ¨èå’Œæ„Ÿè°¢å‡ ç¯‡æ–‡ç« ï¼š MDN-defineProperty es5-property-descriptors IMWEB-ä¸ä¼šObject.definePropertyä½ å°±outäº†","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"ES6","slug":"ES6","permalink":"http://sevencai.github.io/tags/ES6/"}]},{"title":"ç”¨Nodejsè¿›è¡Œæ–‡ä»¶ä¸Šä¼ -ä¸‹è½½-æµè§ˆ-æ¨ªæ‰«File-System-API","slug":"ç”¨Nodejsè¿›è¡Œæ–‡ä»¶ä¸Šä¼ -ä¸‹è½½-æµè§ˆ-æ¨ªæ‰«File-System-API","date":"2016-08-10T13:36:49.000Z","updated":"2016-12-12T03:02:10.000Z","comments":true,"path":"2016/08/10/ç”¨Nodejsè¿›è¡Œæ–‡ä»¶ä¸Šä¼ -ä¸‹è½½-æµè§ˆ-æ¨ªæ‰«File-System-API/","link":"","permalink":"http://sevencai.github.io/2016/08/10/ç”¨Nodejsè¿›è¡Œæ–‡ä»¶ä¸Šä¼ -ä¸‹è½½-æµè§ˆ-æ¨ªæ‰«File-System-API/","excerpt":"","text":"ä»¥å‰çŸ¥é“ç”¨Nodejsè¿›è¡Œä¸Šä¼ ä¸‹è½½æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œç”¨ä¸ªformidableå°±å¯ä»¥äº†ï¼Œä¹Ÿå°±æ²¡æœ‰å»ç®¡å®ƒï¼Œç„¶åæ˜¨å¤©æ™šä¸Šæœ‰ç©ºï¼Œå°±å†™äº†ä¸ªå°demoï¼Œå°±å‘ç°äº†è‡ªå·±çš„ä¸€äº›é—®é¢˜ã€‚æ¯”å¦‚å¯¹File Systemçš„APIä¸ç†Ÿæ‚‰ã€‚ç”¨çš„æ—¶å€™è¿˜è¦å»æŸ¥ã€‚å°¤å…¶æ˜¯å¯¹createReadStream å’Œ writeReadStreamè¿™ä¸€ç±»æµå¤„ç†ä¸ç†Ÿæ‚‰ï¼Œä¸‹é¢æ˜¯æˆ‘çš„æ•´ç†å’Œå­¦ä¹ ã€‚åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªå®Œæ•´çš„demo,æœ‰ä¸Šä¼ ï¼Œæœ‰ä¸‹è½½ï¼Œè¿˜æœ‰æµè§ˆæ–‡ä»¶ã€‚ ä¸Šä¼ ä¸‹è½½å…³äºformidable This module was developed for Transloadit, a service focused on uploading and encoding images and videos. It has been battle-tested against hundreds of GB of file uploads from a large variety of clients and is considered production-ready. å…·ä½“çš„ä¸€äº›ç”¨æ³•ï¼Œå¤§å®¶å¯ä»¥å»è¿™ä¸ªä¸Šé¢å»çœ‹,æ¯”è¾ƒç®€å•äº†ã€‚ä¸€ä¸ªå®˜ç½‘çš„å°demoå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728var formidable = require('formidable'), http = require('http'), util = require('util');http.createServer(function(req, res) &#123; if (req.url == '/upload' &amp;&amp; req.method.toLowerCase() == 'post') &#123; // parse a file upload var form = new formidable.IncomingForm(); form.parse(req, function(err, fields, files) &#123; res.writeHead(200, &#123;'content-type': 'text/plain'&#125;); res.write('received upload:\\n\\n'); res.end(util.inspect(&#123;fields: fields, files: files&#125;)); &#125;); return; &#125; // show a file upload form res.writeHead(200, &#123;'content-type': 'text/html'&#125;); res.end( '&lt;form action=\"/upload\" enctype=\"multipart/form-data\" method=\"post\"&gt;'+ '&lt;input type=\"text\" name=\"title\"&gt;&lt;br&gt;'+ '&lt;input type=\"file\" name=\"upload\" multiple=\"multiple\"&gt;&lt;br&gt;'+ '&lt;input type=\"submit\" value=\"Upload\"&gt;'+ '&lt;/form&gt;' );&#125;).listen(8080); è¿™å°±åŸºæœ¬å·²ç»å®Œæˆä¸Šä¼ çš„åŠŸèƒ½äº†ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥è®©å®ƒæ›´ä¸°å¯Œï¼Œæˆ‘ä»¬ä¸‹é¢åŠ ä¸€ä¸‹é¢„è§ˆæ–‡ä»¶å¹¶ä¸‹è½½çš„åŠŸèƒ½ã€‚è¿™é‡Œé¢æœ‰å‡ ä¸ªå°çŸ¥è¯†ç‚¹å…ˆè§£é‡Šä¸‹ï¼š formä¸Šä¼ çš„æ—¶å€™ï¼Œå¿…é¡»æ˜¯enctype=â€multipart/form-dataâ€è¿™ç§æ ¼å¼ï¼Œå¦åˆ™ä¸Šä¼ ä¸äº†ã€‚ util.inspectæ˜¯nodejsé‡Œé¢utilæ¨¡å—çš„ä¸€ä¸ªæ–¹æ³•ã€‚å®ƒå¯ä»¥å°†ä»»æ„å¯¹è±¡è½¬æ¢ ä¸ºå­—ç¬¦ä¸²çš„æ–¹æ³•ã€‚æ¯”å¦‚è¿™é‡Œå°±æ˜¯æŠŠfieldsé‡Œé¢å’Œfilesä¸¤ä¸ªå¯¹è±¡åˆä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå†è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ util.inheritsåˆ™æ˜¯ä¸€ä¸ªå®ç°å¯¹è±¡é—´åŸå‹ç»§æ‰¿ çš„å‡½æ•°ã€‚æ³¨æ„è¿™ä¸ªæ˜¯åªç»§æ‰¿åŸå‹é‡Œé¢çš„ã€‚åŸæ¥çš„å±æ€§å’Œæ–¹æ³•å¹¶ä¸ä¼šè¢«ç»§æ‰¿ï¼Œä¹Ÿå°±æ˜¯åœ¨function(){thisé‡Œé¢ç”Ÿæˆçš„ä¸ä¼šè¢«ç»§æ‰¿}ï¼Œå¹¶ä¸”ç»§æ‰¿è¿‡æ¥çš„åŸå‹æ–¹æ³•ä¹Ÿä¸ä¼šè¢«è¾“å‡ºã€‚ é¢„è§ˆå’Œä¸‹è½½å¤§æ¦‚åšæˆä»¥åæ˜¯è¿™ä¸ªæ ·å­çš„ã€‚æ ·å­æ˜¯ä¸æ˜¯å¾ˆä¸‘ï¼Œç¡®å®ä¸æƒ³ç®¡æ ·å¼ï¼Œå’±ä»¬è¿˜æ˜¯æ³¨é‡åŠŸèƒ½å§ã€‚ç‚¹å‡»uploadå¯ä»¥ä¸Šä¼ æ–‡ä»¶ï¼Œç‚¹å‡»ä¸‹é¢çš„æ–‡ä»¶å¯ä»¥ç›´æ¥ä¸‹è½½åˆ°æœ¬åœ°ã€‚æ³¨æ„è¿™é‡Œè¦ä¿è¯æ–‡ä»¶ä¸é‡åï¼Œæˆ‘åˆ©ç”¨çš„æ˜¯dateã€‚ ä»£ç å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778\"use strict\";var formidable = require('formidable'), http = require('http'), util = require('util'), fs = require('fs'), path = require('path'), querystring = require('querystring'), url = require('url');http.createServer(function (req, res) &#123; var urlObj = url.parse(req.url); if (urlObj.pathname == '/upload' &amp;&amp; req.method.toLowerCase() == 'post') &#123; var form = new formidable.IncomingForm(); form.encoding = 'utf-8'; form.uploadDir = \"dir/\"; form.maxFieldsSize = 2 * 1024 * 1024; form.keepExtensions = true; form.parse(req, function (err, fields, files) &#123; if (err) &#123; console.log(err); &#125; var name = files.upload.name; var ext = /\\.[^\\.]+$/.exec(name)[0]; var date = new Date(); fs.renameSync(files.upload.path, \"dir\\\\\" + Date.parse(date) + ext); res.writeHead(200, &#123;'Content-Type': 'text/plain;charset=utf-8'&#125;); res.write('received upload: \\n\\n'); res.end(util.inspect(&#123;fields: fields, files: files&#125;)); &#125;); return; &#125; if (urlObj.pathname == '/download') &#123; var query = urlObj.query; var name = querystring.parse(query).name; var downloadFilePath = \"./dir/\" + name; var filesize = fs.readFileSync(downloadFilePath).length; res.setHeader('Content-Disposition', 'attachment;filename=' + name);//æ­¤å¤„æ˜¯å…³é”® res.setHeader('Content-Length', filesize); res.setHeader('Content-Type', 'application/octet-stream'); var fileStream = fs.createReadStream(downloadFilePath, &#123;bufferSize: 1024 * 1024&#125;); fileStream.pipe(res, &#123;end: true&#125;); return; &#125; function send(str) &#123; res.writeHead(200, &#123;'content-type': 'text/html'&#125;); res.end( '&lt;form action=\"/upload\" enctype=\"multipart/form-data\" method=\"post\"&gt;' + '&lt;input type=\"text\" name=\"title\"&gt;&lt;br&gt;' + '&lt;input type=\"file\" name=\"upload\" multiple=\"multiple\"&gt;&lt;br&gt;' + '&lt;input type=\"submit\" value=\"Upload\"&gt;' + '&lt;/form&gt;' + '&lt;br /&gt;&lt;br /&gt;' + str ); &#125; function respond() &#123; var str = \"\"; fs.readdir('dir/', function (err, files) &#123; if (err) return console.error(err); files.forEach(function (file) &#123; str += `&lt;a href='/download?name=$&#123;file&#125;'&gt;$&#123;file&#125;&lt;/a&gt;&lt;br /&gt;`; &#125;); send(str); &#125;); &#125; respond();&#125;).listen(8080); çœ‹ä»£ç åº”è¯¥å¾ˆæ¸…æ¥šäº†ï¼Œæˆ‘ä»¬è¿™é‡Œè°ƒç”¨äº†ä¸€ä¸ªreaddirï¼Œç„¶åéå†é‡Œé¢çš„å›¾ç‰‡ï¼Œæ‹¿åˆ°å›¾ç‰‡çš„åç§°ï¼Œç„¶åå½“ç‚¹å‡»çš„æ—¶å€™ï¼Œå‘èµ·è¯·æ±‚åˆ°downloadï¼Œå¹¶ä¼ é€’è‡ªå·±çš„name,æ”¶åˆ°ä»¥åï¼Œæˆ‘ä»¬æ‰¾åˆ°è¿™ä¸ªå›¾ç‰‡ï¼Œç„¶åè®¾ç½®ä¸‹è½½éœ€è¦çš„ç›¸åº”å¤´å°±è¡Œäº†ã€‚æ³¨æ„ä¸‹è½½é‡Œé¢çš„setHeaderæ˜¯é‡ç‚¹ã€‚è®¾ç½®çš„ç±»å‹æ˜¯Dispositionã€‚ è®°å½•ä¸€ä¸ªæˆ‘çŠ¯çš„é”™è¯¯ï¼ŒæˆåŠŸä»¥åï¼Œå‘ç°æ˜¾ç¤ºä¿¡æ¯ä¸€ç›´æ˜¯ä¹±ç ï¼Œæˆ‘æ£€æŸ¥äº†æ–‡ä»¶éƒ½å·²ç»è¢«è®¾ç½®æˆäº†utf-8,ä¹Ÿè®¾ç½®äº†ç›¸åº”å¤´writeheadæ˜¯utf-8ä¸ºä»€ä¹ˆè¿˜ä¹±ç å‘¢ï¼Ÿåæ¥æ£€æŸ¥ï¼Œæ˜¯{â€˜Content-Typeâ€™: â€˜text/plain;charset=utf-8â€™}è¿™é‡Œçš„charsetå‰é¢çš„åˆ†å·å†™æˆäº†é€—å·ï¼Œä¹Ÿæ˜¯æ— å¥ˆï¼Œéƒ½æ€ªè‡ªå·±ç²—å¿ƒã€‚è°¨è®°ã€‚ ä¸‹é¢å°±å¼€å§‹æŠŠå…¶ä»–çš„å…³äºfileçš„apiç»™æ¢³ç†ä¸€ä¸‹äº†ã€‚ File System ApicreateReadStream &amp;&amp; createWriteStreamä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸¤ä¸ªAPIæ¥æ‹·è´æ–‡ä»¶ã€‚nodejsæ–‡ä»¶æ“ä½œé‡Œé¢æ²¡æœ‰ç›´æ¥æ¥copyæ–‡ä»¶çš„æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥å…ˆç”¨æœ€å¼€å§‹æˆ‘ä»¬çš„æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š12var source = fs.readFileSync('source', &#123;encoding: 'utf8'&#125;);fs.writeFileSync('destination', source); ä½†è¿™å®¹æ˜“äº§ç”Ÿä¸€ä¸ªé—®é¢˜ã€‚å› ä¸ºè¿™ç§æ–¹å¼æ˜¯ä¸€æ¬¡æ€§æŠŠæ–‡ä»¶çš„å†…å®¹å…¨éƒ¨è¯»è¿›å†…å­˜é‡Œé¢ï¼Œä¸€èˆ¬å°ä¸€ç‚¹çš„æ–‡æœ¬æ–‡ä»¶é—®é¢˜ä¸å¤§ï¼Œä½†å¦‚æœæ˜¯å¾ˆå¤§çš„æ–‡ä»¶ï¼Œæ¯”å¦‚éŸ³é¢‘è§†é¢‘ï¼Œä¸€èˆ¬å‡ ä¸ªGçš„ï¼Œè¿™ç§ã€‚å°±å®¹æ˜“ä½¿å†…å­˜çˆ†ä»“ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æµçš„è¯»å†™æ–¹å¼å°±å¾ˆå¥½äº†ã€‚æˆ‘ä»¬å¯ä»¥å…ˆè¯»ä¸€ä¼šï¼Œå†å†™ä¸€ä¼šã€‚123456789101112\"use strict\";var rs = fs.createReadStream('tmp/7.js');var ws = fs.createWriteStream('tmp/9.js');rs.on('data', function(data)&#123; ws.write(data);&#125;);rs.on('end', function()&#123; console.log(\"end of read\"); ws.end();&#125;); ä½†å¾ˆæ˜æ˜¾ï¼Œä¸Šé¢è¿™ä¹Ÿä¼šæœ‰é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘ä»¬è¯»çš„æ—¶å€™é€Ÿåº¦æ˜æ˜¾å¿«äºå†™çš„é€Ÿåº¦æ—¶å€™ï¼Œå°±ä¼šå¯èƒ½äº§ç”Ÿæ•°æ®ä¸¢å¤±æˆ–è€…ä¸å®Œå–„çš„ç°è±¡ã€‚æ‰€ä»¥æˆ‘ä»¬è¦å¯¹è¿™ä¸¤è€…çš„å¹³è¡¡è¿›è¡Œä¸€ä¸ªæ§åˆ¶ã€‚12345678910111213rs.on('data',function(chunk)&#123; if(ws.write(chunk) === false)&#123; rs.pause(); &#125;&#125;);ws.on('drain',function()&#123; rs.resume();&#125;);rs.on('end', function()&#123; ws.end();&#125;); æ‰€ä»¥æˆ‘ä»¬æ”¹æˆä¸Šé¢è¿™æ ·ã€‚ä½†æ˜¯ä¸‹é¢è¿™ç§å†™æ³•åˆ©ç”¨pipeï¼Œå¯ä»¥æ›´ç®€æ´ã€‚pipeå®Œæˆçš„å°±æ˜¯dataå’Œendçš„å·¥ä½œã€‚1fs.createReadStream('tmp/5.js').pipe(fs.createWriteStream('tmp/10.js')); ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸ªè¿™ä¸ªä¾‹å­çš„æ›´è¯¦ç»†çš„ä¾‹å­ã€‚è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªæ‹·è´æ–‡ä»¶çš„ä¾‹å­ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162\"use strict\";var filePath = \"tmp/2.mp3\";var destPath = \"tmp/5.mp3\";var rs = fs.createReadStream(filePath);var ws = fs.createWriteStream(destPath);//è·å–æ–‡ä»¶å¤§å°var stat = fs.statSync(filePath);var totalSize = stat.size;//å½“å‰å·²è¯»å–é•¿åº¦var currentLength = 0;var lastSize = 0;var startTime = Date.now();rs.on('data', function(data)&#123; ws.write(data);&#125;);rs.on('end', function()&#123; console.log(\"end of read\"); ws.end();&#125;);rs.on('data',function(chunk)&#123; currentLength += chunk.length; if(ws.write(chunk) === false)&#123; rs.pause(); &#125;&#125;);ws.on('drain',function()&#123; rs.resume();&#125;);rs.on('end', function()&#123; ws.end();&#125;);var timer = setTimeout(function displayInfo()&#123; var percent = Math.ceil((currentLength / totalSize )*100); var size = Math.ceil(currentLength /1000000); var diff = size - lastSize; lastSize = size; //åˆ©ç”¨äº†process.stdoutè¾“å‡ºä¿¡æ¯ process.stdout.clearLine(); process.stdout.cursorTo(0); process.stdout.write(`å·²å®Œæˆ: $&#123;size&#125;, ç™¾åˆ†æ¯”: $&#123;percent&#125;, é€Ÿåº¦: $&#123;diff*2&#125; MB/s `); if(currentLength &lt; totalSize)&#123; setTimeout(displayInfo,500); &#125;else&#123; clearTimeout(timer); var endTime = Date.now(); console.log(`å…±ç”¨æ—¶: + $&#123;(endTime - startTime) / 1000&#125; s `); &#125;&#125;,500); è¿™é‡Œæˆ‘ä»¬ä¸»è¦å¤„ç†çš„å°±æ˜¯å¯¹æ–‡ä»¶æ‹·è´ç»†èŠ‚çš„å¤„ç†ã€‚è¿™å„éƒ¨åˆ†å…³äºç™¾åˆ†æ¯”å’Œé€Ÿåº¦è¿™å—å­¦ä¹ è‡ªsfçš„ä¸€ç¯‡æ–‡ç« ã€‚æ„Ÿè°¢ï¼Œæ–‡ç« æœ«å°¾æœ‰è¯¥æ–‡ç« çš„é“¾æ¥ã€‚ æ‰€ä»¥å¯¹æµå¤„ç†æˆ‘ä»¬å¯ä»¥ç†è§£æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼š å¯ä»¥æƒ³è±¡ï¼Œå¦‚æœå¤§æ°´æ¯ä¹Ÿå°±æ˜¯streamé‡Œé¢çš„çš„æ°´æµçš„å¤ªå¿«äº†ï¼Œå°æ°´æ¯ä¸ä¹…ä¸€ä¸‹å°±æ»¡äº†ï¼Œæ‰€ä»¥å¤šçš„æ°´å°±æº¢å‡ºå»äº†ã€‚æ‰€ä»¥æˆ‘ä»¬è¿›è¡Œä¸€ä¸ªæ§åˆ¶ã€‚æ°´åœ¨ä¸€ç‚¹ä¸€ç‚¹çš„æµåŠ¨ï¼Œè€Œä¸æ˜¯ä¸€ä¸‹å­å…¨éƒ¨å€’è¿›å»ã€‚è¿™å°±æ˜¯æˆ‘ç†è§£çš„æµã€‚ä¹Ÿä¸çŸ¥é“å¯¹ä¸å¯¹ã€‚å¦‚æœé”™è¯¯è¯·æŒ‡æ­£ã€‚å…¶å®çœŸæ­£çš„å¯ä»¥è¿™ä¹ˆç†è§£ï¼šæˆ‘ä»¬è¯»æ˜¯ä»æ–‡ä»¶è¯»åˆ°å†…å­˜ï¼Œå†™æ˜¯ä»å†…å­˜å†™å…¥ç£ç›˜çš„å¦ä¸€ä¸ªæ–‡ä»¶ã€‚å¦‚æœæˆ‘ä»¬è¯»çš„å¤ªå¿«ï¼Œå†™çš„å¤ªæ…¢ï¼Œä¸œè¥¿æ˜¯ä¸æ˜¯éƒ½è¿˜åœ¨å†…å­˜é‡Œé¢ï¼Ÿæ›´æœ‰ç‚¹åƒä½ ä¹°äº†ä¸œè¥¿ï¼Œä½†æ˜¯ä¸æ¶ˆè´¹ï¼Œå®¶é‡Œé¢å°±è¶Šå †è¶Šå¤šäº†ï¼Œæƒ³æ³•ï¼Œæ€»ä¼šæœ‰æˆ¿å­å¤ªæ»¡æ”¾ä¸ä¸‹çš„æƒ…å†µï¼Œä½†æ˜¯å¦‚æœä½ ä¹°äº†å°±æ¶ˆè´¹å‡ºå»äº†ï¼Œè¿™æ ·ä½ çš„å®¶é‡Œå°±ä¼šä¿æŒå¹³è¡¡å¾ˆå¹²å‡€ï¼Œä½ ä¹Ÿæœ‰æ—¶é—´åœ¨æˆ¿å­é‡Œåšåˆ«çš„äº‹æƒ…ã€‚æ‰€ä»¥å¯¹äºæ°´æ¯ä¹‹å¤–ï¼Œå…¶å®è¿˜æœ‰ä¸­é—´çš„ç®¡å­ï¼Œè¿™ä¸ªç®¡å­å°±ç›¸å½“äºæˆ‘ä»¬è¿™é‡Œçš„å†…å­˜å•¦ã€‚ è¯»å–æ–‡ä»¶readFile/readFileSync12345678910111213141516var fs = require(\"fs\");//å¼‚æ­¥è¯»å–fs.readFile('./input.txt',function(err,data)&#123; if(err)&#123; return console.error(err); &#125; console.log(\"read file input.txt:\" + data.toString());&#125;);//åŒæ­¥è¯»å–var data = fs.readFileSync('./input.txt');console.log(\"sync read :\" + data.toString());console.log(\"after read\"); ç»“æœå¾ˆæ˜æ˜¾ï¼Œåé¢åŒæ­¥çš„å…ˆæ‰§è¡Œï¼Œå‰é¢çš„å¼‚æ­¥ä¼šåæ‰§è¡Œã€‚å› ä¸ºæ–‡ä»¶çš„è¯»å–ä¹Ÿè€—è´¹æ—¶é—´ã€‚ sync read :this is input txt after read read file input.txt:this is input txt æ‰“å¼€æ–‡ä»¶123456fs.open('input.txt','r+',function(err,fd)&#123; if(err)&#123; return console.error(err); &#125; console.log(\"æ–‡ä»¶æ‰“å¼€æˆåŠŸ\");&#125;) æŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯123456fs.stat('input.txt',function(err,stats)&#123; if(err)&#123; return console.error(err); &#125; console.log(stats);&#125;) å†™å…¥æ–‡ä»¶12345678910fs.writeFile('write.txt','æˆ‘æ˜¯å†™å…¥æ–‡ä»¶çš„å†…å®¹',function(err)&#123; if(err)&#123; return console.log(err); &#125; console.log('æ–‡ä»¶å·²å†™å…¥'); fs.readFile('write.txt',function(err,data)&#123; if(err) return console.log(err); console.log('å†™å…¥å†…å®¹ä¸º: ' + data.toString()); &#125;)&#125;); åˆ é™¤æ–‡ä»¶1234fs.unlink('input.txt',function(err)&#123; if(err) return console.error(err); console.log(\"æ–‡ä»¶åˆ é™¤æˆåŠŸ\");&#125;); åˆ›å»ºç›®å½•12345678910111213141516fs.mkdir('tmp/test',function(err)&#123; if(err) return console.error(err); console.log(\"ç›®å½•åˆ›å»ºæˆåŠŸ\"); fs.rmdir('tmp/test',function(err)&#123; if(err) return console.error(err); console.log(\"åˆ é™¤ç›®å½•æˆåŠŸ\"); fs.readdir('tmp',function(err,files)&#123; if(err) return console.error(err); files.forEach(function(file)&#123; console.log(file); &#125;) &#125;) &#125;)&#125;) ç›®å½•åˆ›å»ºæˆåŠŸ åˆ é™¤ç›®å½•æˆåŠŸ 1.js 2.js dirtmp æ›´æ”¹æƒé™12345fs.chmod('tmp/1.js', 0600 ,function(err)&#123; if(err) return console.error(err); console.log(\"ä¿®æ”¹æƒé™æˆåŠŸ\");&#125;); æ–‡ä»¶é‡å‘½å123456789\"use strict\";fs.rename('tmp/5.js','tmp/7.js',function(err)&#123; if(err) throw err; console.log(\"4.js has been renamed\"); fs.stat('tmp/7.js',(err,stat)=&gt;&#123; if(err) throw err; console.log(`stat is : $&#123;JSON.stringify(stat)&#125;`); &#125;);&#125;); åˆ›å»ºç¡¬é“¾æ¥12345678//ç¡¬é“¾æ¥å°±æ˜¯å¤‡ä»½ï¼Œè½¯è¿æ¥å°±æ˜¯å¿«æ·æ–¹å¼fs.link('tmp/3.js','tmp/5.js',function(err)&#123; if(err) return console.error(err); console.log(\"ç¡¬é“¾æ¥åˆ›å»ºæˆåŠŸ\");&#125;);fs.unlink('tmp/3.js'); è·å–æ–‡ä»¶ç»å¯¹è·¯å¾„1234fs.realpath('tmp/2.js',function(err,resolvedPath)&#123; if(err) return console.error(err); console.log(\"æ–‡ä»¶çš„ç»å¯¹è·¯å¾„æ˜¯:\" + resolvedPath);&#125;); æ³¨æ„äº‹é¡¹ç”±äºåˆ©ç”¨äº†å¼‚æ­¥æ–¹æ³•ï¼Œæ‰€ä»¥åœ¨å†™çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„é¡ºåºã€‚æ¯”å¦‚ï¼š1234567891011\"use strict\";fs.rename('tmp/5.js','tmp/7.js',function(err)&#123; if(err) throw err; console.log(\"4.js has been renamed\");&#125;);fs.stat('tmp/7.js',(err,stat)=&gt;&#123; if(err) throw err; console.log(`stat is : $&#123;JSON.stringify(stat)&#125;`);&#125;) ä¼šå¾—åˆ°ï¼š if(err) throw err; ^ Error: ENOENT: no such file or directory, stat &apos;F:\\uploadNodejs\\testFile\\tmp\\7.js&apos; at Error (native) æˆ‘ä»¬åªéœ€è¦æ”¾è¿›å»å°±å¯ä»¥å•¦ã€‚ æ€»ç»“å¿«èŠ±äº†ä¸€å¤©å»å¼„è¿™ä¸ªä¸œè¥¿äº†ï¼Œå…ˆå‰æ€»è¯´é‡åˆ°APIå°±å»æŸ¥ï¼Œä½†æ˜¯æˆ‘æœ‰ç‚¹ä¸åŒæ„ï¼Œå› ä¸ºè¿™æ ·æ•ˆç‡ä¼šå¾ˆä½ã€‚è€Œä¸”ä¼šå¯¼è‡´å˜æ‡’æƒ°çš„åæœã€‚è¿˜æ˜¯è¦å¤šè¿›è¡Œåˆ»æ„çš„ç»ƒä¹ ï¼Œæ‰èƒ½æœ‰è´¨çš„é£è·ƒã€‚è¿™æ˜¯è‡ªå·±æ‰€æ¬ ç¼ºçš„ã€‚ä¸‹é¢æ¨èå‡ ç¯‡æ–‡ç« å’Œé˜…è¯»ï¼Œä¹Ÿæ„Ÿè°¢è¿™äº›ä¼˜ç§€çš„æ–‡ç« ï¼š Nodejs API /api/fs.html http://my.oschina.net/cmw/blog/110107 http://www.runoob.com/nodejs/nodejs-util.html https://segmentfault.com/a/1190000004057022","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"http://sevencai.github.io/tags/Nodejs/"}]},{"title":"yieldå’Œyield*çš„åŒºåˆ«å’Œç”¨æ³•","slug":"yieldå’Œyield-çš„åŒºåˆ«å’Œç”¨æ³•","date":"2016-08-04T01:02:01.000Z","updated":"2016-12-12T03:01:24.000Z","comments":true,"path":"2016/08/04/yieldå’Œyield-çš„åŒºåˆ«å’Œç”¨æ³•/","link":"","permalink":"http://sevencai.github.io/2016/08/04/yieldå’Œyield-çš„åŒºåˆ«å’Œç”¨æ³•/","excerpt":"","text":"å…ˆå‰åœ¨å­¦koaçš„æ—¶å€™ï¼Œå­¦ä¹ åˆ°äº†å¾ˆå¤šæ¦‚å¿µï¼Œæ¯”å¦‚generator,yield,yield *å†æ·±ä¸€ç‚¹ï¼Œæ¯”å¦‚co,trunk,iterator,async,awaitè¿™äº›ã€‚å½“æ—¶å­¦ä¹ çš„æ—¶å€™è¿˜æ˜¯æœ‰å¾ˆå¤šç–‘æƒ‘ã€‚ç°åœ¨åˆé‡æ–°æ•´ç†äº†ä¸€éã€‚æ„Ÿè§‰æ€è·¯æ¸…æ™°äº†å¾ˆå¤šã€‚è®°å½•åˆ†äº«å¦‚ä¸‹ã€‚å¤§éƒ¨åˆ†éƒ½æ¥è‡ªMDNçš„æ•´ç†å’Œå­¦ä¹ ã€‚æ„Ÿè°¢ã€‚æˆ‘è§‰å¾—MDNé‚£ç§å…ˆå®šä¹‰ï¼Œå†è§£é‡Šï¼Œå†è®²ç”¨é€”çš„æ–¹å¼ç‰¹åˆ«å¥½ã€‚å¦‚æœå†åŠ ä¸Šè‡ªå·±æ„Ÿæ€§ç‚¹çš„ç†è§£å°±æ˜¯å¾ˆå®Œç¾çš„å­¦ä¹ æ–°ä¸œè¥¿çš„æ–¹å¼ã€‚ä»¥åè¦å¤šå­¦ä¹ è¿™ç§å­¦ä¸œè¥¿çš„ä¹ æƒ¯ã€‚å¾ˆå¤šæ—¶å€™ï¼Œéƒ½æ˜¯å› ä¸ºå¼€å§‹çš„æ—¶å€™æ²¡æœ‰æŠ“ä½å®šä¹‰ï¼ŒæŠŠæ¡ä½è¿™ä¸ªä¸œè¥¿åˆ°åº•æ˜¯å¹²ä»€ä¹ˆç”¨çš„ï¼Œå¯¼è‡´åˆ°åæ¥è¶Šæ¥è¶Šç³Šæ¶‚ã€‚æ­£ç¡®çš„åšäº‹æƒ…ï¼Œç¬¬ä¸€æ¬¡è™½ç„¶ä¼šèŠ±è´¹å¾ˆé•¿æ—¶é—´ï¼Œä½†æ˜¯åæ¥ä¼šè¶Šæ¥è¶Šå°‘ã€‚ ä»€ä¹ˆæ˜¯yield?yieldçš„å®šä¹‰yield å…³é”®å­—ç”¨æ¥æš‚åœå’Œç»§ç»­ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•° (function* or legacy generator). 1yield [[expression]]; yield å…³é”®å­—ä½¿ç”Ÿæˆå™¨å‡½æ•°æš‚åœæ‰§è¡Œï¼Œå¹¶è¿”å›è·Ÿåœ¨å®ƒåé¢çš„è¡¨è¾¾å¼çš„å½“å‰å€¼. å¯ä»¥æŠŠå®ƒæƒ³æˆæ˜¯ return å…³é”®å­—çš„ä¸€ä¸ªåŸºäºç”Ÿæˆå™¨çš„ç‰ˆæœ¬. yield å…³é”®å­—å®é™…è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä¸¤ä¸ªå±æ€§, value å’Œ done. value å±æ€§ä¸º yield expression çš„å€¼, done æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ç”¨æ¥æŒ‡ç¤ºç”Ÿæˆå™¨å‡½æ•°æ˜¯å¦å·²ç»å…¨éƒ¨å®Œæˆ. ä¸€æ—¦åœ¨ yield expression å¤„æš‚åœ, é™¤éå¤–éƒ¨è°ƒç”¨ç”Ÿæˆå™¨çš„ next() æ–¹æ³•ï¼Œå¦åˆ™ç”Ÿæˆå™¨çš„ä»£ç å°†ä¸èƒ½ç»§ç»­æ‰§è¡Œ. è¿™ä½¿å¾—å¯ä»¥å¯¹ç”Ÿæˆå™¨çš„æ‰§è¡Œä»¥åŠæ¸è¿›å¼çš„è¿”å›å€¼è¿›è¡Œç›´æ¥æ§åˆ¶. ä¸Šé¢ä½ èƒ½å¤Ÿç†è§£ï¼Œæ˜¯å»ºç«‹åœ¨ç¨å¾®çŸ¥é“ä¸€äº›generatorçš„åŸºç¡€ä¸Šçš„ã€‚generatoræˆ‘ä»¬ç§°ä¹‹ä¸ºç”Ÿæˆå™¨ï¼Œå½“ä½ çœ‹åˆ°ä¸€ä¸ªfunction *(){//...}è¿™ç§æœ‰*çš„å‡½æ•°çš„æ—¶å€™ï¼Œä½ å°±å¯ä»¥æŠŠè¿™ä¸ªå‡½æ•°ç§°ä½œgenerator,åœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ï¼Œä½ å¯ä»¥ä½¿ç”¨yieldã€‚ ç…®ä¸ªæ —å­1234567function* foo()&#123; var index = 0; while (index &lt;= 2) // when index reaches 3, // yield's done will be true // and its value will be undefined; yield index++;&#125; 12345var iterator = foo();console.log(iterator.next()); // &#123; value:0, done:false &#125;console.log(iterator.next()); // &#123; value:1, done:false &#125;console.log(iterator.next()); // &#123; value:2, done:false &#125;console.log(iterator.next()); // &#123; value:undefined, done:true &#125; ä¸Šé¢çš„éƒ½æ˜¯æˆ‘ä»MDNä¸Šå­¦ä¹ åˆ°çš„ï¼Œæˆ‘æ²¡æœ‰åšä»»ä½•æ”¹åŠ¨ï¼Œå› ä¸ºæˆ‘è§‰å¾—å®ƒæœ¬èº«çš„ä¾‹å­å°±å¾ˆå¥½ã€‚çœ‹åˆ°è¿™é‡Œï¼Œä½ è‚¯å®šä¼šæƒ³ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆyieldä¼šè·Ÿå¼‚æ­¥æ‰¯ä¸Šå…³ç³»å‘¢ï¼Ÿå› ä¸ºæ‰§è¡Œåˆ°yieldçš„æ—¶å€™ï¼Œæœ¬æ¬¡è°ƒç”¨å°±å·²ç»ç»“æŸäº†ã€‚æ§åˆ¶æƒå·²ç»è½¬åˆ°äº†å¤–éƒ¨nextæ–¹æ³•ã€‚å¹¶ä¸”è°ƒç”¨çš„è¿‡ç¨‹ä¸­æ•´ä¸ªç”Ÿæˆå™¨å†…éƒ¨çŠ¶æ€æ˜¯ä¸€ç›´åœ¨æ”¹å˜çš„ã€‚å¦‚æœå¤–éƒ¨ä¸æ¡ç”¨nextçš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªç”Ÿæˆå™¨å°±åœåœ¨äº†yieldé‚£é‡Œã€‚æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æŠŠå¼‚æ­¥çš„ä¸œè¥¿å…ˆåšå®Œã€‚ç„¶åå†åœ¨åˆé€‚çš„åœ°æ–¹è°ƒç”¨nextæ–¹æ³•ç»§ç»­æ‰§è¡Œè¯¥ç”Ÿæˆå™¨ã€‚å°±å¯ä»¥äº†ã€‚è¿™å°±åƒå‡½æ•°åœ¨æš‚åœï¼Œåé¢åœ¨ç»§ç»­çš„æ„Ÿè§‰ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šå¸¸ç†è§£çš„ä»£ç åˆ†æ®µæ‰§è¡Œäº†ã€‚åœ¨é˜®ä¸€å³°è€å¸ˆçš„es6çš„ä¹¦é‡Œï¼Œä»–æœ‰æåˆ°ï¼Œæ‰€è°“çš„å¼‚æ­¥ï¼Œå°±å¯ä»¥ç†è§£ä¸ºä»£ç åˆ†æ®µæ‰§è¡Œäº†ã€‚å…ˆæ‰§è¡Œäº†ä¸€éƒ¨åˆ†ï¼Œç„¶åè¿™éƒ¨åˆ†æ²¡æœ‰æ‰§è¡Œå®Œï¼Œå°±å¼€å§‹æ‰§è¡Œä¸‹ä¸€éƒ¨åˆ†ã€‚ç­‰åˆ°ç¬¬ä¸€éƒ¨åˆ†æ‰§è¡Œå®Œå†æ¥æ‰§è¡Œå‰©ä½™çš„éƒ¨åˆ†ã€‚è¿™æ ·å°±å¯ä»¥ç†è§£ä¸ºç®€å•çš„å¼‚æ­¥ã€‚åé¢çš„ä»£ç å¹¶æ²¡æœ‰ç­‰å‰é¢çš„ä»£ç æ‰§è¡Œå®Œï¼Œå°±å¼€å§‹æ‰§è¡Œäº†ã€‚ ä½†å®é™…ä¸Šï¼Œæˆ‘ä»¬ä¼šç»å¸¸è¿™ä¹ˆç”¨ï¼š123456789function fetchResult()&#123; return new Promise((resolve,reject)=&gt;&#123; // ... &#125;)&#125;function gen*()&#123; var result = yield fetchResult(); console.log(result);&#125; fetchResultæ˜¯ä¸€ä¸ªå¼‚æ­¥çš„æ“ä½œã€‚æ¯”å¦‚è¿”å›çš„æ˜¯ä¸€ä¸ªPromise,é‚£ä¹ˆå¦‚æœä½ ä¸ç”¨yieldçš„æ—¶å€™ï¼Œlogå‡ºæ¥çš„resultæ˜¯nullï¼Œå› ä¸ºfetchResultæ˜¯å¼‚æ­¥çš„ã€‚è¿™ä¸ªæ—¶å€™ç”¨yieldå°±å¾ˆéœ€è¦äº†ã€‚ æˆ‘ä»¬å¯ä»¥ç”¨yieldæ¥å†™ä¸€ä¸ªæ–æ³¢é‚£å¥‘å‡½æ•°ï¼š123456789101112131415161718function * feb(num)&#123; var count = 0; var current= 1; var last = 0; while(count++ &lt; num)&#123; yield current; var temp = current; current += last; last = temp; &#125;&#125;var f = feb(7),nxt;var arr = [];while(!(nxt = f.next()).done)&#123; arr.push(nxt.value);&#125; æ³¨æ„è¿™é‡Œlastå’Œcountéƒ½æ˜¯ä»0å¼€å§‹çš„ã€‚æœ€åçš„åˆ°ç»“æœï¼šArray [ 1, 1, 2, 3, 5, 8, 13 ]ã€‚å› ä¸ºè¿™é‡Œçš„yieldçš„ä½œç”¨å°±è·Ÿæˆ‘ä»¬é€’å½’æ˜¯å¾ˆåƒå¾ˆåƒçš„ã€‚ é‚£ä¹ˆåœ¨koaé‡Œé¢åˆæ˜¯æ€ä¹ˆç”¨yieldçš„å‘¢ï¼Ÿ12345678910111213141516171819202122232425262728var koa = require('koa');var app = koa();// x-response-timeapp.use(function *(next)&#123; var start = new Date; yield next; var ms = new Date - start; this.set('X-Response-Time', ms + 'ms');&#125;);// loggerapp.use(function *(next)&#123; var start = new Date; yield next; var ms = new Date - start; console.log('%s %s - %s', this.method, this.url, ms);&#125;);// responseapp.use(function *()&#123; this.body = 'Hello World';&#125;);app.listen(3000); åœ¨app.useé‡Œé¢ï¼Œåªæ¥å—æœ‰*çš„generator,åœ¨è¿™ä¸ªé‡Œé¢ï¼Œä½ å¯ä»¥è°ƒç”¨yield nextç»§ç»­å¾€ä¸‹ä¸€ç›´è¿›è¡Œï¼Œç­‰ä¸‹é¢æ²¡æœ‰yieldå¯ä»¥è¿”å›çš„æ—¶å€™ï¼Œå†ä»ä¸‹å¾€ä¸Šæ‰§è¡Œã€‚å…·ä½“koaæ˜¯æ€ä¹ˆå®ç°ä¸­é—´ä»¶çš„ï¼Œå¯ä»¥ç¿»ç¿»åšå®¢é‡Œå¦å¤–ä¸€ç¯‡æ–‡ç« ã€‚ ä»€ä¹ˆæ—¶å€™ç”¨yield *yield *çš„æ¦‚å¿µåœ¨ç”Ÿæˆå™¨ä¸­ï¼Œyield* å¯ä»¥æŠŠéœ€è¦ yield çš„å€¼å§”æ‰˜ç»™å¦å¤–ä¸€ä¸ªç”Ÿæˆå™¨æˆ–è€…å…¶ä»–ä»»æ„çš„å¯è¿­ä»£å¯¹è±¡ã€‚1yield* [[expression]]; yield* ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œå°±ç›¸å½“äºæŠŠè¿™ä¸ªå¯è¿­ä»£å¯¹è±¡çš„æ‰€æœ‰è¿­ä»£å€¼åˆ†æ¬¡ yield å‡ºå»ã€‚ yield* è¡¨è¾¾å¼æœ¬èº«çš„å€¼å°±æ˜¯å½“å‰å¯è¿­ä»£å¯¹è±¡è¿­ä»£å®Œæ¯•æ—¶çš„é‚£ä¸ªè¿”å›å€¼ï¼ˆä¹Ÿå°±æ˜¯è¿­ä»£å™¨çš„è¿­ä»£å€¼çš„ done å±æ€§ä¸º true æ—¶ value å±æ€§çš„å€¼)ã€‚ å¯ä»¥åœ¨å®šä¹‰çœ‹åˆ°ï¼Œyieldæ˜¯æŠŠå€¼å§”æ‰˜ç»™*ä¸€ä¸ªç”Ÿæˆå™¨æˆ–è€…æ˜¯ä¸€ä¸ªå¯ä»¥è¿­ä»£çš„å¯¹è±¡ã€‚ä¸‹é¢ä¸¾å‡ ä¸ªä¾‹å­æ¥è¯´ï¼š å§”æ‰˜ç»™å…¶ä»–ç”Ÿæˆå™¨ä»¥ä¸‹ä»£ç ä¸­ï¼Œg1() yield å‡ºå»çš„æ¯ä¸ªå€¼éƒ½ä¼šåœ¨ g2() çš„ next() æ–¹æ³•ä¸­è¿”å›ï¼Œå°±åƒé‚£äº› yield è¯­å¥æ˜¯å†™åœ¨ g2() é‡Œä¸€æ ·ã€‚1234567891011121314151617181920function* g1() &#123; yield 2; yield 3; yield 4;&#125;function* g2() &#123; yield 1; yield* g1(); yield 5;&#125;var iterator = g2();console.log(iterator.next()); // &#123; value: 1, done: false &#125;console.log(iterator.next()); // &#123; value: 2, done: false &#125;console.log(iterator.next()); // &#123; value: 3, done: false &#125;console.log(iterator.next()); // &#123; value: 4, done: false &#125;console.log(iterator.next()); // &#123; value: 5, done: false &#125;console.log(iterator.next()); // &#123; value: undefined, done: true &#125; å§”æ‰˜ç»™å…¶ä»–ç±»å‹çš„å¯è¿­ä»£å¯¹è±¡é™¤äº†ç”Ÿæˆå™¨å¯¹è±¡è¿™ä¸€ç§å¯è¿­ä»£å¯¹è±¡ï¼Œyield* è¿˜å¯ä»¥ yield å…¶å®ƒä»»æ„çš„å¯è¿­ä»£å¯¹è±¡ï¼Œæ¯”å¦‚è¯´æ•°ç»„ã€å­—ç¬¦ä¸²ã€arguments å¯¹è±¡ç­‰ç­‰ã€‚123456789101112131415function* g3() &#123; yield* [1, 2]; yield* \"34\"; yield* arguments;&#125;var iterator = g3(5, 6);console.log(iterator.next()); // &#123; value: 1, done: false &#125;console.log(iterator.next()); // &#123; value: 2, done: false &#125;console.log(iterator.next()); // &#123; value: \"3\", done: false &#125;console.log(iterator.next()); // &#123; value: \"4\", done: false &#125;console.log(iterator.next()); // &#123; value: 5, done: false &#125;console.log(iterator.next()); // &#123; value: 6, done: false &#125;console.log(iterator.next()); // &#123; value: undefined, done: true &#125; yield* è¡¨è¾¾å¼çš„å€¼1234567891011121314151617181920function* g4() &#123; yield* [1, 2, 3]; return \"foo\";&#125;var result;function* g5() &#123; result = yield* g4();&#125;var iterator = g5();console.log(iterator.next()); // &#123; value: 1, done: false &#125;console.log(iterator.next()); // &#123; value: 2, done: false &#125;console.log(iterator.next()); // &#123; value: 3, done: false &#125;console.log(iterator.next()); // &#123; value: undefined, done: true &#125;, // æ­¤æ—¶ g4() è¿”å›äº† &#123; value: \"foo\", done: true &#125;console.log(result); // \"foo\" å¦‚æœä¸ç”¨yield *?å¥½ï¼Œé‚£å¦‚æœæˆ‘ä»¬æƒ³è¯•ä¸€ä¸‹ä¸ç”¨yield*,è¿˜æ˜¯ç”¨yieldä¼šå¾—åˆ°ä»€ä¹ˆç»“æœå‘¢ï¼Ÿæˆ‘ä»¬æŠŠä¸Šé¢çš„ä»£ç æ”¹æˆè¿™æ ·ï¼š123456789101112131415161718192021function* g1() &#123; yield 2; yield 3; yield 4;&#125;//å»æ‰*åï¼Œçœ‹çœ‹ç»“æœfunction* g2() &#123; yield 1; yield g1(); yield 5;&#125;var iterator = g2();console.log(iterator.next()); console.log(iterator.next()); console.log(iterator.next()); console.log(iterator.next()); console.log(iterator.next());console.log(iterator.next()); æˆ‘ä»¬ä¼šå¾—åˆ°å¦‚ä¸‹çš„ç»“æœï¼š123456Object &#123; value: 1, done: false &#125;Object &#123; value: Generator, done: false &#125;Object &#123; value: 5, done: false &#125;Object &#123; value: undefined, done: true &#125;Object &#123; value: undefined, done: true &#125;Object &#123; value: undefined, done: true &#125; ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸ªç»“æœå‘¢ï¼Ÿè¿™å°±æ˜¯yield *çš„é­”åŠ›äº†ã€‚yield *åé¢å¯ä»¥æ¥å—ä¸€ä¸ªiterable objectï¼Œç„¶åè¿™ä¸ªyield* açš„å€¼ï¼Œå°±æ˜¯è¿™ä¸ªaå®Œæˆæ—¶ï¼Œä¹Ÿå°±æ˜¯çŠ¶æ€done:trueæ—¶çš„açš„è¿”å›å€¼ã€‚å½“ä½ è°ƒç”¨generator functionæ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªgenerator object,è¿™ä¸ªå¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ªiterable objectã€‚ã€yield*è¡¨è¾¾å¼æœ¬èº«çš„å€¼å°±æ˜¯å½“å‰å¯è¿­ä»£å¯¹è±¡è¿­ä»£å®Œæ¯•æ—¶çš„é‚£ä¸ªè¿”å›å€¼ã€‘ã€‚ å…¶å®æœ€å¸¸ç”¨çš„å°±æ˜¯yield*ç”¨æ¥åœ¨ä¸€ä¸ª generator å‡½æ•°é‡Œâ€œæ‰§è¡Œâ€å¦ä¸€ä¸ª generator å‡½æ•°ï¼Œå¹¶å¯ä»¥å–å¾—å…¶è¿”å›å€¼ã€‚ è¿™é‡Œè¿˜å¯ä»¥æ‰¯ä¸€äº›å…³äºcoçš„äº‹æƒ…ã€‚ä½ ä¼šå‘ç°åœ¨coé‡Œé¢ï¼Œä½ æ˜¯å¯ä»¥ç›´æ¥yield ä¸€ä¸ªgeneratorçš„ï¼Œæ›´å¯æ€•çš„æ˜¯è¿˜å¯ä»¥yieldä¸€ä¸ªgenerator functionçš„ã€‚è¿™é‡Œé¢æ¥æºè‡ªcoåœ¨å®ç°çš„æ—¶å€™è¿›è¡Œäº†åˆ¤æ–­ã€‚1if (isGeneratorFunction(obj) || isGenerator(obj)) return co.call(this, obj); å½“å®ƒåˆ¤æ–­å‡ºæ¥ä½ æ˜¯ä¸€ä¸ªgenerator functionçš„æ—¶å€™ï¼Œæ˜¯ä¼šç»§ç»­çš„è°ƒç”¨è‡ªå·±çš„ã€‚åœ¨coé‡Œï¼Œå¦‚æœæ˜¯yield *fnå·®ä¸å¤šå°±ç­‰äºyield co(fn) coé‡Œé¢æ˜¯å¾ˆæ£’çš„ä»£ç ã€‚å†³å®šè¿™ä¸ªæ˜ŸæœŸå†ä»”ç»†å­¦ä¸€éã€‚ç„¶åæ•´ç†ä¸‹ï¼Œå˜»å˜»ã€‚ è§‚ç‚¹è¿™é‡Œæœ‰å‡ ä¸ªè§‚ç‚¹å’ŒæŠ€å·§ï¼Œæ˜¯æˆ‘çŠ¯è¿‡çš„é”™è¯¯ã€‚æ€»ç»“ä¸‹ï¼š yieldåé¢åªèƒ½æ¥generator?é”™è¯¯ï¼Œæ¯”å¦‚ä½ çœ‹åˆ°yield fun(),é‚£ä¹ˆè¿™ä¸ªfun()çš„è¿”å›ä¸€å®šæ˜¯generatorå—ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼›funæ–¹æ³•å®Œå…¨å¯ä»¥è¿”å›ä¸€ä¸ª Promiseï¼Œè¿”å›ä¸€ä¸ª thunkï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ã€å¯¹è±¡ï¼Œæˆ–è€…å°±æ˜¯è¿”å›generator objectã€‚yieldåé¢å¯ä»¥æ¥çš„å€¼ï¼Œè¦å¤šæ³¨æ„å®¹æ˜“çŠ¯é”™ã€‚ æ¯”å¦‚è¯´ä½ çœ‹åˆ°äº†yield * fun(),yield * åé¢è¿™ä¸ªfunçš„è¿”å›å€¼ä¸€å®šæ˜¯generator object?yield*åé¢å¯ä»¥æ¥å¾ˆå¤šï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬è¿™é‡Œç»™çš„å‰ææ¡ä»¶æ˜¯yield*æ‰€ä»¥æ˜¯å¯ä»¥åˆ¤å®šçš„ã€‚è¿™ä¸ªæ˜¯è‚¯å®šçš„å•¦ã€‚ä½ å¯ä»¥å¾ˆè‡ªä¿¡çš„å‘Šè¯‰åˆ«äººè¿™å°±æ˜¯generator objectã€‚ ç”Ÿæˆå™¨å…¶å®åœ¨å…¶å®ƒè¯­è¨€å¾ˆæ—©å°±æœ‰äº†ï¼Œæ¯”å¦‚pythonã€c#ï¼Œä½†ä¸pythonä¸åŒçš„æ˜¯jsçš„generatoræ›´å¤šçš„æ˜¯æä¾›ä¸€ç§å¼‚æ­¥è§£å†³æ–¹æ¡ˆã€‚yieldä¹Ÿæ˜¯ï¼Œåœ¨pythonä¸­éƒ½æœ‰ã€‚ yieldåªèƒ½åœ¨koaé‡Œç”¨ï¼Ÿå½“ç„¶ä¸æ˜¯ã€‚koaé‡Œé¢åªæ˜¯åˆ©ç”¨yieldï¼Œgeneratorè¿™ç§æ–¹å¼ã€‚yieldï¼Œgeneratorçš„ç”¨å¤„å¯å¤§äº†å¤šäº†ã€‚ æ€»ç»“ä¸»è¦å°±æ˜¯å­¦ä¹ äº†yield å’Œyield *çš„åŒºåˆ«å’Œè”ç³»ï¼Œè¿˜æœ‰ä»–ä»¬çš„ä½¿ç”¨æ–¹å¼ã€‚å‚è€ƒäº†ä¸‹é¢çš„å‡ ç¯‡æ–‡ç« ï¼Œæ„Ÿè°¢ï¼š MDN-Operators/yield MDN-Operators/yield* Understanding-the-Yield-principle","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"ES6 rest parameterså’Œspread operator","slug":"ES6-rest-parameterså’Œspread-operator","date":"2016-08-03T01:04:51.000Z","updated":"2017-02-10T03:47:58.000Z","comments":true,"path":"2016/08/03/ES6-rest-parameterså’Œspread-operator/","link":"","permalink":"http://sevencai.github.io/2016/08/03/ES6-rest-parameterså’Œspread-operator/","excerpt":"","text":"è¿™ç¯‡æ–‡ç« ä¸»è¦è®°å½•å’Œå­¦ä¹ Rest parameterså’ŒSpread Operatorçš„åŒºåˆ«å’Œè”ç³»ã€‚ä»Šå¤©æˆ‘å»äº†è§£äº†ä¸‹å…³äºRestè§£æ„èµ‹å€¼/æ‰©å±•è¿ç®—ç¬¦çš„ç”¨æ³•å’ŒåŒºåˆ«ã€‚ä¸»è¦æ˜¯å¼€å§‹çš„æ—¶å€™å®¹æ˜“å¼„æ··æ·†ã€‚æ‰€ä»¥æƒ³è¦è®°å½•å’Œå­¦ä¹ ä¸‹æ¥ã€‚ä¹Ÿåˆ†äº«ç»™å¤§å®¶ã€‚ Peviewif you donâ€™t use rest parameter Aggregation of remaining arguments into single parameter of variadic functions. 123456function f(x, y) &#123; var a = Array.prototype.slice.call(arguments, 2); return (x+y) * a.length;&#125;f(1, 3, \"hello\", true, 7); å¦‚æœä½¿ç”¨Rest Parameterå°±ä¼šç®€å•å¾ˆå¤šï¼š 12345function f(x, y, ...a)&#123; return (x+y) * a.length;&#125;f(1, 3, \"hello\", true, 7); If you donâ€™t use spread operator Spreading of elements of an iterable collection (like an array or even a string) into both literal elements and individual function parameters. 1234567var params = [\"hello\", true, 7];var extends = [1, 3].concat(params);f.apply(undefined, [1, 3].concat(params)); //å› ä¸ºextendsæ˜¯æ•°æ®çš„åŸå› ï¼Œæ‰€ä»¥ç”¨applyvar str = \"Seven\";var chars = str.split(\"\"); //[\"S\", \"e\", \"v\", \"e\", \"n\"] å¦‚æœä½¿ç”¨spread operatorçš„è¯ï¼š123456var params = [\"hello\", true, 7];var extends = [1, 3, ...params];f(1,3, ...params);var str = \"Seven\";var chars = [...str]; //[\"S\", \"e\", \"v\", \"e\", \"n\"] ä¸‹é¢å…·ä½“çœ‹ä¸‹ä¸¤ç§æ–°çš„ Extended Parameter Handlingã€‚ Rest parameters The rest parameter syntax allows us to represent an indefinite number of arguments as an array. åœ¨ES6çš„æ–°ç‰¹æ€§ä¸­ï¼ŒRest parameterså¯ä»¥ä¸ºæˆ‘ä»¬å¸¦æ¥å¾ˆå¤šæ–¹ä¾¿çš„åœ°æ–¹ã€‚å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å»æŠŠä¸€ç³»åˆ—ä¸ç¡®å®šä¸ªæ•°çš„å‚æ•°è½¬æ¢æˆæ•°ç»„ã€‚ Rest parametersçš„è¯­æ³•123function(a, b, ...theArgs) &#123; // ...&#125; æ¯”å¦‚æˆ‘ä»¬ä¼ å…¥ fun(1,2,3,4),é‚£ä¹ˆaå°†ä¸º1ï¼Œbå°†ä¸º2ï¼ŒtheArgså°†ä¸º[3,4]ã€‚ argumentså’Œrest parametersçš„åŒºåˆ«åŒºåˆ«ä¸»è¦æœ‰ä¸‹é¢ä¸‰ç‚¹ï¼š rest parameters are only the ones that havenâ€™t been given a separate name, while the arguments object contains all arguments passed to the function; the arguments object is not a real array, while rest parameters are Array instances, meaning methods like sort, map, forEach or pop can be applied on it directly; the arguments object has additional functionality specific to itself (like the callee property).-FROM MDN =&gt; rest_parameters æˆ‘è§‰å¾—è®²çš„å¾ˆæ¸…æ¥šäº†ã€‚å…·ä½“æ€ä¹ˆä½¿ç”¨ï¼Œæˆ‘ä»¬çœ‹ä¸‹é¢çš„å‡ ä¸ªä¾‹å­æ¥æ›´å¥½çš„ç†è§£è¿™äº›åŒºåˆ«ã€‚ ç…®å‡ ä¸ªæ —å­12345678910function sum() &#123; var numbers = Array.prototype.slice.call(arguments), result = 0; numbers.forEach(function (number) &#123; result += number; &#125;); return result;&#125;console.log(sum(1)); // 1console.log(sum(1, 2, 3, 4, 5)); // 15 ä¸Šé¢æ˜¯æˆ‘ä»¬æœ€é•¿çœ‹åˆ°çš„ä¸€ä¸ªç›¸åŠ å‚æ•°çš„æ–¹æ³•ã€‚ç”±äºargumentsä¸æ˜¯æ•°ç»„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨å‰è¦å…ˆå°†ä»–è½¬æ¢æˆæ•°ç»„ã€‚æˆ‘ä»¬å†çœ‹çœ‹restçš„å†™æ³•ã€‚123456789function sum(â€¦numbers) &#123; var result = 0; numbers.forEach(function (number) &#123; result += number; &#125;); return result;&#125;console.log(sum(1)); // 1console.log(sum(1, 2, 3, 4, 5)); // 15 ç”±äºä½¿ç”¨â€¦numbersçš„å‚æ•°å°±å·²ç»æ˜¯è¢«è½¬æ¢æˆæ•°ç»„äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ å†çœ‹ä¸ªå‡ ä¸ªå¯ä»¥ç›´æ¥ä½¿ç”¨restçš„ä¾‹å­ã€‚12345678function multiply(multiplier, ...theArgs) &#123; return theArgs.map(function (element) &#123; return multiplier * element; &#125;);&#125;var arr = multiply(2, 1, 2, 3); console.log(arr); // [2, 4, 6] ä¸Šé¢çœ‹ä¸¤ä¸ªåœ°æ–¹ï¼Œç¬¬ä¸€æ˜¯ä¼ å‚æ•°æ˜¯ä»ç¬¬äºŒä¸ªå¼€å§‹ä¼ çš„ã€‚1234567891011121314function sortRestArgs(...theArgs) &#123; var sortedArgs = theArgs.sort(); return sortedArgs;&#125;console.log(sortRestArgs(5,3,7,1)); // shows 1,3,5,7function sortArguments() &#123; var sortedArgs = arguments.sort(); return sortedArgs; // this will never happen&#125;// throws a TypeError: arguments.sort is not a functionconsole.log(sortArguments(5,3,7,1)); å†ä¸¾ä¸€ä¸ªç»å¸¸è§åˆ°çš„ä¾‹å­ï¼š12345function logArguments() &#123; for (var i=0; i &lt; arguments.length; i++) &#123; console.log(arguments[i]); &#125;&#125; ä¸‹é¢æ˜¯æ›´å¥½çš„ä¸€ç§å†™æ³•ï¼š12345function logArguments(...args) &#123; for (let arg of args) &#123; console.log(arg); &#125;&#125; å¥½ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ è‚¯å®šå¾ˆæ¸…æ¥šï¼Œä¸è¿‡ä¼°è®¡è¿‡ä¸€ä¼šå¯èƒ½ä¼šæ··æ·†äº†ï¼Œå°±åƒæˆ‘ä¸€æ ·ã€‚ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹spreadã€‚ Spread_operatorspreadçš„åŸºæœ¬è¯­æ³•ç”¨äºå‡½æ•°è°ƒç”¨:1myFunction(...iterableObj); ç”¨äºæ•°ç»„å­—é¢é‡:1[...iterableObj, 4, 5, 6] ä¹Ÿå°±æ˜¯è¯´spreadæœ‰ä¸¤ç§æƒ…å†µã€‚ä¸€ä¸ªæ˜¯åœ¨å‡½æ•°ä¸­ä½¿ç”¨çš„æƒ…å†µã€‚ä¸€ä¸ªæ˜¯åœ¨æ•°ç»„å­—é¢é‡çš„æƒ…å†µã€‚åœ¨å‡½æ•°ä¸­å°±ç›¸å½“äºæ˜¯åˆ†å‰²æˆå•ä¸ªå‚æ•°ï¼Œåœ¨æ•°ç»„ä¸­æ˜¯ç»„æˆä¸€ä¸ªæ›´å¤§çš„æ•°ç»„ã€‚ spreadå’Œrest parameterçš„åŒºåˆ«spreadå’Œrest parameterséå¸¸åƒã€‚å› ä¸ºå®ƒä»¬éƒ½æœ‰â€¦è¿™ä¸ªè¡¨è¾¾å¼ã€‚ä½†æ˜¯å®ƒä»¬å‡ ä¹æ˜¯ç›¸åçš„æ“ä½œã€‚spread å¯ä»¥æŠŠä¸€ä¸ªæ•°ç»„åˆ†å‰²æˆå•ä¸ªçš„å‚æ•°ã€‚ç„¶åä¼ é€’ç»™å‡½æ•°ã€‚è€Œåˆšåˆšæˆ‘ä»¬è®²çš„reståˆ™æ˜¯æŠŠå•ä¸ªçš„å‚æ•°è½¬æ¢æˆæ•°ç»„ä¼ é€’ä¸‹å»ã€‚ è¿˜æœ‰ä¸€ç§æ“ä½œç¬¦å«åšå‰©ä½™æ“ä½œç¬¦ï¼ˆthe rest operatorï¼‰ï¼Œå®ƒçš„æ ·å­çœ‹èµ·æ¥å’Œå±•å¼€æ“ä½œç¬¦ä¸€æ ·ï¼Œä½†æ˜¯å®ƒæ˜¯ç”¨äºè§£æ„æ•°ç»„å’Œå¯¹è±¡ã€‚åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œå‰©ä½™å…ƒç´ å’Œå±•å¼€å…ƒç´ ç›¸åï¼Œå±•å¼€å…ƒç´ ä¼šâ€œå±•å¼€â€æ•°ç»„å˜æˆå¤šä¸ªå…ƒç´ ï¼Œå‰©ä½™å…ƒç´ ä¼šæ”¶é›†å¤šä¸ªå…ƒç´ å’Œâ€œå‹ç¼©â€æˆä¸€ä¸ªå•ä¸€çš„å…ƒç´ ã€‚ 12345function sum(a, b, c) &#123; return a + b + c;&#125;var args = [1, 2, 3];console.log(sum(â€¦args)); // 6 ä½†æ˜¯åœ¨ES5ä¸­æˆ‘ä»¬ä¸€èˆ¬æ˜¯è¿™ä¹ˆåšçš„ï¼š12345function sum(a, b, c) &#123; return a + b + c;&#125;var args = [1, 2, 3];console.log(sum.apply(undefined, args)); // 6 å› ä¸ºapplyå¯ä»¥å¸®åŠ©æˆ‘ä»¬æŠŠæ•°ç»„å˜æˆå•ä¸ªçš„å‚æ•°ã€‚è¿™æ ·æ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿äº†ã€‚12345function sum(a, b, c) &#123; return a + b + c;&#125;var args = [1, 2];console.log(sum(â€¦args, 3)); // 6 ä¹Ÿå¯ä»¥åƒä¸Šé¢ä¸€æ ·æ··æ·†ç€å†™ã€‚æ‰€ä»¥æˆ‘ä»¬æ€»ç»“ä¸‹ã€‚ æ›´å¥½çš„applyæˆ‘ä»¬éƒ½æ˜¯ä½¿ç”¨Function.prototype.applyæ–¹æ³•æ¥å°†ä¸€ä¸ªæ•°ç»„å±•å¼€æˆå¤šä¸ªå‚æ•°:123function myFunction(x, y, z) &#123; &#125;var args = [0, 1, 2];myFunction.apply(null, args); ç”¨äº†å±•å¼€ç¬¦æˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š123function myFunction(x, y, z) &#123; &#125;var args = [0, 1, 2];myFunction(...args); ä¹Ÿå¯ä»¥å±•å¼€å¤šä¸ªï¼š123function myFunction(v, w, x, y, z) &#123; &#125;var args = [0, 1];myFunction(-1, ...args, 2, ...[3]); æ›´å¼ºå¤§çš„æ•°ç»„å­—é¢é‡å¦‚æœåœ¨å·²æœ‰çš„æ•°ç»„ä¸­çš„æŸä¸ªéƒ¨åˆ†æ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œé€šå¸¸ä¼šç”¨åˆ°pushï¼Œspliceï¼Œconcat ç­‰æ•°ç»„æ–¹æ³•ã€‚æœ‰äº†æ‰©å±•è¿ç®—ç¬¦ä¼šè®©ä»£ç æ›´ç®€æ´:12var parts = ['shoulder', 'knees'];var lyrics = ['head', ...parts, 'and', 'toes']; // [\"head\", \"shoulders\", \"knees\", \"and\", \"toes\"] æ›´å¥½çš„ push æ–¹æ³•1234var arr1 = [0, 1, 2];var arr2 = [3, 4, 5];// å°†arr2ä¸­çš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°arr1ä¸­Array.prototype.push.apply(arr1, arr2); ä¸Šé¢æ˜¯æˆ‘ä»¬ä¸€èˆ¬å°†æ•°ç»„pushæ·»åŠ åˆ°ä¸€ä¸ªæ•°ç»„çš„æƒ…å†µã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬ä½¿ç”¨spreadæ“ä½œç¬¦ã€‚123var arr1 = [0, 1, 2];var arr2 = [3, 4, 5];arr1.push(...arr2); å°†ç±»æ•°ç»„å¯¹è±¡è½¬æ¢æˆæ•°ç»„12var nodeList = document.querySelectorAll('div');var array = [...nodeList]; ä¸¾å‡ ä¸ªå¾ˆå¸¸ç”¨çš„ä¾‹å­å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œè¦æ±‚å®ƒçš„æœ€å¤§å€¼ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šè¿™ä¹ˆåšï¼š123var myArr = [5,3,9];Math.max(myArr); // NaNMath.max.apply(Math,myArr); // 9 ä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯åˆ©ç”¨applyå¯ä»¥æŠŠæ•°ç»„è½¬æ¢ä¸ºå•ä¸ªå‚æ•°ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š12var myArr = [5,3,9];Math.max(...myArr); //9 æ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Ÿè¿˜æœ‰ä¸€ä¸ªä¼˜ç‚¹ï¼šæ‰©å±•è¿ç®—ç¬¦æ”¯æŒæ„é€ å‡½æ•°ï¼š123new Date(...[2016, 5, 6]);new Date.apply(null, [2016, 8, 2]); // TypeError: Date.apply is not a constructornew (Function.prototype.bind.apply(Date, [null].concat([2016, 8, 2]))); //Date 2016-09-01T16:00:00.000Z æ€»ç»“ä¸»è¦æ˜¯äº†è§£äº†ES6çš„è¿™ä¸¤ä¸ªæ–°ç‰¹æ€§ã€‚æˆ‘è§‰å¾—å¾ˆå¥½ç”¨ã€‚ä¸è¿‡éƒ½æ˜¯è¦åˆ»æ„çš„å»ç”¨æ‰æœ‰ç†Ÿæ‚‰çš„è¿‡ç¨‹ã€‚å¦åˆ™ä¼°è®¡è¿‡ä¸äº†å¤šä¹…å°±å¿˜è®°å•¦ã€‚å¤§éƒ¨åˆ†æ•´ç†å’Œå­¦ä¹ è‡ªMDNã€‚æ„Ÿè°¢ã€‚MDN - Spread_operator","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"ES6","slug":"ES6","permalink":"http://sevencai.github.io/tags/ES6/"}]},{"title":"ES6 Symbol ! Why ? How ? When ? ","slug":"ES6-Symbol-Why-How-When","date":"2016-08-01T03:45:21.000Z","updated":"2017-01-11T12:47:59.000Z","comments":true,"path":"2016/08/01/ES6-Symbol-Why-How-When/","link":"","permalink":"http://sevencai.github.io/2016/08/01/ES6-Symbol-Why-How-When/","excerpt":"","text":"å‰å‡ å¤©çœ‹å°èƒ¡å­å“¥çš„ç½‘ç«™ï¼Œå‘ç°è¿™ä¹ˆä¸€ç¯‡æ–‡ç« é‡Œé¢æœ‰ä¸‹é¢è¿™æ ·ä¸€äº›ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°è¿™æ®µä»£ç é‡Œé¢ç”¨äº†å¾ˆå¤šES6çš„æ–°ç‰¹æ€§ï¼Œæ¯”å¦‚import,class,extends,static,for..ofå¾ªç¯,è¿˜æœ‰ä¸‹é¢è¦è®²çš„Symbolã€‚å…ˆå‰çŸ¥é“symbolä½†æ˜¯ä¸€ç›´æ²¡æœ‰å»ç”¨è¿‡å®ƒï¼Œå…¶å®ä¹Ÿå¹¶ä¸çŸ¥é“åˆ°åº•æœ‰ä»€ä¹ˆå®è´¨çš„ä½œç”¨ï¼ŒåªçŸ¥é“æ˜¯ç®€å•çš„åˆ›å»ºå”¯ä¸€å€¼ã€‚è§‰å¾—æ˜¯æ—¶å€™å¥½å¥½ç†è§£ç†è§£äº†ã€‚ä¸»è¦å­¦ä¹ è‡ªé˜®ä¸€å³°è€å¸ˆçš„ä¹¦ï¼Œes6å…¥é—¨ã€‚æ„Ÿè°¢é˜®è€å¸ˆã€‚ 123456789101112131415161718192021222324252627import Baz from 'bazGroup';class Foo extends Baz &#123; static classMethod() &#123; return 'hello'; &#125; constructor(...args) &#123; this.args = args; &#125; * [Symbol.iterator]() &#123; for (let arg of this.args) &#123; yield arg; &#125; &#125;&#125;class Bar extends Foo &#123; static classMethod() &#123; return super.classMethod() + ', too'; &#125;&#125;Bar.classMethod();for (let x of new Foo('hello', 'world')) &#123; console.log(x);&#125; ä¸‹é¢ä»å‡ ä¸ªæ–¹é¢ä»‹ç»ï¼šSymbolæ˜¯ä»€ä¹ˆï¼ŸSymbolçš„å‡ºç°åŸå› ï¼ŸSymbolæ€ä¹ˆç”¨ ï¼ŸSymbolæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ Symbolçš„å‡ºç°Symbolæ˜¯ä»€ä¹ˆSymbolæ˜¯ES6æ–°å¼•å…¥çš„ä¸€ç§æ•°æ®ç±»å‹ã€‚å®ƒæ˜¯JavaScriptè¯­è¨€çš„ç¬¬ä¸ƒç§æ•°æ®ç±»å‹ï¼Œå‰é¢6ç§æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„ï¼šUndefinedã€Nullã€å¸ƒå°”å€¼ï¼ˆBooleanï¼‰ã€å­—ç¬¦ä¸²ï¼ˆStringï¼‰ã€æ•°å€¼ï¼ˆNumberï¼‰ã€å¯¹è±¡ï¼ˆObjectï¼‰ã€‚ æŠ“ä½ï¼Œç¬¬ä¸€å®ƒæ˜¯ä¸€ç§æ–°çš„æ•°æ®ç±»å‹ï¼Œå®ƒä¸æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿä¸æ˜¯å¯¹è±¡ã€‚ç¬¬äºŒæ˜¯ä¸€ç§ç‰¹æ®Šçš„ã€ä¸å¯å˜çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥ä½œä¸ºå¯¹è±¡å±æ€§çš„æ ‡è¯†ç¬¦ä½¿ç”¨ã€‚ è¦æ³¨æ„ä¸€æ—¦åˆ›å»ºåå°±ä¸å¯æ›´æ”¹ï¼Œä¸èƒ½å¯¹å®ƒä»¬è®¾ç½®å±æ€§ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å°è¯•è¿™æ ·åšï¼Œä½ å°†å¾—åˆ°ä¸€ä¸ª æŠ¥é”™å¾—åˆ°TypeErrorã€‚å®ƒä»¬å¯ä»¥ä½œä¸ºå±æ€§åï¼Œè¿™æ—¶å®ƒä»¬å’Œå­—ç¬¦ä¸²çš„å±æ€§åæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚å¦ä¸€æ–¹é¢ï¼Œæ¯ä¸ª Symbol éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä¸ä¸å…¶å®ƒ Symbol é‡å¤ï¼ˆå³ä¾¿æ˜¯ä½¿ç”¨ç›¸åŒçš„ Symbol æè¿°åˆ›å»ºï¼‰ã€‚ æˆ‘æœ‰çœ‹åˆ°ä¸€äº›ä¹¦é‡Œè¯´è¿™é‡Œçš„Symbolå’ŒLispå’ŒRubyé‡Œé¢çš„Symbolç±»ä¼¼ï¼Œä½†æ˜¯ä¸å®Œå…¨ä¸€æ ·ã€‚ä»–ä»¬è§£é‡Šè¯´ã€‚åœ¨ Lisp ä¸­ï¼Œæ‰€æœ‰æ ‡è¯†ç¬¦éƒ½æ˜¯ Symbolï¼›åœ¨ JavaScript ä¸­ï¼Œæ ‡è¯†ç¬¦å’Œå¤§å¤šæ•°å±æ€§ä»ç„¶æ˜¯å­—ç¬¦ä¸²ï¼ŒSymbol åªæ˜¯æä¾›äº†ä¸€ä¸ªé¢å¤–çš„é€‰æ‹©ã€‚å› ä¸ºæˆ‘æ²¡æœ‰ç”¨è¿‡Lispå’ŒRubyå½“ç„¶ä¹Ÿå°±æ²¡æœ‰å‘è¨€æƒäº†ã€‚23333 Symbolå‡ºç°çš„åŸå›  ES5çš„å¯¹è±¡å±æ€§åéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™å®¹æ˜“é€ æˆå±æ€§åçš„å†²çªã€‚æ¯”å¦‚ï¼Œä½ ä½¿ç”¨äº†ä¸€ä¸ªä»–äººæä¾›çš„å¯¹è±¡ï¼Œä½†åˆæƒ³ä¸ºè¿™ä¸ªå¯¹è±¡æ·»åŠ æ–°çš„æ–¹æ³•ï¼ˆmixinæ¨¡å¼ï¼‰ï¼Œæ–°æ–¹æ³•çš„åå­—å°±æœ‰å¯èƒ½ä¸ç°æœ‰æ–¹æ³•äº§ç”Ÿå†²çªã€‚å¦‚æœæœ‰ä¸€ç§æœºåˆ¶ï¼Œä¿è¯æ¯ä¸ªå±æ€§çš„åå­—éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„å°±å¥½äº†ï¼Œè¿™æ ·å°±ä»æ ¹æœ¬ä¸Šé˜²æ­¢å±æ€§åçš„å†²çªã€‚è¿™å°±æ˜¯ES6å¼•å…¥Symbolçš„åŸå› ã€‚ â€“ from é˜®ä¸€å³°è€å¸ˆ ç„¶ååœ¨stackoverflow-why-bring-symbols-to-javascriptä¸Šé¢ä¹Ÿçœ‹åˆ°äº†ä¸€ä¸ªè§£é‡Šï¼Œæˆ‘è§‰å¾—ä¹Ÿå¾ˆå¥½ï¼Œå› ä¸ºä¹Ÿå‘Šè¯‰äº†æˆ‘ä»¬ï¼ŒSymbolå…¶å®å¹¶ä¸èƒ½å®Œå…¨çš„å»ä¿æŠ¤æˆå‘˜å˜é‡çš„privacy,è¿˜å‘Šè¯‰æˆ‘ä»¬ç°åœ¨ä¸»è¦çš„ç”¨é€”å°±æ˜¯uniqueã€‚ Enabling private properties, like kangax describes in his answer, was indeed the original motivation for introducing symbols into JavaScript. Unfortunately, however, they ended up being severely downgraded, and not private after all, because you can find them via reflection. Specifically, via the Object.getOwnPropertySymbols method and through proxies. They are now known as unique symbols, and their only use is to avoid name clashes between properties. For example, EcmaScript itself can now introduce extension hooks via certain methods you can put on objects (e.g. to define their iteration protocol) without running the risk of clashing with user names. Whether that is strong enough a motivation to add symbols to the language is debatable. Symbolæ€ä¹ˆç”¨ï¼ŸSymbolå€¼é€šè¿‡Symbolå‡½æ•°ç”Ÿæˆï¼Œæ³¨æ„åƒä¸‡ä¸è¦åŠ newå…³é”®å­—ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ 12//description å¯é€‰Symbol([description]) æ³¨æ„è¿™é‡Œçš„descriptionæ˜¯å¯é€‰çš„ï¼Œå­—ç¬¦ä¸²ã€‚æ³¨æ„ã€ç¬¦å·çš„æè¿°ï¼ˆdescriptionï¼‰æ˜¯ç”¨äºè°ƒè¯•çš„è€Œä¸æ˜¯è®¿é—®ç¬¦å·æœ¬èº«ã€‘ã€‚ 123var sym1 = Symbol();var sym2 = Symbol(\"foo\");var sym3 = Symbol(\"foo\"); ç”±symbolç”Ÿæˆçš„éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥å½“ä½ å»åˆ¤æ–­sym2 == sym3æ—¶ï¼Œå¾—åˆ°çš„æ˜¯false,å®é™…ä¸Šï¼Œä¸Šé¢çš„ä¸‰ä¸ªå€¼éƒ½æ˜¯ä¸ç›¸åŒçš„ã€‚é‚£è¿™ä¸ªå€¼åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå½“ä½ è¯•å›¾å»æ‰“å°ï¼š 12345console.log(sym1 === sym3); //falseconsole.log(sym2 === sym3); //falseconsole.log(sym === sym3); //falseconsole.log(sym2); // Symbol(foo)console.log(sym1); //Symbol() è™½ç„¶å¦‚æœä½ å•ç‹¬æ‰“å°sym2å’Œsym3çš„æ—¶å€™ï¼Œéƒ½ä¼šå¾—åˆ°ä¸€ä¸ªå€¼ï¼šSymbol(&#39;foo&#39;),çœ‹èµ·æ¥æ˜¯ç›¸åŒçš„ï¼Œä½†ä¸¤ä¸ªå€¼å·²ç»ç”±ç¨‹åºç”Ÿæˆäº†ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„å€¼ã€‚ä½ å¯ä»¥å»ä½¿ç”¨è¿™äº›ä½ ç”Ÿæˆçš„å˜é‡ã€‚è€Œä¸”ä¸ç”¨æ‹…å¿ƒä¼šæœ‰é‡åé—®é¢˜ã€‚è¿™å°±æ˜¯è¿™ä¸ªSymbolæœ€å¥½çš„åœ°æ–¹ã€‚ sym1å’Œsym2/sym3é™¤äº†å€¼ä¸ä¸€æ ·ï¼Œéƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œè¿˜æœ‰å°±æ˜¯sym2/sym3å¤šäº†ä¸€ä¸ªæè¿°ï¼Œå½“ä½ æ‰“å°æˆ–è€…è°ƒè¯•çš„æ—¶å€™å°±å¯ä»¥å¾ˆæ¸…æ¥šçš„çŸ¥é“æ˜¯å“ªä¸ªsymboläº†ã€‚å½“ç„¶æœ€å¥½è¿™ä¸ªdescriptionä¸è¦ä¸€æ ·äº†ï¼Œå¦åˆ™ä½ è°ƒè¯•çš„æ—¶å€™å›å»æ€€ç–‘åˆ°åº•æ˜¯å“ªä¸€ä¸ªSymbolã€‚ ä¸‹é¢typeofè¿ç®—ç¬¦çš„ç»“æœï¼Œè¡¨æ˜å˜é‡sym2æ˜¯Symbolæ•°æ®ç±»å‹ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²ä¹‹ç±»çš„å…¶ä»–ç±»å‹,æ˜¯ä¸€ç§æ–°çš„æ•°æ®ç±»å‹ã€‚ 1234console.log(typeof Symbol())// &lt;- 'symbol'console.log(typeof Symbol('foo'))// &lt;- 'symbol' æ³¨æ„Symbolä¸èƒ½å¤Ÿä¸æ›¿ä»–ç±»å‹åšè¿ç®—,ä¹Ÿå°±æ˜¯ä¸èƒ½å¼ºåˆ¶è½¬æ¢ï¼Œä½†æ˜¯å¯ä»¥è½¬æ¢ä¸ºstringæˆ–è€…boolç±»å‹ã€‚ä½†æ˜¯ä¸èƒ½è½¬æ¢ä¸ºæ•°å­—ç±»å‹ã€‚è½¬æ¢ä¸ºå­—ç¬¦ä¸²å½“ç„¶éƒ½æ˜¯å¾—åˆ°çš„ç›¸åŒçš„ç»“æœã€‚æ‰€ä»¥æˆ‘ä»¬æœ€å¥½ç”¨String/toString()æ¥è½¬æ¢ã€‚ç”±äºè½¬æ¢åçš„å€¼ç›¸åŒï¼Œå…¶å®æ²¡æœ‰ä»€ä¹ˆå¤ªå¤§çš„ç”¨ï¼Œæ˜¯ä¸æ˜¯ï¼Ÿ 12345678910var sym = Symbol('test');String(sym) // 'Symbol(test)'sym.toString() // 'Symbol(test)'var sym = Symbol();Boolean(sym) // trueNumber(sym) // TypeError: can't convert symbol to numbersym - 5 //TypeError: can't convert symbol to number Symbolçš„ç”¨é€”ç»™å¯¹è±¡æ·»åŠ å”¯ä¸€å±æ€§å’Œæ–¹æ³•ç”±äºæ¯ä¸€ä¸ªSymbolå€¼éƒ½æ˜¯ä¸ç›¸ç­‰çš„ï¼Œè¿™æ„å‘³ç€Symbolå€¼å¯ä»¥ä½œä¸ºæ ‡è¯†ç¬¦ï¼Œç”¨äºå¯¹è±¡çš„å±æ€§åï¼Œå°±èƒ½ä¿è¯ä¸ä¼šå‡ºç°åŒåçš„å±æ€§ã€‚è¿™å¯¹äºä¸€ä¸ªå¯¹è±¡ç”±å¤šä¸ªæ¨¡å—æ„æˆçš„æƒ…å†µéå¸¸æœ‰ç”¨ï¼Œèƒ½é˜²æ­¢æŸä¸€ä¸ªé”®è¢«ä¸å°å¿ƒæ”¹å†™æˆ–è¦†ç›–ã€‚ ä¹Ÿå°±æ˜¯ç°åœ¨å¯¹è±¡çš„å±æ€§åç°åœ¨å¯ä»¥æœ‰ä¸¤ç§ç±»å‹ï¼Œä¸€ç§æ˜¯åŸæ¥å°±æœ‰çš„å­—ç¬¦ä¸²ï¼Œå¦ä¸€ç§å°±æ˜¯æ–°å¢çš„Symbolç±»å‹ã€‚123456789101112131415161718192021//ç›´æ¥åœ¨objä¸Šæ·»åŠ keyconst MY_KEY = Symbol();let obj = &#123;&#125;;obj[MY_KEY] = 123;console.log(obj[MY_KEY]); // 123//åœ¨å¯¹è±¡å†…éƒ¨å®šä¹‰å±æ€§const MY_KEY = Symbol();let obj = &#123; [MY_KEY]: 123&#125;;//åœ¨å¯¹è±¡å†…éƒ¨å®šä¹‰æ–¹æ³•const FOO = Symbol();let obj = &#123; [FOO]() &#123; return 'bar'; &#125;&#125;;console.log(obj[FOO]()); è¿™ä¸ªè¿‡ç¨‹å‘ç”Ÿäº†ä¸‹é¢çš„äº‹æƒ…ï¼š è°ƒç”¨ Symbol() æ–¹æ³•å°†åˆ›å»ºä¸€ä¸ªæ–°çš„ Symbol ç±»å‹çš„å€¼ï¼Œå¹¶ä¸”è¯¥å€¼ä¸ä¸å…¶å®ƒä»»ä½•å€¼ç›¸ç­‰ã€‚ æˆ‘ä»¬åˆ©ç”¨Symbol ç±»å‹çš„å€¼å¯ä»¥ä½œä¸ºå¯¹è±¡çš„å±æ€§åï¼Œæ­£æ˜¯ç”±äºå®ƒä¸ä¸ä»»ä½•å…¶å®ƒå€¼ç›¸ç­‰ï¼Œå¯¹åº”çš„å±æ€§ä¹Ÿä¸ä¼šå‘ç”Ÿå†²çªã€‚ å’Œæ•°ç»„ä¸€æ ·ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡[]æ¥è·å¾—å€¼ï¼Œä¸èƒ½å¤Ÿé€šè¿‡. ç‚¹å·æ¥è·å–å€¼ã€‚ æ€»ç»“ä¸‹ï¼šæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢å‡ ç§æ–¹æ³•æ¥ç”Ÿæˆä¸€ä¸ªå¯¹è±¡çš„å”¯ä¸€å±æ€§ï¼š 1234567891011121314151617var mySymbol = Symbol();// ç¬¬ä¸€ç§å†™æ³•var a = &#123;&#125;;a[mySymbol] = 'Hello!';// ç¬¬äºŒç§å†™æ³•var a = &#123; [mySymbol]: 'Hello!'&#125;;// ç¬¬ä¸‰ç§å†™æ³•var a = &#123;&#125;;Object.defineProperty(a, mySymbol, &#123; value: 'Hello!' &#125;);// ä»¥ä¸Šå†™æ³•éƒ½å¾—åˆ°åŒæ ·ç»“æœa[mySymbol] // \"Hello!\" ä¸Šé¢æ˜¯å®šä¹‰å±æ€§ï¼Œä¸‹é¢çœ‹çœ‹å®šä¹‰æ–¹æ³•ï¼Œå…¶å®æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚è¦æ³¨æ„ç”±äºä¸èƒ½ä½¿ç”¨ç‚¹è¿ç®—ç¬¦ï¼Œæ‰€ä»¥åœ¨å¯¹è±¡é‡Œå®šä¹‰å±æ€§çš„æ—¶å€™ï¼Œä¹Ÿåªèƒ½ç”¨æ–¹æ‹¬å·ã€‚æ‰€ä»¥ä½ å¯ä»¥è¿™æ ·å†™ï¼š 123456789101112131415161718let s = Symbol();//æ™®é€šæ–¹æ³•var obj = &#123; [s] : function(args) &#123; //... &#125;&#125;//æˆ–è€…è¿™æ ·å†™ï¼ˆå¯¹è±¡å¢å¼ºï¼‰var obj = &#123; [s](args)&#123; //... &#125;&#125;//è°ƒç”¨æ–¹æ³•obj[s](1,2,3);//é”™è¯¯å†™æ³•var obj = &#123; s(args) &#123; //... &#125; s : function()&#123; //... &#125;&#125; åœ¨æœ€åä¸€ä¸ªé”™è¯¯å†™æ³•ä¸­ï¼šå¦‚æœsä¸æ”¾åœ¨æ–¹æ‹¬å·ä¸­ï¼Œè¯¥å±æ€§çš„é”®åå°±æ˜¯å­—ç¬¦ä¸²sï¼Œè€Œä¸æ˜¯sæ‰€ä»£è¡¨çš„é‚£ä¸ªSymbolå€¼ã€‚obj.s(args);è¿™å°±æ˜¯æŠŠså½“ä½œä¸€ä¸ªæ™®é€šçš„é”®åäº†ã€‚ Using symbols to represent conceptsè¿™æ˜¯ç¬¬äºŒç§æˆ‘ä»¬å¯ä»¥ç”¨Symbolçš„åœ°æ–¹ã€‚æ¯”å¦‚ä¸€ä¸ªäººå†™äº†ä¸€ä¸ªè¿™æ ·çš„ä»£ç ï¼š12345678910111213141516171819202122232425var COLOR_RED = 'RED';var COLOR_ORANGE = 'ORANGE';var COLOR_YELLOW = 'YELLOW';var COLOR_GREEN = 'GREEN';var COLOR_BLUE = 'BLUE';var COLOR_VIOLET = 'VIOLET';function getComplement(color) &#123; switch (color) &#123; case COLOR_RED: return COLOR_GREEN; case COLOR_ORANGE: return COLOR_BLUE; case COLOR_YELLOW: return COLOR_VIOLET; case COLOR_GREEN: return COLOR_RED; case COLOR_BLUE: return COLOR_ORANGE; case COLOR_VIOLET: return COLOR_YELLOW; default: throw new Exception('Unknown color: '+color); &#125;&#125; è¿™æ ·æˆ‘ä»¬é¿å…äº†hard-codingï¼Œä¹Ÿå°±æ˜¯ç¡¬ç¼–ç ã€‚é˜²æ­¢æˆ‘ä»¬æ¯æ¬¡éƒ½å»æ”¹åŠ¨å‡½æ•°ä¸­çš„â€™redâ€™,â€™blueâ€™ï¼Œè¿™ä¹‹ç±»çš„ã€‚ä½†æ˜¯è¿™è¿˜æ˜¯æœ‰é—®é¢˜ï¼Œæ¯”å¦‚ä¸€ä¸ªäººï¼š1var MOOD_BLUE = 'BLUE'; ä»–åˆå®šä¹‰äº†ä¸Šé¢ä¸€ä¸ªé¢œè‰²ã€‚é‚£ä¹ˆè¿™æ ·ä»¥æ¥switchçš„æ—¶å€™å°±ä¼šæœ‰é‡å¤çš„å€¼äº†ã€‚å°±ä¸å¤ªå¥½ã€‚å¦‚æœæˆ‘ä»¬ç”¨Symbolå¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚123456const COLOR_RED = Symbol();const COLOR_ORANGE = Symbol();const COLOR_YELLOW = Symbol();const COLOR_GREEN = Symbol();const COLOR_BLUE = Symbol();const COLOR_VIOLET = Symbol(); è¿™æ ·ä»¥æ¥ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨Symbolè€Œä¸æ˜¯å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œæˆ‘ä»¬å†ä¹Ÿä¸ç”¨å»æ”¹åŠ¨å‡½æ•°äº†ã€‚ Symbols as keys of internal properties123456789101112// One WeakMap per private property const PASSWORD = new WeakMap(); class Login &#123; constructor(name, password) &#123; this.name = name; PASSWORD.set(this, password); &#125; hasPassword(pw) &#123; return PASSWORD.get(this) === pw; &#125; &#125; ç¬¦å·ä¸æä¾›çœŸæ­£çš„éšç§ï¼Œå› ä¸ºå®ƒå¾ˆå®¹æ˜“æ‰¾åˆ°å¯¹è±¡çš„ç¬¦å·å€¼çš„å±æ€§é”®ã€‚ä½†æ˜¯ï¼Œä¿è¯ä¸€ä¸ªå±æ€§å¯†é’¥æ°¸è¿œä¸ä¼šä¸ä»»ä½•å…¶ä»–å±æ€§å¯†é’¥å†²çªå¾€å¾€æ˜¯ä¸å¤Ÿçš„ã€‚å¦‚æœä½ çœŸçš„æƒ³é˜»æ­¢å¤–éƒ¨è®¿é—®ç§æœ‰æ•°æ®ï¼Œä½ éœ€è¦ä½¿ç”¨WeakMapsæˆ–å…³é—­ã€‚12345678910const PASSWORD = Symbol();class Login &#123; constructor(name, password) &#123; this.name = name; this[PASSWORD] = password; &#125; hasPassword(pw) &#123; return this[PASSWORD] === pw; &#125;&#125; Symbol do not guarantee true privacy but can be used to separate public and internal properties of objects.123456789101112131415var Pet = (function() &#123; function Pet(type) &#123; this.type = type; &#125; Pet.prototype.getType = function() &#123; return this.type; &#125; return Pet;&#125;());var a = new Pet('dog');console.log(a.getType());//Output: doga.type = null;//Modified outsideconsole.log(a.getType());//Output: undefined ä¸Šé¢çš„è¿™ä¸ªä¾‹å­ä¸­typeå¯ä»¥è¢«å¤–éƒ¨æ‰€è®¿é—®ã€‚ä¸€èˆ¬æˆ‘ä»¬çš„æ–¹æ³•æ˜¯é€šè¿‡é—­åŒ…æ¥è§£å†³ã€‚1234567891011121314var Pet = (function() &#123; function Pet(type) &#123; this.getType = function()&#123; return type; &#125;; &#125; return Pet;&#125;());var b = new Pet('dog');console.log(b.getType());//dogb.type = null;//Stays privateconsole.log(b.getType());//dog ç°åœ¨å¦‚æœæˆ‘ä»¬é€šè¿‡symbolçš„è¯ï¼Œå°±å¯ä»¥å‡å°‘ä¸å¿…è¦çš„é—­åŒ…ã€‚æˆ‘ä»¬å·²ç»æåˆ°è¿‡å¾ˆå¤šæ¬¡ï¼Œsymbolè™½ç„¶ä¸èƒ½å¤Ÿä¿è¯æ­£çœŸçš„éšç§ï¼Œä½†æ˜¯å¯ä»¥å°†å¤–éƒ¨ç¯å¢ƒå’Œå†…éƒ¨ç¯å¢ƒåˆ†ç¦»ã€‚12345678910111213141516var Pet = (function() &#123; var typeSymbol = Symbol('type'); function Pet(type) &#123; this[typeSymbol] = type; &#125; Pet.prototype.getType = function()&#123; return this[typeSymbol]; &#125; return Pet;&#125;());var a = new Pet('dog');console.log(a.getType());//Output: doga.type = null;//stays privateconsole.log(a.getType());//Output: dog Symbols are invisible to all â€œreflectionâ€ methods before ES6. This can be useful in some scenarios, but theyâ€™re not private by any stretch of imagination, as weâ€™ve just demonstrated with the Object.getOwnPropertySymbols API. ä¸Šé¢å­¦ä¹ è‡ªï¼šSamar Pandaæ¥è‡ªstackoverflowçš„å›ç­”ã€‚æ„Ÿè°¢ã€‚ å‡ ä¸ªé‡ç‚¹çš„APIä½¿ç”¨Symbol() å‡½æ•° ä¸ä¼šåœ¨ä½ çš„æ•´ä¸ªä»£ç åº“ä¸­åˆ›å»ºä¸€ä¸ªå¯ç”¨çš„å…¨å±€ç¬¦å·ã€‚ è¦åˆ›å»ºè·¨æ–‡ä»¶å¯ç”¨çš„symbolsï¼Œç”šè‡³è·¨åŸŸï¼ˆæ¯ä¸ªéƒ½æœ‰å®ƒè‡ªå·±çš„å…¨å±€ä½œç”¨åŸŸï¼‰ , ä½¿ç”¨è¿™ä¸ªæ–¹æ³•Symbol.for() å’Œ Symbol.keyFor() ä»å…¨å±€symbolçš„æ³¨å†Œå¤„è®¾ç½®å’Œå–å¾—symbolsã€‚ Symbol.for(â€˜descâ€™)Symbol.forä¸ºSymbolå€¼ç™»è®°çš„åå­—ï¼Œæ˜¯å…¨å±€ç¯å¢ƒçš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯å…¨å±€å…±äº«çš„Symbolã€‚12Symbol.for('foo') === Symbol.for('foo') //trueSymbol('foo') === Symbol('foo') //false æˆ‘ä»¬çŸ¥é“å½“æˆ‘ä»¬æ¯æ¬¡è°ƒç”¨Symbolçš„æ—¶å€™éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å€¼ï¼Œé‚£å¦‚æœæˆ‘ä»¬æƒ³é‡ç”¨ä¸€ä¸ªSymbolæ€ä¹ˆåŠå‘¢ï¼ŸSymbol.foræ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚å®ƒæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œç„¶åæœç´¢æœ‰æ²¡æœ‰ä»¥è¯¥å‚æ•°ä½œä¸ºåç§°çš„Symbolå€¼ã€‚å¦‚æœæœ‰ï¼Œå°±è¿”å›è¿™ä¸ªSymbolå€¼ï¼Œå¦åˆ™å°±æ–°å»ºå¹¶è¿”å›ä¸€ä¸ªä»¥è¯¥å­—ç¬¦ä¸²ä¸ºåç§°çš„Symbolå€¼ã€‚ Symbol.keyFor(â€˜descâ€™)Symbol.keyForæ–¹æ³•è¿”å›ä¸€ä¸ªå·²ç™»è®°çš„Symbolç±»å‹å€¼çš„keyã€‚æ³¨æ„è¿™é‡Œçš„descå¿…é¡»æ˜¯å·²ç»ç™»è®°è¿‡äº†çš„ï¼Œä¹Ÿå°±æ˜¯ä¸€å®šè¦æ˜¯ç”¨Symbol.foræ¥å£°æ˜çš„ã€‚ 12345var sym1 = Symbol.for(\"foo\");console.log(Symbol.keyFor(\"foo\")); //\"foo\"var sym2 = Symbol(\"bar\");console.log(Symbol.keyFor(\"bar\")); //undefined ä¸Šè¿°ä»£ç ä¸­ï¼šå˜é‡sym2å±äºæœªç™»è®°çš„Symbolå€¼ï¼Œæ‰€ä»¥è¿”å›undefinedã€‚ Symbol.iteratorå¯¹è±¡çš„Symbol.iteratorå±æ€§ï¼ŒæŒ‡å‘è¯¥å¯¹è±¡çš„é»˜è®¤éå†å™¨æ–¹æ³•ã€‚å¯¹è±¡è¿›è¡Œforâ€¦ofå¾ªç¯æ—¶ï¼Œä¼šè°ƒç”¨Symbol.iteratoræ–¹æ³•ï¼Œè¿”å›è¯¥å¯¹è±¡çš„é»˜è®¤éå†å™¨ã€‚123456789101112131415161718192021let obj = &#123; data: [ 'hello', 'world' ], [Symbol.iterator]() &#123; const self = this; let index = 0; return &#123; next() &#123; if (index &lt; self.data.length) &#123; return &#123; value: self.data[index++] &#125;; &#125; else &#123; return &#123; done: true &#125;; &#125; &#125; &#125;; &#125; &#125;; for (let x of obj) &#123; console.log(x); &#125; An object is iterable if it has a method whose key is the symbol (stored in) Symbol.iterator. è·å–Symbolçš„æ–¹æ³•æ€»ç»“ä¸‹è·å–Symbolçš„å‡ ç§æ–¹æ³• Symbol() æ¯æ¬¡è°ƒç”¨æ—¶éƒ½è¿”å›ä¸€ä¸ªå”¯ä¸€çš„ Symbolã€‚ Symbol.for(string) ä» Symbol æ³¨å†Œè¡¨ä¸­è¿”å›ç›¸åº”çš„ Symbolï¼Œä¸ä¸Šä¸ªæ–¹æ³•ä¸åŒçš„æ˜¯ï¼ŒSymbol æ³¨å†Œè¡¨ä¸­çš„ Symbol æ˜¯å…±äº«çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ è°ƒç”¨ Symbol.for(â€œcatâ€) ä¸‰æ¬¡ï¼Œéƒ½å°†è¿”å›ç›¸åŒçš„ Symbolã€‚å½“ä¸åŒé¡µé¢æˆ–åŒä¸€é¡µé¢ä¸åŒæ¨¡å—éœ€è¦å…±äº« Symbol æ—¶ï¼Œæ³¨å†Œè¡¨å°±éå¸¸æœ‰ç”¨ã€‚ Symbol.iterator è¿”å›è¯­è¨€é¢„å®šä¹‰çš„ä¸€äº› Symbolï¼Œæ¯ä¸ªéƒ½æœ‰å…¶ç‰¹æ®Šçš„ç”¨é€”ã€‚ è¿™é‡Œéœ€è¦çŸ¥é“ä¸€ä¸ªå¾ˆå¤§çš„åŒºåˆ«ï¼š Symbol.for()ä¸Symbol()è¿™ä¸¤ç§å†™æ³•ï¼Œéƒ½ä¼šç”Ÿæˆæ–°çš„Symbolã€‚å®ƒä»¬çš„åŒºåˆ«æ˜¯ï¼Œå‰è€…ä¼šè¢«ç™»è®°åœ¨å…¨å±€ç¯å¢ƒä¸­ä¾›æœç´¢ï¼Œåè€…ä¸ä¼šã€‚Symbol.for()ä¸ä¼šæ¯æ¬¡è°ƒç”¨å°±è¿”å›ä¸€ä¸ªæ–°çš„Symbolç±»å‹çš„å€¼ï¼Œè€Œæ˜¯ä¼šå…ˆæ£€æŸ¥ç»™å®šçš„keyæ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨æ‰ä¼šæ–°å»ºä¸€ä¸ªå€¼ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ è°ƒç”¨Symbol.for(â€œcatâ€)30æ¬¡ï¼Œæ¯æ¬¡éƒ½ä¼šè¿”å›åŒä¸€ä¸ªSymbolå€¼ï¼Œä½†æ˜¯è°ƒç”¨Symbol(â€œcatâ€)30æ¬¡ï¼Œä¼šè¿”å›30ä¸ªä¸åŒçš„Symbolå€¼ã€‚ â€“FROM RUAN YIFeng å±æ€§çš„éå†Symbolä½œä¸ºå±æ€§åï¼Œè¯¥å±æ€§ä¸ä¼šå‡ºç°åœ¨for...inã€for...ofå¾ªç¯ä¸­ï¼Œä¹Ÿä¸ä¼šè¢«Object.keys()ã€Object.getOwnPropertyNames()è¿”å›ã€‚ä½†æ˜¯ï¼Œå®ƒä¹Ÿä¸æ˜¯ç§æœ‰å±æ€§ï¼Œæœ‰ä¸€ä¸ªObject.getOwnPropertySymbolsæ–¹æ³•ï¼Œå¯ä»¥è·å–æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰Symbolå±æ€§åã€‚ Object.getOwnPropertySymbolsæ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å½“å‰å¯¹è±¡çš„æ‰€æœ‰ç”¨ä½œå±æ€§åçš„Symbolå€¼ã€‚çœ‹çœ‹ä¸‹é¢å‡ ä¸ªä¾‹å­ã€‚ 12345678var foo = &#123; [Symbol()]: 'foo', [Symbol('foo')]: 'bar', [Symbol.for('bar')]: 'baz', what: 'ever'&#125;console.log([...foo])// &lt;- [] Object.keysï¼ˆï¼‰ä¹Ÿæ˜¯ä¸è¡Œçš„ã€‚12console.log(Object.keys(foo))// &lt;- ['what'] JSON.stringifyï¼ˆï¼‰æ˜¯ä¸è¡Œçš„ã€‚12console.log(JSON.stringify(foo))// &lt;- &#123;\"what\":\"ever\"&#125; for in å¯ä»¥å—ï¼Ÿä¸å¯ä»¥1234for (let key in foo) &#123; console.log(key) // &lt;- 'what'&#125; getOwnPropertyNameså½“ç„¶ä¹Ÿä¸å¯ä»¥ã€‚12console.log(Object.getOwnPropertyNames(foo))// &lt;- ['what'] éš¾é“æ²¡æœ‰æ–¹æ³•è·å¾—å—ï¼Ÿå¦‚æœè®¤çœŸçœ‹äº†å‰é¢æˆ‘ä»¬è¯´çš„ï¼Œsymbolsæ˜¯ä¸ä¼šçœŸæ­£ä¿æŠ¤éšç§ï¼Œå› ä¸ºä¼šæœ‰ä¸€ä¸ªgetOwnPropertySymbolsçš„æ–¹æ³•å¯ä»¥è·å¾—å®ƒä»¬ã€‚12console.log(Object.getOwnPropertySymbols(foo))// &lt;- [Symbol(), Symbol('foo'), Symbol.for('bar')] 123456for (let symbol of Object.getOwnPropertySymbols(foo)) &#123; console.log(foo[symbol]) // &lt;- 'foo' // &lt;- 'bar' // &lt;- 'baz'&#125; æ€»ç»“å…¶å®è¿˜æœ‰å¥½å¤šä¸ªsymbolçš„API,åˆ°ç”¨åˆ°çš„æ—¶å€™å†å»æŸ¥å§ã€‚åŸºæœ¬ä¸Šå¸¸ç”¨çš„å°±æ˜¯ä¸Šé¢é‚£äº›ã€‚ä¸»è¦å­¦åˆ°äº†symbolæ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆç”¨ï¼Œå¯ä»¥ç”¨åˆ°ä»€ä¹ˆåœ°æ–¹ã€‚å…¶å®è¿™æ–°ç‰¹æ€§è¿˜æ˜¯å¾ˆå¥½çš„ã€‚å‚è€ƒå­¦ä¹ è‡ªä¸‹é¢å‡ ç¯‡æ–‡ç« ï¼Œæ„Ÿè°¢ï¼Œä¹Ÿåˆ†äº«ç»™å¤§å®¶ã€‚ http://es6.ruanyifeng.com/#docs/symbol https://ponyfoo.com/articles/es6-symbols-in-depth why-bring-symbols-to-javascript","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"ES6","slug":"ES6","permalink":"http://sevencai.github.io/tags/ES6/"}]},{"title":"koaä¸­é—´ä»¶æœºåˆ¶å’Œé”™è¯¯å¤„ç†è§£å†³æ–¹æ¡ˆ","slug":"koaä¸­é—´ä»¶æœºåˆ¶å’Œé”™è¯¯å¤„ç†è§£å†³æ–¹æ¡ˆ","date":"2016-07-14T01:11:13.000Z","updated":"2016-12-12T03:00:58.000Z","comments":true,"path":"2016/07/14/koaä¸­é—´ä»¶æœºåˆ¶å’Œé”™è¯¯å¤„ç†è§£å†³æ–¹æ¡ˆ/","link":"","permalink":"http://sevencai.github.io/2016/07/14/koaä¸­é—´ä»¶æœºåˆ¶å’Œé”™è¯¯å¤„ç†è§£å†³æ–¹æ¡ˆ/","excerpt":"","text":"ç”± Express åŸç­äººé©¬æ‰“é€ çš„ koaï¼Œè‡´åŠ›äºæˆä¸ºä¸€ä¸ªæ›´å°ã€æ›´å¥å£®ã€æ›´å¯Œæœ‰è¡¨ç°åŠ›çš„ Web æ¡†æ¶ã€‚ä½¿ç”¨ koa ç¼–å†™ web åº”ç”¨ï¼Œé€šè¿‡ç»„åˆä¸åŒçš„ generatorï¼Œå¯ä»¥å…é™¤é‡å¤ç¹ççš„å›è°ƒå‡½æ•°åµŒå¥—ï¼Œå¹¶æå¤§åœ°æå‡å¸¸ç”¨é”™è¯¯å¤„ç†æ•ˆç‡ã€‚Koa ä¸åœ¨å†…æ ¸æ–¹æ³•ä¸­ç»‘å®šä»»ä½•ä¸­é—´ä»¶ï¼Œå®ƒä»…ä»…æä¾›äº†ä¸€ä¸ªè½»é‡ä¼˜é›…çš„å‡½æ•°åº“ï¼Œä½¿å¾—ç¼–å†™ Web åº”ç”¨å˜å¾—å¾—å¿ƒåº”æ‰‹ã€‚ æˆ‘è§‰å¾—å…¶å®koaä¸»è¦å°±æ˜¯é¿å…äº†ç¹ççš„å›è°ƒå‡½æ•°åµŒå¥—ï¼Œä»£ç çœ‹ç€æ›´å’Œè°ã€‚è¿˜æœ‰å°±æ˜¯å®ƒçš„é”™è¯¯å¤„ç†æœºåˆ¶ã€‚ å…¶å®è¿™å‡ å¤©ä¸€ç›´åœ¨çº ç»“ä¸ºä»€ä¹ˆgeneratoræ˜¯ä¸€ç§å¼‚æ­¥æ–¹æ¡ˆã€‚è§‰å¾—çœŸçš„å¥½å¥‡æ€ªã€‚å› ä¸ºä½ ç”¨generatorè¦ä¸€ç›´è°ƒç”¨nextæ–¹æ³•æ‰èƒ½ç»§ç»­ï¼Œæˆ‘æƒ³è¿™å°±æ˜¯é˜»å¡çš„å•Šï¼Œæ€ä¹ˆèƒ½æ˜¯å¼‚æ­¥çš„å‘¢ã€‚åæ¥å‘ç°æœ‰äº›ä¹¦ä¸Šè¿™æ ·å†™æ˜¯é”™è¯¯çš„ã€‚generatorä¸æ˜¯ä¸€ç§å¼‚æ­¥æ–¹æ¡ˆï¼Œå®ƒæ˜¯å’Œå…¶ä»–çš„ä¸€äº›é…åˆæ‰èƒ½å®ç°å¼‚æ­¥ã€‚æ¯”å¦‚promiseã€‚ç”±äºyieldä»¥å‰ä¹Ÿæ²¡ç”¨è¿‡ï¼Œyieldåé¢yieldableçš„å†…å®¹åˆæ˜¯æœ‰é™çš„ã€‚è‡ªç„¶å°±æ²¡æœ‰maxï¼ˆæˆ‘niceçš„åŒäº‹ï¼‰è¯´ç”¨çš„é‚£ä¹ˆé¡ºæ‰‹ã€‚ è§£å†³æˆ‘çš„ç–‘é—®åæ¥æˆ‘åœ¨ä¸€ç¯‡æ–‡ç« experiments-with-koa-and-javascript-generatorsæ‰¾åˆ°äº†ç­”æ¡ˆã€‚ ä¹Ÿå°±æ˜¯è¯´promise+generatoræˆ–è€…generatorå’Œå…¶ä»–å¼‚æ­¥æ–¹æ¡ˆä¸€èµ·åˆä½œæ‰æ˜¯æ­£è§£ã€‚ç›´æ¥è¯´generatorå°±æ˜¯å¼‚è§£å†³æ–¹æ¡ˆæ˜¯ä¸å‡†ç¡®çš„ã€‚ koaçš„ä¸­é—´æœºåˆ¶åŸç†é‚£ä¹ˆkoa ä¸­é—´ä»¶æœºåˆ¶å®ç°åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸­é—´æˆ‘ä»¬ä¸€å®šè¦ä¼ å…¥ä¸€ä¸ªgeneratorå½“ä½œå‡½æ•°å‘¢ï¼Ÿä¸€å®šéœ€è¦ç”¨yieldå—ï¼Ÿyieldçš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿnextåˆæ˜¯ä»€ä¹ˆï¼Ÿyield nextä¸ºä»€ä¹ˆå¯ä»¥å°±é¡ºåºçš„æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Ÿä¸ºä»€ä¹ˆä¸­é—´ä»¶ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œå®Œåï¼Œå¯ä»¥ä»ä¸‹åˆ°ä¸Šæ‰§è¡Œ yield next åçš„é€»è¾‘ï¼Ÿè¿™æ˜¯æˆ‘ç”¨è¿™ä¸ªæ¡†æ¶çš„æ—¶å€™çš„ç–‘é—®ã€‚ å…ˆæ¥çœ‹ä¸€ç§å®ç°koaä¸­é—´æœºåˆ¶çš„ä»£ç ï¼š123456789101112131415161718192021222324252627282930var co = require('co');class koa &#123; constructor ()&#123; this.middlewares = []; &#125; use(middleware)&#123; this.middlewares.push(middleware); &#125; listen()&#123; this._run(); &#125; _run()&#123; var ctx = this; var middlewares = this.middlewares; return co(function *()&#123; var prev = null; while (i--) &#123; prev = middlewares[i].call(ctx, prev); &#125; //æ‰§è¡Œç¬¬ä¸€ä¸ªä¸­é—´ä»¶ yield prev; &#125;)(); &#125;&#125; ç„¶åæˆ‘ä»¬ä»¥åŸå§‹è·ŸåŸå§‹koaé¡¹ç›®ä¸€æ ·çš„ä»£ç æ¥è¿è¡Œï¼š1234567891011121314151617var app = new koa();app.use(function *(next)&#123; this.body = '1'; yield next; this.body += '5'; console.log(this.body);&#125;);app.use(function *(next)&#123; this.body += '2'; yield next; this.body += '4';&#125;);app.use(function *()&#123; this.body += '3';&#125;);app.listen(); å¯ä»¥å¾ˆæ¸…æ¥šçš„å‘ç°æ˜¯ä¸€æ ·çš„ç»“æœã€‚1,2,3,4,5ã€‚koaè¿™ç§æ€æƒ³ä¸­yieldç›¸å½“äºä¸€ä¸ªæ–­ç‚¹ã€‚åˆ°è¿™ä¸ªåœ°æ–¹å°±åœäº†ã€‚ç„¶åæ¥ç€æ‰§è¡Œä¸‹ä¸€ä¸ªnextã€‚å¾ˆç±»ä¼¼æˆ‘ä»¬å­¦è¿‡çš„é€’å½’çš„æ€æƒ³ã€‚å®ƒçš„æ€æƒ³å°±æ˜¯æŠŠä¸€ç³»åˆ—ä¸­é—´ä»¶æ”¾å…¥ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œç„¶åä»ç¬¬ä¸€ä¸ªå¼€å§‹æ‰§è¡Œã€‚ koaçš„é”™è¯¯å¤„ç†æœºåˆ¶ä¸€èˆ¬æˆ‘ä»¬åœ¨jsçš„é”™è¯¯å¤„ç†æœºåˆ¶ä¸­æœ‰ä¸€ä¸‹å‡ ç§æ–¹æ³•ï¼š å’Œå…¶ä»–åŒæ­¥è¯­è¨€ç±»ä¼¼çš„ throw / try / catch æ–¹æ³• callback(err, data) å›è°ƒå½¢å¼ é€šè¿‡ EventEmitter è§¦å‘ä¸€ä¸ª error äº‹ä»¶ koa é€šè¿‡å¯ä»¥é€šè¿‡å®ƒçš„ç‰¹æ€§è®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ catch æ¥æ•è·å¼‚æ­¥ä»£ç ä¸­çš„é”™è¯¯ã€‚ æ¯”å¦‚ï¼š 12345678910const fs = require('fs');const Promise = require('bluebird');let filename = '/nonexists';let statAsync = Promise.promisify(fs.stat);try &#123; yield statAsync(filename);&#125; catch(e) &#123; // error here&#125; koaä¸»è¦æ˜¯é€šè¿‡coæ¥å®ç°ã€‚coæ˜¯tjå†™çš„ç”¨æ¥è‡ªåŠ¨æ‰§è¡Œgeneratorçš„å°å·¥å…·ã€‚å¦‚æœæˆ‘ä»¬ä¸åˆ©ç”¨coï¼Œè°ƒç”¨generatorçš„æ—¶å€™ï¼Œéœ€è¦ä¸€ç›´next,coå¸®åŠ©è‡ªåŠ¨æ‰§è¡Œã€‚ ä¸€èˆ¬æˆ‘ä»¬æŠŠä¸­é—´ä»¶å¯ä»¥ç§°ä½œMVCé‡Œé¢çš„Mï¼Œä¹Ÿå°±æ˜¯é€»è¾‘ä¸šåŠ¡å¤„ç†å±‚ã€‚æœ€å¥½çš„æ–¹å¼ï¼Œæ˜¯æˆ‘ä»¬ä½¿ç”¨ä¸­é—´ä»¶æ¥å¤„ç†koaçš„é”™è¯¯ã€‚ 1234567891011121314151617181920212223242526272829303132333435app.use(function* (next) &#123; try &#123; yield* next; &#125; catch(e) &#123; let status = e.status || 500; let message = e.message || 'æœåŠ¡å™¨é”™è¯¯'; if (e instanceof JsonError) &#123; // é”™è¯¯æ˜¯ json é”™è¯¯ this.body = &#123; 'status': status, 'message': message &#125;; if (status == 500) &#123; // è§¦å‘ koa ç»Ÿä¸€é”™è¯¯äº‹ä»¶ï¼Œå¯ä»¥æ‰“å°å‡ºè¯¦ç»†çš„é”™è¯¯å †æ ˆ log this.app.emit('error', e, this); &#125; return; &#125; this.status = status; // æ ¹æ® status æ¸²æŸ“ä¸åŒçš„é¡µé¢ if (status == 403) &#123; this.body = yield this.render('403.html', &#123;'err': e&#125;); &#125; if (status == 404) &#123; this.body = yield this.render('404.html', &#123;'err': e&#125;); &#125; if (status == 500) &#123; this.body = yield this.render('500.html', &#123;'err': e&#125;); // è§¦å‘ koa ç»Ÿä¸€é”™è¯¯äº‹ä»¶ï¼Œå¯ä»¥æ‰“å°å‡ºè¯¦ç»†çš„é”™è¯¯å †æ ˆ log this.app.emit('error', e, this); &#125; &#125;&#125;);` å½“æˆ‘ä»¬åªåœ¨tryå—é‡Œé¢æ‰§è¡Œyieldçš„æ—¶å€™ã€‚æˆ‘ä»¬çš„é”™è¯¯éƒ½æ”¾åœ¨catché‡Œé¢ï¼Œç„¶åå†å¯¹catchåˆ°çš„å†…å®¹åšå¤„ç†ï¼Œå°±æ˜¯ä¸€ç§å¾ˆæœ‰æ•ˆçš„æ–¹æ³•ã€‚ å½“æˆ‘ä»¬è§¦å‘é”™è¯¯çš„æ—¶å€™ï¼š1234567891011const router = new (require('koa-router'));router.get('/some_page', function* () &#123; // ç›´æ¥æŠ›å‡ºé”™è¯¯ï¼Œè¢«ä¸­é—´ä»¶æ•è·åå½“æˆ 500 é”™è¯¯ throw new PageError('å‘ç”Ÿäº†ä¸€ä¸ªè‡´å‘½é”™è¯¯'); throw new JsonError('å‘é€äº†ä¸€ä¸ªè‡´å‘½é”™è¯¯'); // å¸¦ status çš„é”™è¯¯ï¼Œè¢«ä¸­é—´ä»¶æ•è·åç‰¹æ®Šå¤„ç† this.throw(403, new PageError('æ²¡æœ‰æƒé™è®¿é—®')); this.throw(403, new JsonError('æ²¡æœ‰æƒé™è®¿é—®'));&#125;); è¿™é‡Œçš„JsoneErrorå’ŒPageErroræ˜¯å®šä¹‰çš„é”™è¯¯æ„é€ å™¨ã€‚1234567891011121314const util = require('util');exports.JsonError = JsonError;exports.PageError = PageError;function JsonError(message) &#123; Error.call(this, message);&#125;util.inherits(JsonError, Error);function PageError(message) &#123; Error.call(this, message);&#125;util.inherits(PageError, Error); é€šè¿‡å°†ä»£ç ç»†åˆ†ï¼Œå°±å¯ä»¥å¾—åˆ°æ›´æ¸…æ™°çš„ç»“æœã€‚è¿™ä¸€éƒ¨åˆ†å­¦ä¹ è‡ªï¼šæ·˜å®fedkoaé”™è¯¯å¤„ç†ã€‚ æ€»ç»“å…³äºcoä¸­é—´çš„åŸç†ï¼Œæ¯”å¦‚è¿”å›promise,æ¯”å¦‚åˆ©ç”¨åˆ°äº†trunkã€‚è¿™äº›æˆ‘è¿˜æ²¡æœ‰å®Œå…¨ç†è§£æ¸…æ¥šï¼Œç­‰ç†è§£æ¸…æ¥šäº†å†æ¥è®°å½•ä¸‹ã€‚æ¨èå‡ ç¯‡æ–‡ç« ï¼š é˜®ä¸€å³°es6å…¥é—¨ï¼šhttp://es6.ruanyifeng.com/#docs/async#coæ¨¡å— promiseå®ç°ï¼šhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise koaä¸­æ–‡æ–‡æ¡£: https://github.com/guo-yu/koa-guide koaå¼‚æ­¥è®²è§£ï¼šhttp://blog.stevensanderson.com/2013/12/21/experiments-with-koa-and-javascript-generators/ æ·˜å®fedkoaé”™è¯¯å¤„ç†:http://taobaofed.org/blog/2016/03/18/error-handling-in-koa/","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"http://sevencai.github.io/tags/Nodejs/"}]},{"title":"ç”¨Nodejsæ¥è‡ªå®šä¹‰å¾®ä¿¡èœå•","slug":"ç”¨Nodejsæ¥åˆ›å»ºå¾®ä¿¡å…¬ä¼—å·èœå•","date":"2016-07-12T01:26:40.000Z","updated":"2017-01-11T12:45:27.000Z","comments":true,"path":"2016/07/12/ç”¨Nodejsæ¥åˆ›å»ºå¾®ä¿¡å…¬ä¼—å·èœå•/","link":"","permalink":"http://sevencai.github.io/2016/07/12/ç”¨Nodejsæ¥åˆ›å»ºå¾®ä¿¡å…¬ä¼—å·èœå•/","excerpt":"","text":"ä»¥å‰ç”¨phpè‡ªå®šä¹‰è¿‡èœå•ã€‚å½“æ—¶ç›´æ¥åˆ©ç”¨curlæ¥postæ•°æ®å°±è¡Œäº†ã€‚ä»Šå¤©ç”¨nodejsé‡æ–°å†™äº†ä¸‹ã€‚å‘ç°nodejsçš„å‘ç•¥å¤šè¿˜æ˜¯ã€‚ä¸‹é¢æ˜¯ä¸¤ç§æ–¹æ³•ï¼Œç¬¬äºŒç§ç”¨äº†ä¸‹promiseã€‚å…¶å®æ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚ ä¸­é—´é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œæˆ‘æŠŠå®ƒä»¬å†™åˆ°csdnä¸Šé¢äº†ã€‚å°ä¼™ä¼´ä»¬è‡ªå·±çœ‹çœ‹ï¼šcsdné—®é¢˜ã€‚ä¸­é—´ä¸€å®šè¦æ³¨æ„çš„ä¸€ä¸ªé—®é¢˜æ˜¯æˆ‘ä»¬é€šè¿‡å¾®ä¿¡APIæ¥getåˆ°çš„èœå•å’Œæˆ‘ä»¬createéœ€è¦çš„èœå•æ˜¯å®Œå…¨ä¸ä¸€æ ·çš„ï¼Œæ¯”å¦‚è¯´æ²¡æœ‰menuã€‚è¿™ä¼šå¯¼è‡´åˆ›å»ºèœå•å¤±è´¥ã€‚å› ä¸ºå¾®ä¿¡å¯¹äºæ¶ˆæ¯çš„è¯­æ³•éå¸¸ä¸¥æ ¼ã€‚ ä¸‹é¢ç›´æ¥å°±ä¸Šä»£ç äº†ï¼Œæˆ‘ä»¬è¿™é‡Œå°±åªç”¨äº†httpçš„åŸç”Ÿæ–¹æ³•getå’Œrequestå‘é€è¯·æ±‚ã€‚ä¸‹é¢çš„menu.jsonæ˜¯ä¸€ä¸ªçš„æŒ‰é’®jsonæ–‡ä»¶ã€‚æ³¨æ„å»å¾®ä¿¡å®˜æ–¹apiä¸Šçœ‹é™åˆ¶æ¡ä»¶ã€‚configé‡Œé¢é…ç½®äº†æˆ‘çš„token,appid,secreteç­‰ç­‰ã€‚ ç¬¬ä¸€ç§æ–¹æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354const https = require('https'), config = require('./config.json'), querystring = require('querystring');var menus = require('./menu.json'), strMenus = JSON.stringify(menus), optionAccess = \"https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=\"+config.appid+\"&amp;secret=\"+config.appSecret, access_token;https.get(optionAccess,function(res)&#123; var body = \"\"; res.on('data',function(d)&#123; body += d; &#125;) res.on('end',function()&#123; var parsed = JSON.parse(body); createMenu(parsed.access_token); &#125;) &#125;).on('error',(e)=&gt;&#123; console.log(e.message);&#125;)function createMenu(access_token)&#123; var data = \"\"; var options = &#123; protocol:'https:', host:'api.weixin.qq.com', port:443, path:'/cgi-bin/menu/create?access_token='+access_token, method:'POST', headers: &#123; 'Content-Type': 'application/x-www-form-urlencoded', 'Content-Length': Buffer.byteLength(strMenus) &#125; &#125; var req = https.request(options,(res)=&gt;&#123; res.on('data',(chunk)=&gt;&#123; data+=chunk; &#125;) res.on('end',()=&gt;&#123; var message = JSON.parse(data); if(message.errmsg)&#123; console.log(\"è¿”å›ä¿¡æ¯:\"+message.errmsg+'; è¿”å›ç :'+message.errcode); &#125; &#125;) &#125;) req.on('error',(e)=&gt;&#123; console.log(e); &#125;) req.write(new Buffer(strMenus)); req.end();&#125; ç¬¬äºŒç§æ–¹æ³•ç»†å¿ƒçš„å°ä¼™ä¼´ä¼šå‘ç°å…¶å®æˆ‘æ²¡æœ‰æ”¹åŠ¨ä»€ä¹ˆä»£ç ã€‚è¿™é‡Œpromiseçš„ä½œç”¨ä½“ç°çš„ä¸æ˜æ˜¾ã€‚å½“æœ‰å¾ˆå¤šçš„æ¬¡åºè¯·æ±‚çš„æ—¶å€™ç”¨promiseä¼šå¾ˆå¥½ã€‚ä»¥å‰æˆ‘æ€»æ˜¯æƒ³ï¼Œæˆ‘å¯ä»¥ç›´æ¥åœ¨è°ƒç”¨promiseçš„åœ°æ–¹æ”¾ä¸€ä¸ªå‡½æ•°ï¼Œç„¶ååœ¨å†…éƒ¨è°ƒç”¨è¿™ä¸ªå¤–éƒ¨è°ƒç”¨çš„å‡½æ•°ã€‚è¿™å…¶å®å°±æ˜¯callbackã€‚å¦‚æœæœ‰å¾ˆå¤šå±‚è°ƒç”¨çš„æ—¶å€™ï¼Œå°±ä¼šå¾ˆä¹±ã€‚ç°åœ¨æˆ‘èƒ½çŸ¥é“promiseçš„å¥½äº†ã€‚ä¸‹é¢è¿˜ç”¨åˆ°äº†es6çš„ä¸€äº›å°ç‰¹æ€§ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465const https = require('https'), config = require('./config.json');var menus = require('./menu.json'), strMenus = JSON.stringify(menus);/** * [getAccessToken è·å–access_tokenå€¼] * return promiseå¯¹è±¡ */function getAccessToken()&#123; var access_token = \"\", optionAccess = \"https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=\"+config.appid+\"&amp;secret=\"+config.appSecret; return new Promise(function(resolve,reject)&#123; var body = \"\"; https.get(optionAccess,(res)=&gt;&#123; res.on('data',(chunk)=&gt;&#123; body += chunk; &#125;) res.on('end',()=&gt;&#123; resolve(JSON.parse(body).access_token); &#125;) &#125;).on('error',(e)=&gt;&#123; console.log(e.message); reject(e); &#125;) &#125;)&#125;/** * [æ‰§è¡ŒcreateMenu,åˆ›å»ºèœå•] */getAccessToken().then((access_token)=&gt;&#123; var data = \"\"; var options = &#123; protocol:'https:', host:'api.weixin.qq.com', port:443, path:'/cgi-bin/menu/create?access_token='+access_token, method:'POST', headers: &#123; 'Content-Type': 'application/x-www-form-urlencoded', 'Content-Length': Buffer.byteLength(strMenus) &#125; &#125; var req = https.request(options,(res)=&gt;&#123; res.on('data',(chunk)=&gt;&#123; data+=chunk; &#125;) res.on('end',()=&gt;&#123; var message = JSON.parse(data); if(message.errmsg)&#123; console.log(`è¿”å›ä¿¡æ¯:$&#123;message.errmsg&#125;; è¿”å›ç :$&#123;message.errcode&#125;`); &#125; &#125;) &#125;) req.on('error',(e)=&gt;&#123; console.log(e); &#125;) req.write(new Buffer(strMenus)); req.end();&#125;) æ€»ç»“çœ‹èµ·æ¥ä»£ç ç®€å•ï¼Œæˆ‘ä¸­é—´çœŸçš„èŠ±äº†ä¸å°‘æ—¶é—´ã€‚ä¸»è¦åŸå› è¿˜æ˜¯æ„Ÿè§‰è‡ªå·±çš„apiä¸ç†Ÿã€‚æ¯å†™ä¸€ä¸ªæ–¹æ³•è¿˜è¦å»æŸ¥å®˜æ–¹æ–‡æ¡£ï¼Œæ¯”å¦‚getå’Œpostæ–¹æ³•ï¼Œä¼šè·Ÿä»¥å‰ç”¨åˆ°çš„æ¯”å¦‚expresså’Œkoaçš„è¯·æ±‚apiå¼„æ··æ·†ã€‚çœŸæ˜¯ä¸å¼€å¿ƒã€‚å¸Œæœ›ä»¥åä¼šè¶Šæ¥è¶Šç†Ÿç»ƒã€‚åŠ æ²¹ï¼ :)","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"http://sevencai.github.io/tags/Nodejs/"}]},{"title":"React-mixinsåœ¨å¤šä¸ªç»„ä»¶ä¸­å¤ç”¨ä»£ç ","slug":"React-mixinsåœ¨å¤šä¸ªç»„ä»¶ä¸­å¤ç”¨ä»£ç ","date":"2016-06-22T14:07:03.000Z","updated":"2016-12-12T03:01:02.000Z","comments":true,"path":"2016/06/22/React-mixinsåœ¨å¤šä¸ªç»„ä»¶ä¸­å¤ç”¨ä»£ç /","link":"","permalink":"http://sevencai.github.io/2016/06/22/React-mixinsåœ¨å¤šä¸ªç»„ä»¶ä¸­å¤ç”¨ä»£ç /","excerpt":"","text":"Reactä½¿ç”¨ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿æ¥å¤„ç†çˆ¶å­ç»„ä»¶,è¿™ä¹Ÿæ˜¯Reactçš„ç‰¹ç‚¹ä¹‹ä¸€ã€‚ç»„ä»¶çš„å¤åˆåªæ˜¯Reactæä¾›çš„ç”¨äºå®šåˆ¶å’Œç‰¹æ®ŠåŒ–ç»„ä»¶çš„æ–¹å¼ä¹‹ä¸€ã€‚Reactçš„mixinsæä¾›äº†ä¸€ç§é€”å¾„ï¼Œå¸®åŠ©æˆ‘ä»¬å®šä¹‰å¯ä»¥åœ¨å¤šç»„ä»¶ä¹‹é—´å…±ç”¨çš„æ–¹æ³•ã€‚ Mixins will allow you to apply behaviors to multiple React components. å…ˆç›´è§‚çš„æ„Ÿå—ä¸‹1234567891011121314151617181920var Timer = React.createClass(&#123; getInitialState:function()&#123; return &#123;secondsElapsed:0&#125; &#125;, tick:function()&#123; this.setState(&#123;secondsElapsed:this.state.secondsElapsed+1&#125;) &#125;, componentDidMount:function()&#123; this.interval = setInterval(this.tick,1000) &#125;, componentWillUnmount:function()&#123; clearInterval(this.interval) &#125;, render:function()&#123; return ( &lt;div&gt;Seconds Elapsed:&#123;this.state.secondsElapsed&#125;&lt;/div&gt; ) &#125;&#125;) ReactDOM.render(&lt;Timer /&gt;,document.getElementById('example')) è°ƒç”¨çš„é¡ºåºæ˜¯ï¼š&quot;getInitialState&quot; ``&quot;componentDidMount&quot; ``&quot;tick&quot;ã€‚æ˜¯ä¸€ä¸ªç®€å•çš„å®šæ—¶å™¨ç»„ä»¶ã€‚ å½“æˆ‘ä»¬ç”¨äº†mixinï¼Œä¸è¿‡å¦‚æœæˆ‘ä»¬æœ‰å¾ˆå¤šçš„å®šæ—¶å™¨ï¼Œæ‰§è¡Œçš„éƒ½æ˜¯ä¸Šé¢çš„è¿™æ®µä»£ç ï¼Œéš¾é“æˆ‘ä»¬è¦å†™å¾ˆå¤šå—ï¼Ÿä»»ä½•ä¸€ä¸ªè¯­è¨€é‡Œé¢éƒ½æœ‰å¤ç”¨çš„æ–¹æ³•ï¼Œä»»ä½•ä¸€ä¸ªæ¡†æ¶ä¹Ÿæ˜¯ã€‚è¿sassï¼Œlessä¹Ÿéƒ½æœ‰ :) ã€‚ä¸‹é¢æ˜¯react-mixinsçš„ç”¨æ³•ã€‚12345678910111213141516171819202122232425var IntervalMixin = function(interval)&#123; return &#123; componentDidMount:function()&#123; this._interval = setInterval(this.tick,1000) &#125;, componentWillUnmount:function()&#123; clearInterval(this._interval) &#125; &#125;&#125;var Timer = React.createClass(&#123; mixins:[IntervalMixin(1000)], getInitialState:function()&#123; return &#123;secondsElapsed:0&#125; &#125;, tick:function()&#123; this.setState(&#123;secondsElapsed:this.state.secondsElapsed+1&#125;) &#125;, render:function()&#123; return ( &lt;div&gt;Seconds Elapsed:&#123;this.state.secondsElapsed&#125;&lt;/div&gt; ) &#125;&#125;)ReactDOM.render(&lt;Timer /&gt;,document.getElementById('example')) è¿™ä¹ˆçœ‹æ¥mixinsæ˜¯ä¸æ˜¯æ˜¯ç›¸å½“äºæŠŠä¸€éƒ¨åˆ†åŠŸèƒ½æå–å‡ºæ¥å…¬ç”¨ï¼Ÿæ›´é€šä¿—çš„è§£é‡Šï¼šå°±æ˜¯ç±»ä¼¼äºmergeï¼ŒA æœ‰3ä¸ªæ–¹æ³• compomentæœ‰2ä¸ªæ–¹æ³•ï¼Œmixin[A]ä»¥å,å°±æœ‰5ä¸ªæ–¹æ³•ã€‚å¹¶ä¸”è°ƒç”¨æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ å‡ ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹åœ¨mixinä¸­å†™çš„ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„å›è°ƒéƒ½ä¼šè¢«åˆå¹¶ï¼Œä¹Ÿå°±æ˜¯ä»–ä»¬éƒ½ä¼šæ‰§è¡Œï¼Œè€Œä¸ä¼šäº’ç›¸è¦†ç›–æ‰ã€‚æ¯”å¦‚123456React.createClass(&#123; mixins:[&#123; getInitialState:function()&#123;return &#123;a:1&#125;&#125; &#125;], getInitialState:function()&#123;return &#123;b:2&#125;&#125;&#125;) è¿™æ ·ä¸‹æ¥ï¼Œæœ€åå¾—åˆ°çš„åˆå§‹stateæ˜¯{a:1,b:2},å¦‚æœmixinä¸­çš„æ–¹æ³•å’Œç»„ä»¶ç±»ä¸­çš„æ–¹æ³•è¿”å›çš„å¯¹è±¡ä¸­å­˜åœ¨é‡å¤çš„é”®ï¼ŒReactä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯æ¥è­¦ç¤ºã€‚ å†æ¯”å¦‚ï¼šä½ åœ¨mixinä¸­å¯ä»¥å®šä¹‰ componentDidMountæ¥åˆå§‹åŒ–ç»„ä»¶ï¼Œä»–ä¸ä¼šè¦†ç›–æ‰ä½¿ç”¨è¿™ä¸ªmixinçš„ç»„ä»¶ã€‚å®é™…æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šå…ˆæ‰§è¡Œmixinçš„ componentDidMountï¼Œæœ€åæ‰§è¡Œç»„ä»¶çš„ componentDidMountæ–¹æ³•ã€‚ å› ä¸ºmixinçš„ä½œç”¨æ˜¯æŠ½ç¦»å…¬å…±åŠŸèƒ½ï¼Œä¸å­˜åœ¨æ¸²æŸ“domçš„éœ€è¦ï¼Œæ‰€ä»¥å®ƒæ²¡æœ‰renderæ–¹æ³•ã€‚å¦‚æœä½ å®šä¹‰äº†renderæ–¹æ³•ï¼Œé‚£ä¹ˆä»–ä¼šå’Œç»„ä»¶çš„renderæ–¹æ³•å†²çªè€ŒæŠ¥é”™ã€‚ åŒæ ·ï¼Œmixinä¸åº”è¯¥æ±¡æŸ“stateï¼Œæ‰€ä»¥ä»–ä¹Ÿæ²¡æœ‰ setState æ–¹æ³•ã€‚mixinåº”è¯¥åªæä¾›æ¥å£ï¼ˆå³æ–¹æ³•ï¼‰ï¼Œä¸åº”è¯¥æä¾›ä»»ä½•å±æ€§ã€‚mixinå†…éƒ¨çš„å±æ€§æœ€å¥½æ˜¯é€šè¿‡é—­åŒ…çš„å½¢å¼ä½œä¸ºç§æœ‰å˜é‡å­˜åœ¨ã€‚ 1234var Timer = function() &#123; var test = 1;//ç§æœ‰å±æ€§ return &#123;test + 1&#125; &#125; é™¤äº†ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å¯ä»¥é‡å¤ä»¥å¤–ï¼Œå…¶ä»–çš„æ–¹æ³•éƒ½ä¸å¯ä»¥é‡å¤ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚æ¯”å¦‚æœ‰ä¸€ä¸ªAmixin,æœ‰ä¸€ä¸ªBmixin,å¹¶ä¸”Amixinå’ŒBmixinä¸­éƒ½æœ‰æ–¹æ³•find(),å½“ä»–ä»¬åŒæ—¶è¢«å¼•å…¥åˆ°ä¸€ä¸ªcomponentæ—¶ï¼Œå°±ä¼šæŠ¥é”™ã€‚å†æ¯”å¦‚Aminxé‡Œé¢æœ‰ï¼Œå¼•å…¥å®ƒçš„componentä¹Ÿæœ‰find()æ–¹æ³•ã€‚é‚£ä¹ˆä¹Ÿä¼šæŠ¥é”™ã€‚é™¤éä»–ä»¬ä¸æ˜¯find()çš„æ–¹æ³•ï¼Œè€Œæ˜¯å£°æ˜å‘¨æœŸçš„æ–¹æ³•ã€‚123456789101112131415161718192021222324252627var Amixin = &#123; find: function () &#123; //... &#125;&#125;;var Bmixin = &#123; find: function () &#123; //... &#125;&#125;;//ç¬¬ä¸€ç§æƒ…å†µvar Component = React.createClass(&#123; mixins: [Amixin,Bmixin], render: function () &#123; return ( //... ) &#125;&#125;);//æˆ–è€…ç¬¬äºŒç§æƒ…å†µvar Component = React.createClass(&#123; mixins: [Amixin], find:function()&#123; //... &#125; render: function () &#123; return ( //... ) &#125;&#125;); è¿™ä¸¤ç§æƒ…å†µéƒ½æŠ¥é”™ã€‚é‚£ä¹ˆå¦‚æœè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ç¡®å®ç”¨çš„æ˜¯ç”Ÿå‘½å‘¨æœŸé‡Œé¢çš„æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨ç¬¬ä¸€ç§æƒ…å†µé‡Œé¢ï¼Œå£°æ˜å‘¨æœŸæ–¹æ³•è°ƒç”¨é¡ºåºåˆæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ Mixinsæ•°ç»„å¼•å…¥çš„é¡ºåºï¼Œå†³å®šäº†Mixinsé‡Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„æ‰§è¡Œé¡ºåºã€‚å¹¶ä¸”éƒ½åœ¨å½“å‰ç»„ä»¶é‡Œé¢çš„è¯¥æ–¹æ³•å‰é¢è°ƒç”¨ã€‚ å¦ä¸€ä¸ªä¾‹å­ä¸‹é¢è¿™ä¸ªä¾‹å­è®°å½•äº†ä»2014/1/1åˆ°ç°åœ¨çš„æ€»ç§’æ•°ã€‚123456789101112131415161718192021222324252627var IntervalMixin = &#123; setInterval:function(callback,interval)&#123; var token = setInterval(callback,interrval) this._intervals.push(token) return token &#125;, componentDidMount:function()&#123; this._intervals = [] &#125;, componentWillUnmount:function()&#123; this._interval.map(clearInterval) &#125; &#125; var Timer = React.createClass(&#123; mixins:[IntervalMixin], componentDidMount:function()&#123; this.setInterval(this.forceUpdate.bind(this),1000) &#125;, render:function()&#123; var from = Number(new Date(2014,0,1)) var to = Date.now() return ( &lt;div&gt;&#123;Math.round(to-from)/1000&#125;&lt;/div&gt; ) &#125; &#125;) ReactDOM.render(&lt;Timer /&gt;,document.getElementById('example')) æ€»ç»“è¿˜æ˜¯å¾ˆå¥½ç†è§£çš„ã€‚mixinså¤§å¤§çš„è§£å†³äº†ä»£ç é‡å¤çš„å¼ºå¤§çš„å·¥å…·ã€‚ä¹Ÿå‡å°‘äº†æˆ‘ä»¬çš„é˜…è¯»é‡ã€‚åŒæ—¶å…è®¸æˆ‘ä»¬åœ¨ä¸æ±¡æŸ“ç»„ä»¶æœ¬èº«çš„æƒ…å†µä¸‹åšä¸€äº›ä¸‘é™‹çš„å¤„ç†ã€‚å½“ç„¶ä¹Ÿåº”è¯¥å–æ€è€ƒï¼Œä»€ä¹ˆæ—¶å€™ç”¨mixinæ¯”è¾ƒå¥½ã€‚ä¸è¦ç›²ç›®çš„ç”¨ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"é«˜å¤§ä¸Šçš„æ•°æ®é“¾è·¯å±‚çš„å­¦ä¹ å’Œæ•´ç†","slug":"é«˜å¤§ä¸Šçš„æ•°æ®é“¾è·¯å±‚çš„å­¦ä¹ å’Œæ•´ç†","date":"2016-06-15T13:29:01.000Z","updated":"2016-06-15T13:54:20.000Z","comments":true,"path":"2016/06/15/é«˜å¤§ä¸Šçš„æ•°æ®é“¾è·¯å±‚çš„å­¦ä¹ å’Œæ•´ç†/","link":"","permalink":"http://sevencai.github.io/2016/06/15/é«˜å¤§ä¸Šçš„æ•°æ®é“¾è·¯å±‚çš„å­¦ä¹ å’Œæ•´ç†/","excerpt":"","text":"æ„Ÿè§‰è¿™å¯èƒ½æ˜¯æœ€åä¸€æ¬¡è®¤çœŸçš„å­¦ä¹ æ•°æ®é“¾è·¯å±‚äº†ï¼Œä»¥åTCP/IP/HTTPè¿˜ä¼šå†å»çœ‹ä¸“é—¨çš„ä¹¦ï¼Œä½†æ˜¯æ•°æ®é“¾è·¯å±‚æœ‰å¯èƒ½ä»¥åä¸ä¼šæ¥è§¦äº†ã€‚æ‰€ä»¥æˆ‘è§‰å¾—å¾ˆæœ‰å¿…è¦è®¤çœŸçš„è®°å½•å’Œæ€»ç»“ä¸€æ¬¡ã€‚å¤§å­¦å·²ç»è¿‡å»äº†3/4,å¤§å››åº”è¯¥ä¹Ÿéƒ½åœ¨å·¥ä½œä¸­åº¦è¿‡ã€‚æœ€è¿‘ä½“éªŒæ¯”è¾ƒæ·±ï¼Œçæƒœç°åœ¨çš„æ—¶å…‰ã€‚æˆ‘çˆ±æˆ‘çš„å®¤å‹ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯è®°å½•æˆ‘æœ€æƒ³çŸ¥é“ï¼Œä¹Ÿæ˜¯æˆ‘ä»¥åè¿˜æƒ³çœ‹åˆ°çš„ä¸€äº›çŸ¥è¯†ç‚¹ã€‚æ–‡ç« é‡Œé¢å¯èƒ½æœ‰ä¸€äº›æ›´ç»†èŠ‚çš„åœ°æ–¹ï¼Œæˆ‘ä¸ä¼šè®²ã€‚æ¯”å¦‚PPPç”±å“ªäº›éƒ¨åˆ†ç»„æˆä¹‹ç±»çš„ã€‚æˆ‘æ„Ÿè§‰æˆ‘è®°äº†ä»¥åä¹Ÿä¸ä¼šçœ‹ï¼Œæ‰€ä»¥å°±å¹²è„†è®°å½•ä¸‹æˆ‘æ„Ÿå…´è¶£çš„ä¸œè¥¿ã€‚:) è¯´æ˜ï¼šæ•´ç†å’Œå­¦ä¹ è‡ªï¼šã€Šè®¡ç®—æœºç½‘ç»œç¬¬6ç‰ˆã€‹ -è°¢å¸Œä»ç¼–è‘—ã€‚æ„Ÿè°¢ã€‚ æ•°æ®é“¾è·¯å±‚æ˜¯OSIå‚è€ƒæ¨¡å‹ä¸­çš„ç¬¬äºŒå±‚ï¼Œä»‹ä¹äºç‰©ç†å±‚å’Œç½‘ç»œå±‚ä¹‹é—´ã€‚æ•°æ®é“¾è·¯å±‚åœ¨ç‰©ç†å±‚æä¾›çš„æœåŠ¡çš„åŸºç¡€ä¸Šå‘ç½‘ç»œå±‚æä¾›æœåŠ¡ï¼Œå…¶æœ€åŸºæœ¬çš„æœåŠ¡æ˜¯å°†æºè‡ªç½‘ç»œå±‚æ¥çš„æ•°æ®å¯é åœ°ä¼ è¾“åˆ°ç›¸é‚»èŠ‚ç‚¹çš„ç›®æ ‡æœºç½‘ç»œå±‚ã€‚ä¸ºè¾¾åˆ°è¿™ä¸€ç›®çš„ï¼Œæ•°æ®é“¾è·¯å¿…é¡»å…·å¤‡ä¸€ç³»åˆ—ç›¸åº”çš„åŠŸèƒ½ï¼Œä¸»è¦æœ‰ï¼šå¦‚ä½•å°†æ•°æ®ç»„åˆæˆæ•°æ®å—ï¼Œåœ¨æ•°æ®é“¾è·¯å±‚ä¸­ç§°è¿™ç§æ•°æ®å—ä¸ºå¸§ï¼ˆframeï¼‰ï¼Œå¸§æ˜¯æ•°æ®é“¾è·¯å±‚çš„ä¼ é€å•ä½ï¼›å¦‚ä½•æ§åˆ¶å¸§åœ¨ç‰©ç†ä¿¡é“ä¸Šçš„ä¼ è¾“ï¼ŒåŒ…æ‹¬å¦‚ä½•å¤„ç†ä¼ è¾“å·®é”™ï¼Œå¦‚ä½•è°ƒèŠ‚å‘é€é€Ÿç‡ä»¥ä½¿ä¸æ¥æ”¶æ–¹ç›¸åŒ¹é…ï¼›ä»¥åŠåœ¨ä¸¤ä¸ªç½‘ç»œå®ä½“ä¹‹é—´æä¾›æ•°æ®é“¾è·¯é€šè·¯çš„å»ºç«‹ã€ç»´æŒå’Œé‡Šæ”¾çš„ç®¡ç†ã€‚â€“from wiki é“¾è·¯ä¸æ•°æ®é“¾è·¯é¦–å…ˆåŒºåˆ†ä¸‹ä¸‹é¢ä¸¤ä¸ªæ¦‚å¿µï¼šé“¾è·¯(link)æ˜¯ä¸€æ¡æ— æºçš„ç‚¹åˆ°ç‚¹çš„ç‰©ç†çº¿è·¯æ®µï¼Œä¸­é—´æ²¡æœ‰ä»»ä½•å…¶ä»–çš„äº¤æ¢ç»“ç‚¹ã€‚ä¸€æ¡é“¾è·¯åªæ˜¯ä¸€æ¡é€šè·¯çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ã€‚ æ•°æ®é“¾è·¯(data link) é™¤äº†ç‰©ç†çº¿è·¯å¤–ï¼Œè¿˜å¿…é¡»æœ‰é€šä¿¡åè®®æ¥æ§åˆ¶è¿™äº›æ•°æ®çš„ä¼ è¾“ã€‚è‹¥æŠŠå®ç°è¿™äº›åè®®çš„ç¡¬ä»¶å’Œè½¯ä»¶åŠ åˆ°é“¾è·¯ä¸Šï¼Œå°±æ„æˆäº†æ•°æ®é“¾è·¯ã€‚ ç°åœ¨æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨é€‚é…å™¨ï¼ˆå³ç½‘å¡ï¼‰æ¥å®ç°è¿™äº›åè®®çš„ç¡¬ä»¶å’Œè½¯ä»¶ã€‚ä¸€èˆ¬çš„é€‚é…å™¨éƒ½åŒ…æ‹¬äº†æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚è¿™ä¸¤å±‚çš„åŠŸèƒ½ã€‚ å…¶å®æˆ‘å…ˆå‰ä¸€ç›´ä¸å¤ªæ˜ç™½é€‚é…å™¨è¿™ä¸ªä¸œè¥¿ã€‚ä¸‹é¢ä¼šæœ‰è¯¦ç»†ç‚¹çš„è§£é‡Šã€‚ é“¾è·¯å±‚ä¸¤ç§é€šä¿¡æ–¹å¼æ•°æ®é“¾è·¯å±‚ä½¿ç”¨çš„ä¿¡é“ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§ç±»å‹ï¼š ç‚¹å¯¹ç‚¹ä¿¡é“ã€‚è¿™ç§ä¿¡é“ä½¿ç”¨ä¸€å¯¹ä¸€çš„ç‚¹å¯¹ç‚¹é€šä¿¡æ–¹å¼ã€‚ å¹¿æ’­ä¿¡é“ã€‚è¿™ç§ä¿¡é“ä½¿ç”¨ä¸€å¯¹å¤šçš„å¹¿æ’­é€šä¿¡æ–¹å¼ï¼Œå› æ­¤è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ã€‚å¹¿æ’­ä¿¡é“ä¸Šè¿æ¥çš„ä¸»æœºå¾ˆå¤šï¼Œå› æ­¤å¿…é¡»ä½¿ç”¨ä¸“ç”¨çš„å…±äº«ä¿¡é“åè®®æ¥åè°ƒè¿™äº›ä¸»æœºçš„æ•°æ®å‘é€ã€‚ æ•°æ®é“¾è·¯å±‚çš„æ•°æ®å•å…ƒæ˜¯å¸§ æ•°æ®é“¾è·¯å±‚åƒä¸ªæ•°å­—ç®¡é“: å¸¸å¸¸åœ¨ä¸¤ä¸ªå¯¹ç­‰çš„æ•°æ®é“¾è·¯å±‚ä¹‹é—´ç”»å‡ºä¸€ä¸ªæ•°å­—ç®¡é“ï¼Œè€Œåœ¨è¿™æ¡æ•°å­—ç®¡é“ä¸Šä¼ è¾“çš„æ•°æ®å•ä½æ˜¯å¸§ã€‚ ä½¿ç”¨ç‚¹å¯¹ç‚¹é€šä¿¡ä¸‰ä¸ªåŸºæœ¬é—®é¢˜(1) å°è£…æˆå¸§(2) é€æ˜ä¼ è¾“(3) å·®é”™æ§åˆ¶ å°è£…æˆå¸§å°è£…æˆå¸§(framing)å°±æ˜¯åœ¨ä¸€æ®µæ•°æ®çš„å‰ååˆ†åˆ«æ·»åŠ é¦–éƒ¨å’Œå°¾éƒ¨ï¼Œç„¶åå°±æ„æˆäº†ä¸€ä¸ªå¸§ã€‚ç¡®å®šå¸§çš„ç•Œé™ã€‚ é¦–éƒ¨å’Œå°¾éƒ¨çš„ä¸€ä¸ªé‡è¦ä½œç”¨å°±æ˜¯è¿›è¡Œå¸§å®šç•Œã€‚ é€æ˜ä¼ è¾“ å¦‚ä½•è§£å†³é€æ˜ä¼ è¾“é—®é¢˜å‘¢ï¼Ÿ å‘é€ç«¯çš„æ•°æ®é“¾è·¯å±‚åœ¨æ•°æ®ä¸­å‡ºç°æ§åˆ¶å­—ç¬¦â€œSOHâ€æˆ–â€œEOTâ€çš„å‰é¢æ’å…¥ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦â€œESCâ€(å…¶åå…­è¿›åˆ¶ç¼–ç æ˜¯ 1B)ã€‚ å­—èŠ‚å¡«å……(byte stuffing)æˆ–å­—ç¬¦å¡«å……(character stuffing)â€”â€”æ¥æ”¶ç«¯çš„æ•°æ®é“¾è·¯å±‚åœ¨å°†æ•°æ®é€å¾€ç½‘ç»œå±‚ä¹‹å‰åˆ é™¤æ’å…¥çš„è½¬ä¹‰å­—ç¬¦ã€‚ å¦‚æœè½¬ä¹‰å­—ç¬¦ä¹Ÿå‡ºç°æ•°æ®å½“ä¸­ï¼Œé‚£ä¹ˆåº”åœ¨è½¬ä¹‰å­—ç¬¦å‰é¢æ’å…¥ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦ã€‚å½“æ¥æ”¶ç«¯æ”¶åˆ°è¿ç»­çš„ä¸¤ä¸ªè½¬ä¹‰å­—ç¬¦æ—¶ï¼Œå°±åˆ é™¤å…¶ä¸­å‰é¢çš„ä¸€ä¸ªã€‚ å·®é”™æ£€æµ‹åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½ä¼šäº§ç”Ÿæ¯”ç‰¹å·®é”™ï¼š1 å¯èƒ½ä¼šå˜æˆ 0 è€Œ 0 ä¹Ÿå¯èƒ½å˜æˆ 1ã€‚ åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œä¼ è¾“é”™è¯¯çš„æ¯”ç‰¹å æ‰€ä¼ è¾“æ¯”ç‰¹æ€»æ•°çš„æ¯”ç‡ç§°ä¸ºè¯¯ç ç‡ BER (Bit Error Rate)ã€‚ è¯¯ç ç‡ä¸ä¿¡å™ªæ¯”æœ‰å¾ˆå¤§çš„å…³ç³»ã€‚ ä¸ºäº†ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§ï¼Œåœ¨è®¡ç®—æœºç½‘ç»œä¼ è¾“æ•°æ®æ—¶ï¼Œå¿…é¡»é‡‡ç”¨å„ç§å·®é”™æ£€æµ‹æªæ–½ã€‚ è¿™é‡Œé¢åˆæ¶‰åŠäº†å¾ªç¯å†—ä½™æ£€éªŒçš„åŸç†ï¼Œ-åœ¨æ•°æ®é“¾è·¯å±‚ä¼ é€çš„å¸§ä¸­ï¼Œå¹¿æ³›ä½¿ç”¨äº†å¾ªç¯å†—ä½™æ£€éªŒ CRC çš„æ£€é”™æŠ€æœ¯ã€‚ æ³¨æ„è¿˜è¦åŒºåˆ†ä¸‹ï¼šå¸§æ£€éªŒåºåˆ— FCS å¸§æ£€éªŒåºåˆ—ä¸åŒä¸CRCï¼ŒCRC æ˜¯ä¸€ç§å¸¸ç”¨çš„æ£€é”™æ–¹æ³•ï¼Œè€Œ FCS æ˜¯æ·»åŠ åœ¨æ•°æ®åé¢çš„å†—ä½™ç ã€‚FCS å¯ä»¥ç”¨ CRC è¿™ç§æ–¹æ³•å¾—å‡ºï¼Œä½† CRC å¹¶éç”¨æ¥è·å¾— FCS çš„å”¯ä¸€æ–¹æ³•ã€‚ PPPåè®®ç°åœ¨å…¨ä¸–ç•Œä½¿ç”¨å¾—æœ€å¤šçš„æ•°æ®é“¾è·¯å±‚åè®®æ˜¯ç‚¹å¯¹ç‚¹åè®® PPP (Point-to-Point Protocol)ã€‚ ç”¨æˆ·ä½¿ç”¨æ‹¨å·ç”µè¯çº¿æ¥å…¥å› ç‰¹ç½‘æ—¶ï¼Œä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨ PPP åè®®ã€‚ è¿™é‡Œé¢åè®®å…·ä½“çš„æ ¼å¼å°±ä¸ä»‹ç»äº†ã€‚å°±çœ‹ä¸‹é‡Œé¢è§£å†³é€æ˜ä¼ è¾“ç”¨çš„æ˜¯é›¶æ¯”ç‰¹å¡«å……è¿™ç§æ–¹æ³•ã€‚ åœ¨å‘é€ç«¯ï¼Œåªè¦å‘ç°æœ‰ 5 ä¸ªè¿ç»­ 1ï¼Œåˆ™ç«‹å³å¡«å…¥ä¸€ä¸ª 0ã€‚æ¥æ”¶ç«¯å¯¹å¸§ä¸­çš„æ¯”ç‰¹æµè¿›è¡Œæ‰«æã€‚æ¯å½“å‘ç° 5 ä¸ªè¿ç»­1æ—¶ï¼Œå°±æŠŠè¿™ 5 ä¸ªè¿ç»­ 1 åçš„ä¸€ä¸ª 0 åˆ é™¤ã€‚ ä¸ºä»€ä¹ˆç‚¹å¯¹ç‚¹åè®®æ˜¯æ•°æ®é“¾è·¯å±‚ä½¿ç”¨çš„æœ€å¤šçš„åè®®å‘¢ï¼Ÿå› ä¸ºå®ƒçš„ç‰¹ç‚¹å¾ˆæ˜æ˜¾ï¼šç®€å•ï¼›åªæ£€æµ‹å·®é”™è€Œä¸æ˜¯çº æ­£å·®é”™ï¼›ä¸é€‚ç”¨åºå·ï¼Œä¹Ÿä¸è¿›è¡Œæµé‡æ§åˆ¶ï¼Œå¯ä»¥åŒæ—¶æ”¯æŒå¤šç§ç½‘ç»œå±‚åè®®ã€‚ ä½¿ç”¨å¹¿æ’­ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚å±€åŸŸç½‘çš„æ•°æ®é“¾è·¯å±‚ å±€åŸŸç½‘æœ€ä¸»è¦çš„ç‰¹ç‚¹æ˜¯ï¼šç½‘ç»œä¸ºä¸€ä¸ªå•ä½æ‰€æ‹¥æœ‰ï¼Œä¸”åœ°ç†èŒƒå›´å’Œç«™ç‚¹æ•°ç›®å‡æœ‰é™ã€‚ å±€åŸŸç½‘å…·æœ‰å¦‚ä¸‹çš„ä¸€äº›ä¸»è¦ä¼˜ç‚¹ï¼š å…·æœ‰å¹¿æ’­åŠŸèƒ½ï¼Œä»ä¸€ä¸ªç«™ç‚¹å¯å¾ˆæ–¹ä¾¿åœ°è®¿é—®å…¨ç½‘ã€‚å±€åŸŸç½‘ä¸Šçš„ä¸»æœºå¯å…±äº«è¿æ¥åœ¨å±€åŸŸç½‘ä¸Šçš„å„ç§ç¡¬ä»¶å’Œè½¯ä»¶èµ„æºã€‚ ä¾¿äºç³»ç»Ÿçš„æ‰©å±•å’Œé€æ¸åœ°æ¼”å˜ï¼Œå„è®¾å¤‡çš„ä½ç½®å¯çµæ´»è°ƒæ•´å’Œæ”¹å˜ã€‚ æé«˜äº†ç³»ç»Ÿçš„å¯é æ€§ã€å¯ç”¨æ€§å’Œæ®‹å­˜æ€§ã€‚ ä¸‹é¢æ˜¯å¯èƒ½çš„å±€åŸŸç½‘æ‹“æ‰‘ç»“æ„ï¼š æ•°æ®é“¾è·¯å±‚çš„ä¸¤ä¸ªå­å±‚ä¸ºäº†ä½¿æ•°æ®é“¾è·¯å±‚èƒ½æ›´å¥½åœ°é€‚åº”å¤šç§å±€åŸŸç½‘æ ‡å‡†ï¼Œ802 å§”å‘˜ä¼šå°±å°†å±€åŸŸç½‘çš„æ•°æ®é“¾è·¯å±‚æ‹†æˆä¸¤ä¸ªå­å±‚ï¼š é€»è¾‘é“¾è·¯æ§åˆ¶ LLC (Logical Link Control)å­å±‚ã€‚ åª’ä½“æ¥å…¥æ§åˆ¶ MAC (Medium Access Control)å­å±‚ã€‚ ä½†æ˜¯ç°åœ¨å·²ç»ä¸é€‚ç”¨LLCã€‚LLCæˆä¸ºäº†è¿‡å»æ—¶ã€‚ é€‚é…å™¨çš„ä½œç”¨ ç½‘ç»œæ¥å£æ¿åˆç§°ä¸ºé€šä¿¡é€‚é…å™¨(adapter)æˆ–ç½‘ç»œæ¥å£å¡ NIC (Network Interface Card)ï¼Œæˆ–â€œç½‘å¡â€ã€‚ é€‚é…å™¨çš„é‡è¦åŠŸèƒ½ï¼š è¿›è¡Œä¸²è¡Œ/å¹¶è¡Œè½¬æ¢ã€‚ å¯¹æ•°æ®è¿›è¡Œç¼“å­˜ã€‚ åœ¨è®¡ç®—æœºçš„æ“ä½œç³»ç»Ÿå®‰è£…è®¾å¤‡é©±åŠ¨ç¨‹åºã€‚ å®ç°ä»¥å¤ªç½‘åè®®ã€‚ è®¡ç®—æœºå®é™…ä¸Šæ˜¯é€šè¿‡é€‚é…å™¨å’Œå±€åŸŸç½‘è¿›è¡Œé€šä¿¡çš„ã€‚ è®¡ç®—æœºä¸å¤–ç•Œå±€åŸŸç½‘çš„è¿æ¥æ˜¯é€šè¿‡é€šä¿¡é€‚é…å™¨ã€‚é€‚é…å™¨åŸæ¥æ˜¯æ’å…¥ä¸»æœºç®±å†…çš„ä¸€å—ç½‘ç»œæ¥å£æ¿ï¼Œæˆ–è€…æ˜¯åœ¨ä¸ªäººPCä¸Šçš„ä¸€å—ç½‘ç»œæ¥å£æ¿ã€‚è¿™ç§æ¥å£æ¿åˆç§°ä¸ºç½‘ç»œæ¥å£å¡NICï¼Œæˆ–è€…æˆ‘ä»¬ç»å¸¸ç§°å®ƒä¸ºç½‘å¡ã€‚ ç”±äºç°åœ¨è®¡ç®—æœºä¸»æ¿ä¸Šéƒ½å·²ç»åµŒå…¥äº†è¿™ç§é€‚é…å™¨ï¼Œä¸å†å•ç‹¬ä½¿ç”¨ç½‘å¡äº†ã€‚å› æ­¤æˆ‘ä»¬ä¸€èˆ¬å¯ä»¥ç›´æ¥ç§°ä¸ºé€‚é…å™¨äº†ã€‚ é€‚é…å™¨å’Œå±€åŸŸç½‘çš„é€šä¿¡æ˜¯é€šè¿‡ç”µç¼†ç«é¹¤åŒç»çº¿ä»¥ä¸²è¡Œä¼ è¾“æ–¹å¼è¿›è¡Œçš„ã€‚è€Œé€‚é…å™¨å’Œè®¡ç®—æœºä¹‹é—´çš„é€šä¿¡åˆ™æ˜¯é€šè¿‡è®¡ç®—æœºä¸»æ¿ä¸Šçš„I/Oæ€»çº¿ä»¥å¹¶è¡Œä¼ è¾“çš„æ–¹å¼è¿›è¡Œçš„ã€‚å› æ­¤é€‚é…å™¨çš„ä¸€ä¸ªé‡è¦åŠŸèƒ½å°±æ˜¯è¦è¿›è¡Œæ•°æ®ä¸²è¡Œå’Œå¹¶è¡Œä¼ è¾“çš„è½¬æ¢ã€‚ç”±äºç½‘ç»œä¸Šçš„æ•°æ®ç‡å’Œè®¡ç®—æœºæ€»çº¿ä¸Šçš„æ•°æ®ç‡å¹¶ä¸ç›¸åŒï¼Œå› æ­¤åœ¨é€‚é…å™¨ä¸­å¿…é¡»è£…æœ‰å¯¹æ•°æ®è¿›è¡Œç¼“å­˜çš„å­˜å‚¨èŠ¯ç‰‡ã€‚ è‹¥åœ¨ä¸»æ¿ä¸Šæ’å…¥é€‚é…å™¨æ—¶ï¼Œè¿˜å¿…é¡»æŠŠç®¡ç†è¯¥é€‚é…å™¨çš„è®¾å¤‡é©±åŠ¨ç¨‹åºå®‰è£…åœ¨è®¡ç®—æœºæ“ä½œç³»ç»Ÿä¸Šã€‚è¿™ä¸ªé©±åŠ¨ç¨‹åºä»¥åå°±ä¼šå‘Šè¯‰é€‚é…å™¨ï¼Œåº”å½“ä»å­˜å‚¨å™¨çš„ä»€ä¹ˆä½ç½®å§å¤šé•¿çš„æ•°æ®å—å‘é€åˆ°å±€åŸŸç½‘ã€‚æˆ–è€…åº”å½“åœ¨å­˜å‚¨å™¨çš„ä»€ä¹ˆä½ç½®å§å±€åŸŸç½‘ä¼ é€çš„æ•°æ®å—å­˜å‚¨ä¸‹æ¥ã€‚é€‚é…å™¨è¿˜è¦èƒ½å®ç°ä»¥å¤ªç½‘çš„åè®®ã€‚ é€‚é…å™¨åœ¨æ¥æ”¶å’Œå‘é€å„ç§å¸§çš„æ—¶å€™ä¸ä½¿ç”¨è®¡ç®—æœºçš„CPU,è¿™æ˜¯CPUå¯ä»¥å¤„ç†å…¶ä»–çš„ä»»åŠ¡ã€‚å½“é€‚é…å™¨æ”¶åˆ°æœ‰å·®é”™çš„å¸§æ—¶ï¼Œå°±æŠŠè¿™ä¸ªå¸§ä¸¢å¼ƒå¹¶ä¸”ä¸å¿…é€šçŸ¥è®¡ç®—æœºã€‚å½“é€‚é…å™¨æ”¶åˆ°æ­£ç¡®çš„å¸§æ—¶ï¼Œå®ƒå°±ä½¿ç”¨ä¸­æ–­æ¥é€šçŸ¥è¯¥è®¡ç®—æœºå¹¶äº¤ä»˜åè®®æ ˆä¸­çš„ç½‘ç»œå±‚ã€‚å½“è®¡ç®—æœºè¦å‘é€IPæ•°æ®æŠ¥æ—¶ï¼Œå°±ç”±åè®®æ ˆæŠŠIPæ•°æ®æŠ¥å‘ä¸‹äº¤ä¸ªé€‚é…å™¨ï¼Œç»„è£…æˆå¸§ä»¥åå‘é€åˆ°å±€åŸŸç½‘ã€‚å¯ä»¥å¥½å¥½çœ‹çœ‹ä¸Šé¢çš„ä¸€ä¸ªå›¾ã€‚ ä¸Šé¢çš„å‡ æ®µæ–‡å­—æ‘˜å½•è‡ªã€Šè®¡ç®—æœºç½‘ç»œç¬¬å…­ç‰ˆã€‹ï¼Œæ„Ÿè°¢ï¼Œå› ä¸ºè§£å†³äº†æˆ‘å¾ˆå¤šç–‘æƒ‘ï¼Œä»¥ååˆ«äººå†è¯´é«˜å¤§ä¸Šçš„é€‚é…å™¨çš„æ—¶å€™ï¼Œæˆ‘å°±çŸ¥é“å®ƒåˆ°åº•æ˜¯ä»€ä¹ˆåŸç†äº†ï¼Œå˜»å˜»ã€‚ CSMA/CD åè®®æœ€åˆçš„ä»¥å¤ªç½‘æ˜¯å°†è®¸å¤šè®¡ç®—æœºéƒ½è¿æ¥åˆ°ä¸€æ ¹æ€»çº¿ä¸Šã€‚å½“åˆè®¤ä¸ºè¿™æ ·çš„è¿æ¥æ–¹æ³•æ—¢ç®€å•åˆå¯é ï¼Œå› ä¸ºæ€»çº¿ä¸Šæ²¡æœ‰æœ‰æºå™¨ä»¶ã€‚ æ€»çº¿ä¸Šçš„æ¯ä¸€ä¸ªå·¥ä½œçš„è®¡ç®—æœºéƒ½èƒ½æ£€æµ‹åˆ° B å‘é€çš„æ•°æ®ä¿¡å·ã€‚ ç”±äºåªæœ‰è®¡ç®—æœº D çš„åœ°å€ä¸æ•°æ®å¸§é¦–éƒ¨å†™å…¥çš„åœ°å€ä¸€è‡´ï¼Œå› æ­¤åªæœ‰ D æ‰æ¥æ”¶è¿™ä¸ªæ•°æ®å¸§ã€‚ å…¶ä»–æ‰€æœ‰çš„è®¡ç®—æœºï¼ˆA, C å’Œ Eï¼‰éƒ½æ£€æµ‹åˆ°ä¸æ˜¯å‘é€ç»™å®ƒä»¬çš„æ•°æ®å¸§ï¼Œå› æ­¤å°±ä¸¢å¼ƒè¿™ä¸ªæ•°æ®å¸§è€Œä¸èƒ½å¤Ÿæ”¶ä¸‹æ¥ã€‚ å…·æœ‰å¹¿æ’­ç‰¹æ€§çš„æ€»çº¿ä¸Šå®ç°äº†ä¸€å¯¹ä¸€çš„é€šä¿¡ã€‚ ä»€ä¹ˆæ˜¯CSMA/CDåè®®è½½æ³¢ç›‘å¬å¤šç‚¹æ¥å…¥/ç¢°æ’æ£€æµ‹ CSMA/CD CSMA/CD è¡¨ç¤ºCarrier Sense Multiple Access with Collision Detectionã€‚ â€œå¤šç‚¹æ¥å…¥â€è¡¨ç¤ºè®¸å¤šè®¡ç®—æœºä»¥å¤šç‚¹æ¥å…¥çš„æ–¹å¼è¿æ¥åœ¨ä¸€æ ¹æ€»çº¿ä¸Šã€‚ â€œè½½æ³¢ç›‘å¬â€æ˜¯æŒ‡æ¯ä¸€ä¸ªç«™åœ¨å‘é€æ•°æ®ä¹‹å‰å…ˆè¦æ£€æµ‹ä¸€ä¸‹æ€»çº¿ä¸Šæ˜¯å¦æœ‰å…¶ä»–è®¡ç®—æœºåœ¨å‘é€æ•°æ®ï¼Œå¦‚æœæœ‰ï¼Œåˆ™æš‚æ—¶ä¸è¦å‘é€æ•°æ®ï¼Œä»¥å…å‘ç”Ÿç¢°æ’ã€‚ æ€»çº¿ä¸Šå¹¶æ²¡æœ‰ä»€ä¹ˆâ€œè½½æ³¢â€ã€‚å› æ­¤ï¼Œ â€œè½½æ³¢ç›‘å¬â€å°±æ˜¯ç”¨ç”µå­æŠ€æœ¯æ£€æµ‹æ€»çº¿ä¸Šæœ‰æ²¡æœ‰å…¶ä»–è®¡ç®—æœºå‘é€çš„æ•°æ®ä¿¡å·ã€‚ ä»€ä¹ˆæ˜¯ç¢°æ’æ£€æµ‹è¿™é‡Œé¢è¦æ³¨æ„ä¸€ä¸ªæ¦‚å¿µå«åšï¼šç¢°æ’æ£€æµ‹ â€œç¢°æ’æ£€æµ‹â€å°±æ˜¯è®¡ç®—æœºè¾¹å‘é€æ•°æ®è¾¹æ£€æµ‹ä¿¡é“ä¸Šçš„ä¿¡å·ç”µå‹å¤§å°ã€‚ å½“å‡ ä¸ªç«™åŒæ—¶åœ¨æ€»çº¿ä¸Šå‘é€æ•°æ®æ—¶ï¼Œæ€»çº¿ä¸Šçš„ä¿¡å·ç”µå‹æ‘†åŠ¨å€¼å°†ä¼šå¢å¤§ï¼ˆäº’ç›¸å åŠ ï¼‰ã€‚ å½“ä¸€ä¸ªç«™æ£€æµ‹åˆ°çš„ä¿¡å·ç”µå‹æ‘†åŠ¨å€¼è¶…è¿‡ä¸€å®šçš„é—¨é™å€¼æ—¶ï¼Œå°±è®¤ä¸ºæ€»çº¿ä¸Šè‡³å°‘æœ‰ä¸¤ä¸ªç«™åŒæ—¶åœ¨å‘é€æ•°æ®ï¼Œè¡¨æ˜äº§ç”Ÿäº†ç¢°æ’ã€‚ æ‰€è°“â€œç¢°æ’â€å°±æ˜¯å‘ç”Ÿäº†å†²çªã€‚å› æ­¤â€œç¢°æ’æ£€æµ‹â€ä¹Ÿç§°ä¸ºâ€œå†²çªæ£€æµ‹â€ã€‚ åœ¨å‘ç”Ÿç¢°æ’æ—¶ï¼Œæ€»çº¿ä¸Šä¼ è¾“çš„ä¿¡å·äº§ç”Ÿäº†ä¸¥é‡çš„å¤±çœŸï¼Œæ— æ³•ä»ä¸­æ¢å¤å‡ºæœ‰ç”¨çš„ä¿¡æ¯æ¥ã€‚æ¯ä¸€ä¸ªæ­£åœ¨å‘é€æ•°æ®çš„ç«™ï¼Œä¸€æ—¦å‘ç°æ€»çº¿ä¸Šå‡ºç°äº†ç¢°æ’ï¼Œå°±è¦ç«‹å³åœæ­¢å‘é€ï¼Œå…å¾—ç»§ç»­æµªè´¹ç½‘ç»œèµ„æºï¼Œç„¶åç­‰å¾…ä¸€æ®µéšæœºæ—¶é—´åå†æ¬¡å‘é€ã€‚ ä»¥å¤ªç½‘æä¾›çš„æœåŠ¡ä»¥å¤ªç½‘æä¾›çš„æœåŠ¡æ˜¯ä¸å¯é çš„äº¤ä»˜ï¼Œå³å°½æœ€å¤§åŠªåŠ›çš„äº¤ä»˜ã€‚ å½“ç›®çš„ç«™æ”¶åˆ°æœ‰å·®é”™çš„æ•°æ®å¸§æ—¶å°±ä¸¢å¼ƒæ­¤å¸§ï¼Œå…¶ä»–ä»€ä¹ˆä¹Ÿä¸åšã€‚å·®é”™çš„çº æ­£ç”±é«˜å±‚æ¥å†³å®šã€‚ å¦‚æœé«˜å±‚å‘ç°ä¸¢å¤±äº†ä¸€äº›æ•°æ®è€Œè¿›è¡Œé‡ä¼ ï¼Œä½†ä»¥å¤ªç½‘å¹¶ä¸çŸ¥é“è¿™æ˜¯ä¸€ä¸ªé‡ä¼ çš„å¸§ï¼Œè€Œæ˜¯å½“ä½œä¸€ä¸ªæ–°çš„æ•°æ®å¸§æ¥å‘é€ã€‚ ä½¿ç”¨å¹¿æ’­ä¿¡é“çš„ä»¥å¤ªç½‘é›†çº¿å™¨ä¼ ç»Ÿä»¥å¤ªç½‘æœ€åˆæ˜¯ä½¿ç”¨ç²—åŒè½´ç”µç¼†ï¼Œåæ¥æ¼”è¿›åˆ°ä½¿ç”¨æ¯”è¾ƒä¾¿å®œçš„ç»†åŒè½´ç”µç¼†ï¼Œæœ€åå‘å±•ä¸ºä½¿ç”¨æ›´ä¾¿å®œå’Œæ›´çµæ´»çš„åŒç»çº¿ã€‚ è¿™ç§ä»¥å¤ªç½‘é‡‡ç”¨æ˜Ÿå½¢æ‹“æ‰‘ï¼Œåœ¨æ˜Ÿå½¢çš„ä¸­å¿ƒåˆ™å¢åŠ äº†ä¸€ç§å¯é æ€§éå¸¸é«˜çš„è®¾å¤‡ï¼Œå«åšé›†çº¿å™¨(hub) é›†çº¿å™¨æ˜¯ä½¿ç”¨ç”µå­å™¨ä»¶æ¥æ¨¡æ‹Ÿå®é™…ç”µç¼†çº¿çš„å·¥ä½œï¼Œå› æ­¤æ•´ä¸ªç³»ç»Ÿä»ç„¶åƒä¸€ä¸ªä¼ ç»Ÿçš„ä»¥å¤ªç½‘é‚£æ ·è¿è¡Œã€‚ ä½¿ç”¨é›†çº¿å™¨çš„ä»¥å¤ªç½‘åœ¨é€»è¾‘ä¸Šä»æ˜¯ä¸€ä¸ªæ€»çº¿ç½‘ï¼Œå„å·¥ä½œç«™ä½¿ç”¨çš„è¿˜æ˜¯ CSMA/CD åè®®ï¼Œå¹¶å…±äº«é€»è¾‘ä¸Šçš„æ€»çº¿ã€‚ é›†çº¿å™¨å¾ˆåƒä¸€ä¸ªå¤šæ¥å£çš„è½¬å‘å™¨ï¼Œå·¥ä½œåœ¨ç‰©ç†å±‚ã€‚ ä»¥å¤ªç½‘çš„ MAC å±‚MAC å±‚çš„ç¡¬ä»¶åœ°å€ ï¼šåœ¨å±€åŸŸç½‘ä¸­ï¼Œç¡¬ä»¶åœ°å€åˆç§°ä¸ºç‰©ç†åœ°å€ï¼Œæˆ– MAC åœ°å€ã€‚ é€‚é…å™¨æ£€æŸ¥ MAC åœ°å€ é€‚é…å™¨ä»ç½‘ç»œä¸Šæ¯æ”¶åˆ°ä¸€ä¸ª MAC å¸§å°±é¦–å…ˆç”¨ç¡¬ä»¶æ£€æŸ¥ MAC å¸§ä¸­çš„ MAC åœ°å€. å¦‚æœæ˜¯å‘å¾€æœ¬ç«™çš„å¸§åˆ™æ”¶ä¸‹ï¼Œç„¶åå†è¿›è¡Œå…¶ä»–çš„å¤„ç†ã€‚ å¦åˆ™å°±å°†æ­¤å¸§ä¸¢å¼ƒï¼Œä¸å†è¿›è¡Œå…¶ä»–çš„å¤„ç†ã€‚ â€œå‘å¾€æœ¬ç«™çš„å¸§â€åŒ…æ‹¬ä»¥ä¸‹ä¸‰ç§å¸§ï¼š å•æ’­(unicast)å¸§ï¼ˆä¸€å¯¹ä¸€ï¼‰ å¹¿æ’­(broadcast)å¸§ï¼ˆä¸€å¯¹å…¨ä½“ï¼‰ å¤šæ’­(multicast)å¸§ï¼ˆä¸€å¯¹å¤šï¼‰ ä»¥å¤ªç½‘çš„ MAC å¸§æ ¼å¼ é«˜é€Ÿä»¥å¤ªç½‘é€Ÿç‡è¾¾åˆ°æˆ–è¶…è¿‡ 100 Mb/s çš„ä»¥å¤ªç½‘ç§°ä¸ºé«˜é€Ÿä»¥å¤ªç½‘ã€‚ å½“å‰æ¯”ç‰¹ä»¥å¤ªç½‘å·¥ä½œåœ¨å…¨åŒå·¥æ–¹å¼æ—¶ï¼ˆå³é€šä¿¡åŒæ–¹å¯åŒæ—¶è¿›è¡Œå‘é€å’Œæ¥æ”¶æ•°æ®ï¼‰ï¼Œä¸ä½¿ç”¨è½½æ³¢å»¶ä¼¸å’Œåˆ†ç»„çªå‘ã€‚ æ‰©å±•çš„å±€åŸŸç½‘åœ¨ç‰©ç†å±‚æ‰©å±•å±€åŸŸç½‘ç”¨å¤šä¸ªé›†çº¿å™¨å¯è¿æˆæ›´å¤§çš„å±€åŸŸç½‘ï¼Œåˆšåˆšè¯´è¿‡ï¼Œé›†çº¿å™¨è¿è¡Œåœ¨ç‰©ç†å±‚ã€‚ é›†çº¿å™¨ä¼˜ç‚¹å’Œç¼ºç‚¹ç”¨é›†çº¿å™¨æ‰©å±•å±€åŸŸç½‘çš„ä¼˜ç‚¹ï¼š ä½¿åŸæ¥å±äºä¸åŒç¢°æ’åŸŸçš„å±€åŸŸç½‘ä¸Šçš„è®¡ç®—æœºèƒ½å¤Ÿè¿›è¡Œè·¨ç¢°æ’åŸŸçš„é€šä¿¡ã€‚ æ‰©å¤§äº†å±€åŸŸç½‘è¦†ç›–çš„åœ°ç†èŒƒå›´ã€‚ ç”¨é›†çº¿å™¨æ‰©å±•å±€åŸŸç½‘çš„ç¼ºç‚¹ï¼š ç¢°æ’åŸŸå¢å¤§äº†ï¼Œä½†æ€»çš„ååé‡å¹¶æœªæé«˜ã€‚ å¦‚æœä¸åŒçš„ç¢°æ’åŸŸä½¿ç”¨ä¸åŒçš„æ•°æ®ç‡ï¼Œé‚£ä¹ˆå°±ä¸èƒ½ç”¨é›†çº¿å™¨å°†å®ƒä»¬äº’è¿èµ·æ¥ã€‚ åœ¨æ•°æ®é“¾è·¯å±‚æ‰©å±•å±€åŸŸç½‘åœ¨æ•°æ®é“¾è·¯å±‚æ‰©å±•å±€åŸŸç½‘æ˜¯ä½¿ç”¨ç½‘æ¡¥ã€‚ç½‘æ¡¥å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼Œå®ƒæ ¹æ® MAC å¸§çš„ç›®çš„åœ°å€å¯¹æ”¶åˆ°çš„å¸§è¿›è¡Œè½¬å‘ã€‚ ç½‘æ¡¥å…·æœ‰è¿‡æ»¤å¸§çš„åŠŸèƒ½ã€‚å½“ç½‘æ¡¥æ”¶åˆ°ä¸€ä¸ªå¸§æ—¶ï¼Œå¹¶ä¸æ˜¯å‘æ‰€æœ‰çš„æ¥å£è½¬å‘æ­¤å¸§ï¼Œè€Œæ˜¯å…ˆæ£€æŸ¥æ­¤å¸§çš„ç›®çš„ MAC åœ°å€ï¼Œç„¶åå†ç¡®å®šå°†è¯¥å¸§è½¬å‘åˆ°å“ªä¸€ä¸ªæ¥å£ ä½¿ç”¨ç½‘æ¡¥çš„ä¼˜ç‚¹ è¿‡æ»¤é€šä¿¡é‡ã€‚ æ‰©å¤§äº†ç‰©ç†èŒƒå›´ã€‚ æé«˜äº†å¯é æ€§ã€‚ å¯äº’è¿ä¸åŒç‰©ç†å±‚ã€ä¸åŒ MAC å­å±‚å’Œä¸åŒé€Ÿç‡ï¼ˆå¦‚10 Mb/s å’Œ 100 Mb/s ä»¥å¤ªç½‘ï¼‰çš„å±€åŸŸç½‘ã€‚ ç½‘æ¡¥ä½¿å„ç½‘æ®µæˆä¸ºéš”ç¦»å¼€çš„ç¢°æ’åŸŸ ä½¿ç”¨ç½‘æ¡¥å¸¦æ¥çš„ç¼ºç‚¹ å­˜å‚¨è½¬å‘å¢åŠ äº†æ—¶å»¶ã€‚ å…·æœ‰ä¸åŒ MAC å­å±‚çš„ç½‘æ®µæ¡¥æ¥åœ¨ä¸€èµ·æ—¶æ—¶å»¶æ›´å¤§ã€‚ ç½‘æ¡¥åªé€‚åˆäºç”¨æˆ·æ•°ä¸å¤ªå¤š(ä¸è¶…è¿‡å‡ ç™¾ä¸ª)å’Œé€šä¿¡é‡ä¸å¤ªå¤§çš„å±€åŸŸç½‘ï¼Œå¦åˆ™æœ‰æ—¶è¿˜ä¼šå› ä¼ æ’­è¿‡å¤šçš„å¹¿æ’­ä¿¡æ¯è€Œäº§ç”Ÿç½‘ç»œæ‹¥å¡ã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¹¿æ’­é£æš´ã€‚ åœ¨MAC å­å±‚å¹¶æ²¡æœ‰æµé‡æ§åˆ¶åŠŸèƒ½ã€‚ ç½‘æ¡¥å’Œé›†çº¿å™¨ï¼ˆæˆ–è½¬å‘å™¨ï¼‰ä¸åŒ é›†çº¿å™¨åœ¨è½¬å‘å¸§æ—¶ï¼Œä¸å¯¹ä¼ è¾“åª’ä½“è¿›è¡Œæ£€æµ‹ã€‚ ç½‘æ¡¥åœ¨è½¬å‘å¸§ä¹‹å‰å¿…é¡»æ‰§è¡Œ CSMA/CD ç®—æ³•ã€‚ è‹¥åœ¨å‘é€è¿‡ç¨‹ä¸­å‡ºç°ç¢°æ’ï¼Œå°±å¿…é¡»åœæ­¢å‘é€å’Œè¿›è¡Œé€€é¿ã€‚ é€æ˜ç½‘æ¡¥ç›®å‰ä½¿ç”¨å¾—æœ€å¤šçš„ç½‘æ¡¥æ˜¯é€æ˜ç½‘æ¡¥(transparent bridge)ã€‚â€œé€æ˜â€æ˜¯æŒ‡å±€åŸŸç½‘ä¸Šçš„ç«™ç‚¹å¹¶ä¸çŸ¥é“æ‰€å‘é€çš„å¸§å°†ç»è¿‡å“ªå‡ ä¸ªç½‘æ¡¥ï¼Œå› ä¸ºç½‘æ¡¥å¯¹å„ç«™æ¥è¯´æ˜¯çœ‹ä¸è§çš„ã€‚ é€æ˜ç½‘æ¡¥æ˜¯ä¸€ç§å³æ’å³ç”¨è®¾å¤‡ï¼Œå…¶æ ‡å‡†æ˜¯ IEEE 802.1Dã€‚ ç½‘æ¡¥è‡ªå­¦ä¹ ç®—æ³•è‹¥ä» A å‘å‡ºçš„å¸§ä»æ¥å£ x è¿›å…¥äº†æŸç½‘æ¡¥ï¼Œé‚£ä¹ˆä»è¿™ä¸ªæ¥å£å‡ºå‘æ²¿ç›¸åæ–¹å‘ä¸€å®šå¯æŠŠä¸€ä¸ªå¸§ä¼ é€åˆ° Aã€‚ ç½‘æ¡¥æ¯æ”¶åˆ°ä¸€ä¸ªå¸§ï¼Œå°±è®°ä¸‹å…¶æºåœ°å€å’Œè¿›å…¥ç½‘æ¡¥çš„æ¥å£ï¼Œä½œä¸ºè½¬å‘è¡¨ä¸­çš„ä¸€ä¸ªé¡¹ç›®ã€‚ åœ¨å»ºç«‹è½¬å‘è¡¨æ—¶æ˜¯æŠŠå¸§é¦–éƒ¨ä¸­çš„æºåœ°å€å†™åœ¨â€œåœ°å€â€è¿™ä¸€æ çš„ä¸‹é¢ã€‚ åœ¨è½¬å‘å¸§æ—¶ï¼Œåˆ™æ˜¯æ ¹æ®æ”¶åˆ°çš„å¸§é¦–éƒ¨ä¸­çš„ç›®çš„åœ°å€æ¥è½¬å‘çš„ã€‚è¿™æ—¶å°±æŠŠåœ¨â€œåœ°å€â€æ ä¸‹é¢å·²ç»è®°ä¸‹çš„æºåœ°å€å½“ä½œç›®çš„åœ°å€ï¼Œè€ŒæŠŠè®°ä¸‹çš„è¿›å…¥æ¥å£å½“ä½œè½¬å‘æ¥å£ã€‚ å…·ä½“çš„æ­¥éª¤æ˜¯ ç½‘æ¡¥æ”¶åˆ°ä¸€å¸§åå…ˆè¿›è¡Œè‡ªå­¦ä¹ ã€‚æŸ¥æ‰¾è½¬å‘è¡¨ä¸­ä¸æ”¶åˆ°å¸§çš„æºåœ°å€æœ‰æ— ç›¸åŒ¹é…çš„é¡¹ç›®ã€‚ å¦‚æ²¡æœ‰ï¼Œå°±åœ¨è½¬å‘è¡¨ä¸­å¢åŠ ä¸€ä¸ªé¡¹ç›®ï¼ˆæºåœ°å€ã€è¿›å…¥çš„æ¥å£å’Œæ—¶é—´ï¼‰ã€‚å¦‚æœ‰ï¼Œåˆ™æŠŠåŸæœ‰çš„é¡¹ç›®è¿›è¡Œæ›´æ–°ã€‚è½¬å‘å¸§ã€‚æŸ¥æ‰¾è½¬å‘è¡¨ä¸­ä¸æ”¶åˆ°å¸§çš„ç›®çš„åœ°å€æœ‰æ— ç›¸åŒ¹é…çš„é¡¹ç›®ã€‚ å¦‚æ²¡æœ‰ï¼Œåˆ™é€šè¿‡æ‰€æœ‰å…¶ä»–æ¥å£ï¼ˆä½†è¿›å…¥ç½‘æ¡¥çš„æ¥å£é™¤å¤–ï¼‰æŒ‰è¿›è¡Œè½¬å‘ã€‚ å¦‚æœ‰ï¼Œåˆ™æŒ‰è½¬å‘è¡¨ä¸­ç»™å‡ºçš„æ¥å£è¿›è¡Œè½¬å‘ã€‚ è‹¥è½¬å‘è¡¨ä¸­ç»™å‡ºçš„æ¥å£å°±æ˜¯è¯¥å¸§è¿›å…¥ç½‘æ¡¥çš„æ¥å£ï¼Œåˆ™åº”ä¸¢å¼ƒè¿™ä¸ªå¸§ï¼ˆå› ä¸ºè¿™æ—¶ä¸éœ€è¦ç»è¿‡ç½‘æ¡¥è¿›è¡Œè½¬å‘ï¼‰ã€‚ æ€»ç»“ä¸»è¦æ˜¯æœ‰ä¸‹é¢ä¸€äº›çŸ¥è¯†ç‚¹ï¼š ä»¥å¤ªç½‘æ˜¯å½“ä»Šç°æœ‰å±€åŸŸç½‘é‡‡ç”¨çš„æœ€é€šç”¨çš„é€šä¿¡åè®®æ ‡å‡†ã€‚ä»¥å¤ªç½‘ç»œä½¿ç”¨CSMA/CDï¼ˆè½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®åŠå†²çªæ£€æµ‹ï¼‰æŠ€æœ¯ï¼Œå¹¶ä»¥10M/Sçš„é€Ÿç‡è¿è¡Œåœ¨å¤šç§ç±»å‹çš„ç”µç¼†ä¸Šã€‚ æ•°æ®é“¾è·¯å±‚ä¸»è¦ä½¿ç”¨çš„ä¸¤ç§ç±»å‹çš„ä¿¡é“ï¼š1ï¼šç‚¹å¯¹ç‚¹ä¿¡é“ 2ï¼šå¹¿æ’­ä¿¡é“ ä¸‰ä¸ªæ•°æ®é“¾è·¯å±‚åè®®å®ç°çš„åŸºæœ¬é—®é¢˜ï¼šå¦‚ä½• 1.å°è£…æˆå¸§ 2. é€æ˜ä¼ è¾“ 3.å·®é”™æ£€æµ‹ é“¾è·¯å’Œæ•°æ®é“¾è·¯çš„åŒºåˆ«ï¼š é“¾è·¯æ˜¯æŒ‡ä»ä¸€ä¸ªç»“ç‚¹åˆ°ç›¸é‚»ç»“ç‚¹çš„ç‰©ç†è·¯çº¿ï¼Œè€Œæ•°æ®é“¾è·¯æ˜¯æŒ‡åœ¨é“¾è·¯çš„åŸºç¡€ä¸Šè¿˜åŠ ä¸Šäº†ä¿è¯è¿è¾“çš„åè®®ï¼ˆåŒ…æ‹¬å®ç°è¿™äº›åè®®çš„è½¯ä»¶å’Œç¡¬ä»¶ï¼‰ ä¼ è¾“å•å…ƒæ˜¯: å¸§ï¼ŒåŒºåˆ«ç‰©ç†å±‚bit å¹¿æ’­ä¿¡é“çš„å®ä¾‹ï¼šå±€åŸŸç½‘ï¼ˆä»¥å¤ªç½‘). ç”±äºä»¥å¤ªç½‘åœ¨å±€åŸŸç½‘ä¸­å ç»å¯¹ä¼˜åŠ¿ï¼Œæ‰€ä»¥åœ¨ä»Šå¤©ä»¥å¤ªç½‘è·Ÿå±€åŸŸç½‘æ˜¯åŒä¹‰è¯.å¿…é¡»æŒ‡å‡ºçš„æ˜¯å±€åŸŸç½‘å·¥ä½œçš„å±‚æ¬¡è·¨è¶Šäº†æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚ã€‚ é€‚é…å™¨ï¼ˆç½‘å¡): æ‹¥æœ‰ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚çš„åŠŸèƒ½. åŒ…æ‹¬RAM(å¤„ç†å™¨)å’ŒROM(å‚¨å­˜å™¨),ç¡¬ä»¶åœ°å€åœ¨é€‚é…å™¨çš„ROMä¸­ï¼Œè½¯ä»¶åœ°å€å³IPåœ°å€æ˜¯åœ¨å­˜å‚¨å™¨ä¸­ã€‚ æ‰©å±•ä»¥å¤ªç½‘çš„2ç§æ–¹å¼ï¼šåœ¨ç‰©ç†å±‚æ‰©å±•ï¼šä½¿ç”¨é›†çº¿å™¨ï¼› åœ¨æ•°æ®é“¾è·¯å±‚æ‰©å±•ï¼šä½¿ç”¨ç½‘æ¡¥ æœ€åçœ‹ä¸‹ä¸‹é¢è¿™å¼ å›¾é‡Œé¢ï¼šç½‘å…³æ˜¯ç½‘ç»œå±‚ä¹‹ä¸Šçš„ï¼Œè·¯ç”±å™¨æ˜¯ç½‘ç»œå±‚çš„ï¼Œç½‘å…³æ˜¯æ•°æ®é“¾è·¯å±‚çš„ï¼Œé›†çº¿å™¨æ˜¯ç‰©ç†å±‚çš„ã€‚","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/categories/è®¡ç®—æœºç½‘ç»œ/"}],"tags":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/tags/è®¡ç®—æœºç½‘ç»œ/"}]},{"title":"è®¡ç®—æœºç½‘ç»œçš„ç‰©ç†å±‚åšäº›ä»€ä¹ˆå·¥ä½œï¼Ÿ","slug":"è®¡ç®—æœºç½‘ç»œçš„ç‰©ç†å±‚åšäº›ä»€ä¹ˆå·¥ä½œï¼Ÿ","date":"2016-06-15T05:27:14.000Z","updated":"2016-06-15T13:52:30.000Z","comments":true,"path":"2016/06/15/è®¡ç®—æœºç½‘ç»œçš„ç‰©ç†å±‚åšäº›ä»€ä¹ˆå·¥ä½œï¼Ÿ/","link":"","permalink":"http://sevencai.github.io/2016/06/15/è®¡ç®—æœºç½‘ç»œçš„ç‰©ç†å±‚åšäº›ä»€ä¹ˆå·¥ä½œï¼Ÿ/","excerpt":"","text":"ç‰©ç†å±‚è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿç‰©ç†å±‚ä¸»è¦å…³å¿ƒå¦‚ä½•ä¼ è¾“ä¿¡å·,ç‰©ç†å±‚çš„ä¸»è¦ä»»åŠ¡æè¿°ä¸ºç¡®å®šä¸ä¼ è¾“åª’ä½“çš„æ¥å£çš„ä¸€äº›ç‰¹æ€§ï¼Œå³ï¼š æœºæ¢°ç‰¹æ€§ æŒ‡æ˜æ¥å£æ‰€ç”¨æ¥çº¿å™¨çš„å½¢çŠ¶å’Œå°ºå¯¸ã€å¼•çº¿æ•°ç›®å’Œæ’åˆ—ã€å›ºå®šå’Œé”å®šè£…ç½®ç­‰ç­‰ã€‚ ç”µæ°”ç‰¹æ€§ æŒ‡æ˜åœ¨æ¥å£ç”µç¼†çš„å„æ¡çº¿ä¸Šå‡ºç°çš„ç”µå‹çš„èŒƒå›´ã€‚ åŠŸèƒ½ç‰¹æ€§ æŒ‡æ˜æŸæ¡çº¿ä¸Šå‡ºç°çš„æŸä¸€ç”µå¹³çš„ç”µå‹è¡¨ç¤ºä½•ç§æ„ä¹‰ã€‚ è¿‡ç¨‹ç‰¹æ€§ æŒ‡æ˜å¯¹äºä¸åŒåŠŸèƒ½çš„å„ç§å¯èƒ½äº‹ä»¶çš„å‡ºç°é¡ºåºã€‚ ç‰©ç†å±‚ä¸Šæ‰€ä¼ é€æ•°æ®çš„å•ä½æ˜¯æ¯”ç‰¹ï¼Œç‰©ç†å±‚çš„ä¸»è¦ä»»åŠ¡å°±æ˜¯é€æ˜åœ°ä¼ é€æ¯”ç‰¹æµï¼Œå…¶æ‰€è¦è€ƒè™‘çš„å°±æ˜¯å¦‚ä½•ä¼ è¾“bit,éœ€è¦ç”¨å¤šå¤§çš„ç”µå‹ä»£è¡¨â€œ1â€æˆ–â€œ0â€ï¼Œæ€æ ·æ‰èƒ½åœ¨å„ç§ä¼ è¾“åª’ä½“ä¸Šä¼ è¾“æ¯”ç‰¹æµï¼Œè€Œä¸æ˜¯æŒ‡å…·ä½“çš„ä¼ è¾“åª’ä½“ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æ•°æ®é€šä¿¡ç³»ç»Ÿæ¨¡å‹ã€‚ æ•°æ®é€šä¿¡ç³»ç»Ÿå¯ä»¥åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼šæºç³»ç»Ÿï¼Œä¼ è¾“ç³»ç»Ÿï¼Œç«¯ç³»ç»Ÿã€‚ æºç³»ç»ŸåŒ…æ‹¬ï¼šæºç‚¹ï¼ˆå¦‚PCçš„é”®ç›˜è¾“å…¥çš„æ±‰å­—ï¼‰+å‘é€å™¨ç«¯ç³»ç»ŸåŒ…æ‹¬ï¼šç»ˆç‚¹+æ¥å—å™¨ ç‰©ç†å±‚çš„å‡ ä¸ªä¸“ä¸šæœ¯è¯­æ•°æ®ï¼Œä¿¡å·ï¼Œæ¨¡æ‹Ÿï¼Œæ•°å­—ï¼Œç å…ƒ æ•°æ®(data)â€”â€”è¿é€æ¶ˆæ¯çš„å®ä½“ã€‚ ä¿¡å·(signal)â€”â€”æ•°æ®çš„ç”µæ°”çš„æˆ–ç”µç£çš„è¡¨ç°ã€‚ æ¨¡æ‹Ÿçš„(analogous)â€”â€”ä»£è¡¨æ¶ˆæ¯çš„å‚æ•°çš„å–å€¼æ˜¯è¿ç»­çš„ã€‚ æ•°å­—çš„(digital)â€”â€”ä»£è¡¨æ¶ˆæ¯çš„å‚æ•°çš„å–å€¼æ˜¯ç¦»æ•£çš„ã€‚ ç å…ƒ(code)â€”â€”åœ¨ä½¿ç”¨æ—¶é—´åŸŸï¼ˆæˆ–ç®€ç§°ä¸ºæ—¶åŸŸï¼‰çš„æ³¢å½¢è¡¨ç¤ºæ•°å­—ä¿¡å·æ—¶ï¼Œä»£è¡¨ä¸åŒç¦»æ•£æ•°å€¼çš„åŸºæœ¬æ³¢å½¢ã€‚ ä¿¡é“ä¿¡é“ä¸ç­‰äºç”µè·¯ã€‚ä¿¡é“åªæ˜¯ä¸€ä¸ªæ–¹å‘çš„ä¼ é€ä¿¡æ¯çš„åª’ä½“ã€‚å› æ­¤ä¸€æ¡é€šä¿¡ç”µè·¯å¾€å¾€åŒ…å«ä¸€æ¡å‘é€ä¿¡æ¯çš„é€šé“å’Œä¸€æ¡æ¥å—ä¿¡æ¯çš„é€šé“ã€‚ å•å‘é€šä¿¡ï¼ˆå•å·¥é€šä¿¡ï¼‰â€”â€”åªèƒ½æœ‰ä¸€ä¸ªæ–¹å‘çš„é€šä¿¡è€Œæ²¡æœ‰åæ–¹å‘çš„äº¤äº’ã€‚ åŒå‘äº¤æ›¿é€šä¿¡ï¼ˆåŠåŒå·¥é€šä¿¡ï¼‰â€”â€”é€šä¿¡çš„åŒæ–¹éƒ½å¯ä»¥å‘é€ä¿¡æ¯ï¼Œä½†ä¸èƒ½åŒæ–¹åŒæ—¶å‘é€(å½“ç„¶ä¹Ÿå°±ä¸èƒ½åŒæ—¶æ¥æ”¶)ã€‚ åŒå‘åŒæ—¶é€šä¿¡ï¼ˆå…¨åŒå·¥é€šä¿¡ï¼‰â€”â€”é€šä¿¡çš„åŒæ–¹å¯ä»¥åŒæ—¶å‘é€å’Œæ¥æ”¶ä¿¡æ¯ã€‚ åŸºå¸¦(baseband)ä¿¡å·å’Œå¸¦é€š(band pass)ä¿¡å·åŸºå¸¦ä¿¡å·ï¼ˆå³åŸºæœ¬é¢‘å¸¦ä¿¡å·ï¼‰â€”â€”æ¥è‡ªä¿¡æºçš„ä¿¡å·ã€‚åƒè®¡ç®—æœºè¾“å‡ºçš„ä»£è¡¨å„ç§æ–‡å­—æˆ–å›¾åƒæ–‡ä»¶çš„æ•°æ®ä¿¡å·éƒ½å±äºåŸºå¸¦ä¿¡å·ã€‚ åŸºå¸¦ä¿¡å·å¾€å¾€åŒ…å«æœ‰è¾ƒå¤šçš„ä½é¢‘æˆåˆ†ï¼Œç”šè‡³æœ‰ç›´æµæˆåˆ†ï¼Œè€Œè®¸å¤šä¿¡é“å¹¶ä¸èƒ½ä¼ è¾“è¿™ç§ä½é¢‘åˆ†é‡æˆ–ç›´æµåˆ†é‡ã€‚å› æ­¤å¿…é¡»å¯¹åŸºå¸¦ä¿¡å·è¿›è¡Œè°ƒåˆ¶(modulation)ã€‚ å¸¦é€šä¿¡å·â€”â€”æŠŠåŸºå¸¦ä¿¡å·ç»è¿‡è½½æ³¢è°ƒåˆ¶åï¼ŒæŠŠä¿¡å·çš„é¢‘ç‡èŒƒå›´æ¬ç§»åˆ°è¾ƒé«˜çš„é¢‘æ®µä»¥ä¾¿åœ¨ä¿¡é“ä¸­ä¼ è¾“ï¼ˆå³ä»…åœ¨ä¸€æ®µé¢‘ç‡èŒƒå›´å†…èƒ½å¤Ÿé€šè¿‡ä¿¡é“ï¼‰ã€‚ å‡ ç§æœ€åŸºæœ¬çš„è°ƒåˆ¶æ–¹æ³•:è°ƒå¹…(AM)è°ƒé¢‘(FM)è°ƒç›¸(PM) ä¿¡é“çš„æé™å®¹é‡ä»»ä½•å®é™…çš„ä¿¡é“éƒ½ä¸æ˜¯ç†æƒ³çš„ï¼Œåœ¨ä¼ è¾“ä¿¡å·æ—¶ä¼šäº§ç”Ÿå„ç§å¤±çœŸä»¥åŠå¸¦æ¥å¤šç§å¹²æ‰°ã€‚ ç å…ƒä¼ è¾“çš„é€Ÿç‡è¶Šé«˜ï¼Œæˆ–ä¿¡å·ä¼ è¾“çš„è·ç¦»è¶Šè¿œï¼Œåœ¨ä¿¡é“çš„è¾“å‡ºç«¯çš„æ³¢å½¢çš„å¤±çœŸå°±è¶Šä¸¥é‡ã€‚ ä¸ºä¹‹äº§ç”Ÿäº† å¥ˆæ°å‡†åˆ™ï¼šä¸ºäº†é¿å…ç é—´ä¸²æ‰°ï¼Œç å…ƒçš„ä¼ è¾“é€Ÿç‡çš„ä¸Šé™å€¼ ä¿¡å™ªæ¯”ï¼šä¿¡é“çš„å¸¦å®½æˆ–ä¿¡é“ä¸­çš„ä¿¡å™ªæ¯”è¶Šå¤§ï¼Œåˆ™ä¿¡æ¯çš„æé™ä¼ è¾“é€Ÿç‡å°±è¶Šé«˜ ç‰©ç†å±‚ä¸‹é¢çš„ä¼ è¾“åª’ä½“å¯¼å¼•å‹ä¼ è¾“åª’ä½“ï¼šåŒç»çº¿ï¼ŒåŒè½´ç”µç¼†ï¼Œå…‰ç¼†éå¯¼å¼•å‹ä¼ è¾“åª’ä½“ï¼šæ— çº¿ï¼Œçº¢å¤–ï¼Œå¤§æ°”æ¿€å…‰ å…¶ä¸­ç§‘æ™®ä¸‹ï¼šå…‰çº¤çš„åŸç†æ˜¯ï¼šå…‰çº¿åœ¨çº¤èŠ¯ä¸­ä¼ è¾“çš„æ–¹å¼æ˜¯ä¸æ–­åœ°å…¨åå°„ï¼Œå®ƒçš„å¸¦å®½å¾ˆå¤§ï¼Œæ‰€ä»¥ä¼ è¾“é€Ÿåº¦æ‰å¿«ã€‚ ä¿¡é“å¤ç”¨æŠ€æœ¯å¤ç”¨(multiplexing)æ˜¯é€šä¿¡æŠ€æœ¯ä¸­çš„åŸºæœ¬æ¦‚å¿µ å¤ç”¨åˆ†ä¸ºï¼šé¢‘åˆ†å¤ç”¨ï¼Œæ—¶åˆ†å¤ç”¨ï¼Œæ³¢åˆ†å¤ç”¨ï¼Œç åˆ†å¤ç”¨ã€‚ é¢‘åˆ†å¤ç”¨çš„æ‰€æœ‰ç”¨æˆ·åœ¨åŒæ ·çš„æ—¶é—´å ç”¨ä¸åŒçš„å¸¦å®½èµ„æºï¼ˆè¯·æ³¨æ„ï¼Œè¿™é‡Œçš„â€œå¸¦å®½â€æ˜¯é¢‘ç‡å¸¦å®½è€Œä¸æ˜¯æ•°æ®çš„å‘é€é€Ÿç‡ï¼‰ã€‚ æ—¶åˆ†å¤ç”¨åˆ™æ˜¯å°†æ—¶é—´åˆ’åˆ†ä¸ºä¸€æ®µæ®µç­‰é•¿çš„æ—¶åˆ†å¤ç”¨å¸§ï¼ˆTDM å¸§ï¼‰ã€‚æ¯ä¸€ä¸ªæ—¶åˆ†å¤ç”¨çš„ç”¨æˆ·åœ¨æ¯ä¸€ä¸ª TDM å¸§ä¸­å ç”¨å›ºå®šåºå·çš„æ—¶éš™ã€‚ ç åˆ†å¤ç”¨ CDMå¸¸ç”¨çš„åè¯æ˜¯ç åˆ†å¤šå€ CDMA (Code Division Multiple Access)ã€‚ å®½å¸¦æ¥å…¥æŠ€æœ¯ADSL æŠ€æœ¯å°±æ˜¯ç”¨æ•°å­—æŠ€æœ¯å¯¹ç°æœ‰çš„æ¨¡æ‹Ÿç”µè¯ç”¨æˆ·çº¿è¿›è¡Œæ”¹é€ ï¼Œä½¿å®ƒèƒ½å¤Ÿæ‰¿è½½å®½å¸¦ä¸šåŠ¡ã€‚ ADSL æŠ€æœ¯å°±æŠŠ 0~4 kHz ä½ç«¯é¢‘è°±ç•™ç»™ä¼ ç»Ÿç”µè¯ä½¿ç”¨ï¼Œè€ŒæŠŠåŸæ¥æ²¡æœ‰è¢«åˆ©ç”¨çš„é«˜ç«¯é¢‘è°±ç•™ç»™ç”¨æˆ·ä¸Šç½‘ä½¿ç”¨ã€‚DSL å°±æ˜¯æ•°å­—ç”¨æˆ·çº¿(Digital Subscriber Line)çš„ç¼©å†™ã€‚ ç”¨æˆ·æ¥å£ç›’ç”¨æˆ·æ¥å£ç›’ UIB (User Interface Box)è¦æä¾›ä¸‰ç§è¿æ¥ï¼Œå³ï¼š ä½¿ç”¨åŒè½´ç”µç¼†è¿æ¥åˆ°æœºé¡¶ç›’(set-top box)ï¼Œç„¶åå†è¿æ¥åˆ°ç”¨æˆ·çš„ç”µè§†æœºã€‚ ä½¿ç”¨åŒç»çº¿è¿æ¥åˆ°ç”¨æˆ·çš„ç”µè¯æœºã€‚ ä½¿ç”¨ç”µç¼†è°ƒåˆ¶è§£è°ƒå™¨è¿æ¥åˆ°ç”¨æˆ·çš„è®¡ç®—æœºã€‚ å¯¹æ¯”ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚æ›¾ç»å›°æ‰°æˆ‘å¾ˆé•¿æ—¶é—´ï¼Œå°±æ˜¯ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ æ•°æ®é“¾è·¯å±‚ç®€ç§°ä¸ºé“¾è·¯å±‚ï¼Œä¸¤å°ä¸»æœºä¹‹é—´çš„æ•°æ®ä¼ è¾“æ€»æ˜¯åœ¨ä¸€æ®µä¸€æ®µçš„é“¾è·¯ä¸Šä¼ é€çš„ï¼Œè¿™å°±éœ€è¦ä½¿ç”¨ä¸“é—¨çš„é“¾è·¯å±‚åè®®ã€‚å°†ç½‘ç»œå±‚ä¸‹æ¥çš„æ•°æ®æŠ¥å°è£…æˆå¸§ï¼Œåœ¨ç›¸é‚»èŠ‚ç‚¹ä¹‹é—´çš„é“¾è·¯ä¸Šä¼ é€å¸§ï¼Œæ¯ä¸ªå¸§åŒ…æ‹¬æ•°æ®å’Œå¿…è¦çš„æ§åˆ¶ä¿¡æ¯ã€‚ ç‰©ç†å±‚ä¼ é€å•å…ƒæ˜¯bit,å‘é€æ–¹å‘é€0ï¼Œæ¥æ”¶æ–¹åº”å½“å—åˆ°0ï¼Œå‘é€æ–¹å‘é€1ï¼Œåˆ™æ˜¯1ã€‚å› æ­¤ç‰©ç†å±‚è¦è¦è€ƒè™‘çš„å°±æ˜¯å¦‚ä½•ä¼ è¾“bit,éœ€è¦ç”¨å¤šå¤§çš„ç”µå‹ä»£è¡¨â€œ1â€æˆ–â€œ0â€ï¼Œæ€æ ·æ‰èƒ½åœ¨å„ç§ä¼ è¾“åª’ä½“ä¸Šä¼ è¾“æ¯”ç‰¹æµï¼Œè€Œä¸æ˜¯æŒ‡å…·ä½“çš„ä¼ è¾“åª’ä½“ã€‚ç‰©ç†å±‚è¿˜è¦ç¡®å®šè¿æ¥ç”µç¼†çš„æ’å¤´åº”å½“æœ‰å¤šå°‘æ ¹å¼•è„šå’Œå¦‚ä½•è¿æ¥ã€‚è¦æ³¨æ„çš„æ˜¯ï¼šä¼ é€’ä¿¡æ¯æ‰€ç”¨çš„ä¸€äº›ç‰©ç†åª’ä½“ï¼Œå¦‚åˆšåˆšæåˆ°çš„åŒç»çº¿ï¼ŒåŒè½´ç”µç¼†ç­‰ç­‰ï¼Œå¹¶ä¸æ˜¯åœ¨ç‰©ç†å±‚ä¹‹å†…ï¼Œè€Œæ˜¯åœ¨ç‰©ç†å±‚åè®®çš„ä¸‹é¢ã€‚å› æ­¤ä¹Ÿæœ‰äººæŠŠç‰©ç†åª’ä½“å½“åšç¬¬0å±‚ï¼Œç‰©ç†å±‚ä¸ºç¬¬ä¸€å±‚ã€‚ æ€»ç»“è¿™ç¯‡æ–‡ç« çš„ä¸»è¦ç›®çš„æ˜¯äº†è§£å’Œæ€»ç»“ç‰©ç†å±‚åˆ°åº•åšäº›ä»€ä¹ˆå·¥ä½œã€‚ä»¥å‰å¾ˆå¤šè§è¿‡ä½†åˆè®²ä¸å‡ºæ¥çš„ä¸œè¥¿éƒ½æœ‰äº†æ–°çš„è®¤è¯†ã€‚æ¯”å¦‚ADSL,æ¯”å¦‚ç”¨æˆ·æ¥å£ç›’ï¼Œæ¯”å¦‚æœºé¡¶ç›’ï¼Œæ¯”å¦‚åŠåŒå·¥ï¼Œå…¨åŒå·¥ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è¿˜è§£å†³äº†æˆ‘å¾ˆå¤šçš„å›°æƒ‘ã€‚ä¸»è¦å‚è€ƒèµ„æ–™æ˜¯è¯¾æœ¬ã€Šè®¡ç®—æœºç½‘ç»œç¬¬6ç‰ˆã€‹-è°¢å¸Œä»è‘—ã€‚æ„Ÿè°¢ã€‚","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/categories/è®¡ç®—æœºç½‘ç»œ/"}],"tags":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/tags/è®¡ç®—æœºç½‘ç»œ/"}]},{"title":"ES6å˜é‡çš„è§£æ„èµ‹å€¼","slug":"ES6å˜é‡çš„è§£æ„èµ‹å€¼","date":"2016-06-14T01:51:38.000Z","updated":"2016-12-12T02:59:48.000Z","comments":true,"path":"2016/06/14/ES6å˜é‡çš„è§£æ„èµ‹å€¼/","link":"","permalink":"http://sevencai.github.io/2016/06/14/ES6å˜é‡çš„è§£æ„èµ‹å€¼/","excerpt":"","text":"ä»€ä¹ˆå«åšè§£æ„ï¼Ÿè§£æ„å°±æ˜¯æŒ‰ç…§ä¸€å®šçš„æ¨¡å¼ï¼Œä»æ•°ç»„æˆ–è€…å¯¹è±¡ä¸­æå–åˆ°å¯¹åº”çš„å…ƒç´ ï¼Œç„¶åæŠŠè¿™äº›å…ƒç´ å¤åˆ¶ç»™æ–°çš„å˜é‡ã€‚è¿™æ ·çš„è¿‡ç¨‹å«åšè§£æ„èµ‹å€¼ã€‚å…¶ä¸­è¦æ³¨æ„ä¸¤ä¸ªåœ°æ–¹ï¼Œç¬¬ä¸€æ˜¯æå–å¯¹è±¡å¿…é¡»æ˜¯æ•°ç»„æˆ–è€…å¯¹è±¡ã€‚å¦‚æœä¸æ˜¯å¯¹è±¡æˆ–è€…æ•°ç»„ï¼ŒES6ä¼šå…ˆæŠŠå®ƒè½¬æ¢æˆå¯¹è±¡ã€‚å¦‚æœè½¬æ¢ä¸äº†ï¼Œå¦‚null,undefined,åˆ™ä¼šæŠ¥é”™ã€‚è¡¨ç¤ºä¸èƒ½å¤Ÿè§£æ„ã€‚ç¬¬äºŒè§£æ„çš„ä½œç”¨æ˜¯ä¸ºäº†æˆ‘ä»¬æ–¹ä¾¿èµ‹å€¼ã€‚è¿™æ˜¯ES6çš„æ–°ç”¨æ³•ã€‚æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œç«ç‹æ˜¯å·²ç»å®ç°äº†çš„ã€‚ä½†æ˜¯è°·æ­Œè¿˜æ²¡æœ‰ã€‚ Destructuring allows us to extract values from arrays and objects (even deeply nested) and store them in variables with a more convenient syntax. ç›´è§‚æ„Ÿå—å…ˆçœ‹ä¸¤ä¸ªç®€å•çš„å°ä¾‹å­ï¼Œç›´è§‚çš„æ„Ÿå—ä¸‹ï¼Œè§£æ„çš„å¥½å¤„ã€‚å¯¹äºæ•°ç»„è¿‡å»æˆ‘ä»¬æ˜¯è¿™æ ·çš„ï¼š1234let arr = [1,2];a = arr[0];b = arr[1];//a-&gt;1,b-&gt;2 ç°åœ¨æˆ‘ä»¬æ˜¯è¿™æ ·çš„ï¼š12let [a,b]=[1,2];//same result å¯¹äºå¯¹è±¡æˆ‘ä»¬ä»¥å‰æ˜¯è¿™æ ·çš„ï¼š123let obj = &#123;username:'Seven',password:'123'&#125;;let username = obj.username;let password = obj.password; ç°åœ¨æˆ‘ä»¬è¿™æ ·å°±è¡Œäº†ï¼š123let obj = &#123;username:'Seven',password:'123'&#125;;let &#123;username,password&#125; = obj;console.log(username); æœ‰æ²¡æœ‰è§‰å¾—å¾ˆæ–¹ä¾¿ï¼Ÿï¼š) ï¼Œæ³¨æ„è¿™é‡Œçš„{}é‡Œé¢çš„èµ·åå¿…é¡»å’Œobjé‡Œé¢çš„é”®ç›¸åŒï¼Œå¦åˆ™å¾—ä¸åˆ°æ­£ç¡®çš„å€¼ã€‚ æ•°ç»„çš„è§£æ„èµ‹å€¼æ€»ç»“ä¸‹ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ï¼š123var [var1,var2,var3]=arrconst [var1,var2,var3]=arrlet [var1,var2,var3]=arr çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±æ˜¯åœ¨ç”¨æ•°ç»„çš„è§£æ„èµ‹å€¼å•¦ã€‚ åˆšåˆšè®²åˆ°æ¦‚å¿µçš„æ—¶å€™æåˆ°ï¼Œå°±ç®—æ˜¯even deeply nestedçš„æ—¶å€™ä»ç„¶å¯ä»¥æ˜¯èµ‹å€¼çš„ã€‚æ¯”å¦‚è¯´ï¼š12345let arr = [2,3,[4,5],6];let [two,three,[four,five],six]=arr;console.log(four);//4//æˆ–è€…å¯ä»¥è¿™æ ·å†™let [two,three,[four,five],six]=[2,3,[4,5],6]; æ‰€ä»¥æˆ‘ä»¬å®é™…ä¸Šå¯ä»¥è¿™æ ·ç†è§£ï¼Œè§£æ„èµ‹å€¼è¿™ç§å†™æ³•å±äºâ€œæ¨¡å¼åŒ¹é…â€ï¼Œåªè¦ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒï¼Œå·¦è¾¹çš„å˜é‡å°±ä¼šè¢«èµ‹äºˆå¯¹åº”çš„å€¼ã€‚ ä¸‹é¢çœ‹å‡ ä¸ªä¾‹å­ï¼š1234let [,,three]=[1,,3] //three:3let [x, , y] = [1, 2, 3];//x:1,y:3let [one,...theothers]=[1,2,3,4];//one:1,theothers:[2,3,4]let [x, y, ...z] = ['a'];//x:a,y:undefined,z:[] å¦‚æœè¿™ç§è§£æ„ä¸å¯¹åº”ï¼Œæ²¡æœ‰æˆåŠŸï¼Œä¹Ÿå°±æ˜¯ä¸æ˜¯æ¨¡å¼åŒ¹é…ï¼Œåˆ™å°±æ˜¯undefinedï¼Œå¦‚ä¸‹é¢ä¸¤ä¸ªä¾‹å­ï¼š12let [two]=[]; //two:undefinedlet [one,two]=[1]; //two:undefined ä¸Šé¢æ˜¯æ•°ç»„çš„è§£æ„èµ‹å€¼ï¼Œä½†è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœå³è¾¹ä¸æ˜¯æ•°ç»„çš„è¯ï¼Œæ˜¯ä¼šæŠ¥é”™çš„ã€‚æ¯”å¦‚ï¼š12345let [one]=1;let [one]=null;let [one]=false;let [one]=&#123;&#125;;let [one]=undefined; éƒ½ä¼šæŠ¥ä¸‹é¢çš„é”™ï¼šTypeError: (intermediate value)[&#39;@@iterator&#39;] is not a functionã€‚ å¦‚æœç­‰å·çš„å³è¾¹ä¸æ˜¯æ•°ç»„ï¼ˆæˆ–è€…ä¸¥æ ¼åœ°è¯´ï¼Œä¸æ˜¯å¯éå†çš„ç»“æ„ï¼Œå‚è§ã€ŠIteratorã€‹ä¸€ç« ï¼‰ï¼Œé‚£ä¹ˆå°†ä¼šæŠ¥é”™ã€‚ä¸Šé¢çš„è¡¨è¾¾å¼éƒ½ä¼šæŠ¥é”™ï¼Œå› ä¸ºç­‰å·å³è¾¹çš„å€¼ï¼Œè¦ä¹ˆè½¬ä¸ºå¯¹è±¡ä»¥åä¸å…·å¤‡Iteratoræ¥å£ï¼ˆå‰äº”ä¸ªè¡¨è¾¾å¼ï¼‰ï¼Œè¦ä¹ˆæœ¬èº«å°±ä¸å…·å¤‡Iteratoræ¥å£ï¼ˆæœ€åä¸€ä¸ªè¡¨è¾¾å¼ï¼‰ã€‚äº‹å®ä¸Šï¼Œåªè¦æŸç§æ•°æ®ç»“æ„å…·æœ‰Iteratoræ¥å£ï¼Œéƒ½å¯ä»¥é‡‡ç”¨æ•°ç»„å½¢å¼çš„è§£æ„èµ‹å€¼ã€‚â€“from é˜®ä¸€å³°-è§£æ„èµ‹å€¼ æ•°ç»„è§£æ„å¯ä»¥æœ‰é»˜è®¤å€¼å¦‚ä¸‹é¢å‡ ä¸ªä¾‹å­ï¼š12var [one=1]=[];//one:1var [one,two=2]=[1];//one:1,two:2 æ„æ€å°±æ˜¯å¦‚æœåé¢æœ‰å€¼ï¼Œå°±æ˜¯ç”¨åé¢çš„å€¼ï¼Œå¦‚æœåé¢æ²¡æœ‰å€¼ï¼Œå°±çœ‹æœ‰æ²¡æœ‰é»˜è®¤çš„ï¼Œæœ‰çš„è¯å°±ç”¨é»˜è®¤çš„ã€‚å†å¦åˆ™çš„è¯ï¼Œå°±æ˜¯å–ä¸åˆ°å€¼å•¦ã€‚é‚£ä¹ˆä»€ä¹ˆæ ‡å‡†æ˜¯æœ‰å€¼ï¼Œæ²¡å€¼å‘¢ï¼ŸES6è§„å®šï¼Œå¦‚æœä¸¥æ ¼ç­‰äºï¼ˆ===ï¼‰undefined,é‚£ä¹ˆå°±æ˜¯æ²¡æœ‰å€¼ï¼Œç”¨é»˜è®¤å€¼ã€‚æ¯”å¦‚ä¸‹é¢çš„æƒ…å†µï¼š12let [x=1]=[undefined];let [y=1]=[null]; è¿™ä¸ªæ—¶å€™çš„æƒ…å†µå°±æ˜¯ï¼šx=1,y=nullå•¦ï¼Œå› ä¸ºnullä¸ä¸¥æ ¼ç­‰äºundefinedã€‚ å¹¶ä¸”è¿™ä¸ªå–å€¼è¿˜æ˜¯æƒ°æ€§çš„ï¼Œä¹Ÿå°±æ˜¯åªè¦åé¢åˆ¤æ–­çš„å€¼ä¸æ˜¯undefinedå°±ä¸ä¼šæ˜¯ç†ä¼šå‰é¢çš„é»˜è®¤èµ‹å€¼ã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼š1234function test()&#123; return '1';&#125;let [f=test()]=[1]; æ­¤æ—¶fçš„å€¼æ˜¯1ï¼Œå› ä¸ºä¸ä¸ºundefinedï¼Œæ‰€ä»¥test()è¿™ä¸ªå‡½æ•°æ ¹æœ¬ä¸ä¼šæ‰§è¡Œã€‚è¿™å«åšæƒ°æ€§å–å€¼ã€‚ å†å°±æ˜¯æ—¢ç„¶è¡¨è¾¾å¼å¯ä»¥ï¼ˆæ³¨æ„ä¸Šé¢çš„ä¾‹å­å¹¶ä¸æ˜¯é”™çš„ï¼Œåªæ˜¯å› ä¸ºåé¢æœ‰å€¼ï¼Œæ‰ä¸æ‰§è¡Œè€Œå·²ï¼‰ï¼Œé‚£ä¹ˆå˜é‡ä¹Ÿå¯ä»¥ã€‚ä½†æ˜¯å˜é‡ä¸€å®šè¿˜æ˜¯è¦æ³¨æ„å“ªä¸ªåŸåˆ™ï¼Œå…ˆå£°æ˜åï¼Œæ‰å¯ä»¥ä½¿ç”¨ã€‚æ‰€ä»¥ä¸‹é¢çš„ä¾‹å­ä¸­ï¼š 1234let [x=1,y=x]=[];//x=1,y=1let [x=1,y=x]=[2];//x=2,y=2let [x=1,y=x]=[3,4];//x=3,y=4let [x=y,y=1]=[1,2];//æŠ¥é”™ å¯¹è±¡çš„è§£æ„èµ‹å€¼æˆ‘ä»¬æœ€å¼€å§‹çš„æ—¶å€™æåˆ°äº†ï¼š{}é‡Œé¢çš„èµ·åå¿…é¡»å’Œobjé‡Œé¢çš„é”®ç›¸åŒï¼Œå¦åˆ™å¾—ä¸åˆ°æ­£ç¡®çš„å€¼ã€‚è¿™ä¹Ÿæ˜¯æ•°ç»„å’Œå¯¹è±¡çš„è§£æ„èµ‹å€¼çš„æœ€å¤§åŒºåˆ«ã€‚å› ä¸ºæ•°ç»„æ˜¯é¡ºåºç»“æ„ï¼Œæ‰€ä»¥éƒ½æ˜¯æŒ‰æ‰¾é¡ºåºå–å€¼å°±è¡Œäº†ã€‚ä½†æ˜¯å¯¹è±¡ä¸æ˜¯å•çº¯çš„ä»¥æ ˆçš„æ•°æ®ç»“æ„æ¥å­˜å‚¨æ•°æ®çš„ï¼Œå®ƒåŒ…æ‹¬äº†å †å’Œæ ˆã€‚æ‰€ä»¥è±¡çš„å±æ€§æ²¡æœ‰æ¬¡åºï¼Œå˜é‡å¿…é¡»ä¸å±æ€§åŒåï¼Œæ‰èƒ½å–åˆ°æ­£ç¡®çš„å€¼ã€‚ åŸºæœ¬çš„å¯¹è±¡çš„è§£æ„èµ‹å€¼ï¼Œæ˜¯é•¿è¿™ä¸ªæ ·å­çš„ï¼š12let &#123;A,B&#125;=&#123;A:a,B:b&#125;let &#123;B,A&#125;=&#123;A:a,B:b&#125; ä¸Šé¢çš„ç»“æœéƒ½æ˜¯A=a,B=b;Aï¼ŒBçš„é¡ºåºæ²¡æœ‰å½±å“ï¼Œåªè¦åå­—å¯¹åº”å°±è¡Œå–½ã€‚ å…¶å®å®ƒå†…éƒ¨æ˜¯è¿™æ ·çš„ï¼š1let &#123;A=A,B=B&#125;=&#123;A:a,B:b&#125;; æ‰€ä»¥å¦‚æœæ¯”å¦‚æˆ‘ä»¬æƒ³æŠŠaå–å‡ºæ¥ï¼Œä½†æ˜¯ä¸æƒ³æ”¾åœ¨Aè¿™ä¸ªåå­—é‡Œï¼Œå¯ä»¥å‘è¿™æ ·ï¼š1let &#123;A=C,B=D&#125;=&#123;A:a,B:b&#125;; è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬æ‰“å°å¤„Cï¼ŒDçš„æ—¶å€™ï¼Œå°±æ˜¯å€¼ä¸ºaæˆ–è€…bã€‚çœŸæ­£è¢«èµ‹å€¼çš„æ˜¯åé¢çš„è¿™ä¸ªCï¼ŒDï¼Œå¦‚æœæ²¡æœ‰Cï¼ŒDçš„æ—¶å€™èµ‹å€¼çš„æ‰æ˜¯Aï¼ŒBã€‚ è¿˜è¦æ³¨æ„å¦‚æœæ˜¯ç”¨letæˆ–è€…constå£°æ˜çš„è¯ï¼Œè¿™é‡Œçš„Aï¼ŒBï¼ŒCï¼ŒDéƒ½ä¸èƒ½è¢«èµ‹å€¼è¿‡ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚å› ä¸ºletå’Œconstä¸­å˜é‡ä¸èƒ½é‡æ–°å£°æ˜ã€‚å¦‚æœæ˜¯varè¿˜æ˜¯å¯ä»¥çš„ã€‚12let C='test';let &#123;A=C,B=D&#125;=&#123;A:a,B:b&#125;;//error å¦‚æœæŠŠç¬¬äºŒä¸ªletå»æ‰ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚è¿™è¦æ³¨æ„ã€‚ åˆšåˆšæˆ‘ä»¬è®²è¿‡æ•°ç»„åµŒå¥—æ—¶ï¼Œåªè¦å¯¹åº”å°±è¡Œã€‚å¯¹è±¡ä¹Ÿæ˜¯å¯ä»¥åµŒå¥—çš„ã€‚å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š123var obj = &#123;get:['first',&#123;inner:'second'&#125;]&#125;;var &#123;get:[x,&#123;inner&#125;]&#125;;console.log(x+\" \"+y);//first second æ³¨æ„è¿™é‡Œçš„getä¸ä¼šè¢«èµ‹å€¼ï¼Œå®ƒåœ¨æ­¤å¤„ä»£è¡¨æ¨¡å¼ã€‚å¦‚æœä½ å°è¯•æ‰“å°å‡ºget,ä¼šå¾—åˆ°ReferenceError: p is not definedçš„é”™ã€‚ ä¸æ•°ç»„çš„è§£æ„èµ‹å€¼ä¸€æ ·ï¼Œå¯¹è±¡çš„è§£æ„èµ‹å€¼ä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤å‚æ•°ã€‚ å¯¹è±¡è§£æ„ä¹Ÿå¯ä»¥æœ‰é»˜è®¤å€¼123456789var &#123;one=1&#125; = &#123;&#125;; //one:1var &#123;one,two=2&#125;=&#123;1&#125;; //one:1,two:2var obj=&#123;username:'Seven',password:'123'&#125;;var &#123;username='åŒ¿å',password='null'&#125;=obj; //username:Seven,password:123var &#123;username:name='æ¸¸å®¢',password='null'&#125; = &#123;&#125;;//name:æ¸¸å®¢,password:nullvar &#123;username&#125;=&#123;wrong:'æ¸¸å®¢'&#125;;//username=undefined,è§£æ„å¤±è´¥ï¼Œä¸ºundefined ä¸Šé¢è¿™éƒ½æ˜¯å£°æ˜çš„æ—¶å€™ç›´æ¥èµ‹å€¼äº†ã€‚å¦‚æœæˆ‘ä»¬æŠŠå£°æ˜å’Œèµ‹å€¼åˆ†å¼€ï¼Œå¦‚ä¸‹é¢çš„æƒ…å†µï¼š123var username;&#123;username&#125;=&#123;username:'Seven'&#125; //wrong(&#123;username&#125;=&#123;username:'Seven'&#125;) //true ä¼šæŠ¥è¯­æ³•é”™è¯¯ï¼ŒSyntaxError: expected expression, got &#39;=&#39;è¿™æ˜¯ç”±äº{}åœ¨å¼€å¤´ä¼šè¢«è§£æä¸ºä»£ç å—ã€‚è§£å†³æ–¹æ³•æ˜¯æˆ‘ä»¬ç”¨ï¼ˆï¼‰æŠŠå®ƒæ‰©èµ·æ¥ã€‚å¦‚ä¸Šé¢æ‰€ç¤ºã€‚ é‚£ä¹ˆè¿™ä¸ªå¯¹è±¡çš„è§£æ„èµ‹å€¼ç”¨é€”å¤§å—ï¼Ÿå…¶å®å¯å¥½ç”¨äº†ï¼Œæ¯”å¦‚ï¼š1234567891011var obj = &#123; username:'Seven', password:'123', highestScore:function()&#123; console.log(100); &#125;, lowestScore:function()&#123; console.log(60); &#125;&#125;var &#123;username,password,highestScore,lowestScore&#125;=obj; è¿™æ ·æˆ‘ä»¬åˆ†åˆ«æŠŠæ™®é€šå€¼å’Œæ–¹æ³•èµ‹å€¼ç»™äº†ç›¸åº”çš„å˜é‡ã€‚å½“æˆ‘ä»¬æ‰“å°å¤„usernameçš„æ—¶å€™æ˜¯Seven,å½“æˆ‘ä»¬console.log(highestScore());çš„æ—¶å€™ä¼šå¾—åˆ°100å•¦ã€‚ æ›´å¤šç”¨é€”ä¸Šé¢æˆ‘ä»¬å·²ç»æåˆ°äº†ä¸€ç§æœ€ç®€å•çš„ç”¨é€”ï¼Œå…¶å®è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„ç”¨é€”ï¼Œæ¯”å¦‚ï¼š å¯ä»¥åœ¨å‡½æ•°ä¸­ç”¨1234function fn([x,y])&#123; return x*y;&#125;console.log(fn([1,2])); å¯ä»¥åœ¨å¾ªç¯ä¸­ç”¨12[[1,2,3],[4,5,6]].map(([a,b,c])=&gt;a+b+c;) //[6,15][1,undefined,2].map((x='set')=&gt;x) //1,'set',2 ä¸Šé¢çš„è¿™å‡ ä¸ªä¾‹å­ï¼Œå¯èƒ½ä½ ä¼šè¯´ï¼Œå¦‚æœæˆ‘ä¸ç”¨è§£æ„ï¼Œç”¨åŸå§‹ä¼ å‚ä¹Ÿå¯ä»¥å•Šï¼Œçœ‹äº†ä¸‹é¢çš„å‡ ä¸ªï¼Œä½ å°±ä¸ä¼šè¿™ä¹ˆè¯´äº†ã€‚ï¼šï¼‰ è¿”å›å¤šä¸ªå€¼ä»¥å‰å¦‚æœæˆ‘ä»¬è¦è¿”å›å¤šä¸ªå€¼ï¼Œå°±è¦æŠŠå€¼åŒ…è£…æˆå¯¹è±¡ æˆ–è€…æ•°ç»„ï¼Œç„¶åå‡½æ•°å¤–é¢æ—¶å€™åœ¨æ‹†åˆ†ï¼Œè¿™å¤šéº»çƒ¦ã€‚æœ‰äº†è§£æ„èµ‹å€¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“å°±å®ç°è¿™ä¸€ç‚¹ã€‚123456789function test()&#123; return [1,5,'Seven'];&#125;var [a,b,c]=test();function test1()&#123; return &#123;first:'1',second:'2',str:'this is a string'&#125;;&#125;var &#123;first,second,str&#125;=test1(); è¿™æ ·æˆ‘ä»¬å°±å¾ˆå®¹æ˜“çš„æŠŠæ¯ä¸ªå€¼ï¼Œç›´æ¥æ”¾åˆ°å˜é‡é‡Œäº†ã€‚ä½†æ˜¯è¿˜æ˜¯è¦æ³¨æ„ï¼Œä½¿ç”¨å¯¹è±¡çš„è§£æ„æ—¶ï¼Œè¦åç§°å¯¹åº”ã€‚ å°†å‚æ•°å’Œå€¼å¯¹åº”èµ·æ¥ä»¥å‰æˆ‘ä»¬åœ¨ä¼ å‚çš„æ—¶å€™ï¼Œè¦æ—¶åˆ»æ³¨æ„å‚æ•°çš„å¯¹åº”ã€‚å¦‚æœä¸å¯¹åº”ï¼Œå‡½æ•°å˜é‡å¯¹åº”çš„å€¼ï¼Œå°±æ˜¯ä¸å¯¹çš„ã€‚12function test(a,b,c)&#123;&#125;test(1,2,3); ç”¨æ•°ç»„çš„è¯æ˜¯å¯¹åº”çš„ã€‚ä¹Ÿæ˜¯ä¸€ç»„æœ‰æ¬¡åºçš„å€¼ã€‚è¿™ä¸ªæ—¶å€™è·Ÿæˆ‘ä»¬ä»¥å‰çš„ç”¨æ³•æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ã€‚12function test([a,b,c])&#123;&#125;test([1,2,3]); ä½†æ˜¯å½“æ˜¯å¯¹è±¡çš„æ—¶å€™ï¼Œå°±ä¸æ˜¯è¿™æ ·äº†ã€‚å¯¹è±¡å¯ä»¥æ˜¯ä¸€ç»„æ— åºçš„å‚æ•°ã€‚12function test(&#123;x,y,z&#125;)&#123;&#125;test(&#123;y:1,x:2,z:4&#125;) å¿«é€Ÿæå–jsonå¯¹è±¡ä¸­çš„å€¼123456var jsonobj = &#123; username:'seven', password:'124', hobbies:['travelling','singing']&#125;var &#123;username,password,hobbies&#125; = jsonobj; è¿™ä¸ªè·Ÿæˆ‘ä»¬å…ˆå‰è®²çš„highestScore()ï¼Œæœ‰ç‚¹ç±»ä¼¼ã€‚ é»˜è®¤å‚æ•°è¿‡å»æˆ‘ä»¬å¯èƒ½æ˜¯è¿™æ ·çš„ã€‚1234wechat = function(url,username,message)&#123; username = username || 'Seven'; message = message || 'message is null';&#125; ç°åœ¨æˆ‘ä»¬è¿™æ ·å°±è¡Œäº†ï¼š123456wechat = function(url,&#123; username='Seven', message='message is null', isLogin = 'no', cache = 'no'&#125;)&#123;&#125; é€šè¿‡è¿™æ ·çš„ä¼ å‚å½¢å¼ï¼Œå°±é¿å…äº†ç±»ä¼¼a=a||&#39;test&#39;è¿™ç§å†™æ³•ã€‚ æ€»ç»“ä¸»è¦æ˜¯æŠŠå˜é‡çš„è§£æ„èµ‹å€¼ï¼Œè¿™å—ç»™ç†è§£äº†ä¸‹ã€‚ES6çš„æ–°ç‰¹æ€§è¦åœ¨å¹³æ—¶åˆ»æ„çš„å¤šç”¨ã€‚ç­‰åˆ°ä»¥åå®Œå…¨è¢«æµè§ˆå™¨æ”¯æŒçš„æ—¶å€™ï¼Œç”¨èµ·æ¥å°±æ–¹ä¾¿å¤šäº†ã€‚è§£æ„èµ‹å€¼çš„ç”¨é€”è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œæˆ‘è§‰å¾—å¾ˆæ£’ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"ES6","slug":"ES6","permalink":"http://sevencai.github.io/tags/ES6/"}]},{"title":"Internet(å› ç‰¹ç½‘)æ¦‚è¿°","slug":"Internet-å› ç‰¹ç½‘-æ¦‚è¿°","date":"2016-06-10T08:58:11.000Z","updated":"2016-06-11T01:26:32.000Z","comments":true,"path":"2016/06/10/Internet-å› ç‰¹ç½‘-æ¦‚è¿°/","link":"","permalink":"http://sevencai.github.io/2016/06/10/Internet-å› ç‰¹ç½‘-æ¦‚è¿°/","excerpt":"","text":"ç°åœ¨çš„ç½‘ç»œæ˜¯æŒ‡â€œä¸‰ç½‘â€ï¼Œå³ç”µä¿¡ç½‘ç»œã€æœ‰çº¿ç”µè§†ç½‘ç»œå’Œè®¡ç®—æœºç½‘ç»œã€‚å‘å±•æœ€å¿«çš„å¹¶èµ·åˆ°æ ¸å¿ƒä½œç”¨çš„å½“ç„¶æ˜¯è®¡ç®—æœºç½‘ç»œã€‚ä¸‹é¢ä»‹ç»ä¸‹å› ç‰¹ç½‘çš„æ¦‚è¿°ï¼ŒåŒ…æ‹¬å› ç‰¹ç½‘çš„ç»„æˆï¼Œç½‘ç»œï¼ŒèŠ‚ç‚¹ï¼Œé“¾è·¯ç­‰ç­‰æ¦‚å¿µã€‚å¤§æ¦‚ä¼šæœ‰ä¸‹é¢è¿™äº›å†…å®¹ã€‚ åŸºæœ¬æ¦‚å¿µåŒºåˆ†ç½‘ç»œ(network)ç”±è‹¥å¹²ç»“ç‚¹(node)å’Œè¿æ¥è¿™äº›ç»“ç‚¹çš„é“¾è·¯(link)ç»„æˆã€‚ ï¼ˆæ³¨æ„æ­¤ç»“ç‚¹ä¸ç­‰äºèŠ‚ç‚¹ï¼‰äº’è”ç½‘æ˜¯â€œç½‘ç»œçš„ç½‘ç»œâ€(network of networks)ã€‚è¿æ¥åœ¨å› ç‰¹ç½‘ä¸Šçš„è®¡ç®—æœºéƒ½ç§°ä¸ºä¸»æœº(host)ã€‚ ç½‘ç»œæŠŠè®¸å¤šè®¡ç®—æœºè¿æ¥åœ¨ä¸€èµ·ã€‚å› ç‰¹ç½‘åˆ™æŠŠè®¸å¤šç½‘ç»œè¿æ¥åœ¨ä¸€èµ·ã€‚ 1983æ˜¯å› ç‰¹ç½‘çš„è¯ç”Ÿæ—¶é—´ã€‚ Internet å’Œ Internet çš„åŒºåˆ«ä»¥å°å†™å­—æ¯ i å¼€å§‹çš„ internetï¼ˆäº’è”ç½‘æˆ–äº’è¿ç½‘ï¼‰æ˜¯ä¸€ä¸ªé€šç”¨åè¯ï¼Œå®ƒæ³›æŒ‡ç”±å¤šä¸ªè®¡ç®—æœºç½‘ç»œäº’è¿è€Œæˆçš„ç½‘ç»œã€‚ ä»¥å¤§å†™å­—æ¯Iå¼€å§‹çš„çš„ Internetï¼ˆå› ç‰¹ç½‘ï¼‰åˆ™æ˜¯ä¸€ä¸ªä¸“ç”¨åè¯ï¼Œå®ƒæŒ‡å½“å‰å…¨çƒæœ€å¤§çš„ã€å¼€æ”¾çš„ã€ç”±ä¼—å¤šç½‘ç»œç›¸äº’è¿æ¥è€Œæˆçš„ç‰¹å®šè®¡ç®—æœºç½‘ç»œï¼Œå®ƒé‡‡ç”¨ TCP/IP åè®®æ—ä½œä¸ºé€šä¿¡çš„è§„åˆ™ï¼Œä¸”å…¶å‰èº«æ˜¯ç¾å›½çš„ ARPANETã€‚ ä¸‰çº§ç»“æ„çš„å› ç‰¹ç½‘ä¸‰çº§è®¡ç®—æœºç½‘ç»œï¼Œåˆ†ä¸ºä¸»å¹²ç½‘ã€åœ°åŒºç½‘å’Œæ ¡å›­ç½‘ï¼ˆæˆ–ä¼ä¸šç½‘ï¼‰ã€‚ å› ç‰¹ç½‘æœåŠ¡æä¾›è€… ISPInternet Service Providerå› ç‰¹ç½‘æœåŠ¡æä¾›è€…ï¼Œæ‰€ä»¥ISPåˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ æˆ‘ä»¬æ‰€æœ‰çš„ç”¨æˆ·éƒ½æ˜¯é€šè¿‡ISPä¸Šç½‘çš„ã€‚ æ ¹æ®æä¾›æœåŠ¡çš„è¦†ç›–é¢ç§¯å¤§å°ä»¥åŠæ‰€æ‹¥æœ‰çš„IP åœ°å€æ•°ç›®çš„ä¸åŒï¼ŒISP ä¹Ÿåˆ†æˆä¸ºä¸åŒçš„å±‚æ¬¡ã€‚ ä¸‹é¢æ˜¯å…·æœ‰ä¸‰å±‚ ISP ç»“æ„çš„å› ç‰¹ç½‘çš„æ¦‚å¿µç¤ºæ„å›¾ï¼š å› ç‰¹ç½‘çš„ç»„æˆ è¾¹ç¼˜éƒ¨åˆ† ç”±æ‰€æœ‰è¿æ¥åœ¨å› ç‰¹ç½‘ä¸Šçš„ä¸»æœºç»„æˆã€‚è¿™éƒ¨åˆ†æ˜¯ç”¨æˆ·ç›´æ¥ä½¿ç”¨çš„ï¼Œç”¨æ¥è¿›è¡Œé€šä¿¡ï¼ˆä¼ é€æ•°æ®ã€éŸ³é¢‘æˆ–è§†é¢‘ï¼‰å’Œèµ„æºå…±äº«ã€‚ æ ¸å¿ƒéƒ¨åˆ† ç”±å¤§é‡ç½‘ç»œå’Œè¿æ¥è¿™äº›ç½‘ç»œçš„è·¯ç”±å™¨ç»„æˆã€‚è¿™éƒ¨åˆ†æ˜¯ä¸ºè¾¹ç¼˜éƒ¨åˆ†æä¾›æœåŠ¡çš„ï¼ˆæä¾›è¿é€šæ€§å’Œäº¤æ¢ï¼‰ ç«¯ç³»ç»Ÿå¤„åœ¨å› ç‰¹ç½‘è¾¹ç¼˜çš„éƒ¨åˆ†å°±æ˜¯è¿æ¥åœ¨å› ç‰¹ç½‘ä¸Šçš„æ‰€æœ‰çš„ä¸»æœºã€‚è¿™äº›ä¸»æœºåˆç§°ä¸ºç«¯ç³»ç»Ÿ(end system)ã€‚ ä¸»æœºé€šä¿¡â€œä¸»æœº A å’Œä¸»æœº B è¿›è¡Œé€šä¿¡â€ï¼Œå®é™…ä¸Šæ˜¯æŒ‡ï¼šâ€œè¿è¡Œåœ¨ä¸»æœº A ä¸Šçš„æŸä¸ªç¨‹åºå’Œè¿è¡Œåœ¨ä¸»æœº B ä¸Šçš„å¦ä¸€ä¸ªç¨‹åºè¿›è¡Œé€šä¿¡â€ã€‚ å³â€œä¸»æœº A çš„æŸä¸ªè¿›ç¨‹å’Œä¸»æœº B ä¸Šçš„å¦ä¸€ä¸ªè¿›ç¨‹è¿›è¡Œé€šä¿¡â€ã€‚æˆ–ç®€ç§°ä¸ºâ€œè®¡ç®—æœºä¹‹é—´é€šä¿¡â€ã€‚ ä¸¤ç§é€šä¿¡æ–¹å¼åœ¨ç½‘ç»œè¾¹ç¼˜çš„ç«¯ç³»ç»Ÿä¸­è¿è¡Œçš„ç¨‹åºä¹‹é—´çš„é€šä¿¡æ–¹å¼é€šå¸¸å¯åˆ’åˆ†ä¸ºä¸¤å¤§ç±»ï¼šå®¢æˆ·-æœåŠ¡å™¨æ–¹å¼å³Client/Serveræ–¹å¼ ,å¯¹ç­‰æ–¹å¼å³ Peer-to-Peeræ–¹å¼ ã€‚ å®¢æˆ·-æœåŠ¡å™¨æ–¹å¼ï¼ˆC/S æ–¹å¼ï¼‰å®¢æˆ·(client)å’ŒæœåŠ¡å™¨(server)éƒ½æ˜¯æŒ‡é€šä¿¡ä¸­æ‰€æ¶‰åŠçš„ä¸¤ä¸ªåº”ç”¨è¿›ç¨‹ã€‚å®¢æˆ·-æœåŠ¡å™¨æ–¹å¼æ‰€æè¿°çš„æ˜¯è¿›ç¨‹ä¹‹é—´æœåŠ¡å’Œè¢«æœåŠ¡çš„å…³ç³»ã€‚å®¢æˆ·æ˜¯æœåŠ¡çš„è¯·æ±‚æ–¹ï¼ŒæœåŠ¡å™¨æ˜¯æœåŠ¡çš„æä¾›æ–¹ã€‚ å®¢æˆ·è½¯ä»¶çš„ç‰¹ç‚¹è¢«ç”¨æˆ·è°ƒç”¨åè¿è¡Œï¼Œåœ¨æ‰“ç®—é€šä¿¡æ—¶ä¸»åŠ¨å‘è¿œåœ°æœåŠ¡å™¨å‘èµ·é€šä¿¡ï¼ˆè¯·æ±‚æœåŠ¡ï¼‰ã€‚å› æ­¤ï¼Œå®¢æˆ·ç¨‹åºå¿…é¡»çŸ¥é“æœåŠ¡å™¨ç¨‹åºçš„åœ°å€ã€‚ä¸éœ€è¦ç‰¹æ®Šçš„ç¡¬ä»¶å’Œå¾ˆå¤æ‚çš„æ“ä½œç³»ç»Ÿã€‚ æœåŠ¡å™¨è½¯ä»¶çš„ç‰¹ç‚¹ä¸€ç§ä¸“é—¨ç”¨æ¥æä¾›æŸç§æœåŠ¡çš„ç¨‹åºï¼Œå¯åŒæ—¶å¤„ç†å¤šä¸ªè¿œåœ°æˆ–æœ¬åœ°å®¢æˆ·çš„è¯·æ±‚ã€‚ç³»ç»Ÿå¯åŠ¨åå³è‡ªåŠ¨è°ƒç”¨å¹¶ä¸€ç›´ä¸æ–­åœ°è¿è¡Œç€ï¼Œè¢«åŠ¨åœ°ç­‰å¾…å¹¶æ¥å—æ¥è‡ªå„åœ°çš„å®¢æˆ·çš„é€šä¿¡è¯·æ±‚ï¼Œå› æ­¤ï¼ŒæœåŠ¡å™¨ç¨‹åºä¸éœ€è¦çŸ¥é“å®¢æˆ·ç¨‹åºçš„åœ°å€ã€‚ä¸€èˆ¬éœ€è¦å¼ºå¤§çš„ç¡¬ä»¶å’Œé«˜çº§çš„æ“ä½œç³»ç»Ÿæ”¯æŒã€‚ å¯¹ç­‰è¿æ¥æ–¹å¼ å¯¹ç­‰è¿æ¥(peer-to-peerï¼Œç®€å†™ä¸º P2P)æ˜¯æŒ‡ä¸¤ä¸ªä¸»æœºåœ¨é€šä¿¡æ—¶å¹¶ä¸åŒºåˆ†å“ªä¸€ä¸ªæ˜¯æœåŠ¡è¯·æ±‚æ–¹è¿˜æ˜¯æœåŠ¡æä¾›æ–¹ã€‚åªè¦ä¸¤ä¸ªä¸»æœºéƒ½è¿è¡Œäº†å¯¹ç­‰è¿æ¥è½¯ä»¶ï¼ˆP2P è½¯ä»¶ï¼‰ï¼Œå®ƒä»¬å°±å¯ä»¥è¿›è¡Œå¹³ç­‰çš„ã€å¯¹ç­‰è¿æ¥é€šä¿¡ã€‚åŒæ–¹éƒ½å¯ä»¥ä¸‹è½½å¯¹æ–¹å·²ç»å­˜å‚¨åœ¨ç¡¬ç›˜ä¸­çš„å…±äº«æ–‡æ¡£ã€‚ å¯¹ç­‰è¿æ¥æ–¹å¼ä»æœ¬è´¨ä¸Šçœ‹ä»ç„¶æ˜¯ä½¿ç”¨å®¢æˆ·æœåŠ¡å™¨æ–¹å¼ï¼Œåªæ˜¯å¯¹ç­‰è¿æ¥ä¸­çš„æ¯ä¸€ä¸ªä¸»æœºæ—¢æ˜¯å®¢æˆ·åˆåŒæ—¶æ˜¯æœåŠ¡å™¨ã€‚ä¾‹å¦‚ä¸»æœº C è¯·æ±‚ D çš„æœåŠ¡æ—¶ï¼ŒC æ˜¯å®¢æˆ·ï¼ŒD æ˜¯æœåŠ¡å™¨ã€‚ä½†å¦‚æœ C åˆåŒæ—¶å‘ Fæä¾›æœåŠ¡ï¼Œé‚£ä¹ˆ C åˆåŒæ—¶èµ·ç€æœåŠ¡å™¨çš„ä½œç”¨ã€‚ å› ç‰¹ç½‘çš„æ ¸å¿ƒéƒ¨åˆ†ç½‘ç»œæ ¸å¿ƒéƒ¨åˆ†æ˜¯å› ç‰¹ç½‘ä¸­æœ€å¤æ‚çš„éƒ¨åˆ†ã€‚ ç½‘ç»œä¸­çš„æ ¸å¿ƒéƒ¨åˆ†è¦å‘ç½‘ç»œè¾¹ç¼˜ä¸­çš„å¤§é‡ä¸»æœºæä¾›è¿é€šæ€§ï¼Œä½¿è¾¹ç¼˜éƒ¨åˆ†ä¸­çš„ä»»ä½•ä¸€ä¸ªä¸»æœºéƒ½èƒ½å¤Ÿå‘å…¶ä»–ä¸»æœºé€šä¿¡ï¼ˆå³ä¼ é€æˆ–æ¥æ”¶å„ç§å½¢å¼çš„æ•°æ®ï¼‰ã€‚ åœ¨ç½‘ç»œæ ¸å¿ƒéƒ¨åˆ†èµ·ç‰¹æ®Šä½œç”¨çš„æ˜¯è·¯ç”±å™¨(router)ã€‚ åœ¨å› ç‰¹ç½‘æ ¸å¿ƒéƒ¨åˆ†çš„è·¯ç”±å™¨ä¹‹é—´ä¸€èˆ¬éƒ½ç”¨é«˜é€Ÿé“¾è·¯ç›¸è¿æ¥ï¼Œè€Œåœ¨ç½‘ç»œè¾¹ç¼˜çš„ä¸»æœºæ¥å…¥åˆ°æ ¸å¿ƒéƒ¨åˆ†åˆ™é€šå¸¸ä»¥ç›¸å¯¹è¾ƒä½é€Ÿç‡çš„é“¾è·¯ç›¸è¿æ¥ã€‚ä¸»æœºçš„ç”¨é€”æ˜¯ä¸ºç”¨æˆ·è¿›è¡Œä¿¡æ¯å¤„ç†çš„ï¼Œå¹¶ä¸”å¯ä»¥å’Œå…¶ä»–ä¸»æœºé€šè¿‡ç½‘ç»œäº¤æ¢ä¿¡æ¯ã€‚è·¯ç”±å™¨çš„ç”¨é€”åˆ™æ˜¯ç”¨æ¥è½¬å‘åˆ†ç»„çš„ï¼Œå³è¿›è¡Œåˆ†ç»„äº¤æ¢çš„ã€‚ è·¯ç”±å™¨æ˜¯å®ç°åˆ†ç»„äº¤æ¢(packet switching)çš„å…³é”®æ„ä»¶ï¼Œå…¶ä»»åŠ¡æ˜¯è½¬å‘æ”¶åˆ°çš„åˆ†ç»„ï¼Œè¿™æ˜¯ç½‘ç»œæ ¸å¿ƒéƒ¨åˆ†æœ€é‡è¦çš„åŠŸèƒ½ã€‚ è·¯ç”±å™¨çš„ä½œç”¨è·¯ç”±å™¨æ˜¯å®ç°åˆ†ç»„äº¤æ¢(packet switching)çš„å…³é”®æ„ä»¶ï¼Œå…¶ä»»åŠ¡æ˜¯è½¬å‘æ”¶åˆ°çš„åˆ†ç»„ï¼Œè¿™æ˜¯ç½‘ç»œæ ¸å¿ƒéƒ¨åˆ†æœ€é‡è¦çš„åŠŸèƒ½ã€‚ ä¸ºäº†äº†è§£åˆ†ç»„äº¤æ¢ï¼Œæˆ‘ä»¬çœ‹ä¸‹æœ‰å“ªäº›äº¤æ¢ã€‚ ä¸‰ç§äº¤æ¢æ–¹å¼ç”µè·¯äº¤æ¢ä¸¤éƒ¨ç”µè¯æœºåªéœ€è¦ç”¨ä¸€å¯¹ç”µçº¿å°±èƒ½å¤Ÿäº’ç›¸è¿æ¥èµ·æ¥ã€‚ 5 éƒ¨ç”µè¯æœºä¸¤ä¸¤ç›¸è¿ï¼Œéœ€ 10 å¯¹ç”µçº¿ã€‚N éƒ¨ç”µè¯æœºä¸¤ä¸¤ç›¸è¿ï¼Œéœ€ N(N â€“ 1)/2 å¯¹ç”µçº¿ã€‚å½“ç”µè¯æœºçš„æ•°é‡å¾ˆå¤§æ—¶ï¼Œè¿™ç§è¿æ¥æ–¹æ³•éœ€è¦çš„ç”µçº¿å¯¹çš„æ•°é‡ä¸ç”µè¯æœºæ•°çš„å¹³æ–¹æˆæ­£æ¯”ã€‚ å½“ç”µè¯æœºçš„æ•°é‡å¢å¤šæ—¶ï¼Œå°±è¦ä½¿ç”¨äº¤æ¢æœºæ¥å®Œæˆå…¨ç½‘çš„äº¤æ¢ä»»åŠ¡ã€‚ åœ¨è¿™é‡Œï¼Œâ€œäº¤æ¢â€(switching)çš„å«ä¹‰å°±æ˜¯è½¬æ¥â€”â€”æŠŠä¸€æ¡ç”µè¯çº¿è½¬æ¥åˆ°å¦ä¸€æ¡ç”µè¯çº¿ï¼Œä½¿å®ƒä»¬è¿é€šèµ·æ¥ã€‚ä»é€šä¿¡èµ„æºçš„åˆ†é…è§’åº¦æ¥çœ‹ï¼Œâ€œäº¤æ¢â€å°±æ˜¯æŒ‰ç…§æŸç§æ–¹å¼åŠ¨æ€åœ°åˆ†é…ä¼ è¾“çº¿è·¯çš„èµ„æºã€‚ ç”µè·¯äº¤æ¢å¿…å®šæ˜¯é¢å‘è¿æ¥çš„ã€‚ ç”µè·¯äº¤æ¢çš„ä¸‰ä¸ªé˜¶æ®µï¼šå»ºç«‹è¿æ¥,é€šä¿¡,é‡Šæ”¾è¿æ¥. A å’Œ B é€šè¯ç»è¿‡å››ä¸ªäº¤æ¢æœº,é€šè¯åœ¨ A åˆ° B çš„è¿æ¥ä¸Šè¿›è¡Œ.å¾ˆæ˜æ˜¾ï¼Œç”µè·¯äº¤æ¢ä¼ é€è®¡ç®—æœºæ•°æ®æ•ˆç‡ä½ã€‚ åˆ†ç»„äº¤æ¢ åœ¨å‘é€ç«¯ï¼Œå…ˆæŠŠè¾ƒé•¿çš„æŠ¥æ–‡åˆ’åˆ†æˆè¾ƒçŸ­çš„ã€å›ºå®šé•¿åº¦çš„æ•°æ®æ®µã€‚ æ¯ä¸€ä¸ªæ•°æ®æ®µå‰é¢æ·»åŠ ä¸Šé¦–éƒ¨æ„æˆåˆ†ç»„ã€‚ åˆ†ç»„äº¤æ¢ç½‘ä»¥â€œåˆ†ç»„â€ä½œä¸ºæ•°æ®ä¼ è¾“å•å…ƒã€‚ ä¾æ¬¡æŠŠå„åˆ†ç»„å‘é€åˆ°æ¥æ”¶ç«¯ï¼ˆå‡å®šæ¥æ”¶ç«¯åœ¨å·¦è¾¹ï¼‰ã€‚ æ¯ä¸€ä¸ªåˆ†ç»„çš„é¦–éƒ¨éƒ½å«æœ‰åœ°å€ç­‰æ§åˆ¶ä¿¡æ¯ã€‚ åˆ†ç»„äº¤æ¢ç½‘ä¸­çš„ç»“ç‚¹äº¤æ¢æœºæ ¹æ®æ”¶åˆ°çš„åˆ†ç»„çš„é¦–éƒ¨ä¸­çš„åœ°å€ä¿¡æ¯ï¼ŒæŠŠåˆ†ç»„è½¬å‘åˆ°ä¸‹ä¸€ä¸ªç»“ç‚¹äº¤æ¢æœºã€‚ ç”¨è¿™æ ·çš„å­˜å‚¨è½¬å‘æ–¹å¼ï¼Œæœ€ååˆ†ç»„å°±èƒ½åˆ°è¾¾æœ€ç»ˆç›®çš„åœ°ã€‚ æ¥æ”¶ç«¯æ”¶åˆ°åˆ†ç»„åå‰¥å»é¦–éƒ¨è¿˜åŸæˆæŠ¥æ–‡ã€‚ æœ€åï¼Œåœ¨æ¥æ”¶ç«¯æŠŠæ”¶åˆ°çš„æ•°æ®æ¢å¤æˆä¸ºåŸæ¥çš„æŠ¥æ–‡ã€‚ æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬å‡å®šåˆ†ç»„åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ²¡æœ‰å‡ºç°å·®é”™ï¼Œåœ¨è½¬å‘æ—¶ä¹Ÿæ²¡æœ‰è¢«ä¸¢å¼ƒã€‚ è¿‡ç¨‹å¦‚ä¸‹ï¼š æ³¨æ„åˆ†ç»„çš„æ•°æ®åŒ…åˆ°è¾¾ç›®çš„åœ°çš„è·¯å¾„å¯ä»¥ä¸ç›¸åŒã€‚ä¸­é—´å¯èƒ½æœ‰å¾ˆå¤šä¸ªè·¯ç”±å™¨ï¼Œæ¯åˆ°ä¸€ä¸ªè·¯ç”±å™¨å°±ï¼šåœ¨è·¯ç”±å™¨ä¸­æš‚å­˜æŸ¥æ‰¾è½¬å‘è¡¨æ‰¾åˆ°è½¬å‘çš„ç«¯å£ã€‚ åˆ†ç»„äº¤æ¢çš„ä¼˜ç‚¹ é«˜æ•ˆ åŠ¨æ€åˆ†é…ä¼ è¾“å¸¦å®½ï¼Œå¯¹é€šä¿¡é“¾è·¯æ˜¯é€æ®µå ç”¨ã€‚ çµæ´» ä»¥åˆ†ç»„ä¸ºä¼ é€å•ä½å’ŒæŸ¥æ‰¾è·¯ç”±ã€‚ è¿…é€Ÿ ä¸å¿…å…ˆå»ºç«‹è¿æ¥å°±èƒ½å‘å…¶ä»–ä¸»æœºå‘é€åˆ†ç»„ã€‚ å¯é  ä¿è¯å¯é æ€§çš„ç½‘ç»œåè®®ï¼›åˆ†å¸ƒå¼çš„è·¯ç”±é€‰æ‹©åè®®ä½¿ç½‘ç»œæœ‰å¾ˆå¥½çš„ç”Ÿå­˜æ€§ã€‚åˆ†ç»„äº¤æ¢çš„ç¼ºç‚¹ åˆ†ç»„åœ¨å„ç»“ç‚¹å­˜å‚¨è½¬å‘æ—¶éœ€è¦æ’é˜Ÿï¼Œè¿™å°±ä¼šé€ æˆä¸€å®šçš„æ—¶å»¶ã€‚ åˆ†ç»„å¿…é¡»æºå¸¦çš„é¦–éƒ¨ï¼ˆé‡Œé¢æœ‰å¿…ä¸å¯å°‘çš„æ§åˆ¶ä¿¡æ¯ï¼‰ä¹Ÿé€ æˆäº†ä¸€å®šçš„å¼€é”€ã€‚ æŠ¥æ–‡äº¤æ¢å­˜å‚¨è½¬å‘åŸç†å¹¶éå®Œå…¨æ–°çš„æ¦‚å¿µï¼Œåœ¨ 20 ä¸–çºª 40 å¹´ä»£ï¼Œç”µæŠ¥é€šä¿¡ä¹Ÿé‡‡ç”¨äº†åŸºäºå­˜å‚¨è½¬å‘åŸç†çš„æŠ¥æ–‡äº¤æ¢(message switching)ã€‚æŠ¥æ–‡äº¤æ¢çš„æ—¶å»¶è¾ƒé•¿ï¼Œä»å‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶ä¸ç­‰ã€‚ç°åœ¨æŠ¥æ–‡äº¤æ¢å·²ç»å¾ˆå°‘æœ‰äººä½¿ç”¨äº†ã€‚ è·¯ç”±å™¨è·¯ç”±å™¨å¤„ç†åˆ†ç»„çš„è¿‡ç¨‹æ˜¯ï¼š æŠŠæ”¶åˆ°çš„åˆ†ç»„å…ˆæ”¾å…¥ç¼“å­˜ï¼ˆæš‚æ—¶å­˜å‚¨ï¼‰ï¼› æŸ¥æ‰¾è½¬å‘è¡¨ï¼Œæ‰¾å‡ºåˆ°æŸä¸ªç›®çš„åœ°å€åº”ä»å“ªä¸ªç«¯å£è½¬å‘ï¼› æŠŠåˆ†ç»„é€åˆ°é€‚å½“çš„ç«¯å£è½¬å‘å‡ºå»ã€‚ è¿™é‡Œæ³¨æ„ï¼šä¸»æœºå’Œè·¯ç”±å™¨çš„ä½œç”¨ä¸åŒ ä¸»æœºæ˜¯ä¸ºç”¨æˆ·è¿›è¡Œä¿¡æ¯å¤„ç†çš„ï¼Œå¹¶å‘ç½‘ç»œå‘é€åˆ†ç»„ï¼Œä»ç½‘ç»œæ¥æ”¶åˆ†ç»„ã€‚è·¯ç”±å™¨å¯¹åˆ†ç»„è¿›è¡Œå­˜å‚¨è½¬å‘ï¼Œæœ€åæŠŠåˆ†ç»„äº¤ä»˜ç›®çš„ä¸»æœºã€‚ ä¸‹é¢è¿™ä¸ªå›¾ï¼Œæ˜¯ä¹¦ä¸Šçš„ç»å…¸å›¾ã€‚å¯¹æ¯”äº†ä¸‰ç§äº¤æ¢ã€‚ è®¡ç®—æœºç½‘ç»œçš„æ¦‚å¿µå‘ç”Ÿæ ¹æœ¬å˜åŒ–æ—©æœŸçš„é¢å‘ç»ˆç«¯çš„è®¡ç®—æœºç½‘ç»œæ˜¯ä»¥å•ä¸ªä¸»æœºä¸ºä¸­å¿ƒçš„æ˜Ÿå½¢ç½‘ï¼Œå„ç»ˆç«¯é€šè¿‡é€šä¿¡çº¿è·¯å…±äº«æ˜‚è´µçš„ä¸­å¿ƒä¸»æœºçš„ç¡¬ä»¶å’Œè½¯ä»¶èµ„æºã€‚ åˆ†ç»„äº¤æ¢ç½‘åˆ™æ˜¯ä»¥ç½‘ç»œä¸ºä¸­å¿ƒï¼Œä¸»æœºéƒ½å¤„åœ¨ç½‘ç»œçš„å¤–å›´ã€‚ç”¨æˆ·é€šè¿‡åˆ†ç»„äº¤æ¢ç½‘å¯å…±äº«è¿æ¥åœ¨ç½‘ç»œä¸Šçš„è®¸å¤šç¡¬ä»¶å’Œå„ç§ä¸°å¯Œçš„è½¯ä»¶èµ„æºã€‚ è®¡ç®—æœºç½‘ç»œçš„åˆ†ç±»å†æ¥çœ‹ä¸‹ç½‘ç»œçš„å®šä¹‰ï¼šæœ€ç®€å•çš„å®šä¹‰ï¼šè®¡ç®—æœºç½‘ç»œæ˜¯ä¸€äº›äº’ç›¸è¿æ¥çš„ã€è‡ªæ²»çš„è®¡ç®—æœºçš„é›†åˆã€‚ ä»ç½‘ç»œçš„ä½œç”¨èŒƒå›´è¿›è¡Œåˆ†ç±»å¹¿åŸŸç½‘ WAN (Wide Area Network)å±€åŸŸç½‘ LAN (Local Area Network)åŸåŸŸç½‘ MAN (Metropolitan Area Network)ä¸ªäººåŒºåŸŸç½‘ PAN (Personal Area Network) ä»ç½‘ç»œçš„ä½¿ç”¨è€…è¿›è¡Œåˆ†ç±»å…¬ç”¨ç½‘ (public network)ä¸“ç”¨ç½‘ (private network) è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡é€Ÿç‡æ¯”ç‰¹ï¼ˆbitï¼‰æ˜¯è®¡ç®—æœºä¸­æ•°æ®é‡çš„å•ä½ï¼Œä¹Ÿæ˜¯ä¿¡æ¯è®ºä¸­ä½¿ç”¨çš„ä¿¡æ¯é‡çš„å•ä½ã€‚Bit æ¥æºäº binary digitï¼Œæ„æ€æ˜¯ä¸€ä¸ªâ€œäºŒè¿›åˆ¶æ•°å­—â€ï¼Œå› æ­¤ä¸€ä¸ªæ¯”ç‰¹å°±æ˜¯äºŒè¿›åˆ¶æ•°å­—ä¸­çš„ä¸€ä¸ª 1 æˆ– 0ã€‚ é€Ÿç‡å³æ•°æ®ç‡(data rate)æˆ–æ¯”ç‰¹ç‡(bit rate)æ˜¯è®¡ç®—æœºç½‘ç»œä¸­æœ€é‡è¦çš„ä¸€ä¸ªæ€§èƒ½æŒ‡æ ‡ã€‚é€Ÿç‡çš„å•ä½æ˜¯ b/sï¼Œæˆ–kb/s, Mb/s, Gb/s ç­‰ã€‚é€Ÿç‡å¾€å¾€æ˜¯æŒ‡é¢å®šé€Ÿç‡æˆ–æ ‡ç§°é€Ÿç‡ã€‚ å¸¦å®½â€œå¸¦å®½â€(bandwidth)æœ¬æ¥æ˜¯æŒ‡ä¿¡å·å…·æœ‰çš„é¢‘å¸¦å®½åº¦ï¼Œå•ä½æ˜¯èµ«ï¼ˆæˆ–åƒèµ«ã€å…†èµ«ã€å‰èµ«ç­‰ï¼‰ã€‚ ç°åœ¨â€œå¸¦å®½â€æ˜¯æ•°å­—ä¿¡é“æ‰€èƒ½ä¼ é€çš„â€œæœ€é«˜æ•°æ®ç‡â€çš„åŒä¹‰è¯­ï¼Œå•ä½æ˜¯â€œæ¯”ç‰¹æ¯ç§’â€ï¼Œæˆ– b/s (bit/s)ã€‚ æ›´å¸¸ç”¨çš„å¸¦å®½å•ä½æ˜¯ï¼š åƒæ¯”æ¯ç§’ï¼Œå³ kb/s ï¼ˆ103 b/sï¼‰å…†æ¯”æ¯ç§’ï¼Œå³ Mb/sï¼ˆ106 b/sï¼‰å‰æ¯”æ¯ç§’ï¼Œå³ Gb/sï¼ˆ109 b/sï¼‰å¤ªæ¯”æ¯ç§’ï¼Œå³ Tb/sï¼ˆ1012 b/sï¼‰ è¯·æ³¨æ„ï¼šåœ¨è®¡ç®—æœºç•Œï¼ŒK = 2çš„10æ¬¡æ–¹ = 1024ï¼ŒM = 2çš„20æ¬¡æ–¹, G = 2çš„30æ¬¡æ–¹, T = 2çš„40æ¬¡æ–¹ ååé‡ååé‡(throughput)è¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…é€šè¿‡æŸä¸ªç½‘ç»œï¼ˆæˆ–ä¿¡é“ã€æ¥å£ï¼‰çš„æ•°æ®é‡ã€‚ ååé‡æ›´ç»å¸¸åœ°ç”¨äºå¯¹ç°å®ä¸–ç•Œä¸­çš„ç½‘ç»œçš„ä¸€ç§æµ‹é‡ï¼Œä»¥ä¾¿çŸ¥é“å®é™…ä¸Šåˆ°åº•æœ‰å¤šå°‘æ•°æ®é‡èƒ½å¤Ÿé€šè¿‡ç½‘ç»œã€‚ååé‡å—ç½‘ç»œçš„å¸¦å®½æˆ–ç½‘ç»œçš„é¢å®šé€Ÿç‡çš„é™åˆ¶ã€‚ æ—¶å»¶(delay æˆ– latency) å‘é€æ—¶å»¶ å‘é€æ•°æ®æ—¶ï¼Œæ•°æ®å¸§ä»ç»“ç‚¹è¿›å…¥åˆ°ä¼ è¾“åª’ä½“æ‰€éœ€è¦çš„æ—¶é—´ã€‚ä¹Ÿå°±æ˜¯ä»å‘é€æ•°æ®å¸§çš„ç¬¬ä¸€ä¸ªæ¯”ç‰¹ç®—èµ·ï¼Œåˆ°è¯¥å¸§çš„æœ€åä¸€ä¸ªæ¯”ç‰¹å‘é€å®Œæ¯•æ‰€éœ€çš„æ—¶é—´ã€‚ ä¼ æ’­æ—¶å»¶ ç”µç£æ³¢åœ¨ä¿¡é“ä¸­éœ€è¦ä¼ æ’­ä¸€å®šçš„è·ç¦»è€ŒèŠ±è´¹çš„æ—¶é—´ã€‚ä¿¡å·å‘é€é€Ÿç‡å’Œä¿¡å·åœ¨ä¿¡é“ä¸Šçš„ä¼ æ’­é€Ÿç‡æ˜¯å®Œå…¨ä¸åŒçš„æ¦‚å¿µã€‚ å¤„ç†æ—¶å»¶å¤„ç†æ—¶å»¶ äº¤æ¢ç»“ç‚¹ä¸ºå­˜å‚¨è½¬å‘è€Œè¿›è¡Œä¸€äº›å¿…è¦çš„å¤„ç†æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚ æ’é˜Ÿæ—¶å»¶ç»“ç‚¹ç¼“å­˜é˜Ÿåˆ—ä¸­åˆ†ç»„æ’é˜Ÿæ‰€ç»å†çš„æ—¶å»¶ã€‚ æ’é˜Ÿæ—¶å»¶çš„é•¿çŸ­å¾€å¾€å–å†³äºç½‘ç»œä¸­å½“æ—¶çš„é€šä¿¡é‡ã€‚ å¯¹äºé«˜é€Ÿç½‘ç»œé“¾è·¯ï¼Œæˆ‘ä»¬æé«˜çš„ä»…ä»…æ˜¯æ•°æ®çš„å‘é€é€Ÿç‡è€Œä¸æ˜¯æ¯”ç‰¹åœ¨é“¾è·¯ä¸Šçš„ä¼ æ’­é€Ÿç‡ã€‚æé«˜é“¾è·¯å¸¦å®½å‡å°äº†æ•°æ®çš„å‘é€æ—¶å»¶ã€‚ æ—¶å»¶å¸¦å®½ç§¯é“¾è·¯çš„æ—¶å»¶å¸¦å®½ç§¯åˆç§°ä¸ºä»¥æ¯”ç‰¹ä¸ºå•ä½çš„é“¾è·¯é•¿åº¦ã€‚æ—¶å»¶å¸¦å®½ç§¯ = ä¼ æ’­æ—¶å»¶ * å¸¦å®½ åˆ©ç”¨ç‡ä¿¡é“åˆ©ç”¨ç‡æŒ‡å‡ºæŸä¿¡é“æœ‰ç™¾åˆ†ä¹‹å‡ çš„æ—¶é—´æ˜¯è¢«åˆ©ç”¨çš„ï¼ˆæœ‰æ•°æ®é€šè¿‡ï¼‰ã€‚å®Œå…¨ç©ºé—²çš„ä¿¡é“çš„åˆ©ç”¨ç‡æ˜¯é›¶ã€‚ ç½‘ç»œåˆ©ç”¨ç‡åˆ™æ˜¯å…¨ç½‘ç»œçš„ä¿¡é“åˆ©ç”¨ç‡çš„åŠ æƒå¹³å‡å€¼ã€‚ä¿¡é“åˆ©ç”¨ç‡å¹¶éè¶Šé«˜è¶Šå¥½ã€‚ D=D0/1-U,U æ˜¯ç½‘ç»œçš„åˆ©ç”¨ç‡ï¼Œæ•°å€¼åœ¨ 0 åˆ° 1 ä¹‹é—´ã€‚ åè®®ä¸åˆ’åˆ†å±‚æ¬¡ç½‘ç»œåè®®(network protocol)ï¼Œç®€ç§°ä¸ºåè®®ï¼Œæ˜¯ä¸ºè¿›è¡Œç½‘ç»œä¸­çš„æ•°æ®äº¤æ¢è€Œå»ºç«‹çš„è§„åˆ™ã€æ ‡å‡†æˆ–çº¦å®šã€‚ #### ç½‘ç»œåè®®çš„ç»„æˆè¦ç´  è¯­æ³• æ•°æ®ä¸æ§åˆ¶ä¿¡æ¯çš„ç»“æ„æˆ–æ ¼å¼ ã€‚ è¯­ä¹‰ éœ€è¦å‘å‡ºä½•ç§æ§åˆ¶ä¿¡æ¯ï¼Œå®Œæˆä½•ç§åŠ¨ä½œä»¥åŠåšå‡ºä½•ç§å“åº”ã€‚ åŒæ­¥ äº‹ä»¶å®ç°é¡ºåºçš„è¯¦ç»†è¯´æ˜ã€‚ åˆ’åˆ†å±‚æ¬¡ä¸»æœº 1 å‘ä¸»æœº 2 é€šè¿‡ç½‘ç»œå‘é€æ–‡ä»¶ã€‚ä¸¤ä¸ªä¸»æœºå°†æ–‡ä»¶ä¼ é€æ¨¡å—ä½œä¸ºæœ€é«˜çš„ä¸€å±‚ ã€‚å‰©ä¸‹çš„å·¥ä½œç”±ä¸‹é¢çš„æ¨¡å—è´Ÿè´£ã€‚å„å±‚ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ã€‚çµæ´»æ€§å¥½ã€‚ç»“æ„ä¸Šå¯åˆ†å‰²å¼€ã€‚æ˜“äºå®ç°å’Œç»´æŠ¤ã€‚èƒ½ä¿ƒè¿›æ ‡å‡†åŒ–å·¥ä½œã€‚ è¿™æ ·åˆ†å±‚çš„å¥½å¤„æœ‰å¾ˆå¤šï¼šæ¯”å¦‚å„å±‚ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ã€‚çµæ´»æ€§å¥½ã€‚ç»“æ„ä¸Šå¯åˆ†å‰²å¼€ã€‚æ˜“äºå®ç°å’Œç»´æŠ¤ã€‚èƒ½ä¿ƒè¿›æ ‡å‡†åŒ–å·¥ä½œã€‚è‹¥å±‚æ•°å¤ªå°‘ï¼Œå°±ä¼šä½¿æ¯ä¸€å±‚çš„åè®®å¤ªå¤æ‚ã€‚å±‚æ•°å¤ªå¤šåˆä¼šåœ¨æè¿°å’Œç»¼åˆå„å±‚åŠŸèƒ½çš„ç³»ç»Ÿå·¥ç¨‹ä»»åŠ¡æ—¶é‡åˆ°è¾ƒå¤šçš„å›°éš¾ã€‚ è®¡ç®—æœºç½‘ç»œçš„ä½“ç³»ç»“æ„ è®¡ç®—æœºç½‘ç»œçš„ä½“ç³»ç»“æ„(architecture)æ˜¯è®¡ç®—æœºç½‘ç»œçš„å„å±‚åŠå…¶åè®®çš„é›†åˆã€‚ TCP/IP æ˜¯å››å±‚çš„ä½“ç³»ç»“æ„ï¼šåº”ç”¨å±‚ã€è¿è¾“å±‚ã€ç½‘é™…å±‚å’Œç½‘ç»œæ¥å£å±‚ã€‚ä½†æœ€ä¸‹é¢çš„ç½‘ç»œæ¥å£å±‚å¹¶æ²¡æœ‰å…·ä½“å†…å®¹ã€‚å› æ­¤å¾€å¾€é‡‡å–æŠ˜ä¸­çš„åŠæ³•ï¼Œå³ç»¼åˆ OSI å’Œ TCP/IP çš„ä¼˜ç‚¹ï¼Œé‡‡ç”¨ä¸€ç§åªæœ‰äº”å±‚åè®®çš„ä½“ç³»ç»“æ„ ã€‚ è¿™é‡Œå°±ä¸ä»‹ç»ä¸ƒå±‚ç»“æ„äº†ï¼Œå› ä¸ºå·²ç»è¢«æ·˜æ±°äº†ã€‚ æ•´ä¸ªæ¯”å¦‚è¯´æœ‰ä¸¤ä¸ªä¸»æœºA,Bï¼Œä»–ä»¬è¿›è¡Œé€šä¿¡çš„è¿‡ç¨‹å°±æ˜¯ï¼š ä»€ä¹ˆæ˜¯å®ä½“ã€åè®®ã€æœåŠ¡å’ŒæœåŠ¡è®¿é—®ç‚¹ å®ä½“ï¼šå®ä½“(entity) è¡¨ç¤ºä»»ä½•å¯å‘é€æˆ–æ¥æ”¶ä¿¡æ¯çš„ç¡¬ä»¶æˆ–è½¯ä»¶è¿›ç¨‹ã€‚ åè®®ï¼šåè®®æ˜¯æ§åˆ¶ä¸¤ä¸ªå¯¹ç­‰å®ä½“è¿›è¡Œé€šä¿¡çš„è§„åˆ™çš„é›†åˆã€‚ æœåŠ¡ï¼šåœ¨åè®®çš„æ§åˆ¶ä¸‹ï¼Œä¸¤ä¸ªå¯¹ç­‰å®ä½“é—´çš„é€šä¿¡ä½¿å¾—æœ¬å±‚èƒ½å¤Ÿå‘ä¸Šä¸€å±‚æä¾›æœåŠ¡ã€‚ æœåŠ¡è®¿é—®ç‚¹SAPï¼šåŒä¸€ç³»ç»Ÿç›¸é‚»ä¸¤å±‚çš„å®ä½“è¿›è¡Œäº¤äº’çš„åœ°æ–¹ï¼Œç§°ä¸ºæœåŠ¡è®¿é—®ç‚¹ SAP (Service Access Point)ã€‚ æ³¨æ„ä¸‹é¢å‡ ä¸ªé—®é¢˜ï¼š æœ¬å±‚çš„æœåŠ¡ç”¨æˆ·åªèƒ½çœ‹è§æœåŠ¡è€Œæ— æ³•çœ‹è§ä¸‹é¢çš„åè®®ã€‚ ä¸‹é¢çš„åè®®å¯¹ä¸Šé¢çš„æœåŠ¡ç”¨æˆ·æ˜¯é€æ˜çš„ã€‚ åè®®æ˜¯â€œæ°´å¹³çš„â€ï¼Œå³åè®®æ˜¯æ§åˆ¶å¯¹ç­‰å®ä½“ä¹‹é—´é€šä¿¡çš„è§„åˆ™ã€‚ æœåŠ¡æ˜¯â€œå‚ç›´çš„â€ï¼Œå³æœåŠ¡æ˜¯ç”±ä¸‹å±‚å‘ä¸Šå±‚é€šè¿‡å±‚é—´æ¥å£æä¾›çš„ã€‚ IP over Everything è·¯ç”±å™¨åœ¨è½¬å‘åˆ†ç»„æ—¶æœ€é«˜åªç”¨åˆ°ç½‘ç»œå±‚è€Œæ²¡æœ‰ä½¿ç”¨è¿è¾“å±‚å’Œåº”ç”¨å±‚ã€‚ IP å¯åº”ç”¨åˆ°å„å¼å„æ ·çš„ç½‘ç»œä¸Š æ€»ç»“æ€»ç»“å’Œæ•´ç†è‡ªã€Šè®¡ç®—æœºç½‘ç»œç¬¬å…­ç‰ˆã€‹ï¼Œéƒ¨åˆ†å›¾ç‰‡ä¹Ÿæ¥è‡ªè¯¥ä¹¦ï¼Œæ„Ÿè°¢ã€‚å¤§æ¦‚çš„æ˜¯èƒ½å¤Ÿå¯¹æ•´ä¸ªä½“ç³»ä¸­æœ€é‡è¦çš„çŸ¥è¯†åšäº†ä¸ªæ¦‚è¿°å’Œæ€»ç»“ã€‚è¿˜æœ‰ä¸€äº›åŸºæœ¬çš„å…³é”®è¯å’Œä¸“ä¸šæœ¯è¯­çš„äº†è§£ï¼Œæ¯”å¦‚ISPç­‰ç­‰ã€‚è¿™äº›ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ã€‚","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/categories/è®¡ç®—æœºç½‘ç»œ/"}],"tags":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/tags/è®¡ç®—æœºç½‘ç»œ/"}]},{"title":"è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„è„‘å›¾åˆ†äº«","slug":"è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„è„‘å›¾åˆ†äº«","date":"2016-06-05T08:14:35.000Z","updated":"2016-06-05T08:34:16.000Z","comments":true,"path":"2016/06/05/è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„è„‘å›¾åˆ†äº«/","link":"","permalink":"http://sevencai.github.io/2016/06/05/è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„è„‘å›¾åˆ†äº«/","excerpt":"","text":"ä»Šå¤©æŠŠè®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„æ¢³ç†äº†ä¸‹ï¼Œç”¨çš„æ˜¯ç™¾åº¦è„‘å›¾ã€‚åœ°å€åˆ†äº«ç»™å¤§å®¶ï¼šã€è„‘å›¾åœ°å€æˆ³è¿™é‡Œã€‘å› ä¸ºæ•´ä¸ªå¤ªå¤§äº†ï¼Œå¯¼å‡ºæˆå›¾ç‰‡åï¼Œä¹Ÿæ˜¯ä¸èƒ½å¤Ÿç›´æ¥çœ‹çš„ï¼Œæ‰€ä»¥åªèƒ½æ”¾åœ°å€äº†ã€‚ æ•´ä¸ªè¿‡ç¨‹ä¸‹æ¥ï¼Œå‘ç°ç™¾åº¦è„‘å›¾åšçš„å¾ˆæ–¹ä¾¿ï¼Œæ˜¯ä¸ªå¾ˆå¥½çš„äº§å“ï¼Œä½†æ˜¯ä¹Ÿè¿˜æ˜¯æœ‰ä¸€ç‚¹å°bugã€‚è¿˜æœ‰å°±æ˜¯å¯¹æ•´ä¸ªä½“ç³»ç»“æ„æœ‰äº†æ›´æ·±çš„äº†è§£ã€‚å¤§æ¦‚æ˜¯åº•ä¸‹è¿™ä¸ªæ¨¡æ ·ã€‚ ç‚¹å¼€+å·ï¼Œå°±å¯ä»¥çœ‹é‡Œé¢æ›´å…·ä½“çš„å†…å®¹å•¦ã€‚ç„¶åå› ä¸ºè¦ä¸‹ä¸ªæ˜ŸæœŸå°±è¦è€ƒç½‘ç»œçš„åŸå› ï¼Œæˆ‘ä¼šä¸€è¾¹å¤ä¹ ï¼Œä¸€è¾¹æ•´ç†å’Œè®°å½•æ›´åŠ å…·ä½“çš„ä¸œè¥¿ï¼Œç„¶åå‘æˆåšå®¢åˆ†äº«ç»™å¤§å®¶ã€‚è°¢è°¢wuliå¸…æ°”çš„ç½‘ç»œè€å¸ˆã€‚è¿™å­¦æœŸå¬çš„æœ€è®¤çœŸçš„ä¹Ÿå°±æ˜¯æé¹è€å¸ˆçš„è¯¾å•¦ã€‚","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/categories/è®¡ç®—æœºç½‘ç»œ/"}],"tags":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/tags/è®¡ç®—æœºç½‘ç»œ/"}]},{"title":"æ“ä½œç³»ç»Ÿå­˜å‚¨ç®¡ç†","slug":"æ“ä½œç³»ç»Ÿå­˜å‚¨ç®¡ç†","date":"2016-05-29T06:45:10.000Z","updated":"2017-12-19T12:40:23.000Z","comments":true,"path":"2016/05/29/æ“ä½œç³»ç»Ÿå­˜å‚¨ç®¡ç†/","link":"","permalink":"http://sevencai.github.io/2016/05/29/æ“ä½œç³»ç»Ÿå­˜å‚¨ç®¡ç†/","excerpt":"","text":"ä»»ä½•çš„ç¨‹åºæŒ‡ä»¤å¿…é¡»å…ˆè£…å…¥å†…å­˜ã€‚å½“ç”¨æˆ·æå‡ºä¸»å­˜ç©ºé—´çš„è¦æ±‚æ—¶ï¼Œåº”è¯¥è¦èƒ½å¿«é€Ÿå“åº”ã€‚å¹¶ä¸”ä¸ºå®ƒåˆ†é…ç›¸åº”çš„å†…å­˜ç©ºé—´ã€‚ç„¶åï¼Œå½“ç”¨æˆ·ä½¿ç”¨å®Œæ¯•åï¼Œåº”è¯¥ç«‹å³å›æ”¶å…¶å­˜å‚¨ç©ºé—´ï¼Œä»¥ä¾›å…¶ä»–ç”¨æˆ·ä½¿ç”¨ã€‚ ä¸‹é¢è¿™ç¯‡æ–‡ç« å°±æ˜¯æˆ‘æ€»ç»“çš„å­˜å‚¨ç®¡ç†éœ€è¦çŸ¥é“çš„ä¸€äº›åŸºæœ¬çŸ¥è¯†ã€‚æœ€é‡è¦çš„ä¸€éƒ¨åˆ†æ˜¯ã€å®ç°å†…å­˜ç©ºé—´çš„åˆ†é…å’Œå›æ”¶ã€‘ï¼Œè¿™ä¹Ÿæ˜¯æ“ä½œç³»ç»Ÿå­˜å‚¨ç®¡ç†çš„æ ¸å¿ƒã€‚ æ‰€ä»¥å­˜å‚¨ç®¡ç†çš„åŠŸèƒ½ä¸»è¦åŒ…æ‹¬ä¸‹é¢ä¸‰ä¸ªéƒ¨åˆ†ï¼š å»ºç«‹å†…å­˜åˆ†é…ç™»è®°è¡¨ï¼Œè®°å½•å“ªäº›å·²ç»è¢«åˆ†é…ï¼Œå“ªäº›æ²¡æœ‰è¢«åˆ†é… å®æ–½åˆ†é…å†…å­˜ï¼Œå½“æœ‰ä½œä¸šæå‡ºè¦æ±‚æ—¶ï¼ŒæŒ‰ç…§ä¸€å®šçš„åŸåˆ™åˆ†é…ï¼Œå¹¶ä¸”è¦ä¿®æ”¹ä¸€è¯´çš„å†…å­˜åˆ†é…ç™»è®°è¡¨ å†…å­˜å›æ”¶ï¼Œç”±æ“ä½œç³»ç»Ÿçš„å†…å­˜ç®¡ç†ç¨‹åºè´Ÿè´£å›æ”¶èµ„æºï¼Œå¹¶ä¿®æ”¹ç›¸åº”å†…å­˜åˆ†é…ç™»è®°è¡¨ åœ°å€è½¬æ¢ç”¨æˆ·è£…å…¥ä¸»å­˜ä¹‹å‰æ˜¯é€»è¾‘åœ°å€ï¼Œè£…å…¥ä¹‹åæ˜¯ç‰©ç†åœ°å€ã€‚è¦æœ‰ç›¸åº”çš„ç¡¬ä»¶æœºæ„é…åˆï¼Œå°†ç‰©ç†åœ°å€è½¬æ¢æˆç‰©ç†åœ°å€ã€‚ é€»è¾‘åœ°å€å’Œé€»è¾‘ç©ºé—´åœ°å€ç©ºé—´ï¼šä¸€ä¸ªç¨‹åºé™å®šçš„åœ°å€èŒƒå›´ã€‚ æºç¨‹åºç»è¿‡æ±‡ç¼–æˆ–è€…ç¼–è¯‘åï¼Œå½¢æˆç›®æ ‡ç¨‹åºï¼Œæ¯ä¸ªç›®æ ‡ç¨‹åºéƒ½æ˜¯ä»¥0ä¸ºåŸºå€é¡ºåºè¿›è¡Œç¼–åˆ¶çš„ã€‚è¿™æ ·ç”Ÿæˆçš„ç›®æ ‡ç¨‹åºå°±ä¼šå æ®ä¸€å®šç©ºé—´ã€‚æˆä¸ºä½œä¸šçš„é€»è¾‘ç©ºé—´ã€‚ ç‰©ç†åœ°å€ä¸ç‰©ç†ç©ºé—´å†…å­˜ä»¥å­—èŠ‚ä¸ºç¼–å€ç©ºé—´ã€‚åˆ†åˆ«ç”±0ï¼Œ1ï¼Œ2â€¦.è¿™æ ·ç¼–å·ã€‚è¿™ä¸ªå”¯ä¸€çš„ç¼–å·å°±æ˜¯å†…å­˜å•å…ƒä¸­çš„ç‰©ç†åœ°å€ã€‚å¯ä»¥ç›´æ¥é€šè¿‡è¿™ä¸ªç¼–å·å¯»å€ã€‚ ä¸€ä¸ªç¼–è¯‘å¥½çš„ç¨‹åºåœ¨è‡ªå·±çš„é€»è¾‘ç©ºé—´ä¸­ã€‚è¿è¡Œæ—¶ï¼Œè¦æŠŠå®ƒè£…å…¥å†…å­˜ç©ºé—´ã€‚åœ¨å¤šé“ç¨‹åºä¸­ï¼Œæ¯ä¸ªç”¨æˆ·ä¸å¯èƒ½ç”¨å†…å­˜çš„ç‰©ç†åœ°å€æ¥ç¼–å†™ç¨‹åºã€‚æˆ‘ä»¬éœ€è¦ä¸€ç§å­˜å‚¨ç®¡ç†æœºåˆ¶æä¾›åœ°å€æ˜ å°„åŠŸèƒ½å°†ç”¨æˆ·ç¨‹åºä¸­çš„é€»è¾‘åœ°å€è½¬æ¢æˆè¿è¡Œæ—¶æœºå™¨å¯ä»¥ç›´æ¥å¯»å€çš„ç‰©ç†åœ°å€ã€‚è¿™ä¸ªåŠŸèƒ½å«åšåœ°å€æ˜ å°„æˆ–è€…åœ°å€é‡å®šä½ã€‚ åœ°å€é‡å®šä½æ–¹å¼é™æ€åœ°å€é‡å®šä½é™æ€é‡å®šä½æ˜¯åœ¨ç¨‹åºè£…å…¥è¿‡ç¨‹ä¸­ï¼Œç”±æ“ä½œç³»ç»Ÿçš„é‡å®šä½è£…å…¥ç¨‹åºä¸€æ¬¡å®Œæˆä½œä¸šçš„åœ°å€è½¬æ¢è¿‡ç¨‹ã€‚ä»¥åä¸å†è½¬æ¢ã€‚å³ç›´æ¥ä¿®æ”¹æŒ‡ä»¤ä¸­çš„åœ°å€ä»£ç ï¼ŒæŠŠè¿™äº›åœ°å€ä»£ç ä»é€»è¾‘è½¬æ¢æˆç‰©ç†ã€‚ é™æ€åœ°å€é‡å®šä½ä¼˜ç‚¹ ç”±äºåœ¨ç¨‹åºæ‰§è¡Œå‰å°±å®Œæˆäº†åœ°å€è½¬æ¢ï¼Œæ‰€ä»¥æ‰§è¡Œé€Ÿåº¦å¿«ã€‚ åœ°å€è½¬æ¢æ–¹æ³•æ— éœ€ç¡¬ä»¶æ”¯æŒï¼Œåœ¨ç¡¬ä»¶ä¸­å®¹æ˜“å®ç°ã€‚ é™æ€åœ°å€é‡å®šä½ç¼ºç‚¹ ç¨‹åºä¸€æ—¦ç»è¿‡è½¬æ¢åï¼Œå…¶å ç”¨çš„å­˜å‚¨ç©ºé—´å°±ä¸èƒ½å˜äº†ï¼Œæ‰€ä»¥é™æ€åœ°å€é‡å®šä½ä¸èƒ½å†å†…å­˜ä¸­ç§»åŠ¨ã€‚ ç¨‹åºå¿…é¡»åˆ†é…è¿ç»­çš„å­˜å‚¨ç©ºé—´ï¼Œä¸èƒ½æŠŠç¨‹åºæ”¾åœ¨è‹¥å¹²ä¸ªä¸è¿ç»­çš„åŒºåŸŸä¸­ï¼Œè¿™äº›ä¸åˆ©äºå­˜å‚¨ç©ºé—´çš„å……åˆ†åˆ©ç”¨ã€‚ ç¨‹åºä¸­æ¶‰åŠçš„æ‰€æœ‰è¦è½¬æ¢åœ°å€çš„æŒ‡ä»¤ï¼Œä¸ç®¡ç¨‹åºè¿è¡Œè¿‡ç¨‹æ˜¯å¦ä¼šæ‰§è¡Œåˆ°ï¼Œéƒ½å¿…é¡»è½¬æ¢ã€‚è¿™å°±æœ‰å¯èƒ½æœ‰äº›æŒ‡ä»¤å®æ–½äº†è½¬æ¢ï¼Œä½†æ ¹æœ¬ä¸ä¼šæ‰§è¡Œã€‚å› æ­¤åšäº†ä¸å¿…è¦çš„å·¥ä½œã€‚ ç¨‹åºå…±äº«ä¸æ–¹ä¾¿ï¼Œç”¨æˆ·å¿…é¡»äº‹å…ˆç¡®å®šæ‰€éœ€çš„å­˜å‚¨é‡ï¼Œè‹¥æ‰€éœ€çš„å­˜å‚¨é‡è¶…è¿‡å¯ç”¨çš„å­˜å‚¨ç©ºé—´ï¼Œç”¨æˆ·å¿…é¡»è¦†ç›–ç»“æ„ã€‚ åŠ¨æ€åœ°å€é‡å®šä½åŠ¨æ€åœ°å€é‡å®šä½çš„ä½œä¸šæ˜¯åœ¨è£…å…¥æ—¶ï¼Œä¸è¿›è¡Œåœ°å€è½¬æ¢ï¼Œè€Œæ˜¯ç›´æ¥æŠŠä½œä¸šè£…åˆ°åˆ†é…çš„ä¸»å­˜åŒºåŸŸä¸­ï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­å†è¿›è¡Œåœ°å€é‡å®šä½ã€‚ è¿™ä¸ªè¿‡ç¨‹ä¸­éœ€è¦é‡å®šä½å¯„å­˜å™¨ï¼ˆç¡¬ä»¶æ”¯æŒï¼‰ï¼Œå®ƒç”¨æ¥å­˜æ”¾ç”¨æˆ·ä½œä¸šè£…å…¥ä¸»å­˜ç©ºé—´çš„èµ·å§‹åœ°å€ã€‚ åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ‰§è¡Œåˆ°è®¿é—®å†…å­˜æŒ‡ä»¤çš„æ—¶å€™ï¼Œå¹¶ä¸ç«‹å³æŠŠæŒ‡ä»¤ä¸­çš„åœ°å€ç é€åˆ°åœ°å€æ€»çº¿ï¼Œè€Œæ˜¯å…ˆç»è¿‡åŠ¨æ€åœ°å€é‡å®šä½æœºåˆ¶ï¼Œç”±åœ°å€è½¬æ¢ç¡¬ä»¶é€»è¾‘è‡ªåŠ¨æŠŠæŒ‡ä»¤ä¸­çš„ç›¸å¯¹åœ°å€ç ä¸å®šä½å¯„å­˜å™¨çš„å€¼ç›¸åŠ ï¼Œå½¢æˆç‰©ç†åœ°å€ç ï¼Œç„¶åæŠŠè¿™ä¸ªåœ°å€ç é€åˆ°åœ°å€æ€»çº¿ï¼Œä»¥æ­¤æ¥å®ç°å¯¹å†…å­˜å­˜å‚¨å•å…ƒçš„è®¿é—®ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒåŠ¨æ€åœ°å€é‡å®šä½çš„è¿‡ç¨‹æ˜¯åœ¨æ‰§è¡Œè®¿é—®å†…å­˜æŒ‡ä»¤æ—¶ï¼Œç”±ç¡¬ä»¶æœºåˆ¶è‡ªåŠ¨å®Œæˆåœ°å€è½¬æ¢çš„ã€‚æ‰€ä»¥å¯¹ç¨‹åºæ‰§è¡Œçš„é€Ÿåº¦æ²¡æœ‰å¤ªå¤§å½±å“ã€‚ è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ‰§è¡Œå‰æˆ–è€…æ‰§è¡Œä¸­ä»£ç æ²¡æœ‰ä»»ä½•å˜åŒ–ã€‚æ‰€ä»¥ä¹Ÿå¯ä»¥å®ç°å†…å­˜çš„ç§»åŠ¨ï¼Œå¯¹åé¢å†…å­˜ç¢ç‰‡æä¾›äº†æŠ€æœ¯æ”¯æŒã€‚ å¹¶ä¸”ä¹Ÿå¯ä»¥åœ¨äº’è¡¥è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œåªè¦å„ç¨‹åºæ®µæœ‰è‡ªå·±å¯¹åº”çš„é‡å®šä½å¯„å­˜å™¨ï¼Œæœ‰åˆ©äºå†…å­˜èµ„æºçš„å……åˆ†åˆ©ç”¨å’Œå…±äº«ã€‚ ç¼ºç‚¹å°±æ˜¯ç¡¬ä»¶æ”¯æŒéœ€è¦ï¼Œç³»ç»Ÿå¼€é”€å¤§ï¼Œå®ç°æ‘ç²—ç®¡ç†çš„è½¯ä»¶æ¯”è¾ƒå¤æ‚ã€‚ å­˜å‚¨ä¿æŠ¤åœ¨å¤šé“ç³»ç»Ÿä¸­ï¼Œå†…å­˜ä¸­çš„è®¸å¤šç”¨æˆ·æˆ–ç³»ç»Ÿç¨‹åºå’Œæ•°æ®æ®µå¯ä»¥æä¾›ä¸åŒçš„ç”¨æˆ·è¿›ç¨‹å…±äº«ã€‚è¿™æ ·ä¼šæé«˜å†…å­˜çš„åˆ©ç”¨ç‡ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦é™åˆ¶å„ä¸ªè¿›ç¨‹åªåœ¨è‡ªå·±çš„å­˜å‚¨åŒºæ´»åŠ¨ã€‚é™¤äº†å…±äº«çš„ä»¥å¤–ï¼Œå„è¿›ç¨‹ä¸èƒ½å¯¹åˆ«äººçš„è¿›ç¨‹çš„ç¨‹åºå’Œæ•°æ®æ®µäº§ç”Ÿå¹²æ‰°å’Œç ´åï¼Œå› æ­¤å¿…é¡»å¯¹å†…å­˜ä¸­çš„ç¨‹åºå’Œæ•°æ®æ®µé‡‡ç”¨å­˜å‚¨ä¿æŠ¤æªæ–½ã€‚ ä¸»è¦æ˜¯ä¸¤æ–¹é¢ï¼š é˜²æ­¢åœ°å€è¶Šç•Œï¼ˆä¸Šï¼Œä¸‹ç•Œå­˜å‚¨ä¿æŠ¤å’ŒåŸºå€é™é•¿ï¼‰ å­˜å–æƒé™æ§åˆ¶ï¼ˆæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„è®¿é—®æƒé™ï¼‰ å­˜å‚¨æ‰©å……å¤šä¸ªç¨‹åºåŒæ—¶åœ¨ç³»ç»Ÿä¸­è¿è¡Œï¼Œå¾€å¾€å—å†…å­˜å®¹é‡çš„é™åˆ¶ã€‚ä½¿å¾—æœ‰äº›å¤§ç¨‹åºä¸èƒ½è£…å…¥ç³»ç»Ÿè¿è¡Œï¼Œæˆ–è€…åªèƒ½è£…å…¥å¾ˆå°‘çš„ç¨‹åºã€‚è§£å†³åŠæ³•å¯èƒ½æœ‰ä¸‹é¢ä¸¤ç§ï¼š ä»ç¡¬ä»¶ä¸Šï¼šå¢åŠ å†…å­˜èŠ¯ç‰‡çš„æ•°é‡ä»è½¯ä»¶ä¸Šï¼šè™šæ‹Ÿå­˜å‚¨å™¨ï¼Œå®ç°é€»è¾‘ä¸Šçš„æ‰©å…… åˆ†åŒºå­˜å‚¨ç®¡ç†åˆ†åŒºå­˜å‚¨ç®¡ç†æ˜¯å¤šé“ç¨‹åºè¿è¡Œç¯å¢ƒä¸­æœ€ç®€å•çš„å­˜å‚¨ç®¡ç†æ–¹æ³•ï¼ŒåŸºæœ¬æ€æƒ³å°±æ˜¯è®²å†…å­˜åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªè¿ç»­åŒºåŸŸï¼Œæˆä¸ºåˆ†åŒºã€‚æ¯ä¸ªåˆ†åŒºåªæ”¾ä¸€ä¸ªç¨‹åºã€‚ å•ä¸€è¿ç»­åˆ†é…æ–¹æ¡ˆä¸€æ®µæ—¶é—´å†…ï¼Œåªèƒ½æœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨å†…å­˜çš„ç”¨æˆ·å¯ç”¨åŒºã€‚å†…å­˜ç©ºé—´ä¸­ï¼Œåªæœ‰ä¸€é“ç”¨æˆ·è¿›ç¨‹ã€‚è¿™ä¸€èˆ¬ç”±å•é“ç³»ç»Ÿé‡‡ç”¨ã€‚ å›ºå®šåˆ†åŒºåœ¨ä½œä¸šæœªè¿›å…¥å†…å­˜ä¹‹å‰ï¼Œå°±ç”±æ“ä½œå‘˜å§å†…å­˜åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªå›ºå®šå­˜å‚¨åŒºã€‚é™¤æ“ä½œç³»ç»Ÿå ç”¨ä¸€ä¸ªåŒºåŸŸå¤–ï¼Œå…¶ä»–çš„ä¸ºç”¨æˆ·å…±äº«ã€‚åˆ†åŒºä¸€æ—¦åˆ’åˆ†ï¼Œå°±ä¸å¯ä»¥å˜ã€‚ç”±äºä¸€ä¸ªåˆ†åŒºåªå­˜æ”¾ä¸€ä¸ªè¿›ç¨‹ï¼Œæ‰€ä»¥ç³»ç»Ÿå¯ä»¥åŒæ—¶è¿è¡Œçš„æœ€å¤§è¿›ç¨‹é“æ•°å°±æ˜¯å†…å­˜åˆ†åŒºçš„å¤§å°ã€‚é€šå¸¸é‡‡ç”¨é™æ€åœ°å€é‡å®šä½ã€‚æ³¨æ„è¿™ä¸ªæ¯ä¸ªåˆ†åŒºçš„å¤§å°å¯ä»¥ä¸åŒã€‚å›ºå®šåˆ†åŒºè¡¨ï¼Œåˆ†åŒºçš„åˆ†é…ï¼Œåˆ†åŒºçš„å›æ”¶ã€‚è¿™æ˜¯è¦åšçš„ä¸»è¦å·¥ä½œã€‚ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ã€‚ä¸¥é‡æµªè´¹ï¼Œç¢ç‰‡å¤§ï¼Œå½±å“å†…å­˜åˆ©ç”¨ç‡ã€‚ å¯å˜åˆ†åŒºç®¡ç†å†…å­˜ä¸­é™¤äº†æ“ä½œç³»ç»Ÿçš„åŒºåŸŸå¤–ï¼Œå¯¹å†…å­˜å‰©ä½™ç©ºé—´é¢„å…ˆä¸åˆ’åˆ†åˆ†åŒºï¼Œåˆå§‹æ„æˆä¸€ä¸ªå¤§çš„ç©ºé—²å»ã€‚å½“ä½œä¸šè£…å…¥æ—¶ï¼Œæ ¹æ®ä½œä¸šçš„å¤§å°ï¼Œåœ¨å†…å­˜çš„ç©ºé—²åŒºåˆ’åˆ†å‡ºä¸€ä¸ªè¿ç»­çš„å­˜å‚¨åŒºåŸŸã€‚ä½œä¸ºåˆ†åŒºåˆ†é…ç»™ç»™ä½œä¸šä½¿ç”¨ã€‚è¿™é‡Œé¢æ¶‰åŠåˆ°ç¢ç‰‡é—®é¢˜ï¼Œè¿˜æœ‰ç§»åŠ¨å’Œè¦†ç›–ã€‚ è¿™é‡Œé¢ä¸»è¦è¦æœ‰ï¼šå»ºç«‹ç©ºé—²åŒºè¡¨ï¼Œå†…å­˜åˆ†é…ï¼Œå¯å˜åˆ†åŒºçš„å›æ”¶ï¼Œåœ°å€è½¬æ¢å’Œå­˜å‚¨ä¿æŠ¤ã€‚ å†…å­˜åˆ†é…ä¸­åˆæ¶‰åŠåˆ°ä¸‰ç§æ–¹æ³•ï¼šæœ€å…ˆé€‚åº”ç®—æ³•ï¼Œæœ€ä½³é€‚åº”ç®—æ³•ï¼Œæœ€åé€‚åº”ç®—æ³•ã€‚ æœ€å…ˆé€‚åº”ç®—æ³•(nrst-fit)ï¼šæŒ‰åˆ†åŒºåœ¨å†…å­˜çš„å…ˆåæ¬¡åºä»å¤´æŸ¥æ‰¾ï¼Œæ‰¾åˆ°ç¬¦åˆè¦æ±‚çš„ç¬¬ä¸€ä¸ªåˆ†åŒºè¿›è¡Œåˆ†é…ã€‚è¯¥ç®—æ³•çš„åˆ†é…å’Œé‡Šæ”¾çš„æ—¶é—´æ€§èƒ½è¾ƒå¥½ï¼Œè¾ƒå¤§çš„ç©ºé—²åˆ†åŒºå¯ä»¥è¢«ä¿ç•™åœ¨å†…å­˜é«˜ç«¯ã€‚ä½†éšç€ä½ç«¯åˆ†åŒºä¸æ–­åˆ’åˆ†ä¼šäº§ç”Ÿè¾ƒå¤šå°åˆ†åŒºï¼Œæ¯æ¬¡åˆ†é…æ—¶æŸ¥æ‰¾æ—¶é—´å¼€é”€ä¾¿ä¼šå¢å¤§ã€‚ æœ€ä½³é€‚åº”ç®—æ³•(best-fit)ï¼šæŒ‰åˆ†åŒºåœ¨å†…å­˜çš„å…ˆåæ¬¡åºä»å¤´æŸ¥æ‰¾ï¼Œæ‰¾åˆ°å…¶å¤§å°ä¸è¦æ±‚ç›¸å·®æœ€å°çš„ç©ºé—²åˆ†åŒºè¿›è¡Œåˆ†é…ã€‚ä»ä¸ªåˆ«æ¥çœ‹ï¼Œå¤–ç¢ç‰‡è¾ƒå°ï¼›ä½†ä»æ•´ä½“æ¥çœ‹ï¼Œä¼šå½¢æˆè¾ƒå¤šå¤–ç¢ç‰‡ä¼˜ç‚¹æ˜¯è¾ƒå¤§çš„ç©ºé—²åˆ†åŒºå¯ä»¥è¢«ä¿ç•™ã€‚ æœ€åé€‚åº”ç®—æ³•(worst- fit)ï¼šæŒ‰åˆ†åŒºåœ¨å†…å­˜çš„å…ˆåæ¬¡åºä»å¤´æŸ¥æ‰¾ï¼Œæ‰¾åˆ°æœ€å¤§çš„ç©ºé—²åˆ†åŒºè¿›è¡Œåˆ†é…ã€‚åŸºæœ¬ä¸ç•™ä¸‹å°ç©ºé—²åˆ†åŒºï¼Œä¸æ˜“å½¢æˆå¤–ç¢ç‰‡ã€‚ä½†ç”±äºè¾ƒå¤§çš„ç©ºé—²åˆ†åŒºä¸è¢«ä¿ç•™ï¼Œå½“å¯¹å†…å­˜éœ€æ±‚è¾ƒå¤§çš„è¿›ç¨‹éœ€è¦è¿è¡Œæ—¶ï¼Œå…¶è¦æ±‚ä¸æ˜“è¢«æ»¡è¶³ã€‚ é¡µå¼å­˜å‚¨ç®¡ç†å°†è¿›ç¨‹åˆ†é…åœ¨ä¸è¿ç»­ä½†å¤§å°å…ˆç–¼ç—›çš„å­˜å‚¨åŒºåŸŸä¸­ï¼Œå®ç°å†…å­˜è§ç¼æ’é’ˆçš„åˆ†é…ï¼ŒåŒæ—¶åˆä¿è¯è¿›ç¨‹çš„è¿ç»­æ‰§è¡Œã€‚é¡µå¼æŠ€æœ¯åŒ…æ‹¬ï¼šå…ˆæŠŠå†…å­˜ç©ºé—´åˆ†å—ï¼Œå†æŠŠç”¨æˆ·ç¨‹åºé€»è¾‘ç©ºé—´åˆ†é¡µï¼Œå†ä»¥é¡µä¸ºå•ä½åˆ†é…å†…å­˜ã€‚ å…·ä½“æ­¥éª¤ ç­‰åˆ†å†…å­˜ é¡µå¼å­˜å‚¨ç®¡ç†å°†å†…å­˜ç©ºé—´åˆ’åˆ†æˆç­‰é•¿çš„è‹¥å¹²åŒºåŸŸ æ¯ä¸ªåŒºåŸŸçš„å¤§å°ä¸€èˆ¬å–2çš„æ•´æ•°å¹‚ï¼Œç§°ä¸ºä¸€ä¸ªç‰©ç†é¡µé¢æœ‰æ—¶ç§°ä¸ºå—ã€‚ å†…å­˜çš„æ‰€æœ‰ç‰©ç†é¡µé¢ä»0å¼€å§‹ç¼–å·ï¼Œç§°ä½œç‰©ç†é¡µå·ã€‚ é€»è¾‘åœ°å€ ç³»ç»Ÿå°†ç¨‹åºçš„é€»è¾‘ç©ºé—´æŒ‰ç…§åŒæ ·å¤§å°ä¹Ÿåˆ’åˆ†æˆè‹¥å¹²é¡µé¢ï¼Œç§°ä¸ºé€»è¾‘é¡µé¢ä¹Ÿç§°ä¸ºé¡µã€‚ ç¨‹åºçš„å„ä¸ªé€»è¾‘é¡µé¢ä»0å¼€å§‹ä¾æ¬¡ç¼–å·ï¼Œç§°ä½œé€»è¾‘é¡µå·æˆ–ç›¸å¯¹é¡µå·ã€‚ æ¯ä¸ªé¡µé¢å†…ä»0å¼€å§‹ç¼–å€ï¼Œç§°ä¸ºé¡µå†…åœ°å€ã€‚ç¨‹åºä¸­çš„é€»è¾‘åœ°å€ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šé¡µå·å’Œé¡µå†…ä½ç§» å†…å­˜åˆ†é… ç³»ç»Ÿå¯ç”¨ä¸€å¼ â€œä½ç¤ºå›¾â€æ¥ç™»è®°å†…å­˜ä¸­å„å—çš„åˆ†é…æƒ…å†µï¼Œå­˜å‚¨åˆ†é…æ—¶ä»¥é¡µé¢ï¼ˆå—ï¼‰ä¸ºå•ä½ï¼Œå¹¶æŒ‰ç¨‹åºçš„é¡µæ•°å¤šå°‘è¿›è¡Œåˆ†é…ã€‚ ç›¸é‚»çš„é¡µé¢åœ¨å†…å­˜ä¸­ä¸ä¸€å®šç›¸é‚»ï¼Œå³åˆ†é…ç»™ç¨‹åºçš„å†…å­˜å—ä¹‹é—´ä¸ä¸€å®šè¿ç»­ã€‚ å¯¹ç¨‹åºåœ°å€ç©ºé—´çš„åˆ†é¡µæ˜¯ç³»ç»Ÿè‡ªåŠ¨è¿›è¡Œçš„ï¼Œå³å¯¹ç”¨æˆ·æ˜¯é€æ˜çš„ã€‚ ç”±äºé¡µé¢å°ºå¯¸ä¸º2çš„æ•´æ•°æ¬¡å¹‚ï¼Œæ•…ç›¸å¯¹åœ°å€ä¸­çš„é«˜ä½éƒ¨åˆ†å³ä¸ºé¡µå·ï¼Œä½ä½éƒ¨åˆ†ä¸ºé¡µå†…åœ°å€ã€‚ å®ç°åŸç†1ï¼é¡µè¡¨ ç³»ç»Ÿä¸ºæ¯ä¸ªè¿›ç¨‹å»ºç«‹ä¸€å¼ é¡µè¡¨ï¼Œç”¨äºè®°å½•è¿›ç¨‹é€»è¾‘é¡µé¢ä¸å†…å­˜ç‰©ç†é¡µé¢ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚åœ°å€ç©ºé—´æœ‰å¤šå°‘é¡µï¼Œè¯¥é¡µè¡¨é‡Œå°±ç™»è®°å¤šå°‘è¡Œï¼Œä¸”æŒ‰é€»è¾‘é¡µçš„é¡ºåºæ’åˆ—ã€‚ 2ï¼åœ°å€æ˜ å°„è¿‡ç¨‹ é¡µå¼å­˜å‚¨ç®¡ç†é‡‡ç”¨åŠ¨æ€é‡å®šä½ï¼Œå³åœ¨ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ä¸­å®Œæˆåœ°å€è½¬æ¢ã€‚å¤„ç†å™¨æ¯æ‰§è¡Œä¸€æ¡æŒ‡ä»¤ï¼Œå°±å°†æŒ‡ä»¤ä¸­çš„é€»è¾‘åœ°å€ï¼ˆp,dï¼‰å–æ¥ä»ä¸­å¾—åˆ°é€»è¾‘é¡µå·(p)ï¼Œç¡¬ä»¶æœºæ„æŒ‰æ­¤é¡µå·æŸ¥é¡µè¡¨ï¼Œå¾—åˆ°å†…å­˜çš„å—å·Bâ€™ï¼Œä¾¿å½¢æˆç»å¯¹åœ°å€ï¼ˆBâ€™,dï¼‰,å¤„ç†å™¨å³æŒ‰æ­¤åœ°å€è®¿é—®ä¸»å­˜ã€‚ 3ï¼é¡µé¢çš„å…±äº«ä¸ä¿æŠ¤ å½“å¤šä¸ªä¸åŒè¿›ç¨‹ä¸­éœ€è¦æœ‰ç›¸åŒé¡µé¢ä¿¡æ¯æ—¶ï¼Œå¯ä»¥åœ¨ä¸»å­˜ä¸­åªä¿ç•™ä¸€ä¸ªå‰¯æœ¬ï¼Œåªè¦è®©è¿™äº›è¿›ç¨‹å„è‡ªçš„æœ‰å…³é¡¹ä¸­æŒ‡å‘å†…å­˜åŒä¸€å—å·å³å¯ã€‚åŒæ—¶åœ¨é¡µè¡¨ä¸­è®¾ç½®ç›¸åº”çš„â€œå­˜å–æƒé™â€ï¼Œå¯¹ä¸åŒè¿›ç¨‹çš„è®¿é—®æƒé™è¿›è¡Œå„ç§å¿…è¦çš„é™åˆ¶ã€‚ é¡µå¼ç®¡ç†æ–¹å¼çš„ä¼˜ç‚¹æ²¡æœ‰å¤–ç¢ç‰‡ï¼Œç¨‹åºä¸å¿…è¿ç»­å­˜æ”¾ï¼Œä¾¿äºæ”¹å˜ç¨‹åºå ç”¨ç©ºé—´çš„å¤§å°ã€‚ é¡µå¼ç®¡ç†æ–¹å¼çš„ç¼ºç‚¹è¦æ±‚ç¨‹åºå…¨éƒ¨è£…å…¥å†…å­˜ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œç¨‹åºå°±ä¸èƒ½æ‰§è¡Œã€‚ é™¤äº†é¡µå¼å­˜å‚¨ç®¡ç†ï¼Œè¿˜æœ‰æ®µå¼å­˜å‚¨ç®¡ç†ã€‚ è¦†ç›–å’Œäº¤æ¢æŠ€æœ¯è¦†ç›–æŠ€æœ¯å¼•å…¥è¦†ç›– (overlay)æŠ€æœ¯çš„ç›®æ ‡æ˜¯åœ¨è¾ƒå°çš„å¯ç”¨å†…å­˜ä¸­è¿è¡Œè¾ƒå¤§çš„ç¨‹åºã€‚è¿™ç§æŠ€æœ¯å¸¸ç”¨äºå¤šé“ç¨‹åºç³»ç»Ÿä¹‹ä¸­ï¼Œä¸åˆ†åŒºå¼å­˜å‚¨ç®¡ç†é…åˆä½¿ç”¨ã€‚ è¦†ç›–æŠ€æœ¯çš„åŸç†ï¼šä¸€ä¸ªç¨‹åºçš„å‡ ä¸ªä»£ç æ®µæˆ–æ•°æ®æ®µï¼ŒæŒ‰ç…§æ—¶é—´å…ˆåæ¥å ç”¨å…¬å…±çš„å†…å­˜ç©ºé—´ã€‚å°†ç¨‹åºå¿…è¦éƒ¨åˆ†(å¸¸ç”¨åŠŸèƒ½)çš„ä»£ç å’Œæ•°æ®å¸¸é©»å†…å­˜ï¼›å¯é€‰éƒ¨åˆ†(ä¸å¸¸ç”¨åŠŸèƒ½)å¹³æ—¶å­˜æ”¾åœ¨å¤–å­˜(è¦†ç›–æ–‡ä»¶)ä¸­ï¼Œåœ¨éœ€è¦æ—¶æ‰è£…å…¥å†…å­˜ã€‚ä¸å­˜åœ¨è°ƒç”¨å…³ç³»çš„æ¨¡å—ä¸å¿…åŒæ—¶è£…å…¥åˆ°å†…å­˜ï¼Œä»è€Œå¯ä»¥ç›¸äº’è¦†ç›– è¦†ç›–æŠ€æœ¯çš„ç¼ºç‚¹æ˜¯ç¼–ç¨‹æ—¶å¿…é¡»åˆ’åˆ†ç¨‹åºæ¨¡å—å’Œç¡®å®šç¨‹åºæ¨¡å—ä¹‹é—´çš„è¦†ç›–å…³ç³»ï¼Œå¢åŠ ç¼–ç¨‹å¤æ‚åº¦ï¼›ä»å¤–å­˜è£…å…¥è¦†ç›–æ–‡ä»¶ï¼Œä»¥æ—¶é—´å»¶é•¿æ¢å–ç©ºé—´èŠ‚çœã€‚ äº¤æ¢æŠ€æœ¯äº¤æ¢ (swapping)æŠ€æœ¯åœ¨å¤šä¸ªç¨‹åºå¹¶å‘æ‰§è¡Œæ—¶ï¼Œå¯ä»¥å°†æš‚æ—¶ä¸èƒ½æ‰§è¡Œçš„ç¨‹åºï¼ˆè¿›ç¨‹ï¼‰é€åˆ°å¤–å­˜ä¸­ï¼Œä»è€Œè·å¾—ç©ºé—²å†…å­˜ç©ºé—´æ¥è£…å…¥æ–°ç¨‹åºï¼ˆè¿›ç¨‹ï¼‰ï¼Œæˆ–è¯»äººä¿å­˜åœ¨å¤–å­˜ä¸­è€Œå¤„äºå°±ç»ªçŠ¶æ€çš„ç¨‹åºã€‚äº¤æ¢å•ä½ä¸ºæ•´ä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´ã€‚äº¤æ¢æŠ€æœ¯å¸¸ç”¨äºå¤šé“ç¨‹åºç³»ç»Ÿæˆ–å°å‹åˆ†æ—¶ç³»ç»Ÿä¸­ï¼Œå› ä¸ºè¿™äº›ç³»ç»Ÿå¤§å¤šé‡‡ç”¨åˆ†åŒºå­˜å‚¨ç®¡ç†æ–¹å¼ã€‚ä¸åˆ†åŒºå¼å­˜å‚¨ç®¡ç†é…åˆä½¿ç”¨åˆç§°ä½œâ€œå¯¹æ¢â€æˆ–â€œæ»šè¿›ï¼æ»šå‡ºâ€ (roll-inï¼roll-out)ã€‚ åŸç†ï¼šæš‚åœæ‰§è¡Œå†…å­˜ä¸­çš„è¿›ç¨‹ï¼Œå°†æ•´ä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´ä¿å­˜åˆ°å¤–å­˜çš„äº¤æ¢åŒºä¸­ï¼ˆæ¢å‡ºswap outï¼‰ï¼Œè€Œå°†å¤–å­˜ä¸­ç”±é˜»å¡å˜ä¸ºå°±ç»ªçš„è¿›ç¨‹çš„åœ°å€ç©ºé—´è¯»å…¥åˆ°å†…å­˜ä¸­ï¼Œå¹¶å°†è¯¥è¿›ç¨‹é€åˆ°å°±ç»ªé˜Ÿåˆ—ï¼ˆæ¢å…¥swap inï¼‰ã€‚ ä¸¤è€…æ¯”è¾ƒäº¤æ¢èŠ±è´¹å¤§é‡å†…ï¼Œå¤–å­˜äº¤æ¢æ—¶é—´ã€‚ä¸¤è€…éƒ½å®ç°äº†å¤§ä½œä¸šåœ¨å°å†…å­˜ä¸Šè¿è¡Œã€‚ è¦†ç›–äºä¸æ¢æŠ€æœ¯çš„åŒºåˆ«ï¼š a. è¦†ç›–ç”±ç”¨æˆ·è§£å†³ç©ºé—´ä¸è¶³é—®é¢˜ï¼ˆå³ï¼šè¦†ç›–åªèƒ½åœ¨ä¸€ä¸ªç¨‹åºå†…éƒ¨è¿›è¡Œï¼‰ b. äº¤æ¢ç”±ç³»ç»Ÿè§£å†³ç©ºé—´ä¸è¶³é—®é¢˜ï¼ˆå³ï¼šäº¤æ¢å¯ä»¥åœ¨ä»»æ„ç¨‹åºé—´è¿›è¡Œï¼‰ c. è¦†ç›–å¯¹ç¨‹åºç»“æ„æœ‰ä¸¥æ ¼çš„é™åˆ¶ï¼Œäº¤æ¢å¯¹ç¨‹åºç»“æ„æ²¡æœ‰é™åˆ¶ï¼ˆè¿™ä¹Ÿæ˜¯ç”±äºa,bçš„åŸå› ï¼‰ è™šæ‹Ÿå­˜å‚¨å™¨ä»€ä¹ˆæ˜¯è™šæ‹Ÿå­˜å‚¨å™¨å½“ä»£è®¡ç®—æœºç³»ç»Ÿçš„ä¸»å­˜ä¸»è¦ç”±åŠå¯¼ä½“å­˜å‚¨å™¨ç»„æˆï¼Œç”±äºå·¥è‰ºå’Œæˆæœ¬çš„åŸå› ï¼Œä¸»å­˜çš„å®¹é‡å—åˆ°é™åˆ¶ã€‚ç„¶è€Œï¼Œè®¡ç®—æœºç³»ç»Ÿè½¯ä»¶å’Œåº”ç”¨è½¯ä»¶çš„åŠŸèƒ½ä¸æ–­å¢å¼ºï¼Œç¨‹åºè§„æ¨¡è¿…é€Ÿæ‰©å¤§ï¼Œè¦æ±‚ä¸»å­˜çš„å®¹é‡è¶Šå¤§è¶Šå¥½ï¼Œè¿™å°±äº§ç”Ÿäº†çŸ›ç›¾ã€‚ä¸ºäº†ç»™å¤§çš„ç¨‹åºæä¾›æ–¹ä¾¿ï¼Œä½¿å®ƒä»¬æ‘†è„±ä¸»å­˜å®¹é‡çš„é™åˆ¶ï¼Œå¯ä»¥ç”±æ“ä½œç³»ç»ŸæŠŠä¸»å­˜å’Œè¾…å­˜è¿™ä¸¤çº§å­˜å‚¨ç³»ç»Ÿç®¡ç†èµ·æ¥ï¼Œå®ç°è‡ªåŠ¨è¦†ç›–ã€‚ ä¸€ä¸ªå¤§ä½œä¸šåœ¨æ‰§è¡Œæ—¶ï¼Œå…¶ä¸€éƒ¨åˆ†åœ°å€ç©ºé—´åœ¨ä¸»å­˜ï¼Œå¦ä¸€éƒ¨åˆ†åœ¨è¾…å­˜ï¼Œå½“æ‰€è®¿é—®çš„ä¿¡æ¯ä¸åœ¨ä¸»å­˜æ—¶ï¼Œåˆ™ç”±æ“ä½œç³»ç»Ÿè€Œä¸æ˜¯ç¨‹åºå‘˜æ¥å®‰æ’I/OæŒ‡ä»¤ï¼ŒæŠŠä¿¡æ¯ä»è¾…å­˜è°ƒå…¥ä¸»å­˜ã€‚ä»æ•ˆæœä¸Šæ¥çœ‹ï¼Œå¥½åƒä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªå­˜å‚¨å®¹é‡æ¯”å®é™…ä¸»å­˜å¤§å¾—å¤šçš„å­˜å‚¨å™¨ï¼Œç”¨æˆ·æ— éœ€è€ƒè™‘æ‰€ç¼–ç¨‹åºåœ¨ä¸»å­˜ä¸­æ˜¯å¦æ”¾å¾—ä¸‹æˆ–æ”¾åœ¨ä»€ä¹ˆä½ç½®ç­‰é—®é¢˜ã€‚æˆ‘ä»¬ç§°è¿™ç§å­˜å‚¨å™¨ä¸ºè™šæ‹Ÿå­˜å‚¨å™¨ã€‚ è™šæ‹Ÿå­˜å‚¨å™¨åªæ˜¯ä¸€ä¸ªå®¹é‡éå¸¸å¤§çš„å­˜å‚¨å™¨çš„é€»è¾‘æ¨¡å‹ï¼Œä¸æ˜¯ä»»ä½•å®é™…çš„ç‰©ç†å­˜å‚¨å™¨ã€‚å®ƒå€ŸåŠ©äºç£ç›˜ç­‰è¾…åŠ©å­˜å‚¨å™¨æ¥æ‰©å¤§ä¸»å­˜å®¹é‡ï¼Œä½¿ä¹‹ä¸ºæ›´å¤§æˆ–æ›´å¤šçš„ç¨‹åºæ‰€ä½¿ç”¨ã€‚è™šæ‹Ÿå­˜å‚¨å™¨æŒ‡çš„æ˜¯ä¸»å­˜ï¼å¤–å­˜å±‚æ¬¡ï¼Œå®ƒä»¥é€æ˜çš„æ–¹å¼ä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªæ¯”å®é™…ä¸»å­˜ç©ºé—´å¤§å¾—å¤šçš„ç¨‹åºåœ°å€ç©ºé—´ã€‚ ç‰©ç†åœ°å€æ˜¯å®é™…çš„ä¸»å­˜å•å…ƒåœ°å€ï¼Œç”±CPUåœ°å€å¼•è„šé€å‡ºï¼Œæ˜¯ç”¨äºè®¿é—®ä¸»å­˜çš„ã€‚è®¾CPUåœ°å€æ€»çº¿çš„å®½åº¦ä¸ºmä½ï¼Œåˆ™ç‰©ç†åœ°å€ç©ºé—´çš„å¤§å°å°±æ˜¯2mã€‚ è™šæ‹Ÿåœ°å€æ˜¯ç”¨æˆ·ç¼–ç¨‹æ—¶ä½¿ç”¨çš„åœ°å€ï¼Œç”±ç¼–è¯‘ç¨‹åºç”Ÿæˆï¼Œæ˜¯ç¨‹åºçš„é€»è¾‘åœ°å€ï¼Œå…¶åœ°å€ç©ºé—´çš„å¤§å°å—åˆ°è¾…åŠ©å­˜å‚¨å™¨å®¹é‡çš„é™åˆ¶ã€‚æ˜¾ç„¶ï¼Œè™šæ‹Ÿåœ°å€è¦æ¯”å®é™…åœ°å€å¤§å¾—å¤šã€‚ç¨‹åºçš„é€»è¾‘åœ°å€ç©ºé—´ç§°ä¸ºè™šæ‹Ÿåœ°å€ç©ºé—´ã€‚ åˆ¤æ–­è¿‡ç¨‹ç¨‹åºè¿è¡Œæ—¶ï¼ŒCPUä»¥è™šæ‹Ÿåœ°å€æ¥è®¿é—®ä¸»å­˜ï¼Œç”±è¾…åŠ©ç¡¬ä»¶æ‰¾å‡ºè™šæ‹Ÿåœ°å€å’Œå®é™…åœ°å€ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œå¹¶åˆ¤æ–­è¿™ä¸ªè™šæ‹Ÿåœ°å€æŒ‡ç¤ºçš„å­˜å‚¨å•å…ƒå†…å®¹æ˜¯å¦å·²è£…å…¥ä¸»å­˜ã€‚å¦‚æœå·²åœ¨ä¸»å­˜ä¸­ï¼Œåˆ™é€šè¿‡åœ°å€å˜æ¢ï¼ŒCPUå¯ç›´æ¥è®¿é—®ä¸»å­˜çš„å®é™…å•å…ƒï¼›å¦‚æœä¸åœ¨ä¸»å­˜ä¸­ï¼Œåˆ™æŠŠåŒ…å«è¿™ä¸ªå­—çš„ä¸€ä¸ªå­˜å‚¨å—è°ƒå…¥ä¸»å­˜åå†ç”±CPUè®¿é—®ã€‚å¦‚æœä¸»å­˜å·²æ»¡ï¼Œåˆ™ç”±æ›¿æ¢ç®—æ³•ä»ä¸»å­˜ä¸­å°†æš‚ä¸è¿è¡Œçš„ä¸€å—è°ƒå›å¤–å­˜ï¼Œå†ä»å¤–å­˜è°ƒå…¥æ–°çš„ä¸€å—åˆ°ä¸»å­˜ã€‚ æ€»ç»“ä¸»è¦æ˜¯äº†è§£äº†æ“ä½œç³»ç»Ÿæ˜¯æ€ä¹ˆè¿›è¡Œå†…å­˜åˆ†é…çš„ï¼Œæ€ä¹ˆè¿›è¡Œç®¡ç†è¿›ç¨‹è¿›å…¥å†…å­˜çš„ã€‚äº†è§£äº†è¦†ç›–å’Œäº¤æ¢æŠ€æœ¯çš„åŒºåˆ«å’Œè”ç³»ã€‚äº†è§£äº†åˆ†åŒºç®¡ç†å’Œé¡µå¼ç®¡ç†çš„åŒºåˆ«ã€‚å¯¹å­˜å‚¨åˆ†é…å’Œç®¡ç†æœ‰äº†ä¸€ç‚¹è®¤è¯†ã€‚è§£å†³äº†ä¸€ç‚¹ç‚¹å¿ƒä¸­çš„ç–‘æƒ‘ï¼Œæœ¬æ„è®°å½•ä¸‹æ¥æ–¹ä¾¿ä»¥åæŸ¥é˜…ã€‚","categories":[{"name":"other","slug":"other","permalink":"http://sevencai.github.io/categories/other/"}],"tags":[{"name":"other","slug":"other","permalink":"http://sevencai.github.io/tags/other/"}]},{"title":"é—­åŒ…æ·±å…¥ç†è§£é˜…è¯»ç¬”è®°","slug":"é—­åŒ…æ·±å…¥ç†è§£é˜…è¯»ç¬”è®°","date":"2016-05-26T09:15:27.000Z","updated":"2016-12-12T03:02:30.000Z","comments":true,"path":"2016/05/26/é—­åŒ…æ·±å…¥ç†è§£é˜…è¯»ç¬”è®°/","link":"","permalink":"http://sevencai.github.io/2016/05/26/é—­åŒ…æ·±å…¥ç†è§£é˜…è¯»ç¬”è®°/","excerpt":"","text":"ä»Šå¤©å»çœ‹äº†å¾ˆå¤šå…³äºé—­åŒ…çš„è§£é‡Šï¼Œæ¯”å¦‚MDNä¸Šçš„ï¼šClosuresçš„è§£é‡Šæˆ–è€…æ˜¯åœ¨stackoverflowåˆ«äººçš„ä¸€äº›æ€»ç»“ã€‚å‘ç°äº†è‡ªå·±æœ‰å¾ˆå¤šå¾ˆå¤šçš„è¯¯åŒºã€‚æ¯”å¦‚æ½œæ„è¯†è®¤ä¸ºé—­åŒ…æ˜¯ä¸€å®šè¦åœ¨ä¸€ä¸ªå‡½æ•°å†…è¿”å›ï¼ˆreturnï¼‰ä¸€ä¸ªå‡½æ•°ï¼Œæ‰æ˜¯é—­åŒ…ã€‚è¿™æ˜¯å¾ˆé”™è¯¯çš„ã€‚å†æ¯”å¦‚è®¤ä¸ºé—­åŒ…ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚å‰å‡ ä¸ªæœˆé¢è¯•çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ä¼šè¯´é—­åŒ…ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œä½†æ˜¯é¢è¯•å®˜ä»¬ä¹Ÿæ²¡æœ‰ç»™æˆ‘æŒ‡å‡ºæ¥ã€‚é—­åŒ…ä¸ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œä¼šå ç”¨å†…å­˜ï¼Œè¿˜å¥½åŠæ—¶å‘ç°äº†ã€‚çœ‹åˆ°äº†ä¸€äº›å¥½çš„è§£é‡Šéƒ½æ˜¯ä»¥è®²æ•…äº‹çš„å½¢å¼è§£é‡Šçš„ï¼Œä¸­é—´ä¸ä¸€å®šå¯¹ï¼Œä½†æ˜¯éƒ½æ˜¯å¸®åŠ©äº†æˆ‘ç†è§£çš„ã€‚è¿˜çœ‹äº†ä¸€äº›å’±ä»¬è‡ªå·±ç¿»è¯‘çš„å¤–å›½äººçš„æ•…äº‹ï¼Œæˆ–è€…æ–‡ç« ï¼Œåœ¨çœ‹äº†åŸæ–‡ä»¥åï¼Œå‘ç°è¿˜æ˜¯çœ‹åŸæ–‡æ¯”è¾ƒå¥½æ‡‚ï¼Œä¹Ÿæ¯”è¾ƒæ¸…æ™°ã€‚ ä¸‹é¢æ˜¯æˆ‘æ‰¾åˆ°çš„ä¸€äº›è§£é‡Šï¼Œè¿™äº›è§£é‡Šå¤§å¤šæ˜¯è‹±æ–‡ï¼Œæ”¾åœ¨åšå®¢é‡Œé¢ä¹Ÿåªæ˜¯æ–¹ä¾¿æˆ‘ç¿»é˜…å’Œè®°å½•,ä¸ç”¨åˆ°å¤„æ‰¾ã€‚æˆ‘æ²¡æœ‰è¿›è¡Œä»»ä½•ç¿»è¯‘ï¼Œä¹Ÿæ²¡æœ‰å†™ä»»ä½•è‡ªå·±çš„ç†è§£ã€‚å¹¶ä¸æ˜¯åŸåˆ›ï¼Œæˆ‘æƒ³ä¿ç•™åŸä½œè€…çš„åŸæ–‡ã€‚ä¹Ÿä¼šæ ‡æ³¨ä¸Šä½œè€…å’Œæ¥æºã€‚ a story help you understandä¸‹é¢æ˜¯æˆ‘å‘ç°æœ€å¥½æ‡‚çš„ä¸€ä¸ªæ•…äº‹ï¼Œæ¥è‡ªstackoverflow:Tero Tolonen,åœ°å€åœ¨è¿™é‡Œ The children will always remember the secrets they have shared with their parents, even after their parents are gone. This is what closures are for functions. The secrets for JavaScript functions are the private variables 123var parent = function() &#123; var name = \"Mary\"; // secret&#125; Every time you call it, local variable â€œnameâ€ is created and given name â€œMaryâ€. And every time the function exits the variable is lost and the name is forgotten. As you may guess, because the variables are re-created every time the function is called, and nobody else will know them, there must be a secret place where they are stored. It could be called Chamber of Secrets or stack or local scope but it doesnâ€™t really matter. We know they are there, somewhere, hidden in the memory. But, in JavaScript there is this very special thing that functions which are created inside other functions, can also know the local variables of their parents and keep them as long as they live.123456var parent = function() &#123; var name = \"Mary\"; var child = function(childName) &#123; // I can also see that \"name\" is \"Mary\" &#125;&#125; So, as long as we are in the parent -function, it can create one or more child functions which do share the secret variables from the secret place. But the sad thing is, if the child is also a private variable of its parent function, it would also die when the parent ends, and the secrets would die with them. So to live, the child has to leave before itâ€™s too late 12345678var parent = function() &#123; var name = \"Mary\"; var child = function(childName) &#123; return \"My name is \"+childName+\", child of \"+name; &#125; return child; // child leaves the parent -&gt;&#125;var child = parent(); // &lt; - and here it is outside And now, even though Mary is â€œno longer runningâ€, the memory of her is not lost and her child will always remember her name and other secrets they shared during their time together. So, if you call the child â€œAliceâ€, she will respond1child(\"Alice\") =&gt; \"My name is Alice, child of Mary\" Thatâ€™s all there is to tell. misunderstandingsThis is an attempt to clear up several (possible) misunderstandings about closures that appear in some of the other answers. æ¥è‡ªstackoverflow:åœ°å€åœ¨è¿™é‡Œ A closure is not only created when you return an inner function. In fact, the enclosing function does not need to return at all in order for its closure to be created. You might instead assign your inner function to a variable in an outer scope, or pass it as an argument to another function where it could be called immediately or any time later. Therefore, the closure of the enclosing function is probably created as soon as the enclosing function is called since any inner function has access to that closure whenever the inner function is called, before or after the enclosing function returns. A closure does not reference a copy of the old values of variables in its scope. The variables themselves are part of the closure, and so the value seen when accessing one of those variables is the latest value at the time it is accessed. This is why inner functions created inside of loops can be tricky, since each one has access to the same outer variables rather than grabbing a copy of the variables at the time the function is created or called. The â€œvariablesâ€ in a closure include any named functions declared within the function. They also include arguments of the function. A closure also has access to its containing closureâ€™s variables, all the way up to the global scope. Closures use memory, but they donâ€™t cause memory leaks since JavaScript by itself cleans up its own circular structures that are not referenced. Internet Explorer memory leaks involving closures are created when it fails to disconnect DOM attribute values that reference closures, thus maintaining references to possibly circular structures. Closures provide an environment, a stack frame, for local variables. read examples to understand better1234567function sayHello2(name) &#123; var text = 'Hello ' + name; // Local variable var say = function() &#123; console.log(text); &#125; return say;&#125;var say2 = sayHello2('Bob');say2(); // logs \"Hello Bob\" 123456789function say667() &#123; // Local variable that ends up within closure var num = 666; var say = function() &#123; console.log(num); &#125; num++; return say;&#125;var sayNumber = say667();sayNumber(); // logs 667 12345678910111213141516171819202122var gLogNumber, gIncreaseNumber, gSetNumber;function setupSomeGlobals() &#123; // Local variable that ends up within closure var num = 666; // Store some references to functions as global variables gLogNumber = function() &#123; console.log(num); &#125; gIncreaseNumber = function() &#123; num++; &#125; gSetNumber = function(x) &#123; num = x; &#125;&#125;setupSomeGlobals();gIncreaseNumber();gLogNumber(); // 667gSetNumber(5);gLogNumber(); // 5var oldLog = gLogNumber;setupSomeGlobals();gLogNumber(); // 666oldLog() // 5 12345678910111213141516function buildList(list) &#123; var result = []; for (var i = 0; i &lt; list.length; i++) &#123; var item = 'item' + i; result.push( function() &#123;console.log(item + ' ' + list[i])&#125; ); &#125; return result;&#125;function testList() &#123; var fnlist = buildList([1,2,3]); // Using j only to help prevent confusion -- could use i. for (var j = 0; j &lt; fnlist.length; j++) &#123; fnlist[j](); &#125;&#125; 1234567function sayAlice() &#123; var say = function() &#123; console.log(alice); &#125; // Local variable that ends up within closure var alice = 'Hello Alice'; return say;&#125;sayAlice()(); 123456789101112131415161718192021function newClosure(someNum, someRef) &#123; // Local variables that end up within closure var num = someNum; var anArray = [1,2,3]; var ref = someRef; return function(x) &#123; num += x; anArray.push(num); console.log('num: ' + num + '\\nanArray ' + anArray.toString() + '\\nref.someVar ' + ref.someVar); &#125;&#125;obj = &#123;someVar: 4&#125;;fn1 = newClosure(4, obj);fn2 = newClosure(5, obj);fn1(1); // num: 5; anArray: 1,2,3,5; ref.someVar: 4;fn2(1); // num: 6; anArray: 1,2,3,6; ref.someVar: 4;obj.someVar++;fn1(2); // num: 7; anArray: 1,2,3,5,7; ref.someVar: 5;fn2(2); // num: 8; anArray: 1,2,3,6,8; ref.someVar: 5; é—­åŒ…çš„ç”¨é€”ç”¨é—­åŒ…æ¨¡æ‹Ÿç§æœ‰æ–¹æ³•æ¥è‡ªMDNCLOSURES è¯¸å¦‚ Java åœ¨å†…çš„ä¸€äº›è¯­è¨€æ”¯æŒå°†æ–¹æ³•å£°æ˜ä¸ºç§æœ‰çš„ï¼Œå³å®ƒä»¬åªèƒ½è¢«åŒä¸€ä¸ªç±»ä¸­çš„å…¶å®ƒæ–¹æ³•æ‰€è°ƒç”¨ã€‚ å¯¹æ­¤ï¼ŒJavaScript å¹¶ä¸æä¾›åŸç”Ÿçš„æ”¯æŒï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨é—­åŒ…æ¨¡æ‹Ÿç§æœ‰æ–¹æ³•ã€‚ç§æœ‰æ–¹æ³•ä¸ä»…ä»…æœ‰åˆ©äºé™åˆ¶å¯¹ä»£ç çš„è®¿é—®ï¼šè¿˜æä¾›äº†ç®¡ç†å…¨å±€å‘½åç©ºé—´çš„å¼ºå¤§èƒ½åŠ›ï¼Œé¿å…éæ ¸å¿ƒçš„æ–¹æ³•å¼„ä¹±äº†ä»£ç çš„å…¬å…±æ¥å£éƒ¨åˆ†ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å±•ç°äº†å¦‚ä½•ä½¿ç”¨é—­åŒ…æ¥å®šä¹‰å…¬å…±å‡½æ•°ï¼Œä¸”å…¶å¯ä»¥è®¿é—®ç§æœ‰å‡½æ•°å’Œå˜é‡ã€‚è¿™ä¸ªæ–¹å¼ä¹Ÿç§°ä¸º æ¨¡å—æ¨¡å¼ï¼ˆmodule patternï¼‰ï¼š123456789101112131415161718192021222324var Counter = (function() &#123; var privateCounter = 0; function changeBy(val) &#123; privateCounter += val; &#125; return &#123; increment: function() &#123; changeBy(1); &#125;, decrement: function() &#123; changeBy(-1); &#125;, value: function() &#123; return privateCounter; &#125; &#125; &#125;)();console.log(Counter.value()); /* logs 0 */Counter.increment();Counter.increment();console.log(Counter.value()); /* logs 2 */Counter.decrement();console.log(Counter.value()); /* logs 1 */ è¿™é‡Œæœ‰å¾ˆå¤šç»†èŠ‚ã€‚åœ¨ä»¥å¾€çš„ç¤ºä¾‹ä¸­ï¼Œæ¯ä¸ªé—­åŒ…éƒ½æœ‰å®ƒè‡ªå·±çš„ç¯å¢ƒï¼›è€Œè¿™æ¬¡æˆ‘ä»¬åªåˆ›å»ºäº†ä¸€ä¸ªç¯å¢ƒï¼Œä¸ºä¸‰ä¸ªå‡½æ•°æ‰€å…±äº«ï¼šCounter.incrementï¼ŒCounter.decrement å’Œ Counter.valueã€‚ è¯¥å…±äº«ç¯å¢ƒåˆ›å»ºäºä¸€ä¸ªåŒ¿åå‡½æ•°ä½“å†…ï¼Œè¯¥å‡½æ•°ä¸€ç»å®šä¹‰ç«‹åˆ»æ‰§è¡Œã€‚ç¯å¢ƒä¸­åŒ…å«ä¸¤ä¸ªç§æœ‰é¡¹ï¼šåä¸º privateCounter çš„å˜é‡å’Œåä¸º changeBy çš„å‡½æ•°ã€‚ è¿™ä¸¤é¡¹éƒ½æ— æ³•åœ¨åŒ¿åå‡½æ•°å¤–éƒ¨ç›´æ¥è®¿é—®ã€‚å¿…é¡»é€šè¿‡åŒ¿ååŒ…è£…å™¨è¿”å›çš„ä¸‰ä¸ªå…¬å…±å‡½æ•°è®¿é—®ã€‚ è¿™ä¸‰ä¸ªå…¬å…±å‡½æ•°æ˜¯å…±äº«åŒä¸€ä¸ªç¯å¢ƒçš„é—­åŒ…ã€‚å¤šäº JavaScript çš„è¯æ³•èŒƒå›´çš„ä½œç”¨åŸŸï¼Œå®ƒä»¬éƒ½å¯ä»¥è®¿é—® privateCounter å˜é‡å’Œ changeBy å‡½æ•°ã€‚ æ‚¨åº”è¯¥æ³¨æ„åˆ°äº†ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåŒ¿åå‡½æ•°ç”¨äºåˆ›å»ºè®¡æ•°å™¨ï¼Œç„¶åç›´æ¥è°ƒç”¨è¯¥å‡½æ•°ï¼Œå¹¶å°†è¿”å›å€¼èµ‹ç»™ Counter å˜é‡ã€‚ä¹Ÿå¯ä»¥å°†è¿™ä¸ªå‡½æ•°ä¿å­˜åˆ°å¦ä¸€ä¸ªå˜é‡ä¸­ï¼Œä»¥ä¾¿åˆ›å»ºå¤šä¸ªè®¡æ•°å™¨ã€‚ 123456789101112131415161718192021222324252627var makeCounter = function() &#123; var privateCounter = 0; function changeBy(val) &#123; privateCounter += val; &#125; return &#123; increment: function() &#123; changeBy(1); &#125;, decrement: function() &#123; changeBy(-1); &#125;, value: function() &#123; return privateCounter; &#125; &#125; &#125;;var Counter1 = makeCounter();var Counter2 = makeCounter();console.log(Counter1.value()); /* logs 0 */Counter1.increment();Counter1.increment();console.log(Counter1.value()); /* logs 2 */Counter1.decrement();console.log(Counter1.value()); /* logs 1 */console.log(Counter2.value()); /* logs 0 */ è¯·æ³¨æ„ä¸¤ä¸ªè®¡æ•°å™¨æ˜¯å¦‚ä½•ç»´æŠ¤å®ƒä»¬å„è‡ªçš„ç‹¬ç«‹æ€§çš„ã€‚æ¯æ¬¡è°ƒç”¨ makeCounter() å‡½æ•°æœŸé—´ï¼Œå…¶ç¯å¢ƒæ˜¯ä¸åŒçš„ã€‚æ¯æ¬¡è°ƒç”¨ä¸­ï¼Œ privateCounter ä¸­å«æœ‰ä¸åŒçš„å®ä¾‹ã€‚ è¿™ç§å½¢å¼çš„é—­åŒ…æä¾›äº†è®¸å¤šé€šå¸¸ç”±é¢å‘å¯¹è±¡ç¼–ç¨‹Uæ‰€äº«æœ‰çš„ç›Šå¤„ï¼Œå°¤å…¶æ˜¯æ•°æ®éšè—å’Œå°è£…ã€‚ å®¹æ˜“çŠ¯çš„é”™è¯¯-åœ¨å¾ªç¯ä¸­åˆ›å»ºé—­åŒ…v1234567891011121314151617181920function showHelp(help) &#123; document.getElementById('help').innerHTML = help;&#125;function setupHelp() &#123; var helpText = [ &#123;'id': 'email', 'help': 'Your e-mail address'&#125;, &#123;'id': 'name', 'help': 'Your full name'&#125;, &#123;'id': 'age', 'help': 'Your age (you must be over 16)'&#125; ]; for (var i = 0; i &lt; helpText.length; i++) &#123; var item = helpText[i]; document.getElementById(item.id).onfocus = function() &#123; showHelp(item.help); &#125; &#125;&#125;setupHelp(); ç»„ helpText ä¸­å®šä¹‰äº†ä¸‰ä¸ªæœ‰ç”¨çš„æç¤ºä¿¡æ¯ï¼Œæ¯ä¸€ä¸ªéƒ½å…³è”äºå¯¹åº”çš„æ–‡æ¡£ä¸­çš„è¾“å…¥åŸŸçš„ IDã€‚é€šè¿‡å¾ªç¯è¿™ä¸‰é¡¹å®šä¹‰ï¼Œä¾æ¬¡ä¸ºæ¯ä¸€ä¸ªè¾“å…¥åŸŸæ·»åŠ äº†ä¸€ä¸ª onfocus äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œä»¥ä¾¿æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ã€‚ è¿è¡Œè¿™æ®µä»£ç åï¼Œæ‚¨ä¼šå‘ç°å®ƒæ²¡æœ‰è¾¾åˆ°æƒ³è¦çš„æ•ˆæœã€‚æ— è®ºç„¦ç‚¹åœ¨å“ªä¸ªè¾“å…¥åŸŸä¸Šï¼Œæ˜¾ç¤ºçš„éƒ½æ˜¯å…³äºå¹´é¾„çš„æ¶ˆæ¯ã€‚ è¯¥é—®é¢˜çš„åŸå› åœ¨äºèµ‹ç»™ onfocus æ˜¯é—­åŒ…ï¼ˆsetupHelpï¼‰ä¸­çš„åŒ¿åå‡½æ•°è€Œä¸æ˜¯é—­åŒ…å¯¹è±¡ï¼›åœ¨é—­åŒ…ï¼ˆsetupHelpï¼‰ä¸­ä¸€å…±åˆ›å»ºäº†ä¸‰ä¸ªåŒ¿åå‡½æ•°ï¼Œä½†æ˜¯å®ƒä»¬éƒ½å…±äº«åŒä¸€ä¸ªç¯å¢ƒï¼ˆitemï¼‰ã€‚åœ¨ onfocus çš„å›è°ƒè¢«æ‰§è¡Œæ—¶ï¼Œå¾ªç¯æ—©å·²ç»å®Œæˆï¼Œä¸”æ­¤æ—¶ item å˜é‡ï¼ˆç”±æ‰€æœ‰ä¸‰ä¸ªé—­åŒ…æ‰€å…±äº«ï¼‰å·²ç»æŒ‡å‘äº† helpText åˆ—è¡¨ä¸­çš„æœ€åä¸€é¡¹ã€‚ è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ç§æ–¹æ¡ˆæ˜¯ä½¿onfocusæŒ‡å‘ä¸€ä¸ªæ–°çš„é—­åŒ…å¯¹è±¡ã€‚123456789101112131415161718192021222324function showHelp(help) &#123; document.getElementById('help').innerHTML = help;&#125;function makeHelpCallback(help) &#123; return function() &#123; showHelp(help); &#125;;&#125;function setupHelp() &#123; var helpText = [ &#123;'id': 'email', 'help': 'Your e-mail address'&#125;, &#123;'id': 'name', 'help': 'Your full name'&#125;, &#123;'id': 'age', 'help': 'Your age (you must be over 16)'&#125; ]; for (var i = 0; i &lt; helpText.length; i++) &#123; var item = helpText[i]; document.getElementById(item.id).onfocus = makeHelpCallback(item.help); &#125;&#125;setupHelp(); æ€§èƒ½è€ƒé‡å¦‚æœä¸æ˜¯å› ä¸ºæŸäº›ç‰¹æ®Šä»»åŠ¡è€Œéœ€è¦é—­åŒ…ï¼Œåœ¨æ²¡æœ‰å¿…è¦çš„æƒ…å†µä¸‹ï¼Œåœ¨å…¶å®ƒå‡½æ•°ä¸­åˆ›å»ºå‡½æ•°æ˜¯ä¸æ˜æ™ºçš„ï¼Œå› ä¸ºé—­åŒ…å¯¹è„šæœ¬æ€§èƒ½å…·æœ‰è´Ÿé¢å½±å“ï¼ŒåŒ…æ‹¬å¤„ç†é€Ÿåº¦å’Œå†…å­˜æ¶ˆè€—ã€‚ ä¾‹å¦‚ï¼Œåœ¨åˆ›å»ºæ–°çš„å¯¹è±¡æˆ–è€…ç±»æ—¶ï¼Œæ–¹æ³•é€šå¸¸åº”è¯¥å…³è”äºå¯¹è±¡çš„åŸå‹ï¼Œè€Œä¸æ˜¯å®šä¹‰åˆ°å¯¹è±¡çš„æ„é€ å™¨ä¸­ã€‚åŸå› æ˜¯è¿™å°†å¯¼è‡´æ¯æ¬¡æ„é€ å™¨è¢«è°ƒç”¨ï¼Œæ–¹æ³•éƒ½ä¼šè¢«é‡æ–°èµ‹å€¼ä¸€æ¬¡ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ºæ¯ä¸€ä¸ªå¯¹è±¡çš„åˆ›å»ºï¼‰ã€‚ è€ƒè™‘ä»¥ä¸‹è™½ç„¶ä¸åˆ‡å®é™…ä½†å´è¯´æ˜é—®é¢˜çš„ç¤ºä¾‹ï¼š function MyObject(name, message) { this.name = name.toString(); this.message = message.toString(); this.getName = function() { return this.name; }; this.getMessage = function() { return this.message; }; } ä¸Šé¢çš„ä»£ç å¹¶æœªåˆ©ç”¨åˆ°é—­åŒ…çš„ç›Šå¤„ï¼Œå› æ­¤ï¼Œåº”è¯¥ä¿®æ”¹ä¸ºå¦‚ä¸‹å¸¸è§„å½¢å¼ï¼š function MyObject(name, message) { this.name = name.toString(); this.message = message.toString(); } MyObject.prototype = { getName: function() { return this.name; }, getMessage: function() { return this.message; } }; æˆ–è€…æ”¹æˆï¼š function MyObject(name, message) { this.name = name.toString(); this.message = message.toString(); } MyObject.prototype.getName = function() { return this.name; }; MyObject.prototype.getMessage = function() { return this.message; }; åœ¨å‰é¢çš„ä¸¤ä¸ªç¤ºä¾‹ä¸­ï¼Œç»§æ‰¿çš„åŸå‹å¯ä»¥ä¸ºæ‰€æœ‰å¯¹è±¡å…±äº«ï¼Œä¸”ä¸å¿…åœ¨æ¯ä¸€æ¬¡åˆ›å»ºå¯¹è±¡æ—¶å®šä¹‰æ–¹æ³•ã€‚ æ€»ç»“æ„Ÿè°¢MDN-Web/JavaScript/Closuresè¿˜æœ‰è¿™ç¯‡æ–‡ç« stackoverflowã€‚æ•´ä½“çš„æŠŠè‡ªå·±ä¸€äº›é”™è¯¯çš„æƒ³æ³•ç¨å¾®ç»™çº æ­£äº†ï¼Œç„¶ååŠ æ·±äº†å¯¹é—­åŒ…çš„ç†è§£ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"ES6çš„ç®­å¤´å‡½æ•°å’Œå—çº§ä½œç”¨åŸŸ","slug":"ES6çš„ç®­å¤´å‡½æ•°å’Œå—çº§ä½œç”¨åŸŸ","date":"2016-05-24T10:59:05.000Z","updated":"2016-12-12T02:59:46.000Z","comments":true,"path":"2016/05/24/ES6çš„ç®­å¤´å‡½æ•°å’Œå—çº§ä½œç”¨åŸŸ/","link":"","permalink":"http://sevencai.github.io/2016/05/24/ES6çš„ç®­å¤´å‡½æ•°å’Œå—çº§ä½œç”¨åŸŸ/","excerpt":"","text":"æœ€è¿‘è¦å¥½å¥½å­¦ä¸‹ES6,ä¸‹æ–‡ä¸»è¦æ˜¯å¯¹ç®­å¤´å‡½æ•°å’Œconst,letçš„ç¨å¾®è¯¦ç»†ç‚¹çš„ç†è§£ã€‚é‡Œé¢æˆ‘ä¸»è¦çš„å­¦ä¹ æ–¹æ³•æ˜¯å†™å°ä¾‹å­ï¼Œç„¶åå»åˆ†æES6é€šè¿‡babelè½¬ç åæœ‰ä»€ä¹ˆåŒºåˆ«å’Œå’Œä¸¤è€…çš„å¯¹æ¯”ã€‚babelçš„ä½¿ç”¨å¯ä»¥çœ‹ä¸‹ï¼šbable installï¼Œè¿™é‡Œä¸æ¶‰åŠbabelçš„ä½¿ç”¨ã€‚ ç®­å¤´å‡½æ•°ï¼ˆArrow Functionsï¼‰ç®­å¤´å‡½æ•°æœ€å¥½çš„ä¸€ç‚¹å½“ç„¶æ˜¯ç®­å¤´å‡½æ•°preserve the context of this from its lexical scopeï¼Œä¿å­˜æˆ‘ä»¬ä¸Šä¸‹æ–‡ä½œç”¨åŸŸä¸­çš„thisçš„æŒ‡å‘ã€‚å› ä¸ºä¸€èˆ¬æˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°ä¸‹é¢è¿™äº›é—®é¢˜ï¼š 1234567891011function Person(name)&#123; this.name = name&#125;Person.prototype.add = function(arr)&#123; return arr.map(function(item)&#123; return this.name+item &#125;)&#125;var arr=['cld','seven']var person = new Person('n6303-')console.log(person.add(arr)) [ &#39;undefinedcld&#39;, &#39;undefinedseven&#39; ]ï¼Œæœ€åç»“æœæ˜¯è¿™ä¸ªã€‚å› ä¸ºå½“æˆ‘ä»¬ä½¿ç”¨nested functionsçš„æ—¶å€™ï¼Œthisçš„æŒ‡å‘ä¼šå‘ç”Ÿå˜åŒ–ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬æ²¡æœ‰ç®­å¤´å‡½æ•°ä»¥å‰ï¼Œæ˜¯è¿™æ ·è§£å†³çš„ï¼š 12345Person.prototype.add = function(arr)&#123; return arr.map(function(item)&#123; return this.name + item &#125;,this)&#125; æˆ–è€…æ˜¯é€šè¿‡bind,è¿™æ ·è§£å†³çš„ï¼š12345Person.prototype.add = function(arr)&#123; return arr.map(function(item)&#123; return this.name + item &#125;.bind(this))&#125; æˆ–è€…æ˜¯è¿™æ ·è§£å†³çš„ï¼Œé€šè¿‡ï¼šthat=this:123456Person.prototype.add = function(arr)&#123; var that = this return arr.map(function(item)&#123; return that.name + item &#125;)&#125; ä»¥ä¸Šä¸‰ç§æ–¹æ³•éƒ½èƒ½å¤Ÿè§£å†³ã€‚ä½†æ˜¯å½“æˆ‘ä»¬æœ‰äº†ç®­å¤´å‡½æ•°ï¼Œå°±æ›´åŠ å®¹æ˜“äº†ï¼š123Person.prototype.add = function(arr)&#123; return arr.map((item)=&gt;this.name+item)&#125; è€Œä¸”æœ€å¥½çš„å°±æ˜¯ç®­å¤´å‡½æ•°å¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½æ”¯æŒå•¦ã€‚è€Œä¸”å¯¹äºè¿”å›å€¼åªæœ‰ä¸€ä¸ªçš„æ—¶å€™ï¼Œç®­å¤´å‡½æ•°éå¸¸ç®€æ´ï¼Œæ¯”å¦‚ï¼š123var arr = [1,3,4]console.log(arr.map(function(item)&#123;return item*item&#125;))console.log(arr.map((item)=&gt;item*item)) é€šè¿‡babelè½¬ç åï¼Œç®­å¤´å‡½æ•°æ˜¯è¿™æ ·çš„,è·Ÿè‡ªå·±å†™çš„ä¸€æ ·ï¼š1console.log(arr.map(function(item)&#123;return item*item&#125;)) let and constletä¸varä¹‹å˜é‡æå‡çš„åŒºåˆ«ES6æ–°å¢äº†letå‘½ä»¤ï¼Œç”¨æ¥å£°æ˜å˜é‡ã€‚å®ƒçš„ç”¨æ³•ç±»ä¼¼äºvarï¼Œä½†æ˜¯æ‰€å£°æ˜çš„å˜é‡ï¼Œåªåœ¨letå‘½ä»¤æ‰€åœ¨çš„ä»£ç å—å†…æœ‰æ•ˆã€‚ç›¸å½“äºå¢åŠ äº†å—çº§ä½œç”¨åŸŸã€‚ å…ˆçœ‹ä¸‹ä¸‹é¢çš„è¾“å‡ºç»“æœï¼š1234567891011121314151617var global = \"global\"function test1(para)&#123; if(para)&#123; var global = \"inner\" return global &#125; return global&#125;function test2(para)&#123; if(para)&#123; let global = \"inner\" return global &#125; return global&#125;console.log(test1(false))console.log(test2(false)) ç»“æœåˆ†åˆ«æ˜¯ï¼šundefined,globalã€‚ç¬¬ä¸€ä¸ªæ˜¯å› ä¸ºvar æœ‰å˜é‡æå‡ï¼Œè€Œletæ²¡æœ‰å˜é‡æå‡ã€‚æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹å½“æˆ‘ä»¬é€šè¿‡babelç¼–è¯‘ä»¥åä¼šå¾—åˆ°ä»€ä¹ˆç»“æœï¼š123456789101112131415161718\"use strict\";var global = \"global\";function test1(para) &#123; if (para) &#123; var global = \"inner\"; return global; &#125; return global;&#125;function test2(para) &#123; if (para) &#123; var _global = \"inner\"; return _global; &#125; return global;&#125;console.log(test1(false));console.log(test2(false)); babelæŠŠæˆ‘ä»¬çš„letå˜æˆäº†var,å¹¶ä¸”æŠŠå˜é‡åç§°æ¢äº†ã€‚æ­£æ˜¯å› ä¸ºletä¸å­˜åœ¨å˜é‡æå‡ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆå£°æ˜å†ä½¿ç”¨ã€‚å¦åˆ™ä¼šæŠ¥é”™ï¼Œè€Œä¸æ˜¯è¾“å‡ºundefinedã€‚ å†æ¥çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š1234&#123; var a = 3; let b =4;&#125; ä¼šè¢«ç¼–è¯‘æˆä¸‹é¢è¿™æ ·ã€‚æ‰€ä»¥æœ€åä¼šæŠ¥é”™ã€‚å› ä¸ºæˆ‘ä»¬åœ¨å¤–éƒ¨æ‰“å°bçš„æ—¶å€™ï¼Œæ˜¯ReferenceError: b is not definedã€‚123456&#123; var a = 3; var _b = 4;&#125;console.log(a)console.log(b) letå’Œvaråœ¨é—­åŒ…ä¸­çš„ä½œç”¨ç”±äºiæ˜¯varå£°æ˜çš„ã€‚æ‰€ä»¥æ˜¯å…¨å±€å˜é‡ã€‚å…¨å±€èŒƒå›´å†…éƒ½æœ‰æ•ˆã€‚æ‰€ä»¥å½“æˆ‘ä»¬ä¸ç®¡æ˜¯è°ƒç”¨å“ªä¸€ä¸ªaï¼Œéƒ½æ˜¯è¾“å‡ºæœ€åä¸€ä¸ªi,ä¹Ÿå°±æ˜¯3ã€‚123456789101112131415var a = []for(var i=0;i&lt;4;i++)&#123; a[i] = function()&#123; console.log(i) &#125;&#125;a[2]()var b = []for(let i=0;i&lt;4;i++)&#123; b[i] = function()&#123; console.log(i) &#125;&#125;b[2]() æˆ‘çœ‹äº†ä¸‹babelç¼–è¯‘åçš„ç»“æœã€‚ç¼–è¯‘åå®ƒå¤„ç†çš„æ–¹æ³•æ˜¯æŠŠå‡½æ•°å£°æ˜æåˆ°äº†å¤–é¢ã€‚æˆ‘ä»¬é€šå¸¸ä¹Ÿå¯ä»¥ç”¨é‡Œé¢(function(i){})(i)è¿™ä¸­æ–¹æ³•ã€‚12345678910111213141516var a = [];for (var i = 0; i &lt; 4; i++) &#123; a[i] = function () &#123; console.log(i); &#125;;&#125;var b = [];var _loop = function _loop(_i) &#123; b[_i] = function () &#123; console.log(_i); &#125;;&#125;;for (var _i = 0; _i &lt; 4; _i++) &#123; _loop(_i);&#125; å¯æƒœäº†ï¼Œæˆ‘ç°åœ¨ç”¨è°·æ­Œæ¥æµ‹è¯•è¿˜æ˜¯ä¸èƒ½ç”¨ã€‚æœŸå¾…é‚£ä¹ˆä¸€å¤©ã€‚ç«ç‹è¿˜æ˜¯å¾ˆå¥½çš„ã€‚ letä¸å…è®¸é‡å¤å£°æ˜æˆ‘ä»¬ç”¨var çš„æ—¶å€™ï¼Œéƒ½å¯ä»¥ä¸€ç›´å°±é‡æ–°å£°æ˜ã€‚æƒ³é‡æ–°å£°æ˜å°±é‡æ–°å£°æ˜ã€‚ä½†æ˜¯letä¸å…è®¸åœ¨ç›¸åŒä½œç”¨åŸŸå†…ï¼Œé‡å¤å£°æ˜åŒä¸€ä¸ªå˜é‡ã€‚æ¯”å¦‚å…ˆvar a=1,å†let a=2ï¼Œè¿™æ˜¯ä¸è¡Œçš„ã€‚å†æ¯”å¦‚let a=1;let a=2è¿™ä¹Ÿæ˜¯ä¸è¡Œçš„ã€‚é‚£æ¯”å¦‚è¯´ï¼Œæˆ‘åœ¨ä¸€ä¸ªå‡½æ•°å†…ä¼ å…¥äº†ä¸€ä¸ªparam,æˆ‘ä»¬let param = otherå€¼ï¼Œè¿™ä¹Ÿæ˜¯ä¸è¡Œçš„ã€‚ä½†æ˜¯æ³¨æ„è¿™å‰æå®¤ç›¸åŒä½œç”¨åŸŸå¦‚æœæ˜¯ä¸åŒä½œç”¨åŸŸè‚¯å®šå°±æ˜¯å¯ä»¥äº†ï¼Œæ¯”å¦‚å…ˆlet a=1,ç„¶å{let a=1},è¿™æ ·å¼€è¾Ÿäº†ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸã€‚è‚¯å®šæ˜¯å¯ä»¥é‡å¤å£°æ˜çš„ã€‚å†…å±‚ä½œç”¨åŸŸå¯ä»¥å®šä¹‰å¤–å±‚ä½œç”¨åŸŸçš„åŒåå˜é‡ã€‚ 123456789101112131415function f() &#123; &#123; let x; &#123; // okay, block scoped name const x = \"sneaky\"; // error, const x = \"foo\"; &#125; // okay, declared with let x = \"bar\"; // error, already declared in block let x = \"inner\"; &#125;&#125; éœ€è¦å—çº§ä½œç”¨åŸŸletçš„åŸå›  ç”±äºvaræ˜¯å¯ä»¥éšæ—¶é‡æ–°å£°æ˜èµ‹å€¼çš„ï¼Œåˆå› ä¸ºæœ‰å˜é‡æå‡è¿™ä¹ˆå›äº‹ï¼Œæ‰€ä»¥ç»å¸¸å°±ä¼šå‡ºç°undefinedçš„é”™è¯¯ã€‚å†…éƒ¨å˜é‡è¦†ç›–äº†å¤–éƒ¨å˜é‡ã€‚ æ¶ˆé™¤åˆšæ‰æˆ‘ä»¬æåˆ°çš„ï¼Œç”±äºå¾ªç¯è®¡æ•°çš„åŸå› ï¼Œå¯¼è‡´äº†å˜é‡æ³„éœ²æˆäº†å…¨å±€å˜é‡ã€‚ æˆ‘åœ¨æƒ³æ˜¯ä¸æ˜¯å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨äº†{}è¿™ä¸ªçš„æ—¶å€™ï¼Œ{}å†…éƒ¨çš„å’Œ{}å¤–éƒ¨çš„å…ƒç´ å°±å½¢æˆäº†ä¸¤ä¸ªä¸åŒçš„å—çº§ä½œç”¨åŸŸã€‚æ— è®ºæ˜¯æˆ‘ä»¬ç›´æ¥{}è¿˜æ˜¯é€šè¿‡if(){}æˆ–è€…function(){}è¿™æ ·ã€‚æˆ‘ä¸çŸ¥é“æˆ‘è¿™æ ·æ€»ç»“çš„æ˜¯ä¸æ˜¯å¤ªç»å¯¹äº†ã€‚ æˆ‘ä»¬å…ˆå‰çš„æ˜¯ï¼šå†…éƒ¨ä½œç”¨åŸŸå¯ä»¥è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸã€‚å› ä¸ºä½œç”¨åŸŸé“¾çš„å­˜åœ¨ã€‚å¤–éƒ¨ä½œç”¨åŸŸä¸èƒ½è®¿é—®å†…éƒ¨ä½œç”¨åŸŸã€‚å› ä¸ºä½œç”¨åŸŸé“¾åªèƒ½å‘ä¸ŠæŸ¥æ‰¾ã€‚letçš„å‡ºç°å¹¶æ²¡æœ‰å½±å“è¿™ä¸€ç‚¹ã€‚ è€Œä¸”æ­£æ˜¯å› ä¸ºletçš„å‡ºç°ï¼Œä»¥åä¼°è®¡æˆ‘ä»¬çš„åŒ¿åå‡½æ•°ï¼ˆç”¨äºä¿æŠ¤å…¨å±€å˜é‡ï¼‰ç”¨çš„ä¹Ÿå°±ä¼šå°‘å¾ˆå¤šäº†ã€‚ 1234(function () &#123; var food = 'meat';&#125;());console.log(food); // Reference Error 1234&#123; let food = 'vegetables;&#125;console.log(food); // Reference Error constæ˜¯single-assignmentconstä¸æˆ‘ä»¬å…ˆå‰å­¦ä¹ åˆ«çš„è¯­è¨€ä¸€æ ·ï¼Œä»£è¡¨å¸¸é‡ï¼Œä¸€æ—¦èµ‹å€¼å°±ä¸å¯ä»¥æ”¹å˜ã€‚è¿™ä¹Ÿæ„å‘³ç€å¿…é¡»åœ¨å£°æ˜çš„æ—¶å€™èµ‹å€¼ï¼Œå¦åˆ™åé¢ä¸ç®¡å†æ€ä¹ˆèµ‹å€¼ï¼Œéƒ½æ˜¯é”™è¯¯çš„äº†ã€‚ è¿™åˆåŒ…æ‹¬ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯æ™®é€šæ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ç”¨use strict,è¿™ç§æƒ…å†µæ˜¯é‡æ–°èµ‹å€¼ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯å€¼æ˜¯ä¸ä¼šå˜çš„ï¼Œä¸€ç›´éƒ½æ˜¯ä½ æœ€å¼€å§‹èµ‹çš„åˆå€¼ã€‚ç¬¬äºŒç§æƒ…å†µæ˜¯ç”¨äº†use strickï¼Œè¿™ç§æƒ…å†µï¼Œæ˜¯ä¼šæŠ¥é”™çš„ã€‚ è¿˜æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼Œå°±æ˜¯constçš„ä½œç”¨åŸŸæ˜¯è·Ÿletä¸€æ ·ï¼Œåœ¨å½“å‰çš„å—çº§ä½œç”¨åŸŸé‡Œé¢çš„ã€‚å¤–éƒ¨ä½œç”¨åŸŸæ— æ³•è®¿é—®å½“å‰å®šä¹‰çš„constçš„ä½œç”¨åŸŸã€‚ å¹¶ä¸”constä¹Ÿæ˜¯ä¸å­˜åœ¨å˜é‡æå‡ã€‚è¿™æ˜¯ä¸ªå¥½äº‹ï¼Œè®©æˆ‘ä»¬å½¢æˆå…ˆå®šä¹‰ï¼Œå†ä½¿ç”¨çš„ä¹ æƒ¯ï¼Œå¹¶ä¸”ä¹Ÿå¯ä»¥æœ‰æ•ˆçš„é¿å…undefinedè¿™ç§æƒ…å†µå‘ç”Ÿã€‚ è¿˜æœ‰ä¸€ç‚¹ï¼Œæ˜¯æˆ‘ä»¥å‰æ²¡æœ‰æ³¨æ„åˆ°çš„ã€‚æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„è¿™ä¸ªä¹¦ã€‚çœŸæ£’ã€‚å°±æ˜¯å¦‚æœconstå®šä¹‰çš„å¸¸é‡æŒ‡å‘çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå®ƒå®é™…ä¸ŠæŒ‡å‘çš„æ˜¯å½“å‰å¯¹è±¡çš„åœ°å€ã€‚è¿™ä¸ªåœ°å€æ˜¯åœ¨æ ˆé‡Œé¢çš„ï¼Œè€Œè¿™ä¸ªçœŸå®çš„å¯¹è±¡æ˜¯åœ¨å †é‡Œé¢çš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä½¿ç”¨constå®šä¹‰è¿™ä¸ªå¯¹è±¡åï¼Œæ˜¯å¯ä»¥æ”¹å˜å¯¹è±¡çš„å†…å®¹çš„ã€‚ä½†æ˜¯è¿™ä¸ªåœ°å€æ˜¯ä¸å¯ä»¥å˜çš„ã€‚æ„æ€ä¹Ÿå°±æ˜¯ä¸å¯ä»¥ç»™è¿™ä¸ªå¯¹è±¡é‡æ–°èµ‹å€¼ï¼Œæ¯”å¦‚const foo={},foo = {},å³ä½¿æ˜¯è¿™æ ·fooå¥½åƒä»€ä¹ˆéƒ½æ²¡æœ‰æ”¹å˜ï¼Œä½†è¿˜æ˜¯é”™è¯¯çš„ã€‚ï¼ˆç„¶è€Œæˆ‘åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼Œå¹¶æ²¡æœ‰æŠ¥é”™ã€‚ã€‚ã€‚ï¼‰è€Œfoo.username=â€™cldâ€™,è¿™æ˜¯å®Œå…¨å¯ä»¥çš„ã€‚è¿™è·Ÿjavascriptå­˜å‚¨å¼•ç”¨å¯¹è±¡çš„å€¼çš„æ–¹å¼æœ‰å¯†åˆ‡çš„å…³ç³»ã€‚ 12345const obj = Object.freeze(&#123;&#125;)const b = &#123;&#125;obj.name = \"cld\"b.name = \"seven\" è¿™æ®µä»£ç ä¼šåœ¨babelä¸‹è½¬æˆè¿™æ ·ï¼š12345var obj = Object.freeze(&#123;&#125;);var b = &#123;&#125;;obj.name = \"cld\";b.name = \"seven\"; äº‹å®æ˜¯ä¸ç®¡æˆ‘ä»¬æ˜¯ä»¥const ç„¶åfreeze objectï¼Œæˆ–è€…æ˜¯ä¸freeze,babeléƒ½æ˜¯ä¼šæŠŠå®ƒè½¬æˆvarè¿™ç§å½¢åŠ¿ã€‚å› ä¸ºbabelæœ¬èº«çš„ä½œç”¨å°±æ˜¯transformæˆ‘ä»¬çš„es6çš„ä»£ç çš„ã€‚å½“ç„¶æˆ‘ä»¬è¿è¡Œçš„è¯ï¼Œä¼šæŠ¥é”™ï¼šTypeError: Can&#39;t add property name, object is not extensibleã€‚ åœ¨é˜®ä¸€å³°è€å¸ˆçš„ä¹¦é‡Œï¼Œæˆ‘çœ‹åˆ°äº†ä»–å†™çš„è¿™æ ·ä¸€å—ä»£ç ï¼š12345678var constantize = (obj) =&gt; &#123; Object.freeze(obj); Object.keys(obj).forEach( (key, value) =&gt; &#123; if ( typeof obj[key] === 'object' ) &#123; constantize( obj[key] ); &#125; &#125;);&#125;; çœ‹åˆ°äº†ä»¥åï¼Œçœ¼ç›äº®äº†ï¼Œå› ä¸ºè®°å¾—å‰1ï¼Œ2ä¸ªæœˆé¢è¯•çš„æ—¶å€™ï¼Œæœ‰ä¸ªé¢è¯•å®˜é—®æˆ‘ï¼ŒçŸ¥ä¸çŸ¥é“æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥ç›´æ¥è·å¾—æ‰€æœ‰objçš„keyå€¼ã€‚æˆ‘ç¡®å®æ²¡ç”¨è¿‡jsé‡Œçš„è¿™ä¸ªï¼ŒåªçŸ¥é“phpé‡Œé¢æœ‰ç±»ä¼¼çš„å‡½æ•°æ˜¯array_keys(),åæ¥ä¸‹å»æŸ¥ï¼Œä¹Ÿæ²¡æŸ¥åˆ°ã€‚å°±ä¸€ç›´è®°åœ¨å¿ƒé‡Œã€‚ä»Šå¤©ä¸€çœ‹è¿™æ®µä»£ç å°±çŸ¥é“äº†æ˜¯Object.keys()ï¼ŒçœŸå¥½ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªæµ‹è¯•ï¼š 12345678var obj = &#123;'username':['name1','name2'],'password':'seven'&#125;console.log(Object.keys(obj))Object.keys(obj).forEach(function(key,value)&#123; if(typeof obj[key] == 'object')&#123; console.log(obj[key]) &#125;&#125;) æ‰“å°ç»“æœæ˜¯ï¼š[ â€˜usernameâ€™, â€˜passwordâ€™ ][ â€˜name1â€™, â€˜name2â€™ ] æœ‰ç‚¹åé¢˜äº†ã€‚ä¸Šé¢æˆ‘çš„é‚£æ®µé˜®ä¸€å³°è€å¸ˆçš„ä»£ç æ˜¯ä¸ºäº†è®©é™¤äº†å°†å¯¹è±¡æœ¬èº«å†»ç»“ï¼Œå¯¹è±¡çš„å±æ€§ä¹Ÿå†»ç»“ã€‚ ç„¶åçœ‹ä¸‹babelè½¬ç åï¼Œä¼šå¾—åˆ°å•¥æ ·çš„ç»“æœï¼š12345678var constanize = function constanize(obj) &#123; Object.freeze(obj); Object.keys(obj).forEach(function (key, value) &#123; if (_typeof(obj[key]) == 'object') &#123; constanize(obj[key]); &#125; &#125;);&#125;; babelæŠŠç®­å¤´å‡½æ•°ç»™è½¬äº†ï¼Œç„¶ååŠ äº†å¼•å·ã€‚ä½†æ˜¯typeofå‰é¢åŠ _ä¸‹åˆ’çº¿æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘çŸ¥é“ä¸€èˆ¬æ¥è¯´åŠ ä¸‹åˆ’çº¿çš„å˜é‡ä¸ºç§æœ‰å˜é‡ã€‚ã€‚ï¼Ÿï¼Ÿ è¿˜æœ‰å°±æ˜¯åŠ å…¥letåï¼Œå°±ç®—letæ˜¯åœ¨windowç¯å¢ƒä¸‹å£°æ˜çš„ã€‚é€šè¿‡letå®šä¹‰çš„å±æ€§ï¼Œä¹Ÿä¸èƒ½é€šè¿‡windowè·å¾—ã€‚varå£°æ˜çš„å¯ä»¥é€šè¿‡windowå¯¹è±¡è·å¾—ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"ES6","slug":"ES6","permalink":"http://sevencai.github.io/tags/ES6/"}]},{"title":"ç”¨nodeå†™å°çˆ¬è™«","slug":"ç”¨nodeå†™å°çˆ¬è™«","date":"2016-05-22T15:55:58.000Z","updated":"2017-12-19T12:40:23.000Z","comments":true,"path":"2016/05/22/ç”¨nodeå†™å°çˆ¬è™«/","link":"","permalink":"http://sevencai.github.io/2016/05/22/ç”¨nodeå†™å°çˆ¬è™«/","excerpt":"","text":"å…ˆå‰æœ‰ç”¨phpå†™è¿‡å°çˆ¬è™«ï¼Œå…¶å®æœ¬è´¨å°±æ˜¯è·å–åˆ°ç½‘é¡µä¸­çš„Domç»“æ„ï¼Œç„¶ååˆ†æé‡Œé¢çš„å…ƒç´ ï¼Œæå–å‡ºè‡ªå·±æƒ³è¦çš„ä¸œè¥¿ã€‚æœ€è¿‘æƒ³æ‰¾ä¸œè¥¿ç»ƒç»ƒnode,å°±æƒ³åˆ°ç”¨nodeåšå°çˆ¬è™«ã€‚å»çœ‹äº†çœ‹æ…•è¯¾ç½‘scottè€å¸ˆè®²çš„ã€‚æ„Ÿè§‰å¾ˆæ£’ï¼Œå­¦åˆ°äº†ä¸å°‘ä¸œè¥¿ã€‚è‡ªå·±è·Ÿç€åšäº†ä¸€ç¯‡ï¼Œçˆ¬äº†ä¸‹æ…•è¯¾ç½‘çš„è¯¾ç¨‹ã€‚æ˜å¤©å‡†å¤‡å†å»å†™ä¸€ä¸ªè„šæœ¬çˆ¬è‡ªå·±åšå®¢ã€‚ä¸‹é¢æ˜¯å­¦åˆ°ä¸œè¥¿çš„æ€»ç»“ã€‚æ„Ÿè°¢scottè€å¸ˆã€‚ åŒ…æ¨¡å—çš„é€‰æ‹©è¿™é‡Œé™¤äº†httpæ ¸å¿ƒæ¨¡å—å¤–ï¼Œè¿˜ç”¨åˆ°äº†bluebirdå’Œcheerioï¼Œè¿™ä¸¤ä¸ªæ¨¡å—ã€‚bluebirdå°è£…äº†promise,å¯ä»¥å¼‚æ­¥æ¥è°ƒç”¨ã€‚cheerioåˆ™æ˜¯å¯ä»¥è®©æˆ‘ä»¬æ›´æ–¹ä¾¿çš„æ“ä½œDom,å°±å¯ä»¥åƒjqueryä¸€æ ·æ¥æ“ä½œDomã€‚æˆ‘ä»¬çš„ç›®çš„æ˜¯ï¼Œåˆ†ædomç»“æ„ï¼Œç„¶åæ“ä½œdomèŠ‚ç‚¹ï¼Œè·å–æˆ‘ä»¬æƒ³è¦çš„ï¼Œå¹¶ä¸”æ‹¼æ¥æˆä¸‹é¢çš„æ•°ç»„ï¼š 12345678910var coursesData = &#123; title:title, number:number, videos:[ title:title, videos:[ ] ]&#125; ç›´æ¥ä¸Šä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111var http = require('http')var Promise = require('bluebird')var cheerio = require('cheerio')var baseUrl = 'http://www.imooc.com/learn/'var videoIds = [348,259,197,134,75]function filterChapter(data)&#123; var $ = cheerio.load(data) var title = $('#main .w .path span').text() var number = parseInt($($('.statics .static-item')[2]).find('strong').text().trim(),10) var chapters = $('.chapter') var chapterCourses = [] var courseData = &#123; title:title, number:number, videos:[] &#125; //æ¯ä¸€ä¸ªç« èŠ‚çš„æ ‡é¢˜å’Œè§†é¢‘,è¿™é‡ŒæŠŠå£°æ˜æ”¾åœ¨å¤–é¢ï¼Œæˆ–è®¸ä¼šæ›´å¥½ var chapter; var chapterTitle = \"\" var chapterVideos = [] chapters.each(function(item)&#123; chapter = $(this) chapterTitle = chapter.find('strong').text() chapterVideos = chapter.find('.video').children('li') chapterCourses = &#123; chapterTitle:chapterTitle, chapterVideos:[] &#125; chapterVideos.each(function(item)&#123; var video = $(this).find('.studyvideo') var videoTitle = video.text() var id = video.attr('href').split('/')[1] chapterCourses.chapterVideos.push(&#123; title:videoTitle, id:id &#125;) &#125;) courseData.videos.push(chapterCourses) &#125;) return courseData&#125;//æ‰“å°æ•°ç»„function printChapter(coursesData)&#123; coursesData.forEach(function(courseData)&#123; //console.log(courseData) console.log(courseData.number + 'ä¸ªäººå­¦è¿‡ ' + courseData.title+' \\n') &#125;) coursesData.forEach(function(courseData)&#123; console.log(courseData.title+\"###\"+\"\\n\") courseData.videos.forEach(function(item)&#123; var chapterTitle = item.chapterTitle console.log(chapterTitle+'\\n') item.chapterVideos.forEach(function(video) &#123; console.log(' ['+video.id+']'+video.title + '\\n') &#125;) &#125;) &#125;)&#125;//é€šè¿‡promiseçš„resolveå’Œrejectè¿”å›promisefunction getPageAsync(url)&#123; return new Promise(function(resolve,reject)&#123; http.get(url,function(res)&#123; var html = \"\"; res.on('data',function(data)&#123; html += data &#125;) res.on('end',function()&#123; resolve(html) &#125;) &#125;).on('error',function(e)&#123; reject(e) console.log('è·å–å¤±è´¥') &#125;) &#125;)&#125;var fetchCourseArr = []videoIds.forEach(function(id)&#123; console.log('å¼€å§‹çˆ¬å–ç½‘ç«™'+baseUrl+id) fetchCourseArr.push(getPageAsync(baseUrl + id))&#125;)//promiseçš„æ–¹æ³•allå’ŒthenPromise.all(fetchCourseArr) .then(function(pages)&#123; var coursesData = [] pages.forEach(function(html)&#123; var courses = filterChapter(html) coursesData.push(courses) &#125;) coursesData.sort(function(a,b)&#123; return a.number-b.number; &#125;) printChapter(coursesData) &#125;) ä¸­é—´æ”¶è·ç”¨requestå‘èµ·è¯·æ±‚å¦‚ä½•ç”¨nodeä¼ªé€ ä¸€ä¸ªè¯·æ±‚ã€‚æ¯”å¦‚å°±åœ¨æœ¬åœ°æäº¤è¯„è®ºåˆ°æ…•è¯¾ç½‘? æ³¨æ„è¿™é‡Œçš„headerså¯ä»¥ç›´æ¥å…ˆå»è¯„è®ºä¸€ä¸ªï¼Œå»çœ‹çœ‹è¯·æ±‚headersï¼Œç„¶åå¤åˆ¶è¿‡æ¥å°±å¯ä»¥å•¦ã€‚ ä¸­é—´æœ‰ä¸ªé”™è¯¯ã€‚querystringéƒ½æ˜¯å°å†™ã€‚è™½ç„¶å®˜æ–¹æ–‡æ¡£ä»‹ç»å®ƒçš„æ—¶å€™æ˜¯queryStringã€‚è¿™ä¸ªåœ°æ–¹è¦æ³¨æ„äº†ã€‚ç„¶åå¯ä»¥ç”¨requestæ–¹æ³•å‘èµ·ä¸€ä¸ªè¯·æ±‚ã€‚ç„¶åæœ€åæŠŠæ•°æ®postè¿‡å»å°±å¯ä»¥äº†ã€‚Cookieé‚£ä¸ªåœ°æ–¹è¦ç”¨æœ¬åœ°cookie. 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849var http = require('http')var querystring = require('querystring')var postData = querystring.stringify(&#123; 'content':'è€å¸ˆä½ çœŸå¸…,æµ‹è¯•', 'cid':348&#125;)var options = &#123; hostname:'www.imooc.com', port:80, path:'/course/docomment', method:'POST', headers:&#123; 'Accept':'application/json, text/javascript, */*; q=0.01', 'Accept-Encoding':'gzip, deflate', 'Accept-Language':'zh-CN,zh;q=0.8', 'Connection':'keep-alive', 'Content-Length':82, 'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8', 'Cookie':'......', 'Host':'www.imooc.com', 'Origin':'http://www.imooc.com', 'Referer':'http://www.imooc.com/comment/348', 'User-Agent':'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Ubuntu Chromium/40.0.2214.111 Chrome/40.0.2214.111 Safari/537.36', 'X-Requested-With':'XMLHttpRequest' &#125;&#125;var req = http.request(options,function(res)&#123; console.log('res statecode'+res.statusCode) console.log('res headers'+ JSON.stringify(res.headers)) res.on('data',function(chunk)&#123; console.log(Buffer.isBuffer(chunk)) console.log(typeof chunk) &#125;) res.on('end',function()&#123; console.log('è¯„è®ºå®Œæ¯•') &#125;) res.on('error',function(e)&#123; console.log('è¯„è®ºå‡ºç°é”™è¯¯'+e.message()) &#125;)&#125;)req.write(postData)req.end() è¿™ä¸­é—´åˆå‡ºäº†ä¸ªé”™ï¼Œå°±æ˜¯content-lengthå’Œpostè¿‡å»çš„æ•°æ®é•¿åº¦ä¸ä¸€è‡´ã€‚å¯¼è‡´socket hang upè§£å†³æ–¹æ³•å°±æ˜¯æ”¹é•¿åº¦å•¦ã€‚ å…³äºpromisepromiseçš„è¯ï¼Œnodeæ–°ç‰ˆæœ¬æ˜¯å·²ç»å½“æˆæ ¸å¿ƒæ¨¡å—äº†ã€‚ä½†æ˜¯å¦‚æœæ˜¯æ—§ç‰ˆæœ¬å°±å¯ä»¥ç”¨bluebirdè¿™äº›ä¸œè¥¿ã€‚ç„¶åå†çœ‹çœ‹promiseæœ‰å“ªé‡Œå¥½ã€‚ä»£ç æˆ–è®¸å¯ä»¥è§£é‡Šå¥½å¤šã€‚ä¸‹é¢æ˜¯ä¸‰ä¸ªå°çƒã€‚æˆ‘ä»¬è®©ä»–ä»¬ä¸€ä¸ªæ¥ç€ä¸€ä¸ªäº§ç”ŸåŠ¨ç”»ã€‚ çœ‹ä¸‹domç»“æ„ï¼š12345678910111213141516171819202122&lt;style&gt; .box&#123; width:30px; height:30px; -webkit-border-radius:50%; -moz-border-radius:50%; border-radius:50%; &#125; .box1&#123; background:red; &#125; .box2&#123; background:yellow; &#125; .box3&#123; background:blue; &#125;&lt;/style&gt;&lt;div class=\"box box1\" style=\"margin-left:0px\"&gt;&lt;/div&gt;&lt;div class=\"box box2\" style=\"margin-left:0px\"&gt;&lt;/div&gt;&lt;div class=\"box box3\" style=\"margin-left:0px\"&gt;&lt;/div&gt; æ²¡ç”¨promiseä¹‹å‰ï¼ŒcallbackåµŒå¥—ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738&lt;script src=\"node_modules/bluebird/js/browser/bluebird.js\"&gt;&lt;/script&gt;&lt;script&gt; var box1 = document.querySelector(\".box1\"); var box2 = document.querySelector(\".box2\"); var box3 = document.querySelector(\".box3\"); function animate(ball,distance,callback)&#123; setTimeout(function()&#123; var marginLeft = parseInt(ball.style.marginLeft,10); if(marginLeft === distance)&#123; callback &amp;&amp; callback(); &#125;else&#123; if(marginLeft&lt;distance)&#123; marginLeft++; &#125;else&#123; marginLeft--; &#125; console.log(marginLeft); ball.style.marginLeft = marginLeft + \"px\"; animate(ball,distance,callback); &#125; &#125;,13) &#125; animate(box1,100,function()&#123; animate(box2,200,function()&#123; animate(box3,300,function()&#123; animate(box3,150,function()&#123; animate(box2,150,function()&#123; animate(box1,150,function()&#123; console.log(\"animate done\"); &#125;) &#125;) &#125;) &#125;) &#125;) &#125;)&lt;/script&gt; ç”¨äº†promiseåï¼Œä¹Ÿæ˜¯å¼‚æ­¥è°ƒç”¨ï¼Œä½†æ˜¯ç¡®å®åŒæ­¥ç¼–å†™ã€‚æ˜¯ä¸æ˜¯çœ‹ç€å¾ˆå¥½ï¼Ÿ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051&lt;!DOCTYPE html&gt; &lt;script src=\"node_modules/bluebird/js/browser/bluebird.js\"&gt;&lt;/script&gt; &lt;script&gt; var box1 = document.querySelector(\".box1\"); var box2 = document.querySelector(\".box2\"); var box3 = document.querySelector(\".box3\"); var Promise = window.Promise; function promiseAnimate(ball,distance)&#123; return new Promise(function(resolve,reject)&#123; function _animate()&#123; setTimeout(function()&#123; var marginLeft = parseInt(ball.style.marginLeft,10); if(marginLeft === distance)&#123; resolve(); &#125;else&#123; if(marginLeft&lt;distance)&#123; marginLeft++; &#125;else&#123; marginLeft--; &#125; ball.style.marginLeft = marginLeft + \"px\"; _animate(); &#125; &#125;,5) &#125; _animate(); &#125;) &#125; promiseAnimate(box1,100) .then(function()&#123; return promiseAnimate(box2,200); &#125;) .then(function()&#123; return promiseAnimate(box3,300); &#125;) .then(function()&#123; return promiseAnimate(box3,150); &#125;) .then(function()&#123; return promiseAnimate(box2,150); &#125;) .then(function()&#123; return promiseAnimate(box1,150); &#125;); &lt;/script&gt; å®˜ç½‘ä¸Šå…³äºpromiseæœ‰ä¸ªä¾‹å­,é‡Œé¢æˆ‘çœ‹åˆ°äº†è¿™ä¸ªinsertAdjacentHTMLï¼Œè§‰å¾—å¥½æ£’ã€‚å¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½æ”¯æŒäº†ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445&lt;script&gt; 'use strict'; var promiseCount = 0; function testPromise() &#123; var thisPromiseCount = ++promiseCount; var log = document.getElementById('log'); log.insertAdjacentHTML('beforeend', thisPromiseCount + ') Started (&lt;small&gt;Sync code started&lt;/small&gt;)&lt;br/&gt;'); // We make a new promise: we promise a numeric count of this promise, starting from 1 (after waiting 3s) var p1 = new Promise( // The resolver function is called with the ability to resolve or // reject the promise function(resolve, reject) &#123; log.insertAdjacentHTML('beforeend', thisPromiseCount + ') Promise started (&lt;small&gt;Async code started&lt;/small&gt;)&lt;br/&gt;'); // This is only an example to create asynchronism window.setTimeout( function() &#123; // We fulfill the promise ! resolve(thisPromiseCount); &#125;, Math.random() * 2000 + 1000); &#125; ); // We define what to do when the promise is resolved/fulfilled with the then() call, // and the catch() method defines what to do if the promise is rejected. p1.then( // Log the fulfillment value function(val) &#123; log.insertAdjacentHTML('beforeend', val + ') Promise fulfilled (&lt;small&gt;Async code terminated&lt;/small&gt;)&lt;br/&gt;'); &#125;) .catch( // Log the rejection reason function(reason) &#123; console.log('Handle rejected promise ('+reason+') here.'); &#125;); log.insertAdjacentHTML('beforeend', thisPromiseCount + ') Promise made (&lt;small&gt;Sync code terminated&lt;/small&gt;)&lt;br/&gt;'); &#125;&lt;/script&gt; æ€»ç»“è§‰å¾—å­¦åˆ°æŒºå¤šä¸œè¥¿çš„ã€‚å…¶å®æ„Ÿè§‰nodeä¸çŸ¥é“æ€ä¹ˆå…¥æ‰‹,ä¹¦ä¹Ÿä¸çŸ¥é“çœ‹å•¥å¥½ï¼Œæœ‰ç‚¹è¿·èŒ«ã€‚æœ‰çœ‹ä¸€äº›nodeä¹¦ï¼Œæ„Ÿè§‰å¤§éƒ¨åˆ†éƒ½æ˜¯è®²è¯­æ³•å’ŒAPIï¼Œè¿˜æ˜¯å¤šåšç‚¹ä¸œè¥¿ï¼Œå®è·µä¸­å­¦ä¹ ï¼Œå¿ƒé‡Œç¨å¾®è¸å®ç‚¹ã€‚å†æ¬¡è°¢è°¢scottè€å¸ˆã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"http://sevencai.github.io/tags/Nodejs/"}]},{"title":"é˜²ç«å¢™ç®€å•çŸ¥è¯†","slug":"é˜²ç«å¢™ç®€å•çŸ¥è¯†","date":"2016-05-19T03:00:15.000Z","updated":"2019-01-22T12:37:01.000Z","comments":true,"path":"2016/05/19/é˜²ç«å¢™ç®€å•çŸ¥è¯†/","link":"","permalink":"http://sevencai.github.io/2016/05/19/é˜²ç«å¢™ç®€å•çŸ¥è¯†/","excerpt":"","text":"æˆ‘æœäº†ä¸‹ï¼Œé˜²ç«å¢™å¤§æ¦‚å¼ è¿™ä¸ªæ ·å­ï¼Œä»¥å‰è¿˜ä»¥ä¸ºæ˜¯ä¸ªå¾ˆå¤§çš„ä¸œè¥¿ï¼Œæ²¡æƒ³åˆ°å°±æ˜¯è¿™æ ·ä¸€ä¸ªå°æœºå™¨ï¼Œæ¶¨è§è¯†ã€‚ è¿™ç¯‡æ–‡ç« è®²è§£ä¸€äº›å…³äºé˜²ç«å¢™çš„çŸ¥è¯†ã€‚ç®—æ˜¯è§£å†³æˆ‘çš„ä¸€äº›ç–‘æƒ‘ã€‚è®°å½•æ•´ç†å¦‚ä¸‹ï¼š é˜²ç«å¢™æ˜¯å•¥é˜²ç«å¢™çš„æœ¬ä¹‰åŸæ˜¯æŒ‡å¤ä»£äººä»¬æˆ¿å±‹ä¹‹é—´ä¿®å»ºçš„å¢™ï¼Œè¿™é“å¢™å¯ä»¥é˜²æ­¢ç«ç¾å‘ç”Ÿçš„æ—¶å€™è”“å»¶åˆ°åˆ«çš„æˆ¿å±‹ã€‚ ä½†å’±ä»¬è¿™é‡Œæ‰€è¯´çš„é˜²ç«å¢™ä¸æ˜¯æŒ‡ä¸ºäº†é˜²ç«è€Œé€ çš„å¢™ï¼Œè€Œæ˜¯æŒ‡éš”ç¦»åœ¨æœ¬åœ°ç½‘ç»œä¸å¤–ç•Œç½‘ç»œä¹‹é—´çš„ä¸€é“é˜²å¾¡ç³»ç»Ÿã€‚é˜²ç«å¢™æ˜¯ä¸€ç§éå¸¸æœ‰æ•ˆçš„ç½‘ç»œå®‰å…¨ç³»ç»Ÿï¼Œé€šè¿‡å®ƒå¯ä»¥éš”ç¦»é£é™©åŒºåŸŸï¼ˆInternetæˆ–æœ‰ä¸€å®šé£é™©çš„ç½‘ç»œï¼‰ä¸å®‰å…¨åŒºåŸŸï¼ˆå±€åŸŸç½‘ï¼‰çš„è¿æ¥ï¼ŒåŒæ—¶ä¸ä¼šå¦¨ç¢å®‰å…¨åŒºåŸŸå¯¹é£é™©åŒºåŸŸçš„è®¿é—®ã€‚å®ƒå®é™…ä¸Šæ˜¯ä¸€ç§éš”ç¦»æŠ€æœ¯ã€‚ æ‰€è°“é˜²ç«å¢™æŒ‡çš„æ˜¯ä¸€ä¸ªç”±è½¯ä»¶å’Œç¡¬ä»¶è®¾å¤‡ç»„åˆè€Œæˆã€åœ¨å†…éƒ¨ç½‘å’Œå¤–éƒ¨ç½‘ä¹‹é—´ã€ä¸“ç”¨ç½‘ä¸å…¬å…±ç½‘ä¹‹é—´çš„ç•Œé¢ä¸Šæ„é€ çš„ä¿æŠ¤å±éšœ.æ˜¯ä¸€ç§è·å–å®‰å…¨æ€§æ–¹æ³•çš„å½¢è±¡è¯´æ³•ï¼Œå®ƒæ˜¯ä¸€ç§è®¡ç®—æœºç¡¬ä»¶å’Œè½¯ä»¶çš„ç»“åˆï¼Œä½¿Internetä¸Intranetä¹‹é—´å»ºç«‹èµ·ä¸€ä¸ªå®‰å…¨ç½‘å…³ï¼ˆSecurity Gatewayï¼‰ï¼Œä»è€Œä¿æŠ¤å†…éƒ¨ç½‘å…å—éæ³•ç”¨æˆ·çš„ä¾µå…¥ï¼Œé˜²ç«å¢™ä¸»è¦ç”±æœåŠ¡è®¿é—®è§„åˆ™ã€éªŒè¯å·¥å…·ã€åŒ…è¿‡æ»¤å’Œåº”ç”¨ç½‘å…³4ä¸ªéƒ¨åˆ†ç»„æˆï¼Œé˜²ç«å¢™å°±æ˜¯ä¸€ä¸ªä½äºè®¡ç®—æœºå’Œå®ƒæ‰€è¿æ¥çš„ç½‘ç»œä¹‹é—´çš„è½¯ä»¶æˆ–ç¡¬ä»¶ã€‚è¯¥è®¡ç®—æœºæµå…¥æµå‡ºçš„æ‰€æœ‰ç½‘ç»œé€šä¿¡å’Œæ•°æ®åŒ…å‡è¦ç»è¿‡æ­¤é˜²ç«å¢™ã€‚-from wiki é˜²ç«å¢™çš„åŠŸèƒ½é˜²ç«å¢™ä¸€èˆ¬æœ‰ä¸‹åˆ—çš„åŠŸèƒ½ï¼š å¯ä»¥é™åˆ¶æœªæˆæƒçš„ç”¨æˆ·è¿›å…¥å†…éƒ¨ç½‘ç»œï¼Œè¿‡æ»¤æ‰ä¸å®‰å…¨çš„æœåŠ¡å’Œéæ³•ç”¨æˆ· é˜²æ­¢å…¥ä¾µè€…æ¥è¿‘ç½‘ç»œé˜²å¾¡è®¾æ–½ é™åˆ¶å†…éƒ¨ç”¨æˆ·è®¿é—®ç‰¹æ®Šç«™ç‚¹ å¯¹ç½‘ç»œå­˜å–å’Œè®¿é—®è¿›è¡Œç›‘æ§å®¡è®¡ ä¸€ä¸ªé˜²ç«å¢™ï¼ˆä½œä¸ºé˜»å¡ç‚¹ã€æ§åˆ¶ç‚¹ï¼‰èƒ½æå¤§åœ°æé«˜ä¸€ä¸ªå†…éƒ¨ç½‘ç»œçš„å®‰å…¨æ€§ï¼Œå¹¶é€šè¿‡è¿‡æ»¤ä¸å®‰å…¨çš„æœåŠ¡è€Œé™ä½é£é™©ã€‚ç”±äºåªæœ‰ç»è¿‡ç²¾å¿ƒé€‰æ‹©çš„åº”ç”¨åè®®æ‰èƒ½é€šè¿‡é˜²ç«å¢™ï¼Œæ‰€ä»¥ç½‘ç»œç¯å¢ƒå˜å¾—æ›´å®‰å…¨ã€‚å¦‚é˜²ç«å¢™å¯ä»¥ç¦æ­¢è¯¸å¦‚ä¼—æ‰€å‘¨çŸ¥çš„ä¸å®‰å…¨çš„NFSåè®®è¿›å‡ºå—ä¿æŠ¤ç½‘ç»œï¼Œè¿™æ ·å¤–éƒ¨çš„æ”»å‡»è€…å°±ä¸å¯èƒ½åˆ©ç”¨è¿™äº›è„†å¼±çš„åè®®æ¥æ”»å‡»å†…éƒ¨ç½‘ç»œã€‚é˜²ç«å¢™åŒæ—¶å¯ä»¥ä¿æŠ¤ç½‘ç»œå…å—åŸºäºè·¯ç”±çš„æ”»å‡»ï¼Œå¦‚IPé€‰é¡¹ä¸­çš„æºè·¯ç”±æ”»å‡»å’ŒICMPé‡å®šå‘ä¸­çš„é‡å®šå‘è·¯å¾„ã€‚é˜²ç«å¢™åº”è¯¥å¯ä»¥æ‹’ç»æ‰€æœ‰ä»¥ä¸Šç±»å‹æ”»å‡»çš„æŠ¥æ–‡å¹¶é€šçŸ¥é˜²ç«å¢™ç®¡ç†å‘˜ã€‚ é€šè¿‡ä»¥é˜²ç«å¢™ä¸ºä¸­å¿ƒçš„å®‰å…¨æ–¹æ¡ˆé…ç½®ï¼Œèƒ½å°†æ‰€æœ‰å®‰å…¨è½¯ä»¶ï¼ˆå¦‚å£ä»¤ã€åŠ å¯†ã€èº«ä»½è®¤è¯ã€å®¡è®¡ç­‰ï¼‰é…ç½®åœ¨é˜²ç«å¢™ä¸Šã€‚ä¸å°†ç½‘ç»œå®‰å…¨é—®é¢˜åˆ†æ•£åˆ°å„ä¸ªä¸»æœºä¸Šç›¸æ¯”ï¼Œé˜²ç«å¢™çš„é›†ä¸­å®‰å…¨ç®¡ç†æ›´ç»æµã€‚ä¾‹å¦‚åœ¨ç½‘ç»œè®¿é—®æ—¶ï¼Œä¸€æ¬¡ä¸€å¯†å£ä»¤ç³»ç»Ÿå’Œå…¶å®ƒçš„èº«ä»½è®¤è¯ç³»ç»Ÿå®Œå…¨å¯ä»¥ä¸å¿…åˆ†æ•£åœ¨å„ä¸ªä¸»æœºä¸Šï¼Œè€Œé›†ä¸­åœ¨é˜²ç«å¢™ä¸€èº«ä¸Šã€‚ å¦‚æœæ‰€æœ‰çš„è®¿é—®éƒ½ç»è¿‡é˜²ç«å¢™ï¼Œé‚£ä¹ˆé˜²ç«å¢™å°±èƒ½è®°å½•ä¸‹è¿™äº›è®¿é—®å¹¶ä½œå‡ºæ—¥å¿—è®°å½•ï¼ŒåŒæ—¶ä¹Ÿèƒ½æä¾›ç½‘ç»œä½¿ç”¨æƒ…å†µçš„ç»Ÿè®¡æ•°æ®ã€‚å½“å‘ç”Ÿå¯ç–‘åŠ¨ä½œæ—¶ï¼Œé˜²ç«å¢™èƒ½è¿›è¡Œé€‚å½“çš„æŠ¥è­¦ï¼Œå¹¶æä¾›ç½‘ç»œæ˜¯å¦å—åˆ°ç›‘æµ‹å’Œæ”»å‡»çš„è¯¦ç»†ä¿¡æ¯ã€‚å¦å¤–ï¼Œæ”¶é›†ä¸€ä¸ªç½‘ç»œçš„ä½¿ç”¨å’Œè¯¯ç”¨æƒ…å†µä¹Ÿæ˜¯éå¸¸é‡è¦çš„ã€‚é¦–å…ˆçš„ç†ç”±æ˜¯å¯ä»¥æ¸…æ¥šé˜²ç«å¢™æ˜¯å¦èƒ½å¤ŸæŠµæŒ¡æ”»å‡»è€…çš„æ¢æµ‹å’Œæ”»å‡»ï¼Œå¹¶ä¸”æ¸…æ¥šé˜²ç«å¢™çš„æ§åˆ¶æ˜¯å¦å……è¶³ã€‚è€Œç½‘ç»œä½¿ç”¨ç»Ÿè®¡å¯¹ç½‘ç»œéœ€æ±‚åˆ†æå’Œå¨èƒåˆ†æç­‰è€Œè¨€ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ã€‚ é€šè¿‡åˆ©ç”¨é˜²ç«å¢™å¯¹å†…éƒ¨ç½‘ç»œçš„åˆ’åˆ†ï¼Œå¯å®ç°å†…éƒ¨ç½‘é‡ç‚¹ç½‘æ®µçš„éš”ç¦»ï¼Œä»è€Œé™åˆ¶äº†å±€éƒ¨é‡ç‚¹æˆ–æ•æ„Ÿç½‘ç»œå®‰å…¨é—®é¢˜å¯¹å…¨å±€ç½‘ç»œé€ æˆçš„å½±å“ã€‚å†è€…ï¼Œéšç§æ˜¯å†…éƒ¨ç½‘ç»œéå¸¸å…³å¿ƒçš„é—®é¢˜ï¼Œä¸€ä¸ªå†…éƒ¨ç½‘ç»œä¸­ä¸å¼•äººæ³¨æ„çš„ç»†èŠ‚å¯èƒ½åŒ…å«äº†æœ‰å…³å®‰å…¨çš„çº¿ç´¢è€Œå¼•èµ·å¤–éƒ¨æ”»å‡»è€…çš„å…´è¶£ï¼Œç”šè‡³å› æ­¤è€Œæš´æ¼äº†å†…éƒ¨ç½‘ç»œçš„æŸäº›å®‰å…¨æ¼æ´ã€‚ä½¿ç”¨é˜²ç«å¢™å°±å¯ä»¥éšè”½é‚£äº›é€æ¼å†…éƒ¨ç»†èŠ‚å¦‚Fingerï¼ŒDNSç­‰æœåŠ¡ã€‚Fingeræ˜¾ç¤ºäº†ä¸»æœºçš„æ‰€æœ‰ç”¨æˆ·çš„æ³¨å†Œåã€çœŸåï¼Œæœ€åç™»å½•æ—¶é—´å’Œä½¿ç”¨shellç±»å‹ç­‰ã€‚ä½†æ˜¯Fingeræ˜¾ç¤ºçš„ä¿¡æ¯éå¸¸å®¹æ˜“è¢«æ”»å‡»è€…æ‰€è·æ‚‰ã€‚æ”»å‡»è€…å¯ä»¥çŸ¥é“ä¸€ä¸ªç³»ç»Ÿä½¿ç”¨çš„é¢‘ç¹ç¨‹åº¦ï¼Œè¿™ä¸ªç³»ç»Ÿæ˜¯å¦æœ‰ç”¨æˆ·æ­£åœ¨è¿çº¿ä¸Šç½‘ï¼Œè¿™ä¸ªç³»ç»Ÿæ˜¯å¦åœ¨è¢«æ”»å‡»æ—¶å¼•èµ·æ³¨æ„ç­‰ç­‰ã€‚é˜²ç«å¢™å¯ä»¥åŒæ ·é˜»å¡æœ‰å…³å†…éƒ¨ç½‘ç»œä¸­çš„DNSä¿¡æ¯ï¼Œè¿™æ ·ä¸€å°ä¸»æœºçš„åŸŸåå’ŒIPåœ°å€å°±ä¸ä¼šè¢«å¤–ç•Œæ‰€äº†è§£ã€‚ é˜²ç«å¢™çš„å±€é™æ€§ä½†æ˜¯é˜²ç«å¢™ä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå®ƒä¹Ÿæœ‰ä»¥ä¸‹çš„å±€é™æ€§ã€‚ é˜²ç«å¢™ä¸èƒ½é˜²èŒƒç½‘ç»œå†…éƒ¨çš„æ”»å‡»ã€‚æ¯”å¦‚ï¼šé˜²ç«å¢™æ— æ³•ç¦æ­¢å˜èŠ‚è€…æˆ–å†…éƒ¨é—´è°å°†æ•æ„Ÿæ•°æ®æ‹·è´åˆ°è½¯ç›˜ä¸Šã€‚ é˜²ç«å¢™ä¹Ÿä¸èƒ½é˜²èŒƒé‚£äº›ä¼ªè£…æˆè¶…çº§ç”¨æˆ·æˆ–è¯ˆç§°æ–°é›‡å‘˜çš„é»‘å®¢ä»¬åŠè¯´æ²¡æœ‰é˜²èŒƒå¿ƒç†çš„ç”¨æˆ·å…¬å¼€å…¶å£ä»¤ï¼Œå¹¶æˆäºˆå…¶ä¸´æ—¶çš„ç½‘ç»œè®¿é—®æƒé™ã€‚ é˜²ç«å¢™ä¸èƒ½é˜²æ­¢ä¼ é€å·±æ„ŸæŸ“ç—…æ¯’çš„è½¯ä»¶æˆ–æ–‡ä»¶ï¼Œä¸èƒ½æœŸæœ›é˜²ç«å¢™å»å¯¹æ¯ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œæ‰«æï¼ŒæŸ¥å‡ºæ½œåœ¨çš„ç—…æ¯’ã€‚ é˜²ç«å¢™çš„åˆ†ç±»å¸¸è§çš„æ˜¯ä¸‹é¢ä¸‰ç§é˜²ç«å¢™ï¼š åˆ†ç»„è¿‡æ»¤é˜²ç«å¢™ï¼› åº”ç”¨ä»£ç†é˜²ç«å¢™ï¼› çŠ¶æ€æ£€æµ‹é˜²ç«å¢™ã€‚ åˆ†ç»„è¿‡æ»¤ï¼ˆPacket Filteringï¼‰ä½œç”¨åœ¨åè®®ç»„çš„ç½‘ç»œå±‚å’Œä¼ è¾“å±‚ï¼Œæ ¹æ®åˆ†ç»„åŒ…å¤´æºåœ°å€ã€ç›®çš„åœ°å€å’Œç«¯å£å·ã€åè®®ç±»å‹ç­‰æ ‡å¿—ç¡®å®šæ˜¯å¦å…è®¸æ•°æ®åŒ…é€šè¿‡ï¼Œåªæœ‰æ»¡è¶³è¿‡æ»¤é€»è¾‘çš„æ•°æ®åŒ…æ‰è¢«è½¬å‘åˆ°ç›¸åº”çš„ç›®çš„åœ°çš„å‡ºå£ç«¯ï¼Œå…¶ä½™çš„æ•°æ®åŒ…åˆ™ä»æ•°æ®æµä¸­ä¸¢å¼ƒã€‚ åº”ç”¨ä»£ç†ï¼ˆApplication Proxyï¼‰ä¹Ÿå«åº”ç”¨ç½‘å…³ï¼ˆApplication Gatewayï¼‰ï¼Œå®ƒä½œç”¨åœ¨åº”ç”¨å±‚ï¼Œå…¶ç‰¹ç‚¹æ˜¯å®Œå…¨â€œé˜»éš”â€ç½‘ç»œé€šä¿¡æµï¼Œé€šè¿‡å¯¹æ¯ç§åº”ç”¨æœåŠ¡ç¼–åˆ¶ä¸“é—¨çš„ä»£ç†ç¨‹åºï¼Œå®ç°ç›‘è§†å’Œæ§åˆ¶åº”ç”¨å±‚é€šä¿¡æµçš„ä½œç”¨ã€‚å®é™…ä¸­çš„åº”ç”¨ç½‘å…³é€šå¸¸ç”±ä¸“ç”¨å·¥ä½œç«™å®ç°ã€‚ çŠ¶æ€æ£€æµ‹ï¼ˆStatus Detectionï¼‰ç›´æ¥å¯¹åˆ†ç»„é‡Œçš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå¹¶ä¸”ç»“åˆå‰ååˆ†ç»„çš„æ•°æ®è¿›è¡Œç»¼åˆåˆ¤æ–­ï¼Œç„¶åå†³å®šæ˜¯å¦å…è®¸è¯¥æ•°æ®åŒ…é€šè¿‡ã€‚ é˜²ç«å¢™çš„ç‰¹å¾é˜²ç«å¢™å°±æ˜¯ä¸€ç§è¿‡æ»¤å¡ï¼ˆä½ è¿™ä¹ˆç†è§£ä¸ç®—é”™ï¼‰ï¼Œä½ å¯ä»¥è®©ä½ å–œæ¬¢çš„ä¸œè¥¿é€šè¿‡è¿™ä¸ªå¡å­ï¼Œåˆ«çš„ç©æ„éƒ½ç»Ÿç»Ÿè¿‡æ»¤æ‰ã€‚åœ¨ç½‘ç»œçš„ä¸–ç•Œé‡Œï¼Œè¦ç”±é˜²ç«å¢™è¿‡æ»¤çš„å°±æ˜¯æ‰¿è½½é€šä¿¡æ•°æ®çš„é€šä¿¡åŒ…ã€‚ å†…éƒ¨ç½‘ç»œå’Œå¤–éƒ¨ç½‘ç»œä¹‹é—´çš„æ‰€æœ‰ç½‘ç»œæ•°æ®æµéƒ½å¿…é¡»ç»è¿‡é˜²ç«å¢™è¿™æ˜¯é˜²ç«å¢™æ‰€å¤„ç½‘ç»œä½ç½®ç‰¹æ€§ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªå‰æã€‚å› ä¸ºåªæœ‰å½“é˜²ç«å¢™æ˜¯å†…ã€å¤–éƒ¨ç½‘ç»œä¹‹é—´é€šä¿¡çš„å”¯ä¸€é€šé“ï¼Œæ‰å¯ä»¥å…¨é¢ã€æœ‰æ•ˆåœ°ä¿æŠ¤ä¼ä¸šç½‘éƒ¨ç½‘ç»œä¸å—ä¾µå®³ã€‚ æ ¹æ®ç¾å›½å›½å®¶å®‰å…¨å±€åˆ¶å®šçš„ã€Šä¿¡æ¯ä¿éšœæŠ€æœ¯æ¡†æ¶ã€‹ï¼Œé˜²ç«å¢™é€‚ç”¨äºç”¨æˆ·ç½‘ç»œç³»ç»Ÿçš„è¾¹ç•Œï¼Œå±äºç”¨æˆ·ç½‘ç»œè¾¹ç•Œçš„å®‰å…¨ä¿æŠ¤è®¾å¤‡ã€‚æ‰€è°“ç½‘ç»œè¾¹ç•Œå³æ˜¯é‡‡ç”¨ä¸åŒå®‰å…¨ç­–ç•¥çš„ä¸¤ä¸ªç½‘ç»œè¿æ¥å¤„ï¼Œæ¯”å¦‚ç”¨æˆ·ç½‘ç»œå’Œäº’è”ç½‘ä¹‹é—´è¿æ¥ã€å’Œå…¶å®ƒä¸šåŠ¡å¾€æ¥å•ä½çš„ç½‘ç»œè¿æ¥ã€ç”¨æˆ·å†…éƒ¨ç½‘ç»œä¸åŒéƒ¨é—¨ä¹‹é—´çš„è¿æ¥ç­‰ã€‚é˜²ç«å¢™çš„ç›®çš„å°±æ˜¯åœ¨ç½‘ç»œè¿æ¥ä¹‹é—´å»ºç«‹ä¸€ä¸ªå®‰å…¨æ§åˆ¶ç‚¹ï¼Œé€šè¿‡å…è®¸ã€æ‹’ç»æˆ–é‡æ–°å®šå‘ç»è¿‡é˜²ç«å¢™çš„æ•°æ®æµï¼Œå®ç°å¯¹è¿›ã€å‡ºå†…éƒ¨ç½‘ç»œçš„æœåŠ¡å’Œè®¿é—®çš„å®¡è®¡å’Œæ§åˆ¶ã€‚ å…¸å‹çš„é˜²ç«å¢™ä½“ç³»ç½‘ç»œç»“æ„å¯ä»¥æ˜¯ï¼šé˜²ç«å¢™çš„ä¸€ç«¯è¿æ¥ä¼äº‹ä¸šå•ä½å†…éƒ¨çš„å±€åŸŸç½‘ï¼Œè€Œå¦ä¸€ç«¯åˆ™è¿æ¥ç€äº’è”ç½‘ã€‚æ‰€æœ‰çš„å†…ã€å¤–éƒ¨ç½‘ç»œä¹‹é—´çš„é€šä¿¡éƒ½è¦ç»è¿‡é˜²ç«å¢™ã€‚ åªæœ‰ç¬¦åˆå®‰å…¨ç­–ç•¥çš„æ•°æ®æµæ‰èƒ½é€šè¿‡é˜²ç«å¢™é˜²ç«å¢™æœ€åŸºæœ¬çš„åŠŸèƒ½æ˜¯ç¡®ä¿ç½‘ç»œæµé‡çš„åˆæ³•æ€§ï¼Œå¹¶åœ¨æ­¤å‰æä¸‹å°†ç½‘ç»œçš„æµé‡å¿«é€Ÿçš„ä»ä¸€æ¡é“¾è·¯è½¬å‘åˆ°å¦å¤–çš„é“¾è·¯ä¸Šå»ã€‚ä»æœ€æ—©çš„é˜²ç«å¢™æ¨¡å‹å¼€å§‹è°ˆèµ·ï¼ŒåŸå§‹çš„é˜²ç«å¢™æ˜¯ä¸€å°â€œåŒç©´ä¸»æœºâ€ï¼Œå³å…·å¤‡ä¸¤ä¸ªç½‘ç»œæ¥å£ï¼ŒåŒæ—¶æ‹¥æœ‰ä¸¤ä¸ªç½‘ç»œå±‚åœ°å€ã€‚ é˜²ç«å¢™å°†ç½‘ç»œä¸Šçš„æµé‡é€šè¿‡ç›¸åº”çš„ç½‘ç»œæ¥å£æ¥æ”¶ä¸Šæ¥ï¼ŒæŒ‰ç…§OSIåè®®æ ˆçš„ä¸ƒå±‚ç»“æ„é¡ºåºä¸Šä¼ ï¼Œåœ¨é€‚å½“çš„åè®®å±‚è¿›è¡Œè®¿é—®è§„åˆ™å’Œå®‰å…¨å®¡æŸ¥ï¼Œç„¶åå°†ç¬¦åˆé€šè¿‡æ¡ä»¶çš„æŠ¥æ–‡ä»ç›¸åº”çš„ç½‘ç»œæ¥å£é€å‡ºï¼Œè€Œå¯¹äºé‚£äº›ä¸ç¬¦åˆé€šè¿‡æ¡ä»¶çš„æŠ¥æ–‡åˆ™äºˆä»¥é˜»æ–­ã€‚å› æ­¤ï¼Œä»è¿™ä¸ªè§’åº¦ä¸Šæ¥è¯´ï¼Œé˜²ç«å¢™æ˜¯ä¸€ä¸ªç±»ä¼¼äºæ¡¥æ¥æˆ–è·¯ç”±å™¨çš„ã€å¤šç«¯å£çš„ï¼ˆç½‘ç»œæ¥å£&gt;=2ï¼‰è½¬å‘è®¾å¤‡ï¼Œå®ƒè·¨æ¥äºå¤šä¸ªåˆ†ç¦»çš„ç‰©ç†ç½‘æ®µä¹‹é—´ï¼Œå¹¶åœ¨æŠ¥æ–‡è½¬å‘è¿‡ç¨‹ä¹‹ä¸­å®Œæˆå¯¹æŠ¥æ–‡çš„å®¡æŸ¥å·¥ä½œã€‚ é˜²ç«å¢™è‡ªèº«åº”å…·æœ‰éå¸¸å¼ºçš„æŠ—æ”»å‡»å…ç–«åŠ›è¿™æ˜¯é˜²ç«å¢™ä¹‹æ‰€ä»¥èƒ½æ‹…å½“ä¼ä¸šå†…éƒ¨ç½‘ç»œå®‰å…¨é˜²æŠ¤é‡ä»»çš„å…ˆå†³æ¡ä»¶ã€‚é˜²ç«å¢™å¤„äºç½‘ç»œè¾¹ç¼˜ï¼Œå®ƒå°±åƒä¸€ä¸ªè¾¹ç•Œå«å£«ä¸€æ ·ï¼Œæ¯æ—¶æ¯åˆ»éƒ½è¦é¢å¯¹é»‘å®¢çš„å…¥ä¾µï¼Œè¿™æ ·å°±è¦æ±‚é˜²ç«å¢™è‡ªèº«è¦å…·æœ‰éå¸¸å¼ºçš„æŠ—å‡»å…¥ä¾µæœ¬é¢†ã€‚å®ƒä¹‹æ‰€ä»¥å…·æœ‰è¿™ä¹ˆå¼ºçš„æœ¬é¢†é˜²ç«å¢™æ“ä½œç³»ç»Ÿæœ¬èº«æ˜¯å…³é”®ï¼Œåªæœ‰è‡ªèº«å…·æœ‰å®Œæ•´ä¿¡ä»»å…³ç³»çš„æ“ä½œç³»ç»Ÿæ‰å¯ä»¥è°ˆè®ºç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚å…¶æ¬¡å°±æ˜¯é˜²ç«å¢™è‡ªèº«å…·æœ‰éå¸¸ä½çš„æœåŠ¡åŠŸèƒ½ï¼Œé™¤äº†ä¸“é—¨çš„é˜²ç«å¢™åµŒå…¥ç³»ç»Ÿå¤–ï¼Œå†æ²¡æœ‰å…¶å®ƒåº”ç”¨ç¨‹åºåœ¨é˜²ç«å¢™ä¸Šè¿è¡Œã€‚å½“ç„¶è¿™äº›å®‰å…¨æ€§ä¹Ÿåªèƒ½è¯´æ˜¯ç›¸å¯¹çš„ã€‚ ç›®å‰å›½å†…çš„é˜²ç«å¢™å‡ ä¹è¢«å›½å¤–çš„å“ç‰Œå æ®äº†ä¸€åŠçš„å¸‚åœºï¼Œå›½å¤–å“ç‰Œçš„ä¼˜åŠ¿ä¸»è¦æ˜¯åœ¨æŠ€æœ¯å’ŒçŸ¥ååº¦ä¸Šæ¯”å›½å†…äº§å“é«˜ã€‚è€Œå›½å†…é˜²ç«å¢™å‚å•†å¯¹å›½å†…ç”¨æˆ·äº†è§£æ›´åŠ é€å½»ï¼Œä»·æ ¼ä¸Šä¹Ÿæ›´å…·æœ‰ä¼˜åŠ¿ã€‚é˜²ç«å¢™äº§å“ä¸­ï¼Œå›½å¤–ä¸»æµå‚å•†ä¸ºæ€ç§‘ï¼ˆCiscoï¼‰ã€CheckPointã€NetScreenç­‰ï¼Œå›½å†…ä¸»æµå‚å•†ä¸ºä¸œè½¯ã€å¤©èä¿¡ã€ç½‘å¾¡ç¥å·ã€è”æƒ³ã€æ–¹æ­£ç­‰ï¼Œå®ƒä»¬éƒ½æä¾›ä¸åŒçº§åˆ«çš„é˜²ç«å¢™äº§å“ã€‚ æ€»ç»“ä¸»è¦æ˜¯è®°å½•ä¸‹ç®€å•çš„é˜²ç«å¢™çŸ¥è¯†ï¼Œæ–¹ä¾¿ä»¥åçš„æŸ¥é˜…ã€‚å¤§éƒ¨åˆ†éƒ½æ•´ç†è‡ªwiki,æ„Ÿè°¢ã€‚å¤§æ¦‚å¯ä»¥å¯¹é˜²ç«å¢™æœ‰äº›ç®€å•çš„äº†è§£ï¼Œç§‘æ™®ã€‚","categories":[{"name":"other","slug":"other","permalink":"http://sevencai.github.io/categories/other/"}],"tags":[{"name":"other","slug":"other","permalink":"http://sevencai.github.io/tags/other/"}]},{"title":"vim ä¸‹çš„å¸¸ç”¨å‘½ä»¤","slug":"vim-ä¸‹çš„å¸¸ç”¨å‘½ä»¤","date":"2016-05-07T15:15:54.000Z","updated":"2016-12-12T02:31:18.000Z","comments":true,"path":"2016/05/07/vim-ä¸‹çš„å¸¸ç”¨å‘½ä»¤/","link":"","permalink":"http://sevencai.github.io/2016/05/07/vim-ä¸‹çš„å¸¸ç”¨å‘½ä»¤/","excerpt":"","text":"ç³»ç»Ÿç®¡ç†å‘˜ç™¿é‡è¦å·¥ä½œå°±æ˜¯å¾—è¦ä¿®æ”¹ä¸è®¾å®šæŸäº›é‡è¦è½¯ä»¶çš„é…ç½®æ–‡ä»¶ï¼Œå› æ­¤è‡³å°‘å¾—è¦å­¦ä¼šä¸€ç§ä»¥ä¸Šç™¿æ–‡å­—æ¥å£çš„æ–‡ä¹¦ç¼–è¾‘å™¨ã€‚ åœ¨æ‰€æœ‰çš„Linux distributions ä¸Šå¤®éƒ½ä¼šæœ‰çš„ä¸€å¥—æ–‡ä¹¦ç¼–è¾‘å™¨å°±æ˜¯ vi ï¼Œè€Œä¸”å¾ˆå¤šè½¯ä»¶é»˜è®£ä¹Ÿæ˜¯ä½¿ç”¨ vi åšä¸ºä»–ä»¬ç¼–è¾‘çš„æ¥å£ï¼Œ å› æ­¤é¸Ÿå“¥å»ºè®®æ‚¨åŠ¡å¿…è¦å­¦ä¼šä½¿ç”¨ vi è¿™ä¸ªæ­£è§„çš„æ–‡ä¹¦ç¼–è¾‘å™¨ã€‚æ­¤å¤–ï¼Œvim æ˜¯è¿›é˜¶ç‰ˆçš„ vi ï¼Œ vim ä¸ä½†å¯ä»¥ç”¨ä¸ŒåŒé¢œè‰²æ˜¾ç¤ºæ–‡å­—å†…å®¹ï¼Œè¿˜èƒ½å¤Ÿè¿›è¡Œè¯¸å¦‚ shell script, C program ç­‰ç¨‹åºç¼–è¾‘åŠŸèƒ½ï¼Œ ä½ å¯ä»¥å°† vim è§„ä¸ºä¸€ç§ç¨‹åºç¼–è¾‘å™¨ï¼ â€“ from é¸Ÿå“¥ ä»¥å‰å­¦ä¹ linuxçš„æ—¶å€™ï¼Œå°±æ˜¯åªç”¨é‚£äº›å¸¸ç”¨çš„å‘½ä»¤ï¼Œå®Œå…¨æ²¡æœ‰ä½“ä¼šåˆ°vimçš„å¥½å¤„ï¼Œç°åœ¨æƒ³æ•´ä¸ªç³»ç»Ÿçš„å­¦ä¸‹ã€‚å› ä¸ºå‘½ä»¤å¾ˆå¤šï¼Œè®°å½•å¦‚ä¸‹ï¼Œä¸»è¦æ˜¯ä¾¿äºå›å¤´æŸ¥æ‰¾ã€‚ä¹Ÿåˆ†äº«ç»™å¤§å®¶ã€‚æˆ‘çœ‹çš„æ˜¯ã€Šé¸Ÿå“¥çš„ç§æˆ¿èœè¿™æœ¬ä¹¦ã€‹ï¼Œè®²çš„ä¸èƒ½å†å¥½äº†ã€‚æˆ‘åˆ†äº«çš„ä¹¦é‡Œé¢æœ‰è¿™ä¸ªç”µå­ä¹¦ã€‚ä½†æ˜¯è¿˜æ˜¯å»ºè®®ä¹°ä¸€ä¸ªæ­£ç‰ˆçš„ã€‚ vi ä¸€å…±åˆ†ä¸ºä¸‰ç§æ¨¡å¼ï¼šä¸€èˆ¬æ¨¡å¼ï¼Œç¼–è¾‘æ¨¡å¼ï¼ŒæŒ‡ä»¤å‘½ä»¤æ¨¡å¼ã€‚ ä¸€èˆ¬æ¨¡å¼ï¼šä»¥viæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œé»˜è®¤å°±æ˜¯è¿›å…¥è¿™ä¸ªæ¨¡å¼ã€‚è¿™ä¸ªæ¨¡å¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸Šä¸‹å·¦å³æŒ‰é”®ç§»åŠ¨å…‰æ ‡ï¼Œå¯ä»¥åˆ é™¤ï¼Œå¤åˆ¶ï¼Œç²˜è´´ã€‚ ç¼–è¾‘æ¨¡å¼ï¼šä¸€èˆ¬æ¨¡å¼ä¸­å¯ä»¥è¿›è¡Œå¤åˆ¶ï¼Œç²˜è´´ï¼Œåˆ é™¤ï¼Œç§»åŠ¨ã€‚ä½†æ˜¯æ²¡æœ‰åŠæ³•ç¼–è¾‘æ–‡ä»¶ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬è¦é€šè¿‡[i,I,o,O,r,R]è¿™äº›å­—æ¯è¿›å…¥ç¼–è¾‘æ¨¡å¼ã€‚ä½ ä¼šåœ¨ä¸‹é¢çœ‹åˆ°[insert][replace]çš„å­—æ ·ï¼Œé€€å‡ºè¿™ä¸ªæ¨¡å¼ï¼Œè¯·ä½¿ç”¨[esc]ã€‚ æŒ‡ä»¤è¡Œå‘½ä»¤æ¨¡å¼ï¼šè¾“å…¥[:/?]ä¸‰ä¸ªä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œå°±å¯ä»¥ç§»åŠ¨åˆ°å…‰æ ‡æœ€åº•ä¸‹ä¸€è¡Œã€‚å¯ä»¥æœç´¢ï¼Œè€Œè¯»å–ï¼Œå­˜ç›˜ï¼Œå¤§é‡å–ä»£å­—ç¬¦ï¼Œç¦»å¼€vi,æ˜¾ç¤ºè¡Œå·ï¼Œè¿™äº›éƒ½æ˜¯è¿™ä¸ªæ¨¡å¼è¾¾æˆçš„ã€‚ æœ€å¸¸ç”¨çš„æ˜¯ï¼ši,esc,a,:wq,:q!,vi filenameâ€¦.ç­‰ç­‰ã€‚ ä¸€èˆ¬æ¨¡å¼å…‰æ ‡ç§»åŠ¨h:(â†) å…‰æ ‡å‘å·¦è¾¹ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦j:(â†“) å…‰æ ‡å‘ä¸‹è¾¹ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦k:(â†‘) å…‰æ ‡å‘ä¸Šè¾¹ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦l:(â†’) å…‰æ ‡å‘å³è¾¹ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ hjklæ˜¯åœ¨é”®ç›˜ä¸Šè¿åœ¨ä¸€èµ·çš„ï¼Œ30j,30héƒ½å¯ä»¥ã€‚ ctrl+f : å±å¹•å‘ä¸‹ç§»åŠ¨ä¸€é¡µ == pagedownctrl+b : å±å¹•å‘ä¸Šç§»åŠ¨ä¸€é¡µ == pageup è¿˜æœ‰ä¸æ˜¯å¾ˆå¸¸ç”¨çš„ ctrl+d : å±å¹•å‘ä¸‹ç§»åŠ¨åŠé¡µctrl+u: å±å¹•å‘ä¸Šç§»åŠ¨åŠé¡µ+ å…‰æ ‡ç§»åŠ¨åˆ°éç©ºæ ¼çš„ä¸‹ä¸€åˆ—- å…‰æ ‡ç§»åŠ¨åˆ°éç©ºæ ¼çš„ä¸Šä¸€åˆ— n&lt;space&gt; : å¦‚ 20ï¼ˆç©ºæ ¼ï¼‰ è¡¨ç¤ºå…‰æ ‡å‘å³ç§»åŠ¨è¿™ä¸€è¡Œçš„nä¸ªå­—ç¬¦ã€‚ 0 == [home]$ == [end] G ç§»åŠ¨åˆ°æ­¤æ–‡ä»¶æœ€åä¸€è¡Œgg ç§»åŠ¨åˆ°è¿™ä¸ªæ¡£æ¡ˆçš„ç¬¬ä¸€è¡ŒnG nè¡¨ç¤ºæ•°å­—ï¼Œç§»åŠ¨åˆ°è¿™ä¸ªæ¡£æ¡ˆçš„ç¬¬nè¡Œ1G è‡ªç„¶ä»£è¡¨ç§»åŠ¨åˆ°è¿™ä¸ªæ¡£æ¡ˆçš„ç¬¬ä¸€è¡Œ == ggn&lt;enter&gt; nè¡¨ç¤ºæ•°å­—ï¼Œå…‰æ ‡å‘ä¸‹ç§»åŠ¨nè¡Œ æœå¯»ä¸å–ä»£/word å‘å…‰æ ‡ä¹‹ä¸‹å¯»æ‰¾ä¸€ä¸ªåç§°ä¸ºwordçš„å­—ç¬¦ä¸² å¦‚/seven å‘ä¸‹å¯»æ‰¾sevenè¿™ä¸ªå­—ç¬¦ä¸²?word å‘å…‰æ ‡ä¹‹ä¸Šå¯»æ‰¾ä¸€ä¸ªåç§°ä¼ªwordçš„å­—ç¬¦ä¸² n æ³¨æ„è¿™é‡Œçš„nä»£è¡¨çš„ä¸æ˜¯æ•°å­—ï¼Œæ˜¯nè‹±æ–‡æŒ‰é”®ï¼Œä»£è¡¨[é‡å¤å‰ä¸€ä¸ªæœå¯»çš„åŠ¨ä½œ]æ¯”å¦‚ä¸Šé¢æˆ‘/sevenäº†ï¼Œè¡¨ç¤ºæˆ‘è¦å‘ä¸‹æœå¯»sevenè¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœæˆ‘æ­¤æ—¶æŒ‰ä¸‹nï¼Œä»£è¡¨ç»§ç»­å‘ä¸‹æœå¯»ä¸‹ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¦‚æœæ˜¯?sevenï¼ŒåŒæ ·çš„é“ç†å–½ã€‚ N è¿™ä¸ªNæ˜¯è‹±æ–‡æŒ‰é”®ã€‚ä¸nåˆšå¥½ç›¸åï¼Œæ¯”å¦‚åˆšæ‰å…ˆæŒ‰ä¸‹/sevenï¼Œå†æŒ‰ä¸‹Nï¼Œä»£è¡¨ï¼Œä¼šå‘ä¸Šæœå¯»seven,æ­¤æ—¶ä½œç”¨ç­‰åŒäº?sevenã€‚ /?n çš„é…åˆï¼Œå¯ä»¥é‡å¤çš„æ‰¾åˆ°ä¸€äº›ä½ æœå¯»çš„å…³é”®å­—ã€‚ :n1,n2s/word1/word2/g n1,n2ä¸ºæ•°å­—ï¼Œword1,æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œword2ä¸ºæ›¿æ¢å­—ç¬¦ä¸²:100,200s/seven/Seven/g :1,$s/word1/word2/g ä»ç¬¬ä¸€è¡Œåˆ°æœ€åä¸€è¡Œå¯»æ‰¾word1,å¹¶ä¸”æ›¿æ¢æˆword2. :1,$s/word1/word2/gc ä»ç¬¬ä¸€è¡Œåˆ°æœ€åä¸€è¡Œå¯»æ‰¾word1ï¼Œå¹¶ä¸”å–ä»£ä¸ºword2,å¹¶ä¸”åœ¨æ›¿æ¢å‰æç¤ºç”¨æˆ·ï¼Œconfirmä¸€ä¸‹ï¼Œæ˜¯å¦æ›¿æ¢ã€‚ åˆ é™¤ï¼Œå¤åˆ¶ï¼Œç²˜è´´x,X : xå‘ååˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼ŒXå‘å‰åˆ é™¤ä¸€ä¸ªå­—ç¬¦ã€‚x=del,X=backspacenx : nä¸ºæ•°å­—ï¼Œè¿ç»­å‘ååˆ é™¤nä¸ªå­—ç¬¦ã€‚10x,å‘ååˆ é™¤10ä¸ªå­—ç¬¦dd : åˆ é™¤æ¸¸æ ‡æ‰€åœ¨çš„é‚£ä¸€åˆ—ndd : å‘ä¸‹åˆ é™¤nåˆ—ã€‚d1G : åˆ é™¤å…‰æ ‡æ‰€åœ¨åˆ°ç¬¬ä¸€è¡Œçš„æ‰€æœ‰æ•°æ®dG: åˆ é™¤å…‰æ ‡æ‰€åœ¨åˆ°æœ€åä¸€è¡Œçš„æ‰€æœ‰æ•°æ® å¦‚æœåªåˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œæˆ‘å€’è§‰å¾—del,å’Œbackspaceæ¯”è¾ƒæ–¹ä¾¿ï¼Œå› ä¸ºä¸ç”¨ä»ç¼–è¾‘æ¨¡å¼ï¼Œåˆ‡æ¢åˆ°å‘½ä»¤æ¨¡å¼ã€‚ä½†æ˜¯åé¢çš„dd,ndd,d1G,dGçš„å¥½å¤„å°±å¾ˆæ˜æ˜¾ä½“ç°å‡ºæ¥äº†ã€‚ d$ : åˆ é™¤æ¸¸æ ‡æ‰€åœ¨å¤„ï¼Œåˆ°è¯¥è¡Œçš„æœ€åä¸€ä¸ªå­—ç¬¦d0 : åˆ é™¤å…‰æ ‡æ‰€åœ¨å¤„ï¼Œåˆ°è¯¥è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ yy : å¤åˆ¶æ¸¸æ ‡æ‰€åœ¨çš„é‚£ä¸€è¡Œnyy : nä¸ºæ•°å­—ï¼Œå¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„å‘ä¸‹nè¡Œï¼Œ20yy,å‘ä¸‹å¤åˆ¶20åˆ— y1G : å¤åˆ¶å…‰æ ‡æ‰€åœ¨åˆ—åˆ°ç¬¬ä¸€åˆ—çš„æ‰€æœ‰æ•°æ®yG : å¤åˆ¶å…‰æ ‡æ‰€åœ¨åˆ—åˆ°æœ€åä¸€åˆ—çš„æ‰€æœ‰æ•°æ®y0 : å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„é‚£ä¸ªå­—ç¬¦åˆ°è¯¥è¡Œè¡Œé¦–çš„æ‰€æœ‰æ•°æ®y$ : å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„å“ªä¸ªå­—ç¬¦åˆ°è¯¥è¡Œè¡Œå°¾çš„æ‰€æœ‰æ•°æ® p,P : på°†å·²ç»å¤åˆ¶çš„æ•°æ®åœ¨å…‰æ ‡ä¸‹ä¸€è¡Œç²˜è´´ï¼ŒPä¸ºä¸Šä¸€è¡Œã€‚J : å°†å…‰æ ‡æ‰€åœ¨åˆ—ä¸ä¸‹ä¸€åˆ—çš„æ•°æ®åˆæˆåŒä¸€åˆ—c : é‡å¤åˆ é™¤å¤šä¸ªæ•°æ®ï¼Œä¾‹å¦‚å‘ä¸‹åˆ é™¤10è¡Œ 10cj u : å¤åŸå‰ä¸€ä¸ªåŠ¨ä½œ == windowsä¸‹é¢çš„ctrl+zctrl+r : é‡åšå‰ä¸€ä¸ªåŠ¨ä½œ == windowsä¸‹é¢çš„ctrl+y è¿™ä¸¤ä¸ªå¾ˆå¸¸ç”¨ã€‚ . : é‡å¤å‰ä¸€ä¸ªåŠ¨ä½œï¼Œæ¯”å¦‚é‡å¤åˆ é™¤ï¼Œé‡å¤ç²˜è´´ï¼Œå°±ä¸€ç›´æŒ‰ä¸‹å°æ•°ç‚¹å°±è¡Œå•¦ã€‚ ä¸€èˆ¬æ¨¡å¼åˆ‡æ¢åˆ°ç¼–è¾‘æ¨¡å¼i,I : æ’å…¥æ¨¡å¼ï¼Œiä¸ºä»å…‰æ ‡æ‰€åœ¨å¤„æ’å…¥ï¼ŒIä¸ºåœ¨ç›®å‰æ‰€åœ¨è¡Œçš„ç¬¬ä¸€ä¸ªéç©ºæ ¼å¤„æ’å…¥a,A : aä¸ºä»å…‰æ ‡æ‰€åœ¨çš„ä¸‹ä¸€ä¸ªå­—ç¬¦å¼€å§‹æ’å…¥ï¼ŒAä¸ºä»å…‰æ ‡æ‰€åœ¨è¡Œçš„æœ€åä¸€ä¸ªå­—ç¬¦æ’å…¥o,O : oä¸ºåœ¨å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸‹ä¸€è¡Œæ’å…¥ï¼ŒOä¸ºä¸Šä¸€è¡Œæ’å…¥ã€‚r,R : å‰é¢ä¸‰ä¸ªéƒ½æ˜¯æ’å…¥æ¨¡å¼ï¼Œè¿™ä¸ªæ˜¯å–ä»£æ¨¡å¼ï¼šrä¼šå–ä»£å…‰æ ‡æ‰€åœ¨çš„å“ªä¸ªå­—ç¬¦ä¸€æ¬¡ï¼ŒRä¼šä¸€ç›´å–ä»£å…‰æ ‡æ‰€åœ¨çš„æ–‡å­—ï¼Œä¸€ç›´åˆ°esc esc : é€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œå›åˆ°ä¸€èˆ¬æ¨¡å¼ ä¸Šé¢é‚£äº›æŒ‰é”®ï¼Œéƒ½ä¼šåœ¨å·¦ä¸‹è§’å‡ºç°insertæˆ–è€…replaceçš„å­—æ · ä¸€èˆ¬æ¨¡å¼åˆ‡æ¢åˆ°æŒ‡ä»¤æ¨¡å¼:w å°†ç¼–è¾‘ç™¿æ•°æ®å†™å…¥ç¡¬ç›˜æ¡£æ¡ˆä¸­(å¸¸ç”¨):W è‹¥æ–‡ä»¶å±æ€§ä¸ºã€åªè¯»ã€æ—¶,å¼ºåˆ¶å†™å…¥è¯¥æ¡£æ¡ˆã€‚ä¸è¿‡,åˆ°åº•èƒ½ä¸èƒ½å†™å…¥, è¿˜æ˜¯è·Ÿä½ å¯¹è¯¥æ¡£æ¡ˆçš„æ¡ˆæƒé™æœ‰å…³:q ç¦»å¼€ vi (å¸¸ç”¨):q! è‹¥æ›¾ä¿®æ”¹è¿‡æ¡£æ¡ˆ,åˆä¸å‚¨å­˜,ä½¿ç”¨ ! ä¸ºå¼ºåˆ¶ç¦»å¼€å½“å‰æ–‡ä»¶ã€‚æ³¨æ„ä¸€ä¸‹å•Š,é‚£ä¸ªæƒŠå¹å· (!) åœ¨ vi å½“ä¸­,å¸¸å¸¸å…·æœ‰ã€å¼ºåˆ¶ã€çš„æ„æ€~:wq å­˜å‚¨åç¦»å¼€ï¼Œ:wq!å­˜å‚¨åå¼ºåˆ¶ç¦»å¼€ZZ è‹¥æ–‡æ¡£æ²¡æœ‰æ›´æ”¹ï¼Œåˆ™ä¸å­˜å‚¨ç¦»å¼€ï¼Œè‹¥æ”¹åŠ¨ï¼Œåˆ™å­˜å‚¨ç¦»å¼€:w [filename] å¦å­˜ä¸ºå¦ä¸€ä¸ªfilenane:r [filename] å°†filenameè¿™ä¸ªæ¡£æ¡ˆçš„å†…å®¹åŠ åˆ°æ¸¸æ ‡çš„è¡Œåé¢ :n1,n2 w [filename] å°† n1 åˆ° n2 çš„å†…å®¹å‚¨å­˜æˆ filename è¿™ä¸ªæ¡£æ¡ˆã€‚:! command æš‚æ—¶ç¦»å¼€ vi åˆ°æŒ‡ä»¤åˆ—æ¨¡å¼ä¸‹æ‰§è¡Œ command ç™¿æ˜¾ç¤ºç»“æœ!ä¾‹å¦‚ã€:! ls /homeã€å³å¯åœ¨ vi å½“ä¸­å¯Ÿçœ‹ /home åº•ä¸‹ä»¥ ls è¾“å‡ºç™¿æ¡£æ¡ˆä¿¡æ¯! :set nu æ˜¾ç¤ºè¡Œå·:set nonu ä¸æ˜¾ç¤ºè¡Œå· å¤šçª—å£åŠŸèƒ½å¦‚æœæƒ³è¦å¯¹æ¯”ä¸€ä¸ªæ–‡ä»¶æˆ–è€…å¤šä¸ªæ–‡ä»¶çš„æ•°æ®çš„æ—¶å€™ï¼Œæ˜¯å¦éœ€è¦ctrl+fæˆ–è€…ctrl+bå‰åæŸ¥çœ‹æ•°æ®å‘¢ï¼Ÿä¸éœ€è¦ï¼Œvimæ”¯æŒå¤šçª—å£åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯çª—å£çš„åˆ†å‰²ï¼š æ¯”å¦‚ vi 1.txt -&gt; 1G -&gt; :sp -&gt; Gä¸¤ä¸ªåŒæ ·çš„æ–‡ä»¶ï¼Œä¸€ä¸ªæ–‡ä»¶å¼€å¤´ï¼Œä¸€ä¸ªæ–‡ä»¶ç»“å°¾ï¼Œå¯ä»¥ä¸€èµ·çœ‹ã€‚ æ¯”å¦‚å†è¾“å…¥[:sp /etc/hosts]åˆä¼šå¤šäº†ä¸€ä¸ªçª—å£äº†ã€‚ :sp [filename] å¼€å¯ä¸€ä¸ªæ–°çª—å£ctrl+w+j ([ctrl]+w+â†“) æŒ‰é”®çš„æŒ‰æ³•æ˜¯:å…ˆæŒ‰ä¸‹ [ctrl] ä¸Œæ”¾, å†æŒ‰ä¸‹ w åæ”¾å¼€æ‰€æœ‰ç™¿æŒ‰é”®,ç„¶åå†æŒ‰ä¸‹ j (æˆ’å‘ä¸‹ç®­å¤®é”®),åˆ™å…‰æ ‡å¯ç§»åŠ¢åˆ°ä¸‹æ–¹çš„çª—å£ã€‚ [ctrl]+w+k ([ctrl]+w+â†‘): åŒä¸Š,ä¸Œè¿‡å…‰æ ‡ç§»åŠ¢åˆ°ä¸Šé¢çš„çª—å£ã€‚ [ctrl]+w+q å…¶å®å°±æ˜¯ :q ç»“æŸç¦»å¼€å•¦! ä¸¼ä¾‹æ¥è¯´,å¦‚æœæˆ‘æƒ³è¦ç»“æŸä¸‹æ–¹ç™¿çª—å£ï¼Œé‚£ä¹ˆåˆ©ç”¨ç”¨ [ctrl]+w+â†“ ç§»åŠ¢åˆ°ä¸‹æ–¹çª—å£å,æŒ‰ä¸‹ :q å³å¯ç¦»å¼€, ä¹Ÿå¯ä»¥æŒ‰ä¸‹[ctrl]+w+q æ€»ç»“ä¸‹é¢çš„å›¾ç‰‡æ¥è‡ªé¸Ÿå“¥çš„ä¹¦ã€‚æœ‰æ—¶å€™æ¨¡ç³Šä¸æ¸…ï¼Œä¼šçœ‹çš„æ›´è®¤çœŸæ˜¯ä¸æ˜¯ï¼Ÿ=ã€‚=","categories":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/categories/å·¥å…·-é…ç½®/"}],"tags":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/tags/å·¥å…·-é…ç½®/"}]},{"title":"åŸºäºSocket.IOçš„nodeèŠå¤©å®¤ï¼Œæ”¯æŒç§èŠ","slug":"åŸºäºSocket-IOçš„nodeèŠå¤©å®¤ï¼Œæ”¯æŒç§èŠ","date":"2016-05-04T02:23:19.000Z","updated":"2016-12-12T02:33:14.000Z","comments":true,"path":"2016/05/04/åŸºäºSocket-IOçš„nodeèŠå¤©å®¤ï¼Œæ”¯æŒç§èŠ/","link":"","permalink":"http://sevencai.github.io/2016/05/04/åŸºäºSocket-IOçš„nodeèŠå¤©å®¤ï¼Œæ”¯æŒç§èŠ/","excerpt":"","text":"æºç æˆ‘æ”¾åœ¨äº†githubä¸Šé¢ã€‚ã€åœ°å€åœ¨è¿™å„¿ã€‘ã€‚é¦–å…ˆå¯ä»¥çœ‹ä¸‹ã€ä¸Šç¯‡ã€‘åšå®¢,æŠŠç¯å¢ƒå…ˆæ­å»ºå¥½å’Œç†Ÿæ‚‰socket.ioåŸºæœ¬ç”¨æ³•ã€‚æ•´ä¸ªå¯ä»¥å®ç°ä¸‹é¢çš„è¿™äº›åŠŸèƒ½ï¼š ç”¨æˆ·ç™»é™†è¿›è¡ŒèŠå¤©ã€‚ ç”¨æˆ·ç™»é™†åï¼Œå³å¯å‘é€æ¶ˆæ¯ã€‚ å¯¹åˆšç™»å½•ç”¨æˆ·æ¥è¯´ï¼Œç½—åˆ—æ‰€æœ‰åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ å¯¹å·²åœ¨çº¿çš„ç”¨æˆ·æ¥è¯´ï¼Œé€šçŸ¥è¯¥ç”¨æˆ·æœ‰æ–°ç”¨æˆ·ç™»é™†æˆ–è€…ç¦»å¼€ æ”¯æŒå¯¹æ‰€æœ‰äººå¹¿æ’­èŠå¤©å†…å®¹ï¼Œå³ç¾¤èŠ æ”¯æŒç§èŠå½“å‰åœ¨çº¿ç”¨æˆ·ï¼Œå³ç§èŠ ç”¨æˆ·å³æ—¶è·å¾—æ¶ˆæ¯åˆ—è¡¨ å½“æœåŠ¡å™¨æ–­å¼€è¿æ¥æ—¶ï¼Œæé†’æ‰€æœ‰ç”¨æˆ· æ•´ä¸ªä»£ç é‡éå¸¸å°‘ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ä¿®æ”¹é€»è¾‘ã€‚ æ²¡æœ‰è¿›è¡Œå¤ªå¤šçš„é™åˆ¶ï¼Œæ¯”å¦‚æ²¡æœ‰é™åˆ¶é‡åç™»é™†ï¼Œä¸»è¦æ˜¯å…³æ³¨é€»è¾‘ä»£ç ã€‚ æ²¡æœ‰å†™ä»»ä½•æ ·å¼,æ‰€ä»¥å¾ˆéš¾çœ‹é¢ï¼Œä»¥åæœ‰æ—¶é—´æ…¢æ…¢çš„è¡¥èµ·æ¥å§ï¼Œç°åœ¨è€ƒè¯•ç•¥å¤šã€‚ã€‚ã€‚ã€‚ è¿è¡Œï¼šåˆ‡æ¢åˆ°æ­¤ç›®å½•ï¼Œè¿è¡Œnode index.jså³å¯ã€‚æ‰“å¼€ç«¯å£3000,localhost:3000ã€‚ æœåŠ¡å™¨ç«¯ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566var http = require('http');var sio = require('socket.io');var express = require('express');var app = express();var server = http.createServer(app);var io = sio.listen(server);app.get('/',function(req,res)&#123; res.sendFile(__dirname+'/index.html');&#125;)server.listen('3000',function()&#123; console.log('listening on port 3000');&#125;)var onlineUsers = &#123;&#125;;var onlineCount = 0;var userSockets = &#123;&#125;;io.on('connection',function(socket)&#123; //å½“å®¢æˆ·ç«¯æœ‰ç”¨æˆ·ç™»é™†çš„æ—¶å€™ socket.on('login',function(userObj)&#123; socket.uid = userObj.uid; userSockets[userObj.uid] = socket; //æ£€æŸ¥æ˜¯å¦åœ¨å½“å‰çš„ç”¨æˆ·åˆ—è¡¨ä¸­ï¼Œå¦‚æœä¸åœ¨count++ if(!onlineUsers.hasOwnProperty(userObj.uid))&#123; onlineUsers[userObj.uid] = userObj.username; onlineCount++; &#125; //å‘å®¢æˆ·ç«¯å‘é€ç”¨æˆ·ç™»é™†çš„ä¿¡æ¯ io.emit('login',&#123;onlineUsers:onlineUsers,onlineCount:onlineCount,userObj:userObj&#125;); console.log(userObj.username + \" è¿›å…¥äº†èŠå¤©å®¤\"); &#125;); //å½“æœåŠ¡å™¨æ¥æ”¶åˆ°æ¶ˆæ¯æ—¶ socket.on('message',function(data)&#123; if(data.to !== \"æ‰€æœ‰äºº\")&#123; if(data.to in userSockets)&#123; userSockets[data.to].emit('to'+data.to,data); userSockets[data.uid].emit('to'+data.uid,data); &#125; &#125;else&#123; io.emit('message',data); console.log(data.username+\"å¯¹\"+data.to+\"è¯´ï¼š\"+data.message); &#125; &#125;); //å½“å®¢æˆ·ç«¯é€€å‡ºçš„æ—¶å€™ socket.on('disconnect',function()&#123; if(onlineUsers.hasOwnProperty(socket.uid))&#123; //è®°å½•è¦é€€å‡ºç”¨æˆ·çš„ä¿¡æ¯ï¼Œå‘é€ç»™å®¢æˆ·ç«¯ var userObj = &#123;uid:socket.uid,username:onlineUsers.uid&#125;; delete onlineUsers[socket.uid]; delete userSockets[socket.uid]; onlineCount--; io.emit('logout',&#123;onlineUsers:onlineUsers,onlineCount:onlineCount,userObj:userObj&#125;); console.log(userObj.username+\" é€€å‡ºäº†èŠå¤©å®¤\"); &#125; &#125;)&#125;) å®¢æˆ·ç«¯ä»£ç DOMç»“æ„éƒ¨åˆ†12345678910111213141516171819202122232425262728&lt;header&gt; &lt;h3&gt;åŸºäºsocket.ioçš„èŠå¤©å®¤&lt;/h3&gt; &lt;p id=\"notice\"&gt;&lt;/p&gt;&lt;/header&gt;&lt;div class=\"login\"&gt; &lt;h3&gt;èŠå¤©å‰è¯·å…ˆç™»é™†&lt;/h3&gt; &lt;input type=\"text\" placeholder=\"è¾“å…¥ç”¨æˆ·å\" id=\"username\"&gt; &lt;input type=\"submit\" value=\"ç™»é™†\" onclick=\"CHAT.submit()\"&gt;&lt;/div&gt;&lt;div id=\"main\" style=\"display:none;\"&gt; &lt;aside&gt; &lt;p&gt;åœ¨çº¿ç”¨æˆ·åˆ—è¡¨&lt;/p&gt; &lt;ul id=\"onlineUsers\"&gt; &lt;/ul&gt; &lt;/aside&gt; &lt;section&gt; &lt;p&gt;æ¶ˆæ¯åˆ—è¡¨&lt;/p&gt; &lt;ul id=\"messageList\"&gt; &lt;/ul&gt; &lt;/section&gt;&lt;/div&gt;&lt;footer id=\"footer\" style=\"display:none\"&gt; &lt;textarea name=\"\" id=\"message\" cols=\"30\" rows=\"10\"&gt;&lt;/textarea&gt; &lt;select name=\"\" id=\"selectUserList\"&gt; &lt;option value=\"\"&gt;æ‰€æœ‰äºº&lt;/option&gt; &lt;/select&gt; &lt;input type=\"submit\" value=\"æäº¤\" onclick=\"CHAT.sendMessage()\"&gt;&lt;/footer&gt; jsè„šæœ¬ä»£ç éƒ¨åˆ†123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102&lt;script src=\"/socket.io/socket.io.js\"&gt;&lt;/script&gt;&lt;script&gt; (function()&#123; window.CHAT = &#123; uid:null, username:null, socket:null, submit:function()&#123; var username = document.getElementById('username').value; if(username!==\"\")&#123; this.init(username); this.socket.emit('login',&#123;uid:this.uid,username:this.username&#125;); this.initStyle(); &#125; &#125;, initStyle:function()&#123; var main = document.getElementById('main'); var footer = document.getElementById('footer'); main.style.display = 'block'; footer.style.display = 'block'; &#125;, getUid:function()&#123; return +new Date(); &#125;, sendMessage:function()&#123; var message = document.getElementById('message').value; var select = document.getElementById('selectUserList'); var selectIndex = select.selectedIndex; var optionValue = select.options[selectIndex].value; var optionText = select.options[selectIndex].text; if(message != \"\")&#123; this.socket.emit('message',&#123;uid:this.uid,username:this.username,message:message,to:optionValue,toUser:optionText&#125;); &#125; &#125;, createEleNode:function(ele,text)&#123; var eleNode = document.createElement(ele); var text = document.createTextNode(text); eleNode.appendChild(text); return eleNode; &#125;, updateUlist:function(data)&#123; var onlineLists = document.getElementById(\"onlineUsers\"); var str = \"\"; for(var i in data.onlineUsers)&#123; str += \"&lt;li id='\"+i+\"'&gt;\"+data.onlineUsers[i]+\"&lt;/li&gt;\"; &#125; onlineLists.innerHTML = str; &#125;, updateSelect:function(data)&#123; var selectUserList = document.getElementById('selectUserList'); var str = \"&lt;option value='æ‰€æœ‰äºº'&gt;æ‰€æœ‰äºº&lt;/option&gt;\"; for(var key in data.onlineUsers)&#123; str += \"&lt;option value='\"+key+\"'&gt;\"+data.onlineUsers[key]+\"&lt;/option&gt;\" &#125; selectUserList.innerHTML = str; &#125;, updateNotice:function(msg)&#123; var notice = document.getElementById('notice'); var node = this.createEleNode('li',msg) notice.appendChild(node); &#125;, appendMessage:function(data)&#123; var messageList = document.getElementById(\"messageList\"); var node = CHAT.createEleNode('li','ç”¨æˆ·'+data.username+\"å¯¹\"+data.toUser+\"è¯´ï¼š\"+data.message); console.log(node); messageList.appendChild(node); &#125;, init:function(username)&#123; this.uid = this.getUid(); this.username = username; this.socket = io.connect(); this.socket.on('login',function(data)&#123; //å½“ç”¨æˆ·ç™»é™†çš„æ—¶å€™ï¼Œæ›´æ–°åˆ—è¡¨ CHAT.updateUlist(data); CHAT.updateSelect(data); CHAT.updateNotice(data.userObj.username+\"è¿›å…¥äº†èŠå¤©å®¤\"); &#125;); this.socket.on('logout',function(data)&#123; //å½“ç”¨æˆ·é€€å‡ºæ—¶ï¼Œæ›´æ–°åˆ—è¡¨ CHAT.updateUlist(data); CHAT.updateSelect(data); CHAT.updateNotice(CHAT.username+\"é€€å‡ºäº†èŠå¤©å®¤\"); &#125;); this.socket.on('message',function(data)&#123; CHAT.appendMessage(data); &#125;); this.socket.on('to'+CHAT.uid,function(data)&#123; CHAT.appendMessage(data); &#125;) this.socket.on('disconnect',function()&#123; CHAT.updateNotice(\"æœåŠ¡å™¨æ–­å¼€è¿æ¥\"); &#125;); &#125; &#125; &#125;)()&lt;/script&gt; è¿™é‡Œæ³¨æ„ä¸‹æœ‰ä¸ªåœ°æ–¹ï¼Œæœ‰çš„æ—¶å€™æˆ‘ä»¬è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œä¸èƒ½å¤Ÿç›´æ¥ç”¨this.methodè°ƒç”¨è¯¥æ–¹æ³•ï¼Œå› ä¸ºæ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨ï¼šthis.socket.onçš„æ—¶å€™ï¼Œè¿™ä¸ªå†…éƒ¨çš„thiså·²ç»ä¸æ˜¯å½“å‰å¯¹è±¡äº†ã€‚æ‰€ä»¥æˆ‘ä»¬è¦ç›´æ¥ä½¿ç”¨CHAT.methodæˆ–è€…CHAT.å±æ€§çš„æ–¹æ³•æ¥è°ƒç”¨ã€‚ æˆªå›¾ç»“æœ æ€»ç»“socket.ioå¾ˆå¥½ç”¨ï¼Œå¼€å‘ä¹Ÿå¾ˆç®€å•ï¼ŒèŠ±äº†æ¯”è¾ƒå°‘çš„æ—¶é—´ã€‚ä½†æ˜¯è¿˜æœ‰ä¸€äº›åŠŸèƒ½æ²¡æœ‰å®ç°ï¼Œæ¯”å¦‚å¦‚ä½•å®ç°ç¾¤ç»„ï¼Œä¹Ÿå°±æ˜¯æˆ¿é—´èŠå¤©ï¼Ÿå¦‚ä½•ç»™ä¸åœ¨çº¿çš„ç”¨æˆ·å‘é€èŠå¤©è®°å½•ï¼Ÿå¦‚ä½•åˆ©ç”¨rediså’ŒèŠå¤©å®¤ç»“åˆèµ·æ¥ï¼Ÿ","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/tags/WEBå¼€å‘/"}]},{"title":"ä½¿ç”¨Socket.IOç±»åº“å®ç°WebSocketé€šä¿¡","slug":"ä½¿ç”¨Socket-IOç±»åº“å®ç°WebSocketé€šä¿¡","date":"2016-05-02T09:40:45.000Z","updated":"2016-12-12T03:01:36.000Z","comments":true,"path":"2016/05/02/ä½¿ç”¨Socket-IOç±»åº“å®ç°WebSocketé€šä¿¡/","link":"","permalink":"http://sevencai.github.io/2016/05/02/ä½¿ç”¨Socket-IOç±»åº“å®ç°WebSocketé€šä¿¡/","excerpt":"","text":"Socket.IOæ˜¯ä»€ä¹ˆï¼Ÿ Socket.IO æ˜¯ä¸€ä¸ªç±»åº“ã€‚ å¯ä»¥åšè·¨å¹³å°(æµè§ˆå™¨æˆ–ç§»åŠ¨è®¾å¤‡)ï¼Œæ”¯æŒå¤šç§è¿æ¥æ–¹å¼è‡ªåŠ¨åˆ‡æ¢ï¼Œåœ¨åšå³æ—¶é€šè®¯æ–¹é¢çš„å¼€å‘ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œè€Œä¸”èƒ½å’Œexpressjsæä¾›çš„ä¼ ç»Ÿè¯·æ±‚æ–¹å¼å¾ˆå¥½çš„ç»“åˆã€‚è¿™ä¸ªç±»åº“Node.jsä¸­netæ¨¡å—çš„åŠŸèƒ½ã€‚åŒ…æ‹¬å¯ä»¥WebSocketé€šä¿¡ï¼ŒXHRè½®è¯¢ï¼ŒJSONPè½®è¯¢,å®ƒä¼šè‡ªåŠ¨æ ¹æ®æµè§ˆå™¨é€‰æ‹©é€‚åˆçš„é€šè®¯æ–¹å¼ï¼Œä»è€Œè®©å¼€å‘è€…å¯ä»¥èšç„¦åˆ°åŠŸèƒ½çš„å®ç°è€Œä¸æ˜¯å¹³å°çš„å…¼å®¹æ€§ï¼ŒåŒæ—¶Socket.IOå…·æœ‰ä¸é”™çš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚è¿™ç¯‡æ–‡ç« ï¼Œä¸»è¦ä»¥å®ä¾‹çš„å½¢å¼ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨socket.ioç±»åº“ï¼Œå¦‚ä½•åˆ©ç”¨socket.ioå®ç°å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„é€šä¿¡ï¼Œå¦‚ä½•ä¸expressç»“åˆï¼Œå¦‚ä½•ä½¿ç”¨ä¸åŒå‘½åç©ºé—´ç­‰ç­‰ã€‚å­¦ä¹ å®ƒçš„ç›®çš„ï¼Œæ˜¯æˆ‘æƒ³åšä¸€ä¸ªnodeèŠå¤©å®¤ã€‚ æ­å»ºæµ‹è¯•æœåŠ¡ç«¯ç¯å¢ƒnpm initåˆ©ç”¨npm initå‘½ä»¤ç”Ÿæˆpackage.jsonæ–‡ä»¶ï¼Œå¡«å…¥ç›¸åº”çš„ä¿¡æ¯ã€‚å¤§æ¦‚æ˜¯ä¼šç”Ÿæˆä¸‹é¢çš„ä¸€äº›æ ·å­ã€‚123456789101112&#123; \"name\": \"node-chat\", \"version\": \"1.0.0\", \"description\": \"chatroom based on WebSocket\", \"main\": \"index.js\", \"keywords\": [ \"chatroom\", \"node\" ], \"author\": \"Seven\", \"license\": \"ISC\", //....... å®‰è£…ç›¸åº”çš„åŒ…12npm install --save expressnpm install --save socket.io çœ‹åˆ°æ–‡ä»¶å¤¹å·²ç»ç”Ÿæˆç›¸åº”çš„node_modulesç›®å½•äº†ã€‚ æµ‹è¯•å…ˆæµ‹è¯•ä¸‹ï¼Œåˆ›å»ºindex.jsæµ‹è¯•æœåŠ¡å™¨æ˜¯å¦æ­å»ºå¥½ï¼š1234567891011var app = require('express')();var http = require('http').Server(app);var io = require('socket.io')(http);app.get('/',function(req,res)&#123; res.send('&lt;h1&gt;Welcome&lt;/h1&gt;');&#125;);http.listen(3000,function()&#123; console.log('listen on *:3000');&#125;) è¿™æ—¶å€™å¯ä»¥åœ¨localhostä¸Šè®¿é—®3000ç«¯å£ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨é¡µé¢ä¸Šçœ‹åˆ° welcomeå­—æ ·ï¼Œè¿™æ ·ç®€å•çš„æµ‹è¯•å°±å®Œæˆäº†ã€‚ socket.ioç±»åº“çš„ä½¿ç”¨æ–¹æ³•æ³¨æ„ï¼šSocket.IOç±»åº“çš„ä½¿ç”¨æ–¹æ³•æ¯”è¾ƒç®€å•ï¼Œåˆ›å»ºä¸€ä¸ªSocket.IOæœåŠ¡å™¨å³å¯ï¼Œä½†æ˜¯è¯¥æœåŠ¡å™¨ä¾èµ–äºä¸€ä¸ªå·²ç»åˆ›å»ºå¥½çš„HTTPæœåŠ¡å™¨ã€‚æ‰€ä»¥åœ¨HTTPæœåŠ¡å™¨è¿è¡Œåï¼Œä½¿ç”¨listenæ–¹æ³•ä¸ºè¯¥HTTPæœåŠ¡å™¨åŠ ä¸€ä¸ªSocket.IOæœåŠ¡å™¨ã€‚ 123//å…ˆåˆ›å»ºä¸€ä¸ªservervar sio = require('socket.io');var socket = sio.listen(server); listen æ–¹æ³•è¿”å›çš„å°±æ˜¯ä¸€ä¸ªSocket.IOæœåŠ¡å™¨ã€‚ å½“Socket.IOæœåŠ¡å™¨åˆ›å»ºå®Œæˆåï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å»ºç«‹è”ç³»æ—¶ï¼Œå°±ä¼šè§¦å‘Socket.IOæœåŠ¡å™¨çš„connectionäº‹ä»¶ã€‚ ç„¶åé€šè¿‡ç›‘å¬è¯¥äº‹ä»¶å›è°ƒå‡½æ•°çš„æ–¹æ³•æŒ‡å®šå½“å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯å»ºç«‹è¿æ¥æ—¶æ‰€éœ€è¦æ‰§è¡Œçš„å¤„ç†ã€‚1234567//å‚æ•°socketæ˜¯æœåŠ¡å™¨ç”¨äºä¸å®¢æˆ·ç«¯å»ºç«‹è¿æ¥çš„socketç«¯å£å¯¹è±¡socket.on('connection',function(socket)&#123; //å›è°ƒå‡½æ•°ï¼Œè¿™é‡Œé¢å¯ä»¥é€šè¿‡ä¼ å…¥çš„soketå‚æ•°ç›‘å¬äº‹ä»¶ socket.on('message',function()&#123;&#125;) socket.send(msg) socket.on('disconnect',function()&#123;&#125;)&#125;) ä¸€ä¸ªç®€å•çš„å®Œæ•´å®ä¾‹ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å¦‚ä½•ä¸ºä¸€ä¸ªHTTPæœåŠ¡å™¨é™„åŠ ä¸€ä¸ªSocket.IOæœåŠ¡å™¨ã€‚å½“HTTPæœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚æ—¶ï¼Œè¯»å–index.htmlæ–‡ä»¶ä¸­çš„å†…å®¹å¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚å½“å®¢æˆ·ç«¯ä¸Socket.IOæœåŠ¡å™¨ç«¯å»ºç«‹è¿æ¥åï¼Œå‘å®¢æˆ·ç«¯å‘é€â€˜ä½ å¥½â€™æ¶ˆæ¯å­—ç¬¦ä¸²ã€‚ 1234567891011121314151617181920212223242526272829var http = require('http');var sio = require('socket.io');var fs = require('fs');//å…ˆcreateSevervar server = http.createServer(function(req,res)&#123; res.writeHead('200',&#123;'Content-Type':'text/html'&#125;); res.end(fs.readFileSync('./index.html'));&#125;);server.listen(3000,function()&#123; console.log(\"listen on 3000 port\");&#125;);//listenä¸Šé¢çš„serveråˆ›å»ºä¸€ä¸ªsocket.ioæœåŠ¡å™¨var socket = sio.listen(server);socket.on('connection',function(socket)&#123; console.log('å®¢æˆ·ç«¯å·²å»ºç«‹'); socket.send(\"hello\"); socket.on('message',function(msg)&#123; console.log('æ¥æ”¶åˆ°ä¸€ä¸ªæ¶ˆæ¯:'+msg); &#125;); socket.on('disconnect',function()&#123; console.log('å®¢æˆ·ç«¯è¿æ¥æ–­å¼€'); &#125;)&#125;); index.htmlæ–‡ä»¶å¦‚ä¸‹ï¼š1234567891011&lt;script src=\"/socket.io/socket.io.js\"&gt;&lt;/script&gt;&lt;script&gt; var socket = io.connect(); socket.on('message',function(data)&#123; console.log(data); socket.send(\"messages are received\"); &#125;); socket.on('disconnect',function()&#123; console.log(\"æœåŠ¡å™¨ç«¯æ–­å¼€è¿æ¥\"); &#125;);&lt;/script&gt; ç°åœ¨ï¼Œä½ è‚¯å®šä¼šæœ‰ç–‘é—®ï¼Œè¿™ä¸ªå‰é¢å¼•å…¥çš„æ–‡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿ/socket.io/socket.io.jsç”±æœåŠ¡å™¨ç«¯Socket.IOç±»åº“è‡ªåŠ¨æä¾›ï¼Œæ‰€ä»¥å’±ä»¬ä¸éœ€è¦å†å®¢æˆ·ç«¯å®é™…æ”¾ç½®ä¸€ä¸ªsocket.io.jsæ–‡ä»¶ã€‚ åœ¨è„šæœ¬ä»£ç ä¸­ï¼Œé¦–å…ˆæˆ‘ä»¬åˆ©ç”¨/socket.io/socket.io.jsç±»åº“ä¸­çš„io.connectæ–¹æ³•è¿æ¥åˆ°æœåŠ¡å™¨ç«¯socket.IOæœåŠ¡å™¨ã€‚var socket = io.connect();io.connectæ–¹æ³•è¿”å›äº†ä¸€ä¸ªsocketå¯¹è±¡ã€‚ä»£è¡¨ä¸€ä¸ªç”¨äºæœåŠ¡å™¨å»ºç«‹è¿æ¥çš„å®¢æˆ·ç«¯socketç«¯å£å¯¹è±¡ã€‚ å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯å»ºç«‹è¿æ¥åï¼Œè§¦å‘äº†æˆ‘ä»¬æœåŠ¡å™¨ç«¯çš„sendäº‹ä»¶ï¼Œè¿™æ—¶å€™æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ï¼Œåˆè§¦å‘äº†å®¢æˆ·ç«¯socketçš„messageäº‹ä»¶ã€‚è¿™æ—¶å€™å®¢æˆ·ç«¯ä¼šlogå‡ºæ”¶åˆ°çš„dataï¼Œæ˜¾ç¤ºåœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸Šã€‚ç„¶åå®¢æˆ·ç«¯åˆç»™æœåŠ¡å™¨ç«¯å‘é€äº†ä¸€ä¸ªmessages are receivedæ¶ˆæ¯ï¼Œè§¦å‘äº†æœåŠ¡å™¨ç«¯çš„messageäº‹ä»¶ï¼Œå¹¶æ‰“å°å‡ºæ¥æ”¶åˆ°ä¸€ä¸ªæ¶ˆæ¯:messages are receivedã€‚ å½“æœåŠ¡å™¨ç«¯å’ŒæœåŠ¡å™¨ç«¯æ–­å¼€è”ç³»æ—¶ï¼Œåˆè°ƒç”¨disconnectäº‹ä»¶ã€‚ è¿™é‡Œä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å¤„ç†æ¶ˆæ¯æœºåˆ¶å®Œå…¨ç›¸åŒï¼Œå› ä¸ºSocket.IOç¡®ä¿äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ï¼Œå…±äº«äº†ç›¸åŒçš„APIã€‚ socket.ioçš„emitæ–¹æ³•åœ¨ä½¿ç”¨Socket.IOç±»åº“æ—¶ï¼ŒæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´é™¤äº†å¯ä»¥äº’ç›¸å‘é€æ¶ˆæ¯ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨socketç«¯å£å¯¹è±¡çš„emitæ–¹æ³•ï¼Œäº’ç›¸å‘é€äº‹ä»¶ã€‚ 1socket.emit(event,data,[callback]) eventè¡¨ç¤ºï¼šå‚æ•°å€¼ä¸ºä¸€ä¸ªç”¨äºæŒ‡å®šäº‹ä»¶åçš„å­—ç¬¦ä¸²ã€‚dataå‚æ•°å€¼ï¼šä»£è¡¨è¯¥äº‹ä»¶ä¸­æºå¸¦çš„æ•°æ®ã€‚è¿™ä¸ªæ•°æ®å°±æ˜¯è¦å‘é€ç»™å¯¹æ–¹çš„æ•°æ®ã€‚æ•°æ®å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ã€‚callbackå‚æ•°ï¼šå€¼ä¸ºä¸€ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šä¸€ä¸ªå½“å¯¹æ–¹ç¡®å®šæ¥æ”¶åˆ°æ•°æ®æ—¶è°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚ ä¸€æ–¹ä½¿ç”¨emitå‘é€äº‹ä»¶åï¼Œå¦ä¸€æ–¹å¯ä»¥ä½¿ç”¨on,æˆ–è€…onceæ–¹æ³•ï¼Œå¯¹è¯¥äº‹ä»¶è¿›è¡Œç›‘å¬ã€‚onceå’Œonä¸åŒçš„åœ°æ–¹å°±æ˜¯ï¼Œonceåªç›‘å¬ä¸€æ¬¡ï¼Œä¼šåœ¨å›è°ƒå‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œå–æ¶ˆç›‘å¬ã€‚ 12socket.on(event,function(data,fn)&#123;&#125;)socket.once(event,function(data,fn)&#123;&#125;) å†ä½“ä¼šä¸‹emitçš„ä¸‰ä¸ªå‚æ•°ï¼šé¦–å…ˆæ˜¯æœåŠ¡å™¨ç«¯ï¼š1234567891011121314var socket = sio.listen(server);socket.on('connection',function(socket)&#123; console.log('å®¢æˆ·ç«¯å·²å»ºç«‹'); socket.emit('setName','Seven',function(data1,data2)&#123; console.log('å®¢æˆ·ç«¯ä¼ æ¥çš„æ•°æ®1&gt;'+data1); console.log('å®¢æˆ·ç«¯ä¼ æ¥çš„æ•°æ®2&gt;'+data2); &#125;); socket.on('disconnect',function()&#123; console.log('å®¢æˆ·ç«¯è¿æ¥æ–­å¼€'); &#125;)&#125;); å†æ˜¯å®¢æˆ·ç«¯ï¼š123456789101112&lt;script src=\"/socket.io/socket.io.js\"&gt;&lt;/script&gt;&lt;script&gt; var socket = io.connect(); socket.on('setName',function(data,fn)&#123; console.log(data); //fnä¸ºå½“å¯¹æ–¹ç¡®è®¤æ”¶åˆ°æ•°æ®æ—¶ï¼Œè°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚ fn(\"Jason\",\"Jade\"); &#125;); socket.on('disconnect',function()&#123; console.log(\"æœåŠ¡å™¨ç«¯æ–­å¼€è¿æ¥\"); &#125;);&lt;/script&gt; åœ¨Expressä¸­ä½¿ç”¨Socket.IOå…ˆå‰æˆ‘ä»¬æµ‹è¯•ç¯å¢ƒçš„æ—¶å€™ï¼Œå°±æœ‰ç”¨åˆ°express,æˆ‘ä»¬å¯ä»¥é€šè¿‡Expresså¾ˆå®¹æ˜“çš„ä½¿ç”¨Socket.IOã€‚åœ¨åŸæ¥çš„ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ˜¯socketå¯¹è±¡çš„setå’Œgetæ–¹æ³•æ¥è®¾ç½®å’Œè·å¾—æ•°æ®ã€‚ä½†ç°åœ¨å·²ç»åœ¨æ–°ç‰ˆæœ¬ä¸­åºŸé™¤äº†ï¼Œæ‰€ä»¥å…·ä½“è¿™ä¸¤ä¸ªæ–¹æ³•å°±ä¸è®²è§£äº†ã€‚åº•ä¸‹è¿˜æ˜¯æœ‰è€å†™æ³•çš„ç¤ºä¾‹çš„ã€‚æ”¹è¿›çš„æ–¹æ³•æ˜¯å†socketå¯¹è±¡ä¸Šç›´æ¥è®¾ç½®å±æ€§å’Œå€¼ã€‚å…·ä½“å¯ä»¥çœ‹æŠ¥é”™è§£å†³è¿™ç¯‡åšå®¢ã€‚ è¿™é‡Œä¾‹å­è·Ÿexpressçš„å…³è”åˆ°ä¸æ˜¯å¾ˆå¤§ï¼Œåªæ˜¯ç®€å•ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°±æ˜¯åˆ©ç”¨var server = http.createServer(app);æŠŠexpresså…³è”èµ·æ¥äº†ã€‚ç„¶åæˆ‘ä»¬å°±å¯ä»¥å»è°ƒç”¨expressçš„apiã€‚ æœåŠ¡å™¨ç«¯ä»£ç ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041var express = require('express');var http = require('http');var sio = require('socket.io');var app = express();var server = http.createServer(app);app.get('/',function(req,res)&#123; res.sendFile(__dirname+'/index.html');&#125;);server.listen(3000,function()&#123; console.log(\"listening on port 3000\");&#125;);var socket = sio.listen(server);socket.on('connection',function(socket)&#123; socket.on('set nickName',function(name)&#123; //socket.setåœ¨1.xç‰ˆæœ¬å·²ç»è¢«åºŸé™¤ // socket.set('nickName',name,function(name))&#123; // socket.emit('send nickName',name) // &#125; socket.nickName = name; socket.emit('send nickName',name) &#125;); socket.on('get nickName',function()&#123; //socket.getåœ¨1.xä¹Ÿè¢«åºŸé™¤ // socket.get('nickName',function(err,name)&#123; // if(err)&#123; // socket.emit('err',err.message); // &#125;else&#123; // socket.emit('send nickName',name); // &#125; // &#125;) var name = socket.nickName; if(name)&#123; socket.emit('send nickName',name); &#125; &#125;);&#125;) å®¢æˆ·ç«¯ä»£ç ï¼šæœ‰ä¸€ä¸ªå¯ä»¥è®¾ç½®æ˜µç§°çš„ï¼Œå½“è®¾ç½®äº†åï¼Œæˆ‘ä»¬ä¿å­˜åˆ°socketå¯¹è±¡ä¸­ã€‚ 123&lt;input type=\"text\" id=\"nickname\"&gt;&lt;input type=\"button\" onclick=\"setNickName()\" value=\"è®¾ç½®æ˜µç§°\"&gt;&lt;input type=\"button\" onclick=\"getNickName()\" value=\"è·å–æ˜µç§°\"&gt; 12345678910111213141516&lt;script src=\"/socket.io/socket.io.js\"&gt;&lt;/script&gt;&lt;script&gt;var socket = io.connect();function setNickName()&#123; socket.emit('set nickName',document.getElementById(\"nickname\").value);&#125;function getNickName()&#123; socket.emit('get nickName');&#125;socket.on('send nickName',function(data)&#123; console.log(\"My name is \"+data);&#125;);socket.on('err',function(data)&#123; console.log('æœåŠ¡å™¨å‡ºç°é”™è¯¯ï¼š'+data);&#125;)&lt;/script&gt; å¹¿æ’­æ¶ˆæ¯å½“å¤šä¸ªå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥åï¼ŒSocket.IOæœåŠ¡å™¨å…·æœ‰ä¸€ä¸ªsocketså±æ€§ï¼Œå±æ€§å€¼ä¸ºæ‰€æœ‰ä¸å®¢æˆ·ç«¯å»ºç«‹è¿æ¥çš„socketå¯¹è±¡ã€‚å¯ä»¥åˆ©ç”¨è¯¥å¯¹è±¡çš„sendæ–¹æ³•æˆ–è€…emitæ–¹æ³•å‘æ‰€æœ‰å®¢æˆ·ç«¯å¹¿æ’­æ¶ˆæ¯ï¼Œå¦‚ä¸‹ï¼š 12IO.sockets.send(\"user connected\");IO.sockets.emit(\"login\",names); ç„¶åï¼Œå½“æˆ‘ä»¬æŸä¸ªå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ä»¥åï¼Œç”¨äºä¸è¯¥å®¢æˆ·ç«¯è¿æ¥çš„socketå¯¹è±¡ï¼Œå°±æœ‰ä¸€ä¸ªbroadcastå¯¹è±¡ï¼Œä»£è¡¨æ‰€æœ‰ä¸å…¶ä»–Socket.IOå®¢æˆ·ç«¯å»ºç«‹è¿æ¥çš„socketå¯¹è±¡ã€‚å¯ä»¥åˆ©ç”¨è¯¥å¯¹è±¡çš„sendæ–¹æ³•å’Œemitæ–¹æ³•å‘æ‰€æœ‰å…¶ä»–å®¢æˆ·ç«¯å¹¿æ’­æ¶ˆæ¯ã€‚å¦‚ä¸‹ï¼š12socket.broadcast.send('user connected');socket.broadcase.emit('login',names)ï¼› ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸ªå¹¿æ’­çš„å°å®ä¾‹ï¼Œå¯ä»¥å½“åšèŠå¤©å®¤çš„é›å½¢äº†ã€‚å…ˆçœ‹ä¸‹æœ€åçš„ç»“æœï¼š ä¾‹å­ä¸­æˆ‘ä»¬çœ‹çš„å¾ˆæ¸…æ¥šï¼Œå½“æœ‰ä¸åŒçš„ç”¨æˆ·ç™»é™†è¿›æ¥çš„æ—¶å€™ï¼Œç”¨æˆ·åˆ—è¡¨æ˜¯ä¸æ–­çš„æ›´æ–°çš„ã€‚å¯ä»¥åŠ¨æ€çš„æ˜¾ç¤ºå‡ºåœ¨çº¿çš„äººæ•°ã€‚ä¸»è¦å°±æ˜¯ç”¨åˆ°çš„æˆ‘ä»¬ä¸Šé¢çš„æ–¹æ³•io.sockets.emit(&#39;login&#39;,names)ã€‚ æœåŠ¡å™¨ç«¯çš„ä»£ç ï¼š 12345678910111213//.....è·Ÿå‰é¢ä¸€æ ·ï¼ˆçœç•¥ï¼‰var io = sio.listen(server);var names = [];io.on('connection',function(socket)&#123; socket.emit('login',names); socket.on('login',function(name)&#123; names.push(name); io.sockets.emit('login',names); &#125;);&#125;) å®¢æˆ·ç«¯ä»£ç ï¼š123456789101112131415161718ç”¨æˆ·åï¼š&lt;input type=\"text\" id=\"username\"&gt;&lt;input type=\"button\" value=\"ç™»é™†\" onclick=\"add()\"&gt;&lt;p id=\"result\"&gt;&lt;/p&gt;&lt;script src=\"/socket.io/socket.io.js\"&gt;&lt;/script&gt;&lt;script&gt; var socket = io.connect(); socket.on('login',function(names)&#123; var str = \"\"; names.forEach(function(name)&#123; str += \"ç”¨æˆ· \"+name+\" å·²ç™»é™†ã€‚&lt;br /&gt;\"; &#125;) document.getElementById('result').innerHTML = str; &#125;) function add()&#123; socket.emit('login',document.getElementById('username').value); &#125;&lt;/script&gt; ä¸»è¦å°±æ˜¯è¿™æ®µä»£ç ï¼šå½“å®¢æˆ·ç«¯æœ‰äººç™»é™†çš„æ—¶å€™ï¼Œemitå‘é€æ•°ç»„äººåçš„ä¿¡æ¯ç»™å®¢æˆ·ç«¯ã€‚æ³¨æ„è¿™é‡Œçš„æ³¨é‡Šï¼Œæ˜¯io.sockets.emitçš„å¦å¤–ä¸€ç§æ›¿ä»£çš„å†™æ³•ã€‚123456socket.on('login',function(name)&#123; names.push(name); io.sockets.emit('login',names); //socket.emit('login',names); //socket.broadcast.emit('login',names);&#125;); ä½¿ç”¨å‘½åç©ºé—´å¦‚æœå¼€å‘è€…æƒ³è¦åœ¨ä¸€ä¸ªç‰¹å®šçš„åº”ç”¨ç¨‹åºä¸­å®Œå…¨æ§åˆ¶æ¶ˆæ¯ä¸äº‹ä»¶å‘é€ï¼Œåªéœ€è¦ä¸€ä¸ªé»˜è®¤çš„/å°±å¤Ÿäº†ï¼Œä½†æ˜¯å¦‚æœå¼€å‘è€…éœ€è¦å°†ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºä½œä¸ºç¬¬ä¸‰æ–¹æœåŠ¡æä¾›ç»™å…¶ä»–åº”ç”¨ç¨‹åºï¼Œåˆ™éœ€è¦ä¸ºä¸€ä¸ªç”¨äºä¸å®¢æˆ·ç«¯è¿æ¥çš„socketç«¯å£å®šä¹‰ä¸€ä¸ªç‹¬ç«‹çš„å‘½åç©ºé—´ã€‚ åœ¨Socket.IOä¸­ï¼Œå¯ä»¥ä½¿ç”¨Socket.IOæœåŠ¡å™¨å¯¹è±¡çš„ofæ–¹æ³•æ¥å®šä¹‰å‘½åç©ºé—´ã€‚ä»£ç å¦‚ï¼šio.of(namespace)ã€‚ æœåŠ¡å™¨ç«¯ä»£ç ï¼š1234567891011121314151617//.....è·Ÿå‰é¢ä¸€æ ·ï¼ˆçœç•¥ï¼‰var io = sio.listen(server);var chat = io.of('/chat').on('connection',function(socket)&#123; socket.send('welcome to namespace:chat'); socket.on('message',function(msg)&#123; console.log('chat namespace has received msg: '+msg); &#125;)&#125;);var news = io.of('/news').on('connection',function(socket)&#123; socket.emit('send message','welcome to namespace:news'); socket.on('send message',function(data)&#123; console.log('news namespace has received mes: '+data); &#125;)&#125;) å®¢æˆ·ç«¯ä»£ç ï¼š12345678910111213141516171819&lt;script src=\"/socket.io/socket.io.js\"&gt;&lt;/script&gt;&lt;script&gt; var chat = io.connect('http://localhost:3000/chat'); var news = io.connect('http://localhost:3000/news'); chat.on('connect',function()&#123; chat.send('æ‚¨å¥½!'); chat.on('message',function(data)&#123; console.log('ä»chatå‘½åç©ºé—´æ”¶åˆ°æ¶ˆæ¯ï¼š'+data); &#125;); &#125;); news.on('connect',function()&#123; news.on('send message',function(data)&#123; console.log('ä»newså‘½åç©ºé—´æ”¶åˆ°æ¶ˆæ¯ï¼š'+data); &#125;) news.emit('send message','hello'); &#125;)&lt;/script&gt; ä»£ç åŸºæœ¬ä¸Šæ²¡æœ‰ä»€ä¹ˆæ”¹åŠ¨ï¼Œå°±æ˜¯å¤šäº†ä¸ªä½¿ç”¨å‘½åç©ºé—´çš„ã€‚ä¸»è¦è¦çŸ¥é“ofçš„ç”¨æ³•ã€‚ æ€»ç»“ä¸»è¦æ˜¯ä»‹ç»äº†Socket.IOç±»åº“çš„åŸºæœ¬ä»‹ç»ï¼ŒåŒ…æ‹¬è¯­æ³•å’Œä½œç”¨ã€‚å¦‚ä½•å®‰è£…ï¼Œå¦‚ä½•åˆ›å»ºSocket.IOæœåŠ¡å™¨ã€‚å¦‚ä½•å‘é€äº‹ä»¶ï¼Œå¦‚ä½•å¹¿æ’­ï¼Œå¦‚ä½•åœ¨Expressæ¡†æ¶ä¸­ç”¨åˆ°socket.ioç±»åº“ã€‚é‚£ä¹ˆï¼Œä½ æœ€åè‚¯å®šæƒ³çŸ¥é“ï¼Œè¿™ä¸ªSocket.IOå’ŒWebSocketçš„åŒºåˆ«å’Œè”ç³»æ—¶ä»€ä¹ˆï¼Ÿsocket.ioå°è£…äº†websocket,åŒæ—¶è¿˜åŒ…å«å…¶ä»–çš„åŠŸèƒ½ï¼Œæ¯”å¦‚xhrè½®è¯¢ï¼Œjsonpè½®è¯¢ç­‰ç­‰ã€‚å› ä¸ºä¸æ˜¯æ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒwebsocket,é€šè¿‡socket.ioçš„å°è£…ï¼Œæˆ‘ä»¬ä¸éœ€è¦çŸ¥é“é‡Œé¢ç”¨åˆ°ä»€ä¹ˆè¿æ¥æ–¹å¼ï¼Œä»»ä½•æµè§ˆå™¨éƒ½å¯ä»¥åˆ©ç”¨socket.ioæ¥å»ºç«‹å¼‚æ­¥çš„è¿æ¥ã€‚è¦è®°ä½ï¼Œå¦‚æœæµè§ˆå™¨ä¸­ä½¿ç”¨äº†socket.ioçš„jsï¼Œé‚£ä¹ˆæœåŠ¡å™¨ç«¯ä¹Ÿè¦ä¸€æ ·ã€‚å­¦ä¹ å†…å®¹éƒ¨åˆ†æ¥è‡ªã€ŠNode.jsæƒå¨æŒ‡å—ã€‹ï¼Œæ„Ÿè°¢ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"http://sevencai.github.io/tags/Nodejs/"}]},{"title":"HTTPè¿æ¥ç®¡ç†","slug":"HTTPè¿æ¥ç®¡ç†","date":"2016-05-01T03:34:14.000Z","updated":"2016-12-12T02:28:50.000Z","comments":true,"path":"2016/05/01/HTTPè¿æ¥ç®¡ç†/","link":"","permalink":"http://sevencai.github.io/2016/05/01/HTTPè¿æ¥ç®¡ç†/","excerpt":"","text":"ä¸–ç•Œä¸Šå‡ ä¹æ‰€æœ‰çš„ HTTP é€šä¿¡éƒ½æ˜¯ç”± TCP/IP æ‰¿è½½çš„ï¼ŒTCP/IP æ˜¯å…¨çƒè®¡ç®—æœºåŠç½‘ç»œè®¾å¤‡éƒ½åœ¨ä½¿ç”¨çš„ä¸€ç§å¸¸ç”¨çš„åˆ†ç»„äº¤æ¢ç½‘ç»œåˆ†å±‚åè®®é›†ã€‚å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºå¯ä»¥æ‰“å¼€ä¸€æ¡ TCP/IP è¿æ¥ï¼Œè¿æ¥åˆ°å¯èƒ½è¿è¡Œåœ¨ä¸–ç•Œä»»ä½•åœ°æ–¹çš„æœåŠ¡å™¨åº”ç”¨ç¨‹åºã€‚ä¸€æ—¦è¿æ¥å»ºç«‹èµ·æ¥äº†ï¼Œåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„è®¡ç®—æœºä¹‹é—´äº¤æ¢çš„æŠ¥æ–‡å°±æ°¸è¿œä¸ä¼šä¸¢å¤±ã€å—æŸæˆ–å¤±åºã€‚- from ã€ŠHTTPæƒå¨æŒ‡å—ã€‹ æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®é€šè¿‡æ—è¾¹ç›®å½•æ£€ç´¢è‡ªå·±æƒ³è¦çœ‹çš„éƒ¨åˆ†ã€‚æ–‡ç« ä¸»è¦è®²è§£è¿™å‡ ä¸ªé—®é¢˜ï¼š HTTPæ˜¯å¦‚ä½•ä½¿ç”¨TCPè¿æ¥çš„?TCPæœ‰å“ªäº›ç‰¹ç‚¹? TCPè¿æ¥çš„æ—¶å»¶ï¼Œç“¶é¢ˆä»¥åŠå­˜åœ¨çš„éšœç¢ã€‚ HTTPä¼˜åŒ–ï¼ŒåŒ…æ‹¬å¹¶è¡Œè¿æ¥ã€keep-aliveï¼ˆæŒä¹…è¿æ¥ï¼‰å’Œç®¡é“åŒ–è¿æ¥ã€‚ ç®¡ç†è¿æ¥æ—¶å¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜ï¼Œåº”è¯¥ä»¥åŠä¸åº”è¯¥åšçš„äº‹æƒ…ã€‚ TCPé“¾æ¥HTTPè¿æ¥æ˜¯HTTPæŠ¥æ–‡ä¼ è¾“çš„å…³é”®é€šé“ã€‚è¿™é‡Œçš„HTTPè¿æ¥æŒ‡çš„å°±æ˜¯TCPè¿æ¥å’Œä¸€äº›å®ç”¨é“¾æ¥çš„è§„åˆ™ã€‚ TCPçš„å¯é æ•°æ®ç®¡é“TCP ä¸º HTTP æä¾›äº†ä¸€æ¡å¯é çš„æ¯”ç‰¹ä¼ è¾“ç®¡é“ã€‚ä» TCP è¿æ¥ä¸€ç«¯å¡«å…¥çš„å­—èŠ‚ä¼šä»å¦ä¸€ç«¯ä»¥åŸæœ‰çš„é¡ºåºã€æ­£ç¡®åœ°ä¼ é€å‡ºæ¥ æ³¨æ„è¿™é‡Œçš„å¯é çš„æ¯”ç‰¹ä¼ è¾“ç®¡é“ã€‚ TCPä¼šæŒ‰åºï¼Œæ— å·®é”™çš„æ‰¿è½½HTTPæ•°æ®ã€‚ä¸‹é¢çœ‹çœ‹Webæµè§ˆå™¨é€šè¿‡TCPè¿æ¥å’ŒWebæœåŠ¡å™¨è¿›è¡Œäº¤äº’çš„è¿‡ç¨‹ã€‚ TCPæµæ˜¯åˆ†æ®µçš„ã€ç”±IPåˆ†ç»„ä¼ é€TCP çš„æ•°æ®æ˜¯é€šè¿‡åä¸º IP åˆ†ç»„ï¼ˆæˆ– IP æ•°æ®æŠ¥ï¼‰çš„å°æ•°æ®å—æ¥å‘é€çš„ã€‚è¿™æ ·çš„è¯ï¼ŒHTTP å°±æ˜¯â€œHTTP over TCP over IPâ€è¿™ä¸ªâ€œåè®®æ ˆâ€ä¸­çš„æœ€é¡¶å±‚äº†ã€‚å…¶å®‰å…¨ç‰ˆæœ¬ HTTPS å°±æ˜¯åœ¨ HTTP å’Œ TCP ä¹‹é—´æ’å…¥äº†ä¸€ä¸ªï¼ˆç§°ä¸º TLS æˆ– SSLçš„ï¼‰å¯†ç åŠ å¯†å±‚ã€‚ HTTP è¦ä¼ é€ä¸€æ¡æŠ¥æ–‡æ—¶ï¼Œä¼šä»¥æµçš„å½¢å¼å°†æŠ¥æ–‡æ•°æ®çš„å†…å®¹é€šè¿‡ä¸€æ¡æ‰“å¼€çš„ TCP è¿æ¥æŒ‰åºä¼ è¾“ã€‚TCP æ”¶åˆ°æ•°æ®æµä¹‹åï¼Œä¼šå°†æ•°æ®æµç æˆè¢«ç§°ä½œæ®µçš„å°æ•°æ®å—ï¼Œå¹¶å°†æ®µå°è£…åœ¨ IP åˆ†ç»„ä¸­ï¼Œé€šè¿‡å› ç‰¹ç½‘è¿›è¡Œä¼ è¾“ã€‚æ‰€æœ‰è¿™äº›å·¥ä½œéƒ½æ˜¯ç”± TCP/IP è½¯ä»¶æ¥å¤„ç†çš„ï¼ŒHTTP ç¨‹åºå‘˜ä»€ä¹ˆéƒ½çœ‹ä¸åˆ°ã€‚ æˆ–è®¸æˆ‘ä»¬å¯ä»¥ä»ä¸‹é¢è¿™å¼ å›¾çœ‹å‡ºç‚¹ä»€ä¹ˆï¼š æ¯ä¸ª TCP æ®µéƒ½æ˜¯ç”± IP åˆ†ç»„æ‰¿è½½ï¼Œä»ä¸€ä¸ª IP åœ°å€å‘é€åˆ°å¦ä¸€ä¸ª IP åœ°å€çš„ã€‚æ¯ä¸ª IPåˆ†ç»„ä¸­éƒ½åŒ…æ‹¬ï¼š ä¸€ä¸ª IP åˆ†ç»„é¦–éƒ¨ï¼ˆé€šå¸¸ä¸º 20 å­—èŠ‚ï¼‰ï¼› ä¸€ä¸ª TCP æ®µé¦–éƒ¨ï¼ˆé€šå¸¸ä¸º 20 å­—èŠ‚ï¼‰ï¼› ä¸€ä¸ª TCP æ•°æ®å—ï¼ˆ0 ä¸ªæˆ–å¤šä¸ªå­—èŠ‚ï¼‰ã€‚ ä¸Šé¢çš„é‚£å¼ å›¾ä¸­å¯ä»¥çœ‹åˆ°ä¼ è¾“å±‚é‚£éƒ¨åˆ†ï¼ŒåŒ…å«çš„ä¸‰ä¸ªéƒ¨åˆ†ã€‚ IP é¦–éƒ¨åŒ…å«äº†æºå’Œç›®çš„ IP åœ°å€ã€é•¿åº¦å’Œå…¶ä»–ä¸€äº›æ ‡è®°ã€‚TCP æ®µçš„é¦–éƒ¨åŒ…å«äº† TCPç«¯å£å·ã€TCP æ§åˆ¶æ ‡è®°ï¼Œä»¥åŠç”¨äºæ•°æ®æ’åºå’Œå®Œæ•´æ€§æ£€æŸ¥çš„ä¸€äº›æ•°å­—å€¼ã€‚ ä¿æŒTCPè¿æ¥çš„æ­£ç¡®è¿è¡Œåœ¨ä»»æ„æ—¶åˆ»è®¡ç®—æœºéƒ½å¯ä»¥æœ‰å‡ æ¡ TCP è¿æ¥å¤„äºæ‰“å¼€çŠ¶æ€ã€‚TCP æ˜¯é€šè¿‡ç«¯å£å·æ¥ä¿æŒæ‰€æœ‰è¿™äº›è¿æ¥çš„æ­£ç¡®è¿è¡Œçš„ã€‚ å…³äºIPå’Œç«¯å£ä¸‹é¢è¿™ä¸ªæ¯”å–»æˆ‘è§‰å¾—ç‰¹åˆ«æ£’ï¼š ç«¯å£å·å’Œé›‡å‘˜ä½¿ç”¨çš„ç”µè¯åˆ†æœºå·å¾ˆç±»ä¼¼ã€‚å°±åƒå…¬å¸çš„æ€»æœºå·ç èƒ½å°†ä½ æ¥åˆ°å‰å°ï¼Œè€Œåˆ†æœºå·å¯ä»¥å°†ä½ æ¥åˆ°æ­£ç¡®çš„é›‡å‘˜ä½ç½®ä¸€æ ·ï¼ŒIP åœ°å€å¯ä»¥å°†ä½ è¿æ¥åˆ°æ­£ç¡®çš„è®¡ç®—æœºï¼Œè€Œç«¯å£å·åˆ™å¯ä»¥å°†ä½ è¿æ¥åˆ°æ­£ç¡®çš„åº”ç”¨ç¨‹åºä¸Šå»ã€‚ TCPæ˜¯é€šè¿‡ä¸‹é¢4ä¸ªå€¼æ¥è¯†åˆ«çš„ï¼š&lt; æº IP åœ°å€ã€æºç«¯å£å·ã€ç›®çš„ IP åœ°å€ã€ç›®çš„ç«¯å£å· &gt; è¿™ä¸ªè¯†åˆ«æ ‡è¯†å°±åƒäººçš„IDä¸€æ ·ï¼Œå”¯ä¸€çš„å®šä¹‰äº†ä¸€æ¡è¿æ¥ã€‚ä¸¤ä¸ªä¸åŒçš„ TCP è¿æ¥ä¸èƒ½æ‹¥æœ‰4ä¸ªå®Œå…¨ç›¸åŒçš„åœ°å€ç»„ä»¶å€¼ã€‚ è¿™å¼ å›¾ï¼šæ‰¿è½½ TCP æ®µçš„ IP åˆ†ç»„ï¼Œå®ƒæ‰¿è½½äº† TCP æ•°æ®æµä¸­çš„å°å—æ•°æ®ã€‚æ˜¯çœŸå®æµåŠ¨åœ¨TCPé€šé“ä¸­çš„å°æ•°æ®åŒ…ã€‚ å†å¼ºè°ƒä¸‹ï¼šæ³¨æ„ï¼Œæœ‰äº›è¿æ¥å…±äº«äº†ç›¸åŒçš„ç›®çš„ç«¯å£å·ï¼ˆC å’Œ D éƒ½ä½¿ç”¨ç›®çš„ç«¯å£å· 80ï¼‰ã€‚æœ‰äº›è¿æ¥ä½¿ç”¨äº†ç›¸åŒçš„æº IP åœ°å€ï¼ˆB å’Œ Cï¼‰ã€‚æœ‰äº›ä½¿ç”¨äº†ç›¸åŒçš„ç›®çš„ IP åœ°å€ï¼ˆA å’Œ Bï¼ŒCå’Œ Dï¼‰ã€‚ä½†æ²¡æœ‰ä¸¤ä¸ªä¸åŒè¿æ¥æ‰€æœ‰çš„ 4 ä¸ªå€¼éƒ½ä¸€æ ·ã€‚ ç”¨TCPå¥—æ¥å­—ç¼–ç¨‹æ“ä½œç³»ç»Ÿæä¾›äº†ä¸€äº›æ“çºµå…¶ TCP è¿æ¥çš„å·¥å…·ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ª TCP ç¼–ç¨‹æ¥å£ã€‚ä¸‹é¢æ˜¾ç¤ºäº†å¥—æ¥å­— API æä¾›çš„ä¸€äº›ä¸»è¦æ¥å£ã€‚è¿™ä¸ªå¥—æ¥å­— APIå‘ HTTP ç¨‹åºå‘˜éšè—äº† TCP å’Œ IP çš„æ‰€æœ‰ç»†èŠ‚ã€‚å¥—æ¥å­— API æœ€åˆæ˜¯ä¸º Unix æ“ä½œç³»ç»Ÿå¼€å‘çš„ï¼Œä½†ç°åœ¨å‡ ä¹æ‰€æœ‰çš„æ“ä½œç³»ç»Ÿå’Œè¯­è¨€ä¸­éƒ½æœ‰å…¶å˜ä½“å­˜åœ¨ã€‚socketâ€¦ æ³¨æ„å¥—æ¥å­—ä¸æ˜¯åè®®ï¼Œæ˜¯ä¸€ä¸ªæ¥å£ã€‚æˆ‘ä»¬ç”¨å®ƒæ¥ç¼–ç¨‹ã€‚ å¥—æ¥å­— API å…è®¸ç”¨æˆ·åˆ›å»º TCP çš„ç«¯ç‚¹æ•°æ®ç»“æ„ï¼Œå°†è¿™äº›ç«¯ç‚¹ä¸è¿œç¨‹æœåŠ¡å™¨çš„ TCPç«¯ç‚¹è¿›è¡Œè¿æ¥ï¼Œå¹¶å¯¹æ•°æ®æµè¿›è¡Œè¯»å†™ã€‚TCP API éšè—äº†æ‰€æœ‰åº•å±‚ç½‘ç»œåè®®çš„æ¡æ‰‹ç»†èŠ‚ï¼Œä»¥åŠ TCP æ•°æ®æµä¸ IP åˆ†ç»„ä¹‹é—´çš„åˆ†æ®µå’Œé‡è£…ç»†èŠ‚ã€‚ ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹TCPå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ˜¯å¦‚ä½•é€šè¿‡TCPå¥—æ¥å­—è¿›è¡Œé€šä¿¡çš„ï¼› å…¶å®æ˜¯WebæœåŠ¡å™¨ä¸€ç›´ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥ã€‚ æˆ‘ä»¬ä» Web æœåŠ¡å™¨ç­‰å¾…è¿æ¥å¼€å§‹ã€‚å®¢æˆ·ç«¯æ ¹æ® URL åˆ¤å®šå‡º IP åœ°å€å’Œç«¯å£å·ï¼Œå¹¶å»ºç«‹ä¸€æ¡åˆ°æœåŠ¡å™¨çš„ TCP è¿æ¥ã€‚å»ºç«‹è¿æ¥å¯èƒ½è¦èŠ±è´¹ä¸€äº›æ—¶é—´ï¼Œæ—¶é—´é•¿çŸ­å–å†³äºæœåŠ¡å™¨è·ç¦»çš„è¿œè¿‘ã€æœåŠ¡å™¨çš„è´Ÿè½½æƒ…å†µï¼Œä»¥åŠå› ç‰¹ç½‘çš„æ‹¥æŒ¤ç¨‹åº¦ã€‚ ä¸€æ—¦å»ºç«‹äº†è¿æ¥ï¼Œå®¢æˆ·ç«¯å°±ä¼šå‘é€ HTTP è¯·æ±‚ï¼ŒæœåŠ¡å™¨åˆ™ä¼šè¯»å–è¯·æ±‚ã€‚ä¸€æ—¦æœåŠ¡å™¨è·å–äº†æ•´æ¡è¯·æ±‚æŠ¥æ–‡ï¼Œå°±ä¼šå¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œæ‰§è¡Œæ‰€è¯·æ±‚çš„åŠ¨ä½œï¼Œå¹¶å°†æ•°æ®å†™å›å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯è¯»å–æ•°æ®ï¼Œå¹¶å¯¹å“åº”æ•°æ®è¿›è¡Œå¤„ç†ã€‚ å¯¹TCPæ€§èƒ½çš„è€ƒè™‘HTTP ç´§æŒ¨ç€ TCPï¼Œä½äºå…¶ä¸Šå±‚ï¼Œæ‰€ä»¥ HTTP äº‹åŠ¡çš„æ€§èƒ½åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºåº•å±‚TCP é€šé“çš„æ€§èƒ½ã€‚ç†è§£äº† TCP çš„æŸäº›åŸºæœ¬æ€§èƒ½ç‰¹ç‚¹ä¹‹åï¼Œå°±å¯ä»¥æ›´å¥½åœ°ç†è§£ HTTP çš„è¿æ¥ä¼˜åŒ–ç‰¹æ€§ï¼Œè¿™æ ·å°±èƒ½è®¾è®¡å®ç°ä¸€äº›æ›´é«˜æ€§èƒ½çš„ HTTP åº”ç”¨ç¨‹åºäº†ã€‚ HTTPäº‹åŠ¡çš„æ—¶å»¶å…ˆç”¨ä¸€å¼ å›¾çœ‹çœ‹ç½‘ç»œå»¶æ—¶ã€‚è¿˜æœ‰HTTPäº‹åŠ¡çš„è¿æ¥ï¼Œä¼ è¾“ä»¥åŠå¤„ç†æ—¶å»¶ã€‚ æˆ‘ä»¥å‰åˆšçœ‹åˆ°è¿™å¼ å›¾çš„æ—¶å€™ï¼Œè§‰å¾—å¾ˆä¸ç†è§£ï¼Œæ€ä¹ˆè¿æ¥ï¼Œè¯·æ±‚å’Œç›¸åº”çš„æ—¶é—´ä¼šæ¯”å¤„ç†çš„æ—¶é—´å¤šè¿™ä¹ˆå¤šå‘¢ï¼Ÿç°åœ¨æƒ³æƒ³ï¼Œå¾ˆå®¹æ˜“å°±æ˜ç™½äº†ã€‚è®°ä½ï¼šä¸å»ºç«‹TCPè¿æ¥ï¼Œä»¥åŠä¼ è¾“è¯·æ±‚å’Œå“åº”æŠ¥æ–‡çš„æ—¶é—´ç›¸æ¯”ï¼Œäº‹åŠ¡å¤„ç†æ—¶é—´å¯èƒ½æ˜¯å¾ˆçŸ­çš„ã€‚é™¤éå®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨è¶…è½½ï¼Œæˆ–æ­£åœ¨å¤„ç†å¤æ‚çš„åŠ¨æ€èµ„æºï¼Œå¦åˆ™ HTTP æ—¶å»¶å°±æ˜¯ç”± TCP ç½‘ç»œæ—¶å»¶æ„æˆçš„ã€‚ HTTP äº‹åŠ¡çš„æ—¶å»¶æœ‰ä»¥ä¸‹å‡ ç§ä¸»è¦åŸå› ã€‚ å®¢æˆ·ç«¯é¦–å…ˆéœ€è¦æ ¹æ® URI ç¡®å®š Web æœåŠ¡å™¨çš„ IP åœ°å€å’Œç«¯å£å·ã€‚å¦‚æœæœ€è¿‘æ²¡æœ‰å¯¹URI ä¸­çš„ä¸»æœºåè¿›è¡Œè®¿é—®ï¼Œé€šè¿‡ DNS è§£æç³»ç»Ÿå°† URI ä¸­çš„ä¸»æœºåè½¬æ¢æˆä¸€ä¸ª IPåœ°å€å¯èƒ½è¦èŠ±è´¹æ•°åç§’çš„æ—¶é—´ã€‚ï¼ˆè¿™ä¸ª10sæˆ‘è¡¨ç¤ºæ€€ç–‘=ã€‚=ï¼‰ æ¥ä¸‹æ¥ï¼Œå®¢æˆ·ç«¯ä¼šå‘æœåŠ¡å™¨å‘é€ä¸€æ¡ TCP è¿æ¥è¯·æ±‚ï¼Œå¹¶ç­‰å¾…æœåŠ¡å™¨å›é€ä¸€ä¸ªè¯·æ±‚æ¥å—åº”ç­”ã€‚æ¯æ¡æ–°çš„ TCP è¿æ¥éƒ½ä¼šæœ‰è¿æ¥å»ºç«‹æ—¶å»¶ã€‚è¿™ä¸ªå€¼é€šå¸¸æœ€å¤šåªæœ‰ä¸€ä¸¤ç§’é’Ÿï¼Œä½†å¦‚æœæœ‰æ•°ç™¾ä¸ª HTTP äº‹åŠ¡çš„è¯ï¼Œè¿™ä¸ªå€¼ä¼šå¿«é€Ÿåœ°å åŠ ä¸Šå»ã€‚ ä¸€æ—¦è¿æ¥å»ºç«‹èµ·æ¥äº†ï¼Œå®¢æˆ·ç«¯å°±ä¼šé€šè¿‡æ–°å»ºç«‹çš„ TCP ç®¡é“æ¥å‘é€ HTTP è¯·æ±‚ã€‚æ•°æ®åˆ°è¾¾æ—¶ï¼ŒWeb æœåŠ¡å™¨ä¼šä» TCP è¿æ¥ä¸­è¯»å–è¯·æ±‚æŠ¥æ–‡ï¼Œå¹¶å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚å› ç‰¹ç½‘ä¼ è¾“è¯·æ±‚æŠ¥æ–‡ï¼Œä»¥åŠæœåŠ¡å™¨å¤„ç†è¯·æ±‚æŠ¥æ–‡éƒ½éœ€è¦æ—¶é—´ã€‚ ç„¶åï¼ŒWeb æœåŠ¡å™¨ä¼šå›é€ HTTP å“åº”ï¼Œè¿™ä¹Ÿéœ€è¦èŠ±è´¹æ—¶é—´ã€‚ å°tip: å¤§å¤šæ•° HTTP å®¢æˆ·ç«¯éƒ½æœ‰ä¸€ä¸ªå°çš„ DNS ç¼“å­˜ï¼Œç”¨æ¥ä¿å­˜è¿‘æœŸæ‰€è®¿é—®ç«™ç‚¹çš„ IP åœ°å€ã€‚ å¦‚æœ å·²ç»åœ¨æœ¬åœ°â€œç¼“å­˜â€ï¼ˆè®°å½•ï¼‰äº† IP åœ°å€ï¼ŒæŸ¥è¯¢å°±å¯ä»¥ç«‹å³å®Œæˆã€‚ å› ä¸ºå¤§å¤šæ•° Web æµè§ˆå™¨æµè§ˆçš„éƒ½æ˜¯å°‘æ•°å¸¸ç”¨ç«™ç‚¹ï¼Œæ‰€ä»¥é€šå¸¸éƒ½å¯ä»¥å¾ˆå¿«åœ°å°†ä¸»æœºåè§£æå‡ºæ¥ã€‚ è¿™äº› TCP ç½‘ç»œæ—¶å»¶çš„å¤§å°å–å†³äºç¡¬ä»¶é€Ÿåº¦ã€ç½‘ç»œå’ŒæœåŠ¡å™¨çš„è´Ÿè½½ï¼Œè¯·æ±‚å’Œå“åº”æŠ¥æ–‡çš„å°ºå¯¸ï¼Œä»¥åŠå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„è·ç¦»ã€‚TCP åè®®çš„æŠ€æœ¯å¤æ‚æ€§ä¹Ÿä¼šå¯¹æ—¶å»¶äº§ç”Ÿå·¨å¤§çš„å½±å“ã€‚ æ€§èƒ½èšç„¦åŒºåŸŸä¸‹é¢çœ‹å‡ ç§æœ€å¸¸è§çš„TCPç›¸å…³æ—¶å»¶ã€‚å…·ä½“æœ‰ï¼š TCP è¿æ¥å»ºç«‹æ¡æ‰‹ï¼› TCP æ…¢å¯åŠ¨æ‹¥å¡æ§åˆ¶ï¼› æ•°æ®èšé›†çš„ Nagle ç®—æ³•ï¼› ç”¨äºæå¸¦ç¡®è®¤çš„ TCP å»¶è¿Ÿç¡®è®¤ç®—æ³•ï¼› TIME_WAIT æ—¶å»¶å’Œç«¯å£è€—å°½ TCPè¿æ¥çš„æ¡æ‰‹æ—¶å»¶å»ºç«‹ä¸€æ¡æ–°çš„ TCP è¿æ¥æ—¶ï¼Œç”šè‡³æ˜¯åœ¨å‘é€ä»»æ„æ•°æ®ä¹‹å‰ï¼ŒTCP è½¯ä»¶ä¹‹é—´ä¼šäº¤æ¢ä¸€ç³»åˆ—çš„ IP åˆ†ç»„ï¼Œå¯¹è¿æ¥çš„æœ‰å…³å‚æ•°è¿›è¡Œæ²Ÿé€šã€‚å¦‚æœè¿æ¥åªç”¨æ¥ä¼ é€å°‘é‡æ•°æ®ï¼Œè¿™äº›äº¤æ¢è¿‡ç¨‹å°±ä¼šä¸¥é‡é™ä½ HTTP çš„æ€§èƒ½ã€‚è¿™å¯ä»¥ç†è§£æˆæˆ‘ä»¬è¯´çš„ä¸‰æ¬¡æ¡æ‰‹ã€‚ TCP è¿æ¥æ¡æ‰‹éœ€è¦ç»è¿‡ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ã€‚ (1) è¯·æ±‚æ–°çš„ TCP è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯è¦å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªå°çš„ TCP åˆ†ç»„ï¼ˆé€šå¸¸æ˜¯ 40 ï½60 ä¸ªå­—èŠ‚ï¼‰ã€‚è¿™ä¸ªåˆ†ç»„ä¸­è®¾ç½®äº†ä¸€ä¸ªç‰¹æ®Šçš„ SYN æ ‡è®°ï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªè¿æ¥è¯·æ±‚ã€‚ (2) å¦‚æœæœåŠ¡å™¨æ¥å—äº†è¿æ¥ï¼Œå°±ä¼šå¯¹ä¸€äº›è¿æ¥å‚æ•°è¿›è¡Œè®¡ç®—ï¼Œå¹¶å‘å®¢æˆ·ç«¯å›é€ä¸€ä¸ªTCP åˆ†ç»„ï¼Œè¿™ä¸ªåˆ†ç»„ä¸­çš„ SYN å’Œ ACK æ ‡è®°éƒ½è¢«ç½®ä½ï¼Œè¯´æ˜è¿æ¥è¯·æ±‚å·²è¢«æ¥å—ã€‚ (3) æœ€åï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å›é€ä¸€æ¡ç¡®è®¤ä¿¡æ¯ï¼Œé€šçŸ¥å®ƒè¿æ¥å·²æˆåŠŸå»ºç«‹ã€‚ ç°ä»£çš„ TCP æ ˆéƒ½å…è®¸å®¢æˆ·ç«¯åœ¨è¿™ä¸ªç¡®è®¤åˆ†ç»„ä¸­å‘é€æ•°æ®ã€‚ æ³¨æ„ï¼šHTTPç¨‹åºå‘˜æ°¸è¿œä¸ä¼šçœ‹åˆ°è¿™äº›åˆ†ç»„ï¼Œè¿™äº›åˆ†ç»„éƒ½ç”± TCP/IP è½¯ä»¶ç®¡ç†ã€‚HTTP ç¨‹åºå‘˜çœ‹åˆ°çš„åªæ˜¯åˆ›å»º TCP è¿æ¥æ—¶å­˜åœ¨çš„æ—¶å»¶ã€‚å°çš„ HTTP äº‹åŠ¡å¯èƒ½ä¼šåœ¨ TCP å»ºç«‹ä¸ŠèŠ±è´¹ 50%ï¼Œæˆ–æ›´å¤šçš„æ—¶é—´ã€‚åé¢çš„å°èŠ‚ä¼šè®¨è®º HTTP æ˜¯å¦‚ä½•é€šè¿‡é‡ç”¨ç°å­˜è¿æ¥ï¼Œæ¥å‡å°è¿™ç§ TCP å»ºç«‹æ—¶å»¶æ‰€é€ æˆçš„å½±å“çš„ã€‚ å»¶è¿Ÿç¡®è®¤ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å¦‚ä½•ç¡®è®¤æ•°æ®æ­£ç¡®ä¼ è¾“ï¼Œæ€ä¹ˆçŸ¥é“åˆ†ç»„è¢«ç ´åï¼Œæ€ä¹ˆç¡®å®šåº”ä¸åº”è¯¥é‡å‘æ•°æ®å‘¢ï¼Ÿ ç”±äºå› ç‰¹ç½‘è‡ªèº«æ— æ³•ç¡®ä¿å¯é çš„åˆ†ç»„ä¼ è¾“ï¼ˆå› ç‰¹ç½‘è·¯ç”±å™¨è¶…è´Ÿè·çš„è¯ï¼Œå¯ä»¥éšæ„ä¸¢å¼ƒåˆ†ç»„ï¼‰ï¼Œæ‰€ä»¥ TCP å®ç°äº†è‡ªå·±çš„ç¡®è®¤æœºåˆ¶æ¥ç¡®ä¿æ•°æ®çš„æˆåŠŸä¼ è¾“ã€‚ æ¯ä¸ª TCP æ®µéƒ½æœ‰ä¸€ä¸ªåºåˆ—å·å’Œæ•°æ®å®Œæ•´æ€§æ ¡éªŒå’Œã€‚æ¯ä¸ªæ®µçš„æ¥æ”¶è€…æ”¶åˆ°å®Œå¥½çš„æ®µæ—¶ï¼Œéƒ½ä¼šå‘å‘é€è€…å›é€å°çš„ç¡®è®¤åˆ†ç»„ã€‚å¦‚æœå‘é€è€…æ²¡æœ‰åœ¨æŒ‡å®šçš„çª—å£æ—¶é—´å†…æ”¶åˆ°ç¡®è®¤ä¿¡æ¯ï¼Œå‘é€è€…å°±è®¤ä¸ºåˆ†ç»„å·²è¢«ç ´åæˆ–æŸæ¯ï¼Œå¹¶é‡å‘æ•°æ®ã€‚ ç”±äºç¡®è®¤æŠ¥æ–‡å¾ˆå°ï¼Œæ‰€ä»¥ TCP å…è®¸åœ¨å‘å¾€ç›¸åŒæ–¹å‘çš„è¾“å‡ºæ•°æ®åˆ†ç»„ä¸­å¯¹å…¶è¿›è¡Œâ€œæå¸¦â€ã€‚TCP å°†è¿”å›çš„ç¡®è®¤ä¿¡æ¯ä¸è¾“å‡ºçš„æ•°æ®åˆ†ç»„ç»“åˆåœ¨ä¸€èµ·ï¼Œå¯ä»¥æ›´æœ‰æ•ˆåœ°åˆ©ç”¨ç½‘ç»œã€‚ ä¸ºäº†å¢åŠ ç¡®è®¤æŠ¥æ–‡æ‰¾åˆ°åŒå‘ä¼ è¾“æ•°æ®åˆ†ç»„çš„å¯èƒ½æ€§ï¼Œå¾ˆå¤š TCP æ ˆéƒ½å®ç°äº†ä¸€ç§â€œå»¶è¿Ÿç¡®è®¤â€ç®—æ³•ã€‚å»¶è¿Ÿç¡®è®¤ç®—æ³•ä¼šåœ¨ä¸€ä¸ªç‰¹å®šçš„çª—å£æ—¶é—´ï¼ˆé€šå¸¸æ˜¯ 100 ï½ 200 æ¯«ç§’ï¼‰å†…å°†è¾“å‡ºç¡®è®¤å­˜æ”¾åœ¨ç¼“å†²åŒºä¸­ï¼Œä»¥å¯»æ‰¾èƒ½å¤Ÿæå¸¦å®ƒçš„è¾“å‡ºæ•°æ®åˆ†ç»„ã€‚å¦‚æœåœ¨é‚£ä¸ªæ—¶é—´æ®µå†…æ²¡æœ‰è¾“å‡ºæ•°æ®åˆ†ç»„ï¼Œå°±å°†ç¡®è®¤ä¿¡æ¯æ”¾åœ¨å•ç‹¬çš„åˆ†ç»„ä¸­ä¼ é€ã€‚ ä½†æ˜¯ï¼ŒHTTP å…·æœ‰åŒå³°ç‰¹å¾çš„è¯·æ±‚ - åº”ç­”è¡Œä¸ºé™ä½äº†æå¸¦ä¿¡æ¯çš„å¯èƒ½ã€‚å½“å¸Œæœ›æœ‰ç›¸åæ–¹å‘å›ä¼ åˆ†ç»„çš„æ—¶å€™ï¼Œååæ²¡æœ‰é‚£ä¹ˆå¤šã€‚é€šå¸¸ï¼Œå»¶è¿Ÿç¡®è®¤ç®—æ³•ä¼šå¼•å…¥ç›¸å½“å¤§çš„æ—¶å»¶ã€‚æ ¹æ®æ‰€ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„ä¸åŒï¼Œå¯ä»¥è°ƒæ•´æˆ–ç¦æ­¢å»¶è¿Ÿç¡®è®¤ç®—æ³•ã€‚ åœ¨å¯¹ TCP æ ˆçš„ä»»ä½•å‚æ•°è¿›è¡Œä¿®æ”¹ä¹‹å‰ï¼Œä¸€å®šè¦å¯¹è‡ªå·±åœ¨åšä»€ä¹ˆæœ‰æ¸…é†’çš„è®¤è¯†ã€‚TCPä¸­å¼•å…¥è¿™äº›ç®—æ³•çš„ç›®çš„æ˜¯é˜²æ­¢è®¾è®¡æ¬ ä½³çš„åº”ç”¨ç¨‹åºå¯¹å› ç‰¹ç½‘é€ æˆç ´åã€‚å¯¹ TCP é…ç½®è¿›è¡Œçš„ä»»æ„ä¿®æ”¹ï¼Œéƒ½è¦ç»å¯¹ç¡®ä¿åº”ç”¨ç¨‹åºä¸ä¼šå¼•å‘è¿™äº›ç®—æ³•æ‰€è¦é¿å…çš„é—®é¢˜ã€‚ TCPæ…¢å¯åŠ¨ä»€ä¹ˆæ˜¯TCP æ…¢å¯åŠ¨ï¼Ÿç®€å•æ¥è¯´ï¼Œå°±æ˜¯TCPè¿æ¥çš„æ—¶é—´æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¼€å§‹æ˜¯æ…¢çš„ï¼Œå½“ç¡®å®šåç»­å¯èƒ½è¿˜æœ‰çš„æ—¶å€™ï¼Œå®ƒçš„é€Ÿåº¦æ˜¯ä¼šä¸æ–­çš„å¢åŠ çš„ã€‚ TCP æ•°æ®ä¼ è¾“çš„æ€§èƒ½è¿˜å–å†³äº TCP è¿æ¥çš„ä½¿ç”¨æœŸï¼ˆageï¼‰ã€‚TCP è¿æ¥ä¼šéšç€æ—¶é—´è¿›è¡Œè‡ªæˆ‘â€œè°ƒè°â€ï¼Œèµ·åˆä¼šé™åˆ¶è¿æ¥çš„æœ€å¤§é€Ÿåº¦ï¼Œå¦‚æœæ•°æ®æˆåŠŸä¼ è¾“ï¼Œä¼šéšç€æ—¶é—´çš„æ¨ç§»æé«˜ä¼ è¾“çš„é€Ÿåº¦ã€‚è¿™ç§è°ƒè°è¢«ç§°ä¸º TCP æ…¢å¯åŠ¨ï¼ˆslow startï¼‰ï¼Œç”¨äºé˜²æ­¢å› ç‰¹ç½‘çš„çªç„¶è¿‡è½½å’Œæ‹¥å¡ã€‚ TCP æ…¢å¯åŠ¨é™åˆ¶äº†ä¸€ä¸ª TCP ç«¯ç‚¹åœ¨ä»»æ„æ—¶åˆ»å¯ä»¥ä¼ è¾“çš„åˆ†ç»„æ•°ã€‚ç®€å•æ¥è¯´ï¼Œæ¯æˆåŠŸæ¥æ”¶ä¸€ä¸ªåˆ†ç»„ï¼Œå‘é€ç«¯å°±æœ‰äº†å‘é€å¦å¤–ä¸¤ä¸ªåˆ†ç»„çš„æƒé™ã€‚ å¦‚æœæŸä¸ª HTTP äº‹åŠ¡æœ‰å¤§é‡æ•°æ®è¦å‘é€ï¼Œæ˜¯ä¸èƒ½ä¸€æ¬¡å°†æ‰€æœ‰åˆ†ç»„éƒ½å‘é€å‡ºå»çš„ã€‚å¿…é¡»å‘é€ä¸€ä¸ªåˆ†ç»„ï¼Œç­‰å¾…ç¡®è®¤ï¼›ç„¶åå¯ä»¥å‘é€ä¸¤ä¸ªåˆ†ç»„ï¼Œæ¯ä¸ªåˆ†ç»„éƒ½å¿…é¡»è¢«ç¡®è®¤ï¼Œè¿™æ ·å°±å¯ä»¥å‘é€å››ä¸ªåˆ†ç»„äº†ï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿™ç§æ–¹å¼è¢«ç§°ä¸ºâ€œæ‰“å¼€æ‹¥å¡çª—å£â€ã€‚ ç”±äºå­˜åœ¨è¿™ç§æ‹¥å¡æ§åˆ¶ç‰¹æ€§ï¼Œæ‰€ä»¥æ–°è¿æ¥çš„ä¼ è¾“é€Ÿåº¦ä¼šæ¯”å·²ç»äº¤æ¢è¿‡ä¸€å®šé‡æ•°æ®çš„ã€â€œå·²è°ƒè°â€è¿æ¥æ…¢ä¸€äº›ã€‚ç”±äºå·²è°ƒè°è¿æ¥è¦æ›´å¿«ä¸€äº›ï¼Œæ‰€ä»¥ HTTP ä¸­æœ‰ä¸€äº›å¯ä»¥é‡ç”¨ç°å­˜è¿æ¥çš„å·¥å…·ã€‚ Nagleç®—æ³•ä¸TCP_NODELAYå¦‚ä½•è§£å†³å½“TCPå‘é€äº†å¤§é‡åŒ…å«å°‘é‡æ•°æ®çš„åˆ†ç»„ï¼Œç½‘ç»œæ€§èƒ½ä¼šè¢«ä¸¥é‡ä¸‹é™çš„ç°è±¡ï¼Ÿæˆ‘ä»¬çŸ¥é“TCPæœ‰ä¸€ä¸ªæ•°æ®æµæ¥å£ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡å®ƒå°†ä»»æ„å°ºå¯¸çš„æ•°æ®æ”¾åœ¨TCPæ ˆä¸­ã€‚å³ä½¿ä¸€æ¬¡åªæ”¾ä¸€ä¸ªå­—èŠ‚ã€‚è€Œä¸”æˆ‘ä»¬ä¹ŸçŸ¥é“ï¼Œæ¯ä¸ªTCPæ®µä¸­éƒ½è‡³å°‘è£…åœ¨äº†40ä¸ªå­—èŠ‚çš„æ ‡è®°å’Œé¦–éƒ¨ã€‚ Nagle æ˜¯ä¸€ä¸ªç®—æ³•ï¼ŒTCP_NODELAY æ˜¯ä¸€ä¸ªå‚æ•°ã€‚ Nagle ç®—æ³•ï¼ˆæ ¹æ®å…¶å‘æ˜è€… John Nagle å‘½åï¼‰è¯•å›¾åœ¨å‘é€ä¸€ä¸ªåˆ†ç»„ä¹‹å‰ï¼Œå°†å¤§é‡TCP æ•°æ®ç»‘å®šåœ¨ä¸€èµ·ï¼Œä»¥æé«˜ç½‘ç»œæ•ˆç‡ã€‚RFC 896â€œIP/TCP äº’è¿ç½‘ç»œä¸­çš„æ‹¥å¡æ§åˆ¶â€å¯¹æ­¤ç®—æ³•è¿›è¡Œäº†æè¿°ã€‚ Nagle ç®—æ³•é¼“åŠ±å‘é€å…¨å°ºå¯¸ï¼ˆLAN ä¸Šæœ€å¤§å°ºå¯¸çš„åˆ†ç»„å¤§çº¦æ˜¯ 1500 å­—èŠ‚ï¼Œåœ¨å› ç‰¹ç½‘ä¸Šæ˜¯å‡ ç™¾å­—èŠ‚ï¼‰çš„æ®µã€‚åªæœ‰å½“æ‰€æœ‰å…¶ä»–åˆ†ç»„éƒ½è¢«ç¡®è®¤ä¹‹åï¼ŒNagle ç®—æ³•æ‰å…è®¸å‘é€éå…¨å°ºå¯¸çš„åˆ†ç»„ã€‚å¦‚æœå…¶ä»–åˆ†ç»„ä»ç„¶åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œå°±å°†é‚£éƒ¨åˆ†æ•°æ®ç¼“å­˜èµ·æ¥ã€‚åªæœ‰å½“æŒ‚èµ·åˆ†ç»„è¢«ç¡®è®¤ï¼Œæˆ–è€…ç¼“å­˜ä¸­ç§¯ç´¯äº†è¶³å¤Ÿå‘é€ä¸€ä¸ªå…¨å°ºå¯¸åˆ†ç»„çš„æ•°æ®æ—¶ï¼Œæ‰ä¼šå°†ç¼“å­˜çš„æ•°æ®å‘é€å‡ºå»ã€‚ HTTP åº”ç”¨ç¨‹åºå¸¸å¸¸ä¼šåœ¨è‡ªå·±çš„æ ˆä¸­è®¾ç½®å‚æ•° TCP_NODELAYï¼Œç¦ç”¨ Nagle ç®—æ³•ï¼Œæé«˜æ€§èƒ½ã€‚å¦‚æœè¦è¿™ä¹ˆåšçš„è¯ï¼Œä¸€å®šè¦ç¡®ä¿ä¼šå‘ TCP å†™å…¥å¤§å—çš„æ•°æ®ï¼Œè¿™æ ·å°±ä¸ä¼šäº§ç”Ÿä¸€å †å°åˆ†ç»„äº†ã€‚ TIME_WAITç´¯ç§¯ä¸ç«¯å£è€—å°½ä»€ä¹ˆæ˜¯ TCP/IP ç«¯å£è€—å°½ï¼Ÿ å½“å®¢æˆ·ç«¯å¯åŠ¨åˆ°æœåŠ¡å™¨çš„ TCP/IP å¥—æ¥å­—è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯é€šå¸¸è¿æ¥åˆ°æœåŠ¡å™¨ä¸Šçš„ç‰¹å®šç«¯å£ï¼Œå¹¶è¯·æ±‚æœåŠ¡å™¨é€šè¿‡ä¸´æ—¶ï¼ˆæˆ–æš‚æ—¶ï¼‰TCP æˆ– UDP ç«¯å£è¿›è¡Œå“åº”ã€‚å¦‚åœ¨ Windows Server 2003 å’Œ Windows XP ä¸­ï¼Œå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæ‰€ä½¿ç”¨çš„ä¸´æ—¶ç«¯å£çš„é»˜è®¤èŒƒå›´ä¸º 1025 åˆ° 5000ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæœ‰å¯èƒ½è€—å°½é»˜è®¤èŒƒå›´çš„å¯ç”¨ç«¯å£ã€‚ TIME_WAIT ç«¯å£è€—å°½æ˜¯å¾ˆä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼Œä¼šå½±å“åˆ°æ€§èƒ½åŸºå‡†ï¼Œä½†åœ¨ç°å®ä¸­ç›¸å¯¹è¾ƒå°‘å‡ºç°ã€‚å¤§å¤šæ•°é‡åˆ°æ€§èƒ½åŸºå‡†é—®é¢˜çš„äººæœ€ç»ˆéƒ½ä¼šç¢°åˆ°è¿™ä¸ªé—®é¢˜ï¼Œè€Œä¸”æ€§èƒ½éƒ½ä¼šå˜å¾—å‡ºä¹æ„æ–™åœ°å·®ï¼Œæ‰€ä»¥è¿™ä¸ªé—®é¢˜å€¼å¾—ç‰¹åˆ«å…³æ³¨ã€‚ å½“æŸä¸ª TCP ç«¯ç‚¹å…³é—­ TCP è¿æ¥æ—¶ï¼Œä¼šåœ¨å†…å­˜ä¸­ç»´æŠ¤ä¸€ä¸ªå°çš„æ§åˆ¶å—ï¼Œç”¨æ¥è®°å½•æœ€è¿‘æ‰€å…³é—­è¿æ¥çš„ IP åœ°å€å’Œç«¯å£å·ã€‚è¿™ç±»ä¿¡æ¯åªä¼šç»´æŒä¸€å°æ®µæ—¶é—´ï¼Œé€šå¸¸æ˜¯æ‰€ä¼°è®¡çš„æœ€å¤§åˆ†æ®µä½¿ç”¨æœŸçš„ä¸¤å€ï¼ˆç§°ä¸º 2MSLï¼Œé€šå¸¸ä¸º 2 åˆ†é’Ÿï¼‰å·¦å³ï¼Œä»¥ç¡®ä¿åœ¨è¿™æ®µæ—¶é—´å†…ä¸ä¼šåˆ›å»ºå…·æœ‰ç›¸åŒåœ°å€å’Œç«¯å£å·çš„æ–°è¿æ¥ã€‚å®é™…ä¸Šï¼Œè¿™ä¸ªç®—æ³•å¯ä»¥é˜²æ­¢åœ¨ä¸¤åˆ†é’Ÿå†…åˆ›å»ºã€å…³é—­å¹¶é‡æ–°åˆ›å»ºä¸¤ä¸ªå…·æœ‰ç›¸åŒ IP åœ°å€å’Œç«¯å£å·çš„è¿æ¥ã€‚ ä¸ºä»€ä¹ˆè¦é‚£æ ·é˜²æ­¢åœ¨ä¸¤åˆ†é’Ÿä¹‹å†…å‘¢ï¼Ÿæ˜¯ä¸æ˜¯å¯èƒ½æ˜¯ä¸ºäº†é˜²æ­¢DDOS??? ç°åœ¨é«˜é€Ÿè·¯ç”±å™¨çš„ä½¿ç”¨ï¼Œä½¿å¾—é‡å¤åˆ†ç»„å‡ ä¹ä¸å¯èƒ½åœ¨è¿æ¥å…³é—­çš„å‡ åˆ†é’Ÿä¹‹åï¼Œå‡ºç°åœ¨æœåŠ¡å™¨ä¸Šã€‚æœ‰äº›æ“ä½œç³»ç»Ÿä¼šå°† 2MSL è®¾ç½®ä¸ºä¸€ä¸ªè¾ƒå°çš„å€¼ï¼Œä½†è¶…è¿‡æ­¤å€¼æ—¶è¦ç‰¹åˆ«å°å¿ƒã€‚åˆ†ç»„ç¡®å®ä¼šè¢«å¤åˆ¶ï¼Œå¦‚æœæ¥è‡ªä¹‹å‰è¿æ¥çš„å¤åˆ¶åˆ†ç»„æ’å…¥äº†å…·æœ‰ç›¸åŒè¿æ¥å€¼çš„æ–° TCP æµï¼Œä¼šç ´å TCP æ•°æ®ã€‚ 2MSL çš„è¿æ¥å…³é—­å»¶è¿Ÿé€šå¸¸ä¸æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œä½†åœ¨æ€§èƒ½åŸºå‡†ç¯å¢ƒä¸‹å°±å¯èƒ½ä¼šæˆä¸ºä¸€ä¸ªé—®é¢˜ã€‚è¿›è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•æ—¶ï¼Œé€šå¸¸åªæœ‰ä¸€å°æˆ–å‡ å°ç”¨æ¥äº§ç”Ÿæµé‡çš„è®¡ç®—æœºè¿æ¥åˆ°æŸç³»ç»Ÿä¸­å»ï¼Œè¿™æ ·å°±é™åˆ¶äº†è¿æ¥åˆ°æœåŠ¡å™¨çš„å®¢æˆ·ç«¯ IP åœ°å€æ•°ã€‚è€Œä¸”ï¼ŒæœåŠ¡å™¨é€šå¸¸ä¼šåœ¨HTTP çš„é»˜è®¤ TCP ç«¯å£ 80 ä¸Šè¿›è¡Œç›‘å¬ã€‚ç”¨ TIME_WAIT é˜²æ­¢ç«¯å£å·é‡ç”¨æ—¶ï¼Œè¿™äº›æƒ…å†µä¹Ÿé™åˆ¶äº†å¯ç”¨çš„è¿æ¥å€¼ç»„åˆã€‚åœ¨åªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯å’Œä¸€å° Web æœåŠ¡å™¨çš„å¼‚å¸¸æƒ…å†µä¸‹ï¼Œæ„å»ºä¸€æ¡ TCP è¿æ¥çš„ 4 ä¸ªå€¼ï¼š1&lt;source-IP-address, source-port, destination-IP-address, destination-port&gt; å…¶ä¸­çš„ 3 ä¸ªéƒ½æ˜¯å›ºå®šçš„â€”â€”åªæœ‰æºç«¯å£å·å¯ä»¥éšæ„æ”¹å˜ï¼š 1&lt;client-IP, source-port, server-IP, 80&gt; å®¢æˆ·ç«¯æ¯æ¬¡è¿æ¥åˆ°æœåŠ¡å™¨ä¸Šå»æ—¶ï¼Œéƒ½ä¼šè·å¾—ä¸€ä¸ªæ–°çš„æºç«¯å£ï¼Œä»¥å®ç°è¿æ¥çš„å”¯ä¸€æ€§ã€‚ä½†ç”±äºå¯ç”¨æºç«¯å£çš„æ•°é‡æœ‰é™ï¼ˆæ¯”å¦‚ï¼Œ60 000 ä¸ªï¼‰ï¼Œè€Œä¸”åœ¨ 2MSL ç§’ï¼ˆæ¯”å¦‚ï¼Œ120ç§’ï¼‰å†…è¿æ¥æ˜¯æ— æ³•é‡ç”¨çš„ï¼Œè¿æ¥ç‡å°±è¢«é™åˆ¶åœ¨äº† 60 000/120=500 æ¬¡ / ç§’ã€‚å¦‚æœå†ä¸æ–­è¿›è¡Œä¼˜åŒ–ï¼Œå¹¶ä¸”æœåŠ¡å™¨çš„è¿æ¥ç‡ä¸é«˜äº 500 æ¬¡ / ç§’ï¼Œå°±å¯ç¡®ä¿ä¸ä¼šé‡åˆ° TIME_WAIT ç«¯å£è€—å°½é—®é¢˜ã€‚è¦ä¿®æ­£è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å¢åŠ å®¢æˆ·ç«¯è´Ÿè½½ç”Ÿæˆæœºå™¨çš„æ•°é‡ï¼Œæˆ–è€…ç¡®ä¿å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åœ¨å¾ªç¯ä½¿ç”¨å‡ ä¸ªè™šæ‹Ÿ IP åœ°å€ä»¥å¢åŠ æ›´å¤šçš„è¿æ¥ç»„åˆã€‚ å³ä½¿æ²¡æœ‰é‡åˆ°ç«¯å£è€—å°½é—®é¢˜ï¼Œä¹Ÿè¦ç‰¹åˆ«å°å¿ƒæœ‰å¤§é‡è¿æ¥å¤„äºæ‰“å¼€çŠ¶æ€çš„æƒ…å†µï¼Œæˆ–ä¸ºå¤„äºç­‰å¾…çŠ¶æ€çš„è¿æ¥åˆ†é…äº†å¤§é‡æ§åˆ¶å—çš„æƒ…å†µã€‚åœ¨æœ‰å¤§é‡æ‰“å¼€è¿æ¥æˆ–æ§åˆ¶å—çš„æƒ…å†µä¸‹ï¼Œæœ‰äº›æ“ä½œç³»ç»Ÿçš„é€Ÿåº¦ä¼šä¸¥é‡å‡ç¼“ã€‚ HTTPè¿æ¥çš„å¤„ç†ä» HTTP çš„ Connection é¦–éƒ¨å¼€å§‹ä»‹ç»ï¼Œè¿™æ˜¯ HTTP è¿æ¥ç®¡ç†ä¸­ä¸€ä¸ªå¾ˆå®¹æ˜“è¢«è¯¯è§£ï¼Œä½†åˆå¾ˆé‡è¦çš„éƒ¨åˆ†ã€‚ç„¶åä¼šä»‹ç»ä¸€äº› HTTP è¿æ¥ä¼˜åŒ–æŠ€æœ¯ã€‚ å¸¸è¢«è¯¯è§£çš„Connectioné¦–éƒ¨æˆ‘ä»¬çŸ¥é“ HTTP å…è®¸åœ¨å®¢æˆ·ç«¯å’Œæœ€ç»ˆçš„æºç«¯æœåŠ¡å™¨ä¹‹é—´å­˜åœ¨ä¸€ä¸² HTTP ä¸­é—´å®ä½“ï¼ˆä»£ç†ã€é«˜é€Ÿç¼“å­˜ç­‰ï¼‰ã€‚å¯ä»¥ä»å®¢æˆ·ç«¯å¼€å§‹ï¼Œé€è·³åœ°å°† HTTP æŠ¥æ–‡ç»è¿‡è¿™äº›ä¸­é—´è®¾å¤‡ï¼Œè½¬å‘åˆ°æºç«¯æœåŠ¡å™¨ä¸Šå»ï¼ˆæˆ–è€…è¿›è¡Œåå‘ä¼ è¾“ï¼‰ã€‚ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªç›¸é‚»çš„ HTTP åº”ç”¨ç¨‹åºä¼šä¸ºå®ƒä»¬å…±äº«çš„è¿æ¥åº”ç”¨ä¸€ç»„é€‰é¡¹ã€‚HTTP çš„ Connection é¦–éƒ¨å­—æ®µä¸­æœ‰ä¸€ä¸ªç”±é€—å·åˆ†éš”çš„è¿æ¥æ ‡ç­¾åˆ—è¡¨ï¼Œè¿™äº›æ ‡ç­¾ä¸ºæ­¤è¿æ¥æŒ‡å®šäº†ä¸€äº›ä¸ä¼šä¼ æ’­åˆ°å…¶ä»–è¿æ¥ä¸­å»çš„é€‰é¡¹ã€‚æ¯”å¦‚ï¼Œå¯ä»¥ç”¨ Connection:close æ¥è¯´æ˜å‘é€å®Œä¸‹ä¸€æ¡æŠ¥æ–‡ä¹‹åå¿…é¡»å…³é—­çš„è¿æ¥ã€‚ Connection é¦–éƒ¨å¯ä»¥æ‰¿è½½ 3 ç§ä¸åŒç±»å‹çš„æ ‡ç­¾ï¼š 1. HTTP é¦–éƒ¨å­—æ®µåï¼Œåˆ—å‡ºäº†åªä¸æ­¤è¿æ¥æœ‰å…³çš„é¦–éƒ¨ï¼› 2. ä»»æ„æ ‡ç­¾å€¼ï¼Œç”¨äºæè¿°æ­¤è¿æ¥çš„éæ ‡å‡†é€‰é¡¹ï¼› 3. å€¼closeï¼Œè¯´æ˜æ“ä½œå®Œæˆä¹‹åéœ€å…³é—­è¿™æ¡æŒä¹…è¿æ¥ å¦‚æœè¿æ¥æ ‡ç­¾ä¸­åŒ…å«äº†ä¸€ä¸ª HTTP é¦–éƒ¨å­—æ®µçš„åç§°ï¼Œé‚£ä¹ˆè¿™ä¸ªé¦–éƒ¨å­—æ®µå°±åŒ…å«äº†ä¸ä¸€äº›è¿æ¥æœ‰å…³çš„ä¿¡æ¯ï¼Œä¸èƒ½å°†å…¶è½¬å‘å‡ºå»ã€‚åœ¨å°†æŠ¥æ–‡è½¬å‘å‡ºå»ä¹‹å‰ï¼Œå¿…é¡»åˆ é™¤Connection é¦–éƒ¨åˆ—å‡ºçš„æ‰€æœ‰é¦–éƒ¨å­—æ®µã€‚ç”±äº Connection é¦–éƒ¨å¯ä»¥é˜²æ­¢æ— æ„ä¸­å¯¹æœ¬åœ°é¦–éƒ¨çš„è½¬å‘ï¼Œå› æ­¤å°†é€è·³é¦–éƒ¨åæ”¾å…¥ Connection é¦–éƒ¨è¢«ç§°ä¸ºâ€œå¯¹é¦–éƒ¨çš„ä¿æŠ¤â€ã€‚ HTTP åº”ç”¨ç¨‹åºæ”¶åˆ°ä¸€æ¡å¸¦æœ‰ Connection é¦–éƒ¨çš„æŠ¥æ–‡æ—¶ï¼Œæ¥æ”¶ç«¯ä¼šè§£æå‘é€ç«¯è¯·æ±‚çš„æ‰€æœ‰é€‰é¡¹ï¼Œå¹¶å°†å…¶åº”ç”¨ã€‚ç„¶åä¼šåœ¨å°†æ­¤æŠ¥æ–‡è½¬å‘ç»™ä¸‹ä¸€è·³åœ°å€ä¹‹å‰ï¼Œåˆ é™¤Connection é¦–éƒ¨ä»¥åŠ Connection ä¸­åˆ—å‡ºçš„æ‰€æœ‰é¦–éƒ¨ã€‚è€Œä¸”ï¼Œå¯èƒ½è¿˜ä¼šæœ‰å°‘é‡æ²¡æœ‰ä½œä¸º Connection é¦–éƒ¨å€¼åˆ—å‡ºï¼Œä½†ä¸€å®šä¸èƒ½è¢«ä»£ç†è½¬å‘çš„é€è·³é¦–éƒ¨ã€‚å…¶ä¸­åŒ…æ‹¬Prxoy-Authenticateã€Proxy-Connectionã€ransfer-Encoding å’Œ Upgradeã€‚åŸå› çš„è¯ï¼Œåé¢ä¼šæœ‰è§£é‡Šã€‚ ä¸²è¡Œäº‹åŠ¡å¤„ç†æ—¶å»¶ç›¸å½“äºæ¯æ¬¡ä¸€ä¸ªHTTPè¯·æ±‚éƒ½è¦å»ºç«‹ä¸€æ¬¡TCPè¿æ¥ã€‚å‡è®¾æœ‰ä¸€ä¸ªåŒ…å«äº† 3 ä¸ªåµŒå…¥å›¾ç‰‡çš„ Web é¡µé¢ã€‚æµè§ˆå™¨éœ€è¦å‘èµ· 4 ä¸ª HTTP äº‹åŠ¡æ¥æ˜¾ç¤ºæ­¤é¡µé¢ï¼š1 ä¸ªç”¨äºé¡¶å±‚çš„ HTML é¡µé¢ï¼Œ3 ä¸ªç”¨äºåµŒå…¥çš„å›¾ç‰‡ã€‚å¦‚æœæ¯ä¸ªäº‹åŠ¡éƒ½éœ€è¦ï¼ˆä¸²è¡Œåœ°å»ºç«‹ï¼‰ä¸€æ¡æ–°çš„è¿æ¥ï¼Œé‚£ä¹ˆè¿æ¥æ—¶å»¶å’Œæ…¢å¯åŠ¨æ—¶å»¶å°±ä¼šå åŠ èµ·æ¥ã€‚ é™¤äº†ä¸²è¡ŒåŠ è½½å¼•å…¥çš„å®é™…æ—¶å»¶ä¹‹å¤–ï¼ŒåŠ è½½ä¸€å¹…å›¾ç‰‡æ—¶ï¼Œé¡µé¢ä¸Šå…¶ä»–åœ°æ–¹éƒ½æ²¡æœ‰åŠ¨é™ä¹Ÿä¼šè®©äººè§‰å¾—é€Ÿåº¦å¾ˆæ…¢ã€‚ç”¨æˆ·æ›´å¸Œæœ›èƒ½å¤ŸåŒæ—¶åŠ è½½å¤šå¹…å›¾ç‰‡ã€‚ ä¸²è¡ŒåŠ è½½çš„å¦ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼Œæœ‰äº›æµè§ˆå™¨åœ¨å¯¹è±¡åŠ è½½å®Œæ¯•ä¹‹å‰æ— æ³•è·çŸ¥å¯¹è±¡çš„å°ºå¯¸ï¼Œè€Œä¸”å®ƒä»¬å¯èƒ½éœ€è¦å°ºå¯¸ä¿¡æ¯æ¥å†³å®šå°†å¯¹è±¡æ”¾åœ¨å±å¹•çš„ä»€ä¹ˆä½ç½®ä¸Šï¼Œæ‰€ä»¥åœ¨åŠ è½½äº†è¶³å¤Ÿå¤šçš„å¯¹è±¡ä¹‹å‰ï¼Œæ— æ³•åœ¨å±å¹•ä¸Šæ˜¾ç¤ºä»»ä½•å†…å®¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯èƒ½æµè§ˆå™¨ä¸²è¡Œè£…è½½å¯¹è±¡çš„è¿›åº¦å¾ˆæ­£å¸¸ï¼Œä½†ç”¨æˆ·é¢å¯¹çš„å´æ˜¯ä¸€ä¸ªç©ºç™½çš„å±å¹•ï¼Œå¯¹è£…è½½çš„è¿›åº¦ä¸€æ— æ‰€çŸ¥ã€‚ åé¢å‡ ç§æ–°å…´å’Œç°å­˜çš„æ–¹æ³•å¯ä»¥æé«˜HTTPçš„è¿æ¥æ€§èƒ½ã€‚æ¯”å¦‚ å¹¶è¡Œè¿æ¥ï¼Œé€šè¿‡å¤šæ¡TCPè¿æ¥å‘èµ·å¹¶å‘çš„HTTPè¯·æ±‚ã€‚ æŒä¹…è¿æ¥ï¼Œé‡ç”¨TCPè¿æ¥ï¼Œä»¥æ¶ˆé™¤è¿æ¥åŠå…³é—­æ—¶å»¶ã€‚ ç®¡é“åŒ–è¿æ¥ï¼Œé€šè¿‡å…±äº«TCPè¿æ¥å‘èµ·çš„å¹¶å‘çš„HTTPè¯·æ±‚ã€‚ å¹¶è¡Œè¿æ¥å¦‚å‰æ‰€è¿°ï¼Œæµè§ˆå™¨å¯ä»¥å…ˆå®Œæ•´åœ°è¯·æ±‚åŸå§‹çš„ HTML é¡µé¢ï¼Œç„¶åè¯·æ±‚ç¬¬ä¸€ä¸ªåµŒå…¥å¯¹è±¡ï¼Œç„¶åè¯·æ±‚ç¬¬äºŒä¸ªåµŒå…¥å¯¹è±¡ç­‰ï¼Œä»¥è¿™ç§ç®€å•çš„æ–¹å¼å¯¹æ¯ä¸ªåµŒå…¥å¼å¯¹è±¡è¿›è¡Œä¸²è¡Œå¤„ç†ã€‚ä½†è¿™æ ·å®åœ¨æ˜¯å¤ªæ…¢äº†ï¼HTTP å…è®¸å®¢æˆ·ç«¯æ‰“å¼€å¤šæ¡è¿æ¥ï¼Œå¹¶è¡Œåœ°æ‰§è¡Œå¤šä¸ª HTTP äº‹åŠ¡ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¹¶è¡ŒåŠ è½½äº†å››å¹…åµŒå…¥å¼å›¾ç‰‡ï¼Œæ¯ä¸ªäº‹åŠ¡éƒ½æœ‰è‡ªå·±çš„ TCP è¿æ¥ã€‚ ç›¸å½“äºæ¯æ¬¡ http è¯·æ±‚éƒ½è¿˜æ˜¯è¦å»ºç«‹ä¸€æ¬¡TCPè¿æ¥ï¼Œä¸åŒäºä¸Šé¢ä¸²è¡Œçš„æ˜¯ï¼Œè¿™å‡ ä¸ªTCPé“¾æ¥æ˜¯å¹¶è¡Œçš„è€Œå·²ã€‚æ‰€ä»¥æœ‰å¯èƒ½ä¼šå‡ºç°ä¸‹é¢å‡ ç§é—®é¢˜ï¼š å¹¶è¡Œè¿æ¥å¯èƒ½ä¼šæé«˜é¡µé¢çš„åŠ è½½é€Ÿåº¦åŒ…å«åµŒå…¥å¯¹è±¡çš„ç»„åˆé¡µé¢å¦‚æœèƒ½ï¼ˆé€šè¿‡å¹¶è¡Œè¿æ¥ï¼‰å…‹æœå•æ¡è¿æ¥çš„ç©ºè½½æ—¶é—´å’Œå¸¦å®½é™åˆ¶ï¼ŒåŠ è½½é€Ÿåº¦ä¹Ÿä¼šæœ‰æ‰€æé«˜ã€‚æ—¶å»¶å¯ä»¥é‡å èµ·æ¥ï¼Œè€Œä¸”å¦‚æœå•æ¡è¿æ¥æ²¡æœ‰å……åˆ†åˆ©ç”¨å®¢æˆ·ç«¯çš„å› ç‰¹ç½‘å¸¦å®½ï¼Œå¯ä»¥å°†æœªç”¨å¸¦å®½åˆ†é…æ¥è£…è½½å…¶ä»–å¯¹è±¡ã€‚ ä¸»è¦æ˜¯åˆç†çš„æå‹‡ç½‘ç»œå¸¦å®½ï¼Œå°±å¯ä»¥è¾¾åˆ°æé«˜é¡µé¢åŠ è½½é€Ÿåº¦çš„æƒ…å†µã€‚ è¿™é‡Œæ³¨æ„ä¸‹ï¼Œè¿™ä¸‰ä¸ªé“¾æ¥çš„æ—¶é—´ï¼Œä¸æ˜¯ä¸‰æ¡çº¿å¹³è¡Œï¼Œè€Œæ˜¯ä¸‰æ¡çº¿æœ‰é‡å çš„æƒ…å†µã€‚è¿™å°±æ˜¯å¹¶å‘å¤„ç†ã€‚å¹¶è¡Œæ˜¯å®Œå…¨é‡å ï¼Œæ˜¯ä¸€ä¸ªæ—¶é—´ç‚¹ã€‚å¹¶å‘æ˜¯åœ¨ä¸€ä¸ªæ—¶é—´æ®µä¸Šæœ‰é‡å ã€‚ å¹¶è¡Œè¿æ¥ä¸ä¸€å®šæ›´å¿«å¦‚æœå¸¦å®½ä¸è¶³çš„è¯ï¼Œæ¯ä¸€ä¸ªè¿æ¥éƒ½éœ€è¦å ç”¨ä¸€éƒ¨åˆ†å¸¦å®½ã€‚é‚£ä¹ˆæ„å‘³ç€ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½ä¼šå»ç«äº‰è¿™æ ·æœ‰é™çš„å¸¦å®½ã€‚é‚£ä¹ˆæ¯ä¸ªå¯¹è±¡å¯èƒ½å°±ä¼šæŒ‰ç…§æ¯”è¾ƒæ…¢çš„é€Ÿåº¦åŠ è½½ï¼Œé‚£ä¹ˆä¹…æœ‰å¯èƒ½æ€§èƒ½æå‡çš„éå¸¸å°ã€‚ç”šè‡³æ²¡æœ‰æå‡ã€‚ å³ä½¿å¹¶è¡Œè¿æ¥çš„é€Ÿåº¦å¯èƒ½ä¼šæ›´å¿«ï¼Œä½†å¹¶ä¸ä¸€å®šæ€»æ˜¯æ›´å¿«ã€‚å®¢æˆ·ç«¯çš„ç½‘ç»œå¸¦å®½ä¸è¶³ï¼ˆæ¯”å¦‚ï¼Œæµè§ˆå™¨æ˜¯é€šè¿‡ä¸€ä¸ª 28.8kbps çš„ Modem è¿æ¥åˆ°å› ç‰¹ç½‘ä¸Šå»çš„ï¼‰æ—¶ï¼Œå¤§éƒ¨åˆ†çš„æ—¶é—´å¯èƒ½éƒ½æ˜¯ç”¨æ¥ä¼ é€æ•°æ®çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ä¸ªè¿æ¥åˆ°é€Ÿåº¦è¾ƒå¿«æœåŠ¡å™¨ä¸Šçš„HTTP äº‹åŠ¡å°±ä¼šå¾ˆå®¹æ˜“åœ°è€—å°½æ‰€æœ‰å¯ç”¨çš„ Modem å¸¦å®½ã€‚å¦‚æœå¹¶è¡ŒåŠ è½½å¤šä¸ªå¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½ä¼šå»ç«äº‰è¿™æœ‰é™çš„å¸¦å®½ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½ä¼šä»¥è¾ƒæ…¢çš„é€Ÿåº¦æŒ‰æ¯”ä¾‹åŠ è½½ï¼Œè¿™æ ·å¸¦æ¥çš„æ€§èƒ½æå‡å°±å¾ˆå°ï¼Œç”šè‡³æ²¡ä»€ä¹ˆæå‡ã€‚ è€Œä¸”ï¼Œæ‰“å¼€å¤§é‡è¿æ¥ä¼šæ¶ˆè€—å¾ˆå¤šå†…å­˜èµ„æºï¼Œä»è€Œå¼•å‘è‡ªèº«çš„æ€§èƒ½é—®é¢˜ã€‚å¤æ‚çš„ Webé¡µé¢å¯èƒ½ä¼šæœ‰æ•°åæˆ–æ•°ç™¾ä¸ªå†…åµŒå¯¹è±¡ã€‚å®¢æˆ·ç«¯å¯èƒ½å¯ä»¥æ‰“å¼€æ•°ç™¾ä¸ªè¿æ¥ï¼Œä½† Web æœåŠ¡å™¨é€šå¸¸è¦åŒæ—¶å¤„ç†å¾ˆå¤šå…¶ä»–ç”¨æˆ·çš„è¯·æ±‚ï¼Œæ‰€ä»¥å¾ˆå°‘æœ‰ Web æœåŠ¡å™¨å¸Œæœ›å‡ºç°è¿™æ ·çš„æƒ…å†µã€‚ä¸€ç™¾ä¸ªç”¨æˆ·åŒæ—¶å‘å‡ºç”³è¯·ï¼Œæ¯ä¸ªç”¨æˆ·æ‰“å¼€ 100 ä¸ªè¿æ¥ï¼ŒæœåŠ¡å™¨å°±è¦è´Ÿè´£å¤„ç†10 000 ä¸ªè¿æ¥ã€‚è¿™ä¼šé€ æˆæœåŠ¡å™¨æ€§èƒ½çš„ä¸¥é‡ä¸‹é™ã€‚å¯¹é«˜è´Ÿè·çš„ä»£ç†æ¥è¯´ä¹ŸåŒæ ·å¦‚æ­¤ã€‚ å®é™…ä¸Šï¼Œæµè§ˆå™¨ç¡®å®ä½¿ç”¨äº†å¹¶è¡Œè¿æ¥ï¼Œä½†å®ƒä»¬ä¼šå°†å¹¶è¡Œè¿æ¥çš„æ€»æ•°é™åˆ¶ä¸ºä¸€ä¸ªè¾ƒå°çš„å€¼ï¼ˆé€šå¸¸æ˜¯ 4 ä¸ªï¼‰ã€‚æœåŠ¡å™¨å¯ä»¥éšæ„å…³é—­æ¥è‡ªç‰¹å®šå®¢æˆ·ç«¯çš„è¶…é‡è¿æ¥ã€‚ å¹¶è¡Œè¿æ¥å¯èƒ½è®©äººâ€œæ„Ÿè§‰â€æ›´å¿«ä¸€äº›åˆšåˆšæˆ‘ä»¬çŸ¥é“äº†å¹¶è¡Œè¿æ¥å¹¶ä¸æ€»æ˜¯èƒ½ä½¿é¡µé¢åŠ è½½å¾—æ›´å¿«ä¸€äº›ã€‚ä½†å¦‚å‰æ‰€è¿°ï¼Œå³ä½¿å®é™…ä¸Šå®ƒä»¬å¹¶æ²¡æœ‰åŠ å¿«é¡µé¢çš„ä¼ è¾“é€Ÿåº¦ï¼Œå¹¶è¡Œè¿æ¥é€šå¸¸ä¹Ÿä¼šè®©ç”¨æˆ·è§‰å¾—é¡µé¢åŠ è½½å¾—æ›´å¿«äº†ã€‚å› ä¸ºå¤šä¸ªç»„ä»¶åŒæ—¶å‡ºç°åœ¨å±å¹•ä¸Šæ—¶ï¼Œç”¨æˆ·å¯ä»¥çœ‹åˆ°åŠ è½½çš„è¿›å±•ã€‚ æŒä¹…è¿æ¥å…ˆçœ‹çœ‹ä¸€ä¸ªåè¯ï¼šç«™ç‚¹æœ¬åœ°æ€§ã€‚ä»€ä¹ˆæ˜¯ç«™ç‚¹æœ¬åœ°æ€§ï¼Ÿ Webå®¢æˆ·ç«¯ç»å¸¸ä¼šæ‰“å¼€åˆ°åŒä¸€ä¸ªç«™ç‚¹çš„è¿æ¥ï¼Œæ¯”å¦‚ï¼šä¸€ä¸ªWebé¡µé¢ä¸Šçš„å¤§éƒ¨åˆ†å†…åµŒå›¾ç‰‡é€šå¸¸éƒ½æ¥è‡ªåŒä¸€ä¸ªWebç«™ç‚¹ï¼Œè€Œä¸”ç›¸å½“ä¸€éƒ¨åˆ†æŒ‡å‘å…¶ä»–å¯¹è±¡çš„è¶…é“¾æ¥ä¹Ÿéƒ½æŒ‡å‘åŒä¸€ä¸ªç«™ç‚¹ã€‚ å› æ­¤å½“åˆå§‹åŒ–äº†å¯¹æŸæœåŠ¡å™¨HTTPè¯·æ±‚çš„åº”ç”¨ç¨‹åºï¼Œå¯èƒ½ä¼šåœ¨ä¸ä¹…çš„å°†æ¥å¯¹é‚£å°æœåŠ¡å™¨å‘èµ·æ›´å¤šçš„è¯·æ±‚ï¼Œæ¯”å¦‚è·å–åœ¨çº¿å›¾ç‰‡ã€‚è¿™å°±æ˜¯ç«™ç‚¹çš„æœ¬åœ°æ€§ã€‚ å› æ­¤ï¼ŒHTTP1.1åŠä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œå…è®¸HTTPè®¾å¤‡åœ¨å¤„ç†äº‹åŠ¡ç»“æŸåï¼Œä¾ç„¶å°†TCPè¿æ¥ä¿æŒåœ¨æ‰“å¼€çŠ¶æ€ã€‚ä»¥ä¾¿åœ¨æœªæ¥è¯·æ±‚é‡ç”¨ç°åœ¨çš„è¿æ¥ã€‚ æŒä¹…è¿æ¥ï¼šåœ¨äº‹åŠ¡å¤„ç†ç»“æŸåä»ç„¶ä¿æŒåœ¨æ‰“å¼€çŠ¶æ€çš„TCPè¿æ¥æˆä¸ºæŒä¹…è¿æ¥ã€‚éæŒä¹…è¿æ¥ä¼šåœ¨æ¯ä¸ªäº‹åŠ¡ç»“æŸä¹‹åå…³é—­ï¼ŒæŒä¹…è¿æ¥ä¼šåœ¨ä¸åŒäº‹åŠ¡ä¹‹é—´ä»ç„¶ä¿æŒè¿æ¥ï¼Œä¸€ç›´åˆ°å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡å™¨å†³å®šå…³é—­ä¸ºæ­¢ã€‚ è¿™æ ·çš„å¥½å¤„ä¹Ÿå¾ˆæ˜æ˜¾ã€‚é‡ç”¨å·²å¯¹ç›®æ ‡æœåŠ¡å™¨æ‰“å¼€çš„ç©ºé—²æŒä¹…è¿æ¥ï¼Œå°±å¯ä»¥é¿å¼€ç¼“æ…¢çš„è¿æ¥å»ºç«‹é˜¶æ®µã€‚è€Œä¸”ï¼Œå·²ç»æ‰“å¼€çš„è¿æ¥è¿˜å¯ä»¥é¿å…æ…¢å¯åŠ¨çš„æ‹¥å¡é€‚åº”é˜¶æ®µï¼Œä»¥ä¾¿æ›´å¿«çš„è¿›è¡Œä¼ è¾“ã€‚ æŒä¹…è¿æ¥å’Œå¹¶è¡Œè¿æ¥æ¯”è¾ƒå¹¶è¡Œè¿æ¥å¯ä»¥æé«˜å¤åˆé¡µé¢çš„ä¼ è¾“é€Ÿåº¦ï¼Œä½†æ˜¯å¹¶è¡Œè¿æ¥ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ï¼Œæ¯”å¦‚ï¼š æ¯ä¸ªäº‹åŠ¡éƒ½ä¼šæ‰“å¼€ã€å…³é—­ä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œä¼šè€—è´¹æ—¶é—´å’Œå¸¦å®½ ç”±äºTCPæ…¢å¯åŠ¨ç‰¹æ€§çš„å­˜åœ¨ï¼Œæ¯ä¸€æ¡æ–°è¿æ¥çš„æ€§èƒ½éƒ½ä¼šé™ä½ã€‚ å¯æ‰“å¼€å¹¶è¡Œè¿æ¥çš„æ•°é‡å®é™…æ˜¯æœ‰é™çš„ã€‚ æŒä¹…è¿æ¥æœ‰ä¸€äº›æ¯”å¹¶è¡Œè¿æ¥æ›´å¥½çš„åœ°æ–¹ï¼ŒæŒä¹…é“¾æ¥é™ä½äº†æ—¶å»¶å’Œè¿æ¥å»ºç«‹çš„å¼€é”€ï¼Œå°†çŠ¶æ€ä¿æŒåœ¨å·²è°ƒè°çŠ¶æ€ã€‚ä½†æ˜¯ï¼Œè¦æ³¨æ„ï¼Œè¦ç®¡ç†å¥½æŒä¹…è¿æ¥ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°å¤§é‡çš„ç©ºé—²è¿æ¥ï¼Œè€—è´¹æœ¬åœ°å’Œè¿œç¨‹æœåŠ¡å™¨çš„èµ„æºã€‚ ç°åœ¨çš„ä¸€ç§è¶‹åŠ¿å’Œæ¯”è¾ƒé«˜æ•ˆçš„æ–¹å¼ï¼Œå°±æ˜¯WEBåº”ç”¨ç¨‹åºéƒ½ä¼šæ‰“å¼€å°‘é‡çš„å¹¶è¡Œè¿æ¥ï¼Œå…¶ä¸­çš„æ¯ä¸€ä¸ªéƒ½æ˜¯æŒä¹…è¿æ¥ã€‚ æŒä¹…è¿æ¥æœ‰ä¸¤ç§ç±»å‹ï¼šç¬¬ä¸€ç§æ˜¯HTTPã€1.0+çš„keep-aliveå’Œç°ä»£çš„HTTP1.1çš„persistentè¿æ¥ã€‚ Keep-Aliveæ“ä½œç°åœ¨keep-aliveå·²ç»ä¸åœ¨è¢«ä½¿ç”¨äº†ï¼Œåœ¨HTTP/1.1è§„èŒƒä¸­ä¹Ÿæ²¡æœ‰äº†å¯¹å®ƒçš„è¯´æ˜ã€‚ä½†æµè§ˆå™¨å’ŒæœåŠ¡å™¨å¯¹keep-aliveçš„ä½¿ç”¨ä»ç„¶éå¸¸é¢‘ç¹ã€‚ å®ç°HTTP/1.0 keep-alive è¿æ¥çš„å®¢æˆ·ç«¯é€šè¿‡åŒ…å«Connection:Keep-Aliveé¦–éƒ¨è¯·æ±‚ä¸€æ¡è¿æ¥ä¿æŒåœ¨æ‰“å¼€çŠ¶æ€ã€‚ æ­¤æ—¶å¦‚æœæœåŠ¡å™¨å¦‚æœæ„¿æ„ä¸ºä¸‹ä¸€æ¡è¯·æ±‚ä¿æŒåœ¨æ‰“å¼€çŠ¶æ€ï¼Œå°±åœ¨å“åº”ä¸­åŒ…å«åŒæ ·çš„é¦–éƒ¨ã€‚åŒæ—¶ï¼Œå¦‚æœå“åº”ä¸­æ²¡æœ‰åŒ…å«Connection:Keep-Alive,å®¢æˆ·ç«¯å°±ä¼šè®¤ä¸ºæœåŠ¡å™¨ä¸æ”¯æŒKeep-Aliveã€‚ 12Connection: Keep-AliveKeep-Alive: max=5, timeout=120 è¡¨ç¤ºçš„æ˜¯æœåŠ¡å™¨æœ€å¤šè¿˜ä¼šä¸º5ä¸ªäº‹åŠ¡ä¿æŒè¿æ¥çš„æ‰“å¼€çŠ¶æ€ï¼Œæˆ–è€…æ‰“å¼€çŠ¶æ€ä¿æŒåˆ°2åˆ†æ²»ä¹‹åã€‚ Keep-Aliveå’Œå“‘ä»£ç†Connectioné¦–éƒ¨å’Œç›²ä¸­ç»§ç›²ä¸­ç»§ï¼šblind relayå¾ˆå¤šè€çš„æˆ–è€…ç®€å•çš„ä»£ç†éƒ½æ˜¯ç›²ä¸­ç»§ï¼Œä»–ä»¬åªæ˜¯å°†å­—èŠ‚ä»ä¸€ä¸ªè¿æ¥è½¬å‘åˆ°å¦ä¸€ä¸ªè¿æ¥ä¸­å»ï¼Œä¸å¯¹Connectioné¦–éƒ¨è¿›è¡Œç‰¹æ®Šçš„å¤„ç†ã€‚ è¿™å¹…å›¾å‘ç”Ÿäº†ä¸‹é¢çš„æƒ…å†µï¼š å®¢æˆ·ç«¯å‘é€äº†Connection:Keep-Aliveçš„é¦–éƒ¨ï¼Œè¯·æ±‚æŒä¹…è¿æ¥ã€‚å®¢æˆ·ç«¯ä¼šç­‰å¾…å“åº”ï¼Œç¡®è®¤æœåŠ¡å™¨æ˜¯å¦è®¤å¯å®ƒçš„è¯·æ±‚ã€‚ å“‘ä»£ç†æ”¶åˆ°è¿™ä¸ªHTTPè¯·æ±‚ï¼Œå®ƒä¸çŸ¥é“Connectionæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œå°±æŠŠå®ƒå½“åšæ˜¯ä¸€ä¸ªæ‰©å±•çš„é¦–éƒ¨å¯¹å¾…ï¼Œä»£ç†ä¸çŸ¥é“Keep-Aliveæ˜¯ä»€ä¹ˆï¼Œæ‰€ä»¥å°±åªæ˜¯æ²¿ç€è½¬å‘é“¾è·¯å°†æŠ¥æ–‡ä¸€å­—ä¸æ¼çš„å‘ç»™æœåŠ¡å™¨ã€‚ä½†æ˜¯Connectioné¦–éƒ¨æ˜¯ä¸ªé€è·³é¦–éƒ¨ï¼Œåªé€‚ç”¨äºå•æ¡ä¼ è¾“é“¾è·¯ï¼Œä¸åº”è¯¥æ²¿ç€ä¼ è¾“é“¾è·¯å‘ä¸‹ä¼ è¾“ï¼Œè¿™æ ·å°±ä¼šå‡ºç°é—®é¢˜äº†ã€‚ ç»è¿‡ä¸­ç»§çš„HTTPåˆ°äº†æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ”¶åˆ°äº†Connection:Keep-Alive,ä¼šè®¤ä¸ºä»£ç†å¸Œæœ›è¿›è¡ŒKeep-aliveå¯¹è¯ï¼Œå› ä¸ºä»£ç†å¯¹æœåŠ¡å™¨æ¥è¯´å°±æ˜¯å®¢æˆ·ç«¯ã€‚ç„¶åæœåŠ¡å™¨å°±åŒæ„äº†ï¼Œå¹¶å›é€äº†ä¸€ä¸ªConnect:Keep-Aliveçš„å“åº”é¦–éƒ¨ã€‚ä½†ä»£ç†å´ä¸çŸ¥é“ä»€ä¹ˆæ˜¯Keep-aliveæ˜¯ä»€ä¹ˆã€‚é—®é¢˜å‡ºç°äº†ã€‚ å“‘ä»£ç†å°†æœåŠ¡å™¨çš„å“åº”æŠ¥æ–‡å‘é€ç»™äº†å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”æŠŠkeep-aliveé¦–éƒ¨ä¹Ÿä¼ å›å»äº†ï¼Œå®¢æˆ·ç«¯çœ‹åˆ°äº†ï¼Œå°±è®¤ä¸ºæœåŠ¡å™¨ç»Ÿä¸€äº†keep-aliveå¯¹è¯ã€‚æ‰€ä»¥è¿™ä¸ªæ—¶å€™ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è®¤ä¸ºå®ƒä»¬åœ¨è¿›è¡Œkeep-aliveå¯¹è¯ã€‚ä½†æ˜¯ä»£ç†ä»€ä¹ˆéƒ½ä¸çŸ¥é“ã€‚ ç”±äºä»£ç†å¯¹keep-aliveä»€ä¹ˆéƒ½ä¸çŸ¥é“ï¼Œæ‰€ä»¥ä¼šæŠŠæ”¶åˆ°çš„æ•°æ®éƒ½ç»™å®¢æˆ·ç«¯ï¼Œç„¶åç­‰å¾…èµ„æºæœåŠ¡å™¨å…³é—­èµ„æºã€‚ä½†æ˜¯æºæœåŠ¡å™¨ä¼šè®¤ä¸ºä»£ç†å·²ç»æ˜¾ç¤ºçš„è¯·æ±‚å®ƒï¼Œæ‰€ä»¥ä¸ä¼šå…³é—­ï¼Œé‚£ä¹ˆä»£ç†å°±ä¼šä¸€ç›´æŒ‚ç€ç­‰å¾…è¿æ¥å…³é—­ã€‚ è¿™ä¸ªæ—¶å€™ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°å›é€çš„å“åº”æŠ¥æ–‡çš„æ—¶å€™ï¼Œå°±ä¼šç«‹å³è½¬å‘ä¸‹ä¸€æ¡è¯·æ±‚ï¼Œåœ¨Keep-aliveè¿æ¥ä¸Šå‘ä»£ç†å‘é€å¦å¤–ä¸€ä¸ªè¯·æ±‚ã€‚ä½†æ˜¯ ï¼Œï¼Œï¼Œï¼Œä»£ç†ä¸ä¼šè®¤ä¸ºåŒä¸€æ¡è¿æ¥ä¸Šï¼Œè¿˜ä¼šæœ‰å…¶ä»–çš„è¯·æ±‚åˆ°æ¥ï¼Œæ‰€ä»¥è¯·æ±‚è¢«å¿½ç•¥äº†ã€‚æµè§ˆå™¨å°±åœ¨è¿™é‡Œè½¬åœˆï¼Œä¸ä¼šæœ‰ä¸‹ä¸€æ­¥äº†ã€‚ è¿™ç§é”™è¯¯çš„é€šä¿¡æ–¹å¼ä¼šå¯¼è‡´æµè§ˆå™¨ä¸€ç›´å¤„äºæŒ‚èµ·çš„çŠ¶æ€ï¼Œç›´åˆ°å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨è¿æ¥è¶…æ—¶ï¼Œå°†å…¶å…³é—­ã€‚ ä»£ç†å’Œé€è·³é¦–éƒ¨ä¸ºäº†é¿å…ä¸Šé¢çš„ä»£ç†é€šä¿¡çš„é—®é¢˜ï¼Œç°åœ¨çš„ä»£ç†éƒ½ä¸å…è®¸è½¬å‘Connectioné¦–éƒ¨å’Œæ‰€æœ‰åå­—ä¸­å‡ºç°Connectionå€¼ä¸­çš„é¦–éƒ¨ã€‚å› æ­¤ï¼Œå¦‚æœä¸€ä¸ªä»£ç†æ”¶åˆ°äº†Connection:Keep-Aliveé¦–éƒ¨ï¼Œæ˜¯ä¸åº”è¯¥è½¬å‘Connectioné¦–éƒ¨ï¼Œæˆ–æ‰€æœ‰åä¸ºKeep-Aliveçš„é¦–éƒ¨çš„ã€‚ ç®¡é“è¿æ¥HTTP/1.1å…è®¸åœ¨æŒä¹…è¿æ¥ä¸Šå¯é€‰çš„ä½¿ç”¨è¯·æ±‚ç®¡é“ã€‚è¿™æ˜¯åœ¨Keep-Aliveè¿æ¥ä¸Šçš„è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œåœ¨å“åº”åˆ°è¾¾å‰ï¼Œå¯ä»¥å°†å¤šæ¡è¯·æ±‚æ”¾å…¥é˜Ÿåˆ—ã€‚å½“ç¬¬ä¸€æ¡è¯·æ±‚é€šè¿‡ç½‘ç»œæµå‘æœåŠ¡å™¨æ—¶ï¼Œç¬¬äºŒæ¡ç¬¬ä¸‰æ¡å°±å¯ä»¥å¼€å§‹å‘é€äº†ã€‚ æŒä¹…è¿æ¥åªæ˜¯å¤ç”¨äº†TCPè¿æ¥ï¼Œå…¶ä¸­çš„æ¯ä¸ªHTTPè¯·æ±‚ä»ç„¶æ˜¯ä¸²è¡Œçš„ã€‚ä½†æ˜¯ç®¡é“è¿æ¥å°±æ˜¯åœ¨è¿™ä¸ªåŸºç¡€ä¸Šä½¿å¾—æ¯ä¸ªHTTPè¯·æ±‚æ˜¯å¹¶è¡Œçš„ã€‚ æ€»ç»“æ•´ä¸ªå°±æ˜¯ä»‹ç»äº†ä¸‹HTTPé€šé“äº‹åŠ¡å¤„ç†ã€‚äº†è§£ä¸€äº›åŸºæœ¬çš„è¿æ¥æ–¹æ³•ã€‚è§£å†³äº†ä»¥å‰æˆ‘çš„å¾ˆå¤šç–‘æƒ‘ã€‚å…³é”®æ˜¯é‡Œé¢æœ‰ä¸€äº›åè¯è§£é‡Šï¼šæ¯”å¦‚TCPæ…¢å¯åŠ¨ï¼Œæ¯”å¦‚å»¶è¿Ÿç¡®è®¤ï¼Œæ¯”å¦‚Nagelç®—æ³•ï¼Œç«¯å£è€—å°½ï¼Œè¿˜æœ‰ç®¡é“åŒ–è¿æ¥ã€‚è¿™äº›ä»¥å‰åªæ˜¯å¬è¯´è¿‡ï¼Œä½†æ˜¯å…·ä½“çš„éƒ½ä¸æ˜¯å¾ˆäº†è§£ï¼Œå­¦ä¹ äº†ã€‚æœ€åé‚£ä¸€å¼ å›¾ï¼Œå°±å¯ä»¥ä»£è¡¨æ•´ä¸ªæ–‡ç« çš„å¤§éƒ¨åˆ†å†…å®¹äº†ã€‚å­¦ä¹ æ•´ç†è‡ªã€ŠHTTPæƒå¨æŒ‡å—ã€‹æ„Ÿè°¢ã€‚","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/categories/è®¡ç®—æœºç½‘ç»œ/"}],"tags":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/tags/è®¡ç®—æœºç½‘ç»œ/"}]},{"title":"HTTPæŠ¥æ–‡è¯¦è§£","slug":"HTTPæŠ¥æ–‡è¯¦è§£","date":"2016-04-29T05:17:54.000Z","updated":"2016-12-12T02:28:42.000Z","comments":true,"path":"2016/04/29/HTTPæŠ¥æ–‡è¯¦è§£/","link":"","permalink":"http://sevencai.github.io/2016/04/29/HTTPæŠ¥æ–‡è¯¦è§£/","excerpt":"","text":"HTTPæŠ¥æ–‡æˆ‘ä»¬å·²ç»å¾ˆç†Ÿæ‚‰äº†ã€‚å¦‚æœè¯´HTTPæ˜¯å› ç‰¹ç½‘çš„ä¿¡ä½¿ï¼Œé‚£æˆ‘ä»¬å¯ä»¥æŠŠHTTPæŠ¥æ–‡å½“åšå®ƒç”¨æ¥æ¬ä¸œè¥¿çš„åŒ…è£¹äº†ã€‚ä¸‹é¢æ˜¯å…³äºHTTPæŠ¥æ–‡è¿™å—çš„è¯¦ç»†æ€»ç»“å’Œè®°å½•ã€‚ä¸»è¦å†…å®¹æœ‰ï¼šæŠ¥æ–‡æ—¶å¦‚ä½•æµåŠ¨çš„ï¼ŸHTTPæŠ¥æ–‡çš„ç»„æˆæ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬çŸ¥é“æŠ¥æ–‡å¯ä»¥åˆ†ä¸ºè¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªåˆæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿè¯·æ±‚æŠ¥æ–‡æ”¯æŒçš„å„ç§åŠŸèƒ½å’Œæ–¹æ³•æœ‰ï¼Ÿå“åº”æŠ¥æ–‡çŠ¶æ€å¸¸è§çš„ç æ€»ç»“ã€‚å›¾ç‰‡å…¨éƒ¨æ¥æºã€Šhttpæƒå¨æŒ‡å—ã€‹ï¼Œæ„Ÿè°¢ã€‚ æŠ¥æ–‡æµHTTPæŠ¥æ–‡æ˜¯å†HTTPåº”ç”¨ç¨‹åºä¹‹é—´å‘é€çš„æ•°æ®å—ã€‚è¿™äº›æ•°æ®å—ä»¥ä¸€äº›æ–‡æœ¬å½¢å¼çš„åŸä¿¡æ¯å¼€å¤´ã€‚è¿™äº›ä¿¡æ¯æè¿°äº†æŠ¥æ–‡çš„å†…å®¹åŠå«ä¹‰ã€‚è¿™äº›æŠ¥æ–‡æ—¶å†å®¢æˆ·ç«¯ï¼ŒæœåŠ¡å™¨ï¼Œä»£ç†ä¹‹é—´ä¸æ–­çš„æµåŠ¨çš„ã€‚æˆ‘ä»¬ä¸€èˆ¬ç”¨â€œæµå…¥â€ï¼Œâ€œæµå‡ºâ€ï¼Œâ€œä¸Šæ¸¸â€ï¼Œâ€œä¸‹æ¸¸â€æ¥æè¿°æŠ¥æ–‡æµåŠ¨çš„æ–¹å‘ã€‚ æŠ¥æ–‡æµå…¥æœåŠ¡å™¨ç«¯å¹¶æµå›å®¢æˆ·ç«¯è¿™ä¸ªå¾ˆå¥½ç†è§£ã€‚ æŠ¥æ–‡å‘ä¸‹æ¸¸æµåŠ¨æ³¨æ„ï¼Œè¿™é‡Œä¸ç®¡æ˜¯è¯·æ±‚è¿˜æ˜¯å“åº”æŠ¥æ–‡ï¼Œæ‰€æœ‰æŠ¥æ–‡éƒ½æ˜¯ä¼šå‘ä¸‹æ¸¸æµåŠ¨ã€‚æ‰€æœ‰æŠ¥æ–‡çš„å‘é€è€…éƒ½åœ¨ä¸Šæ¸¸ï¼Œæ¥å—è€…éƒ½åœ¨ä¸‹æ¸¸ã€‚æŠ¥æ–‡å°±åƒæ²³æ°´ä¸€æ ·ã€‚æ²³æ°´ä¸èƒ½å¾€ä¸Šæ¸¸æµï¼Œæ˜¯ä¸æ˜¯ï¼Ÿä¸€æ ·çš„é“ç†ã€‚ æŠ¥æ–‡çš„ç»„æˆéƒ¨åˆ†-é‡è¦æ¯ä¸€æ¡æŠ¥æ–‡éƒ½æ˜¯åŒ…å«ä¸€ä¸ªæ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œæˆ–è€…æ˜¯ä¸€æ¡æ¥è‡ªæœåŠ¡å™¨çš„å“åº”ã€‚å®ƒä»¬ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼Œå¯¹æŠ¥æ–‡è¿›è¡Œæè¿°çš„èµ·å§‹è¡Œï¼ŒåŒ…å«å±æ€§çš„é¦–éƒ¨å—ï¼Œä»¥åŠå¯é€‰çš„åŒ…å«æ•°æ®çš„ä¸»ä½“éƒ¨åˆ†ã€‚å³ï¼šstart line+header+bodyã€‚ èµ·å§‹è¡Œå’Œé¦–éƒ¨éƒ½æ˜¯ç”±è¡Œåˆ†å‰²çš„ASCIIæ–‡æœ¬ã€‚æ¯ä¸€è¡Œéƒ½æ˜¯ä»¥ä¸€ä¸ªç”±ä¸¤ä¸ªå­—ç¬¦ç»„æˆçš„åºåˆ—ä½œä¸ºç»“æŸã€‚ä¸€ä¸ªå›è½¦13ï¼Œä¸€ä¸ªæ¢è¡Œ10ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªç»ˆæ­¢åºåˆ—å¯ä»¥å†™ä½œCRLFã€‚ è¿™é‡Œè¦æ³¨æ„ä¸‹ï¼Œè™½ç„¶æ ‡å‡†æ˜¯è¯´è¦CRLFè¡¨ç¤ºç»ˆæ­¢è¡Œï¼Œä½†æ˜¯ç¨³å¥çš„åº”ç”¨ç¨‹åºä¹Ÿåº”è¯¥æ¥å—å•ä¸ªæ¢è¡Œç¬¦ä½œä¸ºè¡Œçš„ç»ˆæ­¢ã€‚å› ä¸ºæœ‰ä¸€äº›è€çš„ä¸å®Œæˆçš„åº”ç”¨ç¨‹åºå¹¶ä¸èƒ½æ€»æ˜¯å³å‘é€å›è½¦ï¼Œåˆå‘é€æ¢è¡Œã€‚ å®ä½“ï¼Œä¹Ÿå°±æ˜¯bodyéƒ¨åˆ†ã€‚æ˜¯ä¸€ä¸ªå¯ä»¥é€‰æ‹©çš„æ•°æ®å—ã€‚ä½†æ˜¯ä¸èµ·å§‹è¡Œå’Œé¦–éƒ¨ä¸åŒï¼Œbodyéƒ¨åˆ†å¯ä»¥æ˜¯æ–‡æœ¬ï¼Œå¯ä»¥æ˜¯äºŒè¿›åˆ¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¸ºç©ºã€‚æ³¨æ„ä¸‹ä¸Šé¢å›¾é‡Œçš„content-lengthæ˜¯è¯´çš„ä¸»ä½“éƒ¨åˆ†çš„é•¿åº¦ã€‚ æŠ¥æ–‡çš„è¯­æ³•è¯·æ±‚æŠ¥æ–‡çš„è¯­æ³•&lt;method&gt;&lt;request-url&gt;&lt;version&gt; &lt;headers&gt; &lt;entity-body&gt; å“åº”æŠ¥æ–‡çš„è¯­æ³•&lt;version&gt;&lt;status&gt;&lt;reason-phrase&gt; &lt;headers&gt; &lt;entity-body&gt; å…·ä½“è§£é‡Šä¸Šé¢è¯­æ³• æ–¹æ³•ï¼ˆmethodï¼‰ï¼šå®¢æˆ·ç«¯å¸Œæœ›æœåŠ¡å™¨å¯¹èµ„æºæ‰§è¡Œçš„åŠ¨ä½œï¼Œæ˜¯ä¸€ä¸ªå•ç‹¬çš„è¯ï¼Œæ¯”å¦‚GET,POST,HEADã€‚ è¯·æ±‚URLï¼ˆrequest-urlï¼‰:å‘½åäº†æ‰€è¯·æ±‚çš„èµ„æºï¼Œå¦‚æœæ˜¯ç›´æ¥è·ŸæœåŠ¡å™¨å¯¹è¯ï¼Œåˆ™åªè¦æ˜¯ç»å¯¹è·¯å¾„ï¼Œä½†å¦‚æœé€šè¿‡äº†ä»£ç†å°±æ˜¯è¦å†™å…¨ã€‚ ç‰ˆæœ¬ï¼ˆversionï¼‰:HTTP/&lt;major&gt;.&lt;minor&gt;ä¸»è¦æ˜¯ç‰ˆæœ¬å·å’Œæ¬¡è¦ç‰ˆæœ¬å·ã€‚éƒ½æ˜¯æ•´æ•°ï¼Œ1.22å’Œ1.3,ç‰ˆæœ¬å·ä¸ä¼šè¢«å½“åšå°æ ‘æ¥å¤„ç†ï¼Œéƒ½æ˜¯å•ç‹¬çš„æ•°æ®ã€‚æ‰€ä»¥2.22æ¯”2.3è¦é«˜ã€‚å› ä¸º22&gt;3ã€‚ çŠ¶æ€ç ï¼ˆstatus-codeï¼‰:è¿™ä¸‰ä¸ªæ•°å­—æè¿°äº†è¯·æ±‚è¿‡ç¨‹ä¸­æ‰€å‘ç”Ÿçš„æƒ…å†µã€‚ åŸå› çŸ­è¯­ï¼šæ•°å­—çŠ¶æ€ç çš„å¯è¯»ç‰ˆæœ¬ï¼ŒåŒ…å«è¡Œç»ˆæ­¢åºåˆ—ä¹‹å‰æ‰€æœ‰çš„æ–‡æœ¬ã€‚åŸå› çŸ­è¯­åªä¾›æˆ‘ä»¬é˜…è¯»ï¼Œæ¯”å¦‚HTTP/1.0 200 NOT OKå’ŒHTTP/1.0 200 OKéƒ½æ˜¯è¡¨ç¤ºæˆåŠŸæŒ‡ç¤ºã€‚åŸå› çŸ­è¯­å’ŒçŠ¶æ€ç æˆå¯¹å‡ºç°ã€‚ é¦–éƒ¨ï¼ˆheadersï¼‰ï¼šå¯ä»¥æœ‰å¤šä¸ªheader,åå­—ï¼š å€¼ CRLF å®ä½“ï¼ˆentity-body):å¯ä»¥é€‰æ‹©çš„æ•°æ®å—ã€‚å®ä½“ï¼Œä¹Ÿå°±æ˜¯bodyéƒ¨åˆ†ã€‚å°±æ˜¯HTTPè¦ä¼ è¾“çš„å†…å®¹ã€‚æ˜¯ä¸€ä¸ªå¯ä»¥é€‰æ‹©çš„æ•°æ®å—ã€‚å¯ä»¥æ˜¯æ–‡æœ¬ï¼ŒäºŒè¿›åˆ¶ï¼Œç©ºã€‚å¯ä»¥æ‰¿è½½å¾ˆå¤šç±»å‹ï¼Œå›¾ç‰‡ï¼Œè§†é¢‘ï¼ŒHTMLæ–‡æ¡£ï¼Œè½¯ä»¶åº”ç”¨é™ˆæ—­ï¼Œä¿¡ç”¨å¡äº‹ç‰©ï¼Œç”µå­é‚®ä»¶ç­‰ã€‚ æ–¹æ³•methodæ³¨æ„è¿™äº›æ–¹æ³•çš„è¯·æ±‚æŠ¥æ–‡ä¸­æœ‰ä¸»ä½“ï¼Œæœ‰äº›åˆ™æ˜¯æ²¡æœ‰ä¸»ä½“çš„è¯·æ±‚ï¼Œå¹¶ä¸”ä¹Ÿå¹¶ä¸æ˜¯æ‰€æœ‰çš„æœåŠ¡å™¨éƒ½å®ç°äº†ä¸Šé¢çš„7ä¸­æ–¹æ³•ã€‚è€Œä¸”å°±ç®—æœåŠ¡å™¨å®ç°äº†æ‰€æœ‰çš„è¿™äº›æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•çš„ä½¿ç”¨ä¹Ÿä¼šå—åˆ°é™åˆ¶ã€‚æ¯”å¦‚putå’Œdeleteæ–¹æ³•ï¼ŒæœåŠ¡å™¨ä¸å¯èƒ½è®©ä»»ä½•äººéƒ½å¯ä»¥åˆ é™¤æˆ–è€…å­˜å‚¨èµ„æºã€‚è¿™äº›ç°å®éƒ½ä¼šåœ¨æœåŠ¡å™¨è¿›è¡Œé…ç½®ã€‚å› æ­¤ä¼šéšç€ç«™ç‚¹çš„ä¸åŒè€Œä¸åŒã€‚ ä¸‹é¢è¯¦ç»†ä»‹ç»å¸¸è§çš„å‡ ä¸ªæ–¹æ³•ã€‚ GETè¯·æ±‚æœåŠ¡å™¨ä¸Šçš„æŸä¸ªèµ„æºã€‚ POSTPOSTæ–¹æ³•èµ·åˆæ˜¯è¦å‘æœåŠ¡å™¨è¾“å…¥æ•°æ®çš„ã€‚å®é™…ä¸Šï¼Œé€šå¸¸ç”¨æ¥æ”¯æŒè¡¨å•ã€‚ TRACEå½“å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚çš„æ—¶å€™ï¼Œè¿™ä¸ªè¯·æ±‚å¯èƒ½è¦ç©¿è¿‡é˜²ç«å¢™ï¼Œä»£ç†ï¼Œç½‘å…³ï¼Œæˆ–è€…å…¶ä»–ä¸€äº›åº”ç”¨ç¨‹åºã€‚æ¯ä¸ªä¸­é—´èŠ‚ç‚¹éƒ½å¯èƒ½ä¼šä¿®æ”¹è¯¥åŸå§‹HTTPè¯·æ±‚ã€‚Traceæ–¹æ³•å…è®¸å®¢æˆ·ç«¯åœ¨æœ€ç»ˆå°†è¯·æ±‚å‘é€ç»™æœåŠ¡å™¨æ—¶ï¼Œçœ‹çœ‹å®ƒå˜æˆäº†ä»€ä¹ˆæ ·ã€‚Traceè¯·æ±‚ä¼šåœ¨ç›®çš„æœåŠ¡å™¨å‘èµ·ä¸€ä¸ªæ¢å›è¯Šæ–­ã€‚èˆªç¨‹æœ€åä¸€ç«™çš„æœåŠ¡å™¨ä¼šå¼¹é€ä¸€ä¸ªTraceå“åº”ã€‚å¹¶ä¸”æŠŠå“åº”ä¸»ä½“ä¸­æºå¸¦å®ƒæ”¶åˆ°çš„åŸå§‹è¯·æ±‚æŠ¥æ–‡ã€‚è¿™æ ·å°±å¯ä»¥åœ¨å®¢æˆ·ç«¯æŸ¥çœ‹åœ¨æ‰€æœ‰ä¸­é—´HTTPåº”ç”¨ç¨‹åºç»„æˆçš„è¯·æ±‚ä¸Šã€‚åŸå§‹æŠ¥æ–‡æ˜¯å¦æˆ–è€…å¦‚ä½•è¢«æ¯åæˆ–ä¿®æ”¹è¿‡ã€‚ æ³¨æ„ï¼Œtraceè¯·æ±‚ä¸­ä¸èƒ½å¸¦æœ‰å®ä½“éƒ¨åˆ†çš„ä¸»ä½“å†…å®¹ï¼Œtraceå“åº”çš„å®ä½“ä¸»ä½“éƒ¨åˆ†åŒ…å«äº†å“åº”æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚çš„ç²¾ç¡®å‰¯æœ¬ã€‚ HEADHEADæ–¹æ³•ä¸GETæ–¹æ³•å¾ˆç±»ä¼¼ï¼Œä½†æœåŠ¡å™¨åœ¨å“åº”ä¸­åªè¿”å›é¦–éƒ¨ï¼Œä¸ä¼šè¿”å›å®ä½“ï¼Œè¿™å°±å…è®¸å®¢æˆ·ç«¯åœ¨æœªè·å–å®ä½“èµ„æºçš„æƒ…å†µä¸‹ï¼Œå¯¹èµ„æºçš„é¦–éƒ¨è¿›è¡Œæ£€æŸ¥ï¼Œä½¿ç”¨HEADçš„ä½œç”¨å…·ä½“å¦‚ä¸‹ï¼š 1. åœ¨ä¸è·å¾—èµ„æºçš„æƒ…å†µä¸‹äº†è§£èµ„æºçš„æƒ…å†µï¼ˆæ¯”å¦‚åˆ¤æ–­ç±»å‹ï¼‰ã€‚ 2. é€šè¿‡æŸ¥çœ‹å“åº”ä¸­çš„çŠ¶æ€ç ï¼Œçœ‹çœ‹æŸä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨ã€‚ 3. é€šè¿‡æŸ¥çœ‹é¦–éƒ¨ï¼Œæµ‹è¯•èµ„æºæ˜¯å¦è¢«ä¿®æ”¹ã€‚ DELETEè¯·æœåŠ¡å™¨åˆ é™¤è¯·æ±‚URLæ‰€æŒ‡å®šçš„èµ„æºï¼Œä½†æ˜¯å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæ— æ³•ä¿è¯åˆ é™¤çš„æ“ä½œä¸€å®šä¼šè¢«æ‰§è¡Œã€‚å› ä¸ºHTTPè§„èŒƒå…è®¸æœåŠ¡å™¨åœ¨ä¸é€šçŸ¥å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹æ’¤é”€è¯·æ±‚ã€‚ PUTä¸GETä»æœåŠ¡å™¨ä¸­è¯»å–æ–‡æ¡£ç›¸åï¼ŒPUTæ–¹æ³•ä¼šå‘æœåŠ¡å™¨å†™å…¥æ–‡æ¡£ã€‚æœ‰äº›å‘å¸ƒç³»ç»Ÿå…è®¸ç”¨æˆ·åˆ›å»ºWEBé¡µé¢å¹¶ç”¨PUTç›´æ¥å®‰è£…åˆ°æœåŠ¡å™¨ä¸Šå»ã€‚ å®ƒçš„è¯­ä¹‰å°±æ˜¯è®©æœåŠ¡å™¨ç”¨è¯·æ±‚ä¸»ä½“éƒ¨åˆ†æ¥åˆ›å»ºä¸€ä¸ªç”±æ‰€è¯·æ±‚çš„URLå‘½åçš„æ–°æ–‡æ¡£ã€‚æˆ–è€…ï¼Œå¦‚æœè¿™ä¸ªURLå·²ç»å­˜åœ¨ï¼Œå°±ç”¨è¿™ä¸ªä¸»ä½“ä»£æ›¿å®ƒã€‚ä¸€èˆ¬WebæœåŠ¡å™¨éƒ½è¦è¦æ±‚åœ¨æ‰§è¡ŒPUTä¹‹å‰ï¼Œç”¨å¯†ç ç™»é™†ã€‚åŸå› ä½ æ‡‚çš„ã€‚ OPTIONSOPTIONSæ–¹æ³•è¯·æ±‚WebæœåŠ¡å™¨å‘Šä¹‹å…¶æ”¯æŒçš„å„ç§åŠŸèƒ½ã€‚å¯ä»¥è¯¢é—®æœåŠ¡å™¨é€šå¸¸æ”¯æŒçš„å“ªäº›æ–¹æ³•ã€‚æˆ–è€…å †æŸäº›ç‰¹æ®Šèµ„æºæ”¯æŒå“ªäº›æ–¹æ³•ã€‚ è¿™çš„ä½œç”¨å°±æ˜¯ä¸ºå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæä¾›äº†ä¸€ç§æ‰‹æ®µã€‚ä½¿å…¶ä¸ç”¨å®é™…è®¿é—®å“ªäº›èµ„æºå°±èƒ½åˆ¤å®šè®¿é—®çš„èµ„æºçš„æœ€ä¼˜æ–¹å¼ã€‚ çŠ¶æ€ç æ–¹æ³•æ˜¯ç”¨æ¥å‘Šè¯‰æœåŠ¡å™¨è¦åšä»€ä¹ˆäº‹æƒ…çš„ï¼ŒçŠ¶æ€ç æ˜¯ç”¨æ¥å‘Šè¯‰å®¢æˆ·ç«¯å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…çš„ã€‚å¯ä»¥é€šè¿‡ä¸‰ç»´æ•°å­—ä»£ç å¯¹ä¸åŒçš„çŠ¶æ€ç è¿›è¡Œåˆ†ç±»ã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç›®å‰å®šä¹‰äº†çš„çŠ¶æ€ç ä¸æ˜¯å¾ˆå¤šã€‚ä½†æ˜¯åˆ†ç±»å¾ˆæ˜ç¡®ã€‚ ä¸»è¦äº†è§£ä¸‹ï¼š 100ï¼ˆcontinueï¼‰,101(Switching Protocols), 200(ok),201(created),202(accepted), 300(Multipul Choices),301(moved permanently),302(Found),303(See other),304(Not Modified), 400(Bad Request),401(Unauthorized),402(Payment Required),403ï¼ˆForbiddenï¼‰,404(Not Found), 500(Internal Server Error),501(Not Implemented),502(Bad Gateway),503(Service Unavailable),504(Gateway Timeout) 301ï¼šæ°¸ä¹…é‡å®šå‘ï¼Œ302ä¸´æ—¶é‡å®šå‘ã€‚ 307ï¼šHTTP1.1æŒ‡å‡ºï¼Œå¯¹äºHTTP1.1å®¢æˆ·ç«¯ï¼Œç”¨307çŠ¶æ€ç æ¥å–ä»£302çŠ¶æ€ç æ¥è¿›è¡Œä¸´æ—¶é‡å®šå‘ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠ302çŠ¶æ€ç ä¿ç•™èµ·æ¥ï¼Œä¸ºHTTP1.0å®¢æˆ·ç«¯ä½¿ç”¨ã€‚è¿™æ ·ä¸€æ¥ï¼ŒæœåŠ¡å™¨è¦é€‰æ‹©é€‚å½“çš„é‡å®šå‘çŠ¶æ€ç æ”¾å…¥é‡å®šå‘å“åº”ä¸­å‘é€ã€‚ 402ï¼šè¯¥çŠ¶æ€ç æš‚æ—¶æœªä½¿ç”¨ï¼Œä½†æ˜¯è¢«ä¿ç•™äº†ï¼Œä»¥åšæœªæ¥ä½¿ç”¨ 502ï¼šä½œä¸ºä»£ç†æˆ–è€…ç½‘å…³ä½¿ç”¨çš„æœåŠ¡å™¨ä»è¯·æ±‚å“åº”é“¾çš„ä¸‹ä¸€æ¡é“¾è·¯ä¸Šæ”¶åˆ°äº†ä¸€æ¡ä¼ªå“åº”ã€‚ï¼ˆæ¯”å¦‚ï¼šæ— æ³•è¿æ¥åˆ°å…¶ä»–ç½‘å…³ä¸Šï¼‰ 503ï¼šç”¨æ¥è¯´æ˜æœåŠ¡å™¨ç›®å‰æ— æ³• ä¸ºè¯·æ±‚æä¾›æœåŠ¡ã€‚ä½†å°†æ¥å¯ä»¥ã€‚ é¦–éƒ¨é¦–éƒ¨å’Œæ–¹æ³•é…åˆå·¥ä½œï¼Œå¯ä»¥å…±åŒå†³å®šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨èƒ½åšä»€ä¹ˆäº‹æƒ…ã€‚è¿™æœ‰åˆ†ä¸ºäº†é€šç”¨é¦–éƒ¨ï¼Œè¯·æ±‚é¦–éƒ¨ï¼Œå“åº”é¦–éƒ¨ï¼Œå®ä½“é¦–éƒ¨ï¼Œæ‰©å±•é¦–éƒ¨è¿™äº›åˆ†ç±»ã€‚ é€šç”¨é¦–éƒ¨ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½å¯ä»¥ä½¿ç”¨çš„é¦–éƒ¨ã€‚æ¯”å¦‚Dateé¦–éƒ¨ã€‚Date: Tue,3 Oct... è¯·æ±‚é¦–éƒ¨ï¼šè¯·æ±‚é¦–éƒ¨æ˜¯è¯·æ±‚æŠ¥æ–‡ç‰¹æœ‰çš„ã€‚æ¯”å¦‚Accept:*/*ã€‚å®ƒä»¬ä¸ºæœåŠ¡å™¨æä¾›äº†ä¸€äº›é¢å¤–çš„ä¿¡æ¯ã€‚æ¯”å¦‚å®¢æˆ·ç«¯å¸Œ3. æœ›æ¥æ”¶ä»€ä¹ˆç±»å‹çš„æ•°æ®ã€‚ å“åº”é¦–éƒ¨ï¼šå“åº”æŠ¥æ–‡ç‰¹æœ‰çš„ï¼Œä»¥ä¾¿ä¸ºå®¢æˆ·ç«¯æä¾›ä¿¡æ¯ï¼Œæ¯”å¦‚å®¢æˆ·ç«¯æ­£åœ¨è·Ÿå“ªç§æœåŠ¡å™¨å‘ç”Ÿé€šä¿¡ã€‚Server: Tiki... å®ä½“é¦–éƒ¨ï¼šæ˜¯ç”¨äºå®ä½“éƒ¨åˆ†çš„é¦–éƒ¨ï¼Œæ¯”å¦‚å¯ä»¥è¯´æ˜ä¸»ä½“éƒ¨åˆ†çš„æ•°æ®ç±»å‹ã€‚Content-type: text/html;charset... æ‰©å±•é¦–éƒ¨ï¼šéæ ‡å‡†é¦–éƒ¨ï¼Œç”±åº”ç”¨ç¨‹åºå¼€å‘è€…åˆ›å»ºï¼Œä½†è¿˜æ˜¯æ²¡æœ‰æ·»åŠ åˆ°è§„èŒƒä¸­å»ã€‚ æ€»ç»“ä¸»è¦æ˜¯å¯¹æ•´ä¸ªæŠ¥æ–‡éƒ¨åˆ†åšäº†ä¸€ä¸ªç¨å¾®å®Œæ•´ç‚¹çš„äº†è§£å’Œè®°å½•ã€‚å…¶å®è¿˜æœ‰æ¯”å¦‚çŠ¶æ€ç éƒ¨åˆ†éƒ½æ˜¯å¾ˆç²—ç•¥çš„ä»‹ç»ï¼Œè¿˜æœ‰å…³äºé¦–éƒ¨ï¼Œé‡Œé¢çš„å„ä¸ªåˆ†ç±»åˆ†åˆ«æœ‰å“ªäº›ä¿¡æ¯éƒ½åªæ˜¯å¤§æ¦‚çš„è®°å½•ä¸‹ã€‚æˆ‘è§‰å¾—è¿™äº›å¯ä»¥é‡åˆ°çš„æ—¶å€™å†å»æŸ¥ï¼Œç°åœ¨å¤§æ¦‚çš„çœ‹ä¸‹æœ‰å“ªäº›å’Œå¤§è‡´çš„ä½œç”¨å°±å¯ä»¥äº†ã€‚","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/categories/è®¡ç®—æœºç½‘ç»œ/"}],"tags":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/tags/è®¡ç®—æœºç½‘ç»œ/"}]},{"title":"Webç»„ä»¶ç»“æ„å’ŒURLçš„ç®€å•ä»‹ç»","slug":"Webç»„ä»¶ç»“æ„å’ŒURLçš„ç®€å•ä»‹ç»","date":"2016-04-28T15:30:45.000Z","updated":"2016-12-12T02:31:38.000Z","comments":true,"path":"2016/04/28/Webç»„ä»¶ç»“æ„å’ŒURLçš„ç®€å•ä»‹ç»/","link":"","permalink":"http://sevencai.github.io/2016/04/28/Webç»„ä»¶ç»“æ„å’ŒURLçš„ç®€å•ä»‹ç»/","excerpt":"","text":"ä»¥å‰å¤§äºŒçš„æ—¶å€™ï¼Œæ¥è§¦åˆ°äº†ã€ŠHTTPæƒå¨æŒ‡å—ã€‹è¿™æœ¬ä¹¦ï¼Œå½“æ—¶è§‰å¾—è¿™æœ¬ä¹¦å¥½æ£’ï¼Œå®¹æ˜“æ‡‚ï¼Œè€Œä¸”é…äº†å¾ˆå¤šå›¾ï¼Œå¾ˆå®¹æ˜“å°±æ˜ç™½ä½œè€…çš„æ„æ€ã€‚é™¤å»é™„å½•ï¼Œå…¶å®ä¹Ÿä¸åšã€‚æ˜¯ä¸æ˜¯å¯èƒ½æœ‰è¿™æ ·ä¸€ç§è¶‹åŠ¿ï¼Œå¥½åƒå¤–å›½äººéƒ½æ˜¯å–œæ¬¢æŠŠéš¾çš„ä¸œè¥¿å†™çš„æ›´ç®€å•ï¼Œå’±ä»¬å›½å†…çš„ä¹¦å¯èƒ½å°±å–œæ¬¢å†™çš„å¾ˆå¤æ‚ï¼Œ=ã€‚=ã€‚å½“æ—¶çœ‹äº†å‰é¢ä¸‰ç« ï¼Œåˆ°åé¢è®²ä»£ç†ï¼Œéš§é“ï¼Œç½‘å…³çš„æ—¶å€™ä¸å¤ªæ˜ç™½å°±æ”¾ä¸‹äº†ã€‚è¿™æ®µæ—¶é—´æœ‰ç‚¹ç§¯ç´¯ï¼Œå†åŠ ä¸Šæœ€è¿‘åˆä¸Šäº†ä¸€ç‚¹ç‚¹ç½‘ç»œè¯¾äº†ï¼Œå†å»çœ‹çš„æ—¶å€™å°±è§‰å¾ˆå®¹æ˜“æ˜ç™½ï¼Œä¹Ÿè½»æ¾äº†å¾ˆå¤šã€‚é‚£æ—¶å€™åœ¨CSDNä¸Šé¢å†™äº†ä¸¤ç¯‡åšå®¢ï¼Œä¸»è¦æ˜¯è®°å½•æ‰€å­¦çš„ã€‚HTTPæ¦‚è¿°å’ŒTCP/IPã€‚ï¼ˆpsï¼Œå¿½ç•¥æ’ç‰ˆè¿™ä»¶äº‹ï¼‰ã€‚æ‰€æœ‰çš„å›¾ç‰‡éƒ½æ˜¯æ¥è‡ªè¿™æœ¬ä¹¦ã€‚æ¥ä¸‹æ¥æˆ‘ä¼šæ¯ä¸ªæ˜ŸæœŸéƒ½çœ‹å‡ ç« ï¼Œç„¶åæŠŠä¸œè¥¿éƒ½æ•´ç†åˆ°åšå®¢ã€‚ä¸»è¦ç›®çš„ä¹Ÿæ˜¯æ•´ç†æ€è·¯ï¼Œæ–¹ä¾¿æŸ¥é˜…ï¼Œç³»ç»Ÿçš„å­¦ä¹ ä¸‹ï¼Œä¹Ÿåˆ†äº«ç»™å¤§å®¶ã€‚ Webçš„ç»„ä»¶ç»“æ„æˆ‘ä»¬çŸ¥é“äº†ä¸‡ç»´ç½‘çš„åŸºæœ¬ç»„ä»¶æ˜¯HTTPå®¢æˆ·ç«¯å’ŒHTTPæœåŠ¡å™¨ï¼Œä»–ä»¬å…¶å®è¿˜æœ‰ä¸å¾ˆå¤šå…¶ä»–çš„Webåº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’ã€‚ä¸‹é¢ç®€å•çš„è¯´æ˜ä¸‹è¿™äº›Webç»„ä»¶çš„æ˜¯ä»€ä¹ˆå’Œä»–ä»¬çš„ä½œç”¨ã€‚å…·ä½“æœ‰ä»£ç†ï¼Œç½‘å…³ï¼Œéš§é“ï¼Œç¼“å­˜ã€‚ä»¥åä¼šæœ‰ä¸“é—¨çš„æ–‡ç« ä¸“é—¨å†è®²ä»–ä»¬ã€‚ ä»£ç†HTTPä»£ç†æœåŠ¡å™¨æ˜¯Webå®‰å…¨ï¼Œåº”ç”¨é›†æˆä»¥åŠæ€§èƒ½ä¼˜åŒ–çš„é‡è¦ç»„æˆæ¨¡å—ã€‚ ä»£ç†æ˜¯ä»€ä¹ˆ?ä»£ç†æ˜¯ä¸ªHTTPä¸­é—´å®ä½“ï¼Œå®ƒä½äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ã€‚ è¿™ä¸ªå›¾ä¸Šæˆ‘ä»¬çœ‹çš„å‡ºæ¥ï¼Œä»£ç†ä½äºä»–ä»¬ä¸­é—´ï¼Œå¹¶ä¸”æ¥æ”¶æ‰€æœ‰çš„å®¢æˆ·ç«¯HTTPè¯·æ±‚ï¼Œå¹¶ä¸”å°†è¿™äº›è¯·æ±‚è½¬å‘ç»™æœåŠ¡å™¨ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä»£ç†æœåŠ¡å™¨å¯èƒ½ä¼šåšä¸€äº›ä¿®æ”¹å’Œå˜åŠ¨ç„¶åè½¬å‘ç»™æœåŠ¡å™¨ã€‚ ä»£ç†æœ‰å¾ˆå¤šä½œç”¨ï¼Œæˆ‘ä»¬ä¸€èˆ¬æŠŠä»£ç†ä½œä¸ºè½¬å‘æ‰€æœ‰Webæµé‡çš„å¯ä¿¡ä»»ä¸­é—´èŠ‚ç‚¹ä½¿ç”¨ï¼Œå› ä¸ºå®ƒå¯ä»¥æ¥è§¦åˆ°æ‰€æœ‰æµè¿‡çš„æµé‡ã€‚æ¯”å¦‚ä»£ç†å¯ä»¥ä½œä¸ºè¿‡æ»¤å™¨ï¼Œè®©å„¿ç«¥å°±ä¸èƒ½çœ‹ä¸å¥½çš„å†…å®¹ã€‚å†æ¯”å¦‚ï¼Œç½‘ç»œå·¥ç¨‹å¸ˆç”¨ä»£ç†æœåŠ¡å™¨æé«˜å®‰å…¨æ€§ï¼ŒæŠŠä»£ç†æœåŠ¡å™¨å½“åšå®‰å…¨é˜²ç«å¢™ã€‚å†æ¯”å¦‚æˆ‘ä»¬åˆ©ç”¨ä»£ç†æœåŠ¡å™¨åšç¼“å­˜ï¼Œåˆ©ç”¨ä»£ç†åšåå‘ä»£ç†ï¼Œå†…å®¹è·¯ç”±å™¨ç­‰ç­‰ã€‚ ä»£ç†è¿˜å¯ä»¥åˆ†ä¸ºæ­£å‘ä»£ç†å’Œåå‘ä»£ç†ã€‚è¿™ä¸ªæˆ‘æœ‰å…ˆå‰å†™è¿‡ä¸€ç¯‡åšå®¢ã€‚æ–‡ç« åœ°å€ è¿™ä¸­é—´å¯ä»¥æ€è€ƒä¸‹é¢çš„å‡ ä¸ªé—®é¢˜ï¼š ä»£ç†è¯·æ±‚ä¸­çš„URIå’ŒæœåŠ¡å™¨è¯·æ±‚ä¸­çš„URIæœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ æˆ‘ä»¬åˆšåˆšçŸ¥é“äº†ä»£ç†æœåŠ¡å™¨å¯ä»¥ä¿®æ”¹å†…å®¹ï¼Œé‚£ä¹ˆä¿®æ”¹URIçš„åŸåˆ™æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ æ‹¦æˆªå’Œåå‘ä»£ç†æ˜¯æ€ä¹ˆæŠŠæœåŠ¡å™¨ä¸»æœºçš„ä¿¡æ¯éšè—èµ·æ¥çš„å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“åå‘ä»£ç†æ—¶ï¼Œç”¨æˆ·ä¸çŸ¥é“ä»£ç†æœåŠ¡çš„å­˜åœ¨ã€‚ ä»£ç†æ€ä¹ˆæ ·å°è±¡æµè§ˆå™¨çš„åªèƒ½URIè‡ªåŠ¨å®Œæˆæœºåˆ¶ï¼Œæˆ–ä¸»æœºæ‰©å±•åç‰¹æ€§å‘¢ï¼Ÿæ¯”å¦‚æˆ‘è¾“å…¥cailidan,æµè§ˆå™¨ä¼šå»æœä»€ä¹ˆå‘¢ï¼Ÿhttp://cailidan.com?è¿˜æ˜¯http://cailidan.cn? ç¼“å­˜Webç¼“å­˜ï¼Œä¹Ÿæˆä¸ºä»£ç†ç¼“å­˜ï¼Œå®ƒæ˜¯ä¸Šé¢çš„ä¸€ç§ç‰¹ä¾‹ï¼Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ä»£ç†æœåŠ¡å™¨ã€‚å¯ä»¥å¸¸å¸¸æŠŠä»£ç†ä¼ é€çš„å¸¸ç”¨æ–‡æ¡£å­˜èµ·æ¥ã€‚è¿™æ ·ä¸‹ä¸€ä¸ªè¯·æ±‚åŒä¸€ä¸ªæ–‡æ¡£çš„å®¢æˆ·ç«¯å°±å¯ä»¥ç›´æ¥åœ¨ä»£ç†å•†äº«å—ç§æœ‰å‰¯æœ¬æä¾›çš„æœåŠ¡äº†ã€‚ ä¸ºä»€ä¹ˆè¦è¿™æ ·å‘¢ï¼Ÿå®¢æˆ·ç«¯ä»ç¦»ä»–è¿‘çš„åœ°æ–¹ä¸‹è½½æ–‡æ¡£ä¸å¾ˆæ˜æ˜¾æ¯”ä»è¿œç¨‹çš„WebæœåŠ¡å™¨ä¸Šä¸‹è½½è¦å¿«å¾ˆå¤šå—ï¼ŸHttpå®šä¹‰äº†å¾ˆå¤šåŠŸèƒ½ï¼Œå¾ˆå¤šå¤´éƒ¨ï¼Œç”¨æ¥æ›´é«˜æ•ˆçš„ç¼“å­˜ï¼Œä¹Ÿè§„èŒƒäº†æ–°é²œåº¦å’Œç¼“å­˜å†…å®¹çš„éšç§æ€§ã€‚ ç½‘å…³ç½‘å…³æ˜¯ä»€ä¹ˆï¼Ÿç½‘å…³æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æœåŠ¡å™¨ï¼Œä½œä¸ºå…¶ä»–æœåŠ¡å™¨çš„ä¸­é—´å®ä½“ä½¿ç”¨ã€‚ä¸»è¦ç”¨æ¥å°†HTTPæµé‡è½¬åŒ–ä¸ºå…¶ä»–çš„åè®®ï¼Œç”¨æˆ·åœ¨å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œå¹¶ä¸çŸ¥é“è‡ªå·±æ­£åœ¨æ˜¯å’Œç½‘å…³é€šä¿¡ï¼Œç½‘å…³è¿™æ—¶å€™è¡¨ç°çš„å°±åƒèµ„æºçš„æºç«¯æœåŠ¡å™¨ä¸€æ ·ã€‚ å¦‚ä¸Šé¢çš„å›¾ï¼Œä¸€ä¸ªHTTP/FTPçš„ç½‘å…³ä¼šé€šè¿‡HTTPè¯·æ±‚å¯¹FTP URIçš„è¯·æ±‚ï¼Œä½†é€šè¿‡TFPæ¥è·å–æ–‡æ¡£ã€‚å¾—åˆ°äº†æ–‡æ¡£ä¼šè¢«FTPæœåŠ¡å™¨å°è£…æˆæˆä¸€æ¡HTTPæŠ¥æ–‡ã€‚å¹¶ä¸”å‘é€ç»™å®¢æˆ·ç«¯ã€‚ å¥½ï¼Œåˆ°è¿™é‡Œï¼Œç½‘å…³å’Œä»£ç†åˆæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ ä¸¥æ ¼æ¥è¯´ï¼Œä»£ç†è¿æ¥çš„æ˜¯ä¸¤ä¸ªæˆ–è€…å¤šä¸ªä½¿ç”¨ç›¸åŒåè®®çš„åº”ç”¨ç¨‹åºï¼Œè€Œç½‘å…³å´è¿æ¥çš„æ˜¯ä¸¤ä¸ªæˆ–è€…ä½¿ç”¨ä¸åŒåè®®çš„ç«¯ç‚¹ã€‚ç½‘å…³æ‰®æ¼”çš„æ˜¯â€œåè®®è½¬æ¢å™¨â€çš„è§’è‰²ã€‚åŠæ—¶å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯ä¸åŒåè®®ï¼Œå®¢æˆ·ç«¯ä¹Ÿèƒ½å¤Ÿé€šè¿‡å®ƒå®Œæˆå’ŒæœåŠ¡å™¨ä¹‹é—´çš„äº‹ç‰©å¤„ç†ã€‚ éš§é“é€šè¿‡Webéš§é“ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡HTTPåº”ç”¨ç¨‹åºè®¿é—®ä½¿ç”¨è´¹HTTPåè®®çš„åº”ç”¨ç¨‹åºã€‚ éš§é“æ˜¯å»ºç«‹èµ·æ¥åï¼Œå°±ä¼šåœ¨ä¸¤æ¡è¿æ¥ä¸­é—´å¯¹åŸå§‹æ•°æ®è¿›è¡Œç›²è½¬å‘çš„HTTPåº”ç”¨ç¨‹åºã€‚Httpéš§é“é€šå¸¸ç”¨æ¥åœ¨ä¸€æ¡æˆ–å¤šæ¡HTTPè¿æ¥ä¸Šè½¬å‘éHTTPæ•°æ®ï¼Œå¹¶ä¸”è½¬å‘æ—¶ä¹Ÿä¸ä¼šçª¥æ¢æ•°æ®ã€‚ Webéš§é“å…è®¸ç”¨æˆ·é€šè¿‡HTTPè¿æ¥è€Œå‘é€éHTTPæµé‡ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨HTTPä¸Šç¨å¸¦å…¶ä»–çš„åè®®æ•°æ®äº†ã€‚ä½¿ç”¨Webéš§é“æœ€å¸¸è§çš„åŸå› å°±æ˜¯è¦åœ¨HTTPè¿æ¥ä¸­åµŒå…¥éHTTPæµé‡ï¼Œè¿™æ ·ï¼Œè¿™ç±»æµé‡å°±å¯ä»¥ç©¿è¿‡åªå…è®¸Webæµé‡é€šè¿‡çš„é˜²ç«å¢™äº†ã€‚ å¦‚åœ¨ä¸Šé¢è¿™ä¸ªå›¾ä¸­ï¼Œçœ‹åˆ°HTTPéš§é“çš„å¸¸è§ç”¨é€”ï¼Œæ˜¯é€šè¿‡HTTPè¿æ¥æ‰¿è½½åŠ å¯†çš„å®‰å…¨å¥—æ¥å­—æµé‡ï¼Œè¿™æ ·SSLæµé‡å°±å¯ä»¥ç©¿è¿‡åªå…è®¸Webæµé‡é€šè¿‡çš„é˜²ç«å¢™äº†ã€‚åœ¨HTTP/SSLéš§é“ä¸­æ”¶åˆ°äº†ä¸€æ¡HTTPè¯·æ±‚ï¼Œè¦æ±‚å»ºç«‹ä¸€æ¡é“ç›®çš„åœ°å€å’Œç«¯å£çš„è¾“å‡ºè¿æ¥ï¼Œç„¶ååœ¨HTTPä¿¡é“ä¸Šé€šè¿‡éš§é“ä¼ è¾“åŠ å¯†çš„SSLæµé‡ï¼Œè¿™æ ·å°±å¯ä»¥å°†å…¶å¿™è½¬å‘åˆ°ç›®çš„æœåŠ¡å™¨ä¸Šå»äº†ã€‚ ç®€å•çš„è¯´ï¼ŒHTTPéš§é“æŠ€æœ¯å°±æ˜¯æŠŠæ‰€æœ‰è¦ä¼ é€çš„æ•°æ®å…¨éƒ¨å°è£…åˆ°HTTPåè®®é‡Œè¿›è¡Œä¼ é€ã€‚ URLä¸èµ„æºURLï¼Œæˆ‘ä»¬å·²ç»å†ç†Ÿæ‚‰ä¸è¿‡äº†ã€‚URLæ˜¯å› ç‰¹ç½‘èµ„æºçš„æ ‡å‡†åŒ–åç§°ï¼ŒURLæ˜¯URIçš„å­é›†ï¼Œä¸‹é¢ä¸»è¦ä»‹ç»ï¼šURLè¯­æ³•ï¼ŒURLç¼–ç å’Œå­—ç¬¦é›†è§„åˆ™ï¼Œå¸¸è§çš„URLæ–¹æ¡ˆï¼ŒURLçš„æœªæ¥-URNã€‚ URLå› ç‰¹ç½‘çš„è¯­æ³•URLåŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†,URLæ–¹æ¡ˆï¼ŒæœåŠ¡å™¨ä½ç½®ï¼Œèµ„æºè·¯å¾„â€“schema,host,pathã€‚URLå¯ä»¥æŒ‡å®šHTTPä¹‹å¤–çš„å…¶ä»–åè®®æ¥è®¿é—®ï¼Œä½†å¤§å¤šæ•°éƒ½æœ‰åŒæ ·çš„è¿™ç§ç»“æ„ã€‚ æ–¹æ¡ˆï¼š//æœåŠ¡å™¨ä½ç½®/è·¯å¾„ 1&lt;schema&gt;://&lt;user&gt;:&lt;password&gt;@&lt;host&gt;:&lt;port&gt;/&lt;path&gt;;&lt;param&gt;?&lt;query&gt;#&lt;frag&gt; å¦‚ä¸‹æ‰€ç¤ºï¼š http://www.cailidan.cn/images/1.png ftp://ftp.lots-o-books.com/pub/1.xls rtsp://www.joes.com:554/a/vt_video URLæœ‰ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„ä¹‹åˆ†ã€‚è¿™ä¸­é—´æœ‰ä¸“é—¨çš„ç®—æ³•æ¥å°†ç›¸å¯¹è·¯å¾„è½¬åŒ–ä¸ºç»å¯¹è·¯å¾„ã€‚ è‡ªåŠ¨æ‰©å±•URLæˆ‘ä»¬çŸ¥é“å½“ç”¨æˆ·åœ¨è¾“å…¥URLçš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨è¿›è¡Œæ‰©å±•ï¼Œä¸éœ€è¦ç”¨æˆ·è¾“å…¥å®Œæ•´çš„URLã€‚æ‰©å±•ä¸»è¦æ˜¯æœ‰ä¸‹é¢ä¸¤ç§æ–¹å¼æ‰©å±•çš„ã€‚ ä¸»æœºåæ‰©å±•æ¯”å¦‚ï¼Œå¦‚æœä½ å†åœ°å€æ è¾“å…¥cailidanï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨åœ¨ä¸»æœºåä¸­æ’å…¥wwwå’Œ.comï¼Œæ„å»ºå‡ºwww.cailidan.comã€‚æ˜¾ç„¶æˆ‘ä½¿ç”¨çš„æ˜¯cn.æ‰€ä»¥è¿™ä¸ªæ—¶å€™æ˜¯å¾—ä¸åˆ°æ­£ç¡®çš„è§£æçš„ã€‚æ‰¾ä¸åˆ°æ—¶ï¼Œæµè§ˆå™¨ä¼šåœ¨æ”¾å¼ƒå‰å°è¯•é›†ä¸­æ‰©å±•å½¢å¼ã€‚æµè§ˆå™¨é€šè¿‡è¿™äº›ç®€å•çš„æŠ€å·§æ¥èŠ‚çœä½ çš„æ—¶é—´ã€‚ä½†è¿™åœ¨ä»£ç†çš„æ—¶å€™ä¼šå‡ºç°é—®é¢˜ã€‚ å†å²æ‰©å±•è¿˜æœ‰ä¸€ç§èŠ‚çœç”¨æˆ·è¾“å…¥URLæ—¶é—´çš„æ–¹æ³•ï¼Œå°±æ˜¯æŠŠç”¨æˆ·ä»¥å‰è®¿é—®è¿‡çš„URLå­˜å‚¨èµ·æ¥ã€‚è¿™æ ·ä½ è¾“å…¥çš„æ—¶å€™æµè§ˆå™¨ä¼šæä¾›ä¸€äº›é€‰æ‹©ç»™ä½ ã€‚ å­—ç¬¦URLæ˜¯å¯ä»¥ç§»æ¤çš„ï¼Œè¿™æ„å‘³ç€ï¼Œå®ƒè¦ç»Ÿä¸€çš„å‘½åå› ç‰¹ç½‘ä¸Šæ‰€æœ‰çš„èµ„æºï¼Œè¿™ä¹Ÿæ„å‘³ç€è¦é€šè¿‡å„ç§ä¸åŒçš„åè®®æ¥ä¼ é€è¿™äº›èµ„æºã€‚å®‰å…¨ä¼ è¾“æ„å‘³ç€URLçš„ä¼ è¾“ä¸èƒ½å¤Ÿä¸¢å¤±ã€‚æœ‰äº›åè®®ï¼Œæ¯”å¦‚ï¼Œä¼ è¾“ç”µå­é‚®ä»¶çš„ç®€å•é‚®ä»¶ä¼ è¾“åè®®ã€‚æ‰€ä½¿ç”¨çš„ä¼ è¾“æ–¹æ³•å°±ä¼šåšå–ä¸€äº›ç‰¹å®šçš„å­—ç¬¦ã€‚ä¸ºäº†é¿å…è¿™äº›é—®é¢˜ã€‚URLåªèƒ½ä½¿ç”¨ä¸€äº›ç›¸å¯¹æ¯”è¾ƒå°çš„ï¼Œé€šç”¨çš„å®‰å…¨å­—æ¯è¡¨ä¸­çš„å­—æ¯ã€‚å¹¶ä¸”æˆ‘ä»¬è¿˜å¸Œæœ›URLå¯ä»¥ä¾›äººç±»é˜…è¯»ã€‚å› æ­¤ï¼Œå³ä½¿çœ‹ä¸åˆ°çš„ï¼Œä¸å¯æ‰“å°çš„å­—ç¬¦ï¼Œä»è€Œæˆä¸ºå¯ä»¥ç§»æ¤çš„ã€‚URLè¿˜å¾—æ˜¯å®Œæ•´çš„ã€‚æˆ‘ä»¬éœ€è¦è½¬ç§»æœºåˆ¶ï¼Œèƒ½å¤ŸæŠŠä¸å®‰å…¨çš„å­—ç¬¦ç¼–ç ä¸ºå®‰å…¨å­—ç¬¦ã€‚å†è¿›è¡Œä¼ è¾“ã€‚ ç¼–ç æœºåˆ¶ä¸ºäº†é¿å¼€å®‰å…¨å­—ç¬¦é›†è¡¨ç¤ºæ³•çš„é™åˆ¶ï¼Œäººä»¬è®¾ç½®äº†ä¸€ç§ç¼–ç æœºåˆ¶ï¼Œç”¨æ¥åœ¨URLä¸­è¡¨ç¤ºå„ç§ä¸å®‰å…¨å­—ç¬¦ã€‚è¿™ç§æ–¹æ³•å°±æ˜¯é€šè¿‡è½¬ä¹‰è¡¨ç¤ºæ³•æ¥è¡¨ç¤ºä¸å®‰å…¨å­—ç¬¦çš„ã€‚è½¬ä¹‰è¡¨ç¤ºæ³•åŒ…æ‹¬äº†ä¸€ä¸ªç™¾åˆ†å·%ï¼Œåé¢æ˜¯ä¸¤ä¸ªè¡¨ç¤ºå­—ç¬¦ASCIIç çš„åå…­è¿›åˆ¶æ•°ã€‚ å­—ç¬¦é™åˆ¶åœ¨URLä¸­ï¼Œæœ‰å‡ ä¸ªå­—ç¬¦è¢«ä¿ç•™èµ·æ¥ï¼Œæœ‰ç€ç‰¹æ®Šçš„å«ä¹‰ã€‚è¿™äº›å­—ç¬¦ä¸å†å®šä¹‰çš„US-ASCIIå¯æ‰“å°å­—ç¬¦ä¸­ï¼Œè¿™äº›å­—ç¬¦åœ¨å°†å…¶ç”¨åœ¨ä¿ç•™ç”¨é€”ä¹‹å¤–çš„åœºåˆæ—¶ï¼Œè¦åœ¨URLä¸­å¯¹å…¶è¿›è¡Œç¼–ç ã€‚æ¯”å¦‚ï¼š%ï¼Œ/,.ï¼Œ#ï¼Œï¼Ÿ,$,&amp;,=ä¹‹ç±»çš„ã€‚ æœªæ¥å±•æœ›URLæ˜¯å¯ä»¥åœ¨å„ç§å› ç‰¹ç½‘åè®®é—´å…±äº«çš„ç»Ÿä¸€å‘½åæœºåˆ¶ã€‚ä½†æ˜¯URLï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯å®é™…åœ°å€ï¼Œè€Œä¸æ˜¯å‡†ç¡®çš„åå­—ã€‚URLä¼šå‘Šè¯‰ä½ èµ„æºåœ¨å“ªä¸ªåœ°æ–¹ã€‚å®ƒä¼šä¸ºä½ æä¾›ç‰¹å®šç«¯å£ä¸Šç‰¹å®šçš„æœåŠ¡å™¨çš„åå­—ï¼Œå‘Šè¯‰ä½ å¯ä»¥åœ¨è¿™ä¸ªåœ°æ–¹æ‰¾åˆ°è¿™ä¸ªèµ„æºã€‚å®ƒçš„ç¼ºç‚¹æ˜¯ï¼Œå¦‚æœèµ„æºè¢«ç§»èµ°äº†ï¼ŒURLä¹Ÿä¸å†æœ‰æ•ˆäº†ã€‚é‚£ä¸ªæ—¶å€™ï¼Œå°±æ— æ³•å¯¹å¯¹è±¡è¿›è¡Œå®šä½äº†ã€‚ ç„¶åå°±æœ‰äººæƒ³ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡æœ‰äº†ä¸€ä¸ªå‡†ç¡®çš„åç§°ï¼Œå°±åƒäººçš„èº«ä»½è¯ä¸€æ ·ï¼Œé‚£ä¹ˆä¸ç®¡è¿™ä¸ªèµ„æºåœ¨å“ªé‡Œï¼Œæˆ‘ä»¬éƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªåç§°æ‰¾åˆ°è¿™ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªæ—¶å€™URNå‡ºæ¥äº†ã€‚ä½†æ˜¯è¿™ä¸ªç›®å‰ä½¿ç”¨çš„äººä¸æ˜¯å¾ˆå¤šé¢ã€‚å› ä¸ºç”±URLè½¬æ¢æˆURNæ˜¯ä¸€ä¸ªå¾ˆå·¨å¤§çš„å·¥ç¨‹ï¼Œæ›´ä½•å†µåœ¨URLå·²ç»å¦‚æ­¤æ™®åŠçš„æƒ…å†µä¸‹ã€‚","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/categories/è®¡ç®—æœºç½‘ç»œ/"}],"tags":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/tags/è®¡ç®—æœºç½‘ç»œ/"}]},{"title":"ã€ŠJavascript for PHP Developersã€‹è¯»ä¹¦ç¬”è®°","slug":"ã€ŠJavascript-for-PHP-Developersã€‹è¯»ä¹¦ç¬”è®°","date":"2016-04-25T13:56:33.000Z","updated":"2016-12-12T03:01:32.000Z","comments":true,"path":"2016/04/25/ã€ŠJavascript-for-PHP-Developersã€‹è¯»ä¹¦ç¬”è®°/","link":"","permalink":"http://sevencai.github.io/2016/04/25/ã€ŠJavascript-for-PHP-Developersã€‹è¯»ä¹¦ç¬”è®°/","excerpt":"","text":"è¿™æœ¬ä¹¦ä¸€å…±æ‰130å¤šé¡µï¼Œå½“æ—¶åœ¨å›¾ä¹¦é¦†å€Ÿè¿™æœ¬ä¹¦çš„æ—¶å€™ï¼Œçº¯ç²¹æ˜¯å› ä¸ºå®ƒæŠŠéƒ¨åˆ†phpå’Œjavascriptæ”¾åœ¨ä¸€èµ·å¯¹æ¯”ã€‚åæ¥çœ‹ä¸‹å»ï¼ŒçŸ¥è¯†ç‚¹è®²çš„ä¸ç»†ï¼Œä½†æ˜¯å¯¹Javascriptæ•´ä½“å®¹æ˜“çŠ¯é”™çš„åœ°æ–¹éƒ½æœ‰è§£é‡Šã€‚è€Œä¸”ç”±äºä¹¦ç‰¹åˆ«è–„ï¼Œæ‰€ä»¥è¯»èµ·æ¥ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ï¼Œç›®å½•å¾ˆæ¸…æ™°ã€‚æ‰€ä»¥è¿˜æ˜¯ä¸é”™çš„ã€‚ä¸‹é¢è®°å½•çš„æ˜¯æˆ‘çœ‹ä¹¦çš„æ—¶å€™å‘ç°çš„ä¸€äº›çŸ¥è¯†ç‚¹çš„æ¼æ´æˆ–è€…æ˜¯æ€»ç»“ã€‚å…ˆè®©æˆ‘ä»¬çœ‹çœ‹è¿™æœ¬ä¹¦çš„çœŸé¢ç›®ï¼š é»˜è®¤å‚æ•°å¯èƒ½è¦æ³¨æ„çš„ä¸€ä¸ªå‘12345function sum(a,b)&#123; b = b||2; return a+b;&#125;console.log(sum(2,0)); æˆ‘æƒ³è¦æŠŠ2å’Œ0ç›¸åŠ ï¼Œæœ€åå¾—åˆ°2ï¼Œä½†æ˜¯è¿™ä¸ªçš„è¾“å‡ºç»“æœç¡®å®4ï¼Œå¤§å®¶ä¸€çœ‹è‚¯å®šæ˜ç™½ä¸ºä»€ä¹ˆä¼šè¾“å‡º4äº†å§ã€‚å› ä¸ºå½“æˆ‘ä»¬ä¼ å…¥0çš„æ—¶å€™ï¼Œè¿™ç§æ¯”è¾ƒä¼šå¾—åˆ°ç»“æœä¸ºfalseã€‚ä¸€ä¸ªå¯è¡Œè§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨typeofã€‚å¹³æ—¶è¦æ³¨æ„è¿™ä¸ªã€‚12345function sum(a,b)&#123; b = typeof b === \"undefined\"?2:b; return a+b;&#125;console.log(sum(2,0)); substræ˜¯éæ ‡å‡†çš„é¡ºä¾¿æ€»ç»“ä¸‹æˆªå–å­—ç¬¦ä¸²çš„ä¸‰ç§æ–¹æ³•ã€‚123console.log(s.slice(4,7));console.log(s.substring(4,7));console.log(s.substr(4,3)); å‡ ç§ç¼–ç URLæ–¹æ³•å’Œå®ƒä»¬çš„åŒºåˆ«å’Œè”ç³»encodeURIå’ŒdecodeURIç±»ä¼¼äºencodeURIComponentå’ŒdecodeURIComponentï¼ŒåŒºåˆ«åœ¨äºå‰è€…åªæ˜¯ç¼–ç éœ€è¦ç¼–ç çš„é‚£ä¸€éƒ¨åˆ†ï¼Œå°†ç±»ä¼¼äºHttp://çš„è¿™ä¸ªéƒ¨åˆ†æ˜¯ä¸ç”¨åŠ¨çš„ã€‚å¹¶ä¸”è¦æ³¨æ„encodeURIä¸ç¼–ç &amp;ï¼Œå…·ä½“æƒ³ç”¨å“ªä¸ªå¯ä»¥æ ¹æ®å…·ä½“çš„éœ€æ±‚æ¥ã€‚ 123456789var testUrl = \"https://www.baidu.com/s?r ds v_bp=0&amp;bar=&amp;rsv_spt=3\";console.log(encodeURIComponent(testUrl));console.log(decodeURIComponent(encodeURIComponent(testUrl)));console.log(encodeURI(testUrl));console.log(decodeURI(encodeURI(testUrl)));console.log(escape(testUrl));console.log(unescape(escape(testUrl))); è¿™é‡Œæä¸€ä¸‹escapeå’Œunescape,ä»–ä»¬ä¸æ˜¯ECMAScriptçš„ä¸€éƒ¨åˆ†ï¼Œä»–ä»¬æ¥è‡ªäºBOMï¼Œæˆ‘ä»¬å°½é‡åº”è¯¥é¿å…ä½¿ç”¨å®ƒä»¬ã€‚ å…³äºnullå’Œundefinedundefinedè¿”å›çš„å€¼æ€»æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä¸‹é¢è¿™ç§æƒ…å†µè¦æ³¨æ„ã€‚123456var a;console.log(a);console.log(a == undefined);console.log(a == \"undefined\");console.log(typeof a == undefined);console.log(typeof a == \"undefined\"); ç­”æ¡ˆæ˜¯ï¼š undefinedï¼Œ trueï¼Œ falseï¼Œ falseï¼Œ trueã€‚nullè¦æ³¨æ„çš„å°±æ˜¯typeof nullç»“æœæ˜¯objectå°±è¡Œäº†ã€‚ åˆ é™¤å±æ€§1234var obj = &#123;one:1,two:2&#125;;delete obj.one;//obj.one = null;console.log(obj); ä»¥å‰åˆ é™¤ä¸€ä¸ªå±æ€§ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯ç”¨çš„obj.one = nullè¿™ç§å½¢å¼ï¼Œç°åœ¨çœ‹æ¥æˆ‘çœŸçš„æ˜¯å¤§é”™ç‰¹é”™äº†ã€‚ç”¨deleteåˆ é™¤ï¼Œæœ€åobjæ˜¯Object {two: 2}ï¼Œoneç¡®å®è¢«å»æ‰äº†ï¼Œè€Œä¸”é€šè¿‡obj.oneå†å»è®¿é—®çš„æ—¶å€™ï¼Œè¿”å›çš„æ˜¯undefinedã€‚ä½†æ˜¯å½“æˆ‘ä»¬é€šè¿‡èµ‹å€¼ä¸ºnullè¿™ç§å½¢å¼æ—¶ï¼Œå®ƒåªæ˜¯è¢«é‡æ–°èµ‹å€¼ä¸ºnulläº†ï¼Œè€Œä¸æ˜¯å®Œå…¨çš„åˆ é™¤äº†ã€‚ phpå’Œjsçš„try-catchæœ‰ä»€ä¹ˆåŒºåˆ«?åŒºåˆ«è®°å½•å¦‚ä¸‹ï¼š 1. jsæŠ›å‡ºçš„æ˜¯Errorå¯¹è±¡ï¼Œè€Œä¸æ˜¯Exceptionå¯¹è±¡ã€‚ 2. æ•è·æ—¶ï¼Œjsæ²¡æœ‰å£°æ˜ç±»å‹ã€‚ 3. è®¿é—®messageå±æ€§ï¼Œè€Œä¸æ˜¯è°ƒç”¨getMessageæ–¹æ³•ã€‚ å…·ä½“æ¥çœ‹çœ‹ä»£ç ï¼š123456789var msg = \"\";try&#123; throw new Error(\"ouch\");&#125;catch(e)&#123; msg += e.message;&#125;finally&#123; msg += \"-finally\";&#125;console.log(msg); ç­”æ¡ˆæ˜¯ouch-finally;çœ‹çœ‹phpæ˜¯æ€ä¹ˆå†™çš„ï¼š12345try&#123; throw new Exception(\"ouch\");&#125;catch(Exception $e)&#123; $msg = $e.getMessage();&#125; å…¨å±€å˜é‡å’Œå…¨å±€å¯¹è±¡çš„å±æ€§çš„ç»†å¾®åŒºåˆ«12345678910var john = \"Jo\";console.log(john);console.log(window.john);window.jane = \"Jane\";console.log(jane);console.log(window.jane);console.log(delete window.john);console.log(delete window.jane); ç»“æœæ˜¯Jo,Jo,Jane,Jane,false,trueã€‚ä¸»è¦æ³¨æ„ä¸‹è¿™ä¸ªfalseã€‚æˆ‘ä»¬å¯ä»¥æŠŠå…¨å±€å˜é‡å½“æˆæ˜¯å…¨å±€å¯¹è±¡çš„å±æ€§æ¥çœ‹ï¼Œå”¯ä¸€çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œä½ æ— æ³•åˆ é™¤å®ƒä»¬ã€‚çœ‹è¿™é‡Œçš„johnæ˜¯æ— æ³•è¢«deleteåˆ é™¤çš„ã€‚ åˆ©ç”¨parseIntæŠŠCSSåå…­è¿›åˆ¶é¢œè‰²å®šä¹‰è½¬æ¢ä¸ºrgb()123456789function getRGB(color)&#123; var r = parseInt(color[1]+color[2],16); var g = parseInt(color[3]+color[4],16); var b = parseInt(color[5]+color[6],16); return \"rgb(\"+r+\",\"+g+\",\"+b+\")\";&#125;var color = \"#ff0000\";console.log(getRGB(color)); æœ€åçš„ç»“æœæ˜¯ï¼šrgb(255,0,0),æ€»ç»“ä¸‹å…¨å±€å‡½æ•°ä¸­å››ä¸ªä¸æ•°å­—ç›¸å…³çš„å‡½æ•°åˆ†åˆ«æ˜¯ï¼šisNaN(),isFinite(),parseInt(),parseFloat()ã€‚ toStringï¼ˆï¼‰æ–¹æ³•12345var o = &#123;&#125;;console.log(o.toString());console.log(Object.prototype.toString.call(o));//å­—ç¬¦ä¸²\"[object Object]\"å¯¹äºä»»ä½•å¯¹è±¡éƒ½æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥ä¸‹é¢è¿”å›trueconsole.log(Object.prototype.toString.call(&#123;&#125;) === Object.prototype.toString(&#123;a:1&#125;)); toString()æ–¹æ³•å­˜åœ¨äºObject.prototypeä¹‹ä¸Šï¼Œå› æ­¤ï¼Œå¯ä»¥åƒä¸Šé¢é‚£æ ·ä½¿ç”¨å®ƒä»¬ã€‚toStringæ–¹æ³•ä¸€èˆ¬ç”¨äºæµ‹è¯•æ•°ç»„ï¼Œç”±äºä¸€äº›åŸå› ï¼Œå…¶ä»–çš„ä¸€äº›æµ‹è¯•æ•°ç»„æ–¹æ³•éƒ½ä¼šæœ‰ç¼ºé™·ï¼Œä¸‹é¢çš„æ˜¯ç›®å‰ç¨å¾®å¥½ä¸€ç‚¹çš„è§£å†³åŠæ³•ã€‚ 1234567function isArray(arr)&#123; if(!Array.isArray)&#123; return Object.prototype.toString.call(arr) === \"[object Object]\"; &#125; return Array.isArray(arr);&#125;isArray([1,2]); æ„é€ å™¨å‡½æ•°Numberï¼ŒString,Boolean,è¿™äº›ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨æ„é€ å™¨å‡½æ•°ï¼Œè€Œä¸æ˜¯ä»¥newä¸€ä¸ªå¯¹è±¡çš„å½¢å¼ï¼Œå°±è¿”å›çš„æ˜¯åŸå§‹ç±»å‹ï¼Œè€Œä¸æ˜¯å¯¹è±¡ã€‚è¿™ä¸ªå…ˆå‰åšå®¢é‡Œæœ‰æåˆ°è¿‡ã€‚æ¯”å¦‚typeof Number(1.1)è¿”å›ç»“æœæ˜¯&quot;number&quot;ï¼Œtypeof new Number(&quot;1,1&quot;),ç»“æœæ˜¯objectã€‚Number(1.1)è¿”å›çš„ç»“æœæ˜¯1.1ã€‚Number(123).toFixed(2);ç»“æœæ˜¯123.00ã€‚ 123console.log(Number(123).toFixed(2));console.log((100000000000).toExponential());console.log((100000000000).toPrecision(3)); forEachä¼ é€’ç»™å›è°ƒå‡½æ•°çš„å‚æ•°æˆ‘å®¹æ˜“æŠŠç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå†™åã€‚æ¯”å¦‚å†™æˆfunction(index,item)è¿™æ ·æ˜¯ä¸èƒ½å¾—åˆ°æ­£ç¡®ç»“æœçš„ã€‚æ­£ç¡®çš„æ ¼å¼å¦‚ä¸‹ï¼š[å…ƒç´ ï¼Œå…ƒç´ ç´¢å¼•ï¼Œæ•´ä¸ªæ•°ç»„]123[\"a\",\"b\",\"c\"].forEach(function()&#123; console.log(arguments);&#125;) é€šè¿‡JSONæ·±æ‹·è´åˆ›å»ºä¸€ä¸ªæ·±æ‹·è´çš„æœ€ç®€å•æ–¹å¼ï¼Œæ˜¯ä½¿ç”¨JSONç¼–ç åå†è§£ç è¯¥å¯¹è±¡ï¼Œè¿™å¯èƒ½ä¸æ˜¯æœ€é«˜æ•ˆçš„æ–¹å¼ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸èƒ½ä½¿ç”¨JSONçš„æµè§ˆå™¨ä¸­ã€‚1234567var stuff = &#123; a:&#123; b:[1,2] &#125;&#125;;console.log(JSON.stringify(stuff));console.log(JSON.parse(JSON.stringify(stuff))); æ„é€ å™¨å’Œç±»ä¸‹é¢çš„ç¯‡å¹…æœ‰ç‚¹é•¿ï¼Œæ¶‰åŠåˆ°æ„é€ å™¨ï¼Œç±»ï¼Œè¿”å›å¯¹è±¡å’ŒthisæŒ‡é’ˆã€‚123456789function Dog()&#123; this.name = \"littleDog\"; this.sayName = function()&#123; return this.name; &#125;&#125;var myDog = new Dog();console.log(myDog.sayName()); ä¸Šé¢æ˜¯ä¸€ä¸ªå†ç®€å•ä¸è¿‡çš„æˆ‘ä»¬åˆ›å»ºçš„æ„é€ å™¨å‡½æ•°äº†ã€‚æˆ‘ä»¬å›é¡¾ä¸‹ï¼Œåœ¨æˆ‘ä»¬ä½¿ç”¨newè°ƒç”¨ä»»ä½•ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä¼šå‘ç”Ÿä¸‹é¢çš„äº‹æƒ…ï¼š 1. åœ¨åå°è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç©ºçš„å¯¹è±¡ï¼Œé€šè¿‡thiså¼•ç”¨è¯¥å¯¹è±¡ã€‚var this = {};//ä¼ªä»£ç ï¼Œç›´æ¥è¿™æ ·æ˜¯ä¼šæŠ¥é”™çš„ã€‚ 2. ç¨‹åºå‘˜å¯ä»¥ç»™ä»»æ„çš„thisæ·»åŠ å±æ€§ã€‚å¦‚this.name=&quot;littleDog&quot;ã€‚ 3. åœ¨å‡½æ•°çš„æœ«å°¾ï¼Œæˆ‘ä»¬éšå¼çš„è¿”å›äº†thisã€‚return this,è¿™ä¸æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨å®ƒã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œæ”¹å˜æ­¥éª¤3ï¼Œä½†æ˜¯è¿™ä¸ªä¼šå‘ç”Ÿä¸‹é¢çš„é—®é¢˜ã€‚12345678910function Dog()&#123; this.name = \"littleDog\"; var notthis = &#123;noname:\"noname\"&#125;; return notthis;&#125;var myDog = new Dog();console.log(myDog.noname);console.log(myDog.name); nonameï¼Œ undefinedè¿™æ˜¯æˆ‘ä»¬ä¼šå¾—åˆ°çš„ç»“æœç»“æœï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªæ„é€ å™¨ä¸­è¿”å›äº†ä¸€ä¸ªè‡ªå®šä¹‰å¯¹è±¡ï¼Œä½†ä¹Ÿä½¿ç”¨äº†this,å½“æˆ‘ä»¬ç”¨è¿”å›çš„å¯¹è±¡ï¼Œè®¿é—®å¯¹è±¡çš„å±æ€§æ˜¯è‚¯å®šæ²¡æœ‰é—®é¢˜ï¼Œä½†æˆ‘ä»¬è®¿é—®thiså®šä¹‰çš„å´æ˜¯undefinedã€‚åŸå› æ˜¯ï¼š åœ¨è¿™ä¸ªå®ä¾‹ä¸­ï¼Œæˆ‘ä»¬ç»™thisæ·»åŠ çš„ä»»ä½•å†…å®¹ï¼Œåœ¨å‡½æ•°è¿”å›çš„æ—¶å€™éƒ½ç›´æ¥é”€æ¯äº†ï¼Œä½ å¯ä»¥åˆ é™¤å®ƒï¼Œå¹¶ä¸”åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦å€ŸåŠ©newçš„é­”åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥å°±æŠŠå®ƒå½“ä½œä¸€èˆ¬çš„å‡½æ•°è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥å®ç°ç›¸åŒçš„æ•ˆæœã€‚å¦‚ä¸‹ï¼š 12345678910function Dog()&#123; this.name = \"littleDog\"; var notthis = &#123;noname:\"noname\"&#125;; return notthis;&#125;var myDog = Dog();console.log(myDog.noname);console.log(myDog.name); è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬åˆè¦æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬è¿”å›çš„ä»»ä½•thisä»¥å¤–çš„å†…å®¹ï¼Œéƒ½ä¼šå¯¼è‡´instanceofè¿ç®—ç¬¦å’Œconstructorå±æ€§æ— æ³•æ­£å¸¸å·¥ä½œã€‚123var myDog = new Dog();console.log(myDog instanceof Dog);console.log(myDog.constructor === Object); ç»“æœæ˜¯ï¼Œfalse,trueã€‚ å½“æˆ‘ä»¬ä½¿ç”¨newçš„æ—¶å€™ï¼Œå¯ä»¥è¿”å›ä¸€ä¸ªå®šåˆ¶çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯this,ä½†æ˜¯å®ƒå¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœä½ å°è¯•è¿”å›ä¸€ä¸ªéå¯¹è±¡ï¼Œå°†å¯¼è‡´è¿”å›å€¼è¢«å¿½ç•¥ï¼Œæœ€åè¿˜æ˜¯ä¼šå¾—åˆ°this 12345678910function Dog()&#123; this.name = \"littleDog\"; this.sayName = function()&#123; return \"hello, \"+this.name; &#125; return 1;&#125;var myDog = new Dog();console.log(myDog.sayName()); è¿™ä¸ªä¾‹å­é‡Œ1å°†ä¼šè¢«å¿½ç•¥ã€‚åŒæ ·æ˜¯è¿”å›thisã€‚ä½†å¦‚æœæˆ‘ä»¬var myDog = Dog();è‚¯å®šç»“æœå°±æ˜¯1äº†ï¼Œå¯¹å§ã€‚ å¢å¼ºæ„é€ å™¨æˆ‘ä»¬æ˜¯å¯ä»¥é€šè¿‡å˜æˆæ¥ç¡®ä¿å³ä¾¿è°ƒç”¨è€…å¿˜è®°äº†new,å‡½æ•°ä¹Ÿä¼šåƒæ˜¯æ„é€ å™¨å‡½æ•°ä¸€æ ·å·¥ä½œã€‚å¯ä»¥ä½¿ç”¨instanceofï¼Œå®ƒæ¥å—ä¸€ä¸ªå¯¹è±¡å’Œä¸€ä¸ªæ„é€ å™¨å‡½æ•°çš„å¼•ç”¨ï¼Œè¿”å›trueæˆ–è€…falseã€‚1234567891011121314function Dog()&#123; if(!(this instanceof Dog))&#123; return new Dog(); &#125; this.name = \"littleDog\"; this.sayName = function()&#123; return \"hello, \"+this.name; &#125; return 1;&#125;var myDog = Dog();console.log(myDog.sayName()); æ€»ç»“ä¸»è¦å°±æ˜¯ä¸€ä¸ªè®°å½•ï¼Œæ–¹ä¾¿ä»¥åæŸ¥é˜…ï¼Œä¹Ÿæ˜¯ç»™èŠ±çš„æ—¶é—´çš„ä¸€ä¸ªäº¤ä»£ï¼Œæ¯æ¬¡çœ‹å®Œä¸€ä¸ªä¹¦ï¼Œå¦‚æœä¸æŠŠé‡ç‚¹è®°ä¸‹æ¥ï¼Œä¼°è®¡è¿‡äº†ä¸ä¹…å°±åˆå¿˜äº†ï¼Œå¿ƒç—›ã€‚æ˜¯æˆ‘è®°å¿†å¤ªå·®äº†å—ï¼Ÿæ˜å¤©å°±å¯ä»¥æŠŠä¹¦è¿˜å›å»å•¦ï¼Œå®Œç¾ã€‚æ„Ÿè°¢è¿™æœ¬ä¹¦çš„ä½œè€…ï¼ŒStoyan Stefanovã€‚å­¦ä¹ äº†ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"è®°æˆ‘æœ€è¿‘çŠ¯è¿‡çš„é”™å’ŒçŸ¥è¯†ä¸ç†Ÿæ‚‰çš„åœ°æ–¹","slug":"è®°æˆ‘æœ€è¿‘çŠ¯è¿‡çš„é”™å’ŒçŸ¥è¯†ä¸ç†Ÿæ‚‰çš„åœ°æ–¹","date":"2016-04-20T15:33:01.000Z","updated":"2016-12-12T03:02:28.000Z","comments":true,"path":"2016/04/20/è®°æˆ‘æœ€è¿‘çŠ¯è¿‡çš„é”™å’ŒçŸ¥è¯†ä¸ç†Ÿæ‚‰çš„åœ°æ–¹/","link":"","permalink":"http://sevencai.github.io/2016/04/20/è®°æˆ‘æœ€è¿‘çŠ¯è¿‡çš„é”™å’ŒçŸ¥è¯†ä¸ç†Ÿæ‚‰çš„åœ°æ–¹/","excerpt":"","text":"å‰äº›æ—¶å€™ï¼Œå‘ç°äº†è‡ªå·±çš„å¾ˆå¤šé—®é¢˜ï¼Œå› ä¸ºæ‰‹å¤´å½“æ—¶æœ‰é¡¹ç›®è¦åšï¼Œæ‰€ä»¥æ‰¾åˆ°é—®é¢˜çš„åŸå› ,å†™äº†demoåï¼Œå°±æ”¾åœ¨äº†ä¸€è¾¹ï¼Œå¹¶æ²¡æœ‰æ•´ç†å¿ƒå¾—ï¼Œä»Šå¤©æŠŠå…ˆå‰çš„ç¨å¾®æ•´ç†ä¸‹ã€‚å¯¹å¤§å®¶æ¥è¯´å¯èƒ½å¹¶æ²¡æœ‰å®é™…æ„ä¹‰ã€‚å¯ä»¥å¿½ç•¥ã€‚ jsè·å¾—æ—¶é—´æˆ³çš„ä¸œè¥¿ä¸‹é¢æ˜¯æ€»ç»“çš„äº”ç§è·å¾—æ—¶é—´æˆ³çš„æ–¹æ³•ã€‚12345console.log(new Date().getTime());console.log(+new Date());console.log(Date.parse(new Date()));console.log(new Date().valueOf());console.log(Date.now()); chromeé‡Œé¢æµ‹è¯•ä»£ç ç”¨æ—¶çš„å°tipåœ¨ä»£ç å‰é¢ä½¿ç”¨console.timeã€‚åœ¨ä»£ç ä¹‹åä½¿ç”¨console.timeEnd();å³å¯ childrenå’ŒchildNodesçš„åŒºåˆ«ç›´æ¥æ‰“å°ä¸‹ï¼Œç›´è§‚çš„æ„Ÿå—ä¸‹ï¼š12345678&lt;div id=\"test\"&gt; hello start; &lt;p class=\"a\"&gt;this is p1&lt;/p&gt; &lt;p&gt;this is p2&lt;/p&gt; &lt;p id=\"test\"&gt;this is p3&lt;/p&gt; hello end; &lt;p&gt;this is p4&lt;/p&gt;&lt;/div&gt; 1234var o = document.getElementById(\"test\");console.log(o.hasChildNodes());console.log(o.children);console.log(o.childNodes); ä¸çœ‹ç­”æ¡ˆï¼Œçœ‹éƒ½èƒ½ä¸èƒ½è¯´å¯¹ã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°childNodesè¿”å›htmlèŠ‚ç‚¹å’Œæ–‡æœ¬ç­‰èŠ‚ç‚¹ã€‚childrenåªè¿”å›htmlèŠ‚ç‚¹ï¼Œä¸è¿”å›æ–‡æœ¬èŠ‚ç‚¹ã€‚ childNodesï¼Œæ˜¯ä¸€ä¸ªæ ‡å‡†å±æ€§ï¼Œå®ƒè¿”å›æŒ‡å®šå…ƒç´ çš„å­å…ƒç´ é›†åˆï¼ŒåŒ…æ‹¬HTMLèŠ‚ç‚¹ï¼Œæ‰€æœ‰å±æ€§ï¼Œæ–‡æœ¬ã€‚å¯ä»¥é€šè¿‡nodeTypeæ¥åˆ¤æ–­æ˜¯å“ªç§ç±»å‹çš„èŠ‚ç‚¹ï¼Œåªæœ‰å½“nodeType==1æ—¶æ‰æ˜¯å…ƒç´ èŠ‚ç‚¹ï¼Œ2æ˜¯å±æ€§èŠ‚ç‚¹ï¼Œ3æ˜¯æ–‡æœ¬èŠ‚ç‚¹ã€‚ childrenï¼Œéæ ‡å‡†çš„å±æ€§ï¼Œå®ƒè¿”å›æŒ‡å®šå…ƒç´ çš„å­å…ƒç´ é›†åˆã€‚å®ƒåªè¿”å›HTMLèŠ‚ç‚¹ï¼Œç”šè‡³ä¸è¿”å›æ–‡æœ¬èŠ‚ç‚¹ã€‚ æ‰€ä»¥å½“æˆ‘ä»¬å¦‚æœè¦ç”¨childNodesè·å–htmlèŠ‚ç‚¹çš„æ—¶å€™ï¼Œå°±è¦è¿›è¡Œè¿‡æ»¤ï¼Œå¦‚ä¸‹ï¼š 12345for(var i=0,len=o.childNodes.length;i&lt;len;i++)&#123; if(o.childNodes[i].nodeType == 1)&#123; console.log(o.childNodes[i]); &#125;&#125; ä¸­é—´è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦è·å¾—å…ƒç´ çš„ç¬¬ä¸€ä¸ªhtmlèŠ‚ç‚¹æˆ–è€…æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬è‚¯å®šå…ˆæƒ³åˆ°çš„æ˜¯firstChildå’ŒlastChild,å¦‚ä¸‹ï¼Œæˆ‘ä»¬æ˜¯è·å–ä¸åˆ°çš„ï¼Œè·å¾—åˆ°çš„æ˜¯textæ–‡æœ¬ã€‚è€Œä¸”ä»”ç»†çœ‹ä¸Šé¢ï¼Œç©ºæ ¼ä¹Ÿç®—æ˜¯æ–‡æœ¬ï¼Œæ‰€ä»¥ä¸€å®šæ˜¯è·å–ä¸åˆ°èŠ‚ç‚¹çš„ã€‚ç©ºæ ¼å’Œæ¢è¡Œæˆ‘ä»¬éƒ½å¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°ã€‚12console.log(o.firstChild);console.log(o.lastChild); ä½†æ˜¯å¦‚æœæˆ‘ä»¬ç¨å¾®æ”¹ä¸€ä¸‹ï¼ŒæŠŠ&lt;p&gt;å’Œ&lt;/div&gt;ä¸­é—´çš„ç©ºæ ¼å»æ‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥è·å¾—åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹æ˜¯på•¦ã€‚ 1234567&lt;div id=\"test\"&gt; hello start; &lt;p class=\"a\"&gt;this is p1&lt;/p&gt; &lt;p&gt;this is p2&lt;/p&gt; &lt;p id=\"test\"&gt;this is p3&lt;/p&gt; hello end; &lt;p&gt;this is p4&lt;/p&gt;&lt;/div&gt; è¿™é‡Œå°±è¦æ¥ç€è®¤è¯†ä¸‹ï¼Œelementå’Œnodeçš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ å…ƒç´ (Element)å’Œç»“ç‚¹(Node)æœ‰åŒºåˆ«ï¼ŒèŠ‚ç‚¹åŒ…å«äº†å…ƒç´ ï¼Œå…ƒç´ ä¸€å®šæ˜¯èŠ‚ç‚¹ï¼Œè€Œå¿…é¡»æ˜¯å«æœ‰å®Œæ•´ä¿¡æ¯çš„ç»“ç‚¹æ‰æ˜¯ä¸€ä¸ªå…ƒç´ ã€‚DOMå°†æ–‡æ¡£ä¸­çš„æ‰€æœ‰éƒ½çœ‹ä½œèŠ‚ç‚¹ node&gt;elementï¼Œä¸¤ä¸ªæ ‡ç­¾ä¹‹é—´çš„ç©ºç™½ä¹Ÿæ˜¯è¿™æ£µæ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆTextèŠ‚ç‚¹ï¼‰ æƒ³ä¸€æƒ³ä¸‹é¢ä¼šè¾“å‡ºä»€ä¹ˆå‘¢ï¼Ÿ 1234567console.log(o);console.log(o.firstChild);console.log(o instanceof Node);console.log(o instanceof Element);console.log(o.firstChild instanceof Node);console.log(o.firstChild instanceof Element); æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç”¨document.getElementById(â€œxxxâ€)å–åˆ°çš„æ—¢æ˜¯Elementä¹Ÿæ˜¯Nodeã€‚childrenæ˜¯Elementçš„å±æ€§ï¼ŒchildNodesæ˜¯Nodeçš„å±æ€§ã€‚ domé€‰å–é¡µé¢å…ƒç´ å¯¹è±¡çš„å­å¯¹è±¡æ—¶ï¼Œchildren é€‰å–ä¸åŒ…æ‹¬ç©ºç™½èŠ‚ç‚¹ï¼Œ è€ŒchildNodesåœ¨firefoxä¼šé€‰å–ç©ºç™½èŠ‚ç‚¹ã€‚ è®°å½•ä¸€ä¸ªå¯ä»¥å¼‚æ­¥åŠ è½½jsæ–‡ä»¶å¹¶å¯ä»¥è°ƒç”¨å›è°ƒå‡½æ•°çš„è„šæœ¬ä¸»è¦æƒ³æ³•æ˜¯åˆ›å»ºscriptæ ‡ç­¾ï¼Œç„¶åç»™scriptè®¾ç½®å¼‚æ­¥æ‰§è¡Œï¼Œç„¶åæ¯æ¬¡åŠ è½½å®Œä¸€ä¸ªjsæ–‡ä»¶ï¼Œå°±æŠŠcount+1ï¼Œå¹¶ä¸”æ£€æŸ¥å½“å‰çš„å·²ç»åŠ è½½äº†çš„æ–‡ä»¶æ˜¯å¦ç­‰äºä¼ å…¥çš„æ–‡ä»¶çš„æ•°é‡ï¼Œå¦‚æœå·²ç»ç›¸ç­‰äº†ï¼Œè¡¨ç¤ºæ‰€æœ‰çš„æ–‡ä»¶å·²ç»åŠ è½½å®Œæ¯•ï¼Œè¿™æ—¶å€™ï¼Œè°ƒç”¨å›è°ƒå‡½æ•°ã€‚è¿™é‡Œæˆ‘åˆ©ç”¨çš„æ˜¯ä»¥æ„é€ å‡½æ•°çš„å½¢å¼åˆ›å»ºå¯¹è±¡ã€‚123456789101112131415161718192021222324252627282930313233343536373839function Loader()&#123; var head = document.getElementsByTagName(\"head\")[0]; var loadCount = 0; this.require = function (scripts,callback)&#123; this.totalScripts = scripts.length; this.callback = callback; for(var i=0;i&lt;this.totalScripts;i++)&#123; this.createScript(scripts[i]); &#125; &#125;; this.createScript = function(url)&#123; var script = document.createElement(\"script\"); var self = this; script.src = url; script.defer = true; script.type = \"text/javascript\"; script.addEventListener(\"load\",function(e)&#123; loadCount++; self.check(); &#125;,false); head.appendChild(script); &#125;; this.check = function()&#123; if(this.totalScripts == loadCount &amp;&amp; typeof this.callback == 'function')&#123; this.callback(); &#125; &#125;&#125;var load = new Loader();load.require(['33.js','44.js'],function()&#123; console.log(\"all scripts have been loaded\");&#125;); å¼•ç”¨èµ‹å€¼æ—¶çš„å‘123456789var a = &#123;\"x\": 1&#125;;var b = a;a.x = 2;console.log(b.x);a = &#123;\"x\":3&#125;;console.log(b.x);a.x = 4;console.log(b.x); è¿™ä¸ªä¾‹å­æˆ‘è§‰å¾—å¾ˆç»å…¸ã€‚ç­”æ¡ˆæ˜¯b.xçš„å€¼ä¸€ç›´æ˜¯2ã€‚æˆ‘ä»¬è¦ç†è§£è¿™ä¸ªè¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆäº‹ã€‚é¦–å…ˆå£°æ˜äº†ä¸€ä¸ªaå¯¹è±¡ï¼Œb=aï¼Œå› ä¸ºæ˜¯å¼•ç”¨èµ‹å€¼ï¼Œæ‰€ä»¥bå’ŒaæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚æ‰€ä»¥è¿™ä¸ªæ—¶å€™ï¼Œaæ”¹å˜æˆ–è€…bæ”¹å˜éƒ½æ˜¯ä¼šå½±å“å¯¹æ–¹çš„ã€‚åæ¥ï¼Œæˆ‘ä»¬ç»™aé‡æ–°èµ‹å€¼ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæ˜¯é‡æ–°å¼€è¾Ÿäº†ä¸€ä¸ªç©ºé—´ï¼ŒaæŒ‡å‘æ–°çš„å¯¹è±¡ï¼Œbè¿˜æ˜¯æŒ‡å‘åŸæ¥çš„å¯¹è±¡ï¼Œè¿™ä¸ªæ—¶å€™aå’Œbå·²ç»æ²¡æœ‰å…³ç³»äº†ã€‚ ç”¨JSç”»ä¸€ä¸ªåœ†è¿™ä¸ªä¸»è¦å°±æ˜¯åˆ©ç”¨æ•°å­¦çš„åŸç†ï¼Œç„¶åæŠŠç‚¹ç”»å‡ºæ¥å®šä½å°±å¯ä»¥äº†ã€‚å°±æ˜¯è®°å½•ä¸€ä¸‹ã€‚1234567891011121314151617181920212223var Circle = function()&#123; var PI = Math.PI; return &#123; draw:function(r,_x,_y)&#123; var x,y; for(var i=0;i&lt;360;i++)&#123; x = Math.cos(PI/180 * i)*r+_x; y = Math.sin(PI/180 * i)*r+_y; var point = document.createElement(\"span\"); point.appendChild(document.createTextNode(\".\")); document.body.appendChild(point); point.style.position = \"absolute\"; point.style.top = y+\"px\"; point.style.left = x+\"px\"; &#125; &#125; &#125;&#125;();Circle.draw(100, 500, 600); jqueryä¸­.closetå’Œ.parentsçš„åŒºåˆ« æœ‰æ—¶å€™çœ‹ä»£ç å¯èƒ½ä¼šæ›´å®¹æ˜“ç†è§£ï¼Œæˆ‘ä»¬çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ã€‚å…·ä½“çš„æ¥çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š1234567891011121314151617&lt;ul&gt; &lt;li&gt;I&lt;/li&gt; &lt;li&gt;II &lt;ul&gt; &lt;li class=\"item-a\"&gt;A&lt;/li&gt; &lt;li&gt;B &lt;ul&gt; &lt;li&gt;1&lt;/li&gt; &lt;li&gt;2&lt;/li&gt; &lt;li&gt;3&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;C&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;III&lt;/li&gt;&lt;/ul&gt; å¦‚æœæˆ‘ä»¬ç”¨parentså¾—åˆ°çš„ç»“æœæ˜¯è¿™æ ·çš„ï¼š1$('li.item-a').parents('ul').css('background-color', 'red'); å¦‚æœæˆ‘ä»¬ç”¨parentså¾—åˆ°çš„ç»“æœæ˜¯è¿™æ ·çš„ï¼š1$('li.item-a').closest('ul').css('background-color', 'red'); fiddlerçš„å·¥ä½œåŸç†ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œfiddlerå……å½“çš„å°±æ˜¯ä¸€ä¸ªä»£ç†çš„ä½œç”¨ï¼Œå½“æˆ‘ä»¬çš„ä»å®¢æˆ·ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œå°±æ˜¯å…ˆé€šè¿‡ä»£ç†æœåŠ¡å™¨ï¼Œè®©åç”±ä»£ç†æœåŠ¡å™¨å‘é€ç»™æœåŠ¡å™¨ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡fiddlerä¸­é—´åšå¾ˆå¤šäº‹æƒ…ã€‚å›å¤´æˆ‘ä»”ç»†ä¼šç”¨fiddleräº†ï¼Œå†æ¥ä¸“é—¨å†™ä¸€ç¯‡ã€‚ç°åœ¨ä¸æ˜¯å¾ˆä¼šç”¨ã€‚ é—­åŒ…çš„å‘çœ‹çœ‹ä¸‹é¢æ˜¯è¾“å‡ºä»€ä¹ˆï¼Œå¦‚æœä¸€çœ¼çœ‹ä¸å‡ºæ¥ï¼Œå°±æ˜¯é—­åŒ…æŒæ¡çš„è¿˜ä¸å¥½ï¼Œæœ€åè¾“å‡ºçš„éƒ½æ˜¯Zã€‚1234567891011121314151617function A(params) &#123; params = params || &#123;&#125;; for (var key in params) &#123; this[key] = function() &#123; return params[key];&#125;; &#125;&#125;var a = new A(&#123; 'x': 'X', 'y': 'Y', 'z': 'Z'&#125;);console.log(a.x());console.log(a.y());console.log(a.z()); è®°å½•å’Œæ•´ç†äºŒï¼Œæ¥ç€ä¸Šæ¬¡çš„æ•´ç†ã€‚ä¸»è¦è®°å½•çš„æ˜¯å®¹æ˜“çŠ¯çš„é”™å’Œä¸€äº›çŸ¥è¯†ç‚¹çš„å½’çº³æ€»ç»“ã€‚ å…³äºtypeofå’Œinstanceofçš„å‘typeof 123 typeof new Number(123) typeof null typeof NaN 123 instanceof Number new Number(123) instanceof Number Number(123) instanceof Number ä¸Šé¢çš„ç­”æ¡ˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ typeofçš„è¿”å›å€¼æœ‰number,boolean,string,function,object,undefinedè¿™6ä¸ªã€‚è®°ä½åªæœ‰è¿™6ä¸ªï¼Œè€Œä¸”é‡Œé¢æ²¡æœ‰arrayã€‚typeof æ˜¯ä¸€ä¸ªä¸€å…ƒè¿ç®—ï¼Œæ”¾åœ¨ä¸€ä¸ªè¿ç®—æ•°ä¹‹å‰ï¼Œè¿ç®—æ•°å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚ è¿™é‡Œé¢è¦æ³¨æ„çš„å°±æ˜¯ç¬¬4ä¸ªï¼ŒNaNæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ä¸œè¥¿ï¼Œå®ƒå’Œä»»ä½•ä¸œè¥¿éƒ½ä¸ç›¸ç­‰ï¼Œç”¨typeofè¿”å›çš„æ˜¯Numberã€‚æ³¨æ„åªæœ‰newçš„ç»“æœè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒNumberå’Œç›´æ¥å®šä¹‰æ•°å­—ç›´æ¥é‡éƒ½æ˜¯è¿”å›çš„æ•°å­—å€¼ã€‚ 123console.log(Number(123));console.log(new Number(123));console.log(123); å†æ¥ä¸€æ³¢æµ‹æµ‹æ˜¯å¦ç†è§£ï¼š12345678910111213console.log(typeof(1));console.log(typeof(NaN));console.log(typeof(Number.MIN_VALUE));console.log(typeof(Infinity));console.log(typeof(\"123\"));console.log(typeof(true));console.log(typeof(window));console.log(typeof(document));console.log(typeof(null));console.log(typeof(eval));console.log(typeof(Date));console.log(typeof(sss));console.log(typeof(undefined)); çœ‹çœ‹fragmentçš„ç”¨æ³•12345678var frament = document.createDocumentFragment();for(var i = 0;i&lt;10;i++)&#123; var ele = document.createElement(\"p\"); var node = document.createTextNode(\"hello\"); ele.appendChild(node); frament.appendChild(ele);&#125;document.body.appendChild(frament); createdocumentfragment()æ–¹æ³•åˆ›å»ºäº†ä¸€è™šæ‹Ÿçš„èŠ‚ç‚¹å¯¹è±¡ï¼ŒèŠ‚ç‚¹å¯¹è±¡åŒ…å«æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚å½“ä½ æƒ³æå–æ–‡æ¡£çš„ä¸€éƒ¨åˆ†ï¼Œæ”¹å˜ï¼Œå¢åŠ ï¼Œæˆ–åˆ é™¤æŸäº›å†…å®¹åŠæ’å…¥åˆ°æ–‡æ¡£æœ«å°¾å¯ä»¥ä½¿ç”¨createDocumentFragment() æ–¹æ³•ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨æ–‡æ¡£çš„æ–‡æ¡£å¯¹è±¡æ¥æ‰§è¡Œè¿™äº›å˜åŒ–ï¼Œä½†è¦é˜²æ­¢æ–‡ä»¶ç»“æ„è¢«ç ´åï¼ŒcreateDocumentFragment() æ–¹æ³•å¯ä»¥æ›´å®‰å…¨æ”¹å˜æ–‡æ¡£çš„ç»“æ„åŠèŠ‚ç‚¹ã€‚ è¯´æ˜ï¼šæ·»åŠ å¤šä¸ªdomå…ƒç´ æ—¶ï¼Œå…ˆå°†å…ƒç´ appendåˆ°DocumentFragmentä¸­ï¼Œæœ€åç»Ÿä¸€å°†DocumentFragmentæ·»åŠ åˆ°é¡µé¢ã€‚ è¯¥åšæ³•å¯ä»¥å‡å°‘é¡µé¢æ¸²æŸ“domå…ƒç´ çš„æ¬¡æ•°ã€‚ç»IEå’ŒFireFoxä¸‹æµ‹è¯•ï¼Œåœ¨append1000ä¸ªå…ƒç´ æ—¶ï¼Œæ•ˆç‡èƒ½æé«˜10%-30%ï¼ŒFireFoxä¸‹æå‡è¾ƒä¸ºæ˜æ˜¾ã€‚ çœ‹ä¸‹ä¸‹é¢è¿™å‡ ä¸ªè¾“å‡º123console.log(Number.MAX_VALUE);console.log(Number.MIN_VALUE);console.log(Math.pow(2,53)); æ‰“ä¹±æ•°ç»„çš„ä¸€ç§æ–¹æ³•éšæœºç”Ÿæˆä¸€ä¸ªåœ¨æ•°ç»„é•¿åº¦å†…çš„æ•°ï¼Œæ¯æ¬¡æŠŠæ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ å’Œè¯¥ç”Ÿæˆæ•°å¯¹åº”çš„å€¼è°ƒæ¢å³å¯ã€‚æ®è¯´æ˜¯ç›®å‰æ‰“ä¹±æ•°ç»„çš„æœ€å¥½æ–¹æ³•ï¼ˆäº¤æ¢ï¼‰ï¼›123456789101112131415function shuffle (arr)&#123; var length = arr.length; while(length)&#123; var index = Math.floor(Math.random()*length); length--; var temp = arr[length]; arr[length] = arr[index]; arr[index] = temp; &#125; return arr;&#125;var myArray = ['1','2','3','4','5','6','7','8','9'];console.log(shuffle(myArray)); argumentså¯¹è±¡12345678(function()&#123; console.log(arguments instanceof Array); var argArr = Array.prototype.slice.call(arguments); console.log(argArr instanceof Array); console.log(Function instanceof Object); console.log(Object instanceof Function);&#125;)() è¾“å‡ºå€¼åˆ†åˆ«ä¸ºfalseå’Œtrue,true,trueã€‚è®°ä½Array.prototype.slice.call(arguments)è¿™ä¹Ÿæ˜¯ä¸€ç§æŠŠargumentsè½¬åŒ–æˆæ•°ç»„çš„æ–¹æ³•ã€‚ sortæ–¹æ³•æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­ä¿å­˜çš„éƒ½æ˜¯å°å†™è‹±æ–‡å­—ç¬¦ä¸²ï¼Œç°åœ¨è¦æŠŠå®ƒæŒ‰ç…§é™¤äº†ç¬¬ä¸€ä¸ªå­—æ¯å¤–çš„å­—ç¬¦çš„å­—å…¸é¡ºåº(å­—å…¸é¡ºåºå°±æ˜¯æŒ‰é¦–å­—æ¯ä»a-zé¡ºåºæ’åˆ—ï¼Œå¦‚æœé¦–å­—æ¯ç›¸åŒåˆ™æŒ‰ç¬¬äºŒä¸ªå­—æ¯â€¦â€¦)æ’åºã€‚1234567891011121314var compare = function (a,b)&#123; if(typeof(a) === \"string\" &amp;&amp; typeof(b) === \"string\")&#123; var new_a = a.slice(1); var new_b = b.slice(1); if(new_a&gt;new_b)&#123; return 1; &#125;else if(new_a&lt;new_b)&#123; return -1; &#125; &#125; return 0;&#125;var arr = [\"abd\",\"cba\",\"ba\"]; å…³äºdocument.linksè·å–æ–‡æ¡£ä¸­çš„æ‰€æœ‰linksæ ‡ç­¾ï¼Œç„¶åè·å–é‡Œé¢çš„å†…å®¹ã€‚1234567891011var links = document.links;var length = links.length;for(var i = 0;i&lt;length;i++)&#123; (function(i)&#123; links[i].onclick = function(e)&#123; alert(e.target.innerHTML); e.preventDefault(); &#125; &#125;)(i)&#125; å†™ä¸€ä¸ªuaå‡½æ•°ï¼Œåˆ¤æ–­å½“å‰æµè§ˆå™¨æ˜¯ä»€ä¹ˆæµè§ˆå™¨12345678910111213141516var Sys = &#123;&#125;;var ua = navigator.userAgent.toLowerCase();console.log(ua);var s;(s = ua.match(/msie ([\\d.]+)/)) ? Sys.ie = s[1] :(s = ua.match(/firefox\\/([\\d.]+)/)) ? Sys.firefox = s[1] :(s = ua.match(/chrome\\/([\\d.]+)/)) ? Sys.chrome = s[1] :(s = ua.match(/opera.([\\d.]+)/)) ? Sys.opera = s[1] :(s = ua.match(/version\\/([\\d.]+).*safari/)) ? Sys.safari = s[1] : 0;//ä»¥ä¸‹è¿›è¡Œæµ‹è¯•if (Sys.ie) console.log('IE: ' + Sys.ie);if (Sys.firefox) console.log('Firefox: ' + Sys.firefox);if (Sys.chrome) console.log('Chrome: ' + Sys.chrome);if (Sys.opera) console.log('Opera: ' + Sys.opera);if (Sys.safari) console.log('Safari: ' + Sys.safari); å°½é‡ç”¨æœ€ç®€å•çš„è¾¾åˆ°æƒ³è¦çš„è¦æ±‚123456789101112131415function spacify(str)&#123; return str.split('').join(' ');&#125;console.log(spacify('hello world'));String.prototype.spacify = function()&#123; return this.split('').join(' ');&#125;console.log(\"hello world\".spacify());function log()&#123; var args = Array.prototype.slice.call(arguments); args.unshift(\"(app)\"); console.log.apply(console,args);&#125;log(\"hello\",\"world\"); ç¼–å†™ä¸€ä¸ªæ–¹æ³• æ±‚ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦123456789101112function getLength(str)&#123; var length = str.length; var init = length; for(var i = 0;i&lt;init;i++)&#123; if(str.charCodeAt(i) &gt;255)&#123; length++; &#125; &#125; return length;&#125;console.log(getLength(\"woshiå¥½äºº\"));","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"ç›‘æ§è„šæœ¬ä»£ç å¼‚å¸¸å¹¶ä¸ŠæŠ¥çš„æ–¹æ³•","slug":"ç›‘æ§è„šæœ¬ä»£ç å¼‚å¸¸å¹¶ä¸ŠæŠ¥çš„æ–¹æ³•","date":"2016-04-19T12:42:51.000Z","updated":"2016-12-12T03:02:16.000Z","comments":true,"path":"2016/04/19/ç›‘æ§è„šæœ¬ä»£ç å¼‚å¸¸å¹¶ä¸ŠæŠ¥çš„æ–¹æ³•/","link":"","permalink":"http://sevencai.github.io/2016/04/19/ç›‘æ§è„šæœ¬ä»£ç å¼‚å¸¸å¹¶ä¸ŠæŠ¥çš„æ–¹æ³•/","excerpt":"","text":"å¦‚ä½•å®Œæˆä¸€ä¸ªè®°å½•ç½‘ç«™åŠ è½½è„šæœ¬æ—¶å‘ç”Ÿçš„é”™è¯¯ï¼Œå¹¶æŠŠé”™è¯¯ä¸ŠæŠ¥å‘¢ï¼Ÿè¿™æ˜¯ç½‘ç«™ä¸Šçº¿æ—¶æœ€ç»å¸¸çš„éœ€æ±‚ã€‚ ä¸€èˆ¬å½“æˆ‘ä»¬çš„è„šæœ¬å‘ç”Ÿé”™è¯¯æ—¶ï¼Œæµè§ˆå™¨éƒ½ä¼šåœ¨consoleé‡Œä½“ç°å‡ºé”™è¯¯ä¿¡æ¯ï¼Œå¹¶ä¸”ä¼šæç¤ºæˆ‘ä»¬å‡ºé”™çš„æ–‡ä»¶ï¼Œè¡Œå·ï¼Œå †æ ˆä¿¡æ¯ï¼Œæ­¤æ—¶jsåœæ­¢å¾€ä¸‹æ‰§è¡Œï¼šæ¯”å¦‚è¿™æ ·ï¼š åˆ°è¿™é‡Œå…ˆé—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼Œå‰ç«¯å¼‚å¸¸å…·ä½“æ˜¯æŒ‡ä»€ä¹ˆå‘¢ï¼Ÿ ç¬¬ä¸€ç§æƒ…å†µï¼šJSè„šæœ¬é‡Œè¾¹å­˜ç€è¯­æ³•é”™è¯¯ï¼Œç¬¬äºŒç§æƒ…å†µï¼šJSè„šæœ¬åœ¨è¿è¡Œæ—¶å‘ç”Ÿé”™è¯¯ ä¸€èˆ¬æœ‰ä¸¤ç§æƒ…å†µå¯ä»¥å¤„ç†è¿™ä¸¤ç§é”™è¯¯ï¼š ä¸€ç§æ˜¯try,catchæ–¹æ¡ˆï¼Œæˆ‘ä»¬é’ˆå¯¹æ€§çš„åœ¨å¯èƒ½å‡ºé”™çš„åœ°æ–¹ä½¿ç”¨try,catchå—ã€‚è¿™ä¸ªä»£ç å—å¦‚æœå‡ºé”™äº†æˆ‘ä»¬å¯ä»¥åœ¨catchå—ä¸­æ”¶é›†å¹¶å¤„ç†ã€‚ ä¸€ç§æ˜¯ç›‘å¬windowçš„onerroräº‹ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨window.onerror=function(){}æˆ–è€…æ˜¯window.addEventListener(&quot;error&quot;,function(event){}),è¿™ä¸ªonerrorå¯ä»¥æ”¶é›†è¯­æ³•é”™è¯¯å’Œè¿è¡Œæ—¶çš„é”™è¯¯ï¼Œè¿˜å¯ä»¥çŸ¥é“å‡ºé”™çš„ä¿¡æ¯ï¼Œæ–‡ä»¶ï¼Œè¡Œå·ï¼Œåˆ—å·ç­‰ã€‚ åˆ©ç”¨try,catchçš„æ–¹æ³•å…ˆæ¥å›å¿†å¤ä¹ ä¸‹try,catchçš„åŸºæœ¬ç”¨æ³•ã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬æœ€åˆå­¦try,catchæ—¶ä¼šå†™çš„ä¸€ä¸ªå°demoã€‚ä¸»è¦æ˜¯throwçš„ç”¨æ³•ã€‚throw è¯­å¥å…è®¸æˆ‘ä»¬åˆ›å»ºè‡ªå®šä¹‰é”™è¯¯ã€‚æ­£ç¡®çš„æŠ€æœ¯æœ¯è¯­æ˜¯ï¼šåˆ›å»ºæˆ–æŠ›å‡ºå¼‚å¸¸ï¼ˆexceptionï¼‰ã€‚å¦‚æœæŠŠ throw ä¸ try å’Œ catch ä¸€èµ·ä½¿ç”¨ï¼Œå°±èƒ½å¤Ÿæ›´åŠ ç²¾å‡†æ§åˆ¶ç¨‹åºæµï¼Œå¹¶ç”Ÿæˆè‡ªå®šä¹‰çš„é”™è¯¯æ¶ˆæ¯ã€‚throw exception,è¿™ä¸ªå¼‚å¸¸å¯ä»¥æ˜¯æˆ‘ä»¬åˆ›å»ºçš„å­—ç¬¦ä¸²ï¼Œæ•°å­—ï¼Œé€»è¾‘å€¼ï¼Œå¯¹è±¡ç­‰ã€‚æ³¨æ„è¦å°å†™ã€‚ 123&lt;input type=\"text\" placeholder=\"è¯·å¡«å…¥ä¸€ä¸ª5åˆ°10ä¹‹é—´çš„æ•°å­—\" id=\"inputValue\"&gt;&lt;button onclick=\"test()\"&gt;æµ‹è¯•è¾“å…¥å€¼æ˜¯å¦åˆæ³•&lt;/button&gt;&lt;p id=\"tip\"&gt;&lt;/p&gt; 12345678910111213141516171819202122function test()&#123; try&#123; var value = document.getElementById(\"inputValue\").value; if(value == \"\")&#123; throw \"æ•°å­—ä¸èƒ½ä¸ºç©º\"; &#125; if(value&gt;10)&#123; throw \"æ•°å­—ä¸èƒ½å¤§äº10\"; &#125; if(value&lt;5)&#123; throw \"æ•°å­—ä¸èƒ½å°äº5\"; &#125; if(isNaN(value))&#123; throw \"å¿…é¡»ä¸ºæ•°å­—\"; &#125; &#125;catch(e)&#123; var tip = document.getElementById(\"tip\"); tip.innerHTML = e; //console.log(e); &#125; &#125; ä½†æ˜¯ï¼Œtry,catchæœ‰ä¸¤ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯å¦‚æœä»£ç å—æœ‰è¯­æ³•é”™è¯¯ï¼Œæ­¤æ—¶JSè§£é‡Šå™¨ä¸ä¼šæ‰§è¡Œå½“å‰è¿™å—ä»£ç å—ï¼Œä¹Ÿæ›´åŠ ä¸ä¼šæ‰§è¡Œcatché‡Œé¢çš„ä¸œè¥¿äº†ã€‚ç¬¬äºŒä¸ªé—®é¢˜å°±æ˜¯try,catchå¯ä»¥ç†è§£æˆä¸€ä¸ªå‡½æ•°å—ï¼Œè¿™æœ‰è¿™ä¸ªé‡Œé¢çš„è¿è¡Œé”™è¯¯æ‰ä¼šè¢«æ•æ‰ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åŠæ³•æ•æ‰åˆ°å…¨å±€é”™è¯¯äº‹ä»¶ã€‚ ç¬¬ä¸€ä¸ªå°±æ˜¯è¯­æ³•é”™è¯¯ï¼Œä¸ä¼šæ•æ‰ï¼Œä¼šåœæ­¢è¿è¡Œï¼Œä¸Šä»£ç ï¼š 123456try&#123; if =1;&#125;catch(e)&#123; console.log(\"testerror\"); console.log(e);&#125; å¦‚å›¾æ‰€ç¤ºï¼Œå¹¶ä¸ä¼šæ‰“å°å‡ºé”™è¯¯ä¿¡æ¯ï¼Œåªæ˜¯åœ¨æ§åˆ¶å°ç›´æ¥è¾“å‡ºäº†é”™è¯¯ä¿¡æ¯ã€‚å¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸ªè¯­æ³•é”™è¯¯å˜ä¸ºæ‰§è¡Œæ—¶çš„é”™è¯¯ï¼Œå°±æ˜¯å¯ä»¥æ•æ‰åˆ°çš„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 123456try&#123; i&lt;l;&#125;catch(e)&#123; console.log(\"testerror\"); console.log(e);&#125; ç¬¬äºŒç§æƒ…å†µæ€ä¹ˆç†è§£å‘¢ï¼Ÿ try,catchåªèƒ½æ•æ‰åˆ°å½“å‰æ‰§è¡Œæµé‡Œé¢çš„è¿è¡Œé”™è¯¯ï¼Œå¯¹äºå¼‚æ­¥å›è°ƒæ¥è¯´ï¼Œæ˜¯ä¸èƒ½è¢«try,catchæ¥æ•æ‰çš„ã€‚æˆ‘ä»¬çŸ¥é“jsæ˜¯å•çº¿ç¨‹çš„ï¼Œå›è°ƒé‡Œé¢çš„éƒ½è¢«æ”¾åˆ°äº†ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢ã€‚å¦‚ä¸‹ä¾‹å­ï¼š12345678try&#123; var btn = document.getElementsByTagName(\"button\")[0]; btn.onclick = function()&#123; i&lt;l; &#125;&#125;catch(e)&#123; console.log(e);&#125; è¿™æ—¶å€™æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨æ˜¯ä¸ä¼šæœ‰ä»»ä½•ä¸œè¥¿è¾“å‡ºçš„ã€‚ åˆ©ç”¨window.onerroræ–¹æ³•å…ˆå…·ä½“çœ‹ä¸‹onerroråœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šè¢«è§¦å‘ï¼šAn event handler for the error event. Error events are fired at various targets for different kinds of errors: When a JavaScript runtime error (including syntax errors) occurs, an error event using interface ErrorEvent is fired at window and window.onerror() is invoked. When a resource (such as an &lt;img&gt; or &lt;script&gt;) fails to load, an error event using interface Event is fired at the element, that initiated the load, and the onerror() handler on the element is invoked. These error events do not bubble up to window, but (at least in Firefox) can be handled with a single capturing window.addEventListener. å…·ä½“çš„å‚æ•°å’Œè¯­æ³•å¦‚ä¸‹ï¼Œå¯ä»¥å»MDNä¸Šçœ‹. æ¯”å¦‚æˆ‘ä»¬å°±æŠŠonerrorçš„argumentså¯¹è±¡æ‰“å°å‡ºæ¥å°±å¯ä»¥å¾—åˆ°ä¸‹é¢çš„ç»“æœï¼š æˆ–è€…å¯ä»¥è·å¾—åˆ°å‡ºé”™ä¿¡æ¯çš„æ–‡ä»¶åï¼Œè¡Œå·ï¼Œåˆ—å·ï¼Œå¹¶ä¸”é€šè¿‡è®¾ç½®è¿”å›å€¼ä¸ºtrueæˆ–è€…falseæ¥ä¿è¯ä¿¡æ¯ä¸è¾“å‡ºåˆ°æ§åˆ¶å°ä¸Šã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š123456789101112window.onerror = function(message, source, lineno, colno, error) &#123; console.log(\"-----------\"); console.log(message); console.log(source); console.log(lineno); console.log(colno); console.log(error); return true;&#125;//line1if = 1; ä¼šå¾—åˆ°ä¸‹é¢çš„ç»“æœï¼š è¿™é‡Œæ³¨æ„ä¸‹ï¼Œè¯­æ³•é”™è¯¯ä¸èƒ½æ”¾åœ¨onerrorä»£ç å—å†…éƒ¨ï¼Œå¦‚æœæ”¾åœ¨é‡Œé¢ï¼Œå› ä¸ºè¯­æ³•åœ¨è¿™ä¸ªonerroré‡Œé¢éƒ½æ²¡æœ‰è¢«é€šè¿‡ï¼Œå°±æ›´ä¸å¯èƒ½ä¼šè¢«æ‰§è¡Œäº†ï¼Œå°±ä¼šè·Ÿå¹³å¸¸ä¸€æ ·ä»£ç ç›´æ¥æ‰“å°åˆ°æ§åˆ¶å°ã€‚æ‰€ä»¥æˆ‘ä»¬è¦æŠŠonerrorå•ç‹¬æå–å‡ºæ¥ï¼Œå¹¶æ”¾åœ¨å…¶ä»–è„šæœ¬å‰é¢æ‰§è¡Œã€‚ è¿™é‡Œè¿˜è¦æ³¨æ„ä¸€ç‚¹ï¼Œå°±æ˜¯å¦‚æœæˆ‘ä»¬çš„jsæ–‡ä»¶ä¸æ˜¯æœ¬åœ°æ–‡ä»¶ï¼Œæ˜¯è·¨åŸŸæ–‡ä»¶ï¼Œå½“è¿™ä¸ªæ–‡ä»¶å‡ºç°äº†é”™è¯¯æ—¶ï¼Œæˆ‘ä»¬æ˜¯ä¸èƒ½å¤Ÿè·å¾—è¯¦ç»†çš„ä¿¡æ¯çš„ã€‚åªä¼šç®€å•æŠ¥é”™ï¼š Script errorï¼Œè¿™æ ·æ˜¯ä¸ºäº†é˜²æ­¢ä¿¡æ¯æ³„éœ²ï¼Œé¿å…ä¸å®‰å…¨ã€‚é‚£å¦‚æœæˆ‘ä»¬ç¡®å®è¦è·¨åŸŸè®¿é—®ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ æˆ‘ä»¬éœ€è¦åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯åŒæ—¶è®¾ç½®å¯è·¨åŸŸè®¿é—®ã€‚å®¢æˆ·ç«¯ä¸­çš„imageå’Œscriptæ ‡ç­¾éƒ½æœ‰ crossoriginå‚æ•°ï¼Œè¿™ä¸ªå±æ€§æ˜¯å‘Šè¯‰æµè§ˆå™¨æˆ‘è¦åŠ è½½çš„è¿™ä¸ªèµ„æºæ˜¯å¯ä»¥ä¿¡ä»»çš„ã€‚å¹¶åœ¨æœåŠ¡å™¨ç«¯å†è®¾ç½®ï¼šAccess-Control-Allow-Originçš„å“åº”å¤´ã€‚æ¯”å¦‚header(&#39;Access-Control-Allow-Origin: *&#39;);ã€‚ä¸‹é¢è¿™æ®µè¯ä»”ç»†çœ‹ä¸‹å¯èƒ½æ›´åŠ å¥½ç†è§£ã€‚ When a syntax(?) error occurs in a script, loaded from a different origin, the details of the syntax error are not reported to prevent leaking information (see bug 363897). Instead the error reported is simply â€œScript error.â€ This behavior can be overriden in some browsers using the crossorigin attribute on &lt;script&gt; and having the server send the appropriate CORS HTTP response headers. è§£å†³æ–¹æ¡ˆåœ¨è§£å†³å…·ä½“é—®é¢˜å‰ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹window.onerroré‡Œé¢çš„ç¬¬äº”ä¸ªå‚æ•°ï¼Œerror,è¿™ä¸ªä¿¡æ¯ã€‚å®ƒçœ‹èµ·æ¥å¹¶ä¸æ˜¯é‚£ä¹ˆç‰¹åˆ«ã€‚å› ä¸ºå®ƒé‡Œé¢åŒ…å«å‡ ä¸ªä¾‹å¦‚ï¼šmessage, fileName, and lineNumberã€‚è¿™äº›äº‹å·²ç»ç›´æ¥åœ¨å‰é¢å‚æ•°æä¾›ç»™äº†ä½ çš„ã€‚ä½†æ˜¯è¿™ä¸ªé‡Œé¢æœ‰ä¸€ä¸ªéæ ‡å‡†çš„å±æ€§ï¼ŒError.prototype.stackã€‚è¿™ä¸ªæ˜¯è¿½è¸ªé”™è¯¯ä¿¡æ¯çš„å…³é”®æ‰€åœ¨ã€‚è€Œä¸”è™½ç„¶ä¸æ˜¯æ ‡å‡†çš„ï¼Œä½†æ˜¯æ˜¯åœ¨ä¸»æµæµè§ˆå™¨ä¸­éƒ½æ”¯æŒçš„ã€‚è¿™ä¸ªerrorå¯¹è±¡æ˜¯ä¼šå‘ç”Ÿå˜åŒ–çš„ï¼Œæ¯”å¦‚å¦‚æœæ˜¯è¯­æ³•é”™è¯¯ï¼Œå°±ä¼šæ˜¾ç¤ºçš„æ˜¯ä¸‹é¢çš„SyntaxError,å¦‚æœæ˜¯æœªå®šä¹‰é”™è¯¯ï¼Œä¼šæ˜¯ReferenceErrorã€‚æ‰“å°ä¸‹error.stackã€‚ è¿™ä¸ªé‡Œé¢çš„stackå±æ€§ï¼Œå°±æ˜¯å¯ä»¥è¿½è¸ªçš„æ‰€åœ¨ï¼Œæˆ‘ä»¬è¿™é‡Œçš„é”™è¯¯æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥æ˜¯åªæœ‰ä¸€å±‚ã€‚ å¦‚æœæ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œæ‰“å°å‡ºæ¥å¯èƒ½æ˜¯ç±»ä¼¼è¿™æ ·çš„ã€‚ Error: foobar at bar (Unknown script code:2:5) at foo (Unknown script code:6:5) at Anonymous function (Unknown script code:11:5) at Anonymous function (Unknown script code:10:2) at Anonymous function (Unknown script code:1:73) è¿™é‡Œå…·ä½“çš„ä»£ç æˆ‘åœ¨ç½‘ä¸Šçœ‹åˆ°æœ‰äººå†™äº†ä¸¤ç§ï¼Œæˆ‘è§‰å¾—ä¸¤ç§éƒ½æœ‰è‡ªå·±çš„ä¼˜ç¼ºç‚¹ã€‚å­¦ä¹ äº†ã€‚ ç¬¬ä¸€ä¸ªæ¥è‡ªçŸ¥ä¹çš„æ°´æ­Œ,é“¾æ¥ä¸ºï¼šæ°´æ­Œçš„å›ç­”ã€‚å­¦ä¹ äº†ã€‚ 12345678910111213141516171819202122232425262728(function (BOM, $) &#123; var Console_URL = $('head link[rel=\"console\"]').attr('href'); BOM.onerror = function (iMessage, iURL, iLine, iColumn, iError)&#123; BOM.setTimeout(function () &#123; var iData = &#123; message: iMessage, url: iURL, line: iLine, column: iColumn || (BOM.event &amp;&amp; BOM.event.errorCharacter) || 0 &#125;; if (iError &amp;&amp; iError.stack) iData.stack = (iError.stack || iError.stacktrace).toString(); if (Console_URL) &#123; if (iData.stack) $.post(Console_URL, iData); else $.get(Console_URL, iData); &#125; &#125;, 0); return true; &#125;;&#125;)(self, self.jQuery); è¿™æ®µä»£ç æ˜¯åªè¿½è¸ªäº†ä¸€å±‚stack,å¹¶æäº¤ç»™äº†serverã€‚çœ‹åˆ°ä¸‹é¢çš„postå’Œgetæ–¹æ³•åˆ†åˆ«æäº¤äº†å—ï¼Ÿè¿™ä¸ªä½œè€…çš„å›ç­”æ˜¯ï¼š å¦‚æœæœ‰è¯¦ç»†çš„è°ƒç”¨å †æ ˆä¿¡æ¯ï¼Œå°±ç”¨ POST è¿™ç§ç†è®ºä¸Šæ— é™å®¹é‡çš„æ–¹æ³•å‘é€ï¼Œå¦åˆ™å°±åªæŠŠ é”™è¯¯ç®€ä»‹ã€æ–‡ä»¶åã€å‡ºé”™è¡Œå· ç­‰ä¿¡æ¯ç”¨ GET å‘é€ï¼Œä»¥æé«˜ç½‘ç»œä¼ è¾“ã€æœåŠ¡å™¨ç«¯è§£æçš„æ€§èƒ½ï½ ç¬¬äºŒç§å†™æ³•æ¥è‡ªraphealçš„åšå®¢ï¼Œraphealçš„è¿™ç§å†™æ³•ï¼Œæ˜¯è¿½è¸ªäº†3å±‚é”™è¯¯ä¿¡æ¯ã€‚å­¦ä¹ äº†ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344window.onerror = function(msg,url,line,col,error)&#123; //æ²¡æœ‰URLä¸ä¸ŠæŠ¥ï¼ä¸ŠæŠ¥ä¹Ÿä¸çŸ¥é“é”™è¯¯ if (msg != \"Script error.\" &amp;&amp; !url)&#123; return true; &#125; //é‡‡ç”¨å¼‚æ­¥çš„æ–¹å¼ //æˆ‘é‡åˆ°è¿‡åœ¨window.onunloadè¿›è¡Œajaxçš„å µå¡ä¸ŠæŠ¥ //ç”±äºå®¢æˆ·ç«¯å¼ºåˆ¶å…³é—­webviewå¯¼è‡´è¿™æ¬¡å µå¡ä¸ŠæŠ¥æœ‰Network Error //æˆ‘çŒœæµ‹è¿™é‡Œwindow.onerrorçš„æ‰§è¡Œæµåœ¨å…³é—­å‰æ˜¯å¿…ç„¶æ‰§è¡Œçš„ //è€Œç¦»å¼€æ–‡ç« ä¹‹åçš„ä¸ŠæŠ¥å¯¹äºä¸šåŠ¡æ¥è¯´æ˜¯å¯ä¸¢å¤±çš„ //æ‰€ä»¥æˆ‘æŠŠè¿™é‡Œçš„æ‰§è¡Œæµæ”¾åˆ°å¼‚æ­¥äº‹ä»¶å»æ‰§è¡Œ //è„šæœ¬çš„å¼‚å¸¸æ•°é™ä½äº†10å€ setTimeout(function()&#123; var data = &#123;&#125;; //ä¸ä¸€å®šæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒcolå‚æ•° col = col || (window.event &amp;&amp; window.event.errorCharacter) || 0; data.url = url; data.line = line; data.col = col; if (!!error &amp;&amp; !!error.stack)&#123; //å¦‚æœæµè§ˆå™¨æœ‰å †æ ˆä¿¡æ¯ //ç›´æ¥ä½¿ç”¨ data.msg = error.stack.toString(); &#125;else if (!!arguments.callee)&#123; //å°è¯•é€šè¿‡calleeæ‹¿å †æ ˆä¿¡æ¯ var ext = []; var f = arguments.callee.caller, c = 3; //è¿™é‡Œåªæ‹¿ä¸‰å±‚å †æ ˆä¿¡æ¯ while (f &amp;&amp; (--c&gt;0)) &#123; ext.push(f.toString()); if (f === f.caller) &#123; break;//å¦‚æœæœ‰ç¯ &#125; f = f.caller; &#125; ext = ext.join(\",\"); data.msg = ext; &#125; //æŠŠdataä¸ŠæŠ¥åˆ°åå°ï¼ &#125;,0); return true;&#125;; æ¶¨çŸ¥è¯†é¡ºä¾¿æåˆ°è¿™é‡Œï¼Œæœ€è¿‘è¢«é—®åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œæ€ä¹ˆæµ‹è¯•ç½‘é¡µå‰ç«¯æ€§èƒ½ã€‚æˆ‘ä»¥å‰æœ‰ç”¨è¿‡webpagetestè¿™ä¸ªç½‘ç«™åœ¨çº¿æµ‹è¯•è¿‡æˆ‘çš„ç½‘ç«™çš„æ€§èƒ½ã€‚ä½†æ˜¯å½“æ—¶å¹¶æ²¡æœ‰è®¤çœŸçš„å»åˆ†æåˆ°åº•é‡Œé¢æœ‰äº›ä»€ä¹ˆä½¿ç½‘ç«™çš„åŠ è½½å˜å¾—æ…¢ï¼Œæˆ–è€…å“ªäº›æ˜¯å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ã€‚åæ€ã€‚æœ€è¿‘æˆ‘åˆçœ‹äº†çœ‹ï¼Œè¿™ä¸ªçœŸçš„æ˜¯å¾ˆå¥½ã€‚ä»”ç»†çœ‹çš„è¯ï¼Œå¯ä»¥è¯¦ç»†æŒæ¡ç½‘ç«™åŠ è½½è¿‡ç¨‹ä¸­çš„ç€‘å¸ƒæµã€æ€§èƒ½å¾—åˆ†ã€å…ƒç´ åˆ†å¸ƒã€è§†å›¾åˆ†æç­‰æ•°æ®ã€‚å…¶ä¸­æ¯”è¾ƒç›´è§‚çš„è§†å›¾åˆ†æåŠŸèƒ½å¯ä»¥ç›´æ¥çœ‹åˆ°é¡µé¢åŠ è½½å„ä¸ªé˜¶æ®µçš„æˆªå±ã€‚è¿˜å¯ä»¥çœ‹åˆ°ï¼šç™½å±æ—¶é—´å’Œé¦–å±æ—¶é—´ï¼Œå³ç”¨æˆ·å¤šä¹…èƒ½åœ¨é¡µé¢ä¸­çœ‹åˆ°å†…å®¹ï¼Œä»¥åŠå¤šä¹…é¦–å±æ¸²æŸ“å®Œæˆ(åŒ…å«å›¾ç‰‡ç­‰å…ƒç´ åŠ è½½å®Œæˆ)ã€‚è¿™ä¸¤ä¸ªæ—¶é—´ç‚¹ç›´æ¥å†³å®šäº†ç”¨æˆ·éœ€è¦ç­‰å¾…å¤šä¹…æ‰èƒ½çœ‹åˆ°è‡ªå·±æƒ³çœ‹åˆ°çš„ä¿¡æ¯ã€‚è°·æ­Œä¼˜åŒ–å»ºè®®ä¸­ä¹Ÿæåˆ°å‡å°‘éé¦–å±ä½¿ç”¨çš„ css åŠ JS,å°½å¿«è®©é¦–å±å‘ˆç°ã€‚å›å¤´æˆ‘ä¸“é—¨å†ç ”ç©¶ä¸‹ï¼Œå†å†™ä¸€ç¯‡åšå®¢ã€‚ æ€»ç»“ä¸»è¦æ˜¯å­¦ä¹ äº†ä¸¤ç§è¿½è¸ªé”™è¯¯çš„å†™æ³•ï¼Œä¸€ç§æ˜¯try,catchã€‚ä¸€ç§æ˜¯onerrorã€‚ä¸»è¦å­¦ä¹ è‡ªä¸‹é¢è¿™å‡ ç¯‡æ–‡ç« ã€‚æ¨èé˜…è¯»ï¼š client-javascript-reporting-window-onerror GlobalEventHandlers/onerror rapheal:javascript-error-monitor","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"ç”±workerman-chatå†è®¤è¯†HTML5çš„WebSocket","slug":"ç”±workerman-chatå†å­¦ä¹ HTML5çš„WebSocket","date":"2016-04-15T03:45:34.000Z","updated":"2016-12-12T02:35:16.000Z","comments":true,"path":"2016/04/15/ç”±workerman-chatå†å­¦ä¹ HTML5çš„WebSocket/","link":"","permalink":"http://sevencai.github.io/2016/04/15/ç”±workerman-chatå†å­¦ä¹ HTML5çš„WebSocket/","excerpt":"","text":"å…ˆå‰å·²ç»çœ‹äº†å‡ æ¬¡æŠŠworkerman-chatæºç ï¼Œå¯¹äºé‡Œé¢çš„workerå’Œgatewayå…·ä½“çš„å®ç°ç°åœ¨è¿˜æ˜¯ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œä½†æ˜¯è¿˜æ˜¯å­¦åˆ°ä¸å°‘ä¸œè¥¿ï¼Œæ¯”å¦‚å…³äºWebSocketçš„ä¸€äº›çŸ¥è¯†ï¼Œä»¥åŠåœ¨è¿™ä¸ªæ¡†æ¶ä¸­ä»–æ˜¯æ€ä¹ˆå®ç°WebSocketé€šä¿¡çš„ã€‚ä¸‹é¢åšä¸€äº›æ•´ç†,ä¸»è¦æ˜¯WebSocketçš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œä»¥åŠå¯¹äºworkerman-chaté‡Œå…³äºWebSocketé‚£ä¸€å—çš„ä»£ç è§£è¯»å’Œè®°å½•ã€‚ WebSocketçš„å‡ºç°èƒŒæ™¯æˆ‘ä»¬çŸ¥é“Webåº”ç”¨çš„ä¼ ç»Ÿäº¤äº’è¿‡ç¨‹é€šå¸¸æ˜¯ï¼š 1. å®¢æˆ·ç«¯é€šè¿‡æµè§ˆå™¨å‘é€ä¸€ä¸ªè¯·æ±‚ 2. æœåŠ¡å™¨ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œç„¶åè¿›è¡Œå¤„ç†å¹¶æŠŠç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ 3. å®¢æˆ·ç«¯æµè§ˆå™¨å°†æ”¶åˆ°çš„ä¿¡æ¯å‘ˆç°å‡ºæ¥ è¿™ç§æœºåˆ¶å¯¹äºä¿¡æ¯å˜åŒ–ä¸æ˜¯ç‰¹åˆ«é¢‘ç¹çš„åº”ç”¨å°šå¯ï¼Œä½†å¯¹äºå®æ—¶è¦æ±‚é«˜ã€æµ·é‡å¹¶å‘çš„åº”ç”¨æ¥è¯´æ˜¾å¾—æ‰è¥Ÿè§è‚˜ï¼Œå°¤å…¶åœ¨å½“å‰ä¸šç•Œç§»åŠ¨äº’è”ç½‘è“¬å‹ƒå‘å±•çš„è¶‹åŠ¿ä¸‹ï¼Œé«˜å¹¶å‘ä¸ç”¨æˆ·å®æ—¶å“åº”æ˜¯ Web åº”ç”¨ç»å¸¸é¢ä¸´çš„é—®é¢˜ï¼Œæ¯”å¦‚é‡‘èè¯åˆ¸çš„å®æ—¶ä¿¡æ¯ï¼ŒWeb å¯¼èˆªåº”ç”¨ä¸­çš„åœ°ç†ä½ç½®è·å–ï¼Œç¤¾äº¤ç½‘ç»œçš„å®æ—¶æ¶ˆæ¯æ¨é€ç­‰ã€‚ å…·ä½“çš„æ¥è¯´ï¼š ç›‘æ§ç³»ç»Ÿï¼šåå°ç¡¬ä»¶çƒ­æ’æ‹”ã€LEDã€æ¸©åº¦ã€ç”µå‹å‘ç”Ÿå˜åŒ–ï¼› å³æ—¶é€šä¿¡ç³»ç»Ÿï¼šå…¶å®ƒç”¨æˆ·ç™»å½•ã€å‘é€ä¿¡æ¯ï¼› å³æ—¶æŠ¥ä»·ç³»ç»Ÿï¼šåå°æ•°æ®åº“å†…å®¹å‘ç”Ÿå˜åŒ–ï¼› å¯¹äºä¸Šé¢çš„æƒ…å†µï¼Œä¹Ÿæ˜¯æœ‰ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆçš„ã€‚é€šå¸¸æ˜¯é‡‡ç”¨å®æ—¶é€šè®¯æ–¹æ¡ˆï¼Œå¸¸è§çš„å°±æœ‰ä¸¤ç§ï¼Œç¬¬ä¸€ç§æ˜¯è½®è¯¢ï¼Œç¬¬äºŒç§æ˜¯åŸºäºFlashã€‚ è½®è¯¢ï¼šç®€å•æ¥è¯´ï¼Œå°±æ˜¯å®¢æˆ·ç«¯ä»¥å›ºå®šçš„é¢‘ç‡å‘æœåŠ¡å™¨ç«¯å‘é€è¯·æ±‚ï¼Œæ¥ä¿æŒå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„æ•°æ®åŒæ­¥ï¼Œä½†æœåŠ¡å™¨ç«¯çš„æ•°æ®å¯èƒ½æ²¡æœ‰æ›´æ–°ï¼Œæ‰€ä»¥æ•ˆç‡åº•ï¼Œæµªè´¹å¸¦å®½ã€‚ ç°å¾ˆå¤šç½‘ç«™ä¸ºäº†å®ç°å³æ—¶é€šè®¯ï¼Œæ‰€ç”¨çš„æŠ€æœ¯éƒ½æ˜¯è½®è¯¢(polling)ã€‚è½®è¯¢æ˜¯åœ¨ç‰¹å®šçš„çš„æ—¶é—´é—´éš”ï¼ˆå¦‚æ¯1ç§’ï¼‰ï¼Œç”±æµè§ˆå™¨å¯¹æœåŠ¡å™¨å‘å‡ºHTTP requestï¼Œç„¶åç”±æœåŠ¡å™¨è¿”å›æœ€æ–°çš„æ•°æ®ç»™å®¢æˆ·ç«¯çš„æµè§ˆå™¨ã€‚è¿™ç§ä¼ ç»Ÿçš„HTTP request çš„æ¨¡å¼å¸¦æ¥å¾ˆæ˜æ˜¾çš„ç¼ºç‚¹ â€“ æµè§ˆå™¨éœ€è¦ä¸æ–­çš„å‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œç„¶è€ŒHTTP request çš„headeræ˜¯éå¸¸é•¿çš„ï¼Œé‡Œé¢åŒ…å«çš„æœ‰ç”¨æ•°æ®å¯èƒ½åªæ˜¯ä¸€ä¸ªå¾ˆå°çš„å€¼ï¼Œè¿™æ ·ä¼šå ç”¨å¾ˆå¤šçš„å¸¦å®½ã€‚ åŸºäºFlash:AdobeFlash é€šè¿‡è‡ªå·±çš„ Socket å®ç°å®Œæˆæ•°æ®äº¤æ¢ï¼Œå†åˆ©ç”¨ Flash æš´éœ²å‡ºç›¸åº”çš„æ¥å£ä¸º JavaScript è°ƒç”¨ï¼Œä»è€Œè¾¾åˆ°å®æ—¶ä¼ è¾“ç›®çš„ã€‚æ­¤æ–¹å¼æ¯”è½®è¯¢è¦é«˜æ•ˆï¼Œä¸”å› ä¸º Flash å®‰è£…ç‡é«˜ï¼Œåº”ç”¨åœºæ™¯æ¯”è¾ƒå¹¿æ³›ï¼Œä½†åœ¨ç§»åŠ¨äº’è”ç½‘ç»ˆç«¯ä¸Š Flash çš„æ”¯æŒå¹¶ä¸å¥½ã€‚IOS ç³»ç»Ÿä¸­æ²¡æœ‰ Flash çš„å­˜åœ¨ï¼Œåœ¨ Android ä¸­è™½ç„¶æœ‰ Flash çš„æ”¯æŒï¼Œä½†å®é™…çš„ä½¿ç”¨æ•ˆæœå·®å¼ºäººæ„ï¼Œä¸”å¯¹ç§»åŠ¨è®¾å¤‡çš„ç¡¬ä»¶é…ç½®è¦æ±‚è¾ƒé«˜ã€‚2012 å¹´ Adobe å®˜æ–¹å®£å¸ƒä¸å†æ”¯æŒ Android4.1+ç³»ç»Ÿï¼Œå®£å‘Šäº† Flash åœ¨ç§»åŠ¨ç»ˆç«¯ä¸Šçš„æ­»äº¡ã€‚ æˆ‘ä»¬çœ‹åˆ°ä¸Šé¢è¿™ä¸¤ç§æ–¹æ³•éƒ½æœ‰å„è‡ªçš„ç¼ºç‚¹ï¼Œå°¤å…¶åœ¨å¤„ç†é«˜å¹¶å‘å’Œå®æ—¶çš„éœ€æ±‚æ—¶ã€‚æˆ‘ä»¬éœ€è¦ä¸€ç§èƒ½å¤Ÿå¾ˆå¥½çš„åŒå‘é€šä¿¡æœºåˆ¶æ¥ä¿è¯æ•°æ®çš„å®æ—¶ä¼ è¾“ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬çš„WebSocketå°±å‡ºç°äº†ã€‚ WebSocketæœºåˆ¶åˆ°è¿™é‡Œå…ˆé—®å‡ ä¸ªé—®é¢˜ï¼šWebSocketåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯ä¸€ä¸ªåè®®ï¼Œæ˜¯HTML5çš„ä¸€ä¸ªæ–°åè®®ã€‚å®ƒèƒ½ç”¨æ¥å¹²ä»€ä¹ˆå‘¢ï¼Ÿç”¨æ¥å®ç°æµè§ˆå™¨ä¸æœåŠ¡å™¨çš„åŒå…¨å·¥é€šä¿¡ã€‚å®ƒå»ºç«‹äºTCPä¹‹ä¸Šï¼ŒåŒHTTPä¸€æ ·åˆ©ç”¨TCPæ¥ä¼ è¾“æ•°æ®ï¼Œä½†æ˜¯åˆå’ŒHTTPæœ‰å¾ˆå¤§çš„ä¸åŒã€‚ä¸åŒåœ¨å“ªé‡Œå‘¢ï¼Ÿå…ˆçœ‹è¿™ä¸ªå›¾ï¼š ä¸Šé¢æ˜¯ä¼ ç»Ÿçš„HTTPè¯·æ±‚å“åº”å’ŒWebSocketçš„è¯·æ±‚ç›¸åº”äº¤äº’å›¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ WebSocket APIï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨åªéœ€è¦åšä¸€ä¸ªæ¡æ‰‹çš„åŠ¨ä½œï¼Œç„¶åï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´å°±å½¢æˆäº†ä¸€æ¡å¿«é€Ÿé€šé“ã€‚ä¸¤è€…ä¹‹é—´å°±ç›´æ¥å¯ä»¥æ•°æ®äº’ç›¸ä¼ é€ã€‚ æ‰€ä»¥ä¸Šé¢çš„ç­”æ¡ˆæ˜¯ï¼šåŒºåˆ«æœ€å¤§çš„åœ°æ–¹åœ¨ï¼šåŒå‘é€šä¿¡ï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½å¯ä»¥ä¸»åŠ¨å‘é€æˆ–è€…æ¥æ”¶æ•°æ®ã€‚å°±åƒæ‰“ç”µè¯ä¸€æ ·ï¼Œä¸¤ä¸ªäººå…ˆå»ºç«‹è¿æ¥ï¼Œç„¶åæ¥é€šåï¼Œä¸¤ä¸ªäººæƒ³è¯´å•¥å°±è¯´å•¥ï¼ŒAå¯ä»¥å’ŒBä¸»åŠ¨è¯´è¯ï¼ŒBä¹Ÿå¯ä»¥ä¸»åŠ¨è·ŸAè¯´è¯ã€‚è¿™é‡Œéšå«ç€ï¼Œä¹Ÿæ˜¯è¦å…ˆå»ºç«‹è¿æ¥çš„ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€æ¬¡è¿˜æ˜¯éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„ã€‚å»ºç«‹è¿æ¥æˆåŠŸåï¼Œå°±å¯ä»¥ä¸€ç›´é€šä¿¡äº†ã€‚æœ€å¼€å§‹è¿˜æ˜¯éœ€è¦ä¸€æ¬¡TCPè¿æ¥çš„ã€‚ ç›¸å¯¹äºä¼ ç»Ÿ HTTP æ¯æ¬¡è¯·æ±‚-åº”ç­”éƒ½éœ€è¦å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å»ºç«‹è¿æ¥çš„æ¨¡å¼ï¼ŒWebSocket æ˜¯ç±»ä¼¼ Socket çš„ TCP é•¿è¿æ¥çš„é€šè®¯æ¨¡å¼ï¼Œä¸€æ—¦ WebSocket è¿æ¥å»ºç«‹åï¼Œåç»­æ•°æ®éƒ½ä»¥å¸§åºåˆ—çš„å½¢å¼ä¼ è¾“ã€‚åœ¨å®¢æˆ·ç«¯æ–­å¼€ WebSocket è¿æ¥æˆ– Server ç«¯æ–­æ‰è¿æ¥å‰ï¼Œä¸éœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é‡æ–°å‘èµ·è¿æ¥è¯·æ±‚ã€‚åœ¨æµ·é‡å¹¶å‘åŠå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨äº¤äº’è´Ÿè½½æµé‡å¤§çš„æƒ…å†µä¸‹ï¼Œæå¤§çš„èŠ‚çœäº†ç½‘ç»œå¸¦å®½èµ„æºçš„æ¶ˆè€—ï¼Œæœ‰æ˜æ˜¾çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œä¸”å®¢æˆ·ç«¯å‘é€å’Œæ¥å—æ¶ˆæ¯æ˜¯åœ¨åŒä¸€ä¸ªæŒä¹…è¿æ¥ä¸Šå‘èµ·ï¼Œå®æ—¶æ€§ä¼˜åŠ¿æ˜æ˜¾ã€‚ é€šè¿‡WebSocketçš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„æŠ¥æ–‡WebSocketå®¢æˆ·ç«¯è¿æ¥æŠ¥æ–‡ GET / HTTP/1.1 Host: localhost Upgrade: websocket Connection: Upgrade Sec-WebSocket-Key: xqBt3ImNzJbYqRINxEFlkg== Origin: http://localhost:8080 Sec-WebSocket-Version: 13 è§£é‡Šä¸‹ï¼šè¿™é‡Œçš„upgradeè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªWebSocketç±»å‹çš„è¯·æ±‚ã€‚ï¼ˆä¸ºäº†æ›´æ–¹ä¾¿åœ°éƒ¨ç½²æ–°åè®®ï¼ŒHTTP/1.1 å¼•å…¥äº† Upgrade æœºåˆ¶ï¼Œå®ƒä½¿å¾—å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´å¯ä»¥å€ŸåŠ©å·²æœ‰çš„ HTTP è¯­æ³•å‡çº§åˆ°å…¶å®ƒåè®®ï¼‰ã€‚â€œSec-WebSocket-Keyâ€æ˜¯ WebSocket å®¢æˆ·ç«¯å‘é€çš„ä¸€ä¸ª base64 ç¼–ç çš„å¯†æ–‡ï¼Œè¦æ±‚æœåŠ¡ç«¯å¿…é¡»è¿”å›ä¸€ä¸ªå¯¹åº”åŠ å¯†çš„â€œSec-WebSocket-Acceptâ€åº”ç­”ï¼Œå¦åˆ™å®¢æˆ·ç«¯ä¼šæŠ›å‡ºâ€œError during WebSocket handshakeâ€é”™è¯¯ï¼Œå¹¶å…³é—­è¿æ¥ã€‚ WebSocket æœåŠ¡ç«¯å“åº”æŠ¥æ–‡ HTTP/1.1 101 Switching Protocols Upgrade: websocket Connection: Upgrade Sec-WebSocket-Accept: K7DJLdLooIwIG/MOpvWFB3y3FE8= â€œSec-WebSocket-Acceptâ€çš„å€¼æ˜¯æœåŠ¡ç«¯é‡‡ç”¨ä¸å®¢æˆ·ç«¯ä¸€è‡´çš„å¯†é’¥è®¡ç®—å‡ºæ¥åè¿”å›å®¢æˆ·ç«¯çš„,â€œHTTP/1.1 101 Switching Protocolsâ€è¡¨ç¤ºæœåŠ¡ç«¯æ¥å— WebSocket åè®®çš„å®¢æˆ·ç«¯è¿æ¥ï¼Œç»è¿‡è¿™æ ·çš„è¯·æ±‚-å“åº”å¤„ç†åï¼Œå®¢æˆ·ç«¯æœåŠ¡ç«¯çš„ WebSocket è¿æ¥æ¡æ‰‹æˆåŠŸ, åç»­å°±å¯ä»¥è¿›è¡Œ TCP é€šè®¯äº†ã€‚ WebSocketå®¢æˆ·ç«¯APIWebSocketçš„å®ç°åˆ†ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå®¢æˆ·ç«¯é€šè¿‡æµè§ˆå™¨å‘é€WebSocketè¿æ¥è¯·æ±‚ï¼ŒæœåŠ¡ç«¯å“åº”ï¼Œç„¶åTCPä¸‰æ¬¡æ‚æ‰‹ï¼Œç„¶åå°±åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å½¢æˆäº†ä¸€æ¡HTTPé•¿è¿æ¥å¿«é€Ÿé€šé“ï¼Œä¸¤è€…åé¢å°±ä¸è¦å†æ¬¡å»ºç«‹é“¾æ¥äº†ã€‚çœ‹çœ‹workerman-chatæ˜¯åˆ†åˆ«æ€ä¹ˆå®ç°å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„ã€‚ å…ˆçœ‹ä¸‹æˆ‘ä»¬ä¸€èˆ¬åœ¨å®¢æˆ·ç«¯ç”¨Javascriptå¦‚ä½•å»ºç«‹WebSocketè¿æ¥ï¼šé¦–å…ˆï¼Œnewä¸€ä¸ªWebSocketï¼Œç„¶ååœ¨socketä¸Šç›‘å¬WebSocketå¯¹è±¡ã€‚ä¸»è¦é€šè¿‡onopenï¼Œonmessageï¼Œoncloseå’Œonerrorå››ä¸ªäº‹ä»¶å®ç°å¯¹socketæ¶ˆæ¯çš„å¼‚æ­¥å“åº”ã€‚123456789101112131415161718var wsServer = 'ws://localhost:8888/Demo'; var websocket = new WebSocket(wsServer); websocket.onopen = function (evt) &#123; onOpen(evt) &#125;; websocket.onclose = function (evt) &#123; onClose(evt) &#125;; websocket.onmessage = function (evt) &#123; onMessage(evt) &#125;; websocket.onerror = function (evt) &#123; onError(evt) &#125;; function onOpen(evt) &#123; console.log(\"Connected to WebSocket server.\"); &#125; function onClose(evt) &#123; console.log(\"Disconnected\"); &#125; function onMessage(evt) &#123; console.log('Retrieved data from server: ' + evt.data); &#125; function onError(evt) &#123; console.log('Error occured: ' + evt.data); &#125; çœ‹ä¸‹workerman-chatçš„å®¢æˆ·ç«¯ä»£ç é¦–å…ˆæ˜¯onload=&quot;connect();&quot;onloadçš„æ—¶å€™è°ƒç”¨connectåˆ›å»ºè¿æ¥socketã€‚ å®ƒåœ¨connecté‡Œé¢åˆ›å»ºäº†socketï¼Œå¹¶ä¸”è®¾ç½®äº†onopenï¼Œonmessageï¼Œoncloseå’Œonerrorè¿™å‡ ä¸ªäº‹ä»¶ã€‚ 123456789101112131415function connect() &#123; // åˆ›å»ºwebsocket ws = new WebSocket(\"ws://\"+document.domain+\":7272\"); // å½“socketè¿æ¥æ‰“å¼€æ—¶ï¼Œè¾“å…¥ç”¨æˆ·å ws.onopen = onopen; // å½“æœ‰æ¶ˆæ¯æ—¶æ ¹æ®æ¶ˆæ¯ç±»å‹æ˜¾ç¤ºä¸åŒä¿¡æ¯ ws.onmessage = onmessage; ws.onclose = function() &#123; console.log(\"è¿æ¥å…³é—­ï¼Œå®šæ—¶é‡è¿\"); connect(); &#125;; ws.onerror = function() &#123; console.log(\"å‡ºç°é”™è¯¯\"); &#125;;&#125; å†æ¥çœ‹çœ‹å®ƒçš„onopenå’Œonmessageå‡½æ•°ã€‚åœ¨è¿™ä¸¤ä¸ªå‡½æ•°ä¸­ï¼Œè·å–åˆ°å®¢æˆ·ç«¯ç”¨æˆ·çš„client_nameåï¼Œåˆ©ç”¨ws.sendæŠŠæ•°æ®ï¼ˆåŒ…æ‹¬typeç±»å‹ï¼Œæ˜¯loginï¼‰å‘é€ç»™æœåŠ¡å™¨ã€‚æœåŠ¡å™¨é‚£è¾¹æ”¶åˆ°æ¶ˆæ¯ä¼šåšç›¸åº”çš„å¤„ç†ï¼Œç„¶åæŠŠæ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œè¿™ä¸ªæ—¶å€™è°ƒç”¨onmessage,é‡Œé¢ä¹ŸåŒ…æ‹¬äº†typeçš„ç±»å‹ï¼Œå°†è¯¥ç”¨æˆ·è®¾ç½®å…¥client_list,å¹¶ä¸”å¹¿æ’­ç»™æ‰€æœ‰çš„ç”¨æˆ·ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051// è¿æ¥å»ºç«‹æ—¶å‘é€ç™»å½•ä¿¡æ¯function onopen()&#123; if(!name) &#123; show_prompt(); &#125; // ç™»å½• var login_data = '&#123;\"type\":\"login\",\"client_name\":\"'+name.replace(/\"/g, '\\\\\"')+'\",\"room_id\":\"&lt;?php echo isset($_GET['room_id']) ? $_GET['room_id'] : 1?&gt;\"&#125;'; console.log(\"websocketæ¡æ‰‹æˆåŠŸï¼Œå‘é€ç™»å½•æ•°æ®:\"+login_data); ws.send(login_data);&#125;// æœåŠ¡ç«¯å‘æ¥æ¶ˆæ¯æ—¶function onmessage(e)&#123; console.log(e.data); var data = eval(\"(\"+e.data+\")\"); switch(data['type'])&#123; // æœåŠ¡ç«¯pingå®¢æˆ·ç«¯ case 'ping': ws.send('&#123;\"type\":\"pong\"&#125;'); break;; // ç™»å½• æ›´æ–°ç”¨æˆ·åˆ—è¡¨ case 'login': //&#123;\"type\":\"login\",\"client_id\":xxx,\"client_name\":\"xxx\",\"client_list\":\"[...]\",\"time\":\"xxx\"&#125; say(data['client_id'], data['client_name'], data['client_name']+' åŠ å…¥äº†èŠå¤©å®¤', data['time']); if(data['client_list']) &#123; client_list = data['client_list']; &#125; else &#123; client_list[data['client_id']] = data['client_name']; &#125; flush_client_list(); console.log(data['client_name']+\"ç™»å½•æˆåŠŸ\"); break; // å‘è¨€ case 'say': //&#123;\"type\":\"say\",\"from_client_id\":xxx,\"to_client_id\":\"all/client_id\",\"content\":\"xxx\",\"time\":\"xxx\"&#125; say(data['from_client_id'], data['from_client_name'], data['content'], data['time']); break; // ç”¨æˆ·é€€å‡º æ›´æ–°ç”¨æˆ·åˆ—è¡¨ case 'logout': //&#123;\"type\":\"logout\",\"client_id\":xxx,\"time\":\"xxx\"&#125; say(data['from_client_id'], data['from_client_name'], data['from_client_name']+' é€€å‡ºäº†', data['time']); delete client_list[data['from_client_id']]; flush_client_list(); &#125;&#125; å½“ç”¨æˆ·è¦æäº¤å¯¹è¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬è·å–åˆ°è¡¨å•é‡Œçš„å†…å®¹ï¼Œå°†æ•°æ®åŒæ ·åˆ©ç”¨ws.send()å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨åŒæ ·åšç›¸åº”çš„å¤„ç†ï¼Œå¹¶å°†æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ç„¶åå†è°ƒç”¨å®¢æˆ·ç«¯çš„onmessage,è¿™ä¸ªæ—¶å€™çš„ç±»å‹å¾ˆæ˜æ˜¾å°±ä¸æ˜¯loginäº†ï¼Œè€Œæ˜¯sayã€‚ 1234567891011121314//æäº¤æ•°æ®function onSubmit() &#123; var input = document.getElementById(\"textarea\"); var to_client_id = $(\"#client_list option:selected\").attr(\"value\"); var to_client_name = $(\"#client_list option:selected\").text(); ws.send('&#123;\"type\":\"say\",\"to_client_id\":\"'+to_client_id+'\",\"to_client_name\":\"'+to_client_name+'\",\"content\":\"'+input.value.replace(/\"/g, '\\\\\"').replace(/\\n/g,'\\\\n').replace(/\\r/g, '\\\\r')+'\"&#125;'); input.value = \"\"; input.focus();&#125;// å‘è¨€å°±æ˜¯æŠŠæ•°æ®appendè¿›å…¥å¯¹åº”çš„å›è¯åŒºfunction say(from_client_id, from_client_name, content, time)&#123; $(\"#dialog\").append('&lt;div class=\"speech_item\"&gt;&lt;img src=\"http://lorempixel.com/38/38/?'+from_client_id+'\" class=\"user_icon\" /&gt; '+from_client_name+' &lt;br&gt; '+time+'&lt;div style=\"clear:both;\"&gt;&lt;/div&gt;&lt;p class=\"triangle-isosceles top\"&gt;'+content+'&lt;/p&gt; &lt;/div&gt;');&#125; çœ‹ä¸‹workerman-chatçš„æœåŠ¡å™¨ç«¯ä»£ç è¿™é‡Œçš„ä»£ç å¾ˆå°‘ï¼Œä¸»è¦æ˜¯å®šä¹‰äº†Eventç±»çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯onMessageæ–¹æ³•ï¼Œè¿™é‡Œæ ¹æ®å®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„typeæ¥è¿”å›ä¸åŒçš„æ•°æ®ã€‚æ¯”å¦‚å¦‚æœæ˜¯loginå°±åŠ å…¥åˆ°client_listä¸­å»ï¼Œç„¶åè®¾ç½®sessionä»€ä¹ˆçš„ã€‚è¿™é‡Œä»–æœ‰è°ƒç”¨Gatewayé‡Œé¢çš„ä¸€äº›æ–¹æ³•å¦‚ï¼šGateway::getClientInfoByGroup()ç­‰ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116class Event&#123; /** * æœ‰æ¶ˆæ¯æ—¶ * @param int $client_id * @param mixed $message */ public static function onMessage($client_id, $message) &#123; // debug echo \"client:&#123;$_SERVER['REMOTE_ADDR']&#125;:&#123;$_SERVER['REMOTE_PORT']&#125; gateway:&#123;$_SERVER['GATEWAY_ADDR']&#125;:&#123;$_SERVER['GATEWAY_PORT']&#125; client_id:$client_id session:\".json_encode($_SESSION).\" onMessage:\".$message.\"\\n\"; // å®¢æˆ·ç«¯ä¼ é€’çš„æ˜¯jsonæ•°æ® $message_data = json_decode($message, true); if(!$message_data) &#123; return ; &#125; // æ ¹æ®ç±»å‹æ‰§è¡Œä¸åŒçš„ä¸šåŠ¡ switch($message_data['type']) &#123; // å®¢æˆ·ç«¯å›åº”æœåŠ¡ç«¯çš„å¿ƒè·³ case 'pong': return; // å®¢æˆ·ç«¯ç™»å½• messageæ ¼å¼: &#123;type:login, name:xx, room_id:1&#125; ï¼Œæ·»åŠ åˆ°å®¢æˆ·ç«¯ï¼Œå¹¿æ’­ç»™æ‰€æœ‰å®¢æˆ·ç«¯xxè¿›å…¥èŠå¤©å®¤ case 'login': // åˆ¤æ–­æ˜¯å¦æœ‰æˆ¿é—´å· if(!isset($message_data['room_id'])) &#123; throw new \\Exception(\"\\$message_data['room_id'] not set. client_ip:&#123;$_SERVER['REMOTE_ADDR']&#125; \\$message:$message\"); &#125; // æŠŠæˆ¿é—´å·æ˜µç§°æ”¾åˆ°sessionä¸­ $room_id = $message_data['room_id']; $client_name = htmlspecialchars($message_data['client_name']); $_SESSION['room_id'] = $room_id; $_SESSION['client_name'] = $client_name; // è·å–æˆ¿é—´å†…æ‰€æœ‰ç”¨æˆ·åˆ—è¡¨ $clients_list = Gateway::getClientInfoByGroup($room_id); foreach($clients_list as $tmp_client_id=&gt;$item) &#123; $clients_list[$tmp_client_id] = $item['client_name']; &#125; $clients_list[$client_id] = $client_name; // è½¬æ’­ç»™å½“å‰æˆ¿é—´çš„æ‰€æœ‰å®¢æˆ·ç«¯ï¼Œxxè¿›å…¥èŠå¤©å®¤ message &#123;type:login, client_id:xx, name:xx&#125; $new_message = array('type'=&gt;$message_data['type'], 'client_id'=&gt;$client_id, 'client_name'=&gt;htmlspecialchars($client_name), 'time'=&gt;date('Y-m-d H:i:s')); Gateway::sendToGroup($room_id, json_encode($new_message)); Gateway::joinGroup($client_id, $room_id); // ç»™å½“å‰ç”¨æˆ·å‘é€ç”¨æˆ·åˆ—è¡¨ $new_message['client_list'] = $clients_list; Gateway::sendToCurrentClient(json_encode($new_message)); return; // å®¢æˆ·ç«¯å‘è¨€ message: &#123;type:say, to_client_id:xx, content:xx&#125; case 'say': // éæ³•è¯·æ±‚ if(!isset($_SESSION['room_id'])) &#123; throw new \\Exception(\"\\$_SESSION['room_id'] not set. client_ip:&#123;$_SERVER['REMOTE_ADDR']&#125;\"); &#125; $room_id = $_SESSION['room_id']; $client_name = $_SESSION['client_name']; // ç§èŠ if($message_data['to_client_id'] != 'all') &#123; $new_message = array( 'type'=&gt;'say', 'from_client_id'=&gt;$client_id, 'from_client_name' =&gt;$client_name, 'to_client_id'=&gt;$message_data['to_client_id'], 'content'=&gt;\"&lt;b&gt;å¯¹ä½ è¯´: &lt;/b&gt;\".nl2br(htmlspecialchars($message_data['content'])), 'time'=&gt;date('Y-m-d H:i:s'), ); Gateway::sendToClient($message_data['to_client_id'], json_encode($new_message)); $new_message['content'] = \"&lt;b&gt;ä½ å¯¹\".htmlspecialchars($message_data['to_client_name']).\"è¯´: &lt;/b&gt;\".nl2br(htmlspecialchars($message_data['content'])); return Gateway::sendToCurrentClient(json_encode($new_message)); &#125; $new_message = array( 'type'=&gt;'say', 'from_client_id'=&gt;$client_id, 'from_client_name' =&gt;$client_name, 'to_client_id'=&gt;'all', 'content'=&gt;nl2br(htmlspecialchars($message_data['content'])), 'time'=&gt;date('Y-m-d H:i:s'), ); return Gateway::sendToGroup($room_id ,json_encode($new_message)); &#125; &#125; /** * å½“å®¢æˆ·ç«¯æ–­å¼€è¿æ¥æ—¶ * @param integer $client_id å®¢æˆ·ç«¯id */ public static function onClose($client_id) &#123; // debug echo \"client:&#123;$_SERVER['REMOTE_ADDR']&#125;:&#123;$_SERVER['REMOTE_PORT']&#125; gateway:&#123;$_SERVER['GATEWAY_ADDR']&#125;:&#123;$_SERVER['GATEWAY_PORT']&#125; client_id:$client_id onClose:''\\n\"; // ä»æˆ¿é—´çš„å®¢æˆ·ç«¯åˆ—è¡¨ä¸­åˆ é™¤ if(isset($_SESSION['room_id'])) &#123; $room_id = $_SESSION['room_id']; $new_message = array('type'=&gt;'logout', 'from_client_id'=&gt;$client_id, 'from_client_name'=&gt;$_SESSION['client_name'], 'time'=&gt;date('Y-m-d H:i:s')); Gateway::sendToGroup($room_id, json_encode($new_message)); &#125; &#125; &#125; æ¶¨çŸ¥è¯†-å»ºç«‹socketè¿æ¥å»ºç«‹Socketè¿æ¥è‡³å°‘éœ€è¦ä¸€å¯¹å¥—æ¥å­—ï¼Œå…¶ä¸­ä¸€ä¸ªè¿è¡Œäºå®¢æˆ·ç«¯ï¼Œç§°ä¸ºClientSocket ï¼Œå¦ä¸€ä¸ªè¿è¡ŒäºæœåŠ¡å™¨ç«¯ï¼Œç§°ä¸ºServerSocket ã€‚ å¥—æ¥å­—ä¹‹é—´çš„è¿æ¥è¿‡ç¨‹åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼šæœåŠ¡å™¨ç›‘å¬ï¼Œå®¢æˆ·ç«¯è¯·æ±‚ï¼Œè¿æ¥ç¡®è®¤ã€‚ æœåŠ¡å™¨ç›‘å¬ï¼šæœåŠ¡å™¨ç«¯å¥—æ¥å­—å¹¶ä¸å®šä½å…·ä½“çš„å®¢æˆ·ç«¯å¥—æ¥å­—ï¼Œè€Œæ˜¯å¤„äºç­‰å¾…è¿æ¥çš„çŠ¶æ€ï¼Œå®æ—¶ç›‘æ§ç½‘ç»œçŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚ å®¢æˆ·ç«¯è¯·æ±‚ï¼šæŒ‡å®¢æˆ·ç«¯çš„å¥—æ¥å­—æå‡ºè¿æ¥è¯·æ±‚ï¼Œè¦è¿æ¥çš„ç›®æ ‡æ˜¯æœåŠ¡å™¨ç«¯çš„å¥—æ¥å­—ã€‚ä¸ºæ­¤ï¼Œå®¢æˆ·ç«¯çš„å¥—æ¥å­—å¿…é¡»é¦–å…ˆæè¿°å®ƒè¦è¿æ¥çš„æœåŠ¡å™¨çš„å¥—æ¥å­—ï¼ŒæŒ‡å‡ºæœåŠ¡å™¨ç«¯å¥—æ¥å­—çš„åœ°å€å’Œç«¯å£å·ï¼Œç„¶åå°±å‘æœåŠ¡å™¨ç«¯å¥—æ¥å­—æå‡ºè¿æ¥è¯·æ±‚ã€‚ è¿æ¥ç¡®è®¤ï¼šå½“æœåŠ¡å™¨ç«¯å¥—æ¥å­—ç›‘å¬åˆ°æˆ–è€…è¯´æ¥æ”¶åˆ°å®¢æˆ·ç«¯å¥—æ¥å­—çš„è¿æ¥è¯·æ±‚æ—¶ï¼Œå°±å“åº”å®¢æˆ·ç«¯å¥—æ¥å­—çš„è¯·æ±‚ï¼Œå»ºç«‹ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼ŒæŠŠæœåŠ¡å™¨ç«¯å¥—æ¥å­—çš„æè¿°å‘ç»™å®¢æˆ·ç«¯ï¼Œä¸€æ—¦å®¢æˆ·ç«¯ç¡®è®¤äº†æ­¤æè¿°ï¼ŒåŒæ–¹å°±æ­£å¼å»ºç«‹è¿æ¥ã€‚è€ŒæœåŠ¡å™¨ç«¯å¥—æ¥å­—ç»§ç»­å¤„äºç›‘å¬çŠ¶æ€ï¼Œç»§ç»­æ¥æ”¶å…¶ä»–å®¢æˆ·ç«¯å¥—æ¥å­—çš„è¿æ¥è¯·æ±‚ã€‚ æˆ‘ä»¬è¿™é‡Œè¿˜è¦åŒºåˆ†ä¸€ä¸ªæ¦‚å¿µå°±æ˜¯httpå’Œsocketçš„åŒºåˆ«ã€‚è¿™ä¸¤ä¸ªåƒä¸‡ä¸èƒ½æ··ä¸ºä¸€è°ˆï¼ŒHttpï¼ˆæ— çŠ¶æ€ï¼‰æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œæ˜¯åè®®ï¼Œæ˜¯åŸºäºTCP/IPåè®®åŸºç¡€ä¸Šçš„åº”ç”¨å±‚åè®®ã€‚Socketä¸æ˜¯åè®®ï¼Œæ˜¯ä¸€ä¸ªè°ƒç”¨æ¥å£ï¼ŒSocketæ˜¯åŸºäºTCP/IPçš„åè®®å°è£…ã€‚Socketæ˜¯é•¿è¿æ¥ï¼Œhttpåªèƒ½èµ°tcp,sockettä¸ä»…èƒ½èµ°tcpè¿˜èƒ½èµ°udpã€‚æ€»çš„æ¥è¯´ï¼šSocketæ˜¯åº”ç”¨å±‚ä¸TCP/IPåè®®æ—é€šä¿¡çš„ä¸­é—´è½¯ä»¶æŠ½è±¡å±‚ï¼Œä¸€ç»„æ¥å£ï¼ŒæŠŠå¤æ‚çš„TCP/IPåè®®æ—éšè—åœ¨Socketæ¥å£åé¢ã€‚ æ€»ç»“ä¸»è¦æ˜¯æ€»ç»“äº†ä¸‹WebSocket,ç„¶åä»¥workerman-chatçš„ä¾‹å­ä¸ºè®²è§£ï¼Œçœ‹ä¸‹åˆ«äººçš„ä»£ç æ€ä¹ˆå†™çš„è¿™ä¹ˆå¥½ã€‚WebSocket çš„ä¼˜ç‚¹ä¸Šé¢æˆ‘ä»¬çœ‹åˆ°äº†æœ‰å¾ˆå¤šï¼Œä½†æ˜¯ç°åœ¨ç”¨å®ƒæ˜¯ä¹Ÿæœ‰é£é™©ï¼Œå› ä¸ºå®ƒæ­£å¤„äºè¿˜ä¸æ˜¯éå¸¸æˆç†Ÿçš„é˜¶æ®µã€‚å¦å¤–çš„ä¸€ä¸ªé£é™©å°±æ˜¯å¾®è½¯çš„ IE ä½œä¸ºå å¸‚åœºä»½é¢æœ€å¤§çš„æµè§ˆå™¨ï¼Œå’Œå…¶ä»–çš„ä¸»æµæµè§ˆå™¨ç›¸æ¯”ï¼Œå¯¹ HTML5 çš„æ”¯æŒæ˜¯æ¯”è¾ƒå·®çš„ï¼Œè¿™æ˜¯æˆ‘ä»¬åœ¨æ„å»ºä¼ä¸šçº§çš„ Web åº”ç”¨çš„æ—¶å€™å¿…é¡»è¦è€ƒè™‘çš„ä¸€ä¸ªé—®é¢˜ã€‚ç°åœ¨å®ƒè¿™ä¸ªæ˜¯å¹¶æ²¡æœ‰å’Œæ•°æ®åº“æ‰“äº¤é“çš„ã€‚ä½†æ˜¯æˆ‘æ˜¯è¦ä»æ•°æ®åº“ä¸­è¯»å‡ºç›¸åº”çš„ç¾¤ç»„ï¼Œç„¶åå¯ä»¥ç¾¤ç»„å¯¹è¯ï¼Œæˆ–è€…ä¸“ä¸€å¯¹è¯ã€‚å¹¶ä¸”ä¸æ˜¯åªæœ‰åœ¨çº¿æ‰èƒ½å‘æ¶ˆæ¯ã€‚è¿™é‡Œworkerman-chatä¹Ÿæ²¡æœ‰æŠŠæ¶ˆæ¯å­˜åˆ°æ•°æ®åº“ä¸­å»ï¼Œè¿™è‚¯å®šå¯¹æˆ‘çš„é¡¹ç›®æ¥è¯´æ˜¯ä¸è¡Œçš„ï¼Œæˆ‘éœ€è¦å»ºè¡¨ï¼Œç„¶åæŠŠå¯¹åº”çš„ä¼šè¯å­˜å…¥æ•°æ®åº“ã€‚å®ƒæ˜¯æœ‰ä¸€äº›DBç±»çš„ï¼Œå¯ä»¥ç”¨è¿™ä¸ªã€‚å›å¤´æ”¹å®Œï¼Œå†å†™ä¸€ç¯‡æ–‡ç« ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/tags/WEBå¼€å‘/"}]},{"title":"PHPExcelç®€å•åˆ—è¡¨å¯¼å‡º","slug":"PHPExcelç®€å•åˆ—è¡¨å¯¼å‡º","date":"2016-04-11T14:30:23.000Z","updated":"2016-12-12T02:30:42.000Z","comments":true,"path":"2016/04/11/PHPExcelç®€å•åˆ—è¡¨å¯¼å‡º/","link":"","permalink":"http://sevencai.github.io/2016/04/11/PHPExcelç®€å•åˆ—è¡¨å¯¼å‡º/","excerpt":"","text":"PHPExcelæ˜¯ç”¨æ¥æ“ä½œOffice Excel æ–‡æ¡£çš„ä¸€ä¸ªPHPç±»åº“ï¼Œå®ƒåŸºäºå¾®è½¯çš„OpenXMLæ ‡å‡†å’ŒPHPè¯­è¨€ã€‚å¯ä»¥ä½¿ç”¨å®ƒæ¥è¯»å–ã€å†™å…¥ä¸åŒæ ¼å¼çš„ç”µå­è¡¨æ ¼ã€‚ä¸‹é¢ä¸»è¦ä»‹ç»çš„æ˜¯ï¼šPHPExcelç®€å•åˆ—è¡¨å¯¼å‡ºã€‚ ç”ŸæˆExcelè¡¨çš„æ€è·¯å¯¹ç…§é¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ°å®˜ç½‘ä¸Šï¼Œä¸‹è½½PHPExcelçš„åŒ…ï¼ŒåŒ…é‡Œæˆ‘ä»¬æŠŠclasseså•ç‹¬æå–å‡ºæ¥ï¼Œclassesé‡Œé¢æœ‰ä¸€ä¸ªæ–‡ä»¶ä½¿PHPExcel.phpè¿™ä¸ªæ˜¯æˆ‘ä»¬ä¸»è¦ç”¨åˆ°çš„ï¼Œåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘æŠŠclassesæ–‡ä»¶å¤¹é‡å‘½åä¸ºäº†PHPExcelã€‚ä¸‹é¢è¿™å¼ å›¾å¯¹æ¯”äº†æˆ‘ä»¬å¹³å¸¸åˆ›å»ºä¸€ä¸ªexceléœ€è¦åšä»€ä¹ˆå’Œæˆ‘ä»¬ç”¨ä»£ç åˆ›å»ºä¸€ä¸ªexcelçš„ç›¸åŒçš„åœ°æ–¹ï¼Œæˆ‘ä»¬åº”è¯¥çœ‹åˆ°ä»–ä»¬éå¸¸ç›¸ä¼¼ï¼š ç”ŸæˆExcelè¡¨åŸºæœ¬ä»£ç 123456789101112131415161718192021222324&lt;?php //è·å–å½“å‰è·¯å¾„ $dir = dirname(__FILE__); //åŒ…å«PHPExcelæ–‡ä»¶ require_once(\"./PHPExcel/PHPExcel.php\"); //åˆ›å»ºäº†ä¸€ä¸ªè¡¨æ ¼ $phpExcelObj = new PHPExcel(); //è·å–å½“å‰æ´»åŠ¨sheet $activeSheet = $phpExcelObj-&gt;getActiveSheet(); //var_dump($activeSheet); $activeSheet-&gt;setTitle(\"demo\"); //ç»™å½“å‰çš„è¡¨æ ¼å¡«å……æ•°æ® $activeSheet-&gt;setCellValue(\"A1\",\"å§“å\")-&gt;setCellValue(\"B1\",\"åˆ†æ•°\"); $activeSheet-&gt;setCellValue(\"A2\",\"Seven\")-&gt;setCellValue(\"B2\",\"75\"); //æŒ‰ç…§æŒ‡å®šæ ¼å¼ç”Ÿæˆexcelæ–‡ä»¶ $objWriter = PHPExcel_IOFactory::createWriter($phpExcelObj,\"Excel2007\"); //ä¿å­˜æ–‡æ¡£ $objWriter-&gt;save($dir.\"/demo.xlsx\");?&gt; å°±å¯ä»¥åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªdemo.xlsx,é‡Œé¢çš„å†…å®¹ï¼š å…ˆå‰å¯ä»¥è¯•ç€æ‰“å°ä¸‹$phpExcelObjå¯¹è±¡ï¼Œå¦‚æœçœ‹åˆ°ä¸‹é¢çš„å¯ä»¥è¯´æ˜å¼•å…¥æˆåŠŸï¼š è¿˜æœ‰ä¸‹é¢è¿™æ ·çš„ä¸€ç§æ–¹å¼ï¼Œä»¥æ•°ç»„æ¥å¡«å……ï¼š123456789101112131415161718&lt;?php $dir = dirname(__FILE__); //string 'D:\\wamp\\wamp\\www\\phpexcel' (length=25) require_once(\"./PHPExcel/PHPExcel.php\"); $phpExcelObj = new PHPExcel(); //åˆ›å»ºäº†ä¸€ä¸ªè¡¨æ ¼ $activeSheet = $phpExcelObj-&gt;getActiveSheet(); //var_dump($activeSheet);//è·å–å½“å‰æ´»åŠ¨sheet $activeSheet-&gt;setTitle(\"demo\"); //ç»™å½“å‰çš„è¡¨æ ¼å¡«å……æ•°æ® $array = array( array(), array(\"\",\"å§“å\",\"åˆ†æ•°\"), array(\"\",\"æå››\",\"60\"), array(\"\",\"ç‹äº”\",\"90\") ); $activeSheet-&gt;fromArray($array); $objWriter = PHPExcel_IOFactory::createWriter($phpExcelObj,\"Excel2007\"); $objWriter-&gt;save($dir.\"/demo1.xlsx\");?&gt; è¿™ç§æ–¹æ³•è‚¯å®šå’Œä¸Šé¢çš„æ¯”æœ‰ä¼˜ç‚¹ï¼Œæ¯”å¦‚è®¾ç½®èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸å¥½çš„åœ°æ–¹ï¼Œæ¯”è¾ƒè€—å†…å­˜ã€‚ æŠŠæ•°æ®åº“çš„æ•°æ®å½•å…¥excelä¸­åˆšåˆšæˆ‘ä»¬çš„æ˜¯ç›´æ¥æ‰‹åŠ¨å½•å…¥ï¼Œè¿™ç§æƒ…å†µåœ¨é¡¹ç›®ä¸­æ˜¯ä½¿ç”¨æ¯”è¾ƒå°‘çš„ï¼Œä¸‹é¢è¿™ç§æˆ‘ä»¬æŠŠæ•°æ®ä»æ•°æ®åº“å½•å…¥excelä¸­æ˜¯æœ€å¸¸è§çš„ã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨ç”Ÿæˆè®¢å•è¡¨çš„æ—¶å€™ï¼Œç”Ÿæˆexcelå¯¹å–å®¶æ¥è¯´ä¼šæ˜¯ç»å¸¸éœ€è¦çš„ã€‚ æ¯”å¦‚æˆ‘ä»¬åœ¨æ•°æ®åº“ä¸­æœ‰è¿™æ ·ä¸€å¼ è¡¨ï¼š æˆ‘ä»¬éœ€è¦æŒ‰ç…§å¹´çº§æŠŠæˆç»©åˆ†å‡ºæ¥ï¼Œå¹¶å¾—åˆ°ä¸‹é¢çš„ç»“æœ,å¦‚æœæˆ‘ä»¬æ‰‹åŠ¨å½•å…¥è‚¯å®šä¼šå¾ˆéº»çƒ¦ï¼Œçœ‹çœ‹ä¸‹é¢çš„PHPExcelæ–¹æ³•ï¼š é¦–å…ˆæˆ‘ä»¬æœ‰ä¸€ä¸ªæ•°æ®åº“é…ç½®æ–‡ä»¶ï¼šconfig.php,åœ¨è¿™é‡Œé¢è¦è®¾ç½®æ•°æ®åº“ï¼Œå­—ç¬¦é›†ç­‰ä¿¡æ¯ã€‚123456789&lt;?php $config = array( &apos;host&apos;=&gt;&apos;127.0.0.1&apos;, &apos;username&apos;=&gt;&apos;root&apos;, &apos;password&apos;=&gt;&apos;****&apos;, &apos;database&apos;=&gt;&apos;test&apos;, &apos;charset&apos;=&gt;&apos;utf8&apos; );?&gt; ç„¶åæˆ‘ä»¬éœ€è¦ä¸€ä¸ªdbç±»ï¼Œç”¨äºæˆ‘ä»¬ä»æ•°æ®åº“å–å‡ºæ•°æ®ï¼Œæˆ‘ä»¬å‘½åä¸ºdb.php123456789101112131415161718192021222324252627&lt;?php require_once('./config.php'); class db&#123; public $conn = null; public function __construct($config)&#123; $this-&gt;conn = mysql_connect($config['host'],$config['username'],$config['password']) or die(mysql_error()); mysql_select_db($config['database']) or die(mysql_error()); mysql_query(\"set names \".$config['charset']) or die(mysql_error()); &#125; public function getResult($sql)&#123; $res = mysql_query($sql); $arr = array(); while($row = mysql_fetch_assoc($res))&#123; $arr[] = $row; &#125; return $arr; &#125; public function getDataByGrade($grade)&#123; $sql = \"select * from student where grade = \".$grade.\" order by score desc\"; $res = self::getResult($sql); return $res; &#125; &#125;?&gt; ä¸‹é¢æ˜¯æˆ‘ä»¬çš„ä¸»æ–‡ä»¶ï¼Œæˆ‘ä»¬æŠŠä¸Šé¢çš„æ–‡ä»¶éƒ½åŒ…å«è¿›æ¥ï¼Œè¿™é‡Œæ³¨æ„å› ä¸ºæˆ‘ä»¬åœ¨dbé‡Œå·²ç»requireäº†config.php,æ‰€ä»¥è¿™é‡Œä¸ç”¨å†åŒ…å«config.phpäº†ï¼Œæˆ–è€…æˆ‘ä»¬ç”¨require_onceä¹Ÿå¯ä»¥ã€‚123456789101112131415161718192021222324252627&lt;?php $dir = dirname(__FILE__); require $dir.\"/db.php\"; require $dir.\"/PHPExcel/PHPExcel.php\"; $db = new db($config); $objPHPExcel = new PHPExcel(); for ($i=1; $i &lt;= 3; $i++) &#123; if($i&gt;1)&#123; $objPHPExcel-&gt;createSheet(); &#125; $objPHPExcel-&gt;setActiveSheetIndex($i-1); $objSheet = $objPHPExcel-&gt;getActiveSheet(); $objSheet-&gt;setTitle($i.\"å¹´çº§\"); $data = $db-&gt;getDataByGrade($i); $objSheet-&gt;setCellValue(\"A1\",\"å§“å\")-&gt;setCellValue(\"B1\",\"å¹´çº§\")-&gt;setCellValue(\"C1\",\"æˆç»©\"); $j=2; foreach ($data as $key =&gt; $value) &#123; $objSheet-&gt;setCellValue(\"A\".$j,$value['name'])-&gt;setCellValue(\"B\".$j,$value['grade'])-&gt;setCellValue(\"C\".$j,$value['name']); $j++; &#125; &#125; $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel,'Excel5'); $objWriter-&gt;save($dir.\"/export_1.xls\");?&gt; ä¸»è¦çš„æ€è·¯å°±æ˜¯æˆ‘ä»¬æŒ‰ç…§å…ˆå‰æˆ‘ä»¬çš„æ­¥éª¤æ–°å»ºè¡¨ï¼Œåˆ›å»ºsheet,è¿™é‡Œä¸åŒçš„æ˜¯ï¼Œæˆ‘ä»¬è¦æŠŠä¸‰ä¸ªå¹´çº§çš„æ”¾åˆ°ä¸åŒçš„sheeté‡Œï¼Œæ‰€ä»¥ä¸èƒ½åªcreateä¸€ä¸ªsheet,è¦æ ¹æ®gradeæœ‰å¤šå°‘ä¸ªå¾ªç¯åˆ›å»ºï¼Œå¹¶ä¸”æŠŠç›¸åº”çš„æ•°æ®æ”¾è¿›å»ã€‚ å°†excelè¾“å‡ºåˆ°æµè§ˆå™¨æˆ‘ä»¬ä¹Ÿå¯ä»¥å§excelä¿å­˜åˆ°æµè§ˆå™¨ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬åªç”¨æ”¹åŠ¨ä¸€ç‚¹ä»£ç å°±è¡Œäº†ï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘ä»¬è®¾ç½®headerå¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨ç”Ÿæˆçš„ç±»å‹ã€‚æ³¨æ„è¿™é‡Œsaveæ–¹æ³•å‘ç”Ÿäº†å˜åŒ–çš„ã€‚123456789101112131415161718192021222324252627282930313233343536373839&lt;?php $dir = dirname(__FILE__); require $dir.\"/db.php\"; require $dir.\"/PHPExcel/PHPExcel.php\"; $db = new db($config); $objPHPExcel = new PHPExcel(); for ($i=1; $i &lt;= 3; $i++) &#123; if($i&gt;1)&#123; $objPHPExcel-&gt;createSheet(); &#125; $objPHPExcel-&gt;setActiveSheetIndex($i-1); $objSheet = $objPHPExcel-&gt;getActiveSheet(); $objSheet-&gt;setTitle($i.\"å¹´çº§\"); $data = $db-&gt;getDataByGrade($i); $objSheet-&gt;setCellValue(\"A1\",\"å§“å\")-&gt;setCellValue(\"B1\",\"å¹´çº§\")-&gt;setCellValue(\"C1\",\"æˆç»©\"); $j=2; foreach ($data as $key =&gt; $value) &#123; $objSheet-&gt;setCellValue(\"A\".$j,$value['name'])-&gt;setCellValue(\"B\".$j,$value['grade'])-&gt;setCellValue(\"C\".$j,$value['name']); $j++; &#125; &#125; $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel,'Excel5'); //$objWriter-&gt;save($dir.\"/export_1.xls\"); browser_export(\"Excel5\",'browser_export01.xls'); $objWriter-&gt;save(\"php://output\"); function browser_export($type,$filename)&#123; if($type==\"Excel5\")&#123; header('Content-Type: application/vnd.ms-excel');//å‘Šè¯‰æµè§ˆå™¨å°†è¦è¾“å‡ºexcel03æ–‡ä»¶ &#125;else&#123; header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');//å‘Šè¯‰æµè§ˆå™¨æ•°æ®excel07æ–‡ä»¶ &#125; header('Content-Disposition: attachment;filename=\"'.$filename.'\"');//å‘Šè¯‰æµè§ˆå™¨å°†è¾“å‡ºæ–‡ä»¶çš„åç§° header('Cache-Control: max-age=0');//ç¦æ­¢ç¼“å­˜ &#125;?&gt; å¦‚æœä¸å‘Šè¯‰æµè§ˆå™¨åç§°çš„è¯ï¼Œå°±ä¼šæŠŠå½“å‰æ–‡æœ¬çš„åç§°å½“æˆè¾“å‡ºexcelçš„åç§°ã€‚headerå°±æ˜¯å‘Šè¯‰æµè§ˆå™¨æ–‡ä»¶ç±»å‹ã€‚å¿…é¡»æœ‰ã€‚ æœ€åçš„ç»“æœï¼Œå°±æ˜¯æˆ‘ä¸€åˆ·æ–°å°±å‡ºæ¥äº†ä¸‹è½½è¿™ä¸ªï¼š æ€»ç»“è¿™ä¸ªè¿˜æœ‰å¾ˆå¤šæ–¹æ³•æˆ‘æ²¡æœ‰å†™åˆ°ï¼Œæ¯”å¦‚æˆ‘ä»¬æ€ä¹ˆæ ·è®¾ç½®å±…ä¸­ï¼Œæ€ä¹ˆæ ·æ·»åŠ çº¿æ€§è¡¨ï¼Œæ€ä¹ˆæ ·å¯¼å…¥Excelè¡¨ï¼Œè¿™ä¸ªæˆ‘ä¼šå›å¤´æœ‰æ—¶é—´å†å†™ä¸€ç¯‡åšå®¢çš„ã€‚è¿˜æœ‰å¾ˆå¤šè®¾ç½®æ ·å¼çš„ï¼Œæˆ‘ä»¬å…¶å®è¦åšçš„å°±æ˜¯è°ƒç”¨å®ƒçš„æ¥å£å°±è¡Œã€‚å› ä¸ºè¿™æ ·çš„ä¸œè¥¿æˆ‘è§‰å¾—ä¸æ˜¯ç»å¸¸ç”¨å°±ä¼šå¿˜ï¼Œæ‰€ä»¥åšä¸€æ¬¡å¤§æ¦‚çŸ¥é“æ˜¯ä»€ä¹ˆæ€è·¯å’Œæ ·å­å°±è¡Œäº†ï¼Œä»¥åè¦ç”¨çš„æ—¶å€™å†æŸ¥ä¸€æŸ¥æ–‡æ¡£ï¼Œçœ‹çœ‹ä»¥å‰åšçš„ä¾‹å­ï¼Œåº”è¯¥èƒ½å¾ˆå¿«å°±æƒ³èµ·æ¥çš„ï¼Œé‚£äº›å‡½æ•°çš„è°ƒç”¨ä¹Ÿæ²¡æœ‰å¤ªå¤§çš„å¿…è¦è®°ä½ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"PHP","slug":"PHP","permalink":"http://sevencai.github.io/tags/PHP/"}]},{"title":"Workerman-chatå­¦ä¹ ä¹‹è·¯ä¸€ï¼ˆåŸºæœ¬æ¦‚å¿µäº†è§£ï¼‰","slug":"Workerman-chatå­¦ä¹ ä¹‹è·¯ä¸€ï¼ˆåŸºæœ¬æ¦‚å¿µäº†è§£ï¼‰","date":"2016-04-10T14:46:05.000Z","updated":"2016-12-12T03:01:22.000Z","comments":true,"path":"2016/04/10/Workerman-chatå­¦ä¹ ä¹‹è·¯ä¸€ï¼ˆåŸºæœ¬æ¦‚å¿µäº†è§£ï¼‰/","link":"","permalink":"http://sevencai.github.io/2016/04/10/Workerman-chatå­¦ä¹ ä¹‹è·¯ä¸€ï¼ˆåŸºæœ¬æ¦‚å¿µäº†è§£ï¼‰/","excerpt":"","text":"å› ä¸ºé¡¹ç›®éœ€æ±‚ï¼Œè¦å­¦ä¹ workermanæ¡†æ¶ï¼Œä¸‹é¢æ˜¯æˆ‘çš„ç¬”è®°å’Œç†è§£ã€‚ä¸»è¦æ˜¯ç”¨çš„å®ƒçš„workerman-chatã€‚workerman-chatåŸºäºGatewayWorker,GatewayWorkeråŸºäºworkermanã€‚æ„Ÿè§‰å†™è¿™ä¸ªäººå¥½å‰å®³å•Šã€‚çº¯PHPå†™çš„ã€‚ å…ˆçœ‹çœ‹å‡ ä¸ªä¹‹é—´çš„å…³ç³»ä¸‹é¢æ˜¯å…·ä½“çš„è§£é‡Šã€‚å®˜ç½‘ä¸Šæœ‰ï¼Œæ­¤å¤„åšè®°å½•ï¼Œå¹¶é™„æœ‰å›¾ç‰‡æ–¹ä¾¿ç†è§£ã€‚ ä»€ä¹ˆæ˜¯workerman? Workermanæ˜¯ä¸€æ¬¾çº¯PHPå¼€å‘çš„å¼€æºé«˜æ€§èƒ½çš„PHP socket æœåŠ¡å™¨æ¡†æ¶ã€‚è¢«å¹¿æ³›çš„ç”¨äºæ‰‹æœºappã€æ‰‹æ¸¸æœåŠ¡ç«¯ã€ç½‘ç»œæ¸¸æˆæœåŠ¡å™¨ã€èŠå¤©å®¤æœåŠ¡å™¨ã€ç¡¬ä»¶é€šè®¯æœåŠ¡å™¨ã€æ™ºèƒ½å®¶å±…ã€è½¦è”ç½‘ã€ç‰©è”ç½‘ç­‰é¢†åŸŸçš„å¼€å‘ã€‚ æ”¯æŒTCPé•¿è¿æ¥ï¼Œæ”¯æŒWebsocketã€HTTPç­‰åè®®ï¼Œæ”¯æŒè‡ªå®šä¹‰åè®®ã€‚åŸºäºworkermanå¼€å‘è€…å¯ä»¥æ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å¼€å‘ï¼Œä¸å¿…å†ä¸ºPHP Socketåº•å±‚å¼€å‘è€Œçƒ¦æ¼ã€‚ çº¯PHPå¼€å‘ï¼Œå¤šè¿›ç¨‹æ”¯æŒï¼Œæ”¯æŒhhvm æ”¯æŒTCP/UDPï¼Œå•æœºå¯æ”¯æŒæ•°ç™¾ä¸‡ä»¥ä¸ŠTCPé•¿è¿æ¥ æ”¯æŒåˆ†å¸ƒå¼ï¼Œé›†ç¾¤èƒ½æ”¯æŒæ•°ç™¾ä¸‡ç”šè‡³æ›´é«˜çš„å¹¶å‘TCPè¿æ¥ æ”¯æŒlibeventäº‹ä»¶è§¦å‘ç½‘ç»œåº“ æ”¯æŒçƒ­æ›´æ–°åŠæœåŠ¡å™¨å¹³æ»‘é‡å¯ æ”¯æŒå®ˆæŠ¤è¿›ç¨‹åŒ–å’Œç»Ÿè®¡ç›‘æ§æ¨¡å— ä»€ä¹ˆæ˜¯GatewayWorkerGatewayWorkeråŸºäºWorkermanå¼€å‘çš„ä¸€ä¸ªé¡¹ç›®ï¼Œç”¨äºå¿«é€Ÿå¼€å‘é•¿è¿æ¥åº”ç”¨ï¼Œä¾‹å¦‚ç§»åŠ¨é€šè®¯ã€ç‰©è”ç½‘ã€æ¸¸æˆæœåŠ¡ç«¯ã€èŠå¤©å®¤ç­‰ç­‰ã€‚ GatewayWorkerè¿›ç¨‹æ¨¡å‹GatewayWorkeråˆ†ä¸ºGatewayè¿›ç¨‹å’ŒWorkerè¿›ç¨‹å’Œregisteræ³¨å†ŒæœåŠ¡è¿›ç¨‹ï¼ŒGatewayè¿›ç¨‹ç»´æŒç€å®¢æˆ·ç«¯çš„è¿æ¥å¹¶è½¬å‘è¿æ¥ä¸Šå‘æ¥çš„æ•°æ®ç»™Workerè¿›ç¨‹å¤„ç†ï¼›Workerè¿›ç¨‹åªè´Ÿè´£å¤„ç†è½¬å‘æ¥çš„å®¢æˆ·ç«¯æ•°æ®ï¼Œå¹¶é€šè¿‡Gatewayè¿›ç¨‹æ¨é€æ•°æ®ç»™ä»»æ„å®¢æˆ·ç«¯ã€‚registeræ³¨å†ŒæœåŠ¡è¿›ç¨‹è´Ÿè´£æ³¨å†Œé€šçŸ¥Gatewayè¿›ç¨‹å’ŒWorkerè¿›ç¨‹ä¹‹é—´çš„é€šè®¯åœ°å€ã€‚ä¸»è¦æ˜¯è¦çŸ¥é“Gatewayè¿›ç¨‹å’ŒWorkerè¿›ç¨‹è´Ÿè´£çš„ä¸œè¥¿ï¼ŒGatewayåªæ˜¯è´Ÿè´£ç½‘ç»œIO,å¹¶ä¸”æ˜¯éé˜»å¡çš„ï¼ŒWorkeråªè´Ÿè´£å¤„ç†ä¸šåŠ¡æ•°æ®è¿™äº›ã€‚å…¶é€šä¿¡åè®®æ˜¯å¼€æ”¾çš„ï¼Œå¯å®šåˆ¶çš„ï¼Œå› æ­¤æˆ‘ä»¬æ˜¯å¯ä»¥è®¾ç½®ä½¿ç”¨ä»»ä½•åè®®æ¥å®Œæˆä¸å®¢æˆ·ç«¯çš„é€šä¿¡çš„ã€‚æˆ‘ä»¬å†å¼€å‘å®¢æˆ·ç«¯çš„æ—¶å€™ï¼Œå°±å¯ä»¥æ ¹æ®æˆ‘ä»¬è®¾ç½®çš„è¿™ä¸ªåè®®æ¥å®Œæˆä¸æœåŠ¡å™¨çš„é€šä¿¡ã€‚ workerman-chatèŠå¤©å®¤æ¡†æ¶è¿™ä¸ªæ˜¯æˆ‘ä¸»è¦è¦ç”¨åˆ°çš„å…¶ä¸­çš„ä¸€ä¸ªå®ç°æ¡†æ¶ï¼Œå®ƒåŸºäºworkermanä½œä¸ºæœåŠ¡å™¨å®¹å™¨ï¼Œä½¿ç”¨PHPå¼€å‘ï¼ŒåŸºäºWebsocket,é‡‡ç”¨gateway workersè¿›ç¨‹æ¨¡å‹ã€‚ åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­gatewayåªè´Ÿè´£IO,å…¨å¼‚æ­¥éé˜»å¡ã€‚æ¯ä¸ªgatewayè¿›ç¨‹å¯ä»¥ä¸ä¸Šåƒä¸‡å®¢æˆ·ç«¯è¿æ¥ã€‚workersæ˜¯åŒæ­¥æ¨¡å‹ï¼Œå¹¶æä¾›äº†å¼€å‘è€…åŸºæœ¬çš„æ¥å£ onConnectã€onMessageã€onCloseã€sendToClientã€sendToAllç­‰æ–¹æ³•ã€‚ å¼€å‘è€…åªè¦åœ¨onConnectã€onMessageã€onCloseä¸‰ä¸ªæ–¹æ³•ä¸­æ·»åŠ ä¸Šè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘å³å¯ï¼Œå¼€å‘ç»´æŠ¤éå¸¸ç®€å•ã€‚ ç”±äºé‡‡ç”¨çš„æ˜¯gateway workers è¿›ç¨‹æ¨¡å‹ï¼Œgatewayå’Œworkersä¹‹é—´æ˜¯æ— çŠ¶æ€çš„ï¼Œgatewayå’Œworkerså¯ä»¥åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„ç‰©ç†æœºä¸Šï¼Œæ‰€ä»¥æ‰©å®¹å’Œå‡çº§éƒ½éå¸¸æ–¹ä¾¿ã€‚ workerman-chatä¹Ÿéå¸¸é€‚åˆæ¸¸æˆåå°å¼€å‘ã€‚ æ˜å¤©å†™å…·ä½“çš„ç”¨æ³•å’Œæ¡†æ¶ç»“æ„ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"PHP","slug":"PHP","permalink":"http://sevencai.github.io/tags/PHP/"}]},{"title":"å­¦ä¹ HTML5 API ï¼ˆpushState/replaceStateï¼‰","slug":"å­¦ä¹ HTML5-API-ï¼ˆpushState-replaceStateï¼‰","date":"2016-04-02T13:20:26.000Z","updated":"2016-12-12T03:01:54.000Z","comments":true,"path":"2016/04/02/å­¦ä¹ HTML5-API-ï¼ˆpushState-replaceStateï¼‰/","link":"","permalink":"http://sevencai.github.io/2016/04/02/å­¦ä¹ HTML5-API-ï¼ˆpushState-replaceStateï¼‰/","excerpt":"","text":"ajaxå¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œæˆ‘ä»¬çŸ¥é“ajaxä¼šæœ‰ä¸€äº›å¼Šç«¯ï¼ŒH5å‡ºæ¥äº†ä¸¤ä¸ªæ–°çš„APIå«åšpushStateå’ŒreplaceStateï¼Œè¿™ä¸¤ä¸ªå¯ä»¥å¾ˆå¥½çš„è§£å†³ajaxä¸èƒ½å†å²è¿”å›çš„é—®é¢˜ã€‚å…ˆæ¨èä¸€ä¸ªåšå®¢ï¼Œæ¨èçš„åŸå› æ˜¯è¦çŸ¥å…¶æ‰€ä»¥ç„¶ï¼ŒçŸ¥é“å†å²æ‰èƒ½å¤Ÿæ›´å¥½çš„ç†è§£ã€‚ä¸‹é¢æ˜¯æˆ‘çš„æ•´ç†ï¼Œç”±äºæ˜¯è‡ªå·±çš„æ•´ç†ï¼Œæ‰€ä»¥å¾ˆå¤šæ— å…³è¿™ä¸¤ä¸ªAPIçš„ï¼Œå¯ä»¥ç›´æ¥å¿½ç•¥ï¼Œè·³è¿‡ç›´æ¥çœ‹åé¢é‡ç‚¹éƒ¨åˆ†å’Œdemoã€‚ã€‚ å‰è¨€-ajaxä¸ä¼ ç»Ÿwebåº”ç”¨çš„æ¯”è¾ƒç®€å•æ¥è¯´ï¼šç¬¬ä¸€ï¼šæ˜¯å±€éƒ¨åˆ·æ–°ï¼Œä¼ ç»Ÿwebåº”ç”¨è¦è¯·æ±‚å¹¶é‡æ–°è¯»å–ä¸€ä¸ªæ•´ä¸ªé¡µé¢ã€‚ç¬¬äºŒï¼šä»…ä»…å‘æœåŠ¡å™¨å‘é€å¹¶å–å›å¿…è¦çš„æ•°æ®ï¼Œä¸ä¼šåƒä¼ ç»Ÿçš„webåº”ç”¨ä¸€æ ·æµªè´¹å¾ˆå¤šå¸¦å®½ã€‚ç¬¬ä¸‰ï¼šå‡å°‘äº†æ•°æ®äº¤æ¢ï¼Œå‡å°‘äº†å“åº”æ—¶é—´,å“åº”çš„æ›´å¿«ã€‚ ç”¨æˆ·ä½“éªŒå¥½ï¼Œç”¨æˆ·ä½“éªŒå¥½ï¼Œç”¨æˆ·ä½“éªŒå¥½ ä¼ ç»Ÿçš„Webåº”ç”¨äº¤äº’ç”±ç”¨æˆ·è§¦å‘ä¸€ä¸ªHTTPè¯·æ±‚åˆ°æœåŠ¡å™¨,æœåŠ¡å™¨å¯¹å…¶è¿›è¡Œå¤„ç†åå†è¿”å›ä¸€ä¸ªæ–°çš„HTHLé¡µåˆ°å®¢æˆ·ç«¯, æ¯å½“æœåŠ¡å™¨å¤„ç†å®¢æˆ·ç«¯æäº¤çš„è¯·æ±‚æ—¶,å®¢æˆ·éƒ½åªèƒ½ç©ºé—²ç­‰å¾…,å¹¶ä¸”å“ªæ€•åªæ˜¯ä¸€æ¬¡å¾ˆå°çš„äº¤äº’ã€åªéœ€ä»æœåŠ¡å™¨ç«¯å¾—åˆ°å¾ˆç®€å•çš„ä¸€ä¸ªæ•°æ®,éƒ½è¦è¿”å›ä¸€ä¸ªå®Œæ•´çš„HTMLé¡µ,è€Œç”¨æˆ·æ¯æ¬¡éƒ½è¦æµªè´¹æ—¶é—´å’Œå¸¦å®½å»é‡æ–°è¯»å–æ•´ä¸ªé¡µé¢ã€‚è¿™ä¸ªåšæ³•æµªè´¹äº†è®¸å¤šå¸¦å®½ï¼Œç”±äºæ¯æ¬¡åº”ç”¨çš„äº¤äº’éƒ½éœ€è¦å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œåº”ç”¨çš„å“åº”æ—¶é—´å°±ä¾èµ–äºæœåŠ¡å™¨çš„å“åº”æ—¶é—´ã€‚è¿™å¯¼è‡´äº†ç”¨æˆ·ç•Œé¢çš„å“åº”æ¯”æœ¬åœ°åº”ç”¨æ…¢å¾—å¤šã€‚ä¸æ­¤ä¸åŒï¼ŒAJAXåº”ç”¨å¯ä»¥ä»…å‘æœåŠ¡å™¨å‘é€å¹¶å–å›å¿…éœ€çš„æ•°æ®ï¼Œå®ƒä½¿ç”¨SOAPæˆ–å…¶å®ƒä¸€äº›åŸºäºXMLçš„Web Serviceæ¥å£ï¼Œå¹¶åœ¨å®¢æˆ·ç«¯é‡‡ç”¨JavaScriptå¤„ç†æ¥è‡ªæœåŠ¡å™¨çš„å“åº”ã€‚å› ä¸ºåœ¨æœåŠ¡å™¨å’Œæµè§ˆå™¨ä¹‹é—´äº¤æ¢çš„æ•°æ®å¤§é‡å‡å°‘ï¼Œç»“æœæˆ‘ä»¬å°±èƒ½çœ‹åˆ°å“åº”æ›´å¿«çš„åº”ç”¨ã€‚åŒæ—¶å¾ˆå¤šçš„å¤„ç†å·¥ä½œå¯ä»¥åœ¨å‘å‡ºè¯·æ±‚çš„å®¢æˆ·ç«¯æœºå™¨ä¸Šå®Œæˆï¼Œæ‰€ä»¥WebæœåŠ¡å™¨çš„å¤„ç†æ—¶é—´ä¹Ÿå‡å°‘äº†ã€‚ ajaxçš„å·¥ä½œåŸç†Ajaxçš„å·¥ä½œåŸç†ç›¸å½“äºåœ¨ç”¨æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´åŠ äº†â€”ä¸ªä¸­é—´å±‚(AJAXå¼•æ“),ä½¿ç”¨æˆ·æ“ä½œä¸æœåŠ¡å™¨å“åº”å¼‚æ­¥åŒ–ã€‚å¹¶ä¸æ˜¯æ‰€æœ‰çš„ç”¨æˆ·è¯·æ±‚éƒ½æäº¤ç»™æœåŠ¡å™¨,åƒâ€”äº›æ•°æ®éªŒè¯å’Œæ•°æ®å¤„ç†ç­‰éƒ½äº¤ç»™Ajaxå¼•æ“è‡ªå·±æ¥åš, åªæœ‰ç¡®å®šéœ€è¦ä»æœåŠ¡å™¨è¯»å–æ–°æ•°æ®æ—¶å†ç”±Ajaxå¼•æ“ä»£ä¸ºå‘æœåŠ¡å™¨æäº¤è¯·æ±‚ã€‚ å…¶å®Ajaxä¸»è¦å°±æ˜¯é€šè¿‡XMLHttpRequestå¯¹è±¡æ¥å‘æœåŠ¡å™¨å‘é€å¼‚æ­¥è¯·æ±‚ï¼Œç„¶åä»æœåŠ¡å™¨ç«¯è·å¾—ç›¸åº”çš„æ•°æ®ï¼Œåˆ©ç”¨ç›¸åº”çš„æ•°æ®æ¥å±€éƒ¨æ›´æ–°ç›¸åº”çš„é¡µé¢ã€‚ ajaxçš„ç¼ºç‚¹å’Œä¼˜ç‚¹å’±ä»¬å…ˆè®²ä¼˜ç‚¹ï¼š æ— åˆ·æ–°æ›´æ–°æ•°æ®é¿å…ä¿®æ”¹äº†é‚£äº›ä¸éœ€è¦æ”¹å˜çš„ä¿¡æ¯ï¼Œä»è€Œå‡å°‘ç­‰å¾…æ—¶é—´ï¼Œç”¨æˆ·ä½“éªŒå¾ˆå¥½ã€‚ å¼‚æ­¥é€šä¿¡ä¸­é€”ä¸ä¼šé˜»æ­¢ç”¨æˆ·æ“ä½œï¼Œå…·æœ‰æ›´åŠ è¿…é€Ÿçš„å“åº”èƒ½åŠ›ã€‚ä¼˜åŒ–äº†b/sçš„æ²Ÿé€šã€‚ å‰åç«¯è´Ÿè½½å‡è¡¡ï¼Œåé¢çš„ajaxçš„å·¥ä½œåŸç†ä¼šè®²åˆ°ï¼Œajaxå¯ä»¥å§ä»¥å‰å¿…é¡»è¦æœåŠ¡å™¨æ‰¿æ‹…çš„å·¥ä½œç•™ç»™å®¢æˆ·ç«¯ã€‚åˆ©ç”¨å®¢æˆ·ç«¯é—²ç½®çš„èƒ½åŠ›æ¥å¤„ç†ï¼Œå‡è½»æœåŠ¡å™¨å’Œå¸¦å®½çš„è´Ÿæ‹…ï¼ŒèŠ‚çº¦ç©ºé—´å’Œå®½å¸¦ç§Ÿç”¨æˆæœ¬ã€‚å¹¶ä¸”å‡è½»æœåŠ¡å™¨çš„è´Ÿæ‹…ï¼Œajaxçš„åŸåˆ™æ˜¯â€œæŒ‰éœ€å–æ•°æ®â€ï¼Œå¯ä»¥æœ€å¤§ç¨‹åº¦çš„å‡å°‘å†—ä½™è¯·æ±‚ï¼Œå’Œå“åº”å¯¹æœåŠ¡å™¨é€ æˆçš„è´Ÿæ‹…ã€‚ åŸºäºæ ‡å‡†ï¼Œè¢«æ”¯æŒ æ•°æ®ä¸å‘ˆç°åˆ†ç¦»æœ‰åˆ©äºåˆ†å·¥åˆä½œã€‚å‡å°‘éæŠ€æœ¯äººå‘˜å¯¹webåº”ç”¨ç¨‹åºé”™è¯¯ã€‚ å†æ¥çœ‹çœ‹ç¼ºç‚¹ï¼š ajaxç ´åäº†æµè§ˆå™¨æœ¬èº«çš„æœºåˆ¶ï¼Œä¸èƒ½å¤Ÿæœ‰backå’Œhistoryçš„åŠŸèƒ½ã€‚ ajaxçš„å®‰å…¨é—®é¢˜ï¼Œè¿™ä½¿å¾—å¼€å‘è€…åœ¨ä¸ç»æ„é—´ä¼šæš´éœ²æ›´å¤šçš„æ•°æ®å’ŒæœåŠ¡å™¨é€»è¾‘ã€‚ajaxä¹Ÿéš¾ä»¥é¿å…ä¸€äº›ä¸€ç›´çš„å®‰å…¨å¼±ç‚¹ï¼Œsqlæ³¨å…¥ï¼Œxssç­‰ç­‰ã€‚ ç ´åç¨‹åºçš„å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼ˆè¿™ä¸€ç‚¹åœ¨æ€ä¹ˆç†è§£ï¼Ÿï¼‰ è¿èƒŒURLå’Œèµ„æºå®šä½çš„åˆè¡·ï¼Œä¾‹å¦‚ï¼Œæˆ‘ç»™ä½ ä¸€ä¸ªURLåœ°å€ï¼Œå¦‚æœé‡‡ç”¨äº†AjaxæŠ€æœ¯ï¼Œä¹Ÿè®¸ä½ åœ¨è¯¥URLåœ°å€ä¸‹é¢çœ‹åˆ°çš„å’Œæˆ‘åœ¨è¿™ä¸ªURLåœ°å€ä¸‹çœ‹åˆ°çš„å†…å®¹æ˜¯ä¸åŒçš„ã€‚è¿™ä¸ªå’Œèµ„æºå®šä½çš„åˆè¡·æ˜¯ç›¸èƒŒç¦»çš„ã€‚ å¯¹æœç´¢å¼•æ“æ”¯æŒè¾ƒå¼±ã€‚å¯¹æœç´¢å¼•æ“çš„æ”¯æŒæ¯”è¾ƒå¼±ã€‚å¦‚æœä½¿ç”¨ä¸å½“ï¼ŒAJAXä¼šå¢å¤§ç½‘ç»œæ•°æ®çš„æµé‡ï¼Œä»è€Œé™ä½æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½ã€‚ è¿˜æœ‰ä¸å®¹æ˜“è°ƒè¯•é‚£äº›é—®é¢˜ã€‚ é‡ç‚¹ï¼šæ€ä¹ˆè§£å†³ä¸èƒ½æœ‰backå’Œhistoryè¿™ä¸€é—®é¢˜ï¼Ÿå…ˆæ¥çœ‹çœ‹historyå¯¹è±¡ï¼š123456window.history.back();window.history.forward();window.history.go(-1);window.history.go(2);//é€šè¿‡æ£€æŸ¥æµè§ˆå™¨å†å²è®°å½•çš„lengthå±æ€§æ¥æ‰¾åˆ°å†å²è®°å½•å †æ ˆä¸­çš„é¡µé¢æ€»æ•°var num = window.history.length; H5å¼•å…¥äº†history.pushState(),history.replaceState()è¿™ä¸¤ä¸ªAPIï¼Œä»–ä»¬å…è®¸æ·»åŠ å’Œä¿®æ”¹historyå®ä½“ã€‚éœ€è¦å’Œwindow.onpopstateäº‹ä»¶ä¸€èµ·å·¥ä½œã€‚è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨æ¥ä¿®æ”¹referrerï¼Œå¯ä»¥è¢«ç”¨åœ¨ä¿®æ”¹çŠ¶æ€åè€Œä¸ºXMLHttpRequestå¯¹è±¡åˆ›å»ºçš„http headerä¸­ã€‚ pushStateå°±æ˜¯å‘historyæ·»åŠ å½“å‰é¡µé¢çš„è®°å½•ï¼ŒreplaceStateçš„å‚æ•°å’Œç”¨æ³•å’ŒpushStateç›¸åŒï¼ŒåŒºåˆ«åœ¨äºreplaceStateæ˜¯ç”¨äºä¿®æ”¹å½“å‰é¡µé¢åœ¨historyä¸­çš„è®°å½•ã€‚è¿™ä¸ªæˆ‘ä»¬åé¢ä¹Ÿä¼šåœ¨ä¾‹å­ä¸­ç”¨åˆ°ã€‚ å…¶å®pushStateå°±æ˜¯ä¸€ä¸ªå¾€å †æ ˆæ·»åŠ ä¸€æ¡å†å²è®°å½•ã€‚å¯ä»¥å½¢è±¡çš„ç†è§£æˆpushã€‚ pushState(data,title,[,url])ï¼šdataä¸ºä¸€ä¸ªå¯¹è±¡æˆ–è€…ä¸ºnull,å®ƒä¼šåœ¨è§¦å‘windowçš„popstateäº‹ä»¶æ—¶ï¼Œä½œä¸ºå‚æ•°çš„stateå±æ€§ä¼ é€’è¿‡å»ï¼Œtitleä¸ºé¡µé¢çš„æ ‡é¢˜ï¼Œç°åœ¨çš„æµè§ˆå™¨å¿½ç•¥æ‰äº†è¿™ä¸ªå‚æ•°ï¼Œæ‰€ä»¥å†™å•¥éƒ½æ²¡ç”¨ï¼Œurlä¸ºé¡µé¢çš„URLï¼Œå¦‚æœä¸å†™çš„è¯ï¼Œå°±æ˜¯å½“å‰é¡µäº†ã€‚ replaceState(data,title,[,url])ï¼šå‚æ•°æ—¶ç›¸åŒçš„ï¼Œè¿™ç§æ›´æ”¹ä¸ä¼šè®¿é—®è¯¥URLã€‚ä¹Ÿå°±æ˜¯ä¸ä¼šåˆ·æ–°ã€‚ä¼šè®©ç”¨æˆ·çœ‹åˆ°çš„urlå‘ç”Ÿå˜åŒ–ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦è®¿é—®è¯¥URLï¼Œè¿˜è¦å»æ‰‹åŠ¨çš„è§¦å‘ã€‚ replaceStateä¸ä¼šåœ¨window.historyé‡Œæ–°å¢å†å²è®°å½•ç‚¹ï¼Œå…¶æ•ˆæœç±»ä¼¼äºwindow.location.replace(url)ï¼Œéƒ½æ˜¯ä¸ä¼šåœ¨å†å²è®°å½•ç‚¹é‡Œæ–°å¢ä¸€ä¸ªè®°å½•ç‚¹çš„ã€‚å½“ä½ ä¸ºäº†å“åº”ç”¨æˆ·çš„æŸäº›æ“ä½œï¼Œè€Œè¦æ›´æ–°å½“å‰å†å²è®°å½•æ¡ç›®çš„çŠ¶æ€å¯¹è±¡æˆ–URLæ—¶ï¼Œä½¿ç”¨replaceState()æ–¹æ³•ä¼šç‰¹åˆ«åˆé€‚ã€‚ PJAXåˆšåˆšæˆ‘ä»¬å·²ç»è¯´åˆ°äº†é‚£ä¸¤ä¸ªAPI,æˆ‘ä»¬çš„PJAXå°±æ˜¯åŸºäºä¸Šé¢æ–°ç‰¹æ€§æ¥çš„ã€‚PJAXæ˜¯åˆ«äººå¼€å‘çš„ä¸€ä¸ªé¡¹ç›®ï¼Œåœ°å€æ˜¯ï¼šhttps://github.com/defunkt/jquery-pjaxã€‚ å®ƒä¸ä»…ä»…æ”¯æŒäº†å±€éƒ¨åˆ·æ–°è¿™ä¸€ç‰¹ç‚¹ï¼Œè€Œä¸”åœ¨åˆ·æ–°é¡µé¢çš„åŒæ—¶ï¼Œæµè§ˆå™¨åœ°å€æ ä¸Šé¢çš„åœ°å€æ˜¯ä¼šæ›´æ”¹çš„ï¼Œç”¨æµè§ˆå™¨å›é€€åŠŸèƒ½ä¹Ÿèƒ½å¤Ÿå›é€€å›å»ï¼Œæ­£å¸¸æˆ‘ä»¬ç”¨ajaxæ˜¯å®ç°ä¸äº†çš„ã€‚ã€‚ PJAXçš„åŸºæœ¬æ€è·¯æ˜¯ï¼Œå½“ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªé“¾æ¥ï¼Œé€šè¿‡ajaxæ›´æ–°é¡µé¢å˜åŒ–çš„éƒ¨åˆ†ï¼Œç„¶åä½¿ç”¨HTML5çš„pushStateä¿®æ”¹æµè§ˆå™¨çš„URLåœ°å€ï¼Œè¿™æ ·æœ‰æ•ˆåœ°é¿å…äº†æ•´ä¸ªé¡µé¢çš„é‡æ–°åŠ è½½ã€‚å¦‚æœæµè§ˆå™¨ä¸æ”¯æŒhistoryçš„ä¸¤ä¸ªæ–°APIæˆ–è€…JSè¢«ç¦ç”¨äº†ï¼Œé‚£è¿™ä¸ªé“¾æ¥å°±åªèƒ½è·³è½¬å¹¶é‡æ–°åˆ·æ–°æ•´ä¸ªé¡µé¢äº†ã€‚å’Œä¼ ç»Ÿçš„ajaxè®¾è®¡ç¨å¾®ä¸åŒï¼Œajaxé€šå¸¸æ˜¯ä»åå°è·å–JSONæ•°æ®ï¼Œç„¶åç”±å‰ç«¯è§£ææ¸²æŸ“ï¼Œè€ŒPJAXè¯·æ±‚çš„æ˜¯ä¸€ä¸ªåœ¨æœåŠ¡å™¨ä¸Šç”Ÿæˆå¥½çš„HTMLç¢ç‰‡ çœ‹çœ‹å¦‚æœæˆ‘ä»¬è‡ªå·±å†™æ˜¯æ€ä¹ˆæ ·åˆ©ç”¨è¿™ä¸¤ä¸ªAPIçš„ã€‚ å…ˆæ¥çœ‹ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­demoçš„åœ°å€æˆ‘æ”¾åœ¨äº†http://cailidan.cn/web/demo/testajaxè¿™é‡Œã€‚ä¸€ä¸ªå¾ˆç®€å•çš„phpæ–‡ä»¶ï¼Œé€šè¿‡æ¥æ”¶ä¸åŒçš„idï¼Œå¹¶ä¸”è¿”å›ä¸åŒçš„æ•°æ®ã€‚æ˜¾ç¤ºåˆ°textareaä¸Šã€‚ 12345678910111213141516&lt;?php $id = isset($_POST['id'])?$_POST['id']:1; switch($id)&#123; case 1: echo \"è¿™æ˜¯ä¸€ä¸ªajaxè¯·æ±‚---page1\"; break; case 2: echo \"è¿™æ˜¯ä¸€ä¸ªajaxè¯·æ±‚---page2\"; break; case 3: echo \"è¿™æ˜¯ä¸€ä¸ªajaxè¯·æ±‚---page3\"; break; default: echo \"default ajax\"; &#125;?&gt; ä¸‹é¢çš„ä¾‹å­æ˜¯è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹: å½“æˆ‘ä»¬è®¿é—®index.htmlçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨æ˜¾ç¤ºæˆhttp://localhost:801/testajax/index.html?page=1,åŸå› å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨äº†ç”¨history.replaceStateæ›´æ”¹å½“å‰çš„æµè§ˆå™¨å†å²;å¹¶ä¸”åœ¨textareaéƒ¨åˆ†æ˜¾ç¤ºè¿™æ˜¯ä¸€ä¸ªajaxè¯·æ±‚---page1 å½“æˆ‘ä»¬ç‚¹å‡»æ¯ä¸€ä¸ªliçš„æ—¶å€™ï¼Œå¯¹åº”çš„textareaä¼šå‘ç”Ÿå˜åŒ–ï¼Œè¿™æ²¡æœ‰ä»€ä¹ˆæ–°å¥‡çš„ï¼Œä½†å½“æˆ‘ä»¬çœ‹æµè§ˆå™¨çš„URLï¼Œå‘ç°å¯¹åº”çš„urlä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ï¼Œå¦‚http://localhost:801/testajax/index.html?page=2è¿™ä¸ªæ˜¯æˆ‘ä»¬åˆ©ç”¨replaceStateæ¥åšåˆ°çš„ã€‚ ç„¶åæˆ‘ä»¬è¯•ä¸€ä¸‹ç‚¹å‡»å›é€€ï¼Œå‘ç°æ˜¯å¯ä»¥å›åˆ°ä¸Šä¸€çº§å“’ã€‚æ˜¯ä¸æ˜¯å¾ˆæ£’å‘¢ï¼Ÿ æˆ‘ä»¬çš„æ€è·¯æ˜¯ï¼Œå…ˆç»™æ¯ä¸ªliç»‘å®šä¸€ä¸ªäº‹ä»¶ï¼Œç„¶åå½“æˆ‘ä»¬ç‚¹å‡»è¿™ä¸ªliçš„æ—¶å€™ï¼Œè°ƒç”¨ajaxï¼Œå¹¶æŠŠå½“å‰çš„urlæ‹¼å‡‘åpushStateã€‚å½“æˆ‘ä»¬é¦–æ¬¡è®¿é—®çš„æ—¶å€™query=undefined,æˆ‘ä»¬è·å–åˆ°undefinedåï¼Œå°±é»˜è®¤æ˜¯ç¬¬ä¸€ä¸ªï¼Œæ­¤æ—¶æˆ‘ä»¬åˆ©ç”¨replaceStateæ”¹å˜çŠ¶æ€æ çš„ä¿¡æ¯ã€‚è‹¥çŠ¶æ€æ çš„queryæœ‰å€¼ã€‚ï¼Œåˆ™åˆ¤æ–­queryå¯¹åº”çš„liæ˜¯å“ªä¸ªã€‚å¦‚æœæ‰¾åˆ°äº†è¯¥liï¼Œè§¦å‘å…¶clickäº‹ä»¶ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œè¯æ˜queryä¼ å‚é”™è¯¯ã€‚ç„¶åé»˜è®¤å»è§¦å‘ç¬¬ä¸€ä¸ªã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;æµ‹è¯•pjax&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;ul id=\"list\"&gt; &lt;li&gt;&lt;a href=\"test.php?page=1\" data-id=\"1\"&gt;page1&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"test.php?page=2\" data-id=\"2\"&gt;page2&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"test.php?page=3\" data-id=\"3\"&gt;page3&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"test.php?page=4\" data-id=\"4\"&gt;page4&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;textarea name=\"\" id=\"textarea\" cols=\"30\" rows=\"10\"&gt; &lt;/textarea&gt; &lt;script src=\"./jquery-1.12.0.min.js\"&gt;&lt;/script&gt; &lt;script&gt; $(document).ready(function()&#123; var list = $(\"#list a\").bind(\"click\",function(e)&#123; var id = $(e.target).attr('href').split('?')[1].split(\"=\")[1]; var query = this.href.split(\"?\")[1]; //è°ƒç”¨ajax,è¿”å›ç›¸åº”çš„å€¼å…¥textarea if(history.pushState &amp;&amp; query)&#123; $.ajax(&#123; type:\"POST\", data:&#123;id:id&#125;, url:\"test.php\", success:function(data)&#123; $(\"#textarea\").html(data); &#125; &#125;) var title = \"æµ‹è¯•page\"+$(this).text(); document.title = title; if(e)&#123; history.pushState(&#123;title:title&#125;,title,location.href.split('?')[0]+\"?\"+query); &#125; &#125; return false; &#125;); var trigger = function(target)&#123; var query = location.href.split(\"?\")[1]; var target = target || null; //å¼€å§‹æ—¶queryä¸ºç©ºï¼Œå°±è®©targetä¸ºç¬¬ä¸€ä¸ªlié€‰é¡¹ if(typeof query == \"undefined\")&#123; target = list[0]; //æŠŠurlçŠ¶æ€æ ä¸­çš„å†…å®¹æ˜¾ç¤ºä¸ºå¦‚http://localhost:801/testajax/index.html?page=1 history.replaceState(null, document.title, location.href.split(\"#\")[0] + \"?\" + target.href.split(\"?\")[1]) + location.hash; trigger(target); &#125;else&#123; //å¦‚æœå·²ç»æœ‰queryäº†ï¼Œè·å–é‡Œé¢çš„queryå€¼æ‰¾åˆ°å¯¹åº”çš„li,å¹¶è®¾ç½®targetä¸ºç›¸åº”çš„li list.each(function()&#123; if(target === null &amp;&amp; this.href.split(\"?\")[1] === query)&#123; target = this; &#125; &#125;); //å¦‚æœä¸Šé¢targetæ²¡æœ‰èµ‹å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´queryæ‰¾ä¸åˆ°å¯¹åº”çš„liï¼Œè¯æ˜queryä¸å­˜åœ¨ç›¸åº”çš„è®°å½• //æ­¤æ—¶å°±è®¾ç½®ä¸ºå¦‚http://localhost:801/testajax/index.html //å¦‚æœtargetæœ‰å€¼ï¼Œåˆ™è§¦å‘clickäº‹ä»¶ï¼Œè°ƒç”¨ajax. if(!target)&#123; history.replaceState(null,document.title,location.href.split('?')[0]); trigger(); &#125;else&#123; $(target).trigger(\"click\"); &#125; &#125; &#125; if(history.pushState)&#123; trigger(); //æ¯æ¬¡æµè§ˆå™¨å‰è¿›æˆ–è€…åé€€çš„æ—¶å€™è§¦å‘ $(window).bind(\"popstate\",function()&#123; trigger(); &#125;); &#125; &#125;) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; é¡ºä¾¿è®°å½•å‡ ä¸ªXMLHttpRequestçš„å±æ€§onreadystatechange æ¯æ¬¡çŠ¶æ€æ”¹å˜æ‰€è§¦å‘äº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚ responseText ä»æœåŠ¡å™¨è¿›ç¨‹è¿”å›æ•°æ®çš„å­—ç¬¦ä¸²å½¢å¼ã€‚ responseXML ä»æœåŠ¡å™¨è¿›ç¨‹è¿”å›çš„DOMå…¼å®¹çš„æ–‡æ¡£æ•°æ®å¯¹è±¡ã€‚ status ä»æœåŠ¡å™¨è¿”å›çš„æ•°å­—ä»£ç ï¼Œæ¯”å¦‚å¸¸è§çš„404ï¼ˆæœªæ‰¾åˆ°ï¼‰å’Œ200ï¼ˆå·²å°±ç»ªï¼‰ status Text ä¼´éšçŠ¶æ€ç çš„å­—ç¬¦ä¸²ä¿¡æ¯ readyState å¯¹è±¡çŠ¶æ€å€¼ 0 (æœªåˆå§‹åŒ–) å¯¹è±¡å·²å»ºç«‹ï¼Œä½†æ˜¯å°šæœªåˆå§‹åŒ–ï¼ˆå°šæœªè°ƒç”¨openæ–¹æ³•ï¼‰ 1 (åˆå§‹åŒ–) å¯¹è±¡å·²å»ºç«‹ï¼Œå°šæœªè°ƒç”¨sendæ–¹æ³• 2 (å‘é€æ•°æ®) sendæ–¹æ³•å·²è°ƒç”¨ï¼Œä½†æ˜¯å½“å‰çš„çŠ¶æ€åŠhttpå¤´æœªçŸ¥ 3 (æ•°æ®ä¼ é€ä¸­) å·²æ¥æ”¶éƒ¨åˆ†æ•°æ®ï¼Œå› ä¸ºå“åº”åŠhttpå¤´ä¸å…¨ï¼Œè¿™æ—¶é€šè¿‡responseBodyå’ŒresponseTextè·å–éƒ¨åˆ†æ•°æ®ä¼šå‡ºç°é”™è¯¯ï¼Œ 4 (å®Œæˆ) æ•°æ®æ¥æ”¶å®Œæ¯•,æ­¤æ—¶å¯ä»¥é€šè¿‡é€šè¿‡responseXmlå’ŒresponseTextè·å–å®Œæ•´çš„å›åº”æ•°æ®ã€‚ æ€»ç»“æ„Ÿè°¢osChinaå’Œå¼ é‘«æ—­çš„è¿™ç¯‡æ–‡ç« ã€‚äº†è§£äº†H5æ–°çš„API,ä¹Ÿå¤§è‡´çš„çŸ¥é“æ˜¯æ€ä¹ˆç”¨çš„äº†ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"å¦‚æœæƒ³ç”¨scriptåšè‡ªå·±çš„ç½‘åï¼Ÿ","slug":"å¦‚æœæƒ³ç”¨scriptåšè‡ªå·±çš„ç½‘åï¼Ÿ","date":"2016-03-31T14:46:54.000Z","updated":"2016-12-12T03:01:52.000Z","comments":true,"path":"2016/03/31/å¦‚æœæƒ³ç”¨scriptåšè‡ªå·±çš„ç½‘åï¼Ÿ/","link":"","permalink":"http://sevencai.github.io/2016/03/31/å¦‚æœæƒ³ç”¨scriptåšè‡ªå·±çš„ç½‘åï¼Ÿ/","excerpt":"","text":"æ€è€ƒè¿™æ ·ä¸€ä¸ªé¢˜ç›®ï¼Œæœ‰ä¸€ä¸ªäººä»–æƒ³æ³¨å†Œä¸€ä¸ªç½‘åå«åš&lt;script&gt;alert(1);&lt;/script&gt;ã€‚æ€ä¹ˆæ ·å®ç°å‘¢ï¼Ÿä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨æ³¨å†Œç™»é™†æˆ–è€…è¯„è®ºæˆ–ä¸ç”¨æˆ·æœ‰æ•°æ®äº¤äº’çš„æ—¶å€™ï¼Œéƒ½æ˜¯ä¼šæŠŠè¿™äº›ç»™è¿‡æ»¤æ‰çš„ï¼Œå½“æˆ‘ä»¬ä¸å…è®¸ç”¨æˆ·è¿™ä¹ˆåšçš„æ—¶å€™ï¼Œæ˜¯ä¸ºäº†å¯ä»¥é˜²æ­¢éƒ¨åˆ†xssã€‚ä½†å¦‚æœç½‘ç«™å…è®¸è¿™ä¹ˆå«ï¼Œé‚£æ€ä¹ˆå®ç°å‘¢ï¼Ÿä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æ—¢è¦è¾“å‡ºç›¸åº”çš„æ ‡ç­¾ï¼Œåˆè¦é˜²æ­¢xssã€‚ã€‚ Webæ˜¯ä¸€ä¸ªé›†ä¼—å¤šä¸åŒç¯å¢ƒåŒæ—¶å¼€å‘çš„å¹³å°ï¼Œæˆ‘ä»¬ç»å¸¸è¦å¤¸å¹³å°ä¼ è¾“æ•°æ®ã€‚æ¯”å¦‚å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„é€šä¿¡å°±æ˜¯åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿™ä¸¤ä¸ªä¸åŒçš„ç¯å¢ƒä¸Šä¼ è¾“æ•°æ®ã€‚å¦‚æœæˆ‘ä»¬ä¼ è¾“çš„æ•°æ®æ²¡ç»è¿‡è¿‡æ»¤å°±æœ‰å¯èƒ½åœ¨å„ç§ç¯èŠ‚è¢«æ³¨å…¥æ”»å‡»ï¼Œæ‰€ä»¥åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„å­—ç¬¦è½¬ä¹‰æ˜¯å¾ˆé‡è¦çš„ã€‚ å…ˆçœ‹çœ‹æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜æ–¹æ³•ä¸€-è‡ªå®šä¹‰è½¬ä¹‰åè¾“å‡º1234567891011121314&lt;div id=\"box2\"&gt; &lt;pre&gt; &lt;a href=\"\"&gt;baidu&lt;/a&gt; &lt;/pre&gt; &lt;pre&gt; &amp;nbsp;&amp;lt;a&amp;gt;alert('1');&lt;/a&gt; afdfs adsfas fdsfafdasf dafdsS &lt;/pre&gt; &amp;nbsp;&amp;lt;a&amp;gt;alert('1');&lt;/a&gt; afdfs ttttt &lt;/div&gt; å¤§å®¶çŒœçŒœä¸Šé¢è¿™ä¼šè¾“å‡ºä¸€ç§ä»€ä¹ˆæ ·çš„æ•ˆæœï¼šæ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„htmlæ ‡ç­¾å¦‚æœç›´æ¥è¾“å‡ºçš„è¯ï¼Œæ˜¯ä¸å¯èƒ½æ˜¾ç¤ºå‡ºæ¥çš„ï¼Œé‚£äº›æ ‡ç­¾éƒ½æ˜¯ç»è¿‡æµè§ˆå™¨è§£æç„¶åæ˜¾ç¤ºåˆ°é¡µé¢ä¸Šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦é€šè¿‡è½¬ä¹‰è¿™æ ·ä¸€ç§æ–¹æ³•æ¥å®ç°ã€‚ ä¹Ÿå°±æ˜¯è¯´æ¯”å¦‚å°æ˜è¦æ³¨å†Œä¸€ä¸ªç½‘ç«™ï¼Œä»–æ³¨å†Œçš„æ˜¯&lt;script&gt;alert(1);&lt;/script&gt;è¿™æ ·ä¸€ä¸ªåå­—ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨å¯¹scriptæ ‡ç­¾è¿›è¡Œå®Œå…¨è¿‡æ»¤ï¼Œæˆ‘ä»¬åªéœ€è¦è¿›è¡Œä¸€ä¸‹è½¬ä¹‰ï¼ŒæŠŠé‡Œé¢çš„&lt;&gt;è¿™ç§å…¨éƒ¨è½¬ä¹‰æˆå®ä½“ã€‚å¹¶å­˜åˆ°æ•°æ®åº“ï¼Œå½“æˆ‘ä»¬è¦æ˜¾ç¤ºå°æ˜çš„ç½‘åçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¾“å‡ºåˆ°æµè§ˆå™¨çš„ä¸æ˜¯scriptæ ‡ç­¾ï¼Œè€Œæ˜¯è¢«è½¬ä¹‰äº†ä»¥åçš„ï¼Œè¿™æ ·ä¹Ÿå°±ä¸ä¼šé€ æˆå®‰å…¨é—®é¢˜ã€‚ ä½†æ˜¯è¿™æ ·ä¹Ÿå¯èƒ½å­˜çš„é—®é¢˜ï¼šã€æ•°æ®ä¼ è¾“æœ€æ™®éçš„å½¢å¼å°±æ˜¯å­—ç¬¦ä¸²ä¼ è¾“ï¼Œè¿™ä¹Ÿæ˜¯æœ€å®¹æ˜“è¢«æ³¨å…¥çš„ã€‚è¦ä¿è¯åœ¨è§£ææ—¶å€™ä¸è¢«æ³¨å…¥ï¼Œå­—ç¬¦çš„è½¬ä¹‰å°±å¾ˆæœ‰å¿…è¦ï¼åšå­—ç¬¦è½¬ä¹‰é™¤äº†å¯ä»¥é¿å¼€æ³¨å…¥å¤–è¿˜å¯ä»¥è§£å†³åŒå­—èŠ‚å­—ç¬¦çš„ç¼–ç é—®é¢˜ã€‚ã€‘ä½†æ˜¯è½¬ä¹‰ä¹‹åæ•°æ®çš„é‡ä¼šå˜å¤§ï¼Œæ‰€ä»¥åœ¨ä¼ è¾“çš„å¸¦å®½æ–¹é¢ä¼šæœ‰ä¸€å®šçš„å¼€é”€ã€‚ æ–¹æ³•äºŒ-æ–¹æ³•ä¼˜åŒ–åˆ©ç”¨ç™½åå•åˆšåˆšæˆ‘ä»¬æåˆ°äº†ï¼Œå¦‚æœæˆ‘ä»¬æŠŠæ‰€æœ‰çš„éƒ½è½¬ä¹‰åæ•°æ®é‡ä¼šå˜å¤§ï¼Œæ‰€ä»¥å¾ˆå æ®å¸¦å®½ï¼Œæ‰€ä»¥è™‘æ•°å­—ã€å­—æ¯ï¼Œç©ºæ ¼ï¼Œè¿™äº›å¯èƒ½ä¼šè¢«å¤§é‡ä½¿ç”¨ï¼Œå› æ­¤æŠŠä»–ä»¬åŠ å…¥ç™½åå•ï¼Œåœ¨ç™½åå•ä¹‹å¤–çš„å­—ç¬¦ä¸€å¾‹è½¬ä¹‰ã€‚æƒ³æƒ³ä¸ºå•¥å«åšç™½åå•ï¼Œé»‘åå•ä¸ä¹‹å¯¹åº”ã€‚ å†çœ‹çœ‹ä¸€èˆ¬æˆ‘ä»¬æ˜¯æ€ä¹ˆè½¬ä¹‰è¿‡æ»¤çš„åˆ é™¤æ‰€æœ‰çš„HTML TAG1234function rmHtmlTab(tab) &#123; return tab.replace(/&lt;\\/?[^&gt;]*&gt;/g,'');//åˆ é™¤æ‰€æœ‰HTMLæ ‡ç­¾&#125;console.log(rmHtmlTab(\"&lt;script&gt;alert('1');&lt;/script&gt;\")); è¾“å‡ºï¼šalert(&#39;1&#39;);,ç¨å¾®è§£é‡Šä¸‹è¿™ä¸ªæ­£åˆ™çš„æ„æ€ï¼šåŒ¹é…&lt;&gt;æˆ–è€…&lt;/&gt;ï¼Œä¸­é—´å•¥éƒ½å¯ä»¥ï¼Œä½†æ˜¯ä¸èƒ½æœ‰&gt;ã€‚è¿™æ ·å°±å¯ä»¥æŠŠæ‰€æœ‰çš„è¿™æ ·çš„æ ‡ç­¾å…¨éƒ¨è¿‡æ»¤æ‰ï¼Œåªè¾“å‡ºæ–‡æœ¬ã€‚ ä¸åˆ é™¤æ‰€æœ‰çš„TAG,å…¨éƒ¨è½¬ä¹‰1234567function escape(str)&#123; return str.replace(/[&lt;&gt;&amp;\"]/g,function(c)&#123; var obj = &#123;'&lt;':'&amp;lt;','&gt;':'&amp;gt;','&amp;':'&amp;amp;','\"':'&amp;quot;'&#125;; return obj[c]; &#125;);&#125;console.log(escape(\"&lt;a&gt;alert('1');&lt;/a&gt;\")); lt;a&amp;gt;alert(&#39;1&#39;);&amp;lt;/a&amp;gt;æœ€åè½¬ä¹‰æˆäº†ä½ æƒ³è¦çš„æ ·å­ã€‚å¦‚æœæ˜¯è¦å°†è½¬ä¹‰ç¬¦æ¢æˆæ™®é€šå­—ç¬¦ï¼Œå°±æŠŠobjé‡Œçš„å±æ€§å’Œå€¼å·®ä¸å¤šæ¢ä¸€ä¸‹å°±è¡Œå•¦ã€‚å¦‚ä¸‹ï¼š123456789function entityEscape(str)&#123; var obj = &#123;'lt':'&lt;','gt':'&gt;','nbsp':' ','amp':'&amp;','quot':'\"'&#125;; return str.replace(/&amp;(lt|gt|nbsp|amp|quot);/ig,function(all,t)&#123; console.log(all); return obj[t]; &#125;);&#125; console.log(entityEscape(\"&amp;nbsp;&amp;lt;a&amp;gt;alert('1');&lt;/a&gt;\")); æœ€åç»“æœä¸ºï¼š è¿™é‡Œé¡ºä¾¿æ€»ç»“ä¸‹replaceçš„å›è°ƒå‡½æ•°ï¼šå½“replaceæ–¹æ³•æ‰§è¡Œçš„æ—¶å€™æ¯æ¬¡éƒ½ä¼šè°ƒç”¨è¯¥å‡½æ•°ï¼Œè¿”å›å€¼ä½œä¸ºæ›¿æ¢çš„æ–°å€¼ã€‚ 1. ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ¯æ¬¡åŒ¹é…çš„å…¨æ–‡æœ¬ï¼ˆ$&amp;ï¼‰ã€‚ 2. ä¸­é—´å‚æ•°ä¸ºå­è¡¨è¾¾å¼åŒ¹é…å­—ç¬¦ä¸²ï¼Œä¸ªæ•°ä¸é™.( $i (i:1-99)) 3. å€’æ•°ç¬¬äºŒä¸ªå‚æ•°ä¸ºåŒ¹é…æ–‡æœ¬å­—ç¬¦ä¸²çš„åŒ¹é…ä¸‹æ ‡ä½ç½®ã€‚ 4. æœ€åä¸€ä¸ªå‚æ•°è¡¨ç¤ºå­—ç¬¦ä¸²æœ¬èº«ã€‚ 1234567function entityEscape(str)&#123; var obj = &#123;'lt':'&lt;','gt':'&gt;','nbsp':' ','amp':'&amp;','quot':'\"'&#125;; return str.replace(/&amp;(lt|gt|nbsp|amp|quot);/ig,function(a,b,d,c)&#123; console.log(a+\" \"+d+\" \"+b+\" \"+c); //return obj[c]; &#125;);&#125; å¦‚ä¸Šå°±ä¼šè¾“å‡ºè¿™æ ·çš„æ ¼å¼ï¼š&amp;nbsp; 0 nbsp &amp;nbsp;&amp;lt;a&amp;gt;alert(&#39;1&#39;);&lt;/a&gt; å†çœ‹ä¸ªå°ä¾‹å­è¿™ä¸ªä¾‹å­è·Ÿæˆ‘ä»¬çš„é—®é¢˜å…³ç³»å…¶å®å¹¶ä¸æ˜¯å¾ˆå¤§ï¼Œåªæ˜¯æˆ‘åœ¨åšä¸Šé¢çš„æ€»ç»“æ—¶ï¼Œå‘ç°äº†ä¸‹åˆ—é—®é¢˜ï¼š1234&lt;div id=\"box\"&gt;&lt;/div&gt;&lt;div id=\"box1\"&gt;&lt;/div&gt; å¤§å®¶æƒ³æƒ³ä¸‹é¢ä¸¤ç§ä¸åŒçš„æƒ…å†µä¼šè¾“å‡ºä»€ä¹ˆå‘¢ï¼Ÿ1234567891011121314//æƒ…å½¢ä¸€var box = document.getElementById(\"box1\");box.innerHTML = \"&lt;script&gt;alert('a');&lt;/script&gt;\";//æƒ…å½¢äºŒvar box = document.getElementById(\"box1\");box.innerHTML = \"&amp;lt;script&amp;gt;alert('a');&amp;lt/script&amp;gt\";//æƒ…å½¢ä¸‰var script = document.createElement('script');var text = document.createTextNode('alert(1)');script.appendChild(text);var box1 = document.getElementById('box1');box1.appendChild(script);//æƒ…å½¢å››console.log(escape(\"&amp;nbsp;&amp;lt;a&amp;gt;alert('1');&lt;/a&gt;\")); ç­”æ¡ˆæ˜¯ç¬¬ä¸€ç§æƒ…å†µä¸ä¼šè¾“å‡ºalert(a),ç¬¬äºŒç§æƒ…å†µä¼šè¾“å‡ºalert(a),ç¬¬ä¸‰ç§æƒ…å†µä¼šè¾“å‡ºalert(1)ã€‚æƒ³æƒ³è¿™æ˜¯ä¸ºå•¥å‘¢ï¼Ÿ æ€»ç»“ä»¥å‰è™½ç„¶çŸ¥é“è½¬ä¹‰è¿™ç§ä¸œè¥¿ï¼Œä½†æ˜¯å®é™…é¡¹ç›®é‡Œç”¨è¿‡çš„ï¼Œéƒ½æ˜¯ç›´æ¥æŠŠæ‰€æœ‰çš„æ ‡ç­¾ç»™è¿‡æ»¤äº†ï¼Œä¹Ÿå°±æ²¡æœ‰å®é™…æ“ä½œè¿‡ï¼Œæ¶¨çŸ¥è¯†äº†ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"æ­£å‘ä»£ç†ä¸åå‘ä»£ç†","slug":"æ­£å‘ä»£ç†ä¸åå‘ä»£ç†","date":"2016-03-31T04:37:00.000Z","updated":"2016-12-12T02:54:46.000Z","comments":true,"path":"2016/03/31/æ­£å‘ä»£ç†ä¸åå‘ä»£ç†/","link":"","permalink":"http://sevencai.github.io/2016/03/31/æ­£å‘ä»£ç†ä¸åå‘ä»£ç†/","excerpt":"","text":"å…ˆé—®å‡ ä¸ªé—®é¢˜ï¼Œä»€ä¹ˆäº‹æ­£å‘ä»£ç†ï¼Ÿä»€ä¹ˆæ˜¯åå‘ä»£ç†ï¼Ÿä¸¤è€…åˆæœ‰å•¥åŒºåˆ«å‘¢ï¼Ÿæ­£å‘ä»£ç†å¯ä»¥ä¸ºæˆ‘ä»¬åšä»€ä¹ˆï¼Ÿåå‘ä»£ç†åˆæœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿå…ˆå‰åªçŸ¥é“åå‘ä»£ç†ï¼Œå¯æ˜¯å´å¿½ç•¥äº†æ­£å‘ä»£ç†ã€‚çŸ¥è¯†çš„å­¦ä¹ æ²¡æœ‰å…¨é¢ï¼Œåæ€ã€‚ä¸‹é¢å›¾ç‰‡éƒ¨åˆ†æ•´ç†å­¦ä¹ æ¥è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·å‘Šè¯‰æˆ‘ï¼Œè°¢è°¢å•¦ã€‚ æ­£å‘ä»£ç† æ­£å‘ä»£ç†æ˜¯ä¸€ä¸ªä½äºå®¢æˆ·ç«¯å’ŒåŸå§‹æœåŠ¡å™¨(origin server)ä¹‹é—´çš„æœåŠ¡å™¨ï¼Œä¸ºäº†ä»åŸå§‹æœåŠ¡å™¨å–å¾—å†…å®¹ï¼Œå®¢æˆ·ç«¯å‘ä»£ç†å‘é€ä¸€ä¸ªè¯·æ±‚å¹¶æŒ‡å®šç›®æ ‡(åŸå§‹æœåŠ¡å™¨)ï¼Œç„¶åä»£ç†å‘åŸå§‹æœåŠ¡å™¨è½¬äº¤è¯·æ±‚å¹¶å°†è·å¾—çš„å†…å®¹è¿”å›ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯å¿…é¡»è¦è¿›è¡Œä¸€äº›ç‰¹åˆ«çš„è®¾ç½®æ‰èƒ½ä½¿ç”¨æ­£å‘ä»£ç†ã€‚ ä¸‹é¢è¿™å¼ å›¾å¾ˆå¥½çš„å‘æˆ‘ä»¬è§£é‡Šäº†æ­£å‘ä»£ç†ï¼š ä¸¾ä¸ªå°ä¾‹å­ç®€å•çš„æœ‰ä¸ªå°ä¾‹å­ï¼šæˆ‘ä»¬çŸ¥é“è°·æ­Œåœ¨å›½å†…è¢«å¢™äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šå»ç”¨vpnã€‚vpnçš„ä½œç”¨å°±ç›¸å½“äºä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿè®¿é—®æˆ‘ä»¬è®¿é—®ä¸äº†çš„ç½‘ç«™ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“æœ‰è¿™æ ·ä¸€ä¸ªä»£ç†æœåŠ¡å™¨å­˜åœ¨ï¼Œä¹ŸçŸ¥é“è®¿é—®è°·æ­Œä¹Ÿå­˜åœ¨ä¸€ä¸ªè°·æ­Œçš„æœåŠ¡å™¨ã€‚è¿™ä¸¤ä¸ªæœåŠ¡å™¨çš„å­˜åœ¨æˆ‘ä»¬éƒ½å¾ˆæ¸…æ¥šã€‚ ä¸Šé¢çš„å›¾ä¸­ï¼Œç”¨æˆ·Aä¸»åŠ¨è¯·æ±‚è¦è®¿é—®çš„æœåŠ¡å™¨Bï¼Œåœ¨å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°Aå…ˆè®¿é—®äº†ä»£ç†æœåŠ¡å™¨Zï¼ŒZæ”¶åˆ°è¯·æ±‚åï¼Œå†å‘é€ç»™æœåŠ¡å™¨Bã€‚ç„¶åå†ç”±æœåŠ¡å™¨ZæŠŠæ•°æ®è¿”å›ç»™Aã€‚ è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·çŸ¥é“æœåŠ¡å™¨Bï¼Œä¹ŸçŸ¥é“ä»£ç†æœåŠ¡å™¨Zï¼Œä½†è¿™äº›æ‰€æœ‰çš„è¯·æ±‚éƒ½æ˜¯ç”±ä»£ç†æœåŠ¡å™¨æ¥å¤„ç†çš„ã€‚ æ­£å‘ä»£ç†èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åšä»€ä¹ˆåšç¼“å­˜ï¼ŒåŠ é€Ÿè®¿é—®å¯ä»¥åœ¨ä»£ç†æœåŠ¡å™¨Zåšç¼“å­˜ï¼Œæ¯”å¦‚ç”¨æˆ·å·²ç»è®¿é—®è¿‡BæœåŠ¡å™¨åï¼ŒæŠŠæ•°æ®åˆè¿”å›ç»™äº†Zï¼ŒZæŠŠè¿™äº›ä¿¡æ¯éƒ½å­˜åœ¨äº†æœ¬åœ°ï¼Œåšäº†ç¼“å­˜ï¼Œé‚£ä¹ˆä¸‹æ¬¡Aå†è®¿é—®Bçš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯å°±ä¸éœ€è¦é€šè¿‡å¤šæ¬¡è½¬å‘ï¼Œä¸éœ€è¦ç»è¿‡å¾ˆå¤šè·¯ç”±ï¼Œè€Œç›´æ¥ç”¨äº†Zå‘¢ï¼Ÿè¿™æ ·å°±æ˜¯åˆ©ç”¨ä»£ç†æœåŠ¡å™¨åŠ é€Ÿè®¿é—®çš„åŸç†ã€‚ ç¿»å¢™åŸç†åˆšåˆšæåˆ°äº†googleé‚£ä¸ªä¾‹å­ï¼Œå°±æ˜¯ä¸€ä¸ªç¿»å¢™çš„å¸¸è§å®ä¾‹ã€‚ç°åœ¨æˆ‘ä»¬çœ‹ä¸‹åŸç†å›¾ã€‚ æœåŠ¡å™¨éªŒè¯æ¯”å¦‚è¯´æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä»£ç†æœåŠ¡å™¨åšä¸€äº›éªŒè¯ï¼Œæ¯”å¦‚ä¸Šç½‘æƒé™ï¼Œå› ä¸ºäº’è”ç½‘è¦å…ˆç»è¿‡ä»£ç†æœåŠ¡å™¨ã€‚ä¹Ÿæ˜¯ç”±äºæ­£å‘ä»£ç†å…è®¸å®¢æˆ·ç«¯é€šè¿‡å®ƒè®¿é—®ä»»æ„ç½‘ç«™å¹¶ä¸”éšè—å®¢æˆ·ç«¯è‡ªèº«ï¼Œå› æ­¤ä½ å¿…é¡»é‡‡å–å®‰å…¨æªæ–½ä»¥ç¡®ä¿ä»…ä¸ºç»è¿‡æˆæƒçš„å®¢æˆ·ç«¯æä¾›æœåŠ¡ã€‚ æ•´ä¸ªæ¥è¯´ï¼Œæ­£å‘ä»£ç†å°±åƒä¸€ä¸ªè·³æ¿ï¼Œæˆ‘ä»¬ä¸èƒ½è®¿é—®ä¸€ä¸ªæœåŠ¡å™¨ï¼Œä½†æˆ‘ä»¬å¯ä»¥è®¿é—®ä»£ç†æœåŠ¡å™¨ï¼Œè¿™ä¸ªä»£ç†æœåŠ¡å™¨åˆå¯ä»¥è®¿é—®ï¼Œæˆ‘ä»¬äº¤ç»™ä»£ç†æœåŠ¡å™¨å»å–æ•°æ®ï¼Œç„¶åå†è¿”å›ç»™æˆ‘ã€‚å®¢æˆ·ç«¯å¿…é¡»è¦ç»è¿‡ä¸€äº›ç‰¹åˆ«çš„è®¾ç½®æ‰èƒ½ä½¿ç”¨æ­£å‘ä»£ç†ã€‚ åå‘ä»£ç† åå‘ä»£ç†ï¼ˆReverse Proxyï¼‰æ–¹å¼æ˜¯æŒ‡ä»¥ä»£ç†æœåŠ¡å™¨æ¥æ¥å—Internetä¸Šçš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡å™¨ï¼›å¹¶å°†ä»æœåŠ¡å™¨ä¸Šå¾—åˆ°çš„ç»“æœè¿”å›ç»™Internetä¸Šè¯·æ±‚è¿æ¥çš„å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å¯¹å¤–å°±è¡¨ç°ä¸ºä¸€ä¸ªæœåŠ¡å™¨ã€‚ åå‘ä»£ç†ä¸æ­£å‘ä»£ç†æ­£å¥½ç›¸åï¼Œå¯¹äºå®¢æˆ·ç«¯è€Œè¨€å®ƒå°±åƒæ˜¯åŸå§‹æœåŠ¡å™¨ï¼Œå¹¶ä¸”å®¢æˆ·ç«¯ä¸éœ€è¦è¿›è¡Œä»»ä½•ç‰¹åˆ«çš„è®¾ç½®ã€‚å®¢æˆ·ç«¯å‘åå‘ä»£ç†çš„å‘½åç©ºé—´(name-space)ä¸­çš„å†…å®¹å‘é€æ™®é€šè¯·æ±‚ï¼Œæ¥ç€åå‘ä»£ç†å°†åˆ¤æ–­å‘ä½•å¤„(åŸå§‹æœåŠ¡å™¨)è½¬äº¤è¯·æ±‚ï¼Œå¹¶å°†è·å¾—çš„å†…å®¹è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå°±åƒè¿™äº›å†…å®¹åŸæœ¬å°±æ˜¯å®ƒè‡ªå·±çš„ä¸€æ ·ã€‚ å¯¹å¤–è¡¨ç°ä¸ºä¸€ä¸ªæœåŠ¡å™¨æ€ä¹ˆç†è§£ï¼Ÿæ¯”å¦‚è®¿é—®cailidan.cnçš„æ—¶å€™ï¼Œå¤§å®¶æ˜¯ä¸çŸ¥é“æˆ‘ç”¨äº†åå‘ä»£ç†çš„ã€‚å¤§å®¶ä»¥ä¸ºè®¿é—®çš„å°±æ˜¯è¿™ä¸ªï¼Œä½†å®é™…ä¸Šç”¨äº†åå‘ä»£ç†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘çš„nginxè¡¨ç°çš„å°±åƒä¸€ä¸ªæœåŠ¡å™¨ä¸€æ ·ã€‚ åå‘ä»£ç†æœåŠ¡å™¨æœ‰ä¸¤ç§æ¨¡å‹ï¼Œä¸€ç§æ˜¯ä½œä¸ºå†…å®¹æœåŠ¡å™¨çš„æ›¿èº«ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå†…å¦‚æœåŠ¡å™¨é›†ç¾¤çš„è´Ÿè½½å‡è¡¡å™¨ã€‚ åå‘ä»£ç†çš„ç‰¹ç‚¹æ¯”å¦‚ä¸‹å›¾ï¼Œç”¨æˆ·Aåœ¨è®¿é—®Bçš„èµ„æºçš„æ—¶å€™ï¼Œå¹¶ä¸çŸ¥é“ä¸­é—´è¿˜å­˜åœ¨ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œå¥¹ä¸€ç›´ä»¥ä¸ºè¯·æ±‚çš„æ˜¯åŸå§‹æœåŠ¡å™¨ã€‚ä½†å®é™…æ˜¯åå‘ä»£ç†æœåŠ¡å™¨å†æ¥å—äº†Açš„è¯·æ±‚åï¼Œä»åŸå§‹Bå–å¾—Açš„éœ€æ±‚èµ„æºï¼Œå¹¶ä¸”å‘é€ç»™Aã€‚ç”±äºé˜²ç«å¢™çš„ä½œç”¨ï¼Œåªå…è®¸ä»£ç†æœåŠ¡å™¨ZZè®¿é—®åŸå§‹èµ„æºæœåŠ¡å™¨Bï¼Œå°½ç®¡åœ¨è¿™ä¸ªç¯å¢ƒä¸‹ï¼ŒçœŸå®çš„æ˜¯ç”±äºé˜²ç«å¢™å’Œåå‘ä»£ç†çš„å…±åŒä½œç”¨ä¿æŠ¤äº†Bï¼Œä½†æ˜¯æˆ‘ä»¬ç”¨æˆ·Aå¹¶ä¸çŸ¥é“ã€‚ ç›¸å½“äºæ­£å‘ä»£ç†æ˜¯ä»£ç†å®¢æˆ·ç«¯è€Œè¨€ï¼Œåå‘ä»£ç†æ˜¯ä»£ç†æœåŠ¡å™¨ã€‚ åå‘ä»£ç†çš„ç”¨é€”ä»£ç†æœåŠ¡å™¨å¯¹å¤–å°±è¡¨ç°ä¸ºä¸€ä¸ªWebæœåŠ¡å™¨ï¼Œå¤–éƒ¨ç½‘ç»œå°±å¯ä»¥ç®€å•æŠŠå®ƒå½“ä½œä¸€ä¸ªæ ‡å‡†çš„WebæœåŠ¡å™¨è€Œä¸éœ€è¦ç‰¹å®šçš„é…ç½®ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œè¿™ä¸ªæœåŠ¡å™¨æ²¡æœ‰ä¿å­˜ä»»ä½•ç½‘é¡µçš„çœŸå®æ•°æ®ï¼Œæ‰€æœ‰çš„é™æ€ç½‘é¡µæˆ–è€…CGIç¨‹åºï¼Œéƒ½ä¿å­˜åœ¨å†…éƒ¨çš„WebæœåŠ¡å™¨ä¸Šã€‚å› æ­¤å¯¹åå‘ä»£ç†æœåŠ¡å™¨çš„æ”»å‡»å¹¶ä¸ä¼šä½¿å¾—ç½‘é¡µä¿¡æ¯é­åˆ°ç ´åï¼Œè¿™æ ·å°±å¢å¼ºäº†WebæœåŠ¡å™¨çš„å®‰å…¨æ€§ã€‚ è´Ÿè½½å‡è¡¡ è´Ÿè½½å‡è¡¡æ˜¯ç”±å¤šå°æœåŠ¡å™¨ä»¥å¯¹ç§°çš„æ–¹å¼ç»„æˆä¸€ä¸ªæœåŠ¡å™¨é›†åˆï¼Œæ¯å°æœåŠ¡å™¨éƒ½å…·æœ‰ç­‰ä»·çš„åœ°ä½ï¼Œéƒ½å¯ä»¥å•ç‹¬å¯¹å¤–æä¾›æœåŠ¡è€Œæ— é¡»å…¶ä»–æœåŠ¡å™¨çš„è¾…åŠ©ã€‚é€šè¿‡æŸç§è´Ÿè½½åˆ†æ‹…æŠ€æœ¯ï¼Œå°†å¤–éƒ¨å‘é€æ¥çš„è¯·æ±‚å‡åŒ€åˆ†é…åˆ°å¯¹ç§°ç»“æ„ä¸­çš„æŸä¸€å°æœåŠ¡å™¨ä¸Šï¼Œè€Œæ¥æ”¶åˆ°è¯·æ±‚çš„æœåŠ¡å™¨ç‹¬ç«‹åœ°å›åº”å®¢æˆ·çš„è¯·æ±‚ã€‚å‡è¡¡è´Ÿè½½èƒ½å¤Ÿå¹³å‡åˆ†é…å®¢æˆ·è¯·æ±‚åˆ°æœåŠ¡å™¨åˆ—é˜µï¼Œç±æ­¤æä¾›å¿«é€Ÿè·å–é‡è¦æ•°æ®ï¼Œè§£å†³å¤§é‡å¹¶å‘è®¿é—®æœåŠ¡é—®é¢˜ã€‚ ç®€å•çš„æ¥è¯´ï¼Œå°±æ˜¯å½“æˆ‘ä»¬çš„httpè¯·æ±‚è¿‡å¤šçš„æ—¶å€™ï¼Œåå‘ä»£ç†æœåŠ¡å™¨è´Ÿè´£åˆ†å‘httpè¯·æ±‚ï¼Œæ¥ç¡®ä¿æŸä¸€ä¸ªæœåŠ¡å™¨ä¸ä¼šå‹åŠ›å¤ªå¤§ï¼Œç„¶åå´©æ‰ã€‚ å®ç°CDNåˆšåˆšæˆ‘ä»¬çŸ¥é“äº†æ­£å‘ä»£ç†æœåŠ¡å™¨å¯ä»¥å®ç°ç¼“å­˜ï¼Œä»è€ŒåŠ å¿«è®¿é—®çš„æ•ˆæœï¼Œé‚£åå‘ä»£ç†æœåŠ¡å™¨ä¹Ÿæ˜¯ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œé‚£è‚¯å®šä¹Ÿæ˜¯æ‹¥æœ‰CacheåŠŸèƒ½çš„ï¼Œå®ƒå¯ä»¥æš–æ‘åŸå§‹èµ„æºæœåŠ¡å™¨çš„èµ„æºï¼Œä»è€Œä¸æ˜¯æ¯æ¬¡éƒ½è¦å‘åŸå§‹èµ„æºæœåŠ¡å™¨Bè¯·æ±‚æ•°æ®ï¼Œç‰¹åˆ«æ˜¯ä¸€äº›é™æ€çš„æ•°æ®ï¼Œæ¯”å¦‚å›¾ç‰‡å’Œæ–‡ä»¶ï¼Œå¦‚æœè¿™äº›åå‘ä»£ç†æœåŠ¡å™¨èƒ½å¤Ÿåšåˆ°å’Œç”¨æˆ·Xæ¥è‡ªåŒä¸€ä¸ªç½‘ç»œï¼Œé‚£ä¹ˆç”¨æˆ·Xè®¿é—®åå‘ä»£ç†æœåŠ¡å™¨Xï¼Œå°±ä¼šå¾—åˆ°å¾ˆé«˜è´¨é‡çš„é€Ÿåº¦ã€‚è¿™æ­£æ˜¯CDNæŠ€æœ¯çš„æ ¸å¿ƒã€‚ CDNçš„å…¨ç§°æ˜¯Content Delivery Networkï¼Œå³å†…å®¹åˆ†å‘ç½‘ç»œã€‚å…¶åŸºæœ¬æ€è·¯æ˜¯å°½å¯èƒ½é¿å¼€äº’è”ç½‘ä¸Šæœ‰å¯èƒ½å½±å“æ•°æ®ä¼ è¾“é€Ÿåº¦å’Œç¨³å®šæ€§çš„ç“¶é¢ˆå’Œç¯èŠ‚ï¼Œä½¿å†…å®¹ä¼ è¾“çš„æ›´å¿«ã€æ›´ç¨³å®šã€‚é€šè¿‡åœ¨ç½‘ç»œå„å¤„æ”¾ç½®åå‘ä»£ç†èŠ‚ç‚¹æœåŠ¡å™¨æ‰€æ„æˆçš„åœ¨ç°æœ‰çš„äº’è”ç½‘åŸºç¡€ä¹‹ä¸Šçš„ä¸€å±‚æ™ºèƒ½è™šæ‹Ÿç½‘ç»œï¼ŒCDNç³»ç»Ÿèƒ½å¤Ÿå®æ—¶åœ°æ ¹æ®ç½‘ç»œæµé‡å’Œå„èŠ‚ç‚¹çš„è¿æ¥ã€è´Ÿè½½çŠ¶å†µä»¥åŠåˆ°ç”¨æˆ·çš„è·ç¦»å’Œå“åº”æ—¶é—´ç­‰ç»¼åˆä¿¡æ¯å°†ç”¨æˆ·çš„è¯·æ±‚é‡æ–°å¯¼å‘ç¦»ç”¨æˆ·æœ€è¿‘çš„æœåŠ¡èŠ‚ç‚¹ä¸Šã€‚å…¶ç›®çš„æ˜¯ä½¿ç”¨æˆ·å¯å°±è¿‘å–å¾—æ‰€éœ€å†…å®¹ï¼Œè§£å†³Internetç½‘ç»œæ‹¥æŒ¤çš„çŠ¶å†µï¼Œæé«˜ç”¨æˆ·è®¿é—®ç½‘ç«™çš„å“åº”é€Ÿåº¦ã€‚ æ€»ç»“ä»å®‰å…¨ä¸Šè¯´ æ­£å‘ä»£ç†å…è®¸å®¢æˆ·ç«¯é€šè¿‡è®¿é—®ä»»æ„ç½‘ç«™å¹¶ä¸”è¿˜éšè—å®¢æˆ·ç«¯çš„èº«ä»½ï¼Œå› æ­¤å’±ä¹ˆå¿…é¡»è¦ç”¨å®‰å…¨çš„æªæ–½ç”¨æ¥ç¡®ä¿ï¼Œå¹¶æœªç»è¿‡æˆæƒçš„å®¢æˆ·æä¾›æœåŠ¡ã€‚ åå‘ä»£ç†å¯¹å¤–æ˜¯é€æ˜çš„ï¼Œå¤§å®¶ä¸çŸ¥é“è‡ªå·±è®¿é—®çš„æ˜¯ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ã€‚ ä»ç”¨é€”ä¸Šæ€»ç»“ æ­£å‘ä»£ç†ä¸»è¦æ˜¯ä¸ºé˜²ç«å¢™å†…çš„å±€åŸŸç½‘å®¢æˆ·ç«¯æä¾›internetè®¿é—®é€”å¾„ï¼Œå¹¶ä¸”å¯ä»¥åˆ©ç”¨ç¼“å­˜æ¥å‡å°‘ç½‘ç»œä½¿ç”¨ç‡ã€‚ åå‘ä»£ç†çš„ä¸»è¦ç”¨é€”æ˜¯ä¸ºåå°æœåŠ¡å™¨æä¾›è´Ÿè½½å‡è¡¡æˆ–è€…ä¸ºåç«¯æ¯”è¾ƒæ…¢çš„æœåŠ¡å™¨æä¾›ç¼“å†²æŠ€æœ¯ã€‚å¹¶ä¸”è¿˜æœ‰ä¸€äº›æ›´åŠ é«˜çº§çš„URLç­–ç•¥å’Œç®¡ç†æŠ€æœ¯ã€‚ ä¸¾ä¸ªæ¯”æ–¹ï¼šæ­£å‘ä»£ç†å°±æ˜¯æœ‰3ä¸ªäººï¼Œaæ˜¯bçš„å¥½æœ‹å‹ï¼Œbçš„å¥½æœ‹å‹æ˜¯cï¼Œaæœ‰å›°éš¾æ‰¾äº†bï¼Œbä¸èƒ½è§£å†³å°±æ‰¾äº†cã€‚aä»–å¾ˆæ¸…æ¥šçš„çŸ¥é“bæœ‰ä¸ªå¥½æœ‹å‹å«åšcã€‚å°±åƒæˆ‘ä»¬ç”¨VPNç¿»å¢™ï¼Œæ˜¯çŸ¥é“å¿…é¡»ä¹°è¿™ä¸ªæ‰è¡Œçš„ã€‚ ä½†æ˜¯åå‘ä»£ç†ï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„è¿‡ç¨‹ï¼ŒåŒºåˆ«å°±æ˜¯aä»–ä¸çŸ¥é“bæœ‰ä¸ªå¥½æœ‹å‹cï¼Œè€Œä¸”bè¿˜å‘cå¯»æ±‚å¸®åŠ©ã€‚aä»¥ä¸ºä»–çš„å¿™å°±æ˜¯bå¸®çš„ã€‚","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/categories/è®¡ç®—æœºç½‘ç»œ/"}],"tags":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/tags/è®¡ç®—æœºç½‘ç»œ/"}]},{"title":"æ“ä½œç³»ç»Ÿä½“ç³»ç»“æ„-æ¢³ç†äºŒ-å¤„ç†æœºç®¡ç†","slug":"æ“ä½œç³»ç»Ÿä½“ç³»ç»“æ„-æ¢³ç†äºŒ-å¤„ç†æœºç®¡ç†","date":"2016-03-27T04:31:50.000Z","updated":"2016-12-12T02:54:34.000Z","comments":true,"path":"2016/03/27/æ“ä½œç³»ç»Ÿä½“ç³»ç»“æ„-æ¢³ç†äºŒ-å¤„ç†æœºç®¡ç†/","link":"","permalink":"http://sevencai.github.io/2016/03/27/æ“ä½œç³»ç»Ÿä½“ç³»ç»“æ„-æ¢³ç†äºŒ-å¤„ç†æœºç®¡ç†/","excerpt":"","text":"ä¸Šä¸€ç¯‡æ–‡ç« æ˜¯æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªç®€è¿°ï¼Œè¿™ä¸€ç¯‡æ–‡ç« å°±è®°å½•æ“ä½œç³»ç»Ÿå‡ ä¸ªé‡è¦åŠŸèƒ½çš„è¯¦ç»†å†…å®¹ã€‚æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½ä¸»è¦æ˜¯ç”±4å¤§åŠŸèƒ½ï¼šå¤„ç†æœºç®¡ç†ï¼Œå­˜å‚¨ç®¡ç†ï¼Œè®¾å¤‡ç®¡ç†ï¼Œæ–‡ä»¶ç®¡ç†ï¼Œä½œä¸šç®¡ç†ã€‚ä¸‹é¢çœ‹çœ‹å¤„ç†æœºç®¡ç†ã€‚ å¤„ç†æœºç®¡ç†ä¸Šä¸€ç¯‡æ–‡ç« è¯´äº†ï¼Œå¤„ç†æœºç®¡ç†æˆ‘ä»¬å¯ä»¥å°±å½’ç»“ä¸ºè¿›ç¨‹ç®¡ç†ã€‚é‚£ä¹ˆè¿›ç¨‹åˆ°åº•æ˜¯å•¥å­ï¼Ÿå’Œç¨‹åºåˆæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ ç¨‹åºæ˜¯å®Œæˆç‰¹å®šåŠŸèƒ½è€Œç¼–æ’çš„æŒ‡ä»¤é›†åˆçš„æœ‰åºé›†åˆï¼Œæ˜¯é™æ€çš„ï¼Œç‰¹ç‚¹æ˜¯é¡ºåºæ‰§è¡Œã€‚ä½†åœ¨å¤šé“ç³»ç»Ÿä¸­ï¼Œç”±äºå­˜åœ¨å¤šä¸ªç‹¬ç«‹çš„ç¨‹åºï¼Œä»–ä»¬å¯¹ç³»ç»Ÿçš„èµ„æºå³å…±äº«åˆç«äº‰ï¼Œç¨‹åºä¸å†ä»¥é¡ºåºæ–¹å¼æ‰§è¡Œï¼Œç¨‹åºçš„é¡ºåºæ€§ï¼Œå¯å†ç°è¡Œï¼ˆä¸ç®¡æ€ä¹ˆè¿è¡Œï¼Œéƒ½å¾—åˆ°ç›¸åŒçš„ç»“æœï¼‰ï¼Œå°é—­æ€§ï¼Œä¸æ—¶é—´æ— å…³æ€§ï¼Œè¿™äº›ç‰¹ç‚¹å°±æ²¡æœ‰äº†ã€‚è¿™ä¸ªæ—¶å€™ï¼Œç³»ç»Ÿä¸­çš„ç¨‹åºçš„æ‰§è¡Œæ–¹å¼ä¹Ÿæœ‰äº†æœ¬è´¨çš„å˜åŒ–ï¼Œä»é¡ºåºæ‰§è¡Œå˜æˆäº†å¹¶å‘æ‰§è¡Œã€‚ å¹¶å‘ä¸å¹¶è¡Œæ³¨æ„å¹¶å‘å°±æ˜¯æ—¶é—´ä¸Šæœ‰é‡å ï¼Œä¸€ä¸ªç¨‹åºæ²¡æœ‰ç»“æŸå¦ä¸€ä¸ªç¨‹åºå°±å¯ä»¥å¼€å§‹ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå¤„ç†æœºåœ¨å†…çš„ç³»ç»Ÿèµ„æºä¸å†ç”±ä¸€é“ç¨‹åºç‹¬å ï¼Œè€Œæ˜¯ç”±å¤šé“ç¨‹åºå…±äº«ã€‚å®è§‚ä¸Šæ˜¯å¹¶è¡Œçš„ç‰¹å¾ï¼Œå¾®è§‚ä¸Šè‚¯å®šè¿˜æœ‰é¡ºåºè¡Œçš„ã€‚æ¯•ç«ŸåŒä¸€ä¸ªæ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªäº‹ç‰©å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚ å¹¶è¡Œå°±æ˜¯åŒä¸€æ—¶åˆ»ï¼Œä¸¤ä¸ªäº‹ç‰©å‡å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚ è¿›ç¨‹çš„æ¦‚å¿µè¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿæœ€åŸºæœ¬ï¼Œæœ€é‡è¦çš„æ¦‚å¿µã€‚ è¿›ç¨‹æ˜¯ä¸€ä¸ªå…·æœ‰ç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºå…³äºæŸä¸ªæ•°æ®é›†åˆçš„ä¸€æ¬¡æ´»åŠ¨ï¼Œæ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½ã€‚ä¸¤ç‚¹ï¼š1.æ˜¯ç¨‹åºçš„æ‰§è¡Œæ´»åŠ¨2.æ˜¯èµ„æºè°ƒåº¦çš„åŸºæœ¬å•ä½ã€‚ è¿›ç¨‹çš„ç»„æˆè¿›ç¨‹ = ç¨‹åº+æ•°æ®+è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰ PCBçš„ç»„ç»‡æ–¹å¼ï¼ˆå…¶å®å¤§å¤šæ•°çš„ç»„ç»‡æ–¹å¼ï¼Œä¸ä»…ä»…æ˜¯PCBéƒ½æ˜¯ç±»ä¼¼ä¸‹é¢çš„è¿™ç§æƒ…å†µï¼‰ çº¿æ€§è¡¨ç»“æ„ é“¾æ¥è¡¨ç»“æ„ ç´¢å¼•è¡¨ç»“æ„ çº¿æ€§è¡¨ç‰¹ç‚¹è‚¯å®šå°±æ˜¯ï¼šåœ¨ä¸€ä¸ªè¿ç»­çš„åŒºåŸŸä¸­ï¼Œå¹¶ä¸”æ¯æ¬¡éƒ½è¦æ‰«ææ•´ä¸ªçº¿æ€§è¡¨ï¼Œå¢åŠ äº†ç³»ç»Ÿå¼€é”€ã€‚é€‚ç”¨äºè¿›ç¨‹æ¯”è¾ƒå°‘çš„æ“ä½œç³»ç»Ÿã€‚ é“¾æ¥è¡¨ï¼Œç”±äºç³»ç»Ÿä¸­çš„è¿›ç¨‹çš„æ€»æ•°é‡ä»¥åŠå¤„äºå„ç§çŠ¶æ€ä¸‹çš„è¿›ç¨‹æ•°é‡æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œä¸ºäº†ä¾¿äºç®¡ç†ï¼Œå°±æŠŠæœ‰äº›æ“ä½œç³»ç»Ÿä½¿ç”¨é“¾è¡¨æ•°æ®ç»“æ„æŠŠå¤„äºç›¸åŒçŠ¶æ€è¿›ç¨‹ä¸­çš„PCBé“¾æ¥åœ¨ä¸€èµ·ï¼Œæˆä¸ºè¿›ç¨‹é˜Ÿåˆ—ã€‚ ç´¢å¼•è¡¨ç»“æ„æ˜¯åˆ©ç”¨ç´¢å¼•è¡¨è®°è½½å„ç§çŠ¶æ€è¿›ç¨‹çš„PCBåœ°å€ï¼Œå°†çº¿æ€§è¡¨ä¸­ç›¸åŒçš„è¿›ç¨‹çš„PCBå»ºç«‹ä¸€ä¸ªç´¢å¼•è¡¨ï¼Œå½¢æˆæ¯”å¦‚è¯´å°±ç»ªç´¢å¼•è¡¨ï¼Œç­‰å¾…æ€ç´¢å¼•è¡¨ç­‰ã€‚ç´¢å¼•è¡¨ä¸­å°±ç»ªç´¢å¼•è¡¨åªæœ‰ä¸€ä¸ªã€‚æ³¨æ„è¿™ä¸ªå›¾ä¸­ä¸ºå•¥ç¾æ¬§è¿è¡ŒæŒ‡é’ˆçš„ç´¢å¼•è¡¨å‘¢ï¼Ÿå› ä¸ºè¿è¡Œçš„æ—¶å€™åªæœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œé‚£å°±ä¸éœ€è¦å»ºç«‹ä¸€ä¸ªç´¢å¼•è¡¨å•¦ã€‚ PCBçš„çŠ¶æ€åŠå…¶è½¬æ¢è¿™æ˜¯é‡ç‚¹ï¼Œä¸‰ç§çŠ¶æ€ï¼š è¿è¡Œæ€ï¼šè¿›ç¨‹è·å¾—äº†å¤„ç†æœºï¼Œæ³¨æ„å¤„äºè£•å…´çŠ¶æ€çš„è¿›ç¨‹ä¸ªæ•°ä¸èƒ½å¤§äºCPUçš„æ•°ç›®ã€‚å¯¹äºå•å¤„ç†æ“ä½œç³»ç»Ÿï¼Œä»»ä½•æ—¶åˆ»ï¼Œæ­£å¤„äºè¿è¡ŒçŠ¶æ€çš„è¿›ç¨‹æœ€å¤šä¸€ä¸ªã€‚ å°±ç»ªæ€ï¼šæŒ‡è¿›ç¨‹å·²ç»å…·å¤‡äº†å¯ä»¥åœ¨å¤„ç†æœºä¸Šè¿è¡Œçš„æ¡ä»¶ï¼Œä½†å› ä¸ºå‡ºç†è§£å·²ç»è¢«å…¶ä»–çš„è¿›ç¨‹å ç”¨è€Œå¤„äºä¸€ç§ç­‰å¾…å¤„ç†æœºçš„çŠ¶æ€ã€‚ ç­‰å¾…æ€ï¼šå½“ä¸€ä¸ªå¤„ç†æœºä¸Šè¿è¡Œçš„ç¨‹åºï¼Œå› ä¸ºç­‰å¾…æŸä¸€ä¸ªäº‹æƒ…å‘ç”Ÿè€Œä¸èƒ½ç»§ç»­è¿è¡Œï¼Œé‚£ä¹ˆè¿™ä¸ªè¿›ç¨‹å¤„äºç­‰å¾…å¤ªï¼Œæ¯”å¦‚ä¸­é€”ä¸€ä¸ªè¿›ç¨‹éœ€è¦ç”³è¯·ä½¿ç”¨æŸç§I/Oè®¾å¤‡ã€‚ å½“ä¸€ä¸ªè¿›ç¨‹åˆšè¢«åˆ›å»ºçš„æ—¶å€™ï¼Œå¤„äºå°±ç»ªæ€ã€‚è¿›ç¨‹çš„è½¬æ¢å›¾å¦‚ä¸‹ï¼Œçœ‹åˆ°è¿™é‡Œçš„æ—¶å€™æƒ³ä¸€æƒ³ä¸‹é¢çš„è½¬æ¢åˆ†åˆ«ä¼šå‘ç”Ÿåœ¨ä»€ä¹ˆæ—¶å€™ã€‚ è¿›ç¨‹çš„æ§åˆ¶è¿›ç¨‹çš„æ§åˆ¶å®¤æ“ä½œç³»ç»Ÿçš„åº•å±‚åŠŸèƒ½ä¹‹ä¸€ï¼Œæœ¬èº«å±äºæ“ä½œç³»ç»Ÿçš„å†…æ ¸ï¼Œå†…æ ¸åœ¨æ‰§è¡Œæ“æ—¶å€™ï¼Œå¾€å¾€æ˜¯é€šè¿‡å„ç§åŸè¯­æ“ä½œå®ç°çš„ã€‚ åŸè¯­ä¸ºäº†é˜²æ­¢è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¢«å…¶ä»–çš„ç¨‹åºç»™æ‰“æ–­ï¼Œå¹¶ä¸”è¦ä¿è¯ç¨‹åºæ‰§è¡Œçš„å”¯ä¸€æ€§å’Œæ•°æ®ç»“æ„çš„å®Œæ•´æ€§ï¼Œæˆ‘ä»¬ä¸€å¦‚äº†åŸè¯­çš„æ¦‚å¿µã€‚ä¸€èˆ¬çš„ï¼ŒæŠŠç³»ç»Ÿæ€ä¸‹çš„æ‰§è¡Œçš„æŸäº›å…·æœ‰ç‰¹å®šåŠŸèƒ½çš„ç¨‹åºæ®µæˆä¸ºåŸè¯­ã€‚ åŒ…æ‹¬åˆ›å»ºåŸè¯­ï¼Œæ’¤é”€åŸè¯­ï¼Œé˜»å¡åŸè¯­ï¼Œå”¤é†’åŸè¯­ã€‚ è¿™é‡Œåªçœ‹ä¸‹è¿›ç¨‹åˆ›å»ºåŸè¯­çš„åŠŸèƒ½ï¼š é¦–å…ˆç”³è¯·ä¸€ä¸ªç©ºé—²çš„PCB,å¹¶æŒ‡å®šå”¯ä¸€çš„è¿›ç¨‹æ ‡å¿—å·PID ä¸ºæ–°è¿›ç¨‹åˆ†é…èµ„æºã€‚æ ¹æ®è°ƒç”¨è€…æä¾›çš„æ‰€éœ€å†…å­˜çš„å¤§å°ï¼Œä¸ºæ–°è¿›ç¨‹åˆ†é…å¿…è¦çš„å†…å­˜ç©ºé—´ï¼Œå¹¶ä¸”è£…å…¥è¯¥è¿›ç¨‹çš„è¯•é¢˜ï¼ˆç¨‹åºå’Œæ•°æ®ï¼‰ å°†æ–°è¿›ç¨‹çš„PCBåˆå§‹åŒ– è®²è¿›ç¨‹åŠ å…¥åˆ°å°±ç»ªé˜Ÿåˆ—ä¸­ è¿›ç¨‹è°ƒåº¦åœ¨å¤šé“çš„ç³»ç»Ÿä¸­ï¼Œå¾€å¾€è¿›ç¨‹æ•°ç›®å¤šä½™å¤„ç†æœºçš„æ•°ç›®ï¼Œä»–ä»¬éƒ½è¦ä½¿ç”¨å¤„ç†æœºè¿è¡Œè‡ªå·±çš„ç¨‹åºï¼Œæ‰€ä»¥å¤„ç†æœºæˆä¸ºç«äº‰çš„ä¸»è¦èµ„æºã€‚ è¿›ç¨‹è°ƒåº¦çš„æ–¹å¼ å¯å‰¥å¤ºè°ƒåº¦æ–¹å¼ å‰¥å¤ºåŸåˆ™1ï¼šä¼˜å…ˆçº§åŸåˆ™ å‰¥å¤ºåŸåˆ™2ï¼šçŸ­è¿›ç¨‹ä¼˜å…ˆåŸåˆ™ å‰¥å¤ºåŸåˆ™3ï¼šæ—¶é—´ç‰‡åŸåˆ™ å‰¥å¤ºåŸåˆ™4ï¼šå¼ºåˆ¶æ€§å‰¥å¤ºï¼ˆäººå·¥å¹²é¢„ï¼‰ éå¯å‰¥å¤ºè°ƒåº¦æ–¹å¼ è¿™ç§æ–¹å¼åˆç§°ä¸ºä¸å¯æŠ¢å å¼æ–¹å¼ã€‚è¿™æ˜¯æŒ‡ä¸€æ—¦æŠŠå¤„ç†æœºåˆ†é…ç»™æŸä¸ªè¿›ç¨‹ä¹‹åï¼Œåˆ™è¯¥è¿›ç¨‹ä¸€ç›´å ç”¨å¤„ç†æœºï¼Œåªæœ‰å½“è¿›ç¨‹è¿è¡Œå®Œæ¯•æˆ–è€…ç­‰å¾…æŸç§å¤–éƒ¨åŸå› è€Œä¸èƒ½ç»§ç»­è¿è¡Œè‡ªåŠ¨æ”¾å¼ƒå¤„ç†æœºçš„æƒ…å†µä¸‹ã€‚ç³»ç»Ÿæ‰æŠŠå¤„ç†æœºåˆ†é…ç»™å…¶ä»–çš„è¿›ç¨‹ã€‚ è¿›ç¨‹è°ƒåº¦ç®—æ³• å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•ï¼ˆä¸åˆ©äºæ®µä½œä¸šï¼Œä½†ç®—æ³•å®ç°ç®€å•ï¼‰ ä¼˜å…ˆæ•°æ³•ï¼ˆå…ˆæŒ‰ç…§æŸç§åŸåˆ™èµ‹ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œåˆåˆ†ä¸ºä¸‹é¢å‡ ç§ï¼‰ é™æ€ä¼˜å…ˆæ•°æ³•ï¼ˆåˆ›å»ºçš„æ—¶å€™èµ‹ç»™ä¸€ä¸ªä¼˜å…ˆæ•°ï¼‰ åŠ¨æ€ä¼˜å…ˆæ•°æ³•ï¼ˆæ ¹æ®è¿›ç¨‹çš„ç”Ÿå‘½æœŸåŠ¨æ€å˜åŒ–ï¼‰ æ—¶é—´ç‰‡è½®è½¬æ³•ï¼ˆä¸€ä¸ªè¿›ç¨‹å ç”¨ä¸€ç‚¹ï¼‰ æ³¨æ„è¿™é‡Œçš„æ—¶é—´ç‰‡è½®è½¬æ³•ï¼Œå¤ªé•¿çš„è¯ï¼Œå°±ä¼šå˜æˆå…ˆæ¥å…ˆæœåŠ¡ï¼Œå¤ªçŸ­çš„è¯ï¼Œè°ƒåº¦ç¨‹åºå‰¥å¤ºå¤„ç†æœºæ¬¡æ•°å¢å¤šï¼Œä¼šå¯¼è‡´åˆ‡æ¢æ¬¡æ•°å¤ªå¤§ï¼Œè€Œä¸”åŠ é‡äº†ç³»ç»Ÿå¼€é”€ã€‚ è¿›ç¨‹çš„åŒæ­¥ä¸äº’æ–¥ä¸€æ–¹é¢è¿›ç¨‹éœ€è¦äº’ç›¸åä½œæ‰èƒ½å¾…åˆ°è¿è¡Œç”¨æˆ·ä½œä¸šçš„ç›®çš„ï¼Œå¦å¤–ä¸€ä¸ªæ–¹é¢å°±è¿˜å­˜åœ¨æŸç§ç®€ä»‹æˆ–è€…ç›´æ¥çš„åˆ¶çº¦å…³ç³»ã€‚ ä¸´ç•Œèµ„æºï¼Œä¸´ç•ŒåŒºï¼šä¸€æ¬¡åªèƒ½ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨çš„èµ„æºæˆä¸ºä¸´ç•Œèµ„æºã€‚è®¿é—®ä¸´ç•Œèµ„æºçš„ç¨‹åºæ®µæˆä¸ºä¸´ç•ŒåŒºã€‚ è¿›ç¨‹çš„åŒæ­¥ï¼šè¿›ç¨‹ä¸ºäº†å®Œæˆé‚£ä¸ªæŸä¸ªå…±åŒçš„ç›®æ ‡ï¼Œå¿…é¡»ç›¸äº’åˆä½œçš„ååŒå·¥ä½œï¼Œæœ‰å‰åæ¬¡åºdeç›´æ¥åˆ¶çº¦å…³ç³»ï¼Œæˆä¸ºè¿›ç¨‹çš„åŒæ­¥ã€‚ è¿›ç¨‹çš„äº’æ–¥ï¼šå¤šä¸ªè¿›ç¨‹ä¸èƒ½åŒæ—¶è®¿é—®ä¸´ç•Œèµ„æºè€Œäº§ç”Ÿçš„åˆ¶çº¦å…³ç³»ã€‚ ä¸€ä¸ªæ˜¯åˆä½œï¼Œä¸€ä¸ªæ˜¯ç«äº‰ã€‚æˆ‘è§‰å¾—å¯ä»¥è¿™ä¹ˆç†è§£ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­åˆè®¾è®¡äº†PVæ“ä½œå’Œä¿¡å·é‡ã€‚ ä¿¡å·é‡æ˜¯ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆçš„ï¼šä¸€ä¸ªæˆå‘˜å˜é‡æ˜¯ä¿¡å·é‡çš„å€¼ï¼Œæ•´å‹ï¼Œå¦ä¸€ä¸ªæ˜¯PCBçš„æŒ‡é’ˆã€‚ å½“ä¿¡å·é‡çš„å€¼å¤§äºç­‰äº0æ—¶å€™ï¼Œå°±æ˜¯è¡¨ç¤ºå½“å‰å¯ç”¨èµ„æºçš„å®ä½“ä¸ªæ•°ã€‚å½“å®ƒçš„å€¼å°äº0çš„æ—¶å€™ï¼Œå°±è¡¨ç¤ºæ­£åœ¨ç­‰å¾…ä½¿ç”¨è¯¥èµ„æºçš„è¿›ç¨‹ä¸ªæ•°ã€‚å³åœ¨ä¿¡å·é‡é˜Ÿåˆ—ä¸Šæ’é˜Ÿçš„PCBçš„ä¸ªæ•°ã€‚ è¿›ç¨‹çš„é€šä¿¡æœºåˆ¶åˆšåˆšçš„åŒæ­¥å’Œäº’æ–¥æ˜¯ä½çº§é€šä¿¡ï¼Œæœ‰çš„æ—¶å€™å¦‚æœæˆ‘ä»¬éœ€è¦äº¤æ¢å¤§é‡çš„ä¿¡æ¯ï¼Œè¿™ç§æ–¹å¼å°±éœ€è¦ä¸“é—¨çš„é€šä¿¡æœºåˆ¶æ¥å®ç°ã€‚æˆ‘ä»¬æŠŠå®ç°è¿›ç¨‹äº¤æ¢å¤§é‡ä¿¡æ¯çš„é€šä¿¡æ–¹å¼æˆä¸ºé«˜çº§é€šä¿¡ã€‚ ä¸¤ç§æ–¹å¼ï¼š ç›´æ¥é€šä¿¡ï¼ˆæ¶ˆæ¯ç¼“å†²é€šä¿¡ï¼‰è¿‡ç¨‹æ˜¯ï¼šå‘é€è¿›ç¨‹åœ¨å‘é€æ¶ˆæ¯ä¹‹å‰ï¼Œå…ˆåœ¨å†…å­˜ä¸­è®¾ç½®ä¸€ä¸ªå‘é€åŒºï¼ŒæŠŠè¦å‘é€çš„æ¶ˆæ¯æ­£æ–‡è¿˜æœ‰è¿›ç¨‹åå¡«å…¥å…¶ä¸­ï¼Œç„¶åå‘é€æ¶ˆæ¯ç¨‹åºã€‚æ¥æ”¶ç¨‹åºåœ¨è¯»å–æ¶ˆæ¯ä¹‹å‰ï¼Œå…ˆåœ¨è‡ªå·±å ç”¨çš„å†…å­˜ç©ºé—´ä¸­è®¾ç½®ä¸€ä¸ªæ¶ˆæ¯æ¥å—åŒºï¼Œç„¶åè°ƒç”¨æ¥æ”¶æ¶ˆæ¯çš„ç¨‹åºã€‚ é—´æ¥é€šä¿¡ï¼ˆä¿¡ç®±é€šä¿¡ï¼‰è¿™ä¸ªæœ€å¤§çš„å¥½å¤„å°±æ˜¯å‘é€è¿›ç¨‹å’Œæ¥å—è¿›ç¨‹ä¹‹é—´æ²¡æœ‰æ—¶é—´ä¸Šçš„é™åˆ¶ã€‚æƒ³æƒ³ä¸ºå•¥å«ä¿¡ç®±ã€‚ è¿›ç¨‹å’Œçº¿ç¨‹çº¿ç¨‹æ˜¯ä¸€ä¸ªè¿›ç¨‹çš„å®ä½“ï¼Œæ˜¯CPUè°ƒåº¦å’Œåˆ†æ´¾åˆ°åŸºæœ¬å•ä½ï¼Œæ˜¯è¿›ç¨‹çš„ä¸€ä¸ªæ‰§è¡Œå•å…ƒã€‚è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ã€‚ æˆ‘ä»¬æŠŠè®¡ç®—æœºä¸­æ‰§è¡Œçš„ç¨‹åºæˆä¸ºçº¿ç¨‹ï¼Œè€Œä¸æ˜¯ç¨‹åºã€‚æ‰€è°“çº¿ç¨‹ï¼Œæ˜¯è¿›ç¨‹ä¸­æŸä¸ªå•ä¸€é¡ºåºçš„æ§åˆ¶æµ çº¿ç¨‹å¾ˆè½»ï¼Œæ‰€ä»¥åˆ‡æ¢éå¸¸è¿…é€Ÿï¼Œå‡å°‘äº†ç³»ç»Ÿçš„å¼€é”€ã€‚ åœ¨å¼•å…¥çº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œè°ƒåº¦çš„åŸºæœ¬å•ä½æ˜¯çº¿ç¨‹ï¼Œè€Œä¸æ˜¯è¿›ç¨‹ã€‚çœŸæ­£åœ¨CPUä¸Šæ‰§è¡Œçš„æ˜¯çº¿ç¨‹ã€‚ è¿›ç¨‹æ˜¯æŠ¢å å¤„ç†æœºçš„è°ƒåº¦å•ä½ã€‚æ‹¥æœ‰ä¸€ä¸ªå®Œæ•´çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚ åˆšåˆšçœ‹äº†ä¸€ä¸ªå¤šçº¿ç¨‹ï¼Œå•çº¿ç¨‹çš„ç†è§£ï¼Œç®€å•çš„å°±è¿™ä¹ˆç†è§£ï¼š ä½ æ—©ä¸Šä¸Šç­ï¼Œæ­£è¦æ‰“å¡çš„æ—¶å€™ï¼Œæ‰‹æœºå“äº†ã€‚ã€‚ä½ å¦‚æœå…ˆæ¥äº†ç”µè¯ï¼Œç­‰æ¥å®Œäº†ï¼Œåœ¨æ‰“å¡ï¼Œå°±æ˜¯å•çº¿ç¨‹ã€‚å¦‚æœä½ ä¸€æ‰‹æ¥ç”µè¯ï¼Œä¸€æ‰‹æ‰“å¡ã€‚å°±æ˜¯å¤šçº¿ç¨‹ã€‚2ä»¶äº‹çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚ã€‚ä½ æ¥äº†ç”µè¯ä¸”æ‰“äº†å¡ã€‚ â€”-æ¥è‡ªç½‘ç»œ å¤šçº¿ç¨‹æ˜¯ä¸ºäº†åŒæ­¥å®Œæˆå¤šé¡¹ä»»åŠ¡ï¼Œä¸æ˜¯ä¸ºäº†æé«˜è¿è¡Œæ•ˆç‡ï¼Œè€Œæ˜¯ä¸ºäº†æé«˜èµ„æºä½¿ç”¨æ•ˆç‡æ¥æé«˜ç³»ç»Ÿçš„æ•ˆç‡ã€‚çº¿ç¨‹æ˜¯åœ¨åŒä¸€æ—¶é—´éœ€è¦å®Œæˆå¤šé¡¹ä»»åŠ¡çš„æ—¶å€™å®ç°çš„ã€‚ æœ€ç®€å•çš„æ¯”å–»å¤šçº¿ç¨‹å°±åƒç«è½¦çš„æ¯ä¸€èŠ‚è½¦å¢ï¼Œè€Œè¿›ç¨‹åˆ™æ˜¯ç«è½¦ã€‚è½¦å¢ç¦»å¼€ç«è½¦æ˜¯æ— æ³•è·‘åŠ¨çš„ï¼ŒåŒç†ç«è½¦ä¹Ÿä¸å¯èƒ½åªæœ‰ä¸€èŠ‚è½¦å¢ã€‚å¤šçº¿ç¨‹çš„å‡ºç°å°±æ˜¯ä¸ºäº†æé«˜æ•ˆç‡ã€‚åŒæ—¶å®ƒçš„å‡ºç°ä¹Ÿå¸¦æ¥äº†ä¸€äº›é—®é¢˜ã€‚ æ€»ç»“è¿›ç¨‹è°ƒåº¦æ˜¯æ“ä½œç³»ç»Ÿæœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œè¦æŒæ¡çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«å’Œè”ç³»ã€‚è¦çŸ¥é“è¿›ç¨‹çš„è°ƒåº¦ç®—æ³•ã€‚è¦äº†è§£åŒæ­¥å’Œäº’æ–¥çš„å…³ç³»ã€‚è¿˜è¦çŸ¥é“å¹¶å‘å’Œå¹¶è¡Œçš„åŒºåˆ«ã€‚","categories":[{"name":"other","slug":"other","permalink":"http://sevencai.github.io/categories/other/"}],"tags":[{"name":"other","slug":"other","permalink":"http://sevencai.github.io/tags/other/"}]},{"title":"æ“ä½œç³»ç»Ÿä½“ç³»ç»“æ„-æ¢³ç†ä¸€","slug":"æ“ä½œç³»ç»Ÿä½“ç³»ç»“æ„-æ¢³ç†ä¸€","date":"2016-03-27T00:52:31.000Z","updated":"2016-12-12T02:54:28.000Z","comments":true,"path":"2016/03/27/æ“ä½œç³»ç»Ÿä½“ç³»ç»“æ„-æ¢³ç†ä¸€/","link":"","permalink":"http://sevencai.github.io/2016/03/27/æ“ä½œç³»ç»Ÿä½“ç³»ç»“æ„-æ¢³ç†ä¸€/","excerpt":"","text":"æœ€è¿‘æ…¢æ…¢çš„æŠŠæ“ä½œç³»ç»Ÿé‚£å—çš„ä¸œè¥¿æ¡èµ·æ¥ï¼Œçœ‹çš„æ¯”è¾ƒå¿«äº†ï¼Œå› ä¸ºé‡Œé¢çš„ä¸œè¥¿éƒ½æ²¡æœ‰å…¨éƒ¨å¿˜è®°ã€‚ä¸ºäº†æ–¹ä¾¿æ¯æ¬¡æŸ¥æ‰¾å’Œé—å¿˜ï¼Œæˆ‘æƒ³æŠŠè¿™ä¸ªæ•´ä½“ç®€å•çš„ä¸€äº›çŸ¥è¯†åšä¸€äº›æ¢³ç†ï¼Œç»†èŠ‚ä¸ä¼šè®²å¾ˆå¤šï¼Œå› ä¸ºè¿™æ ·æ‰ä¼šæ¯æ¬¡å»æƒ³è¿™ä¸ªåˆ°åº•æ˜¯ä»€ä¹ˆã€‚å…·ä½“çš„çŸ¥è¯†æ¢³ç†æˆ‘çœ‹çš„å°±æ˜¯å­¦æ ¡å‘çš„æ•™æã€Šæ“ä½œç³»ç»ŸåŸç†åˆ†æã€‹ã€‚å…ˆå‰çœ‹åˆ°äº†winterå¤§ç¥çš„ã€è¿™ç¯‡ã€‘æ–‡ç« ï¼Œè§‰å¾—é‡Œé¢è¯´çš„å»ºç«‹è‡ªå·±çš„çŸ¥è¯†ä½“ç³»ç»“æ„ç­‰ç­‰ï¼Œæˆ‘è§‰å¾—ç‰¹åˆ«æ£’ã€‚ æ“ä½œç³»ç»Ÿçš„æ¦‚è¿°å…ˆé—®è‡ªå·±å‡ ä¸ªé—®é¢˜ï¼š æ“ä½œç³»ç»Ÿæ˜¯ä»€ä¹ˆï¼Ÿ æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ æ“ä½œç³»ç»Ÿæ˜¯æ€ä¹ˆå‘å±•çš„ï¼Ÿ æ“ä½œç³»ç»Ÿæœ‰å“ªäº›ç±»å‹ï¼Ÿ linuxçš„ä¼˜è¶Šæ€§èƒ½ï¼Ÿ å¦‚æœéƒ½ç­”å‡ºæ¥äº†ï¼Œä¸‹é¢çš„å°±å¯ä»¥å¿½ç•¥å•¦ã€‚ æ“ä½œç³»ç»Ÿæ˜¯ä»€ä¹ˆï¼Ÿæ“ä½œç³»ç»Ÿæ˜¯ä¸€ç»„æ§åˆ¶å’Œç®¡ç†è®¡ç®—æœºç³»ç»Ÿèµ„æºçš„ç¨‹åºé›†åˆï¼Œå®ƒæ§åˆ¶å’Œåè°ƒå¹¶å‘èµ·æ´»åŠ¨ï¼Œä¸ºç”¨æˆ·æä¾›è‰¯å¥½çš„æ¥å£ã€‚ æ“ä½œç³»ç»Ÿæœ‰4ä¸ªç‰¹å¾ï¼šå¹¶å‘æ€§ï¼Œå…±äº«æ€§ï¼Œä¸ç¡®å®šæ€§ï¼Œè™šæ‹Ÿæ€§ã€‚ä¸‹é¢æ˜¯å…·ä½“çš„è¿™å‡ ä¸ªç‰¹ç‚¹çš„è§£é‡Šã€‚ å¹¶å‘æ€§å¹¶å‘æ€§æ˜¯æŒ‡è®¡ç®—æœºä¸­è‹¥å­˜åœ¨å¹²ä¸ªç¨‹åºçš„è¿è¡Œï¼Œç³»ç»Ÿä¸­å¤šä¸ªæ´»åŠ¨åŒæ—¶è¿›è¡Œï¼ŒI/Oæ“ä½œå’Œè®¡ç®—æœºæ“ä½œé‡å ã€‚ç›®çš„æ˜¯æ”¹å–„ç³»ç»Ÿèµ„æºçš„åˆ©ç”¨ç‡ï¼Œæé«˜äº†ç³»ç»Ÿçš„ååé‡ï¼Œä½†æ˜¯å®ƒä¹Ÿä½¿ç³»ç»Ÿå¤æ‚è¯äº†ï¼Œæ“ä½œç³»ç»Ÿå¿…é¡»å…·æœ‰æ§åˆ¶å’Œç®¡ç†å„ç§å¹¶å‘æ´»åŠ¨çš„èƒ½åŠ›ã€‚ å…±äº«æ€§å…±äº«æ€§æ˜¯æŒ‡å¤šä¸ªè®¡ç®—æœºä»»åŠ¡å¯¹ç³»ç»Ÿèµ„æºçš„å…±åŒäº«ç”¨ï¼Œæ“ä½œç³»ç»Ÿç¨‹åºä¸å¤šä¸ªç”¨æˆ·ç¨‹åºå…¬ç”¨ç³»ç»Ÿä¸­çš„å„ä¸ªèµ„æºï¼Œæ¯”å¦‚ä¸­å¤®å¤„ç†å™¨,å†…å¤–å­˜å‚¨å™¨ï¼Œå¤–éƒ¨è®¾å¤‡ï¼Œæ–‡ä»¶ç­‰ã€‚ ä¸ç¡®å®šæ€§åœ¨å¤šé“ç¨‹åºä¸­ç¯å¢ƒä¸‹ï¼Œæ“ä½œç³»ç»Ÿçš„è¿è¡Œå®åœ¨éšæœºçš„ç¯å¢ƒä¸‹è¿è¡Œçš„ã€‚ è¿™é‡Œçš„éšæœºæ˜¯æŒ‡ï¼šæ“ä½œç³»ç»Ÿä¸å¯èƒ½å¯¹æ‰€è¿è¡Œçš„ç¨‹åºçš„è¡Œä¸ºå’Œç¡¬ä»¶è®¾å¤‡çš„æƒ…å†µä½œå‡ºä»»ä½•äº‹å…ˆå‡å®šã€‚ è™šæ‹Ÿæ€§æ‰€è°“çš„è™šæ‹Ÿï¼Œæ˜¯æŒ‡çš„æŠŠä¸€ä¸ªç‰©ç†ä¸Šçš„å®ä½“å˜ä¸ºè‹¥å¹²çš„é€»è¾‘ä¸Šçš„å¯¹åº”ç‰©ã€‚ç‰©ç†å®ä½“æ˜¯å®çš„ï¼Œè€Œåè€…æ˜¯è™šçš„ï¼Œç›¸åº”çš„ï¼Œç”¨äºå®ç°è™šæ‹Ÿçš„æŠ€æœ¯ï¼Œæˆä¸ºè™šæ‹ŸæŠ€æœ¯ã€‚ æ¯”å¦‚åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œåˆ†åˆ«ç”¨æ¥å®ç°è™šæ‹Ÿå¤„ç†æœºï¼Œè™šæ‹Ÿå†…å­˜ï¼Œè™šæ‹Ÿå¤–éƒ¨è®¾å¤‡å’Œè™šæ‹Ÿä¿¡é“ã€‚ æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½å¤„ç†æœºç®¡ç† å­˜å‚¨ç®¡ç† è®¾å¤‡ç®¡ç† æ–‡ä»¶ç®¡ç† ä½œä¸šç®¡ç† å¤„ç†æœºç®¡ç†ä¸ºäº†å‡†ç¡®çš„æè¿°å¤šé“ç³»ç»Ÿä¸­å¤šä¸ªä½œä¸šçš„è¿è¡Œæƒ…å†µï¼Œä»¥åŠç³»ç»Ÿèµ„æºåˆ†é…çš„æƒ…å†µï¼Œé‡‡ç”¨ä»€ä¹ˆå¯ä»¥åæ˜ ä¸æè¿°è®¡ç®—æœºç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹å’Œèµ„æºå…±äº«å’Œç”¨æˆ·éšæœºçš„ç‰¹ç‚¹å‘¢ï¼Ÿ æ“ä½œç³»ç»Ÿå¼•å…¥äº†è¿›ç¨‹çš„æ¦‚å¿µï¼Œè¿›ç¨‹æ˜¯èµ„æºåˆ†é…å’Œç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½å’ŒåŸºæœ¬å®ä½“ã€‚ æ‰€ä»¥æˆ‘ä»¬è¿™é‡ŒæŠŠå¤„ç†æœºç®¡ç†å¯å½’ç»“ä¸ºè¿›ç¨‹ç®¡ç†ã€‚ å…·ä½“çš„æ“ä½œç³»ç»Ÿå…¶ä»–åŠŸèƒ½åŒ…æ‹¬è¿›ç¨‹ç®¡ç†ç­‰ï¼Œä¸‹ä¸€ç¯‡æ–‡ç« å•ç‹¬åšè®°å½•ã€‚ æ“ä½œç³»ç»Ÿçš„å‘å±•æ— æ“ä½œç³»ç»Ÿçš„è®¡ç®—æœºç³»ç»Ÿ æ—©æœŸç®€å•æ‰¹å¤„ç†æ“çºµç³»ç»Ÿ å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿ æ“ä½œç³»ç»Ÿçš„ç±»å‹ä¸‹é¢åªåˆ—ä¸¾äº†é’ˆå¯¹ä¸åŒçš„ä½¿ç”¨ç¯å¢ƒå’Œå¯¹ä½œä¸šçš„å¤„ç†æ–¹å¼æ¥åˆ†çš„æƒ…å†µï¼š å•ç”¨æˆ·æ“ä½œç³»ç»Ÿ æ‰¹å¤„ç†æ“ä½œç³»ç»Ÿ åˆ†æ—¶æ“ä½œç³»ç»Ÿ å®æ—¶æ“ä½œç³»ç»Ÿ é€šç”¨æ“ä½œç³»ç»Ÿ ç½‘ç»œæ“ä½œç³»ç»Ÿ åˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿ å•ç”¨æˆ·æ“ä½œç³»ç»Ÿä¸€æ¬¡åªèƒ½æ”¯æŒä¸€ä¸ªç”¨æˆ·ç¨‹åºçš„è¿è¡Œã€‚å•ç”¨æˆ·æ“ä½œç³»ç»Ÿå‘ç”¨æˆ·æä¾›ç»ƒçº§çš„äº¤äº’ç¯å¢ƒã€‚æ¯”å¦‚MS-DOSå°±æ˜¯ä¸€ä¸ªå…¸å‹çš„å•ç”¨æˆ·æ“ä½œç³»ç»Ÿã€‚ æ‰¹å¤„ç†æ“ä½œç³»ç»Ÿ é¡¾åæ€ä¹‰ï¼šæ‰¹å¤„ç†æ“ä½œç³»ç»Ÿå°±æ˜¯å¯¹å¤šä¸ªç”¨æˆ·çš„ä½œä¸šè¿›è¡Œæˆæ‰¹çš„å¤„ç†ï¼Œæ‰¹å¤„ç†ç³»ç»Ÿçš„è®¾è®¡ç›®æ ‡æ˜¯æåˆ°ç³»ç»Ÿèµ„æºçš„ä½¿ç”¨ç‡å’Œä½œä¸šååé‡ã€‚ è¿™é‡Œé¢åˆåˆ†ä¸ºäº†å•é“æ‰¹å¤„ç†ç³»ç»Ÿå’Œå¤šé“æ‰¹å¤„ç†ç³»ç»Ÿã€‚ å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿæ˜¯æ¯ä¸€æ¬¡æŠŠä¸€æ‰¹ç»è¿‡åˆç†æ­é…çš„ä½œä¸šé€šè¿‡è¾“å…¥è®¾å¤‡æäº¤ç»™æ“ä½œç³»ç»Ÿï¼Œå¹¶æš‚æ—¶å­˜å…¥å¤–å­˜ï¼Œç­‰å¾…è¿è¡Œã€‚ å½“ç³»ç»Ÿéœ€è¦è°ƒåº¦æ–°çš„ä½œä¸šçš„æ—¶å€™ï¼Œå°±æ ¹æ®è¿è¡Œçš„æƒ…å†µå’Œç”¨æˆ·è¦æ±‚ï¼ŒæŒ‰ç…§æŸç§è°ƒåº¦åŸåˆ™ï¼Œä»å¤–å­˜ä¸­æŒ‘é€‰ä¸€ä¸ªæˆ–è€…å‡ ä¸ªä½œä¸šè£…å…¥å†…å­˜è¿è¡Œã€‚ æ­¤è¿‡ç¨‹çš„æœ€å¤§ç‰¹ç‚¹å°±æ˜¯è„±æœºå¤„ç†ï¼Œç³»ç»Ÿè¿è¡Œçš„è¿‡ç¨‹ä¸­ä¸å…è®¸ç”¨æˆ·ä¸ä½œä¸šäº¤äº’ä½œä¸šï¼Œç”¨æˆ·ä¸èƒ½ç›´æ¥å¹²é¢„è‡ªå·±çš„ä½œä¸šçš„è¿è¡Œï¼ŒçŸ¥é“è¿è¡Œä½œä¸šè¿è¡Œå®Œæ¯•ã€‚ è¿™æ˜¯æ—©æœŸçš„ä¸€ç§å¤§å‹æœºç”¨çš„æ“ä½œç³»ç»Ÿã€‚æ— äº¤äº’æ€§ã€‚ åˆ†æ—¶æ“ä½œç³»ç»Ÿä¸ºå…‹æœå¤šé“æ‰¹å¤„ç†ç³»ç»Ÿçš„ç¼ºç‚¹ï¼Œå‡ºç°äº†åˆ†æ—¶ç³»ç»Ÿã€‚ åˆ†æ—¶ç³»ç»Ÿæ˜¯æŒ‡ä¸€å°è®¡ç®—æœºä¸»æœºè¿æ¥ç€å¤šä¸ªç»ˆç«¯æœºï¼Œå¯ä»¥è¢«å¤šä¸ªç”¨æˆ·åŒæ—¶å¤„ç†ä½¿ç”¨ï¼Œæ¯ä¸ªç”¨æˆ·é€šè¿‡è‡ªå·±ä½¿ç”¨çš„ç»ˆç«¯é‡‡ç”¨äººæœºå¯¹è¯çš„å½¢å¼æ§åˆ¶è‡ªå·±çš„ç¨‹åºï¼Œç³»ç»Ÿå°†cpuåˆ†æˆæ—¶é—´ç‰‡ä¸ºå¤šä¸ªç»ˆç«¯ç”¨æˆ·æœåŠ¡ã€‚ ç›®æ ‡æ˜¯ï¼šåŠæ—¶å“åº”ï¼Œå¹¶åœ¨å¯èƒ½çš„æƒ…å†µä¸‹æé«˜èµ„æºçš„åˆ©ç”¨ç‡ã€‚ å®æ—¶æ“ä½œç³»ç»Ÿæ˜¯æŒ‡å¯¹è®¡ç®—æœºçš„ç‰¹å®šè¾“å…¥åšå‡ºå¿«é€Ÿçš„ååº”ï¼Œä»¥æ§åˆ¶å‘å‡ºå®æ—¶ä¿¡å·çš„å¯¹è±¡ï¼Œå³è®¡ç®—æœºåŠæ—¶å“åº”å¤–éƒ¨çš„è¯·æ±‚ï¼Œåœ¨è§„å®šçš„çŸ­æ—¶é—´å†…å®Œæˆè¿™ä¸ªäº‹æƒ…ã€‚ å®æ—¶å°±æ˜¯ç«‹å³ï¼Œç°åœ¨çš„æ„æ€ã€‚ ç½‘ç»œæ“ä½œç³»ç»Ÿæ˜¯ä½¿ç½‘ç»œä¸Šå„è®¡ç®—æœºèƒ½æ–¹ä¾¿è€Œæœ‰æ•ˆçš„å…±äº«ç½‘ç»œçš„èµ„æºï¼Œä¸ºç½‘ç»œç”¨æˆ·æä¾›å„ç§è½¯ä»¶å’Œè§„ç¨‹ï¼ˆå¦‚åè®®ï¼‰çš„é›†åˆã€‚ ä¿¡æ¯äº¤æ¢ï¼Œèµ„æºå…±äº«ï¼Œè‡ªæ²»ï¼Œåˆ†æ•£ã€‚æ˜¯å…¶ç‰¹ç‚¹ã€‚ åˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿç”±å¤šå°è®¡ç®—æœºç»„æˆã€‚è¿™äº›è®¡ç®—æœºç³»ç»Ÿèµ„æºå¯ä»¥åˆ†å¸ƒåœ¨ä¸åŒçš„åœ°ç†ä½ç½®ï¼Œä½†åœ¨é€»è¾‘ä¸Šæ˜¯ä¸€ä¸ªå®Œæ•´çš„è®¡ç®—æœºç³»ç»Ÿã€‚ ç»Ÿä¸€æ€§ï¼Œå…±äº«æ€§ï¼Œé€æ˜æ€§ï¼Œè‡ªæ²»æ€§ï¼Œç‹¬ç«‹æ€§ã€‚ ä¸ç½‘ç»œæ“ä½œç³»ç»Ÿä¸åŒï¼Œåˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿç½‘ç»œçš„æ¦‚å¿µè¢«æ·¡åŒ–äº†ï¼Œæ‰€æœ‰èµ„æºéƒ½ç”¨åŒä¸€æ–¹å¼è¿›è¡Œç®¡ç†å’Œè®¿é—®ï¼Œç”¨æˆ·ä¸éœ€è¦çŸ¥é“èµ„æºåœ¨å“ªé‡Œæˆ–è€…æ˜¯æ€ä¹ˆå­˜å‚¨çš„ã€‚ æ³¨æ„è¿™é‡Œçš„é€æ˜ã€‚ç½‘ç»œæ“ä½œç³»ç»Ÿçš„èµ„æºæ˜¯é€æ˜çš„å—ï¼Ÿå½“ç„¶ä¸æ˜¯äº†ã€‚ linuxçš„ä¼˜è¶Šæ€§èƒ½é¦–å…ˆlinuxç¬¬ä¸€ä¸ªè‚¯å®šæ˜¯æœ€å¥½çš„å°±æ˜¯å¼€æºå’Œå…è´¹ã€‚å¹¶ä¸”æ”¯æŒå¤šç”¨æˆ·ï¼Œå¤šä»»åŠ¡ã€‚è¿˜æœ‰éå¸¸å¥½çš„ç•Œé¢ï¼ŒåŒæ—¶å…·æœ‰å­—ç¬¦ç•Œé¢å’Œå›¾å½¢ç•Œé¢ã€‚è¿˜æœ‰å¾ˆå¼ºå¤§çš„ç½‘ç»œåŠŸèƒ½ã€‚æ”¯æŒå¤šç§æ–‡ä»¶ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§ç¡¬ä»¶å¹³å°ã€‚","categories":[{"name":"other","slug":"other","permalink":"http://sevencai.github.io/categories/other/"}],"tags":[{"name":"other","slug":"other","permalink":"http://sevencai.github.io/tags/other/"}]},{"title":"Dateå¯¹è±¡","slug":"Dateå¯¹è±¡","date":"2016-03-24T07:57:18.000Z","updated":"2016-12-12T02:59:26.000Z","comments":true,"path":"2016/03/24/Dateå¯¹è±¡/","link":"","permalink":"http://sevencai.github.io/2016/03/24/Dateå¯¹è±¡/","excerpt":"","text":"Dateå¯¹è±¡ï¼Œä»¥å‰æ¯æ¬¡çœ‹ä¹¦éƒ½æ²¡æœ‰é‡è§†è¿‡ï¼Œæ¯æ¬¡è¦ç”¨çš„æ—¶å€™å°±å»æŸ¥ç›¸åº”çš„å‡½æ•°ï¼Œapiä¸ç†Ÿæ‚‰ã€‚è™½ç„¶å¯èƒ½å¤±è´¥äº†ï¼Œä½†æ˜¯çŸ¥é“è‡ªå·±å“ªé‡Œä¸è¡Œï¼Œèƒ½å­¦åˆ°ä¸œè¥¿å°±å·²ç»å¾ˆå¼€å¿ƒäº†ï¼Œè€Œä¸”è¿˜æ¶¨äº†ä¸ªæ•™è®­ï¼ŒæŒºå¥½çš„ã€‚ä¸‹é¢æ¥çœ‹çœ‹apiå¾—åˆ°çš„å…·ä½“ç»“æœæ˜¯ä»€ä¹ˆã€‚123456789101112131415161718var now = new Date();console.log(now);console.log(now.toLocaleString());console.log(now.toGMTString());console.log(now.getUTCDate());console.log(now.getTime());console.log(now.valueOf());console.log(Date.parse(now));console.log(now.getDate());console.log(now.getDay());console.log(now.getHours());console.log(now.getFullYear());console.log(now.toString());var dt = new Date(\"2012-12-1\");console.log(dt); åˆ¤æ–­æ—¶é—´å°±ç”¨æ—¶é—´æˆ³æ˜¯æœ€æ–¹ä¾¿çš„ï¼ŒæŠŠæ¯ä¸ªæ—¶é—´æˆ³éƒ½ç®—å‡ºæ¥ã€‚ç„¶åå¯¹æ¯”æ˜¯ä¸æ˜¯åœ¨ç›¸åº”çš„æ—¶é—´æ®µå†…ã€‚å½“æ—¶å†™çš„æ—¶å€™ï¼Œä¸èƒ½åœ¨æœ¬æœºè°ƒè¯•ï¼Œæ‰€ä»¥ä¸çŸ¥é“æ¯ä¸ªè°ƒç”¨å‡½æ•°å¾—åˆ°çš„ç»“æœæ˜¯ä»€ä¹ˆã€‚è¿˜æ˜¯è¦å¤šå†™å¤šç»ƒæ‰å¥½ï¼Œè¿™æ ·ç†Ÿäº†ï¼Œä¹Ÿä¸ç”¨ä¸€ä¸ªä¸ªå»æ‰“å°è°ƒè¯•äº†ã€‚åŠ æ²¹ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748//è·å–æŸå¹´æŸæœˆæŸå¤©çš„0ç‚¹çš„æ—¶é—´æˆ³function setDate0(dateTime)&#123; var year = dateTime.getFullYear(); var month = dateTime.getMonth(); var day = dateTime.getDate(); var newDate = new Date(year,month,day,0,0,0); return newDate.getTime();&#125;function printTime(datetime)&#123; //è®¾ç½®ä¸€å¤©çš„å¾®ç§’æ•° var micro = 24*60*60*1000; //è·å–dateTimeå¯¹åº”çš„æ—¶é—´å¯¹è±¡,datetimeä¸ºæ—¶é—´æˆ³ï¼Œå¤§å°å†™åŒºåˆ† var dateTime = new Date(datetime); //è·å–ä»Šå¤©æ­¤åˆ»çš„æ—¶é—´æˆ³å’Œæ—¶é—´ var today = new Date(); var todayTS = today.getTime(); //è·å–ä»Šå¤©0ç‚¹çš„æ—¶é—´æˆ³ var today0 = setDate0(today); //æ˜å¤©çš„0ç‚¹æ—¶é—´æˆ³ var tom0 = today0 + micro; //è·å–æ˜¨å¤©é›¶ç‚¹çš„æ—¶é—´æˆ³ var yesterday0 = today0 - micro; //è·å–ä¸€ä¸ªæœ¬æ˜ŸæœŸä¸€å¼€å¤´çš„æ—¶é—´æˆ³ var week0 = today0 - ((today.getDay()+6)%7)*micro; console.log(today0+\"hello\"+tom0+\"world\"+week0); //å¼€å§‹åˆ¤æ–­å’Œè¾“å‡º if(datetime &gt;= today0 &amp;&amp; datetime &lt; tom0)&#123; return dateTime.getHours()+\":\"+dateTime.getMinutes(); &#125;else if(datetime &gt;= yesterday0 &amp;&amp; datetime &lt; today0)&#123; return \"æ˜¨å¤©\"; &#125;else if(datetime &gt;= week0 &amp;&amp; datetime &lt; yesterday0)&#123; var arr = [\"å‘¨æ—¥\",\"å‘¨ä¸€\",\"å‘¨äºŒ\",\"å‘¨ä¸‰\",\"å‘¨å››\",\"å‘¨äº”\",\"å‘¨å…­\"]; return arr[dateTime.getDay()]; &#125;else&#123; return null; &#125;&#125;console.log(printTime(1458803593715));","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"BFC-Block Formatting Context","slug":"BFC-Block-Formatting-Context","date":"2016-03-20T01:43:53.000Z","updated":"2017-12-19T12:40:23.000Z","comments":true,"path":"2016/03/20/BFC-Block-Formatting-Context/","link":"","permalink":"http://sevencai.github.io/2016/03/20/BFC-Block-Formatting-Context/","excerpt":"","text":"ä»¥å‰çŸ¥é“BFC,ä½†æ˜¯æ„Ÿè§‰ç†è§£çš„ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œä»Šå¤©æŸ¥äº†äº›èµ„æ–™æ€»ç»“è®°å½•å¦‚ä¸‹ã€‚ A Block Formatting Context is part of the visual CSS rendering of a web page in which block boxes are laid out. The positioning scheme to which it belongs is normal flow. è¿™å¥è¯å‘Šè¯‰äº†æˆ‘ä»¬ï¼Œç¬¬ä¸€ï¼ŒBFCæ˜¯å¯è§†åŒ–æ ¼å¼æ¨¡å‹ï¼ˆVisual Formattting Modelï¼‰çš„ä¸€ä¸ªéƒ¨åˆ†ã€‚ç¬¬äºŒï¼ŒBFCå±äºæ™®é€šæµä¸­çš„ä¸€ç§ã€‚ æ€»çš„æ¥è¯´å…³ç³»æ˜¯ï¼šå¯è§†åŒ–æ ¼å¼æ¨¡å‹&gt;å®šä½æ–¹æ¡ˆ&gt;æ™®é€šæµ&gt;BFC. å‰æçŸ¥è¯†åœ¨cssçš„å¯è§†åŒ–æ ¼å¼æ¨¡å‹ï¼ˆVisual Formattting Modelï¼‰ä¸­æœ‰ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼šå®šä½æ–¹æ¡ˆã€‚ å®šä½æ–¹æ¡ˆåˆ†ä¸ºä¸‰ç§å®šä½æ–¹æ¡ˆï¼š æ™®é€šæµ(Normal Flow) æµ®åŠ¨ï¼ˆFloatsï¼‰ ç»å¯¹å®šä½ï¼ˆAbsolute Positioningï¼‰ æ™®é€šæµï¼ˆNormal Flowï¼‰åœ¨æ™®é€šæµä¸­ï¼Œå…ƒç´ æŒ‰ç…§å…¶åœ¨ HTML ä¸­çš„å…ˆåä½ç½®è‡³ä¸Šè€Œä¸‹å¸ƒå±€ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œè¡Œå†…å…ƒç´ æ°´å¹³æ’åˆ—ï¼Œç›´åˆ°å½“è¡Œè¢«å æ»¡ç„¶åæ¢è¡Œï¼Œå—çº§å…ƒç´ åˆ™ä¼šè¢«æ¸²æŸ“ä¸ºå®Œæ•´çš„ä¸€ä¸ªæ–°è¡Œï¼Œ é™¤éå¦å¤–æŒ‡å®šï¼Œå¦åˆ™æ‰€æœ‰å…ƒç´ é»˜è®¤éƒ½æ˜¯æ™®é€šæµå®šä½ï¼Œä¹Ÿå¯ä»¥è¯´ï¼Œæ™®é€šæµä¸­å…ƒç´ çš„ä½ç½®ç”±è¯¥å…ƒç´ åœ¨ HTML æ–‡æ¡£ä¸­çš„ä½ç½®å†³å®šã€‚ æµ®åŠ¨ï¼ˆFloatsï¼‰åœ¨æµ®åŠ¨å¸ƒå±€ä¸­ï¼Œå…ƒç´ é¦–å…ˆæŒ‰ç…§æ™®é€šæµçš„ä½ç½®å‡ºç°ï¼Œç„¶åæ ¹æ®æµ®åŠ¨çš„æ–¹å‘å°½å¯èƒ½çš„å‘å·¦è¾¹æˆ–å³è¾¹åç§»ï¼Œå…¶æ•ˆæœä¸å°åˆ·æ’ç‰ˆä¸­çš„æ–‡æœ¬ç¯ç»•ç›¸ä¼¼ã€‚ ç»å¯¹å®šä½ï¼ˆAbsolute Positioningï¼‰åœ¨ç»å¯¹å®šä½å¸ƒå±€ä¸­ï¼Œå…ƒç´ ä¼šæ•´ä½“è„±ç¦»æ™®é€šæµï¼Œå› æ­¤ç»å¯¹å®šä½å…ƒç´ ä¸ä¼šå¯¹å…¶å…„å¼Ÿå…ƒç´ é€ æˆå½±å“ï¼ˆå¦‚æœçœ‹äº†ä¸Šæ–‡çš„ç«¥é‹ï¼Œä¼šå‘ç°è¿™ç‚¹ä¸æµ®åŠ¨å…ƒç´ ä¼šå½±å“å…„å¼Ÿå…ƒç´ æ˜¯ä¸åŒçš„ï¼‰ï¼Œè€Œå…ƒç´ å…·ä½“çš„ä½ç½®ç”±ç»å¯¹å®šä½çš„åæ ‡å†³å®šã€‚ åœ¨è¿™ä¸ªæ™®é€šæµä¸­ï¼Œå°±æœ‰ä¸€ç§å¸ƒå±€ï¼šBFC,å®ƒä¸ä¼šå¯¹å…„å¼Ÿå…ƒç´ é€ æˆä»€ä¹ˆå½±å“ã€‚ é‚£ä¹ˆåˆ°åº•ä»€ä¹ˆäº‹BFCå‘¢ï¼Ÿä»æ ·å¼ä¸Šçœ‹ï¼Œå…·æœ‰ BFC çš„å…ƒç´ ä¸æ™®é€šçš„å®¹å™¨æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ ä½†æ˜¯ä»åŠŸèƒ½ä¸Šï¼Œå…·æœ‰ BFC çš„å…ƒç´ å¯ä»¥çœ‹ä½œæ˜¯éš”ç¦»äº†çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å…ƒç´ ä¸ä¼šåœ¨å¸ƒå±€ä¸Šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ï¼Œå¹¶ä¸” BFC å…·æœ‰æ™®é€šå®¹å™¨æ²¡æœ‰çš„ä¸€äº›ç‰¹æ€§ï¼Œä¾‹å¦‚å¯ä»¥åŒ…å«æµ®åŠ¨å…ƒç´ ï¼Œæ¯”å¦‚æ¸…é™¤æµ®åŠ¨çš„æ–¹æ³•ï¼ˆå¦‚ overflow æ–¹æ³•ï¼‰å°±æ˜¯è§¦å‘äº†æµ®åŠ¨å…ƒç´ çš„çˆ¶å…ƒç´ çš„ BFC ï¼Œä½¿åˆ°å®ƒå¯ä»¥åŒ…å«æµ®åŠ¨å…ƒç´ ï¼Œä»è€Œé˜²æ­¢å‡ºç°é«˜åº¦å¡Œé™·çš„é—®é¢˜ã€‚ ç®€å•æ¥è¯´ï¼ŒBFC å°±æ˜¯ä¸€ç§å±æ€§ï¼Œè¿™ç§å±æ€§ä¼šå½±å“ç€å…ƒç´ çš„å®šä½ä»¥åŠä¸å…¶å…„å¼Ÿå…ƒç´ ä¹‹é—´çš„ç›¸äº’ä½œç”¨ã€‚ å†ç®€å•çš„æ¥è¯´ï¼Œç”¨äº†ä¸‹é¢çš„ä¸€äº›å±æ€§åï¼Œä½ å°±åˆ›å»ºäº†ä¸€ä¸ªBFCã€‚è¿™ä¸ªBFCåŠŸèƒ½ä¸Šä¸åŒäºæ™®é€šå®¹å™¨ã€‚ è¿™ä¸ªBFCå¹¶ä¸æ˜¯è¿™äº›å…ƒç´ ï¼Œè€Œæ˜¯æŸäº›å…ƒç´ çš„å¸¦æœ‰å±æ€§äº§ç”Ÿäº†BFC. æ€ä¹ˆæ ·å½¢æˆBFC Floats, absolutely positioned elements, inline-blocks, table-cells, table-captions, and elements with â€˜overflowâ€™ other than â€˜visibleâ€™ (except when that value has been propagated to the viewport) establish new block formatting contexts. æµ®åŠ¨ã€ç»å¯¹å®šä½å…ƒç´ ï¼ˆposition ä¸º absolute æˆ– fixedï¼‰ã€è¡Œå†…å—å…ƒç´  display:inline-block ã€è¡¨æ ¼å•å…ƒæ ¼ display:table-cell ã€è¡¨æ ¼æ ‡é¢˜ display:table-caption ä»¥åŠoverflow å±æ€§å€¼éƒ¨ä½visible çš„å…ƒç´ ï¼ˆé™¤äº†è¯¥å€¼è¢«ä¼ æ’­åˆ°è§†ç‚¹viewportçš„æƒ…å†µï¼‰å°†åˆ›å»ºä¸€ä¸ªæ–°çš„å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€‚ ä¹Ÿå°±æ˜¯è¯´ä¸‹é¢çš„æƒ…å†µä¼šå½¢æˆä¸€ä¸ªBFCï¼š 1. floatçš„å€¼ä¸ä¸ºnone 2. positionçš„å€¼ä¸ä¸ºstaticæˆ–è€…relative 3. displayçš„å€¼ä¸ºtable-cell,table-caption,inline-block,flex,inlineflex 4. overflowçš„å€¼ä¸ä¸ºvisible åˆ›å»ºä¸€ä¸ªå—çº§æ ¼å¼ä¸Šä¸‹æ–‡å¯èƒ½äº§ç”Ÿçš„é—®é¢˜ä¸€ä¸ªBFCå¯ä»¥é€šè¿‡ä¸Šé¢çš„å¾ˆå¤šcssæ ·å¼è§¦å‘ï¼Œä½†æ¯•ç«Ÿä¸Šé¢çš„CSSå±æ€§éƒ½æœ‰è‡ªå·±åŸæœ¬çš„æ ·å¼ï¼Œé‚£ä¹ˆä¹…å¯èƒ½åœ¨åŸæ¥çš„åŸºç¡€ä¸Šï¼ŒåŠ å…¥äº†ä¸€äº›æˆ‘ä»¬ä¸éœ€è¦çš„æ ·å­ã€‚æ¯”å¦‚è¯´ï¼š display:tableå¯èƒ½å¼•å‘å“åº”å¼é—®é¢˜ overflow:scrollå¯èƒ½äº§ç”Ÿå¤šä½™çš„æ»šåŠ¨æ¡ float:leftæµ®åŠ¨ï¼Œå°†æŠŠå…ƒç´ ç§»åŠ¨åˆ°å·¦ä¾§ï¼Œå¹¶è¢«å…¶ä»–å…ƒç´ ç¯ç»• overflow:hiddenè®²å‰ªè£æº¢å‡ºå…ƒç´  æ‰€ä»¥ï¼Œå’±ä»¬åœ¨åˆ›å»ºä¸€ä¸ªBFCçš„æ—¶å€™ï¼Œå°±è¦é€‰æ‹©æœ€æ°å½“çš„æ ·å¼ï¼Œä¸€èˆ¬å¯ä»¥é€‰ç”¨overflow:hiddenã€‚123.container&#123; overflow:hidden;&#125; é‚£ä¹ˆBFCåˆ°åº•æœ‰å¾ˆä¹ˆç‰¹ç‚¹å’Œä½œç”¨å‘¢ï¼Ÿ BFCä¸­çš„ç›’å­å¯¹é½ In a block formatting context, each boxâ€™s left outer edge touches the left edge of the containing block (for right-to-left formatting, right edges touch). This is true even in the presence of floats (although a boxâ€™s line boxes may shrink due to the floats), unless the box establishes a new block formatting context (in which case the box itself may become narrower due to the floats). åœ¨BFCä¸Šä¸‹æ–‡ä¸­ï¼Œæ¯ä¸ªç›’å­çš„å·¦å¤–ä¾§ç´§è´´åŒ…å«å—çš„å·¦ä¾§ï¼ˆä»å³åˆ°å·¦çš„æ ¼å¼é‡Œï¼Œåˆ™ä¸ºç›’å­å³å¤–ä¾§ç´§è´´åŒ…å«å—å³ä¾§ï¼‰ï¼Œç”šè‡³æœ‰æµ®åŠ¨ä¹Ÿæ˜¯å¦‚æ­¤ï¼ˆå°½ç®¡ç›’å­é‡Œçš„è¡Œç›’å­Line Boxå¯èƒ½ç”±äºæµ®åŠ¨è€Œå˜çª„ï¼‰ï¼Œé™¤éç›’å­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„BFCï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ç›’å­æœ¬èº«å¯èƒ½ç”±äºæµ®åŠ¨è€Œå˜çª„ï¼‰ã€‚ è¿™æ˜¯BFCçš„ä¸€ä¸ªç‰¹ç‚¹ã€‚ç®€å•æ¥è¯´ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ‰€ä»¥å±äºBFCçš„ç›’å­éƒ½æ˜¯å·¦å¯¹é½ï¼ˆåœ¨ä»å·¦åˆ°å³çš„æ ¼å¼ä¸‹ï¼‰å¹¶ä¸”ä»–ä»¬çš„å·¦å¤–ä¾§ç´§è´´åŒ…å«å—çš„å·¦ä¾§ã€‚åœ¨æœ€åä¸€ä¸ªç›’å­ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå°½ç®¡å·¦ä¾§å­˜åœ¨ä¸€ä¸ªæµ®åŠ¨å…ƒç´ ï¼ˆæ£•è‰²ï¼‰ï¼Œå¦å¤–ä¸€ä¸ªå…ƒç´ ï¼ˆç»¿è‰²ï¼‰ä»ç„¶ç´§è´´åŒ…å«å—çš„å·¦ä¾§ã€‚è¯¥æƒ…å†µçš„äº§ç”ŸåŸç†å°†åœ¨ä¸‹æ–‡å…³äºæ–‡å­—ç¯ç»•çš„éƒ¨åˆ†ä¸­è®¨è®ºã€‚ ä½¿ç”¨BFCé¿å…æ–‡å­—ç¯ç»•Using Block Formatting Contexts to Prevent Text Wrapping æµ®åŠ¨æœ€åˆè®¾è®¡çš„ç›®çš„å°±æ˜¯æ–‡å­—ç¯ç»•ï¼Œè¿™ä¸€ä¸ªç›®çš„å¯¼è‡´æˆ‘ä»¬åæ¥ç”¨æµ®åŠ¨çš„æ—¶å€™ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚è¯´ï¼Œæˆ‘æœ¬å°±ä¸æƒ³è¦æ–‡å­—ç¯ç»•è¿™ä¸€ç‰¹ç‚¹ï¼Œæˆ‘å°±éœ€è¦æƒ³åŠæ³•å»é™¤å®ƒã€‚12345678910&lt;div class=\"container\"&gt; &lt;div class=\"floated\"&gt; Floated div &lt;/div&gt; &lt;p&gt; Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolorum rerum minima tenetur qui provident laudantium reprehenderit porro maiores facilis vitae, quas, quos quibusdam eum accusamus suscipit. Quos molestiae saepe unde. &lt;/p&gt;&lt;/div&gt; ä½†äº‹å®æ˜¯å½“æˆ‘ä»¬æŠŠæµ®åŠ¨çš„é¢œè‰²å»æ‰åæ˜¯è¿™æ ·çš„ï¼šå¦‚æˆ‘ä»¬æ‰€è§ï¼Œp å…ƒç´ æ²¡æœ‰ç§»ä½ä½†å®ƒå åœ¨äº†æµ®åŠ¨å…ƒç´ ä¹‹ä¸‹ï¼Œè€Œpå…ƒç´ çš„è¡Œç›’å­ï¼ˆå³æ–‡æœ¬è¡Œï¼‰å´ç§»ä½äº†ï¼Œè¡Œç›’å­æ°´å¹³å˜çª„æ¥ç»™æµ®åŠ¨å…ƒç´ è…¾å‡ºäº†ç©ºé—´ã€‚ éšç€æ–‡æœ¬çš„å¢åŠ ï¼Œæœ€åæ–‡æœ¬å°†ç¯ç»•åœ¨æµ®åŠ¨å…ƒç´ ä¹‹ä¸‹ï¼Œå› ä¸ºé‚£æ—¶å€™è¡Œç›’å­ä¸å†éœ€è¦ç§»ä½ï¼Œä¹Ÿå°±æˆäº†å›¾1çš„æ ·å­ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå³ä¾¿æœ‰æµ®åŠ¨å…ƒç´ ï¼Œæ®µè½ä»ç´§è´´åŒ…å«å—çš„å·¦ä¾§ï¼Œè€Œè¡Œç›’å­ä¼šå˜çª„æ¥ç»™æµ®åŠ¨å…ƒç´ è…¾ä½å­ã€‚ å¦‚æœæˆ‘ä»¬èƒ½ä½ç§»æ•´ä¸ª p å…ƒç´ ï¼Œè¿™ä¸ªç¯ç»•é—®é¢˜ä¹Ÿå°±è¿åˆƒè€Œè§£äº†ã€‚ ç„¶åæˆ‘ä»¬å†å›é¡¾ä¸‹ä¸Šä¸€ä¸ªBFCä¸­çš„ç›’å­å¯¹é½çš„ç‰¹ç‚¹ã€‚ åœ¨BFCä¸Šä¸‹æ–‡ä¸­ï¼Œæ¯ä¸ªç›’å­çš„å·¦å¤–ä¾§ç´§è´´åŒ…å«å—çš„å·¦ä¾§ï¼ˆä»å³åˆ°å·¦çš„æ ¼å¼é‡Œï¼Œåˆ™ä¸ºç›’å­å³å¤–ä¾§ç´§è´´åŒ…å«å—å³ä¾§ï¼‰ï¼Œç”šè‡³æœ‰æµ®åŠ¨ä¹Ÿæ˜¯å¦‚æ­¤ï¼ˆå°½ç®¡ç›’å­é‡Œçš„è¡Œç›’å­ Line Box å¯èƒ½ç”±äºæµ®åŠ¨è€Œå˜çª„ï¼‰ï¼Œé™¤éç›’å­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„BFCï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ç›’å­æœ¬èº«å¯èƒ½ç”±äºæµ®åŠ¨è€Œå˜çª„ï¼‰ã€‚ å¦‚æœæˆ‘ä»¬ç»™på…ƒç´ åˆ›å»ºä¸€ä¸ªæ–°çš„BFC,å°±å¯ä»¥è§£å†³äº†ã€‚æˆ‘ä»¬ç»™på…ƒç´ åŠ ä¸Šoverflow:hiddenè¿™ä¸ªå…ƒç´ ã€‚è¿™æ ·å°±å˜æˆäº†æˆ‘ä»¬æƒ³è¦çš„æ ·å­äº†ã€‚ æé†’ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæœ‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸¤å—ä¹‹é—´æœ‰ä¸€äº›é—´è·ï¼Œç„¶åæˆ‘ä»¬è®¾ç½®äº†margin-leftä½†è¿˜æ˜¯ä¸ç®¡ç”¨çš„åŸå› ï¼Œå¹¶ä¸æ˜¯margin-leftä¸ç®¡ç”¨ï¼Œåªæ˜¯æˆ‘ä»¬è®¾ç½®çš„å¤ªå°å•¦ã€‚ ä¼šé€ æˆå¤–è¾¹è·é‡å ï¼Œä½†ä¹Ÿå¯ä»¥é˜²æ­¢å¤–è¾¹è·é‡å A Block Formatting Context Causes Collapsing Margins. Block formatting contexts stop margins from collapsing. ä»”ç»†çœ‹ä¸Šé¢ä¸¤å¥è¯ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—æœ‰ç‚¹å¥‡æ€ªï¼Œä»–çš„æ„æ€æ˜¯è¯´ï¼šBFCä¼šé€ æˆå¤–è¾¹è·é‡å ï¼Œä½†æ˜¯BFCä¹Ÿå¯ä»¥é˜»æ­¢å¤–è¾¹è·é‡å ã€‚ åœ¨å¸¸è§„æµä¸­ï¼Œç›’å­ä»åŒ…å«å—çš„é¡¶éƒ¨å¼€å§‹ä¸€ä¸ªä¸ªåœ°å‚ç›´æ‘†æ”¾ã€‚ä¸¤ä¸ªåŒèƒç›’å­é—´çš„å‚ç›´è·ç¦»ç”±ä¸¤ä¸ªç›’å­å„è‡ªçš„å¤–è¾¹è·æ‰€å†³å®šï¼Œä½†ä¸æ˜¯äºŒè€…å¤–è¾¹è·ä¹‹å’Œã€‚ 1234&lt;div class=\"container\"&gt; &lt;p&gt;sibling 1&lt;/p&gt; &lt;p&gt;sibling 2&lt;/p&gt;&lt;/div&gt; 12345678.container &#123; background-color: red; overflow: hidden;&#125;p &#123; background-color: lightgreen; margin: 10px 0;&#125; ä¸Šé¢æˆ‘ä»¬åˆ©ç”¨overflowï¼šhiddenåˆ›å»ºäº†ä¸€ä¸ªBFCã€‚è¿™ä¸ªBFCé€ æˆäº†å¤–è¾¹è·é‡å ï¼Œä¹Ÿå°±å½¢æˆäº†ä¸Šé¢çš„æƒ…å†µï¼Œæœ¬æ¥è¯¥æ˜¯20pxçš„è¾¹è·çš„ï¼Œç°åœ¨åªæœ‰äº†10pxã€‚ åœ¨è®¨è®ºäº†ä¸Šé¢BFCæŠ˜å å¤–è¾¹è·çš„æƒ…å†µåï¼Œæˆ‘ä»¬å¿…é¡»ç‰¢è®°äºå¿ƒçš„ä¸€ä»¶äº‹æ˜¯ï¼Œç›¸é‚»å—çº§ç›’å­ï¼ˆåŒèƒï¼‰ä¹‹é—´çš„å‚ç›´å¤–è¾¹è·åªæœ‰åœ¨å®ƒä»¬å¤„äºåŒä¸€ä¸ªBFCæ—¶æ‰ä¼šå‘ç”ŸæŠ˜å ã€‚å¦‚æœå®ƒä»¬åˆ†å±äºä¸åŒçš„BFCï¼Œå°±ä¸ä¼šæŠ˜å äº†ã€‚æ‰€ä»¥ï¼Œé€šè¿‡åˆ›å»ºæ–°çš„BFCæˆ‘ä»¬å¯ä»¥é¿å…å¤–è¾¹è·æŠ˜å ã€‚ 1234567&lt;div class=\"container\"&gt; &lt;p&gt;Sibling 1&lt;/p&gt; &lt;p&gt;Sibling 2&lt;/p&gt; &lt;div class=\"newBFC\"&gt; &lt;p&gt;Sibling 3&lt;/p&gt; &lt;/div&gt;&lt;/div&gt; 1234567891011.container &#123; background-color: red; overflow: hidden; /* creates a block formatting context */&#125;p &#123; margin: 10px 0; background-color: lightgreen;&#125;.newBFC &#123; overflow: hidden; /* creates new block formatting context */&#125; ç”±äºç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå…„å¼ŸèŠ‚ç‚¹åˆ†å±äºä¸åŒçš„BFC,æ‰€ä»¥åœ¨ä»–ä»¬ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•çš„å¤–è¾¹è·é‡å ã€‚ ä½¿ç”¨BFCåŒ…å«æµ®åŠ¨Using a Block Formatting Context to Contain FloatsBFCå¯ä»¥åŒ…å«æµ®åŠ¨ã€‚æˆ‘ä»¬ç»å¸¸é‡åˆ°å®¹å™¨ä¸­å«æœ‰æµ®åŠ¨å…ƒç´ çš„æƒ…å†µã€‚è¿™ç§æƒ…å†µä¸‹å®¹å™¨å…ƒç´ æ²¡æœ‰é«˜åº¦å¹¶ä¸”å…¶æµ®åŠ¨å­å…ƒç´ è„±ç¦»äº†ç½‘é¡µçš„å¸¸è§„æµã€‚æˆ‘ä»¬é€šå¸¸ç”¨æ¸…é™¤æµ®åŠ¨è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ€æ™®éçš„åšæ³•å°±æ˜¯ä½¿ç”¨ä¼ªå…ƒç´ ã€‚ä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªBFCæ¥è§£å†³é—®é¢˜ã€‚12345678910111213&lt;div class=\"container\"&gt; &lt;div&gt;Sibling&lt;/div&gt; &lt;div&gt;Sibling&lt;/div&gt;&lt;/div&gt;.container &#123; background-color: green;&#125;.container div &#123; float: left; background-color: lightgreen; margin: 10px;&#125; ä¸Šé¢çš„æˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ¥šçš„çŸ¥é“ä¸ºå•¥ä¼šæ²¡æœ‰æŠŠçˆ¶å…ƒç´ æ’‘èµ·æ¥ï¼Œå› ä¸ºå­å…ƒç´ æµ®åŠ¨ï¼Œè„±ç¦»äº†æ–‡æ¡£æµï¼Œæˆ‘ä»¬ä¸€èˆ¬ç”¨clear:bothï¼Œæˆ–è€…ä¼ªå…ƒç´ ï¼Œæˆ–è€…è¿™é‡Œçš„overflow:hiddenã€‚éƒ½å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚12345678910.container &#123; overflow: hidden; /* creates block formatting context */ background-color: green;&#125;.container div &#123; float: left; background-color: lightgreen; margin: 10px;&#125; ç°åœ¨å®¹å™¨å¯ä»¥åŒ…ä½æµ®åŠ¨å­å…ƒç´ ï¼Œå¹¶ä¸”å…¶é«˜åº¦ä¼šæ‰©å±•è‡³åŒ…ä½å…¶å­å…ƒç´ ï¼Œåœ¨è¿™ä¸ªæ–°çš„BFCä¸­æµ®åŠ¨å…ƒç´ åˆå›å½’åˆ°é¡µé¢çš„å¸¸è§„æµä¹‹ä¸­äº†ã€‚ åœ¨å¤šåˆ—å¸ƒå±€ä¸­ä½¿ç”¨BFCUsing Block Formatting Contexts in Multi-column Layouts å¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå æ»¡æ•´ä¸ªå®¹å™¨å®½åº¦çš„å¤šåˆ—å¸ƒå±€ï¼Œåœ¨æŸäº›æµè§ˆå™¨ä¸­æœ€åä¸€åˆ—æœ‰æ—¶å€™ä¼šæ‰åˆ°ä¸‹ä¸€è¡Œã€‚è¿™å¯èƒ½æ˜¯å› ä¸ºæµè§ˆå™¨å››èˆäº”å…¥äº†åˆ—å®½ä»è€Œæ‰€æœ‰åˆ—çš„æ€»å®½åº¦ä¼šè¶…å‡ºå®¹å™¨ã€‚ä½†å¦‚æœæˆ‘ä»¬åœ¨å¤šåˆ—å¸ƒå±€ä¸­çš„æœ€åä¸€åˆ—é‡Œåˆ›å»ºä¸€ä¸ªæ–°çš„BFCï¼Œå®ƒå°†æ€»æ˜¯å æ®å…¶ä»–åˆ—å…ˆå ä½å®Œæ¯•åå‰©ä¸‹çš„ç©ºé—´ã€‚ 1234567891011121314151617&lt;div class=\"container\"&gt; &lt;div class=\"column\"&gt;column 1&lt;/div&gt; &lt;div class=\"column\"&gt;column 2&lt;/div&gt; &lt;div class=\"column\"&gt;column 3&lt;/div&gt;&lt;/div&gt;.column &#123; width: 31.33%; background-color: green; float: left; margin: 0 1%;&#125;/* Establishing a new block formatting context in the last column */.column:last-child &#123; float: none; overflow: hidden; &#125; åœ¨å°½ç®¡ç›’å­çš„å®½åº¦ç¨æœ‰æ”¹å˜ï¼Œä½†å¸ƒå±€ä¸ä¼šæ‰“ç ´ã€‚å½“ç„¶ï¼Œå¯¹å¤šåˆ—å¸ƒå±€æ¥è¯´è¿™ä¸ä¸€å®šæ˜¯ä¸ªå¥½åŠæ³•ï¼Œä½†èƒ½é¿å…æœ€åä¸€åˆ—ä¸‹æ‰ã€‚è¿™ä¸ªé—®é¢˜ä¸Šå¼¹æ€§ç›’æˆ–è®¸æ˜¯ä¸ªæ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œä½†è¿™ä¸ªåŠæ³•å¯ä»¥ç”¨æ¥è¯´æ˜å…ƒç´ åœ¨è¿™äº›ç¯å¢ƒä¸‹çš„è¡Œä¸ºã€‚ ä¸ºä»€ä¹ˆä¼šæ˜¯è¿™æ ·ï¼Œè¿™è·Ÿä¸Šé¢ä¸€ä¸ªåŸå› å·®ä¸å¤šã€‚æˆ‘ä»¬åœ¨æœ€åå®šä¹‰äº†ä¸€ä¸ªæ–°çš„BFCåï¼Œè¿™ä¸ªç›’å­çš„å·¦å¤–ä¾§å°±ä¸ä¼šç´§è´´åŒ…å«å—çš„å·¦ä¾§ã€‚ å½“ç„¶ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨å¢åŠ ä¼ªå…ƒç´ æ¥å®ç°ã€‚ æ€»ç»“ä¸»è¦æ˜¯æŠŠBFCçš„æ•´ä¸ªçš„æ€»ç»“è®°å½•ä¸‹ã€‚ä¹Ÿæ–¹ä¾¿ä»¥åæŸ¥é˜…ã€‚å­¦ä¹ å‚è€ƒè‡ªï¼šunderstanding-block-formatting-contexts-in-css,æ„Ÿè°¢ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Css","slug":"Css","permalink":"http://sevencai.github.io/tags/Css/"}]},{"title":"å†’æ³¡æ’åºvså½’å¹¶æ’åºvsé€‰æ‹©æ’åºvsæ’å…¥æ’åº","slug":"å†’æ³¡æ’åºvså½’å¹¶æ’åºvsé€‰æ‹©æ’åºvsæ’å…¥æ’åº","date":"2016-03-18T04:47:05.000Z","updated":"2016-03-18T05:02:36.000Z","comments":true,"path":"2016/03/18/å†’æ³¡æ’åºvså½’å¹¶æ’åºvsé€‰æ‹©æ’åºvsæ’å…¥æ’åº/","link":"","permalink":"http://sevencai.github.io/2016/03/18/å†’æ³¡æ’åºvså½’å¹¶æ’åºvsé€‰æ‹©æ’åºvsæ’å…¥æ’åº/","excerpt":"","text":"ä»Šå¤©å†™äº†å‡ ä¸ªå°æ’åºï¼Œè®°å½•ä¸‹æ¥ï¼Œéƒ½æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚ å½’å¹¶æ’åºå½’å¹¶æ’åºçš„æ€æƒ³æ˜¯åˆ†æ²»ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹åˆ†æ²»çš„æ€æƒ³ã€‚ åˆ†æ²»ï¼šåˆ†è€Œæ²»ä¹‹ã€‚å°±æ˜¯æŠŠä¸€ä¸ªå¤æ‚çš„é—®é¢˜åˆ†æˆä¸¤ä¸ªæˆ–è€…æ›´å¤šçš„ç›¸åŒçš„è´§ç›¸ä¼¼çš„å­é—®é¢˜ï¼Œå†æŠŠå­é—®é¢˜åˆ†æˆæ›´å°çš„å­é—®é¢˜ã€‚ä¸€ç›´åˆ°æœ€åå­é—®é¢˜å¯ä»¥ç®€å•çš„ç›´æ¥æ±‚è§£ã€‚åŸé—®é¢˜çš„è§£å³ä¸ºå­é—®é¢˜çš„åˆå¹¶ã€‚ æ¯”å¦‚å¿«é€Ÿæ’åºï¼Œå½’å¹¶æ’åºï¼Œå‚…é‡Œå¶å˜æ¢éƒ½æ˜¯åˆ©ç”¨çš„åˆ†è€Œæ²»ä¹‹çš„æ€æƒ³ã€‚ åˆ†æ²»çš„ç­–ç•¥æ˜¯ï¼š å¯¹äºä¸€ä¸ªè§„æ¨¡ä¸ºnçš„é—®é¢˜ï¼Œè‹¥è¯¥é—®é¢˜å¯ä»¥å®¹æ˜“çš„è§£å†³ï¼Œåˆ™ç›´æ¥è§£å†³ã€‚ è‹¥ä¸èƒ½ç›´æ¥è§£å†³ï¼Œå°†å…¶åˆ†è§£ä¸ºKä¸ªè§„æ¨¡æ¯”è¾ƒå°çš„å­é—®é¢˜ã€‚ è¿™äº›å­é—®é¢˜äº’ç›¸ç‹¬ç«‹ä¸åŸé—®é¢˜å½¢å¼ç›¸åŒï¼Œé€’å½’çš„è§£è¿™äº›å­é—®é¢˜ï¼Œç„¶åå°†å„å­é—®é¢˜çš„è§£åˆå¹¶å¾—åˆ°åŸé—®é¢˜çš„è§£ã€‚ å½’å¹¶æ’åºï¼šå°†å¾…æ’åºå…ƒç´ åˆ†æˆå¤§å°å¤§è‡´ç›¸åŒçš„2ä¸ªå­é›†åˆ(é€’å½’ç›´åˆ°æœ€å°çš„æ’åºå•å…ƒï¼‰ï¼Œåˆ†åˆ«å¯¹2ä¸ªå­é›†åˆè¿›è¡Œæ’åºï¼Œæœ€ç»ˆå°†æ’å¥½åºçš„å­é›†åˆåˆå¹¶æˆä¸ºæ‰€è¦æ±‚çš„æ’å¥½åºçš„é›†åˆã€‚ å½’å¹¶æ’åºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯Oï¼ˆnlognï¼‰,å¯¹äºå†’æ³¡æ’åºçš„O(n*n),æ•ˆç‡è¿˜æœ‰æœ‰æ¯”è¾ƒå¥½çš„æé«˜ã€‚jsä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526function merge(left,right)&#123; var resultArr = []; while(left.length&gt;0 &amp;&amp; right.length&gt;0)&#123; if(left[0]&lt;right[0])&#123; resultArr.push(left.shift()); &#125;else&#123; resultArr.push(right.shift()); &#125; &#125; return resultArr.concat(left).concat(right);&#125;function mergeSort(arr)&#123; if(arr.length&lt;=1)&#123; return arr; &#125; var mid = parseInt(arr.length/2); var left = arr.slice(0,mid); var right = arr.slice(mid); return merge(mergeSort(left),mergeSort(right));&#125;var arr = [2,4,1,7,8,4];console.log(mergeSort(arr)); æ’å…¥æ’åºå°†æ•°æ®åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œæœ‰åºéƒ¨åˆ†ä¸æ— åºéƒ¨åˆ†ï¼Œä¸€å¼€å§‹æœ‰åºéƒ¨åˆ†åŒ…å«ç¬¬1ä¸ªå…ƒç´ ï¼Œä¾æ¬¡å°†æ— åºçš„å…ƒç´ æ’å…¥åˆ°æœ‰åºéƒ¨åˆ†ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ æœ‰åºã€‚æ’å…¥æ’åºåˆåˆ†ä¸ºç›´æ¥æ’å…¥æ’åºã€äºŒåˆ†æ’å…¥æ’åºã€é“¾è¡¨æ’å…¥ç­‰ï¼Œè¿™é‡Œåªè®¨è®ºç›´æ¥æ’å…¥æ’åºã€‚å®ƒæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n^2)ã€‚ æ³¨æ„ä¸é€‰æ‹©æ’åºçš„åŒºåˆ«ï¼Œæ’å…¥æ’åºæ˜¯æŠŠåé¢çš„æ¯ä¸€ä¸ªæ•°æ’å…¥åˆ°å‰é¢å·²ç»æ’å¥½åºçš„é˜Ÿåˆ—ä¸­ã€‚è€Œé€‰æ‹©æ’åºæ˜¯æ¯æ¬¡åœ¨åé¢é€‰æ‹©æœ€å°çš„æˆ–è€…æœ€å¤§çš„ï¼Œæ’å…¥åˆ°å·²ç»æœ‰åºçš„é˜Ÿåˆ—åé¢ã€‚ 1234567891011121314function insertSort(arr)&#123; for(var i=1;i&lt;arr.length;i++)&#123; var j=i-1; var value = arr[i]; while(j&gt;-1 &amp;&amp; value&lt;arr[j])&#123; arr[j+1] = arr[j]; j--; &#125; arr[j+1] = value; &#125; return arr;&#125;var arr = [2,4,1,7,8,4];console.log(insertSort(arr)); å‰é¢å·²ç»æ’å¥½åºäº†ï¼Œè¦æŠŠåé¢æœ€å°çš„æ•°æ’å…¥åˆ°å‰é¢ï¼Œæ‰€ä»¥æ˜¯è¦ä»j=i-1å¼€å§‹æ‰¾ã€‚ç„¶åå¦‚æœè¯¥æ•°ä¸€ç›´æ¯”å‰é¢çš„æœ‰åºçš„å°ï¼Œå°±æŠŠæ¯”ä»–å¤§çš„æ•°å¾€åç§»åŠ¨ï¼Œæœ€åæ‰¾åˆ°è¯¥ç‚¹åï¼Œå†æŠŠå…ƒç´ æ’å…¥åˆ°è¯¥åœ°æ–¹ã€‚ å†’æ³¡æ’åºå†’æ³¡æ’åºå¯è°“æ˜¯æœ€ç»å…¸çš„,æœ€ç®€å•çš„æ’åºç®—æ³•äº†ï¼Œå®ƒæ˜¯åŸºäºæ¯”è¾ƒçš„æ’åºç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n^2)ï¼Œå…¶ä¼˜ç‚¹æ˜¯å®ç°ç®€å•ï¼Œnè¾ƒå°æ—¶æ€§èƒ½è¾ƒå¥½ã€‚ ç›¸é‚»çš„æ•°æ®è¿›è¡Œä¸¤ä¸¤æ¯”è¾ƒï¼Œå°æ•°æ”¾åœ¨å‰é¢ï¼Œå¤§æ•°æ”¾åœ¨åé¢ï¼Œè¿™æ ·ä¸€è¶Ÿä¸‹æ¥ï¼Œæœ€å°çš„æ•°å°±è¢«æ’åœ¨äº†ç¬¬ä¸€ä½ï¼Œç¬¬äºŒè¶Ÿä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¦‚æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰çš„æ•°æ®æ’åºå®Œæˆã€‚ä¸‹é¢æ˜¯jså®Œæˆå†’æ³¡æ’åºã€‚12345678910111213141516function bubbleSort(arr)&#123; var len = arr.length; for(var i=0;i&lt;len;i++)&#123; for(var j=len-1;j&gt;i;j--)&#123; if(arr[j]&lt;arr[j-1])&#123; var temp = arr[j]; arr[j] = arr[j-1]; arr[j-1] = temp; &#125; &#125; &#125; return arr;&#125;var arr = [2,4,1,7,8,4];console.log(bubbleSort(arr)); é€‰æ‹©æ’åºæœ‰ä¸¤ä¸ªåºåˆ—ï¼Œä¸€ä¸ªæ˜¯å·²ç»æ’åºçš„åºåˆ—ï¼Œä¸€ä¸ªæ˜¯æš‚æœªæ’åºçš„åºåˆ—ã€‚æ¯æ¬¡éƒ½ä»åé¢é€‰å‡ºä¸€ä¸ªæœ€å¤§çš„æˆ–è€…æœ€å°çš„æ’å…¥åˆ°å‰é¢å·²ç»æ’åºå¥½çš„æœ«å°¾ã€‚ä¾æ¬¡ç±»æ¨ï¼ŒçŸ¥é“æ‰€æœ‰çš„å…ƒç´ æ’åˆ—å®Œæ¯•ã€‚ å…ˆæŠŠç¬¬ä¸€ä¸ªå®šä½åŸºå‡†ï¼Œå¾€åé¢æœªæ’åºçš„æ‰¾åˆ°æœ€å°çš„å¹¶ä¸”è®°å½•ä¸‹indexã€‚å¦‚æœindexæ˜¯ä¸ç­‰äºåŸæ¥çš„iï¼Œè¯´æ˜è¿™ä¸€è¶Ÿå·²ç»æ‰¾åˆ°äº†æ¯”ä»–å°çš„æ•°ï¼Œå°±å¯ä»¥è®²è¿™ä¸¤ä¸ªæ•°äº¤æ¢äº†ã€‚ 12345678910111213141516171819function selectSort (arr)&#123; var len = arr.length; for(var i=0;i&lt;len;i++)&#123; var index = i; for(var j=i+1;j&lt;len;j++)&#123; if(arr[index]&gt;arr[j])&#123; index = j; &#125; &#125; if(index!=i)&#123; var temp = arr[index]; arr[index] = arr[i]; arr[i] = temp; &#125; &#125; return arr;&#125;var arr = [2,4,1,7,8,4];console.log(selectSort(arr)); äº‹ä»¶å¤æ‚åº¦","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://sevencai.github.io/categories/ç®—æ³•/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://sevencai.github.io/tags/ç®—æ³•/"}]},{"title":"javascriptå•çº¿ç¨‹æ•´ç†å’Œç†è§£","slug":"javascriptå•çº¿ç¨‹æ•´ç†å’Œç†è§£","date":"2016-03-17T11:23:17.000Z","updated":"2016-12-12T03:00:34.000Z","comments":true,"path":"2016/03/17/javascriptå•çº¿ç¨‹æ•´ç†å’Œç†è§£/","link":"","permalink":"http://sevencai.github.io/2016/03/17/javascriptå•çº¿ç¨‹æ•´ç†å’Œç†è§£/","excerpt":"","text":"å¼‚æ­¥çš„å¦å¤–ä¸€ç§å«ä¹‰æ˜¯è®¡ç®—æœºå¤šçº¿ç¨‹çš„å¼‚æ­¥å¤„ç†ã€‚ä¸åŒæ­¥å¤„ç†ç›¸å¯¹ï¼Œå¼‚æ­¥å¤„ç†ä¸ç”¨é˜»å¡å½“å‰çº¿ç¨‹æ¥ç­‰å¾…å¤„ç†å®Œæˆï¼Œè€Œæ˜¯å…è®¸åç»­æ“ä½œï¼Œç›´è‡³å…¶å®ƒçº¿ç¨‹å°†å¤„ç†å®Œæˆï¼Œå¹¶å›è°ƒé€šçŸ¥æ­¤çº¿ç¨‹ã€‚å¼‚æ­¥ä¸å¤šçº¿ç¨‹ä¸å¹¶è¡Œä¸æ˜¯åŒä¸€ä¸ªæ¦‚å¿µã€‚ å…ˆé—®è‡ªå·±å‡ ä¸ªé—®é¢˜ javascriptæ˜¯å•çº¿ç¨‹çš„å—? javascriptå¦‚æœæ˜¯å•çº¿ç¨‹ä¸ºä»€ä¹ˆèƒ½è®©ajaxå¼‚æ­¥å‘é€å’Œå›è°ƒè¯·æ±‚ï¼Ÿ setTimeoutä¸€å®šæ˜¯æŒ‰ç…§å®ƒå®šçš„æ—¶é—´å‘ç”Ÿçš„å—ï¼Ÿ æµè§ˆå™¨æ˜¯å¤šçº¿ç¨‹çš„å—ï¼Ÿ event loopæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ ä¸‹é¢è¿™æ®µä»£ç çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ 123456789function foo()&#123; setTimeout(function()&#123; console.log(\"inner\"); &#125;) console.log(\"outer\");&#125;for(var i = 0;i &lt; 10;i++)&#123; foo();&#125; javascriptæ˜¯å•çº¿ç¨‹æ–¹ä¾¿ç†è§£ï¼Œå¯ä»¥è¿™ä¹ˆæƒ³ï¼Œå¦‚æœjsä¸æ˜¯å•çº¿ç¨‹çš„ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬è¦å¯èƒ½åœ¨æ“ä½œä¸€ä¸ªDOMçš„æ—¶å€™ï¼ˆæ¯”å¦‚ä¿®æ”¹ï¼Œåˆ é™¤ï¼Œæ·»åŠ ï¼‰ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯èƒ½ä¹Ÿåœ¨å¯¹è¿™ä¸ªDOMèŠ‚ç‚¹è¿›è¡Œæ“ä½œã€‚è¿™ä¹ˆè‚¯å®šæ˜¯ä¸è¡Œçš„ã€‚ è¿™è·Ÿjavascriptæœ€åˆçš„ç”¨é€”æ˜¯æœ‰å…³çš„ï¼Œjsæœ¬æ¥è®¾è®¡å°±æ˜¯ä¸ºäº†æ›´å¥½äº¤äº’æ•ˆæœï¼Œæ›´æ–¹ä¾¿æ“ä½œDOMï¼Œè¿™ä¸€ç‰¹ç‚¹æŸç§ç¨‹åº¦ä¸Šå†³å®šäº†ä»–çš„å•çº¿ç¨‹ã€‚ jsè¿è¡Œåœ¨æµè§ˆå™¨ä¸­æ˜¯å•çº¿ç¨‹çš„ã€‚æ¯ä¸€ä¸ªwindowä¸€ä¸ªjsçº¿ç¨‹ã€‚ç”±äºæ˜¯å•çº¿ç¨‹ï¼Œé‚£ä¹ˆåœ¨ä¸€ä¸ªæ—¶åˆ»åªèƒ½å¤Ÿæ‰§è¡ŒæŸä¸ªç‰¹å®šçš„ä»£ç ï¼Œå¹¶ä¸”é˜»å¡å…¶ä»–çš„ä»£ç ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€å¦‚æœå‰é¢ä¸€ä¸ªä»»åŠ¡è€—æ—¶å¾ˆé•¿çš„æ—¶å€™ï¼Œåä¸€ä¸ªä»»åŠ¡å°±ä¼šä¸€ç›´ç­‰å¾…ã€‚jsçš„å•çº¿ç¨‹æœºåˆ¶å…¶å®æ˜¯:æœ‰ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªæ˜¯ä¸»çº¿ç¨‹ã€‚ä¸€ä¸ªæ˜¯ä»»åŠ¡é˜Ÿåˆ—ã€‚ æµè§ˆå™¨ä¸æ˜¯å•çº¿ç¨‹çš„jsè¿è¡Œåœ¨æµè§ˆå™¨ä¸­ï¼Œæ˜¯å•çº¿ç¨‹çš„ï¼Œæ¯ä¸ªwindowä¸€ä¸ªjsçº¿ç¨‹ï¼Œä½†æ˜¯æµè§ˆå™¨ä¸æ˜¯å•çº¿ç¨‹çš„ã€‚ä»–å¯èƒ½æœ‰å¾ˆå¤šçº¿ç¨‹ï¼Œæ¯”å¦‚jså¼•æ“çº¿ç¨‹ï¼Œç•Œé¢æ¸²æŸ“çº¿ç¨‹ï¼Œæµè§ˆå™¨äº‹ä»¶è§¦å‘çº¿ç¨‹ï¼Œhttpè¯·æ±‚çº¿ç¨‹ã€‚ å•çº¿ç¨‹çš„æœºåˆ¶åˆšåˆšæåˆ°äº†javascriptçš„å•çº¿ç¨‹çš„æœºåˆ¶å…¶å®æ˜¯æœ‰ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªæ˜¯ä¸»çº¿ç¨‹é˜Ÿåˆ—ï¼Œä¸€ä¸ªæ˜¯ä»»åŠ¡é˜Ÿåˆ—ã€‚ ä¹‹æ‰€ä»¥è¦æœ‰è¿™ä¹ˆä¸¤ä¸ªé˜Ÿåˆ—ï¼š JavaScriptè¯­è¨€çš„è®¾è®¡è€…æ„è¯†åˆ°ï¼Œè¿™æ—¶ä¸»çº¿ç¨‹å®Œå…¨å¯ä»¥ä¸ç®¡IOè®¾å¤‡ï¼ŒæŒ‚èµ·å¤„äºç­‰å¾…ä¸­çš„ä»»åŠ¡ï¼Œå…ˆè¿è¡Œæ’åœ¨åé¢çš„ä»»åŠ¡ã€‚ç­‰åˆ°IOè®¾å¤‡è¿”å›äº†ç»“æœï¼Œå†å›è¿‡å¤´ï¼ŒæŠŠæŒ‚èµ·çš„ä»»åŠ¡ç»§ç»­æ‰§è¡Œä¸‹å»ã€‚ äºæ˜¯ï¼Œæ‰€æœ‰ä»»åŠ¡å¯ä»¥åˆ†æˆä¸¤ç§ï¼Œä¸€ç§æ˜¯åŒæ­¥ä»»åŠ¡ï¼ˆsynchronousï¼‰ï¼Œå¦ä¸€ç§æ˜¯å¼‚æ­¥ä»»åŠ¡ï¼ˆasynchronousï¼‰ã€‚â€“from ruanyifeng åŒæ­¥ä»»åŠ¡æŒ‡çš„æ˜¯ï¼Œåœ¨ä¸»çº¿ç¨‹ä¸Šæ’é˜Ÿæ‰§è¡Œçš„ä»»åŠ¡ï¼Œåªæœ‰å‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œæ‰èƒ½æ‰§è¡Œåä¸€ä¸ªä»»åŠ¡ï¼› å¼‚æ­¥ä»»åŠ¡æŒ‡çš„æ˜¯ï¼Œä¸è¿›å…¥ä¸»çº¿ç¨‹ã€è€Œè¿›å…¥â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼ˆtask queueï¼‰çš„ä»»åŠ¡ï¼Œåªæœ‰â€ä»»åŠ¡é˜Ÿåˆ—â€é€šçŸ¥ä¸»çº¿ç¨‹ï¼ŒæŸä¸ªå¼‚æ­¥ä»»åŠ¡å¯ä»¥æ‰§è¡Œäº†ï¼Œè¯¥ä»»åŠ¡æ‰ä¼šè¿›å…¥ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ jséƒ½æ˜¯å…ˆæ‰§è¡ŒåŒæ­¥ä»»åŠ¡ï¼Œå†æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ã€‚ é‚£ä¹ˆä¸Šé¢çš„ç¬¬å…­ä¸ªé—®é¢˜å°±å¾ˆæ¸…æ¥šäº†ï¼Œç­”æ¡ˆæ˜¯å…ˆè¾“å‡º10ä¸ªouter,å†è¾“å‡º10ä¸ªinnerã€‚å› ä¸ºouteræ˜¯ä½äºä¸»çº¿ç¨‹ä¸Šï¼Œinneræ˜¯ä½äºä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œjsåœ¨æ‰§è¡Œçš„æ—¶å€™å¿…é¡»å…ˆæŠŠä¸»çº¿ç¨‹çš„åšå®Œï¼Œå†æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ã€‚åœ¨ä¸»çº¿ç¨‹å’Œä»»åŠ¡é˜Ÿåˆ—è¿™ä¸¤ä¸ªé˜Ÿåˆ—é‡Œåˆæ˜¯åˆæ˜¯é˜»å¡çš„ã€‚ 123setTimeout( function()&#123; while(true)&#123;&#125; &#125; , 100);setTimeout( function()&#123; alert('ä½ å¥½!'); &#125; , 200);console.log(\"hello\"); ä¸Šé¢è¿™ä¸ªçš„ç»“æœé‡Œæ˜¯å¯ä»¥è¾“å‡ºhelloçš„ï¼Œè·Ÿæˆ‘ä»¬æƒ³çš„ä¸€æ ·ï¼Œä½†æ˜¯alertçš„ä½ å¥½ï¼Œæ˜¯æ°¸è¿œéƒ½æ²¡æœ‰åŠæ³•å‡ºæ¥çš„ã€‚åŸå› ä¸Šé¢è¯´äº†ã€‚ å¼‚æ­¥äº‹ä»¶é©±åŠ¨æµè§ˆå™¨æ˜¯äº‹ä»¶é©±åŠ¨çš„ï¼ˆEvent drivenï¼‰ï¼Œæµè§ˆå™¨ä¸­å¾ˆå¤šè¡Œä¸ºæ˜¯å¼‚æ­¥ï¼ˆAsynchronizedï¼‰çš„ï¼Œä¾‹å¦‚ï¼šé¼ æ ‡ç‚¹å‡»äº‹ä»¶ã€çª—å£å¤§å°æ‹–æ‹‰äº‹ä»¶ã€å®šæ—¶å™¨è§¦å‘äº‹ä»¶ã€XMLHttpRequestå®Œæˆå›è°ƒç­‰ã€‚å½“ä¸€ä¸ªå¼‚æ­¥äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™ï¼Œå®ƒå°±è¿›å…¥äº‹ä»¶é˜Ÿåˆ—ã€‚æµè§ˆå™¨æœ‰ä¸€ä¸ªå†…éƒ¨å¤§æ¶ˆæ¯å¾ªç¯ï¼ŒEvent Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ï¼Œä¼šè½®è¯¢å¤§çš„äº‹ä»¶é˜Ÿåˆ—å¹¶å¤„ç†äº‹ä»¶ã€‚ä¾‹å¦‚ï¼Œæµè§ˆå™¨å½“å‰æ­£åœ¨å¿™äºå¤„ç†onclickäº‹ä»¶ï¼Œè¿™æ—¶å¦å¤–ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿäº†ï¼ˆå¦‚ï¼šwindow onSizeï¼‰ï¼Œè¿™ä¸ªå¼‚æ­¥äº‹ä»¶å°±è¢«æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ç­‰å¾…å¤„ç†ï¼Œåªæœ‰å‰é¢çš„å¤„ç†å®Œæ¯•äº†ï¼Œç©ºé—²äº†æ‰ä¼šæ‰§è¡Œè¿™ä¸ªäº‹ä»¶ã€‚setTimeoutä¹Ÿæ˜¯ä¸€æ ·ï¼Œå½“è°ƒç”¨çš„æ—¶å€™ï¼Œjså¼•æ“ä¼šå¯åŠ¨å®šæ—¶å™¨timerï¼Œå¤§çº¦xxmsä»¥åæ‰§è¡Œxxxï¼Œå½“å®šæ—¶å™¨æ—¶é—´åˆ°ï¼Œå°±æŠŠè¯¥äº‹ä»¶æ”¾åˆ°ä¸»äº‹ä»¶é˜Ÿåˆ—ç­‰å¾…å¤„ç†ï¼ˆæµè§ˆå™¨ä¸å¿™çš„æ—¶å€™æ‰ä¼šçœŸæ­£æ‰§è¡Œï¼‰ã€‚ setTimeout(func, 0)ä¸€å®šæ˜¯0så°±æ‰§è¡Œå—ï¼Ÿä¸Šé¢è¯´äº†å¿…é¡»è¦ç­‰ä¸»çº¿ç¨‹çš„æ‰€æœ‰äº‹ä»¶è¢«å®Œæˆæ—¶ï¼Œæ‰èƒ½å¤Ÿæ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ä¸Šçš„äº‹ä»¶ã€‚setTimeout(func, 0ï¼‰è¿™å¥è¯ï¼Œå‘Šè¯‰äº†jså¼•æ“ï¼Œè¦åœ¨0sä¹‹åå§funcå‡½æ•°æ”¾åˆ°ä¸»äº‹ä»¶é˜Ÿåˆ—é‡Œé¢ï¼Œç­‰å¾…å½“å‰å…¶ä»–çš„æ‰€æœ‰çš„ä¸»çº¿ç¨‹ä»»åŠ¡å®Œæˆäº†ï¼Œå°±å¼€å§‹æ‰§è¡Œã€‚ä¹‹æ‰€ä»¥æœ‰ç”¨ï¼Œæ˜¯å› ä¸ºå½“å‰å¹¶æ²¡æœ‰ä¸»çº¿ç¨‹ä¸Šå¹¶æ²¡æœ‰å…¶ä»–çš„ä»»åŠ¡ã€‚å¦‚æœå½“å‰çš„ä¸»çº¿ç¨‹ä¸Šæœ‰å…¶ä»–çš„ä»»åŠ¡ï¼Œé‚£ä¹ˆå…¶å®funcçš„æ‰§è¡Œæ—¶é—´ï¼Œç»å¯¹ä¸ä¼šæ˜¯0sã€‚å› ä¸ºå®ƒè¿˜è¦æ’é˜Ÿã€‚ æ€»ç»“å¼‚æ­¥æ‰§è¡Œçš„è¿è¡Œæœºåˆ¶ï¼ˆ1ï¼‰æ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼ˆexecution context stackï¼‰ã€‚ ï¼ˆ2ï¼‰ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ª&quot;ä»»åŠ¡é˜Ÿåˆ—&quot;ï¼ˆtask queueï¼‰ã€‚åªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨&quot;ä»»åŠ¡é˜Ÿåˆ—&quot;ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚ ï¼ˆ3ï¼‰ä¸€æ—¦&quot;æ‰§è¡Œæ ˆ&quot;ä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–&quot;ä»»åŠ¡é˜Ÿåˆ—&quot;ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚é‚£äº›å¯¹åº”çš„å¼‚æ­¥ä»»åŠ¡ï¼Œäºæ˜¯ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆï¼Œå¼€å§‹æ‰§è¡Œã€‚ ï¼ˆ4ï¼‰ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢çš„ç¬¬ä¸‰æ­¥ã€‚ æ€»çš„æ¥è¯´å°±æ˜¯ï¼Œä»»åŠ¡é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡éƒ½æ˜¯å¿…é¡»ç­‰ä¸»çº¿ç¨‹çš„æ‰§è¡Œæ ˆç©ºäº†æ‰å»æ‰§è¡Œçš„ã€‚æˆ‘ä»¬é€šå¸¸è¯´çš„åŒæ­¥ä¹Ÿå°±æ˜¯æ²¡æœ‰ä¸Šé¢çš„å¼‚æ­¥ä»»åŠ¡ã€‚ Event Loopæ˜¯å•¥å­ï¼Ÿä¸»çº¿ç¨‹ä»â€œä»»åŠ¡é˜Ÿåˆ—â€ä¸­è¯»å–äº‹ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¾ªç¯ä¸æ–­çš„ï¼Œæ‰€ä»¥æ•´ä¸ªçš„è¿™ç§è¿è¡Œæœºåˆ¶åˆç§°ä¸ºEvent Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ã€‚ ä¸ºä»€ä¹ˆä¼šçœ‹è§ä¸‹é¢è¿™ç§ç°è±¡ï¼Ÿç°åœ¨æƒ³æƒ³ä»¥å‰å†™xhrçš„æ—¶å€™å°±åœ¨ä¹¦ä¸Šè¿™ä¹ˆçœ‹è¿‡ï¼Œä½†æ˜¯å½“æ—¶ä¹Ÿæ²¡å¤šæƒ³ï¼Œè™½ç„¶çŸ¥é“æ˜¯å¼‚æ­¥æ²¡å…³ç³»ã€‚123456789101112//å†™æ³•ä¸€var req = new XMLHttpRequest();req.open('GET', url); req.onload = function ()&#123;&#125;; req.onerror = function ()&#123;&#125;; req.send();//å†™æ³•äºŒvar req = new XMLHttpRequest();req.open('GET', url);req.send();req.onload = function ()&#123;&#125;; req.onerror = function ()&#123;&#125;; è¿™ä¸¤ç§å†™æ³•æ˜¯ä¸€æ ·çš„ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºsendæ˜¯ä¸€ä¸ªå¼‚æ­¥æ‰§è¡Œè¿‡ç¨‹ï¼Œé‚£ä¹ˆä»–ä¼šç­‰å½“å‰æ‰€æœ‰çš„éå¼‚æ­¥æ‰§è¡Œå®Œå†å»æ‰§è¡Œã€‚å®ƒè¢«æ”¾å…¥äº†ä»»åŠ¡é˜Ÿåˆ—ã€‚ å†æ¥çœ‹çœ‹å¼‚æ­¥ï¼Œå¤šçº¿ç¨‹ï¼Œå¹¶è¡Œçš„æ¦‚å¿µå¹¶è¡Œï¼Œä¸€èˆ¬æŒ‡å¹¶è¡Œè®¡ç®—ï¼Œæ˜¯è¯´åŒä¸€æ—¶åˆ»ï¼ˆæ³¨æ„å¹¶å‘æ˜¯åŒä¸€æ—¶é—´æ®µï¼‰æœ‰å¤šæ¡æŒ‡ä»¤åŒæ—¶è¢«æ‰§è¡Œï¼Œè¿™äº›æŒ‡ä»¤å¯èƒ½æ‰§è¡ŒäºåŒä¸€CPUçš„å¤šæ ¸ä¸Šï¼Œæˆ–è€…å¤šä¸ªCPUä¸Š,æˆ–è€…å¤šä¸ªç‰©ç†ä¸»æœºç”šè‡³å¤šä¸ªç½‘ç»œä¸­. å¼‚æ­¥ï¼Œä¸åŒæ­¥ç›¸å¯¹åº”ï¼Œå¼‚æ­¥æŒ‡çš„æ˜¯è®©CPUæš‚æ—¶æç½®å½“å‰è¯·æ±‚çš„å“åº”,å¤„ç†ä¸‹ä¸€ä¸ªè¯·æ±‚,å½“é€šè¿‡è½®è¯¢æˆ–å…¶ä»–æ–¹å¼å¾—åˆ°å›è°ƒé€šçŸ¥å,å¼€å§‹è¿è¡Œã€‚ çº¿ç¨‹ï¼Œæ˜¯ç¨‹åºä¸­ä¸€ä¸ªå•ä¸€çš„é¡ºåºæ§åˆ¶æµç¨‹ã€‚è¿›ç¨‹å†…ä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„ã€å¯è°ƒåº¦çš„æ‰§è¡Œå•å…ƒï¼Œæ˜¯ç³»ç»Ÿç‹¬ç«‹è°ƒåº¦å’Œåˆ†æ´¾CPUçš„åŸºæœ¬å•ä½æŒ‡è¿è¡Œä¸­çš„ç¨‹åºçš„è°ƒåº¦å•ä½ã€‚åœ¨å•ä¸ªç¨‹åºä¸­åŒæ—¶è¿è¡Œå¤šä¸ªçº¿ç¨‹å®Œæˆä¸åŒçš„å·¥ä½œï¼Œç§°ä¸ºå¤šçº¿ç¨‹ã€‚ æ€»ç»“äº†è§£äº†jså•çº¿ç¨‹ï¼ŒçŸ¥é“ä»€ä¹ˆæ˜¯å¼‚æ­¥äº‹ä»¶é©±åŠ¨ï¼ŒçŸ¥é“äº†æœ‰ä¸»çº¿ç¨‹çš„æ‰§è¡Œæ ˆå’Œä»»åŠ¡é˜Ÿåˆ—è¿™ä¸¤ä¸ªæœºåˆ¶ã€‚è¿˜æœ‰setTimoutä¸ä¸€å®šå°±æ˜¯åœ¨å®ƒè®¾ç½®çš„æ—¶é—´æ‰§è¡Œå‘¦ã€‚å­¦ä¹ å’Œæ•´ç†è‡ªruanyifengçš„æ–‡ç« ï¼Œæ„Ÿè°¢ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"è§£æå’Œæ•´ç†thisçš„æŒ‡å‘é—®é¢˜","slug":"è§£æå’Œæ•´ç†thisçš„æŒ‡å‘é—®é¢˜","date":"2016-03-15T12:44:43.000Z","updated":"2016-12-12T03:02:22.000Z","comments":true,"path":"2016/03/15/è§£æå’Œæ•´ç†thisçš„æŒ‡å‘é—®é¢˜/","link":"","permalink":"http://sevencai.github.io/2016/03/15/è§£æå’Œæ•´ç†thisçš„æŒ‡å‘é—®é¢˜/","excerpt":"","text":"æœ¬ç¯‡ä¸»è¦æ€»ç»“äº†thisæŒ‡é’ˆçš„æŒ‡å‘é—®é¢˜ã€‚å¦‚æœæŠŠé—®é¢˜ç»†åˆ†ï¼Œå°±å¯ä»¥æ›´å®¹æ˜“çš„å¾—åˆ°åˆ¤æ–­ã€‚ ä»¥æ™®é€šå‡½æ•°çš„æ–¹å¼è°ƒç”¨ï¼ˆInvocation as a functionï¼‰1234function test()&#123; console.log(this);&#125;test(); ç»“æœæ˜¯windowã€‚ç»“è®ºæ˜¯å½“æˆ‘ä»¬ä»¥ä¸€ä¸ªå‡½æ•°çš„æ–¹å¼è°ƒç”¨çš„æ—¶å€™ï¼Œthiså°±æ˜¯æŒ‡å‘windowå…¨å±€ä½œç”¨åŸŸã€‚å®šä¹‰åœ¨å…¨å±€çš„å‡½æ•°, å‡½æ•°çš„æ‰€æœ‰è€…å°±æ˜¯å½“å‰é¡µé¢, ä¹Ÿå°±æ˜¯windowå¯¹è±¡ã€‚æˆ‘ä»¬å¯ç”¨é€šè¿‡å‡½æ•°åç›´æ¥è°ƒç”¨, ä¹Ÿå¯ç”¨é€šè¿‡window.æ–¹æ³•åæ¥è°ƒç”¨, è¿™ä¸ªæ—¶å€™, æ–¹æ³•ä¸­çš„thiså…³é”®å­—æŒ‡å‘å®ƒçš„æ‰€æœ‰è€…:windowå¯¹è±¡.12345function a() &#123; function b() &#123; console.log(this); &#125; b();&#125;a(); è¯•è¯•è¿™ä¸€ä¸ªï¼Œå¯èƒ½å¤§å®¶è·Ÿæˆ‘ä¸€æ ·,å¦‚æœä¸ä»”ç»†çœ‹ï¼Œå°±ä¼šè§‰å¾—ç»“æœæ˜¯bã€‚ä½†å®é™…ä¸Šæ‰“å°å‡ºæ¥çš„è¿˜æ˜¯windowå¯¹è±¡ã€‚ When invoked in this manner, the function context is the global contextâ€”the window object. ä»¥å¯¹è±¡æ–¹æ³•æ¥è°ƒç”¨ï¼ˆInvocation as a methodï¼‰å‡½æ•°è¿˜å¯ä»¥ä½œä¸ºæŸä¸ªå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨ï¼Œè¿™æ—¶thiså°±æŒ‡è¿™ä¸ªä¸Šçº§å¯¹è±¡ã€‚123456var obj = &#123; fun : function()&#123; console.log(this); &#125;&#125;;obj.fun(); ç»“æœæ˜¯objectã€‚ç»“è®ºæ˜¯å½“æˆ‘ä»¬ä»¥ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•çš„å½¢å¼æ¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªæ—¶å€™çš„ä¸Šä¸‹æ–‡å°±å˜æˆäº†è¿™ä¸ªå¯¹è±¡ï¼ŒthisæŒ‡å‘çš„ä¹Ÿå°±æ˜¯è¿™ä¸ªå¯¹è±¡ã€‚ When we invoke the function as the method of an object, that object becomes the function context and is available within the function via the this parameter. ä»¥æ„é€ å‡½æ•°çš„å½¢å¼ï¼ˆInvocation as a constructorï¼‰é€šè¿‡æ„é€ å‡½æ•°å¯ä»¥ç”Ÿæˆä¸€ä¸ªæ–°å¯¹è±¡ï¼Œthiså°±æŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡ã€‚12345function creep()&#123; console.log(this); return this; &#125;new creep(); ç»“æœæ˜¯creep{}ã€‚å½“æˆ‘ä»¬ä»¥æ„é€ å‡½æ•°çš„å½¢å¼å”¤é†’ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå°±ä¼šå‘ç”Ÿä¸‹é¢è¿™äº›äº‹æƒ…ï¼šä¸€ä¸ªæ–°çš„å¯¹è±¡ä¼šé¦–å…ˆè¢«åˆ›å»ºï¼Œè¢«åˆ›å»ºçš„å¯¹è±¡ä¼šæˆä¸ºå½“å‰æ„é€ å‡½æ•°çš„ä¸Šä¸‹æ–‡ã€‚ Invoking a function as a constructor is a powerful feature of JavaScript, because when a constructor is invoked, the following special actions take place: * A new empty object is created. * This object is passed to the constructor as the this parameter, and thus becomes the constructorâ€™s function context. * In the absence of any explicit return value, the new object is returned as the constructor&apos;s value. Callå’ŒApplyæ”¹å˜thisæŒ‡å‘(Invocation with the apply() and call() methods)apply()ï¼ŒApply()æ˜¯å‡½æ•°å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ”¹å˜å‡½æ•°çš„è°ƒç”¨å¯¹è±¡ï¼Œåˆ‡æ¢å‡½æ•°æ‰§è¡Œçš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼ˆcontextï¼‰ï¼Œå³ this ç»‘å®šçš„å¯¹è±¡ã€‚Callå’ŒApplyçš„åŒºåˆ«åœ¨äºï¼Œapplyä¼ é€’çš„æ˜¯æ•°ç»„ï¼Œcallä¼ é€’çš„æ˜¯ç›´æ¥å‚æ•°é‡ã€‚12345678910111213function juggle() &#123; var result = 0; for (var n = 0; n &lt; arguments.length; n++) &#123; result += arguments[n]; &#125; this.result = result;&#125; var ninja1 = &#123;&#125;;var ninja2 = &#123;&#125;;juggle.apply(ninja1,[1,2,3,4]);juggle.call(ninja2,5,6,7,8); assert(ninja1.result === 10,\"juggled via apply\");assert(ninja2.result === 26,\"juggled via call\"); To invoke a function using its apply() method, we pass two parameters to apply(): the object to be used as the function context, and an array of values to be used as the invocation arguments. The call() method is used in a similar manner, except that the arguments are passed directly in the argument list rather than as an array. ä»¥äº‹ä»¶å¤„ç†å‡½æ•°çš„æ–¹å¼1234function test()&#123; console.log(this.value);&#125;document.getElementById(\"ele\").onblur = test; è¿™æ ·æ˜¯å¯ä»¥å‡†ç¡®çš„å¾—åˆ°inputé‡Œé¢çš„å€¼çš„,ä½†æ˜¯ä¸ºå•¥è¿™é‡Œthisä¸æ˜¯windowå¯¹è±¡å‘¢ï¼Ÿtestæ˜¯å†å…¨å±€ä½œç”¨åŸŸä¸‹å®šä¹‰çš„å—ï¼Ÿä¸ºå•¥å¯ä»¥æˆåŠŸçš„è·å–åˆ°DOMçš„å€¼å‘¢ï¼Ÿé—®é¢˜å‡ºåœ¨onclickäº‹ä»¶ç»‘å®šçš„æ—¶å€™ï¼Œåœ¨å¯¹onclickç»‘å®šå¤„ç†å™¨çš„æ—¶å€™, å…¶å®æ˜¯å¯¹idä¸ºnameçš„è¾“å…¥æ¡†Domå¯¹è±¡çš„onclickå±æ€§èµ‹å€¼ã€‚æ¯”å¦‚è¯´æˆ‘ä»¬æŠŠè¿™ä¸ªonblurå¯¹è±¡æ‰“å°å‡ºæ¥ï¼šconsole.log(document.getElementById(â€œeleâ€).onblur); å¯ä»¥çœ‹åˆ°è¿™ä¸ªonbluråº•ä¸‹æ˜¯æœ‰testå‡½æ•°çš„ã€‚ æ¯”å¦‚è¯´ä¸‹é¢è¿™ä¸ªå¯ä»¥å¾—åˆ°æ­£ç¡®çš„ç­”æ¡ˆå—ï¼Ÿ1234function test() &#123; alert(this.value);&#125;&lt;input id=\"name\" type=\"text\" value=\"test\" onclick=\"test()\"/&gt; è¿™ä¸ªæ—¶å€™çš„alertå‡ºæ¥çš„æ˜¯undefinedã€‚æ‰€ä»¥è¿™é‡Œçš„thisæŒ‡å‘å…¨å±€å¯¹è±¡windowã€‚ åµŒå¥—å‡½æ•°ä¸­çš„thisåµŒå¥—å‡½æ•°ä¸­çš„thisä¸ä¼šç»§æ‰¿çˆ¶çº§å‡½æ•°çš„thisï¼Œéœ€è¦å°†thiså˜é‡è¿›è¡Œæš‚å­˜ï¼Œä¿å­˜åˆ°å¦å¤–ä¸€ä¸ªå˜é‡ä¸­æ‰è¡Œã€‚æ¯”å¦‚ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼š12345678910111213141516171819202122232425262728//ä¾‹å­1var name = \"outer\"; var foo3 = &#123; name: \"inner\", sayHello: function() &#123; console.log(this.name); var subSayHello = function() &#123; console.log(this.name); &#125; subSayHello(); &#125; &#125; foo3.sayHello(); //å…ˆè¾“å‡ºinnerï¼Œåè¾“å‡ºouter//ä¾‹å­2 var name = \"outer\"; var foo3 = &#123; name: \"inner\", sayHello: function() &#123; var that = this; console.log(that.name); var subSayHello = function() &#123; console.log(that.name); &#125; subSayHello(); &#125; &#125; foo3.sayHello(); // éƒ½è¾“å‡ºinner ä¸¥æ ¼æ¨¡å¼ä¸‹çš„thisECMAScript 5 å¼•å…¥äº† strict mode ,ç°åœ¨å·²ç»è¢«å¤§å¤šæµè§ˆå™¨å®ç°(åŒ…æ‹¬IE10. ä¼šä½¿webæµè§ˆå™¨æ›´å®¹æ˜“çš„è§£æä»£ç (åªéœ€è¦æ·»åŠ  â€œuse strictâ€; åœ¨æºç çš„æœ€ä¸Šé¢), ç”±ç°æœ‰çš„ä»£ç åˆ°ä¸¥æ ¼æ¨¡å¼çš„è¿‡æ¸¡éœ€è¦ä¸€äº›äº‹åš. åœ¨æ™®é€šçš„å‡½æ•°è°ƒç”¨f()ä¸­,thisçš„å€¼ä¼šæŒ‡å‘å…¨å±€å¯¹è±¡.åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­,thisçš„å€¼ä¼šæŒ‡å‘undefined.å½“å‡½æ•°é€šè¿‡callå’Œapplyè°ƒç”¨æ—¶,å¦‚æœä¼ å…¥çš„thisvalueå‚æ•°æ˜¯ä¸€ä¸ªnullå’Œundefinedé™¤å¤–çš„åŸå§‹å€¼(å­—ç¬¦ä¸²,æ•°å­—,å¸ƒå°”å€¼),åˆ™thisçš„å€¼ä¼šæˆä¸ºé‚£ä¸ªåŸå§‹å€¼å¯¹åº”çš„åŒ…è£…å¯¹è±¡,å¦‚æœthisvalueå‚æ•°çš„å€¼æ˜¯undefinedæˆ–null,åˆ™thisçš„å€¼ä¼šæŒ‡å‘å…¨å±€å¯¹è±¡.åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­,thisçš„å€¼å°±æ˜¯thisvalueå‚æ•°çš„å€¼,æ²¡æœ‰ä»»ä½•ç±»å‹è½¬æ¢. æ€»ç»“é—®é¢˜æ¥å•¦ï¼Œè°ƒç”¨è€…æ˜¯è°thiså°±æŒ‡å‘è°ï¼Œè¿™å¥è¯å¯¹å—ï¼Ÿï¼Ÿï¼Ÿï¼ï¼ï¼","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"javascriptçš„åƒåœ¾å›æ”¶æœºåˆ¶","slug":"javascriptçš„åƒåœ¾å›æ”¶æœºåˆ¶","date":"2016-03-13T05:48:14.000Z","updated":"2016-12-12T03:00:44.000Z","comments":true,"path":"2016/03/13/javascriptçš„åƒåœ¾å›æ”¶æœºåˆ¶/","link":"","permalink":"http://sevencai.github.io/2016/03/13/javascriptçš„åƒåœ¾å›æ”¶æœºåˆ¶/","excerpt":"","text":"å’Œjava,c#ä¸€æ ·ï¼Œjavascriptä¹Ÿæœ‰è‡ªåŠ¨åƒåœ¾å›æ”¶çš„æœºåˆ¶ï¼Œæ¯”å¦‚è¯´c++å’Œcå°±æ²¡æœ‰è‡ªåŠ¨åƒåœ¾å›æ”¶æœºåˆ¶ã€‚å¯èƒ½æœ‰è¿™ä¹ˆä¸€ç§å€¾å‘ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶å¿…é¡»æœ‰ä¸€ç§å¹³å°æ¥è¿›è¡Œå›æ”¶ã€‚æ¯”å¦‚è¯´ä¸‹é¢å°†çš„javascriptçš„æ‰§è¡Œç¯å¢ƒV8å°±ä¼šè´Ÿè´£ç®¡ç†ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­çš„åƒåœ¾å›æ”¶ã€‚ javascriptå…·æœ‰è‡ªåŠ¨åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæ‰§è¡Œç¯å¢ƒä¼šè´Ÿè´£ç®¡ç†ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­ä½¿ç”¨çš„å†…å­˜ã€‚åŸç†å°±æ˜¯æ‰¾å‡ºé‚£äº›ä¸å†ç»§ç»­ä½¿ç”¨çš„å˜é‡ï¼Œç„¶åé‡Šæ”¾å…¶å æœ‰å†…å­˜ã€‚è¿™æ•´ä¸ªè¿‡ç¨‹ä¹Ÿä¼šæŒ‰ç…§ä¸€ä¸ªå›ºå®šçš„äº‹ä»¶å‘¨æœŸæ€§çš„æ•´å½¢ï¼ˆæ—¶æ—¶çš„è¯å¼€é”€å¤ªå¤§ï¼‰ã€‚ å˜é‡çš„å£°æ˜å‘¨æœŸåˆšåˆšåŸç†ä¸­æåˆ°è¦æ‰¾å‡ºä¸å†ä½¿ç”¨çš„å˜é‡ï¼Œä»€ä¹ˆæ˜¯ä¸å†ä½¿ç”¨çš„å¯¹è±¡å‘¢ï¼Ÿä¸å†ä½¿ç”¨çš„å˜é‡ä¹Ÿå°±æ˜¯ç”Ÿå‘½å‘¨æœŸç»“æŸçš„å˜é‡ã€‚ç›®å‰javascriptæœ‰ä¸¤ç§å˜é‡ï¼Œå…¨å±€å˜é‡å’Œåœ¨å‡½æ•°ä¸­äº§ç”Ÿçš„å±€éƒ¨å˜é‡ï¼ˆæš‚ä¸è€ƒè™‘ES6ä¸­çš„å—çº§ä½œç”¨åŸŸï¼‰ã€‚ å…¨å±€å˜é‡çš„å£°æ˜å‘¨æœŸä¸€ç›´æŒç»­åˆ°æµè§ˆå™¨å…³é—­é¡µé¢æ‰ä¼šæ¸…é™¤ï¼Œè€Œå±€éƒ¨å˜é‡åªæ˜¯åœ¨å‡½æ•°æ‰§è¡Œå™¨å­˜åœ¨ï¼Œè€Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šä¸ºå±€éƒ¨å˜é‡åœ¨æ ˆæˆ–è€…å †ä¸Šåˆ†é…ç›¸åº”çš„ç©ºé—´ï¼Œæ¥å­˜å‚¨ä»–ä»¬çš„å€¼ï¼Œç„¶åå½“å‡½æ•°è¦ä½¿ç”¨è¿™äº›å˜é‡çš„å€¼æ—¶å†å–å‡ºæ¥ä½¿ç”¨ã€‚ä¸€ç›´åˆ°å‡½æ•°ç»“æŸï¼ˆé—­åŒ…ä¼šä¸åŒï¼‰ã€‚ ä¸€æ—¦å‡½æ•°ç»“æŸï¼Œå±€éƒ¨å˜é‡å°±ä¸éœ€è¦äº†ï¼Œè¿™æ—¶å€™å°±å¯ä»¥é‡Šæ”¾ä»–ä»¬çš„å†…å­˜ã€‚12345var globalVariable = \"I'm global\";function test()&#123; var localVariable = \"I'm local\";&#125;test(); è¿™ä¸ªä¾‹å­é‡Œé¢ï¼Œglobalåœ¨å…³é—­æµè§ˆå™¨æ—¶é‡Šæ”¾ï¼Œlocalåœ¨å‡½æ•°testç»“æŸåï¼Œé‡Šæ”¾ã€‚ å…·ä½“çœ‹ä¸‹åƒåœ¾å›æ”¶çš„ä¸¤ç§å›æ”¶æœºåˆ¶ã€‚ jsçš„ä¸¤ç§å›æ”¶æœºåˆ¶æ ‡è®°æ¸…é™¤ï¼ˆmark and sweepï¼‰ä»è¯­ä¹‰ä¸Šç†è§£å°±æ¯”è¾ƒå¥½ç†è§£äº†ï¼Œå¤§æ¦‚å°±æ˜¯å½“å˜é‡è¿›å…¥åˆ°æŸä¸ªç¯å¢ƒä¸­çš„æ—¶å€™å°±æŠŠè¿™ä¸ªå˜é‡æ ‡è®°ä¸€ä¸‹ï¼Œæ¯”å¦‚æ ‡è®°ä¸ºâ€œè¿›å…¥ç¯å¢ƒâ€ï¼Œå½“ç¦»å¼€çš„æ—¶å€™å°±æŠŠè¿™ä¸ªå˜é‡çš„æ ‡è®°ç»™æ¸…é™¤æ‰ï¼Œæ¯”å¦‚æ˜¯â€œç¦»å¼€ç¯å¢ƒâ€ã€‚è€Œåœ¨è¿™åé¢è¿˜æœ‰æ ‡è®°çš„å˜é‡å°†è¢«è§†ä¸ºå‡†å¤‡åˆ é™¤çš„å˜é‡ã€‚ åƒåœ¾æ”¶é›†å™¨åœ¨è¿è¡Œçš„æ—¶å€™ä¼šç»™å­˜å‚¨åœ¨å†…å­˜ä¸­çš„æ‰€æœ‰å˜é‡éƒ½åŠ ä¸Šæ ‡è®°ï¼ˆå¯ä»¥ä½¿ç”¨ä»»ä½•æ ‡è®°æ–¹å¼ï¼‰ã€‚ç„¶åï¼Œå®ƒä¼šå»æ‰ç¯å¢ƒä¸­çš„å˜é‡ä»¥åŠè¢«ç¯å¢ƒä¸­çš„å˜é‡å¼•ç”¨çš„å˜é‡çš„æ ‡è®°ã€‚è€Œåœ¨æ­¤ä¹‹åå†è¢«åŠ ä¸Šçš„æ ‡è®°çš„å˜é‡å°†è¢«è§†ä¸ºå‡†å¤‡åˆ é™¤çš„å˜é‡ï¼ŒåŸå› æ˜¯ç¯å¢ƒä¸­çš„å˜é‡å·²ç»æ— æ³•è®¿é—®åˆ°è¿™äº›å˜é‡äº†ã€‚æœ€åï¼Œåƒåœ¾æ”¶é›†å™¨å®Œæˆå†…å­˜æ¸…é™¤å·¥ä½œã€‚é”€æ¯é‚£äº›å¸¦æ ‡è®°çš„å€¼å¹¶å›æ”¶å®ƒä»¬æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚ è¿™æ˜¯javascriptæœ€å¸¸è§çš„åƒåœ¾å›æ”¶æ–¹å¼ã€‚è‡³äºä¸Šé¢æœ‰è¯´é“çš„æ ‡è®°ï¼Œåˆ°åº•è¯¥å¦‚ä½•æ ‡è®°ï¼Ÿå¥½åƒæ˜¯æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œæ¯”å¦‚ç‰¹æ®Šä½ç¿»è½¬ï¼Œç»´æŠ¤ä¸€ä¸ªåˆ—è¡¨ä»€ä¹ˆçš„ã€‚ å¼•ç”¨è®¡æ•°ï¼ˆreference countingï¼‰å¼•ç”¨è®¡æ•°çš„å«ä¹‰æ˜¯è·Ÿè¸ªè®°å½•æ¯ä¸ªå€¼è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼Œå½“å£°æ˜ä¸€ä¸ªå˜é‡å¹¶å°†ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å€¼èµ‹ç»™è¯¥å˜é‡æ—¶ï¼Œè¿™ä¸ªæ—¶å€™çš„å¼•ç”¨ç±»å‹çš„å€¼å°±ä¼šæ˜¯å¼•ç”¨æ¬¡æ•°+1äº†ã€‚å¦‚æœåŒä¸€ä¸ªå€¼åˆè¢«èµ‹ç»™å¦å¤–ä¸€ä¸ªå˜é‡ï¼Œåˆ™è¯¥å€¼çš„å¼•ç”¨æ¬¡æ•°åˆ+1ã€‚ ç›¸åå¦‚æœåŒ…å«è¿™ä¸ªå€¼çš„å¼•ç”¨çš„å˜é‡åˆå–å¾—å¦å¤–ä¸€ä¸ªå€¼ï¼Œå³è¢«é‡æ–°èµ‹äº†å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼çš„å¼•ç”¨å°±å‡ä¸€ã€‚å½“è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°ç¼–ç¨‹0æ—¶ï¼Œè¡¨ç¤ºæ²¡æœ‰ç”¨åˆ°è¿™ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼ä¹Ÿæ— æ³•è®¿é—®ï¼Œå› æ­¤ç¯å¢ƒå°±ä¼šæ”¶å›è¿™ä¸ªå€¼æ‰€å ç”¨çš„å†…å­˜ç©ºé—´å›æ”¶ã€‚è¿™æ ·ï¼Œå½“åƒåœ¾æ”¶é›†å™¨ä¸‹æ¬¡å†è¿è¡Œæ—¶ï¼Œå®ƒå°±ä¼šé‡Šæ”¾å¼•ç”¨æ¬¡æ•°ä¸º0çš„å€¼æ‰€å ç”¨çš„å†…å­˜ã€‚ ä½†æ˜¯åˆšåˆšä¹Ÿè¯´äº†ï¼Œç¬¬ä¸€ç§æ ‡è®°æ¸…é™¤æ˜¯æœ€ç»å¸¸ç”¨åˆ°çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªçœ‹èµ·æ¥è¿™ä¹ˆå¥½çš„å¼•ç”¨è®¡æ•°ä¸ºå•¥ä¸è¢«åˆ«äººç”¨äº†å‘¢ï¼Ÿ å› ä¸ºè¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šå‡ºç°ä¸€ä¸ªå¾ªç¯å¼•ç”¨çš„é—®é¢˜! ç®€å•ç‚¹æ¥è¯´å°±æ˜¯ä¸€ä¸ªå¯¹è±¡å°açš„å±æ€§ï¼Œå¼•ç”¨äº†å¯¹è±¡å°bã€‚å°bå¯¹è±¡ä¹Ÿæœ‰ä¸€ä¸ªå±æ€§å¼•ç”¨äº†å°a,é‚£ä¹ˆå°a,å°bäº’ç›¸å¼•ç”¨å¯¹æ–¹ï¼Œä¹Ÿå°±é€ æˆäº†å¾ªç¯å¼•ç”¨çš„é—®é¢˜å•¦ã€‚ ç…®ä¸ªæ —å­ï¼š123456function test()&#123; var a = &#123;&#125;; var b = &#123;&#125;; a.property = b; b.property = a;&#125; è¿™å°±æ˜¯ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„å¾ªç¯å¼•ç”¨äº†ï¼Œå°aå’Œå°bé€šè¿‡å„è‡ªçš„å±æ€§äº’ç›¸å¼•ç”¨ï¼Œå¯¼è‡´äº†å†…å­˜æ— æ³•é‡Šæ”¾ã€‚ï¼ˆæœ‰é‚£ä¹ˆä¸€ç‚¹ç‚¹çš„æ„Ÿè§‰åƒæ­»é”ã€‚ã€‚ã€‚ã€‚ï¼‰å³ä½¿æ˜¯å†test()æ‰§è¡Œå®Œåï¼Œå¦‚æœä½¿ç”¨æ ‡è®°æ¸…é™¤æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œç¦»å¼€ç¯å¢ƒçš„æ—¶å€™å°±ä¼šè¢«æ¸…é™¤ã€‚ä½†æ˜¯å¼•ç”¨è®¡æ•°ä¸è¡Œï¼Œå› ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡çš„å¼•ç”¨æ¬¡æ•°è¿˜æ˜¯å­˜åœ¨ï¼Œä¸ä¼šå˜æˆ0ï¼Œæ‰€ä»¥å…¶å ç”¨ç©ºé—´ä¹Ÿä¸ä¼šæ¸…ç†ï¼Œå¦‚æœè¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨å¤šæ¬¡ï¼Œå°±ä¼šä¸æ–­æœ‰å†…å­˜è¢«å ç”¨ã€‚é€ æˆäº†å†…å­˜æ³„éœ²ã€‚ IEä¸­æœ‰ä¸€éƒ¨åˆ†å¯¹è±¡å¹¶ä¸æ˜¯åŸç”ŸJavaScriptå¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œå…¶BOMå’ŒDOMä¸­çš„å¯¹è±¡å°±æ˜¯ä½¿ç”¨C++ä»¥COM(Component Object Model)å¯¹è±¡çš„å½¢å¼å®ç°çš„ï¼Œè€ŒCOMå¯¹è±¡çš„åƒåœ¾æ”¶é›†æœºåˆ¶é‡‡ç”¨çš„å°±æ˜¯å¼•ç”¨è®¡æ•°ç­–ç•¥ã€‚ å› æ­¤å³ä½¿IEçš„jså¼•æ“æ˜¯ç”¨çš„æ ‡è®°æ¸…é™¤æ¥å®ç°çš„ï¼Œä½†æ˜¯jsè®¿é—®COMå¯¹è±¡å¦‚BOM,DOMè¿˜æ˜¯åŸºäºå¼•ç”¨è®¡æ•°çš„ç­–ç•¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦åœ¨IEä¸­è®¾è®¡åˆ°COMå¯¹è±¡ï¼Œä¹Ÿå°±ä¼šå­˜åœ¨å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚ æ¯”å¦‚è¯´ç¬¬ä¸€ç§æƒ…å†µï¼šä¸€ä¸ªDOMå…ƒç´ å’Œä¸€ä¸ªåŸç”Ÿçš„jså¯¹è±¡ä¹‹é—´çš„å¾ªç¯å¼•ç”¨1234567var ele = document.getElementById(\"ele\");var obj = &#123;&#125;;obj.property = ele;ele.property = obj;//è¿™ç§æƒ…å†µåº”è¯¥æ‰‹åŠ¨è®¾ç½®ï¼Œåœ¨ä¸é€‚ç”¨çš„æ—¶å€™æ‰‹å·¥æ–­å¼€jså’Œdomå…ƒç´ ä¹‹é—´çš„è¿æ¥obj.property = null;ele.property = null; æ¯”å¦‚ç¬¬äºŒç§æƒ…å†µæ˜¯é—­åŒ…çš„ä½œç”¨åŸŸé“¾ä¸­åŒ…å«ç€ä¸€ä¸ªhtmlå…ƒç´ ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ æ— æ³•è¢«é”€æ¯123456window.onload = function outerFunction()&#123; var ele= document.getElementById(\"element\"); ele.onclick = function ()&#123; console.log(ele.id); &#125;&#125; ä¸Šé¢è¿™ä¸ªä»£ç åˆ›å»ºäº†ä¸€ä¸ªä½œä¸ºeleå…ƒç´ å¤„ç†ç¨‹åºçš„é—­åŒ…ï¼Œè€Œè¿™ä¸ªé—­åŒ…åˆ™åˆåˆ›å»ºäº†ä¸€ä¸ªå¾ªç¯å¼•ç”¨ã€‚yåŒ¿åå‡½æ•°ä¸­ä¿å­˜äº†ä¸€ä¸ªouterFunction()çš„æ´»åŠ¨å¯¹è±¡çš„å¼•ç”¨ï¼Œå› æ­¤å°±ä¼šå¯¼è‡´æ— æ³•å‡å°‘eleçš„å¼•ç”¨ã€‚å¯ä»¥æ”¹æˆä¸‹é¢è¿™ä¸ªï¼š 12345678window.onload = function outerFunction()&#123; var ele= document.getElementById(\"element\"); var id = ele.id; ele.onclick = function ()&#123; console.log(id); &#125; ele = null;&#125; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œé€šè¿‡æŠŠele.id çš„ä¸€ä¸ªå‰¯æœ¬ä¿å­˜åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼Œå¹¶ä¸”åœ¨é—­åŒ…ä¸­å¼•ç”¨æ”¹å˜é‡æ¶ˆé™¤äº†å¾ªç¯å¼•ç”¨ã€‚ å¿…é¡»è¦è®°ä½ï¼šé—­åŒ…ä¼šå¼•ç”¨åŒ…å«å‡½æ•°çš„æ•´ä¸ªæ´»åŠ¨å¯¹è±¡ï¼Œè€Œå…¶ä¸­åŒ…å«ç€elemã€‚å³ä½¿é—­åŒ…ä¸ç›´æ¥å¼•ç”¨eleï¼ˆæ¯”å¦‚ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬ä¸ç”¨idï¼‰ï¼ŒåŒ…å«å‡½æ•°çš„å¤šåŠ¨å¯¹è±¡ä¸­ä¹Ÿä¾æ—§ä¼šä¿å­˜ä¸€ä¸ªå¼•ç”¨ã€‚å› æ­¤ï¼Œæœ‰å¿…è¦æŠŠeleå˜é‡è®¾ç½®ä¸ºnullã€‚è¿™æ ·å°±èƒ½å¤Ÿè§£é™¤å¯¹DOMå¯¹è±¡çš„å¼•ç”¨ï¼Œé¡ºåˆ©åœ°å‡å°‘å…¶å¼•ç”¨æ•°ï¼Œç¡®ä¿æ­£å¸¸å›æ”¶å…¶å ç”¨çš„å†…å­˜ã€‚ å°†å˜é‡è®¾ç½®ä¸ºnullæ„å‘³ç€åˆ‡æ–­å˜é‡ä¸å®ƒæ­¤å‰å¼•ç”¨çš„å€¼ä¹‹é—´çš„è¿æ¥ã€‚å½“åƒåœ¾æ”¶é›†å™¨ä¸‹æ¬¡è¿è¡Œæ—¶ï¼Œå°±ä¼šåˆ é™¤è¿™äº›å€¼å¹¶å›æ”¶å®ƒä»¬å ç”¨çš„å†…å­˜ã€‚ ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼ŒIE9æŠŠBOMå’ŒDOMå¯¹è±¡éƒ½è½¬æ¢æˆäº†çœŸæ­£çš„JavaScriptå¯¹è±¡ã€‚ javascriptä¸V8å¼•æ“åƒåœ¾å›æ”¶æœºåˆ¶çš„å¥½å¤„å’Œåå¤„å¥½å¤„ï¼šå¤§å¹…ç®€åŒ–ç¨‹åºçš„å†…å­˜ç®¡ç†ä»£ç ï¼Œå‡è½»ç¨‹åºçŒ¿è´Ÿæ‹…ï¼Œå¹¶ä¸”å‡å°‘å› ä¸ºé•¿æ—¶é—´è¿è½¬è€Œå¸¦æ¥çš„å†…å­˜æ³„éœ²é—®é¢˜ã€‚ åå¤„ï¼šè‡ªåŠ¨å›æ”¶æ„å‘³ç€ç¨‹åºçŒ¿æ— æ³•æŒæ§å†…å­˜ã€‚ECMAScriptä¸­æ²¡æœ‰æš´éœ²åƒåœ¾å›æ”¶çš„å€Ÿå£ï¼Œæˆ‘ä»¬æ— æ³•å¼ºè¿«å…¶è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œæ›´åŠ æ— æ³•å¹²é¢„å†…å­˜ç®¡ç†ã€‚ nodeå†…å­˜ç®¡ç†é—®é¢˜åœ¨æµè§ˆå™¨ä¸­ï¼ŒV8å¼•æ“å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸä¸ä¼šå¾ˆé•¿ï¼ˆå› ä¸ºæˆ‘ä»¬ä½¿ç”¨å®Œç½‘ç«™å°±ä¼šæŠŠç½‘ç«™å…³é—­ï¼‰ï¼Œè€Œä¸”è¿è¡Œåœ¨ç”¨æˆ·çš„æœºå™¨ä¸Šã€‚å¦‚æœä¸å¹¸å‘ç”Ÿå†…å­˜æ³„éœ²ç­‰é—®é¢˜ï¼Œä»…ä»…ä¼šå½±å“åˆ°ä¸€ä¸ªç»ˆç«¯ç”¨æˆ·ã€‚ä¸”æ— è®ºè¿™ä¸ªV8å®ä¾‹å ç”¨äº†å¤šå°‘å†…å­˜ï¼Œæœ€ç»ˆåœ¨å…³é—­é¡µé¢æ—¶å†…å­˜éƒ½ä¼šè¢«é‡Šæ”¾ï¼Œå‡ ä¹æ²¡æœ‰å¤ªå¤šç®¡ç†çš„å¿…è¦ï¼ˆå½“ç„¶å¹¶ä¸ä»£è¡¨ä¸€äº›å¤§å‹Webåº”ç”¨ä¸éœ€è¦ç®¡ç†å†…å­˜ï¼‰ã€‚ä½†å¦‚æœä½¿ç”¨Nodeä½œä¸ºæœåŠ¡å™¨ï¼Œå°±éœ€è¦å…³æ³¨å†…å­˜é—®é¢˜äº†ï¼Œä¸€æ—¦å†…å­˜å‘ç”Ÿæ³„æ¼ï¼Œä¹…è€Œä¹…ä¹‹æ•´ä¸ªæœåŠ¡å°†ä¼šç˜«ç—ªï¼ˆæœåŠ¡å™¨ä¸ä¼šé¢‘ç¹çš„é‡å¯ï¼‰ã€‚ æ¶¨çŸ¥è¯†ä¹‹V8å†…å­˜é™åˆ¶Nodeä¸å…¶ä»–è¯­è¨€ä¸åŒçš„ä¸€ä¸ªåœ°æ–¹ï¼Œå°±æ˜¯å…¶é™åˆ¶äº†JavaScriptæ‰€èƒ½ä½¿ç”¨çš„å†…å­˜ï¼ˆ64ä½ä¸º1.4GBï¼Œ32ä½ä¸º0.7GBï¼‰ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€å°†æ— æ³•ç›´æ¥æ“ä½œä¸€äº›å¤§å†…å­˜å¯¹è±¡ã€‚è¿™å¾ˆä»¤äººåŒªå¤·æ‰€æ€ï¼Œå› ä¸ºå¾ˆå°‘æœ‰å…¶ä»–è¯­è¨€ä¼šé™åˆ¶å†…å­˜çš„ä½¿ç”¨ã€‚ V8ä¹‹æ‰€ä»¥é™åˆ¶äº†å†…å­˜çš„å¤§å°ï¼Œè¡¨é¢ä¸Šçš„åŸå› æ˜¯V8æœ€åˆæ˜¯ä½œä¸ºæµè§ˆå™¨çš„JavaScriptå¼•æ“è€Œè®¾è®¡ï¼Œä¸å¤ªå¯èƒ½é‡åˆ°å¤§é‡å†…å­˜çš„åœºæ™¯ï¼Œè€Œæ·±å±‚æ¬¡çš„åŸå› åˆ™æ˜¯ç”±äºV8çš„åƒåœ¾å›æ”¶æœºåˆ¶çš„é™åˆ¶ã€‚ç”±äºV8éœ€è¦ä¿è¯JavaScriptåº”ç”¨é€»è¾‘ä¸åƒåœ¾å›æ”¶å™¨æ‰€çœ‹åˆ°çš„ä¸ä¸€æ ·ï¼ŒV8åœ¨æ‰§è¡Œåƒåœ¾å›æ”¶æ—¶ä¼šé˜»å¡JavaScriptåº”ç”¨é€»è¾‘ï¼Œç›´åˆ°åƒåœ¾å›æ”¶ç»“æŸå†é‡æ–°æ‰§è¡ŒJavaScriptåº”ç”¨é€»è¾‘ï¼Œè¿™ç§è¡Œä¸ºè¢«ç§°ä¸ºâ€œå…¨åœé¡¿â€ï¼ˆstop-the-worldï¼‰ã€‚è‹¥V8çš„å †å†…å­˜ä¸º1.5GBï¼ŒV8åšä¸€æ¬¡å°çš„åƒåœ¾å›æ”¶éœ€è¦50msä»¥ä¸Šï¼Œåšä¸€æ¬¡éå¢é‡å¼çš„åƒåœ¾å›æ”¶ç”šè‡³è¦1ç§’ä»¥ä¸Šã€‚è¿™æ ·æµè§ˆå™¨å°†åœ¨1så†…å¤±å»å¯¹ç”¨æˆ·çš„å“åº”ï¼Œé€ æˆå‡æ­»ç°è±¡ã€‚å¦‚æœæœ‰åŠ¨ç”»æ•ˆæœçš„è¯ï¼ŒåŠ¨ç”»çš„å±•ç°ä¹Ÿå°†æ˜¾è‘—å—åˆ°å½±å“ã€‚ æ€»ç»“å¯¹jsçš„åƒåœ¾å›æ”¶æœºåˆ¶æœ‰æ‰€äº†è§£äº†ï¼Œä¹Ÿæ˜ç™½äº†å¹³å¸¸è‡ªå·±å†™ä»£ç çš„æ—¶å€™è‚¯èƒ½ä¼šæœ‰è¿™äº›é—®é¢˜ï¼Œæ¯”å¦‚COMçš„å¾ªç¯å¼•ç”¨ã€‚ä½†æ˜¯çœ‹åˆ°IE9çš„å·²ç»æŠŠCOMå˜æˆäº†çœŸæ­£çš„jså¯¹è±¡ï¼Œä»¥ååº”è¯¥ä¼šè¶Šæ¥è¶Šå¥½ã€‚ä¸»è¦å­¦ä¹ å’Œæ•´ç†è‡ªï¼šsegmentfaultå’Œjavascriptçš„é«˜çº§ç¨‹åºè®¾è®¡ã€‚æ„Ÿè°¢ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"æ€»ç»“åœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€","slug":"æ€»ç»“åœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€","date":"2016-03-12T09:02:32.000Z","updated":"2017-12-19T12:40:23.000Z","comments":true,"path":"2016/03/12/æ€»ç»“åœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€/","link":"","permalink":"http://sevencai.github.io/2016/03/12/æ€»ç»“åœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€/","excerpt":"","text":"å¾ˆä¹…ä»¥å‰å°±çŸ¥é“è¿™ä¸¤ä¸ªå¸ƒå±€ï¼Œä½†ä¸€ç›´è§‰å¾—è¿™ä¸¤ä¸ªå¸ƒå±€æœ‰ç‚¹å¥‡æ€ªï¼Œå¯èƒ½æ˜¯å› ä¸ºä»¥å‰æ²¡æœ‰ç”¨è¿‡è¿™ç§æ–¹æ³•ã€‚ä½†æ˜¯å› ä¸ºå…¼å®¹ä¼šå¾ˆå¥½ï¼Œè€Œä¸”å¯ä»¥è‡ªé€‚åº”ä¸­é—´åŒºå—ï¼Œæ‰€ä»¥å¥½åƒè¿˜æ˜¯å¾ˆå¤šäººç”¨ã€‚ä»Šå¤©åŠ¨æ‰‹å†™äº†demoï¼Œè™½ç„¶æ¯”è¾ƒå®¹æ˜“å°±èƒ½åšå‡ºæ¥ï¼Œä½†è¿™é‡Œé¢çš„æœ‰äº›åœ°æ–¹è¿˜æ˜¯æ„Ÿè§‰æ€ªæ€ªçš„ï¼Œæœ€åæœ‰æˆ‘çš„ä¸æ˜ç™½çš„åœ°æ–¹ã€‚ä¸‹é¢æ˜¯å…·ä½“çš„ä¸¤ç§å†™æ³•ä»¥åŠåŒºåˆ«ã€‚ åœ£æ¯å¸ƒå±€åœ£æ¯å¸ƒå±€æ˜¯ä¸€ç§å¸¸ç”¨çš„ç½‘é¡µå¸ƒå±€ï¼Œä»–å¯ä»¥ç”±ç°æœ‰çš„æŠ€æœ¯æ¥å®ç°ï¼Œç°æœ‰çš„å¸ƒå±€å¤šå¤šå°‘å°‘éƒ½æœ‰äº›ç¼ºç‚¹ï¼Œæ‰€ä»¥æ‰¾åˆ°ä¸€ç§æœ€ä¼˜çš„å®ç°æ–¹æ³•å°±å¥½åƒå¯»æ‰¾éš¾ä»¥æ‰æ‘¸çš„åœ£æ¯ä¸€æ ·ã€‚æ³¨æ„ä¸‹è¿™é‡Œleftå’Œcenterçš„ä½ç½®æ”¾ç½®ã€‚å…¶å®ä¸»è¦æ€æƒ³å°±æ˜¯è®©ä¸‰åˆ—å¸ƒå±€éƒ½æµ®åŠ¨åï¼Œè®¾ç½®ä¸­é—´æµ®åŠ¨çš„å…ƒç´ çš„å®½åº¦ä¸º100%ï¼Œåˆ©ç”¨paddingç•™å‡ºä¸¤è¾¹leftå’Œrightçš„è·ç¦»ï¼Œå†åˆ©ç”¨å®šä½çš„æ€æƒ³æŠŠå·¦å³ä¸¤ä¸ªç›’å­æ”¾åœ¨è¯¥æ”¾çš„ä½ç½®ä¸Šã€‚ 1234567&lt;div class=\"header\"&gt;&lt;/div&gt;&lt;div class=\"container\"&gt; &lt;div class=\"center\"&gt;&lt;/div&gt; &lt;div class=\"left\"&gt;&lt;/div&gt; &lt;div class=\"right\"&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=\"footer\"&gt;&lt;/div&gt; 1234567891011121314151617181920212223242526272829303132333435body&#123; min-width: 640px; /*ä¸¤å€çš„å·¦è¾¹è·ç¦»åŠ ä¸Šå³è¾¹è·ç¦»ï¼Œå¦‚æœä¸åŠ ï¼Œå½“resizeçª—å£çš„æ—¶å€™ä¼šå‡ºç°é—®é¢˜*/&#125;.header,.footer&#123; background: red; height: 50px;&#125;.container&#123; padding-left: 220px; padding-right: 200px;&#125;.center,.left,.right&#123; float:left; min-height: 500px; position:relative;&#125; .center&#123; width:100%; background: yellow; opacity: 1;&#125;.left&#123; width:220px; background: lightgreen; margin-left: -100%; right:220px;&#125;.right&#123; width:200px; background: blue; margin-right: -200px;&#125;.footer&#123; clear:both;&#125; åŒé£ç¿¼å¸ƒå±€åŒé£ç¿¼å¸ƒå±€ç”±æ·˜å®UEDæå‡ºæ¥ã€‚å¦‚æœæŠŠä¸‰æ å¸ƒå±€å½“åšä¸€ä¸ªå¤§é¸Ÿçš„è¯ï¼Œå¯ä»¥å§mainå½“åšé¸Ÿçš„èº«ä½“ï¼Œsubå’Œextraå½“åšé¸Ÿçš„ä¸¤ä¸ªç¿…è†€ï¼Œè¿™ä¸ªå¸ƒå±€çš„å®ç°æ€è·¯æ˜¯å…ˆæŠŠæœ€é‡è¦çš„èº«ä½“éƒ¨åˆ†æ”¾å¥½ï¼Œç„¶åå†å°†ç¿…è†€ç§»åŠ¨åˆ°é€‚å½“çš„åœ°æ–¹ã€‚æ˜¯åœ¨åœ£æ¯å¸ƒå±€ä¸Šçš„ä¿®æ”¹ï¼Œä¸å†ä½¿ç”¨relativeå’Œpadding,æ”¹ç”¨ç›´æ¥æ·»åŠ ä¸€ä¸ªå…ƒç´ innerï¼Œå¹¶ç”¨marginæ¥å®ç°ã€‚ä¹‹æ‰€ä»¥è¿™ä¹ˆæ”¹æˆ‘çŒœæ˜¯å› ä¸ºä¸€æ—¦æˆ‘ä»¬è®¾ç½®äº†relativeå°±å¾ˆéš¾å†å¯¹å…¶åšåˆ«çš„å®šä½ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼šè¿™é‡Œæ·»åŠ äº†innerï¼Œè®¾ç½®centerä¸º100%ä»¥åï¼Œå†å¯¹innerè®¾ç½®margin,è¿™æ ·å°±å¯ä»¥ä½¿å†…éƒ¨å…ƒç´ ä¸å—å½±å“ï¼Œä¸ä¼šè¢«ç›–ä½ã€‚æ³¨æ„æ³¨é‡Šæ‰çš„å°±æ˜¯åœ£æ¯å¸ƒå±€çš„éƒ¨åˆ†å†™æ³•ã€‚123456789&lt;div class=\"header\"&gt;&lt;/div&gt;&lt;div class=\"container\"&gt; &lt;div class=\"center\"&gt; &lt;div class=\"inner\"&gt;fad&lt;/div&gt; &lt;/div&gt; &lt;div class=\"left\"&gt;&lt;/div&gt; &lt;div class=\"right\"&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=\"footer\"&gt;&lt;/div&gt; 12345678910111213141516171819202122232425262728293031323334body&#123; min-width: 640px;&#125;.header,.footer&#123; background: red; height: 50px;&#125; .center,.left,.right&#123; float:left; min-height: 300px; /*position:relative;*/&#125; .center&#123; background: yellow; width: 100%;&#125;.left&#123; width:220px; background: lightgreen; /*margin-left: -100%; right:220px;*/ margin-left: -100%;&#125;.right&#123; width:200px; background: blue; margin-left: -200px;&#125;.footer&#123; clear:both;&#125;.inner&#123; margin:0px 200px 0px 220px;&#125;","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Css","slug":"Css","permalink":"http://sevencai.github.io/tags/Css/"}]},{"title":"HASH å“ˆå¸Œ","slug":"HASH-å“ˆå¸Œ","date":"2016-03-12T02:02:02.000Z","updated":"2016-03-12T02:15:04.000Z","comments":true,"path":"2016/03/12/HASH-å“ˆå¸Œ/","link":"","permalink":"http://sevencai.github.io/2016/03/12/HASH-å“ˆå¸Œ/","excerpt":"","text":"ç”Ÿæ´»ä¸­çš„hashåº”ç”¨å®‰å…¨é¢†åŸŸçš„hashå€¼æ¯”å¦‚è®¡ç®—æœºçš„ç™»é™†å¯†ç ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸²å­—ç¬¦ã€‚ç„¶è€Œï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œè®¡ç®—æœºä¸ä¼šç›´æ¥ä¿å­˜è¯¥å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯ä¿å­˜è¯¥å­—ç¬¦ä¸²çš„hashå€¼(ä½¿ç”¨MD5ã€SHAæˆ–è€…å…¶ä»–ç®—æ³•ä½œä¸ºhashå‡½æ•°)ã€‚å½“ç”¨æˆ·ä¸‹æ¬¡ç™»é™†çš„æ—¶å€™ï¼Œè¾“å…¥å¯†ç å­—ç¬¦ä¸²ã€‚å¦‚æœè¯¥å¯†ç å­—ç¬¦ä¸²çš„hashå€¼ä¸ä¿å­˜çš„hashå€¼ä¸€è‡´ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºç”¨æˆ·è¾“å…¥äº†æ­£ç¡®çš„å¯†ç ã€‚è¿™æ ·ï¼Œå°±ç®—é»‘å®¢é—¯å…¥äº†æ•°æ®åº“ä¸­çš„å¯†ç è®°å½•ï¼Œä»–èƒ½çœ‹åˆ°çš„ä¹Ÿåªæ˜¯å¯†ç çš„hashå€¼ã€‚ä¸Šé¢æ‰€ä½¿ç”¨çš„hashå‡½æ•°æœ‰å¾ˆå¥½çš„å•å‘æ€§ï¼šå¾ˆéš¾ä»hashå€¼å»æ¨æµ‹é”®å€¼ã€‚å› æ­¤ï¼Œé»‘å®¢æ— æ³•è·çŸ¥ç”¨æˆ·çš„å¯†ç ã€‚ æ³¨æ„ï¼Œhashåªè¦æ±‚ä»Aåˆ°Bçš„å¯¹åº”ä¸ºä¸€ä¸ªæ˜ å°„ï¼Œå®ƒå¹¶æ²¡æœ‰é™å®šè¯¥å¯¹åº”å…³ç³»ä¸ºä¸€ä¸€æ˜ å°„ã€‚å› æ­¤ä¼šæœ‰è¿™æ ·çš„å¯èƒ½ï¼šä¸¤ä¸ªä¸åŒçš„é”®å€¼å¯¹åº”åŒä¸€ä¸ªhashå€¼ã€‚è¿™ç§æƒ…å†µå«åšhashç¢°æ’(hash collision)ã€‚æ¯”å¦‚ç½‘ç»œåè®®ä¸­çš„checksumå°±å¯èƒ½å‡ºç°è¿™ç§çŠ¶å†µï¼Œå³æ‰€è¦æ ¡éªŒçš„å†…å®¹ä¸åŸæ–‡å¹¶ä¸åŒï¼Œä½†ä¸åŸæ–‡ç”Ÿæˆçš„checksum(hashå€¼)ç›¸åŒã€‚å†æ¯”å¦‚ï¼ŒMD5ç®—æ³•å¸¸ç”¨æ¥è®¡ç®—å¯†ç çš„hashå€¼ã€‚å·²ç»æœ‰å®éªŒè¡¨æ˜ï¼ŒMD5ç®—æ³•æœ‰å¯èƒ½å‘ç”Ÿç¢°æ’ï¼Œä¹Ÿå°±æ˜¯ä¸åŒçš„æ˜æ–‡å¯†ç ç”Ÿæˆç›¸åŒçš„hashå€¼ï¼Œè¿™å°†ç»™ç³»ç»Ÿå¸¦æ¥å¾ˆå¤§çš„å®‰å…¨æ¼æ´ã€‚ å“ˆå¸Œçš„å‡ ä¸ªæ¦‚å¿µå“ˆå¸Œè¡¨ï¼šHash Tableï¼Œä¹Ÿå«æ•£åˆ—è¡¨ï¼Œæ˜¯æ ¹æ®å…³é”®ç å€¼(Key Value)è€Œç›´æ¥è¿›è¡Œè®¿é—®çš„çš„ä¸€ç§æ•°æ®ç»“æ„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒé€šè¿‡æŠŠå…³é”®ç å€¼æ˜ å°„åˆ°è¡¨ä¸­ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½•ï¼Œä»¥åŠ å¿«æŸ¥æ‰¾é€Ÿåº¦ã€‚ å“ˆå¸Œå‡½æ•°ï¼šhashæ“ä½œå…¶æœ¬è´¨ä¸Šå°±æ˜¯å°†ä¸€ä¸ªæ•°æ®æ˜ å°„æˆå¦ä¸€ä¸ªæ•°æ®ï¼Œé€šå¸¸æƒ…å†µä¸‹åŸæ•°æ®çš„é•¿åº¦æ¯”hashåçš„æ•°æ®å®¹é‡å¤§ã€‚è¿™ç§æ˜ å°„çš„å…³ç³»æˆ‘ä»¬å«åšå“ˆå¸Œå‡½æ•°ã€‚æˆ–è€…è¿™ä¸ªå‡½æ•°å«åšæ•£åˆ—å‡½æ•°ï¼Œå­˜æ”¾è®°å½•çš„æ•°ç»„å«åšæ•£åˆ—è¡¨ã€‚ ä¸ºä»€ä¹ˆä¼šç”¨åˆ°hashæ•°ç»„çš„ä¼˜ç‚¹æ˜¯å¯ä»¥å¿«é€Ÿå¯»å€ï¼Œä½†æ˜¯å¢åŠ å’Œåˆ é™¤å…ƒç´ ç¡®å¾ˆéš¾ã€‚ é“¾è¡¨çš„ä¼˜ç‚¹æ˜¯å¯ä»¥æ–¹ä¾¿çš„å¢åŠ å’Œåˆ é™¤å…ƒç´ ï¼Œä½†æ˜¯ç¡®ä¸æ˜¯å¾ˆæ–¹ä¾¿å¯»å€ã€‚ hashè¡¨å°±æ˜¯è¿™ä¸¤ç§åŠæ³•çš„ä¼˜åŒ–ï¼Œæ˜¯ä¸€ç§å³å¯»å€å®¹æ˜“å¹¶ä¸”åˆ é™¤å’Œå¢åŠ å…ƒç´ ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿çš„æ•°æ®ç»“æ„ã€‚ å“ˆå¸Œè¡¨ä½¿ç”¨èŒƒå›´ï¼šå¿«é€ŸæŸ¥æ‰¾ï¼Œåˆ é™¤çš„åŸºæœ¬æ•°æ®ç»“æ„O(1),é€šå¸¸éœ€è¦å°†æ€»æ•°æ®é‡æ”¾å…¥å†…å­˜ åº”ç”¨ä¸¾ä¾‹è¿™æ˜¯æˆ‘çœ‹åˆ°çš„ä¸€ä¸ªéå¸¸éå¸¸å¥½çš„ä¾‹å­ã€‚ä¸€å®šè¦å­¦ä¸‹æ¥ã€‚é¢˜ç›®æ˜¯ï¼š æœç´¢å¼•æ“ä¼šé€šè¿‡æ—¥å¿—æ–‡ä»¶æŠŠç”¨æˆ·æ¯æ¬¡æ£€ç´¢ä½¿ç”¨çš„æ‰€æœ‰æ£€ç´¢ä¸²éƒ½è®°å½•ä¸‹æ¥ï¼Œæ¯ä¸ªæŸ¥è¯¢ä¸²çš„é•¿åº¦ä¸º1-255å­—èŠ‚ã€‚å‡è®¾ç›®å‰æœ‰ä¸€åƒä¸‡ä¸ªè®°å½•ï¼ˆè¿™äº›æŸ¥è¯¢ä¸²çš„é‡å¤åº¦æ¯”è¾ƒé«˜ï¼Œè™½ç„¶æ€»æ•°æ˜¯1åƒä¸‡ï¼Œä½†å¦‚æœé™¤å»é‡å¤åï¼Œä¸è¶…è¿‡3ç™¾ä¸‡ä¸ªã€‚ä¸€ä¸ªæŸ¥è¯¢ä¸²çš„é‡å¤åº¦è¶Šé«˜ï¼Œè¯´æ˜æŸ¥è¯¢å®ƒçš„ç”¨æˆ·è¶Šå¤šï¼Œä¹Ÿå°±æ˜¯è¶Šçƒ­é—¨ã€‚ï¼‰ï¼Œè¯·ä½ ç»Ÿè®¡æœ€çƒ­é—¨çš„10ä¸ªæŸ¥è¯¢ä¸²ï¼Œè¦æ±‚ä½¿ç”¨çš„å†…å­˜ä¸èƒ½è¶…è¿‡1Gã€‚ è¿™ä¸ªé¢˜é¦–å…ˆå¯ä»¥è¿™æ ·åˆ†æï¼šè¦ç»Ÿè®¡å‡ºæœ€çƒ­é—¨çš„10ä¸ªæŸ¥è¯¢ä¸²ï¼Œé¦–å…ˆè¦ç»Ÿè®¡æ¯ä¸ªqueryå‡ºç°çš„æ¬¡æ•°ã€‚ç„¶åå†æ˜¯å°†è¿™äº›queryæ’åºï¼Œé€‰æ‹©å‡ºqueryæ¬¡æ•°æœ€å¤§çš„10ä¸ªã€‚è¿™æ ·æˆ‘ä»¬å°±åˆ†æˆä¸¤éƒ¨æ¥åšï¼š é¦–å…ˆç»Ÿè®¡queryå‡ºç°çš„æ¬¡æ•° ç®—æ³•1ï¼š ç®€å•æ’åºç»Ÿè®¡ é¦–å…ˆæˆ‘ä»¬æœ€å…ˆæƒ³åˆ°çš„çš„ç®—æ³•å°±æ˜¯æ’åºäº†ï¼Œé¦–å…ˆå¯¹è¿™ä¸ªæ—¥å¿—é‡Œé¢çš„æ‰€æœ‰Queryéƒ½è¿›è¡Œæ’åºï¼Œç„¶åå†éå†æ’å¥½åºçš„Queryï¼Œç»Ÿè®¡æ¯ä¸ªQueryå‡ºç°çš„æ¬¡æ•°äº†ã€‚ ä½†æ˜¯é¢˜ç›®ä¸­æœ‰æ˜ç¡®è¦æ±‚ï¼Œé‚£å°±æ˜¯å†…å­˜ä¸èƒ½è¶…è¿‡1Gï¼Œä¸€åƒä¸‡æ¡è®°å½•ï¼Œæ¯æ¡è®°å½•æ˜¯255Byteï¼Œå¾ˆæ˜¾ç„¶è¦å æ®2.375Gå†…å­˜ï¼Œè¿™ä¸ªæ¡ä»¶å°±ä¸æ»¡è¶³è¦æ±‚äº†ã€‚ è®©æˆ‘ä»¬å›å¿†ä¸€ä¸‹æ•°æ®ç»“æ„è¯¾ç¨‹ä¸Šçš„å†…å®¹ï¼Œå½“æ•°æ®é‡æ¯”è¾ƒå¤§è€Œä¸”å†…å­˜æ— æ³•è£…ä¸‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨å¤–æ’åºçš„æ–¹æ³•æ¥è¿›è¡Œæ’åºï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨å½’å¹¶æ’åºï¼Œå› ä¸ºå½’å¹¶æ’åºæœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ—¶é—´å¤æ‚åº¦O(NlgN)ã€‚ æ’å®Œåºä¹‹åæˆ‘ä»¬å†å¯¹å·²ç»æœ‰åºçš„Queryæ–‡ä»¶è¿›è¡Œéå†ï¼Œç»Ÿè®¡æ¯ä¸ªQueryå‡ºç°çš„æ¬¡æ•°ï¼Œå†æ¬¡å†™å…¥æ–‡ä»¶ä¸­ã€‚ ç»¼åˆåˆ†æä¸€ä¸‹ï¼Œæ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(NlgN)ï¼Œè€Œéå†çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N)ï¼Œå› æ­¤è¯¥ç®—æ³•çš„æ€»ä½“æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(N+NlgN)=Oï¼ˆNlgNï¼‰ã€‚ å¦‚æœæ˜¯jsé‡Œé¢æˆ‘ä»¬å°±å¯ä»¥å…ˆç”Ÿæˆä¸€ä¸ªæ•°ç»„ï¼Œç„¶åæ¯æ¬¡éå†çš„æ—¶å€™ï¼Œå°±ç”¨indexOfæŸ¥çœ‹æ–°çš„å…ƒç´ æ˜¯å¦åœ¨æ–°çš„æ•°ç»„ä¸­ï¼Œè¿™æ ·æ—¶é—´å¤æ‚åº¦å…¶å®è¿˜æ˜¯o(n)ã€‚å› ä¸ºindexofæœ¬èº«ä¹Ÿè¦éå†ä¸€æ¬¡ã€‚è¿™ä¸ªä¹Ÿä¸å¥½ã€‚ ç®—æ³•2ï¼šåˆ©ç”¨Hash Tableæ˜¯ä¸€ç§æ›´å¥½çš„æ–¹æ³• åœ¨ç¬¬1ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†æ’åºçš„åŠæ³•æ¥ç»Ÿè®¡æ¯ä¸ªQueryå‡ºç°çš„æ¬¡æ•°ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯NlgNï¼Œé‚£ä¹ˆèƒ½ä¸èƒ½æœ‰æ›´å¥½çš„æ–¹æ³•æ¥å­˜å‚¨ï¼Œè€Œæ—¶é—´å¤æ‚åº¦æ›´ä½å‘¢ï¼Ÿ é¢˜ç›®ä¸­è¯´æ˜äº†ï¼Œè™½ç„¶æœ‰ä¸€åƒä¸‡ä¸ªQueryï¼Œä½†æ˜¯ç”±äºé‡å¤åº¦æ¯”è¾ƒé«˜ï¼Œå› æ­¤äº‹å®ä¸Šåªæœ‰300ä¸‡çš„Queryï¼Œæ¯ä¸ªQuery255Byteï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è€ƒè™‘æŠŠä»–ä»¬éƒ½æ”¾è¿›å†…å­˜ä¸­å»ï¼Œè€Œç°åœ¨åªæ˜¯éœ€è¦ä¸€ä¸ªåˆé€‚çš„æ•°æ®ç»“æ„ï¼Œåœ¨è¿™é‡Œï¼ŒHash Tableç»å¯¹æ˜¯æˆ‘ä»¬ä¼˜å…ˆçš„é€‰æ‹©ï¼Œå› ä¸ºHash Tableçš„æŸ¥è¯¢é€Ÿåº¦éå¸¸çš„å¿«ï¼Œå‡ ä¹æ˜¯O(1)çš„æ—¶é—´å¤æ‚åº¦ã€‚ é‚£ä¹ˆï¼Œæˆ‘ä»¬çš„ç®—æ³•å°±æœ‰äº†ï¼šç»´æŠ¤ä¸€ä¸ªKeyä¸ºQueryå­—ä¸²ï¼ŒValueä¸ºè¯¥Queryå‡ºç°æ¬¡æ•°çš„HashTableï¼Œæ¯æ¬¡è¯»å–ä¸€ä¸ªQueryï¼Œå¦‚æœè¯¥å­—ä¸²ä¸åœ¨Tableä¸­ï¼Œé‚£ä¹ˆåŠ å…¥è¯¥å­—ä¸²ï¼Œå¹¶ä¸”å°†Valueå€¼è®¾ä¸º1ï¼›å¦‚æœè¯¥å­—ä¸²åœ¨Tableä¸­ï¼Œé‚£ä¹ˆå°†è¯¥å­—ä¸²çš„è®¡æ•°åŠ ä¸€å³å¯ã€‚æœ€ç»ˆæˆ‘ä»¬åœ¨O(N)çš„æ—¶é—´å¤æ‚åº¦å†…å®Œæˆäº†å¯¹è¯¥æµ·é‡æ•°æ®çš„å¤„ç†ã€‚ æœ¬æ–¹æ³•ç›¸æ¯”ç®—æ³•1ï¼šåœ¨æ—¶é—´å¤æ‚åº¦ä¸Šæé«˜äº†ä¸€ä¸ªæ•°é‡çº§ï¼Œä¸ºOï¼ˆNï¼‰ï¼Œä½†ä¸ä»…ä»…æ˜¯æ—¶é—´å¤æ‚åº¦ä¸Šçš„ä¼˜åŒ–ï¼Œè¯¥æ–¹æ³•åªéœ€è¦IOæ•°æ®æ–‡ä»¶ä¸€æ¬¡ï¼Œè€Œç®—æ³•1çš„IOæ¬¡æ•°è¾ƒå¤šçš„ï¼Œå› æ­¤è¯¥ç®—æ³•2æ¯”ç®—æ³•1åœ¨å·¥ç¨‹ä¸Šæœ‰æ›´å¥½çš„å¯æ“ä½œæ€§ã€‚ 2.æ‰¾å‡ºTop 10çš„query ç®—æ³•ä¸€ï¼šæ™®é€šæ’åº æˆ‘æƒ³å¯¹äºæ’åºç®—æ³•å¤§å®¶éƒ½å·²ç»ä¸é™Œç”Ÿäº†ï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿°ï¼Œæˆ‘ä»¬è¦æ³¨æ„çš„æ˜¯æ’åºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯NlgNï¼Œåœ¨æœ¬é¢˜ç›®ä¸­ï¼Œä¸‰ç™¾ä¸‡æ¡è®°å½•ï¼Œç”¨1Gå†…å­˜æ˜¯å¯ä»¥å­˜ä¸‹çš„ã€‚ ç®—æ³•äºŒï¼šéƒ¨åˆ†æ’åº é¢˜ç›®è¦æ±‚æ˜¯æ±‚å‡ºTop10ï¼Œå› æ­¤æˆ‘ä»¬æ²¡æœ‰å¿…è¦å¯¹æ‰€æœ‰çš„Queryéƒ½è¿›è¡Œæ’åºï¼Œæˆ‘ä»¬åªéœ€è¦ç»´æŠ¤ä¸€ä¸ª10ä¸ªå¤§å°çš„æ•°ç»„ï¼Œåˆå§‹åŒ–æ”¾å…¥10ä¸ªQueryï¼ŒæŒ‰ç…§æ¯ä¸ªQueryçš„ç»Ÿè®¡æ¬¡æ•°ç”±å¤§åˆ°å°æ’åºï¼Œç„¶åéå†è¿™300ä¸‡æ¡è®°å½•ï¼Œæ¯è¯»ä¸€æ¡è®°å½•å°±å’Œæ•°ç»„æœ€åä¸€ä¸ªQueryå¯¹æ¯”ï¼Œå¦‚æœå°äºè¿™ä¸ªQueryï¼Œé‚£ä¹ˆç»§ç»­éå†ï¼Œå¦åˆ™ï¼Œå°†æ•°ç»„ä¸­æœ€åä¸€æ¡æ•°æ®æ·˜æ±°ï¼ŒåŠ å…¥å½“å‰çš„Queryã€‚ æœ€åå½“æ‰€æœ‰çš„æ•°æ®éƒ½éå†å®Œæ¯•ä¹‹åï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°ç»„ä¸­çš„10ä¸ªQueryä¾¿æ˜¯æˆ‘ä»¬è¦æ‰¾çš„Top10äº†ã€‚ä¸éš¾åˆ†æå‡ºï¼Œè¿™æ ·ï¼Œç®—æ³•çš„æœ€åæ—¶é—´å¤æ‚åº¦æ˜¯N*Kï¼Œ å…¶ä¸­Kæ˜¯æŒ‡topå¤šå°‘ã€‚ ç®—æ³•ä¸‰ï¼š10ä¸ªqueryä¹‹é—´åˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾ åœ¨ç®—æ³•äºŒä¸­ï¼Œæˆ‘ä»¬å·²ç»å°†æ—¶é—´å¤æ‚åº¦ç”±NlogNä¼˜åŒ–åˆ°NKï¼Œä¸å¾—ä¸è¯´è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤§çš„æ”¹è¿›äº†ï¼Œå¯æ˜¯æœ‰æ²¡æœ‰æ›´å¥½çš„åŠæ³•å‘¢ï¼Ÿ åˆ†æä¸€ä¸‹ï¼Œåœ¨ç®—æ³•äºŒä¸­ï¼Œæ¯æ¬¡æ¯”è¾ƒå®Œæˆä¹‹åï¼Œéœ€è¦çš„æ“ä½œå¤æ‚åº¦éƒ½æ˜¯Kï¼Œå› ä¸ºè¦æŠŠå…ƒç´ æ’å…¥åˆ°ä¸€ä¸ªçº¿æ€§è¡¨ä¹‹ä¸­ï¼Œè€Œä¸”é‡‡ç”¨çš„æ˜¯é¡ºåºæ¯”è¾ƒã€‚ è¿™é‡Œæˆ‘ä»¬æ³¨æ„ä¸€ä¸‹ï¼Œè¯¥æ•°ç»„æ˜¯æœ‰åºçš„ï¼Œä¸€æ¬¡æˆ‘ä»¬æ¯æ¬¡æŸ¥æ‰¾çš„æ—¶å€™å¯ä»¥é‡‡ç”¨äºŒåˆ†çš„æ–¹æ³•æŸ¥æ‰¾ï¼Œè¿™æ ·æ“ä½œçš„å¤æ‚åº¦å°±é™åˆ°äº†logKï¼Œå¯æ˜¯ï¼Œéšä¹‹è€Œæ¥çš„é—®é¢˜å°±æ˜¯æ•°æ®ç§»åŠ¨ï¼Œå› ä¸ºç§»åŠ¨æ•°æ®æ¬¡æ•°å¢å¤šäº†ã€‚ä¸è¿‡ï¼Œè¿™ä¸ªç®—æ³•è¿˜æ˜¯æ¯”ç®—æ³•äºŒæœ‰äº†æ”¹è¿›ã€‚ ç®—æ³•å››ï¼š å †æ’åº åŸºäºä»¥ä¸Šçš„åˆ†æï¼Œæˆ‘ä»¬æƒ³æƒ³ï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ—¢èƒ½å¿«é€ŸæŸ¥æ‰¾ï¼Œåˆèƒ½å¿«é€Ÿç§»åŠ¨å…ƒç´ çš„æ•°æ®ç»“æ„å‘¢ï¼Ÿå›ç­”æ˜¯è‚¯å®šçš„ï¼Œé‚£å°±æ˜¯å †ã€‚ å€ŸåŠ©å †ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨logé‡çº§çš„æ—¶é—´å†…æŸ¥æ‰¾å’Œè°ƒæ•´/ç§»åŠ¨ã€‚å› æ­¤åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„ç®—æ³•å¯ä»¥æ”¹è¿›ä¸ºè¿™æ ·ï¼Œç»´æŠ¤ä¸€ä¸ªK(è¯¥é¢˜ç›®ä¸­æ˜¯10)å¤§å°çš„å°æ ¹å †ï¼Œç„¶åéå†300ä¸‡çš„Queryï¼Œåˆ†åˆ«å’Œæ ¹å…ƒç´ è¿›è¡Œå¯¹æ¯”ã€‚ æ€æƒ³ä¸ä¸Šè¿°ç®—æ³•äºŒä¸€è‡´ï¼Œåªæ˜¯ç®—æ³•åœ¨ç®—æ³•ä¸‰ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†æœ€å°å †è¿™ç§æ•°æ®ç»“æ„ä»£æ›¿æ•°ç»„ï¼ŒæŠŠæŸ¥æ‰¾ç›®æ ‡å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦æœ‰Oï¼ˆKï¼‰é™åˆ°äº†Oï¼ˆlogKï¼‰ã€‚ é‚£ä¹ˆè¿™æ ·ï¼Œé‡‡ç”¨å †æ•°æ®ç»“æ„ï¼Œç®—æ³•ä¸‰ï¼Œæœ€ç»ˆçš„æ—¶é—´å¤æ‚åº¦å°±é™åˆ°äº†N*logKï¼Œå’Œç®—æ³•äºŒç›¸æ¯”ï¼Œåˆæœ‰äº†æ¯”è¾ƒå¤§çš„æ”¹è¿›ã€‚ æ€»ç»“ï¼š è‡³æ­¤ï¼Œç®—æ³•å°±å®Œå…¨ç»“æŸäº†ï¼Œç»è¿‡ä¸Šè¿°ç¬¬ä¸€æ­¥ã€å…ˆç”¨Hashè¡¨ç»Ÿè®¡æ¯ä¸ªQueryå‡ºç°çš„æ¬¡æ•°ï¼ŒOï¼ˆNï¼‰ï¼› ç„¶åç¬¬äºŒæ­¥ã€é‡‡ç”¨å †æ•°æ®ç»“æ„æ‰¾å‡ºTop 10ï¼ŒN*Oï¼ˆlogKï¼‰ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬æœ€ç»ˆçš„æ—¶é—´å¤æ‚åº¦æ˜¯ï¼šOï¼ˆNï¼‰ + N&apos;*Oï¼ˆlogKï¼‰ã€‚ï¼ˆNä¸º1000ä¸‡ï¼ŒKä¸º300ä¸‡ï¼‰ã€‚ æœ€åä¸€ä¸ªä¾‹å­å­¦ä¹ è®°å½•è‡ªï¼šFrank Fan||éå¸¸è°¢è°¢ã€‚æ•´ä½“æ¥è¯´å¯¹hashæœ‰äº†è¿›ä¸€æ­¥çš„äº†è§£ï¼Œå‘ç°ä»¥å‰è‡ªå·±ç”¨è¿‡hashç¡®æ²¡æœ‰è®¤å‡ºæ¥æ˜¯hashã€‚jsé‡Œçš„hashå°±å¯ä»¥å®šä¹‰ä¸€ä¸ªå¯¹è±¡{}ï¼Œä¾‹å¦‚{â€œquery1â€:30,â€query2â€:20}è¿™æ ·å°±å¯ä»¥æŠŠå€¼å­˜å…¥é”®ï¼ŒæŠŠæ¬¡æ•°å­˜å…¥å€¼ã€‚å½“æˆ‘åˆ¤æ–­ä¸€ä¸ªqueryæ˜¯å¦åœ¨hashé‡Œé¢çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥hash[query]å¦‚æœåœ¨çš„è¯å°±å°†æ¬¡æ•°åŠ 1ã€‚å…³äºæ•£åˆ—å‡½æ•°å’Œæ•£åˆ—å†²çªæ–¹æ³•ä¼šæ¥ç€å­¦ä¹ ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://sevencai.github.io/categories/ç®—æ³•/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://sevencai.github.io/tags/ç®—æ³•/"}]},{"title":"ä»Šæ—¥ç®—æ³•å°ç»ƒä¹ ï¼Œæ’åºä¸æŸ¥æ‰¾","slug":"ä»Šæ—¥ç®—æ³•å°ç»ƒä¹ ï¼Œæ’åºä¸æŸ¥æ‰¾","date":"2016-03-11T14:31:35.000Z","updated":"2016-03-11T14:33:28.000Z","comments":true,"path":"2016/03/11/ä»Šæ—¥ç®—æ³•å°ç»ƒä¹ ï¼Œæ’åºä¸æŸ¥æ‰¾/","link":"","permalink":"http://sevencai.github.io/2016/03/11/ä»Šæ—¥ç®—æ³•å°ç»ƒä¹ ï¼Œæ’åºä¸æŸ¥æ‰¾/","excerpt":"","text":"ä»å°åšèµ·ï¼Œä»¥åæ¯å¤©å®šæ—¶å†™å‡ ä¸ªjsç®—æ³•ï¼Œå¹¶ä¸”åšæ€»ç»“æ‰“å¡ã€‚ä»Šå¤©å†™äº†å‡ ä¸ªç®€å•çš„æ’åºå’ŒæŸ¥æ‰¾ï¼Œè¿˜ä¹°äº†ä¸€æœ¬ä¹¦ï¼Œã€Šç®—æ³•å¯¼è®ºã€‹ï¼Œæ¥ä¸‹æ¥çš„2ä¸ªæœˆçš„ç›®æ ‡å°±æ˜¯å®ƒå•¦ï¼ŒåŠ æ²¹ã€‚ å¿«é€Ÿæ’åºå¿«é€Ÿæ’åºçš„æ€æƒ³æ˜¯åˆ†æ²»ï¼Œæ¯”å¦‚è¿™é‡Œ[3,4,1,5,6,9]è¿™æ ·ä¸€ä¸ªæ•°ç»„ï¼Œå…ˆé€‰ä¸€ä¸ªè½´ï¼Œæ¯”å¦‚è¯´æ˜¯èµ·ç‚¹ï¼Œç„¶åå…ˆä»å³å‘å·¦æ‰¾åˆ°æ¯”è¿™ä¸ªè½´å°çš„æ•°ï¼Œå¹¶æŠŠè¿™ä¸ªå°æ•°è¦†ç›–æ‰è½´çš„ä½ç½®ã€‚è¿™æ—¶å€™åŸæ¥å°æ•°çš„ä½ç½®å¯ä»¥å½“æˆæ˜¯ç©ºï¼Œç„¶åå†ä»¥è½´ä¸ºä¸­å¿ƒä»å·¦å¾€å³æ‰¾ï¼Œæ‰¾åˆ°æ¯”è½´å¤§çš„æ•°ï¼Œå†æŠŠè¿™ä¸ªæ•°è¦†ç›–åŸæ¥è½´æ‰€åœ¨çš„ä½ç½®ã€‚ç®—æ³•å¤æ‚åº¦æœ€å·®æ˜¯$$n^2$$ï¼Œæœ€å¥½æ˜¯nlognã€‚ 123456789101112131415161718192021222324function quickSort (arr,l,r) &#123; var left = l,right = r; var key = arr[l]; if(left &lt; right)&#123; while(left &lt; right)&#123; while(left&lt;right &amp;&amp; key &lt; arr[right])&#123; right--; &#125; arr[left] = arr[right]; while(left&lt;right &amp;&amp; key &gt; arr[left])&#123; left++; &#125; arr[right] = arr[left]; &#125; arr[right] = arr[left]; quickSort(arr,l,left-1); quickSort(arr,r+1,right); &#125; &#125;var arr = [3,4,1,5,6,9];quickSort(arr,0,5);console.log(arr); ä¸¤ç§æ•°ç»„å»é‡æ–¹æ³•ç¬¬ä¸€ç§åˆ©ç”¨indexOf,ç›´æ¥æ¯æ¬¡åœ¨æ–°æ•°ç»„é‡ŒæŸ¥æ‰¾æ˜¯å¦æœ‰å€¼ï¼Œå¦‚æœæœ‰åˆ™ä¸pushè¿›å…¥ã€‚å¦åˆ™pushè¿›å…¥ã€‚1234567891011function unique (arr) &#123; var newArr = []; for(var i = 0;i&lt;arr.length;i++)&#123; if(newArr.indexOf(arr[i]) == -1)&#123; newArr.push(arr[i]); &#125; &#125; return newArr;&#125;var arr = [3,2,5,6,7,6,7,2];console.log(unique(arr)); ç¬¬äºŒç§åˆ©ç”¨hashï¼Œæ¥ç”Ÿæˆä¸€ä¸ªé”®å€¼å¯¹ï¼Œç”¨æ¥å­˜å‚¨å·²ç»æœ‰äº†çš„æ•°ã€‚1234567891011121314function unique (arr)&#123; var newArr = []; var hash = &#123;&#125;; for(var i = 0;i&lt;arr.length;i++)&#123; if(!hash[arr[i]])&#123; newArr.push(arr[i]); hash[arr[i]] = true; &#125; &#125; return newArr;&#125;var arr = [3,2,5,6,7,6,7,2];console.log(unique(arr)); äºŒåˆ†æŸ¥æ‰¾äºŒåˆ†æŸ¥æ‰¾æ²¡ä»€ä¹ˆè¯´çš„ï¼Œå°±æ˜¯3ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æ¯æ¬¡ä»ä¸€åŠæ¥æŸ¥æ‰¾ï¼Œå‰ææ˜¯æ•°ç»„å·²ç»æ’å·åºã€‚lognæ˜¯å…¶ç®—æ³•æ—¶é—´å¤æ‚åº¦ã€‚1234567891011121314151617181920function bSearch (arr,n,left,right)&#123; var mid; while(left&lt;=right)&#123; mid = parseInt((left+right)/2); if(n == arr[mid])&#123; return mid; &#125;else if(arr[mid]&lt;n)&#123; left = mid + 1; &#125;else if(arr[mid]&gt;n)&#123; right = mid - 1; &#125; &#125; return 0;&#125;var arr = [0,3,5,7,11,14];var x = bSearch(arr,5,0,5);console.log(x);","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://sevencai.github.io/categories/ç®—æ³•/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://sevencai.github.io/tags/ç®—æ³•/"}]},{"title":"jså°ä¾‹å­ä¹‹è‡ªå®šä¹‰å³é”®èœå•å’Œjqueryæ‹–åŠ¨å…ƒç´ ","slug":"jså°ä¾‹å­ä¹‹è‡ªå®šä¹‰å³é”®èœå•å’Œjqueryæ‹–åŠ¨å…ƒç´ ","date":"2016-03-11T06:11:52.000Z","updated":"2016-12-12T03:00:46.000Z","comments":true,"path":"2016/03/11/jså°ä¾‹å­ä¹‹è‡ªå®šä¹‰å³é”®èœå•å’Œjqueryæ‹–åŠ¨å…ƒç´ /","link":"","permalink":"http://sevencai.github.io/2016/03/11/jså°ä¾‹å­ä¹‹è‡ªå®šä¹‰å³é”®èœå•å’Œjqueryæ‹–åŠ¨å…ƒç´ /","excerpt":"","text":"æ€»ç»“ä¸¤ä¸ªå°å®ä¾‹ï¼Œä¸€ä¸ªæ˜¯jqueryæ‹–åŠ¨å…ƒç´ ï¼Œä¸€ä¸ªæ˜¯jsè‡ªå®šä¹‰å³é”®èœå•ã€‚æ„Ÿè§‰jqueryçš„APIéƒ½å¿«å¿˜äº†ï¼Œæ‰€ä»¥åˆå†™äº†ä¸ªjqueryçš„ã€‚ jsè‡ªå®šä¹‰å³é”®èœå•æˆ‘å¤§æ¦‚çš„æƒ³æ³•æ˜¯å…ˆéšè—åˆ—è¡¨èœå•ï¼Œå½“ç›‘å¬åˆ°oncontextmenuæ—¶ï¼Œæ˜¾ç¤ºåˆ—è¡¨å¹¶å®šä½åˆ°é¼ æ ‡ç‚¹å‡»çš„åœ°æ–¹ã€‚å½“é¡µé¢æœ‰ç‚¹å‡»äº‹ä»¶çš„æ—¶å€™ï¼Œå†æ¥è®©åˆ—è¡¨æ˜¾ç¤ºã€‚ è¿™é‡Œå¯ä»¥ç”¨preventDefaultæˆ–è€…return falseï¼›æ¥é˜»æ­¢å³é”®çš„é»˜è®¤è¡Œä¸ºã€‚ ä»£ç å¦‚ä¸‹ï¼š12345&lt;ul id=\"menu\"&gt; &lt;li&gt;&lt;a href=\"\"&gt;menu1&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"\"&gt;menu1&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"\"&gt;menu1&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt; 12345678910111213141516171819202122232425&lt;script&gt; var menu = document.getElementById(\"menu\"); menu.style.display = \"none\"; document.oncontextmenu = function(event)&#123; event = event || window.event; var top = event.clientY; var left = event.clientX; console.log(top + \"Hello\" +left); menu.style.top = top + \"px\"; menu.style.left = left + \"px\"; menu.style.position = \"absolute\"; menu.style.display = \"block\"; event.preventDefault(); &#125; document.onclick = function(event)&#123; menu.style.display = \"none\"; &#125;&lt;/script&gt; æˆ‘è€æ˜¯å¿˜è®°eft,topåŠ åé¢çš„pxå•ä½ã€‚è¿™ä¸ªè¦æ³¨æ„ã€‚ jqueryæ‹–åŠ¨å…ƒç´ åŸç†æ˜¯ä¸€æ ·çš„ã€‚é¦–å…ˆå¯¹å¯ä»¥æ‹–åŠ¨çš„å…ƒç´ è¿›è¡Œç›‘å¬é¼ æ ‡ç‚¹ä¸‹äº‹ä»¶ï¼Œç„¶åè·å¾—ç‚¹å‡»ä½ç½®è·ç¦»ç‚¹å‡»å…ƒç´ çš„åç§»é‡ã€‚æœ€åå†å¯¹è¿™ä¸ªé¼ æ ‡ç§»åŠ¨æ—¶é—´è¿›è¡Œç›‘å¬ï¼Œå¹¶æŠŠå…ƒç´ å®šä½åˆ°è¯¥æœ‰çš„ä½ç½®ã€‚æœ€åå½“é¼ æ ‡ç‚¹å‡»çš„æ—¶å€™ä¸€å®šè¦å–æ¶ˆç»‘å®šmousemoveäº‹ä»¶ã€‚123&lt;div class=\"dragObj\"&gt; drag div&lt;/div&gt; 123456789101112131415161718192021222324252627282930313233343536373839$(document).ready(function()&#123; var mouseX=0,mouseY=0, offsetX,offsetY; $(\".dragObj\").mousedown(function(event) &#123; event = event || window.event; console.log(\"aa\"); mouseX = event.clientX; mouseY = event.clientY; var offset = $(this).offset(); var targetX = parseInt(offset.left,10); var targetY = parseInt(offset.top,10); offsetX = mouseX - targetX; offsetY = mouseY - targetY; $(this).bind(\"mousemove\",dragElement); &#125;); function dragElement(e)&#123; var left = e.clientX - offsetX; var top = e.clientY - offsetY; $(this).css(&#123; \"position\":\"absolute\", \"left\":left+\"px\", \"top\":top + \"px\" &#125;); return false; &#125; $(document).mouseup(function(event) &#123; console.log(\"b\"); $(\".dragObj\").unbind(\"mousemove\"); &#125;);&#125;)","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"httpçœŸçš„æ˜¯é˜»å¡çš„å—ï¼Ÿ","slug":"httpçœŸçš„æ˜¯é˜»å¡çš„å—ï¼Ÿ","date":"2016-03-10T14:49:34.000Z","updated":"2016-12-12T02:28:46.000Z","comments":true,"path":"2016/03/10/httpçœŸçš„æ˜¯é˜»å¡çš„å—ï¼Ÿ/","link":"","permalink":"http://sevencai.github.io/2016/03/10/httpçœŸçš„æ˜¯é˜»å¡çš„å—ï¼Ÿ/","excerpt":"","text":"ä»Šå¤©æ€»ç»“æˆ‘çš„ä¸€ä¸ªé”™è¯¯ï¼Œæœ‰ä¸ªé¢è¯•å®˜é—®æˆ‘ä¼˜åŒ–çš„æ–¹æ³•ï¼Œç„¶åæˆ‘æåˆ°äº†ä»¥å‰åœ¨æ…•è¯¾ç½‘ä¸Šæœ‰åšçš„ç²¾çµå°æ¸¸æˆï¼Œé‡Œé¢ç”¨åˆ°äº†css spritesã€‚é€šè¿‡æŠŠå¤šå¼ å°å›¾åˆå¹¶æˆä¸€å¼ å°å›¾ï¼Œåˆ©ç”¨positionå’Œbackground-image,å°±å¯ä»¥å‡å°‘httpçš„è¯·æ±‚ï¼Œä»è€Œå‡å°‘é¡µé¢åŠ è½½æ—¶é—´ã€‚ç„¶åä»–é—®æˆ‘ï¼Œä¸ºå•¥å¯ä»¥å‡å°‘é¡µé¢åŠ è½½çš„æ—¶é—´ã€‚æˆ‘è¯´å› ä¸ºhttpè¯·æ±‚éœ€è¦èŠ±è´¹å¤§é‡çš„äº‹ä»¶ï¼Œè€Œä¸”ä¼šåœ¨è¯·æ±‚å¤´é‡Œé¢åŒ…å«å¾ˆå¤šä¸å¿…è¦çš„ä¿¡æ¯,è€Œä¸”httpæ˜¯é˜»å¡çš„ï¼Œå¯¼è‡´ä¸€ä¸ªè¯·æ±‚å¦‚æœæ²¡æœ‰åº”ç­”ï¼Œå°±ä¼šå¯¼è‡´åé¢çš„è¯·æ±‚é˜»å¡æ’é˜Ÿã€‚ç„¶åè¿™ä¸ªæ—¶å€™æ£’æ£’çš„é¢è¯•å®˜åˆé—®æˆ‘ï¼Œhttpæ˜¯é˜»å¡çš„å—ï¼Ÿæˆ‘å½“æ—¶ä¸€ç›´è¿™ä¹ˆè®¤ä¸ºäº†å¥½ä¹…ï¼Œç„¶åå°±è‚¯å®šçš„è¯´æ˜¯çš„ã€‚åæ¥ä»–åˆé—®äº†æˆ‘ï¼Œè¯´æœ‰æ²¡æœ‰æ³¨æ„åˆ°ç™¾åº¦å›¾ç‰‡çš„æ—¶å€™æ˜¯ä¸€å¼ ä¸€å¼ çš„åŠ è½½è¿˜æ˜¯ä¸€æ’ä¸€æ’çš„åŠ è½½ã€‚æˆ‘ä»¥å‰çœ‹è¿‡æ˜¯ä¸€æ’ä¸€æ’çš„åŠ è½½ã€‚è¿™ä¸ªæ—¶å€™é¢è¯•å®˜åˆè¯´é‚£ä¸ºä»€ä¹ˆä¼šæ˜¯ä¸€æ’ä¸€æ’çš„åŠ è½½çš„ï¼Ÿä½ ä¸æ˜¯è¯´æ˜¯é˜»å¡çš„å—ï¼Ÿç„¶åï¼Œï¼Œï¼Œåæ¥ä»–å‘Šè¯‰äº†æˆ‘ï¼Œhttpæ˜¯å¯ä»¥å¼€å¤šä¸ªçº¿ç¨‹çš„ï¼Œå¯ä»¥å¹¶è¡ŒåŠ è½½ã€‚ä¸‹é¢æ˜¯æˆ‘æ‰¾çš„è§£é‡Šå’Œæˆ‘çš„ç†è§£ã€‚ http1.0å’Œhttp1.1çš„åŒºåˆ« è®¿é—®ä¸€ä¸ªåŒ…å«æœ‰è®¸å¤šå›¾åƒçš„ç½‘é¡µæ–‡ä»¶çš„æ•´ä¸ªè¿‡ç¨‹åŒ…å«äº†å¤šæ¬¡è¯·æ±‚å’Œå“åº”ï¼Œæ¯æ¬¡è¯·æ±‚å’Œå“åº”éƒ½éœ€è¦å»ºç«‹ä¸€ä¸ªå•ç‹¬çš„è¿æ¥ï¼Œæ¯æ¬¡è¿æ¥åªæ˜¯ä¼ è¾“ä¸€ä¸ªæ–‡æ¡£å’Œå›¾åƒï¼Œä¸Šä¸€æ¬¡å’Œä¸‹ä¸€æ¬¡è¯·æ±‚å®Œå…¨åˆ†ç¦»ã€‚å³ä½¿å›¾åƒæ–‡ä»¶éƒ½å¾ˆå°ï¼Œä½†æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯æ¯æ¬¡å»ºç«‹å’Œå…³é—­è¿æ¥å´æ˜¯ä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒè´¹æ—¶çš„è¿‡ç¨‹ï¼Œå¹¶ä¸”ä¼šä¸¥é‡å½±å“å®¢æˆ·æœºå’ŒæœåŠ¡å™¨çš„æ€§ èƒ½ã€‚ æ¯”å¦‚ä¸€ä¸ªç½‘é¡µå®ƒæœ‰10ä¸ªèµ„æºï¼Œæ¯”å¦‚jsæ–‡ä»¶ï¼Œcssæ–‡ä»¶ï¼Œå›¾ç‰‡æ–‡ä»¶ï¼Œåœ¨http1.0ä¸­è¿™ä¸ªæ˜¯é¦–å…ˆå»ºç«‹ä¸€æ¬¡tcpé“¾æ¥ï¼Œç„¶åè¯·æ±‚ä¸€ä¸ªhttpï¼Œç„¶åä¸‹è½½ç¬¬äºŒä¸ªæ–‡ä»¶åˆå»ºç«‹ä¸€æ¬¡tcpé“¾æ¥ï¼Œå†è¯·æ±‚ä¸€ä¸ªhttp,è¿™æ ·ä¸‹å»ï¼Œä¸€ç›´åˆ°ç¬¬10ä¸ªæ–‡ä»¶ã€‚è¿™æ ·tcpåœ¨æ¯æ¬¡è¿æ¥å’Œæ–­å¼€çš„æ—¶å€™éƒ½è¦è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ã€‚è¿™å½“ç„¶æ˜¯è´¹æ—¶è´¹æ€§èƒ½ã€‚ ä¸ºäº†å…‹æœHTTP 1.0çš„è¿™ä¸ªç¼ºé™·ï¼ŒHTTP 1.1æ”¯æŒæŒä¹…è¿æ¥ï¼Œåœ¨ä¸€ä¸ªTCPè¿æ¥ä¸Šå¯ä»¥ä¼ é€å¤šä¸ªHTTPè¯·æ±‚å’Œå“åº”ï¼Œå‡å°‘äº†å»ºç«‹å’Œå…³é—­è¿æ¥çš„æ¶ˆè€—å’Œå»¶è¿Ÿã€‚ä¸€ä¸ªåŒ…å«æœ‰è®¸å¤šå›¾åƒçš„ç½‘é¡µæ–‡ä»¶çš„å¤šä¸ªè¯·æ±‚å’Œåº”ç­”å¯ä»¥åœ¨ä¸€ä¸ªè¿æ¥ä¸­ä¼ è¾“ï¼Œä½†æ¯ä¸ªå•ç‹¬çš„ç½‘é¡µæ–‡ä»¶çš„è¯·æ±‚å’Œåº”ç­”ä»ç„¶éœ€è¦ä½¿ç”¨å„è‡ªçš„è¿æ¥ã€‚HTTP 1.1è¿˜å…è®¸å®¢æˆ·ç«¯ä¸ç”¨ç­‰å¾…ä¸Šä¸€æ¬¡è¯·æ±‚ç»“æœè¿”å›ï¼Œå°±å¯ä»¥å‘å‡ºä¸‹ä¸€æ¬¡è¯·æ±‚ï¼Œä½†æœåŠ¡å™¨ç«¯å¿…é¡»æŒ‰ç…§æ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚çš„å…ˆåé¡ºåºä¾æ¬¡å›é€å“åº”ç»“æœï¼Œä»¥ä¿è¯å®¢æˆ·ç«¯èƒ½å¤ŸåŒºåˆ†å‡ºæ¯æ¬¡è¯·æ±‚çš„å“åº”å†…å®¹ï¼Œè¿™æ ·ä¹Ÿæ˜¾è‘—åœ°å‡å°‘äº†æ•´ä¸ªä¸‹è½½è¿‡ç¨‹æ‰€éœ€è¦çš„æ—¶é—´ã€‚ ä¸Šé¢æåˆ°çš„ä¸ç”¨ç­‰å¾…ä¸Šæ¬¡çš„è¯·æ±‚ç»“æœï¼Œå°±å¯ä»¥å‘å‡ºä¸‹ä¸€æ¬¡è¯·æ±‚ä¹Ÿå°±æ˜¯http1.1çš„ä¸é˜»å¡ç°è±¡äº†ã€‚æ€»ç»“ä¸Šé¢ä¸¤ä¸ªç‰¹ç‚¹ä¸€ä¸ªæ˜¯æ”¯æŒäº†æŒä¹…é•¿è¿æ¥ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯httpå¯ä»¥å¹¶è¡Œè¯·æ±‚ä¸é˜»å¡ã€‚ å¦å¤–ï¼šHTTP/1.1æµæ°´çº¿åªèƒ½éƒ¨åˆ†åœ°è§£å†³äº†å¹¶å‘çš„è¯·æ±‚ï¼Œå¹¶ä»çº¿å¤´çš„é˜»å¡å—åˆ°å½±å“ã€‚ å› æ­¤ï¼Œéœ€è¦è¿›è¡Œå¤šæ¬¡è¯·æ±‚å®¢æˆ·ç«¯é€šå¸¸ä½¿ç”¨å¤šä¸ªè¿æ¥åˆ°æœåŠ¡å™¨ï¼Œä»¥å‡å°‘ç­‰å¾…æ—¶é—´ã€‚ è¿˜æœ‰ï¼ŒHTTP/1.1çš„æŠ¥å¤´å­—æ®µç»å¸¸é‡å¤å’Œå†—é•¿ï¼Œå…¶ä¸­ï¼Œé™¤äº†äº§ç”Ÿæ›´å¤šæˆ–æ›´å¤§çš„ç½‘ç»œæ•°æ®åŒ…ï¼Œå¯èƒ½ä¼šå¯¼è‡´å°çš„åˆå§‹TCPæ‹¥å¡çª—å£æ¥å¿«é€Ÿå¡«å……ã€‚ è¿™å¯èƒ½ä¼šå¯¼è‡´è¿‡åº¦çš„å»¶è¿Ÿï¼Œå½“å¤šä¸ªè¯·æ±‚åœ¨ä¸€ä¸ªæ–°çš„TCPè¿æ¥è¿›è¡Œã€‚ æ¶¨çŸ¥è¯†HTTP2.0çš„æœåŠ¡å™¨æ¨é€ HTTP 2.0 æ–°å¢çš„ä¸€ä¸ªå¼ºå¤§çš„æ–°åŠŸèƒ½ï¼Œå°±æ˜¯æœåŠ¡å™¨å¯ä»¥å¯¹ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚å‘é€å¤šä¸ªå“åº”ã€‚æ¢å¥è¯è¯´ï¼Œé™¤äº†å¯¹æœ€åˆè¯·æ±‚çš„å“åº”å¤–ï¼ŒæœåŠ¡å™¨è¿˜å¯ä»¥é¢å¤–å‘å®¢æˆ·ç«¯æ¨é€èµ„æºï¼Œè€Œæ— éœ€å®¢æˆ·ç«¯æ˜ç¡®åœ°è¯·æ±‚ã€‚ å½“æµè§ˆå™¨è¯·æ±‚ä¸€ä¸ªhtmlï¼ŒæœåŠ¡å™¨å…¶å®å¤§æ¦‚çŸ¥é“ä½ æ˜¯æ¥ä¸‹æ¥è¦è¯·æ±‚èµ„æºäº†ï¼Œè€Œä¸éœ€è¦ç­‰å¾…æµè§ˆå™¨å¾—åˆ°htmlåè§£æé¡µé¢å†å‘é€èµ„æºè¯·æ±‚ æ‰€æœ‰çš„HTTP2.0çš„è¯·æ±‚éƒ½åœ¨ä¸€ä¸ªTCPé“¾æ¥ä¸Š HTTP2.0æ‰€æœ‰é€šä¿¡éƒ½æ˜¯åœ¨ä¸€ä¸ªTCPè¿æ¥ä¸Šå®Œæˆã€‚HTTP 2.0 æŠŠ HTTP åè®®é€šä¿¡çš„åŸºæœ¬å•ä½ç¼©å°ä¸ºä¸€ä¸ªä¸€ä¸ªçš„å¸§ï¼Œè¿™äº›å¸§å¯¹åº” ç€é€»è¾‘æµä¸­çš„æ¶ˆæ¯ã€‚å¹¶è¡Œåœ°åœ¨åŒä¸€ä¸ª TCP è¿æ¥ä¸ŠåŒå‘äº¤æ¢æ¶ˆæ¯ã€‚å°±å¥½æ¯”ï¼Œæˆ‘è¯·æ±‚ä¸€ä¸ªé¡µé¢http://www.qq.comã€‚é¡µé¢ä¸Šæ‰€æœ‰çš„èµ„æºè¯·æ±‚éƒ½æ˜¯å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¸Šçš„ä¸€æ¡TCPä¸Šè¯·æ±‚å’Œå“åº”çš„ï¼HTTPæ€§èƒ½çš„å…³é”®åœ¨äºä½å»¶è¿Ÿè€Œä¸æ˜¯é«˜å¸¦å®½ï¼å¤§å¤šæ•°HTTP è¿æ¥çš„æ—¶é—´éƒ½å¾ˆçŸ­ï¼Œè€Œä¸”æ˜¯çªå‘æ€§çš„ï¼Œä½†TCP åªåœ¨é•¿æ—¶é—´è¿æ¥ä¼ è¾“å¤§å—æ•°æ®æ—¶æ•ˆç‡æ‰æœ€é«˜ã€‚HTTP 2.0 é€šè¿‡è®©æ‰€æœ‰æ•°æ®æµå…±ç”¨åŒä¸€ä¸ªè¿æ¥ï¼Œå¯ä»¥æ›´æœ‰æ•ˆåœ°ä½¿ç”¨TCP è¿æ¥ï¼Œè®©é«˜å¸¦å®½ä¹Ÿèƒ½çœŸæ­£çš„æœåŠ¡äºHTTPçš„æ€§èƒ½æå‡ã€‚ HTTP/2æä¾›æ›´å¤šçš„åŠ å¯†æ”¯æŒç°åœ¨ï¼Œå¤§å¤šæ•°æ™®é€šç”¨æˆ·çš„è®¾å¤‡å’Œç½‘ç»œæœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œé€šé“å¹¶æ²¡æœ‰è¢«åŠ å¯†ï¼Œé™¤éç«™ç‚¹é€‰æ‹©ä½¿ç”¨HTTPçš„å‡çº§ç‰ˆâ€”â€”HTTPSï¼Œåè€…åŒ…æ‹¬ä¸€ä¸ªåä¸ºâ€œä¼ è¾“å±‚å®‰å…¨â€çš„åŠ å¯†æ­¥éª¤ã€‚é“¶è¡Œã€ç”µå­å•†åŠ¡ç«™ç‚¹ã€è°·æ­Œç­‰ä¸€èˆ¬ä¼šä½¿ç”¨è¿™ä¸€åè®®ï¼ˆå¦‚æœä¸€ä¸ªç«™ç‚¹ä»¥â€œhttps://â€å¼€å¤´ï¼Œè¡¨ç¤ºå®ƒå·²ä½¿ç”¨è¿™ä¸€åè®®ï¼‰ã€‚ å¢åŠ å¤´å‹ç¼©å®ƒå¢åŠ äº†å¤´å‹ç¼©ï¼ˆheader compressionï¼‰ï¼Œå› æ­¤å³ä½¿éå¸¸å°çš„è¯·æ±‚ï¼Œå…¶è¯·æ±‚å’Œå“åº”çš„headeréƒ½åªä¼šå ç”¨å¾ˆå°æ¯”ä¾‹çš„å¸¦å®½ã€‚ å…³äºICMPICMPæ˜¯(Internet Control Message Protocol)Internetæ§åˆ¶æŠ¥æ–‡åè®®ã€‚å®ƒæ˜¯TCP/IPåè®®æ—çš„ä¸€ä¸ªå­åè®®ï¼Œç”¨äºåœ¨IPä¸»æœºã€è·¯ç”±å™¨ä¹‹é—´ä¼ é€’æ§åˆ¶æ¶ˆæ¯ã€‚æ§åˆ¶æ¶ˆæ¯æ˜¯æŒ‡ç½‘ç»œé€šä¸é€šã€ä¸»æœºæ˜¯å¦å¯è¾¾ã€è·¯ç”±æ˜¯å¦å¯ç”¨ç­‰ç½‘ç»œæœ¬èº«çš„æ¶ˆæ¯ã€‚è¿™äº›æ§åˆ¶æ¶ˆæ¯è™½ç„¶å¹¶ä¸ä¼ è¾“ç”¨æˆ·æ•°æ®ï¼Œä½†æ˜¯å¯¹äºç”¨æˆ·æ•°æ®çš„ä¼ é€’èµ·ç€é‡è¦çš„ä½œç”¨ã€‚ ICMPæ˜¯Internet æ§åˆ¶ä¿¡æ¯åè®®ï¼ˆICMPï¼‰æ˜¯ IP ç»„çš„ä¸€ä¸ªæ•´åˆéƒ¨åˆ†ã€‚é€šè¿‡ IP åŒ…ä¼ é€çš„ ICMP ä¿¡æ¯ä¸»è¦ç”¨äºæ¶‰åŠç½‘ç»œæ“ä½œæˆ–é”™è¯¯æ“ä½œçš„ä¸å¯è¾¾ä¿¡æ¯ã€‚ ICMP åŒ…å‘é€æ˜¯ä¸å¯é çš„ï¼Œæ‰€ä»¥ä¸»æœºä¸èƒ½ä¾é æ¥æ”¶ ICMP åŒ…è§£å†³ä»»ä½•ç½‘ç»œé—®é¢˜ã€‚ICMPä¸è±¡TCPæˆ–UDPæœ‰ç«¯å£ï¼Œä½†å®ƒç¡®å®å«æœ‰ä¸¤ä¸ªåŸŸï¼šç±»å‹(type)å’Œä»£ç (code)ã€‚è€Œä¸”è¿™äº›åŸŸçš„ä½œç”¨å’Œç«¯å£ä¹Ÿå®Œå…¨ä¸åŒã€‚Pingç”¨åˆ°çš„æ˜¯ICMPåè®®ã€‚ä¸æ˜¯ç«¯å£ã€‚","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/categories/è®¡ç®—æœºç½‘ç»œ/"}],"tags":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/tags/è®¡ç®—æœºç½‘ç»œ/"}]},{"title":"é¡µé¢é‡æµå’Œå›æµä»¥åŠä¼˜åŒ–çš„æ•´ç†å’Œå­¦ä¹ ","slug":"é¡µé¢é‡æµå’Œå›æµä»¥åŠä¼˜åŒ–çš„æ•´ç†å’Œå­¦ä¹ ","date":"2016-03-09T11:00:24.000Z","updated":"2016-12-12T03:02:36.000Z","comments":true,"path":"2016/03/09/é¡µé¢é‡æµå’Œå›æµä»¥åŠä¼˜åŒ–çš„æ•´ç†å’Œå­¦ä¹ /","link":"","permalink":"http://sevencai.github.io/2016/03/09/é¡µé¢é‡æµå’Œå›æµä»¥åŠä¼˜åŒ–çš„æ•´ç†å’Œå­¦ä¹ /","excerpt":"","text":"æµè§ˆå™¨ä»ä¸‹è½½æ–‡æ¡£åˆ°æ˜¾ç¤ºé¡µé¢çš„è¿‡ç¨‹æ˜¯ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼Œè¿™é‡ŒåŒ…å«äº†é‡ç»˜å’Œé‡æ’ã€‚å„å®¶æµè§ˆå™¨å¼•æ“çš„å·¥ä½œåŸç†ç•¥æœ‰å·®åˆ«ï¼Œä½†ä¹Ÿæœ‰ä¸€å®šè§„åˆ™ã€‚ç®€å•è®²ï¼Œé€šå¸¸åœ¨æ–‡æ¡£åˆæ¬¡åŠ è½½æ—¶ï¼Œæµè§ˆå™¨å¼•æ“ä¼šè§£æHTMLæ–‡æ¡£æ¥æ„å»ºDOMæ ‘ï¼Œä¹‹åæ ¹æ®DOMå…ƒç´ çš„å‡ ä½•å±æ€§æ„å»ºä¸€æ£µç”¨äºæ¸²æŸ“çš„æ ‘ã€‚ æ¸²æŸ“æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰å¤§å°å’Œè¾¹è·ç­‰å±æ€§ï¼Œç±»ä¼¼äºç›’å­æ¨¡å‹ï¼ˆç”±äºéšè—å…ƒç´ ä¸éœ€è¦æ˜¾ç¤ºï¼Œæ¸²æŸ“æ ‘ä¸­å¹¶ä¸åŒ…å«DOMæ ‘ä¸­éšè—çš„å…ƒç´ ï¼‰ã€‚å½“æ¸²æŸ“æ ‘æ„å»ºå®Œæˆåï¼Œæµè§ˆå™¨ å°±å¯ä»¥å°†å…ƒç´ æ”¾ç½®åˆ°æ­£ç¡®çš„ä½ç½®äº†ï¼Œå†æ ¹æ®æ¸²æŸ“æ ‘èŠ‚ç‚¹çš„æ ·å¼å±æ€§ç»˜åˆ¶å‡ºé¡µé¢ã€‚ç”±äºæµè§ˆå™¨çš„æµå¸ƒå±€ï¼Œå¯¹æ¸²æŸ“æ ‘çš„è®¡ç®—é€šå¸¸åªéœ€è¦éå†ä¸€æ¬¡å°±å¯ä»¥å®Œæˆã€‚ä½† tableåŠå…¶å†…éƒ¨å…ƒç´ é™¤å¤–ï¼Œå®ƒå¯èƒ½éœ€è¦å¤šæ¬¡è®¡ç®—æ‰èƒ½ç¡®å®šå¥½å…¶åœ¨æ¸²æŸ“æ ‘ä¸­èŠ‚ç‚¹çš„å±æ€§ï¼Œé€šå¸¸è¦èŠ±3å€äºåŒç­‰å…ƒç´ çš„æ—¶é—´ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦é¿å…ä½¿ç”¨ tableåšå¸ƒå±€çš„ä¸€ä¸ªåŸå› ã€‚ é¡µé¢é‡ç»˜Repaint,é¡µé¢é‡æ’Reflowå…·ä½“è§£é‡Šå¦‚ä¸‹ï¼š é¡µé¢é‡ç»˜Repainté‡ç»˜å‘ç”Ÿåœ¨ä¸€ä¸ªå…ƒç´ çš„å¤–è§‚è¢«æ”¹å˜ï¼Œä½†æ˜¯æ•´ä½“çš„å¸ƒå±€æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚æ¯”å¦‚æˆ‘ä»¬å¦‚æœåªæ”¹å˜äº†visibilityå’Œoutline,background,colorä¹‹ç±»çš„ã€‚ åœ¨è¿™ä¸ªæ—¶å€™æµè§ˆå™¨ä¼šæ ¹æ®å…ƒç´ çš„æ–°å±æ€§é‡æ–°ç»˜åˆ¶ï¼Œä½¿å…ƒç´ å‘ˆç°æ–°çš„å¤–è§‚ã€‚é‡ç»˜ä¸ä¼šå¸¦æ¥é‡æ–°å¸ƒå±€ï¼Œå¹¶ä¸ä¸€å®šä¼´éšé‡æ’ã€‚ é¡µé¢é‡æ’Reflowé¡µé¢é‡æ’å‘ç”Ÿåœ¨æˆ‘ä»¬æ”¹å˜äº†DOMå…ƒç´ çš„å‡ ä½•å±æ€§ï¼Œæ¯”å¦‚æˆ‘ä»¬ç»™ä¸€ä¸ªå…ƒç´ åŠ äº†border,æˆ–è€…width,heightå‘ç”Ÿäº†å˜åŒ–ï¼Œæˆ–è€…æˆ‘ä»¬çªç„¶è®©å®ƒfloatäº†è¿™äº›ã€‚å†æ¯”å¦‚ï¼Œæˆ‘ä»¬æ”¹å˜äº†æ–‡å­—çš„å¤§å°ï¼Œæ”¹å˜äº†æ–‡å­—å†…å®¹ã€‚ å…·ä½“çš„ä¸€äº›æ€»ç»“å¦‚ä¸‹ï¼š æ·»åŠ æˆ–è€…åˆ é™¤å¯è§çš„DOMå…ƒç´  å…ƒç´ ä½ç½®æ”¹å˜ å…ƒç´ å°ºå¯¸æ”¹å˜â€”â€”è¾¹è·ã€å¡«å……ã€è¾¹æ¡†ã€å®½åº¦å’Œé«˜åº¦ å†…å®¹æ”¹å˜â€”â€”æ¯”å¦‚æ–‡æœ¬æ”¹å˜æˆ–è€…å›¾ç‰‡å¤§å°æ”¹å˜è€Œå¼•èµ·çš„è®¡ç®—å€¼å®½åº¦å’Œé«˜åº¦æ”¹å˜ï¼› é¡µé¢æ¸²æŸ“åˆå§‹åŒ–ï¼› æµè§ˆå™¨çª—å£å°ºå¯¸æ”¹å˜â€”â€”resizeäº‹ä»¶å‘ç”Ÿæ—¶ï¼› è¿™äº›æ—¶å€™æµè§ˆå™¨ä¼šé‡æ–°è®¡ç®—å…ƒç´ çš„å±æ€§ï¼Œä¼šä½¿æ¸²æŸ“æ ‘ä¸­å—åˆ°å½±å“çš„éƒ¨åˆ†å¤±æ•ˆï¼Œå¹¶ä¸”ä¼šéªŒè¯DOMæ ‘ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹çš„visibilityå±æ€§ã€‚è¿™æ ·è‚¯å®šä¼šé€ æˆå¾ˆå¤§çš„ä½æ•ˆã€‚å¦‚æœæˆ‘ä»¬é‡æ’å¤ªè¿‡äºé¢‘ç¹çš„è¯ï¼Œæµè§ˆå™¨è‚¯å®šå°±åˆå ç”¨äº†å¾ˆå¤šcpuã€‚ åˆšåˆšæåˆ°äº†æˆ‘ä»¬é‡æ’çš„æ—¶å€™ä¼šéªŒè¯DOMæ ‘ä¸Šçš„æ‰€æœ‰å±æ€§ï¼Œè¿™åˆæ˜¯ä¸ºå•¥å‘¢ï¼Ÿ å½“DOMå…ƒç´ çš„å‡ ä½•å±æ€§å˜åŒ–æ—¶ï¼Œæ¸²æŸ“æ ‘ä¸­çš„ç›¸å…³èŠ‚ç‚¹å°±ä¼šå¤±æ•ˆï¼Œæµè§ˆå™¨ä¼šæ ¹æ®DOMå…ƒç´ çš„å˜åŒ–é‡å»ºæ„å»ºæ¸²æŸ“æ ‘ä¸­å¤±æ•ˆçš„èŠ‚ç‚¹ã€‚ä¹‹åï¼Œä¼šæ ¹æ®æ–°çš„æ¸²æŸ“æ ‘é‡æ–°ç»˜ åˆ¶è¿™éƒ¨åˆ†é¡µé¢ã€‚è€Œä¸”ï¼Œå½“å‰å…ƒç´ çš„é‡æ’ä¹Ÿè®¸ä¼šå¸¦æ¥ç›¸å…³å…ƒç´ çš„é‡æ’ã€‚ä¾‹å¦‚ï¼Œå®¹å™¨èŠ‚ç‚¹çš„æ¸²æŸ“æ ‘æ”¹å˜æ—¶ï¼Œä¼šè§¦å‘å­èŠ‚ç‚¹çš„é‡æ–°è®¡ç®—ï¼Œä¹Ÿä¼šè§¦å‘å…¶åç»­å…„å¼ŸèŠ‚ç‚¹çš„é‡æ’ï¼Œ ç¥–å…ˆèŠ‚ç‚¹éœ€è¦é‡æ–°è®¡ç®—å­èŠ‚ç‚¹çš„å°ºå¯¸ä¹Ÿä¼šäº§ç”Ÿé‡æ’ã€‚æœ€åï¼Œæ¯ä¸ªå…ƒç´ éƒ½å°†å‘ç”Ÿé‡ç»˜ã€‚å¯è§ï¼Œé‡æ’ä¸€å®šä¼šå¼•èµ·æµè§ˆå™¨çš„é‡ç»˜ï¼Œä¸€ä¸ªå…ƒç´ çš„é‡æ’é€šå¸¸ä¼šå¸¦æ¥ä¸€ç³»åˆ—çš„å åº”ï¼Œç”šè‡³è§¦å‘æ•´ä¸ªæ–‡æ¡£çš„é‡æ’å’Œé‡ç»˜ï¼Œæ€§èƒ½ä»£ä»·æ˜¯é«˜æ˜‚çš„ã€‚ ä¸¾ä¸ªä¾‹å­ä»¥åŒºåˆ«é‡ç»˜å’Œé‡æ’12345678var s = document.body.style;s.padding = \"2px\"; // å›æµ+é‡ç»˜s.border = \"1px solid red\"; // å†ä¸€æ¬¡ å›æµ+é‡ç»˜s.color = \"blue\"; // å†ä¸€æ¬¡é‡ç»˜s.backgroundColor = \"#ccc\"; // å†ä¸€æ¬¡ é‡ç»˜s.fontSize = \"14px\"; // å†ä¸€æ¬¡ å›æµ+é‡ç»˜// æ·»åŠ nodeï¼Œå†ä¸€æ¬¡ å›æµ+é‡ç»˜document.body.appendChild(document.createTextNode('abc!')); å¦‚æœç­”å¯¹äº†ï¼Œå°±è¯æ˜å·²ç»å¯ä»¥åŒºåˆ†é‡ç»˜å’Œé‡æ’äº†ã€‚å†æ¥ä»”ç»†çœ‹ä¸‹ï¼Œä¸Šé¢çš„æ—¶å€™æˆ‘ä»¬æŠŠèŠ‚ç‚¹æ’å…¥åˆ°äº†bodyæœ€åï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆä¸æ’å…¥åˆ°æœ€å‰é¢å‘¢ï¼Ÿå› ä¸ºæ’å…¥åˆ°åé¢ä¸ä¸€å®šä¼šå½±å“åˆ°å‰é¢ï¼Œä½†æ˜¯æ’å…¥å‰é¢å°±ä¸€å®šä¼šå½±å“åˆ°åé¢ã€‚ è§£å†³æ–¹æ¡ˆï¼Ÿæµè§ˆå™¨è‡ªèº«çš„ä¼˜åŒ–ä»ä¸Šä¸ªå®ä¾‹ä»£ç ä¸­å¯ä»¥çœ‹åˆ°å‡ è¡Œç®€å•çš„JSä»£ç å°±å¼•èµ·äº†6æ¬¡å·¦å³çš„å›æµã€é‡ç»˜ã€‚è€Œä¸”æˆ‘ä»¬ä¹ŸçŸ¥é“å›æµçš„èŠ±é”€ä¹Ÿä¸å°ï¼Œå¦‚æœæ¯å¥JSæ“ä½œéƒ½å»å›æµé‡ç»˜çš„è¯ï¼Œæµè§ˆå™¨å¯èƒ½å°±ä¼šå—ä¸äº†ã€‚æ‰€ä»¥å¾ˆå¤šæµè§ˆå™¨éƒ½ä¼šä¼˜åŒ–è¿™äº›æ“ä½œï¼Œæµè§ˆå™¨ä¼šç»´æŠ¤1ä¸ªé˜Ÿåˆ—ï¼ŒæŠŠæ‰€æœ‰ä¼šå¼•èµ·å›æµã€é‡ç»˜çš„æ“ä½œæ”¾å…¥è¿™ä¸ªé˜Ÿåˆ—ï¼Œç­‰é˜Ÿåˆ—ä¸­çš„æ“ä½œåˆ°äº†ä¸€å®šçš„æ•°é‡æˆ–è€…åˆ°äº†ä¸€å®šçš„æ—¶é—´é—´éš”ï¼Œæµè§ˆå™¨å°±ä¼šflushé˜Ÿåˆ—ï¼Œè¿›è¡Œä¸€ä¸ªæ‰¹å¤„ç†ã€‚è¿™æ ·å°±ä¼šè®©å¤šæ¬¡çš„å›æµã€é‡ç»˜å˜æˆä¸€æ¬¡å›æµé‡ç»˜ã€‚ ä½†é™¤äº†æ¸²æŸ“æ ‘çš„ç›´æ¥å˜åŒ–ï¼Œå½“è·å–ä¸€äº›å±æ€§æ—¶ï¼Œæµè§ˆå™¨ä¸ºå–å¾—æ­£ç¡®çš„å€¼ä¹Ÿä¼šè§¦å‘é‡æ’ã€‚è¿™æ ·å°±ä½¿å¾—æµè§ˆå™¨çš„ä¼˜åŒ–å¤±æ•ˆäº†ã€‚è¿™äº›å±æ€§åŒ…æ‹¬ï¼šoffsetTopã€offsetLeftã€ offsetWidthã€offsetHeightã€scrollTopã€scrollLeftã€scrollWidthã€scrollHeightã€clientTopã€clientLeftã€clientWidthã€clientHeightã€getComputedStyle() (currentStyle in IE)ã€‚æ‰€ä»¥ï¼Œåœ¨å¤šæ¬¡ä½¿ç”¨è¿™äº›å€¼æ—¶åº”è¿›è¡Œç¼“å­˜ã€‚ å°†å¤šæ¬¡æ”¹å˜æ ·å¼å±æ€§çš„æ“ä½œåˆå¹¶æˆä¸€æ¬¡æ“ä½œæ¯”å¦‚è¯´æŠŠ1234var changeDiv = document.getElementById('changeDiv'); changeDiv.style.color = '#093'; changeDiv.style.background = '#eee'; changeDiv.style.height = '200px'; å˜æˆä¸ºï¼š123456div.changeDiv &#123; background: #eee; color: #093; height: 200px;&#125;document.getElementById('changeDiv').className = 'changeDiv'; é€šè¿‡è¿™ç§æ–¹å¼æˆ‘ä»¬ä¹Ÿå‡å°‘äº†é‡ç»˜å’Œé‡æ’çš„æ¬¡æ•°ã€‚ è®©æ”¹å˜çš„å…ƒç´ ä¸å½±å“åˆ«çš„å…ƒç´ å°†éœ€è¦å¤šæ¬¡é‡æ’çš„å…ƒç´ ï¼Œpositionå±æ€§è®¾ä¸ºabsoluteæˆ–fixedï¼Œè¿™æ ·æ­¤å…ƒç´ å°±è„±ç¦»äº†æ–‡æ¡£æµï¼Œå®ƒçš„å˜åŒ–ä¸ä¼šå½±å“åˆ°å…¶ä»–å…ƒç´ ã€‚ä¾‹å¦‚æœ‰åŠ¨ç”»æ•ˆæœçš„å…ƒç´ å°±æœ€å¥½è®¾ç½®ä¸ºç»å¯¹å®šä½ã€‚ å…ˆæ‹¼æ¥htmlä»£ç åœ¨å†…å­˜ä¸­å¤šæ¬¡æ“ä½œèŠ‚ç‚¹ï¼Œå®Œæˆåå†æ·»åŠ åˆ°æ–‡æ¡£ä¸­å»ã€‚ä¾‹å¦‚è¦å¼‚æ­¥è·å–è¡¨æ ¼æ•°æ®ï¼Œæ¸²æŸ“åˆ°é¡µé¢ã€‚å¯ä»¥å…ˆå–å¾—æ•°æ®ååœ¨å†…å­˜ä¸­æ„å»ºæ•´ä¸ªè¡¨æ ¼çš„htmlç‰‡æ®µï¼Œå†ä¸€æ¬¡æ€§æ·»åŠ åˆ°æ–‡æ¡£ä¸­å»ï¼Œè€Œä¸æ˜¯å¾ªç¯æ·»åŠ æ¯ä¸€è¡Œã€‚ ç¼“å­˜åˆ°å˜é‡åœ¨éœ€è¦ç»å¸¸å–é‚£äº›å¼•èµ·æµè§ˆå™¨é‡æ’çš„å±æ€§å€¼æ—¶ï¼Œè¦ç¼“å­˜åˆ°å˜é‡ã€‚æ¯”å¦‚è¯´å¦‚æœç”¨åˆ°å¤šæ¬¡getElementById(â€œidâ€)å°±æŠŠè¿™ä¸ªå˜é‡å…ˆå­˜èµ·æ¥ã€‚ display:noneæ³•ç”±äºdisplayå±æ€§ä¸ºnoneçš„å…ƒç´ ä¸åœ¨æ¸²æŸ“æ ‘ä¸­ï¼Œå¯¹éšè—çš„å…ƒç´ æ“ä½œä¸ä¼šå¼•å‘å…¶ä»–å…ƒç´ çš„é‡æ’ã€‚å¦‚æœè¦å¯¹ä¸€ä¸ªå…ƒç´ è¿›è¡Œå¤æ‚çš„æ“ä½œæ—¶ï¼Œå¯ä»¥å…ˆéšè—å®ƒï¼Œæ“ä½œå®Œæˆåå†æ˜¾ç¤ºã€‚è¿™æ ·åªåœ¨éšè—å’Œæ˜¾ç¤ºæ—¶è§¦å‘2æ¬¡é‡æ’ã€‚ è¡¥å……é¡µé¢çš„é‡æ„è¿™ä¸ªè·Ÿä¸Šé¢çš„ä¸€æ ·æ˜¯ä¼˜åŒ–ï¼Œä½†æ˜¯æ˜¯å®Œå…¨ä¸åŒçš„é¢ï¼Œæˆ‘å¼„é”™äº†å…ˆå‰ã€‚ ä»£ç é‡æ„ï¼ˆè‹±è¯­ï¼šCode refactoringï¼‰é‡æ„å°±æ˜¯åœ¨ä¸æ”¹å˜è½¯ä»¶ç³»ç»Ÿå¤–éƒ¨è¡Œä¸ºçš„å‰æä¸‹ï¼Œæ”¹å–„å®ƒçš„å†…éƒ¨ç»“æ„ã€‚æ¯”å¦‚æˆ‘ä»¬å†™å®Œç½‘ç«™çš„æ—¶å€™ï¼Œå°±å¯ä»¥é‡æ–°çœ‹ä¸‹æ•´ä¸ªç½‘ç«™æ˜¯ä¸æ˜¯æœ‰å¾ˆå¤šä¸å¿…è¦çš„æ ‡ç­¾ï¼Œæˆ–è€…è¯­ä¹‰åŒ–ä¸æ˜¯å¾ˆå¥½ã€‚ æ€»ç»“ä¸Šé¢æˆ‘ä»¬çŸ¥é“äº† Reflow æœ‰æ—¶ç¡®å®ä¸å¯é¿å…ï¼Œæ‰€ä»¥åªèƒ½å°½å¯èƒ½é™åˆ¶Reflowçš„å½±å“èŒƒå›´ã€‚æˆ‘è§‰å¾—æœ€æ£’çš„åœ°æ–¹åœ¨è¿™å‡ ç§è§£å†³æ–¹æ³•é‡Œï¼Œæ¯”å¦‚è¯´display:noneå’Œfloatæ–¹æ³•ï¼Œæˆ‘å¯èƒ½ä¸ä¼šæƒ³åˆ°ã€‚è°¢è°¢è¿™å‡ ç¯‡æ–‡ç« ï¼šfromå¼ é‘«æ—­å’Œfromç‹¬å ç¥è¯","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"javascriptäº‹ä»¶å§”æ‰˜","slug":"javascriptäº‹ä»¶å§”æ‰˜","date":"2016-03-04T10:27:04.000Z","updated":"2016-12-12T03:00:30.000Z","comments":true,"path":"2016/03/04/javascriptäº‹ä»¶å§”æ‰˜/","link":"","permalink":"http://sevencai.github.io/2016/03/04/javascriptäº‹ä»¶å§”æ‰˜/","excerpt":"","text":"å…ˆä¸¾ä¸ªç°å®ç”Ÿæ´»ä¸­å§”æ‰˜çš„ä¾‹å­ã€‚æ¯”å¦‚æœ‰3ä¸ªäººåœ¨åŒä¸€ä¸ªå…¬å¸é‡Œï¼Œæ˜ŸæœŸå¤©ä»–ä»¬å¾—çŸ¥ä»–ä»¬çš„å¿«é€’éƒ½è¦æ¥ã€‚å¦‚æœä¸ç”¨å§”æ‰˜ï¼Œæ„å‘³ç€è¿™ä¸‰ä¸ªäººéƒ½è¦å»ä¸€æ¬¡æ¥¼ä¸‹ï¼Œè€Œä¸”è¦ä¸€ç›´ç­‰ï¼Œç›´åˆ°ä»–ä»¬çš„å¿«é€’æ¥ã€‚ä½†æ˜¯æˆ‘ä»¬çŸ¥é“å…¬å¸éƒ½æ˜¯æœ‰å‰å°çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬å¿«é€’å…¬å¸éƒ½æ˜¯æŠŠä¸œè¥¿ç›´æ¥æ”¾åˆ°å‰å°ï¼Œç„¶åç”±å‰å°æ‰“ç”µè¯è®©ä»–ä»¬æ¥é¢†å–ã€‚è¿™é‡Œçš„å‰å°æœåŠ¡å°±æ˜¯å§”æ‰˜ã€‚ åœ¨æ¯”å¦‚ç”µå•†çš„æ¨¡å¼ï¼ˆå¦‚æ·˜å®ï¼‰ï¼Œå¦‚æœæ²¡æœ‰æ·˜å®ï¼Œå¤§å®¶éƒ½è¦ä¸€å®¶ä¸€å®¶çš„å»çœ‹è¡£æœï¼Œæ‰¾è¡£æœï¼Œä¹°è¡£æœã€‚ä½†æ˜¯æœ‰äº†æ·˜å®çš„è¿™ç§ç±»ä¼¼å§”æ‰˜æ¨¡å¼ï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨æ‰‹æœºè¿›å…¥æ·˜å®å°±å¯ä»¥å»æ‰¾è¡£æœï¼Œä¹°è¡£æœã€‚ åŒæ ·ä¸€ä¸ªé“ç†ï¼Œä¸€èˆ¬æ¥è¯´æˆ‘ä»¬å¦‚æœè¦ç›‘å¬ä¸€ä¸ªäº‹ä»¶ï¼Œå°±ç›´æ¥addEventListernerã€‚ä½†æˆ‘ä»¬çŸ¥é“åœ¨javascriptä¸­ï¼Œæ·»åŠ åˆ°é¡µé¢ä¸Šçš„äº‹ä»¶å¤„ç†ç¨‹åºæ˜¯ç›´æ¥å½±å“åˆ°æ•´ä¸ªé¡µé¢çš„æ€§èƒ½ã€‚å½“æˆ‘ä»¬æœ‰å¾ˆå¤šäº‹ä»¶è¦ç›‘å¬æ—¶ï¼Œæˆ‘ä»¬ä¸€ä¸ªä¸ªçš„è·å–å…ƒç´ å¹¶ç›‘å¬å°±æ˜¾ç„¶ä¸æ˜¯å¥½çš„æ–¹æ³•å•¦ã€‚å…·ä½“çš„å¼Šç«¯æœ‰ï¼š é¦–å…ˆï¼Œæ¯ä¸ªéƒ½æ˜¯å¯¹è±¡ï¼Œéƒ½ä¼šå ç”¨å†…å­˜ï¼›å†…å­˜ä¸­çš„å¯¹è±¡è¶Šå¤šï¼Œæ€§èƒ½å°±è¶Šå·®ã€‚å…¶æ¬¡ï¼Œå¿…é¡»äº‹å…ˆæŒ‡å®šæ‰€æœ‰äº‹ä»¶å¤„ç†ç¨‹åºè€Œå¯¼è‡´DOMè®¿é—®æ¬¡æ•°ï¼Œä¼šå»¶è¿Ÿæ•´ä¸ªé¡µé¢çš„äº¤äº’å°±ç»ªæ—¶é—´ã€‚ è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±è¦ç”¨åˆ°javascriptäº‹ä»¶å§”æ‰˜ã€‚ å…ˆä¸¾ä¸ªäº‹ä»¶å§”æ‰˜çš„ä¾‹å­123456&lt;ul id=\"parent\"&gt; &lt;li id=\"1\"&gt;trigger event1&lt;/li&gt; &lt;li id=\"2\"&gt;trigger event2&lt;/li&gt; &lt;li id=\"3\"&gt;trigger event3&lt;/li&gt; &lt;li id=\"4\"&gt;trigger event4&lt;/li&gt;&lt;/ul&gt; 12345678910111213141516171819var obj = document.getElementById(\"parent\");obj.addEventListener(\"click\",function(event)&#123; var event = event || window.event; var target = event.target || event.srcElement; if(target &amp;&amp; target.nodeName == \"LI\")&#123; switch(target.id)&#123; case '1': console.log(\"first event\"); break; case '2': console.log(\"second event\"); break; default: console.log(\"fifth event\"); &#125; console.log(event.target.id+\" was triggered\"); &#125;&#125;) æ¯”å¦‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘è¦å¯¹1234ä¸ªulæ·»åŠ äº‹ä»¶ï¼Œä¸€èˆ¬çš„æ–¹æ³•å°±æ˜¯addEventListenerã€‚ä½†æˆ‘ä»¬é€šè¿‡å§”æ‰˜ï¼Œåªå£°æ˜äº†ä¸€ä¸ªå˜é‡objï¼Œåªç”¨äº†ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ã€‚æ–¹æ³•æ˜¯æˆ‘ä»¬ç›‘å¬çˆ¶å…ƒç´ parentã€‚ç”±äºäº‹ä»¶å†’æ³¡æœºåˆ¶ï¼Œå½“parentç›‘å¬çš„äº‹ä»¶å‘ç”Ÿæ˜¯ï¼Œè·å–targetå¯¹è±¡ï¼Œç„¶åå†…éƒ¨å†å¯¹targetè¿›è¡Œå¤„ç†ã€‚ javascriptäº‹ä»¶å§”æ‰˜çš„ä¼˜ç‚¹1ã€documentå¯¹è±¡å¾ˆå¿«å°±å¯ä»¥è®¿é—®ï¼Œè€Œä¸”å¯ä»¥åœ¨é¡µé¢ç”Ÿå‘½å‘¨æœŸçš„ä»»ä½•æ—¶ç‚¹ä¸Šä¸ºå®ƒæ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºï¼ˆæ— éœ€ç­‰å¾…DOMContentLoadedæˆ–loadäº‹ä»¶ï¼‰ã€‚æ¢å¥è¯è¯´ï¼Œåªè¦å¯å•å‡»çš„å…ƒç´ å‘ˆç°åœ¨é¡µé¢ä¸Šï¼Œå°±å¯ä»¥ç«‹å³å…·å¤‡é€‚å½“çš„åŠŸèƒ½ã€‚ 2ã€åœ¨é¡µé¢ä¸­è®¾ç½®äº‹ä»¶å¤„ç†ç¨‹åºæ‰€éœ€çš„æ—¶é—´æ›´å°‘ã€‚åªæ·»åŠ ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºæ‰€éœ€çš„DOMå¼•ç”¨æ›´å°‘ï¼Œæ‰€èŠ±çš„æ—¶é—´ä¹Ÿæ›´å°‘ã€‚ 3ã€æ•´ä¸ªé¡µé¢å ç”¨çš„å†…å­˜ç©ºé—´æ›´å°‘ï¼Œèƒ½å¤Ÿæå‡æ•´ä½“æ€§èƒ½ã€‚ æ€»ç»“äº‹ä»¶å§”æ‰˜ä½¿ç”¨äº‹ä»¶å§”æ‰˜æŠ€æœ¯èƒ½è®©ä½ é¿å…å¯¹ç‰¹å®šçš„æ¯ä¸ªèŠ‚ç‚¹æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ï¼›ç›¸åï¼Œäº‹ä»¶ç›‘å¬å™¨æ˜¯è¢«æ·»åŠ åˆ°å®ƒä»¬çš„çˆ¶å…ƒç´ ä¸Šã€‚äº‹ä»¶ç›‘å¬å™¨ä¼šåˆ†æä»å­å…ƒç´ å†’æ³¡ä¸Šæ¥çš„äº‹ä»¶ï¼Œæ‰¾åˆ°æ˜¯å“ªä¸ªå­å…ƒç´ çš„äº‹ä»¶ï¼Œå¹¶åšç›¸åº”çš„å¤„ç†ã€‚ å›é¡¾äº‹ä»¶å†’æ³¡å’Œäº‹ä»¶æ•è·ï¼ˆjavascriptçš„äº‹ä»¶ä¼ æ’­è¿‡ç¨‹ï¼‰Netscapeå®šä¹‰äº†ä¸€ç§å«åšäº‹ä»¶æ•è·çš„å¤„ç†æ–¹æ³•ï¼Œäº‹ä»¶é¦–å…ˆå‘ç”Ÿåœ¨ DOMæ ‘çš„æœ€é«˜å±‚å¯¹è±¡(document)ç„¶åå¾€æœ€æ·±å±‚çš„å…ƒç´ ä¼ æ’­ã€‚å¦‚ï¼šäº‹ä»¶æ•è·é¦–å…ˆå‘ç”Ÿåœ¨documentä¸Šï¼Œç„¶åæ˜¯htmlå…ƒç´ ï¼Œbodyå…ƒ ç´ ï¼Œæœ€åæ˜¯buttonå…ƒç´ ã€‚ IEçš„å¤„ç†æ–¹æ³•æ­£å¥½ç›¸åã€‚ä»–ä»¬å®šä¹‰äº†ä¸€ç§å«äº‹ä»¶å†’æ³¡çš„æ–¹æ³•ã€‚äº‹ä»¶å†’æ³¡è®¤ä¸ºäº‹ä»¶ä¿ƒå‘çš„æœ€æ·±å±‚å…ƒç´ é¦–å…ˆæ¥æ”¶äº‹ä»¶ã€‚ç„¶åæ˜¯å®ƒçš„çˆ¶å…ƒç´ ï¼Œä¾æ¬¡å‘ä¸Šï¼ŒçŸ¥é“ documentå¯¹è±¡æœ€ç»ˆæ¥æ”¶åˆ°äº‹ä»¶ã€‚å°½ç®¡ç›¸å¯¹äºhtmlå…ƒç´ æ¥è¯´ï¼Œdocumentæ²¡æœ‰ç‹¬ç«‹çš„è§†è§‰è¡¨ç°ï¼Œä»–ä»ç„¶æ˜¯htmlå…ƒç´ çš„çˆ¶å…ƒç´ å¹¶ä¸”äº‹ä»¶èƒ½å†’æ³¡åˆ° documentå…ƒç´ ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"HTML5 Drop and Drag APIå­¦ä¹ ä¸æ•´ç†","slug":"HTML5 Drop-and-Drag-APIå­¦ä¹ ä¸æ•´ç†","date":"2016-03-03T14:20:52.000Z","updated":"2016-12-12T03:00:22.000Z","comments":true,"path":"2016/03/03/HTML5 Drop-and-Drag-APIå­¦ä¹ ä¸æ•´ç†/","link":"","permalink":"http://sevencai.github.io/2016/03/03/HTML5 Drop-and-Drag-APIå­¦ä¹ ä¸æ•´ç†/","excerpt":"","text":"Dropå’ŒDragæ˜¯èƒ½å¤ŸDOMå…ƒç´ æ‹–åŠ¨ä¸é‡Šæ”¾çš„APIã€‚è¿‡å»æˆ‘ä»¬ä¹Ÿæœ‰ä¸€ä¸ªèƒ½å¤Ÿå®ç°æ‹–åŠ¨ä¸é‡Šæ”¾çš„æµç¨‹ã€‚ä»Šå¤©æ€»ç»“ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°æ–°çš„APIæ˜¯ç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤§çš„ä¾¿åˆ©å’Œç®€åŒ–äº†è®¸å¤šä»£ç çš„ã€‚ æ‹–æ‹½çš„æ—§æ–¹æ³•æ€»çš„æ˜¯ä¸‹é¢ä¸‹é¢çš„ä¸‰ä¸ªæµç¨‹ï¼šï¼ˆjsä»¥å‰æ˜¯æ²¡æœ‰ç›´æ¥æ‹–æ‹½çš„æ–¹æ³•çš„ï¼Œæ‰€è°“çš„æ‹–æ‹½ä¹Ÿå°±æ˜¯æŠŠé¼ æ ‡æ‹–æ‹½çš„åç§»å€¼èµ‹å€¼ç»™æ‹–åŠ¨çš„å…ƒç´ ï¼Œè¿™æ ·å°±å¥½åƒå½¢æˆä¸€ä¸ªå‡è±¡ï¼Œæˆ‘æ˜¯å¯ä»¥æ‹–æ‹½çš„ï¼Œå®é™…ä¸Šè¯¥å…ƒç´ å°±æ˜¯æˆ‘ä»¬ç¡¬æ€§è§„å®šä»–çš„æ–°æ–°ä½ç½®çš„ï¼‰ é€šè¿‡mousedownäº‹ä»¶æ•è·DOMå…ƒç´  é€šè¿‡mousemoveäº‹ä»¶æ¥ç§»åŠ¨DOMå…ƒç´  é€šè¿‡mouseupäº‹ä»¶æ¥é‡Šæ”¾DOMå…ƒç´  æˆ‘ä»¬åœ¨æ‹–æ‹½å…ƒç´ æ—¶ï¼Œè¦è®¡ç®—è¯¥å…ƒç´ è·ç¦»æµè§ˆå™¨çš„topå€¼å’Œleftå€¼ï¼Œå½“æˆ‘ä»¬è·å¾—è¿™ä¸ªå€¼åï¼Œæˆ‘ä»¬å†ç›´æ¥ç»™ä»–å®šä½ã€‚è·å¾—è¿™ä¸ªtopå’Œleftéœ€è¦æˆ‘ä»¬è®¡ç®—ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“ç®—å‡ºä¸Šå›¾ä¸­çº¢è‰²çº¿çš„è·ç¦»ï¼Œåˆ©ç”¨e.clientXå’Œe.clientYï¼Œå°±å¯ä»¥è·å¾—ç‚¹å‡»è¯¥å…ƒç´ æ—¶ï¼Œè¯¥ç‚¹çš„ä½ç½®ï¼Œç„¶åæˆ‘ä»¬å†ç®—å‡ºè¯¥å…ƒç´ è·ç¦»é¡¶éƒ¨å’Œåº•éƒ¨çš„è·ç¦»ï¼Œç›¸å‡å°±å¯ä»¥å¾—åˆ°é¼ æ ‡è·ç¦»è¯¥æ‹–åŠ¨å¯¹è±¡çš„è·ç¦»ã€‚ å…·ä½“ä»£ç å¦‚ä¸‹ï¼šå…ˆå®šä¹‰ä¸€ä¸ªå¯æ‹–åŠ¨å¯¹è±¡ï¼Œå¹¶ç»™å…¶çˆ¶æ¡†åŠ å…¥å¯¹åº”çš„æ ·å¼ï¼ˆåšå®Œä»¥åå¯ä»¥è¯•è¯•å¦‚æœmainçš„absoluteå»æ‰ä¼šæ€ä¹ˆæ ·ï¼‰ï¼š123456789101112//CSS.main&#123; position:absolute; overflow:hidden; width:500px; height:500px; border:1px solid red;&#125;//DOM&lt;div class=\"main\"&gt; &lt;img src=\"./face.png\" alt=\"drag\" id=\"item\"&gt;&lt;/div&gt; ä¸‹é¢æ˜¯jsä»£ç ï¼Œå¯¹åº”è§£é‡Šä»¥ä¸‹å‡ ç‚¹ï¼š ä¸¤ä¸ªå¯¹è±¡dragObjæ˜¯æ‹–åŠ¨å¯¹è±¡ï¼ŒmouseOffsetæ˜¯é¼ æ ‡è·ç¦»å¯¹è±¡çš„åç§»é‡ã€‚ è¦ç»™documentåŠ å…¥onmousemoveäº‹ä»¶ï¼Œè€Œä¸æ˜¯ç»™å¯¹åº”çš„obj,å¦åˆ™ä¼šé¡µé¢æŠ–åŠ¨ã€‚ mouseupæ˜¯ç”¨æ¥é‡Šæ”¾å¯¹è±¡ï¼Œç”¨æ¥ç»“æŸæ‹–åŠ¨ï¼Œè®¾ç½®æ‹–åŠ¨å¯¹è±¡ä¸ºç©ºã€‚ è®¾ç½®mousePointå¯¹è±¡æ˜¯ä¸ºäº†ä½¿ç”¨çš„æ—¶å€™æ›´åŠ æ–¹ä¾¿ã€‚ç›´æ¥ä»¥å¯¹è±¡å±æ€§çš„å½¢å¼è®¿é—®ã€‚ getMousePosæ˜¯ç”¨æ¥è·å¾—é¼ æ ‡åç§»é‡çš„ã€‚ mousemoveç”¨æ¥è®¡ç®—ä½ç½®å¹¶å®šä½ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354var dragObj = null;var mouseOffset = null;document.onmousemove = mousemove;document.onmouseup = mouseup;function mouseup (e)&#123; dragObj = null;&#125; function mousePoint (x,y)&#123; this.x = x; this.y = y;&#125;function getMousePos (e) &#123; var x = parseInt(e.clientX); var y = parseInt(e.clientY); return new mousePoint(x,y);&#125;function getMouseOffset(target,e)&#123; e = e || window.event; var mousePos = getMousePos(e); var x = mousePos.x - target.offsetLeft; var y = mousePos.y - target.offsetTop; return new mousePoint(x,y);&#125;function mousemove (e)&#123; if(!dragObj)&#123; return; &#125; e = e || window.event; var mousePos = getMousePos(e); if(dragObj)&#123; console.log(\"entermousemove\"); dragObj.style.position = \"absolute\"; dragObj.style.left = mousePos.x - mouseOffset.x + \"px\"; dragObj.style.top = mousePos.y - mouseOffset.y + \"px\"; return false; &#125; &#125; function startdrag (item)&#123; if(item)&#123; item = document.getElementById(item); item.onmousedown = function(e)&#123; dragObj = this; mouseOffset = getMouseOffset(this,e); return false; &#125; &#125;&#125;window.onload = startdrag('item'); æ–°æ–¹æ³•çš„æ‹–æ‹½ ä¸Šé¢çš„è¿™ç§æ–¹æ³•ä»£ç æ¯”è¾ƒå¤æ‚ï¼Œæ–°çš„API,é€šè¿‡dragstartå’Œdropç­‰æ·»åŠ é«˜åº¦æŠ½è±¡çš„äº‹ä»¶ã€‚å°±èƒ½å¤Ÿå®ç°æ›´ä¸ºç›´è§‚çš„æ‹–åŠ¨ä¸é‡Šæ”¾æ“ä½œã€‚åŒæ—¶ï¼Œç”±äºæ‹–åŠ¨è¿‡ç¨‹ä¸­åŸºæœ¬çš„æ˜¾ç¤ºæ›´æ–°å¤„ç†ä¹Ÿéƒ½æ˜¯æ•™ç»™æµè§ˆå™¨å¤„ç†ï¼Œæˆ‘ä»¬å¼€å‘äººå‘˜å°±å¯ä»¥å°†ç²¾åŠ›é›†ä¸­äºç¨‹åºã€‚ ä¸ºä»€ä¹ˆå·²ç»æœ‰å¾ˆä¸°å¯Œçš„æ‹–æ‹½åº“äº†ï¼Œæˆ‘ä»¬è¿˜è¦ç”¨Drag Drop APIå‘¢å› ä¸ºåœ¨è¿™äº›APIä¸­æœ‰ä¸€ä¸ªå«åšDataTransferçš„APIã€‚å®ƒç”¨æ¥ç»™æ‹–åŠ¨æ“ä½œä¸­çš„æ•°æ®æ¥æ”¶ä¸ä¼ é€’æä¾›æ”¯æŒã€‚å®ƒå¹¶æœªé™å®šæ•°æ®çš„å‘é€æ–¹å’Œæ•°æ®çš„æ¥æ”¶æ–¹é™å®šåœ¨ä¸€ä¸ªçª—å£ã€‚æ¯”å¦‚ï¼šå¯ä»¥è®²æ¡Œé¢ä¸Šçš„æ–‡ä»¶æ‹–æ‹½åˆ°æµè§ˆå™¨ï¼Œè®²DOMå…ƒç´ æ‹–æ‹½åˆ°æ–‡æœ¬ç¼–è¾‘å™¨ã€‚è¿™ä¸ªå®ƒæ¶ˆé™¤äº†webåº”ç”¨ç¨‹åºä¸åŸç”Ÿçš„åº”ç”¨çš„ç•Œé™ã€‚ å…ˆç…®ä¸ªä¾‹å­12&lt;div id=\"dragElement\" class=\"element\" draggable=\"true\"&gt; drag me &lt;/div&gt;&lt;div id=\"dropElement\" class=\"element\"&gt; drop here &lt;/div&gt; 12345678910111213141516171819202122var dragElement = document.getElementById(\"dragElement\");var dropElement = document.getElementById(\"dropElement\");dragElement.ondragstart = function(e)&#123; e.dataTransfer.setData(\"text/plain\",e.target.textContent);&#125;dropElement.ondragover = function(e)&#123; //zhe if(e.dataTransfer.types == \"text/plain\")&#123; //å–æ¶ˆæµè§ˆå™¨é»˜è®¤æ“ä½œï¼ˆæµè§ˆå™¨é»˜è®¤æ“ä½œæ—¶å°†dropäº‹ä»¶å–æ¶ˆï¼Œæ‰€ä»¥è¿™é‡Œå¿…é¡»å–æ¶ˆé»˜è®¤æ“ä½œï¼‰ e.preventDefault(); &#125;&#125;dropElement.ondrop = function(e)&#123; //å–æ¶ˆæµè§ˆå™¨é»˜è®¤æ“ä½œ e.preventDefault(); //è·å–æ‰€æ‹–åŠ¨æ—¶è®¾ç½®çš„æ•°æ® var dragData = e.dataTransfer.getData('text/plain'); console.log(dragData);&#125; åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬å°±è·å¾—äº†dragé‡Œé¢çš„å€¼å¹¶ä¸”è¾“å‡ºåˆ°äº†æ§åˆ¶å°ã€‚è¿™ä¸ªæ•°æ®å‘é€æ–¹ä¹Ÿå°±æ˜¯æ‹–åŠ¨çš„å…ƒç´ ä¸æ¥æ”¶æ–¹ä¹Ÿå°±æ˜¯é‡Šæ”¾çš„åŒºåŸŸæ˜¯ä¸€ç§æ¾è€¦åˆçš„å…³ç³»ã€‚é€šè¿‡å¯¹è¿™ä¸¤ä¸ªåŒºåŸŸåˆ†åˆ«å®ç°ä½ æƒ³è¦çš„äº‹ä»¶å¤„ç†ç¨‹åºå°±èƒ½å¤Ÿå®Œæˆæ“ä½œã€‚ ä¸‹é¢æ˜¯å…·ä½“çš„è®²è§£ä¸Šé¢æˆ‘ä»¬ä¹Ÿçœ‹åˆ°äº†ç»™dragè®¾ç½®äº†draggable=trueï¼Œè¦è®©ç‰¹å®šçš„å…ƒç´ æ”¯æŒè¢«æ‹–åŠ¨ï¼Œéœ€è¦å°†å…ƒç´ è®¾ç½®ä¸ºtrue,å½“ç„¶å¦‚æœè¯¥å…ƒç´ å¦‚img,aæœ¬æ¥é»˜è®¤å°±å¯ä»¥æ‹–åŠ¨ï¼Œå°±ä¸ç”¨å†™äº†ã€‚å…¶ä»–çš„å€¼è¿˜å¯ä»¥è®¾ç½®æˆfalse,autoã€‚ ä¸‹é¢æ˜¯è®¾å®šæ‹–åŠ¨åŒºåŸŸä¸è®¾é˜²åŒºåŸŸçš„äº‹ä»¶å¤„ç†ç¨‹åºçš„API èƒ½å¤Ÿæ‹–åŠ¨å…ƒç´ çš„äº‹ä»¶å¤„ç†ç¨‹åºdragstart åœ¨æ‹–åŠ¨æ“ä½œæ—¶è¢«è§¦å‘ drag åœ¨æ‹–åŠ¨æ“ä½œä¸­è¢«**å®šæœŸ**è§¦å‘ dragend åœ¨æ‹–åŠ¨æ“ä½œç»“æŸæ—¶è¢«è§¦å‘ èƒ½å¤Ÿè®¾å®šé‡Šæ”¾åŒºåŸŸçš„äº‹ä»¶å¤„ç†ç¨‹åºdragenter æ‹–åŠ¨æ“ä½œä¸­ï¼Œè¿›å…¥DOMå…ƒç´ çš„é¢†åŸŸæ—¶è¢«è§¦å‘ dragover æ‹–åŠ¨æ“ä½œä¸­ï¼Œå¤„äºDOMå…ƒç´ çš„é¢†åŸŸå†…è¢«å®šæ—¶è§¦å‘ dragleave æ‹–åŠ¨æ“ä½œä¸­ï¼Œç¦»å¼€DOMå…ƒç´ é¢†åŸŸæ—¶è§¦å‘ drop åœ¨DOMå…ƒç´ ä¸Šé‡Šæ”¾æ—¶è§¦å‘ å…³äºDataTransferå®ƒçš„åŠŸèƒ½æœ‰ï¼š æ•°æ®çš„æ¥æ”¶ æ•°æ®å¤„ç†æ–¹å¼çš„æŒ‡å®š æ‹–åŠ¨å›¾åƒçš„è®¾å®š ä¸‹é¢æ˜¯å…·ä½“çš„å±æ€§å’Œæ–¹æ³•æ¦‚è§ˆï¼š setData(format,data) ä»¥formatæ‰€æŒ‡å®šçš„æ ¼å¼æ·»åŠ æ•°æ®ï¼ˆåªåœ¨dragstartä¸­æœ‰æ•ˆï¼‰ getData(format) ä»¥formatæ‰€æŒ‡å®šçš„æ ¼å¼è·å–æ•°æ®ï¼ˆåªåœ¨dropäº‹ä»¶ä¸­æœ‰æ•ˆï¼‰ clearData([format]) ä»¥formatæ‰€æŒ‡å®šçš„æ ¼å¼æ¸…é™¤æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šformat,åˆ™æ¸…é™¤æ‰€æœ‰æ•°æ® typeså±æ€§ åŒ…å«æ­£åœ¨æ‹–åŠ¨æ•°æ®çš„formatçš„æ•°ç»„ fileså±æ€§ åŒ…å«æ­£åœ¨æ‹–åŠ¨æ–‡ä»¶çš„Fileå¯¹è±¡æ•°ç»„ setDragImage(element,x,y) è®¾å®šæ‹–åŠ¨çš„å›¾åƒï¼ˆåœ¨dragstartä¸­æœ‰æ•ˆï¼‰ adddElement(element) è®¾å®šæ‹–åŠ¨çš„å›¾åƒï¼ˆåœ¨dragstartä¸­æœ‰æ•ˆï¼‰ effectAllowed è®¾å®šå…è®¸ç”¨äºæ‹–åŠ¨æ“ä½œçš„ç›®æ ‡æ•ˆæœã€‚é€šå¸¸ä¼šåœ¨dragstartäº‹ä»¶ä¸­è®¾å®š dropEffect è®¾å®šæ“ä½œçš„ç›®æ ‡çš„æ•ˆæœï¼Œæˆ–ç”±ç”¨æˆ·é€‰æ‹©çš„æ•ˆæœã€‚ç³»ç»Ÿä¼šåœ¨copy,move,link,noneä¸­é€‰æ‹©ã€‚å¹¶æ ¹æ®é™¢ä¸­çš„æ•ˆæœæ˜¾ç¤ºç›¸åº”çš„æ‹–åŠ¨å¯¹è±¡ã€‚ ä¸Šé¢setDragImageå’ŒaddElementçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼ŸåŒºåˆ«åœ¨äºæ‹–åŠ¨å›¾åƒçš„æ˜¾ç¤ºä½ç½®ä¸åŒã€‚setDragImageä»¥æ‹–åŠ¨å›¾åƒçš„å·¦ä¸Šè§’ä¸ºæ‹–åŠ¨ä½ç½®ï¼Œå¹¶å¯ä»¥é€šè¿‡x,yåæ ‡æ¥è°ƒæ•´ä½ç½®ã€‚è€ŒaddElementåˆ™å°†æ•´ä¸ªå®¹å™¨ä½œä¸ºæ‹–åŠ¨å¯¹è±¡ã€‚12345&lt;div id=\"container\" draggable=\"true\"&gt; &lt;div id=\"dragElement\" draggable=\"true\"&gt; &lt;/div&gt;&lt;/div&gt; 123456var dragObj = document.getElementById(\"dragElement\"), container = document.getElementById(\"container\");dragObj.ondragstart = function(event)&#123; event.dataTransfer.addElement(container);&#125; å…³äºæ–‡ä»¶çš„drag-inâ€“drag-outæˆ‘ä»¬å…ˆå‰æåˆ°äº†é€šè¿‡DataTransferçš„ä¸€äº›ä¼˜ç‚¹ï¼Œæ•°æ®çš„å‘é€æ–¹å’Œæ•°æ®çš„æ¥å—æ–¹å¹¶æœªé™å®šäºåŒä¸€ä¸ªçª—å£ã€‚æ¯”å¦‚dataTransferçš„fileså±æ€§ä»¥é€šè¿‡æ‹–åŠ¨æ“ä½œæ¥è·å–æ¡Œé¢çš„ç¨‹åºçš„æ–‡ä»¶ã€‚å°½ç®¡è¦è·å–çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚æˆ‘ä»¬åªéœ€è¦ç°åœ¨é‡Šæ”¾åŒºåŸŸçš„dragoverä¸­æ‰§è¡ŒpreventDefaultæ—¢å¯ä»¥ã€‚ ç¬¬ä¸€ä¸ªä¾‹å­ï¼ˆfiles.lengthï¼‰123&lt;div id=\"drop\"&gt; drop here&lt;/div&gt; è·å¾—é‡Šæ”¾åŒºåï¼Œç›‘å¬é‡Šæ”¾æ“ä½œå¹¶åšå¤„ç†ã€‚12345678910111213141516var elem = document.getElementById(\"drop\");elem.ondragover = function(e)&#123; e.preventDefault();&#125;elem.ondrop = function(e)&#123; //é€šè¿‡files.lengthæ¥åˆ¤åˆ«æ˜¯å¦æ‹–åŠ¨äº†å¯¹è±¡ //ä¹Ÿå°±æ˜¯è¯´ä¸€æ¬¡å¯ä»¥æ‹–åŠ¨å¤šä¸ªæ–‡ä»¶(Fileå¯¹è±¡) if(e.dataTransfer.files.length)&#123; alert(\"ä½ æ‹–åŠ¨äº†æ–‡ä»¶\"); var file = e.dataTransfer.files[0]; console.log(file); &#125; event.preventDefault();&#125; ç¬¬äºŒä¸ªä¾‹å­å°†æ–‡ä»¶ä¿å­˜è‡³æ¡Œé¢å¯ä»¥é€šè¿‡æ‹–åŠ¨æ“ä½œæ¥æŠŠæ–‡ä»¶ä»æµè§ˆå™¨ä¸­ä¿å­˜è‡³æ¡Œé¢å‡åºçš„æ–¹æ³•ã€‚å¯ä»¥æŒ‰ç…§ä¸‹åˆ—çš„æ ¼å¼ï¼Œå°†æ•°æ®è®¾ç½®äºdataTransfer,ä»¥å®ç°é€šè¿‡æ‹–åŠ¨æ“ä½œè®²æ–‡ä»¶ä»æµè§ˆå™¨ä¿å­˜è‡³æ¡Œé¢ç¨‹åºã€‚1event.dataTransfer.setData(\"DownloadURL\",\"MIMETYPE:æ–‡ä»¶å:æ–‡ä»¶URL\"); é€šè¿‡è¿™ä¸ªåŠŸèƒ½ï¼Œå°±èƒ½å¤Ÿå®ç°ä¸åŸå£°åº”ç”¨ä¹‹é—´çš„åŒå‘æ–‡ä»¶æ”¶å‘ã€‚ä½¿æ¡Œé¢ç¯å¢ƒä¸­è¿è¡Œçš„Webåº”ç”¨ç¨‹åºçš„å®ç”¨æ€§å¾—åˆ°äº†é£è·ƒæ€§çš„æé«˜ã€‚ä¸‹é¢çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶ä¸‹è½½çš„å®ä¾‹ã€‚ 12&lt;a href=\"http://www.example.com/foo.mp3\" data-downloadurl=\"audio/mpeg:foo.mp3:http://example.com/foo.mp3\" class=\"dragObj\" draggable=\"true\"&gt;download mp3&lt;/a&gt;&lt;a href=\"http://www.example.com/bar.pdf\" data-downloadurl=\"application/pdf:bar.pdf:http://example.com/bar.pdf\"&gt;download pdf&lt;/a&gt; å…ˆåˆ©ç”¨querySelectorAllæ¥è·å¾—æ‰€æœ‰çš„dragå¯¹è±¡ã€‚ç„¶åç›‘å¬dragstartäº‹ä»¶ã€‚ç„¶åsetDataä¸‹è½½ã€‚ 123456var files = document.querySelectorAll(\".dragObj\");for(var i=0;i&lt;files.length;i++)&#123; file.addEventListener(\"dragstart\",function(e)&#123; e.dataTransfer.setData(\"DownloadURL\",this.dataset.downloadurl); &#125;,false);&#125;","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"æˆ‘ç†è§£çš„TCPçš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡åˆ†æ‰‹","slug":"æˆ‘ç†è§£çš„TCPçš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡åˆ†æ‰‹","date":"2016-03-03T14:12:54.000Z","updated":"2016-12-12T02:53:56.000Z","comments":true,"path":"2016/03/03/æˆ‘ç†è§£çš„TCPçš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡åˆ†æ‰‹/","link":"","permalink":"http://sevencai.github.io/2016/03/03/æˆ‘ç†è§£çš„TCPçš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡åˆ†æ‰‹/","excerpt":"","text":"è¿™å­¦æœŸå°±å¼€å§‹å­¦ç½‘ç»œå•¦ï¼Œä¸‹ä¸‹ä¸ªæ˜ŸæœŸå°±å¼€è¯¾ã€‚çœ‹çœ‹æˆ‘ç†è§£çš„TCP/IPçš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ã€‚é¡ºä¾¿ä¹Ÿæ€»ç»“äº†ä¸€ä¸‹å½“ç”¨æˆ·è¾“å…¥ç½‘å€çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆã€‚ä»¥åŠå…³äºHTTPçš„ä¸€äº›åŸºæœ¬çŸ¥è¯†ã€‚ é¦–å…ˆæˆ‘çš„ç†è§£ï¼šä¸‰æ¬¡æ¡æ‰‹ï¼š å®¢æˆ·ç«¯é¦–å…ˆè¯·æ±‚è¯´æˆ‘è¦è¯·æ±‚ä½ çš„æœåŠ¡å™¨ä¸Šçš„èµ„æºã€‚ æœåŠ¡å™¨è¯´å¥½æˆ‘çŸ¥é“å•¦ã€‚ è¿™æ—¶å€™å®¢æˆ·ç«¯æ”¶åˆ°äº†æœåŠ¡å™¨çš„å“åº”åˆå¯¹æœåŠ¡å™¨è¯´æˆ‘æ”¶åˆ°å•¦ï¼Œè°¢è°¢ã€‚ æ­¤æ—¶å»ºç«‹è¿æ¥ï¼Œå¯ä»¥å¼€å§‹ä¼ é€æ•°æ®äº†ï¼Œè¿™å°±æ˜¯ä¸‰æ¬¡æ¡æ‰‹ã€‚ å››æ¬¡æŒ¥æ‰‹ï¼šå¯ä»¥æ˜¯æœåŠ¡å™¨å…ˆè¯´åˆ†æ‰‹æˆ–è€…æ˜¯å®¢æˆ·ç«¯ã€‚æ¯”å¦‚å®¢æˆ·ç«¯è¯´ï¼š æˆ‘è¿™é‡Œæ²¡æœ‰è¯·æ±‚äº†ï¼Œä½ å¯ä»¥ç­‰æŠŠä½ çš„ä¸œè¥¿å‘å®Œå’±ä»¬å°±åˆ†æ‰‹ã€‚ æœåŠ¡æ”¶åˆ°æ¶ˆæ¯åè¯´ï¼Œå¥½çš„ï¼Œæˆ‘æŠŠæ‰‹è¾¹çš„ä¸œè¥¿å‘å®Œå’±ä»¬å°±åˆ†æ‰‹å“ˆã€‚ ç­‰æœåŠ¡å™¨å‘å®Œæ‰‹è¾¹çš„ä¸œè¥¿è·Ÿå®¢æˆ·ç«¯è¯´ï¼šæˆ‘å‘å®Œäº†ï¼Œå¯ä»¥åˆ†æ‰‹äº†ã€‚ è¿™æ—¶å€™å®¢æˆ·ç«¯æ”¶åˆ°è¯´ï¼šå¥½å“’ï¼Œæ”¶åˆ°ï¼Œå’±ä»¬åˆ†æ‰‹å§ã€‚ã€‚ã€‚ã€‚ è‡³æ­¤ä¸ºæ­¢å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„é“¾æ¥å°±æ–­å¼€äº†ã€‚ å½“ç„¶ä¸èƒ½åƒæˆ‘ç†è§£çš„ç®€å•ä¸‰æ¬¡æ¡æ‰‹OSIå‚è€ƒæ¨¡å‹ä¸­çš„ç½‘ç»œå±‚ï¼Œåœ¨TCP/IPåè®®ä¸­ï¼ŒTCPåè®®æä¾›å¯é çš„è¿æ¥æœåŠ¡ï¼Œé‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹ä¸€ä¸ªè¿æ¥ã€‚ ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå»ºç«‹è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯å‘é€synåŒ…(syn=j)åˆ°æœåŠ¡å™¨ï¼Œå¹¶è¿›å…¥SYN_SENDçŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤ï¼› ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°synåŒ…ï¼Œå¿…é¡»ç¡®è®¤å®¢æˆ·çš„synï¼ˆack=j+1ï¼‰ï¼ŒåŒæ—¶è‡ªå·±ä¹Ÿå‘é€ä¸€ä¸ªSYNåŒ…ï¼ˆsyn=kï¼‰ï¼Œå³SYN+ACKåŒ…ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥SYN_RECVçŠ¶æ€ï¼› ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„SYN+ACKåŒ…ï¼Œå‘æœåŠ¡å™¨å‘é€ç¡®è®¤åŒ…ACK(ack=k+1)ï¼Œæ­¤åŒ…å‘é€å®Œæ¯•ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ã€‚ å®Œæˆä¸‰æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å¼€å§‹ä¼ é€æ•°æ®ï¼Œåœ¨ä¸Šè¿°è¿‡ç¨‹ä¸­ï¼Œè¿˜æœ‰ä¸€äº›é‡è¦çš„æ¦‚å¿µï¼š æœªè¿æ¥é˜Ÿåˆ—ï¼šåœ¨ä¸‰æ¬¡æ¡æ‰‹åè®®ä¸­ï¼ŒæœåŠ¡å™¨ç»´æŠ¤ä¸€ä¸ªæœªè¿æ¥é˜Ÿåˆ—ï¼Œè¯¥é˜Ÿåˆ—ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯çš„SYNåŒ…ï¼ˆsyn=jï¼‰å¼€è®¾ä¸€ä¸ªæ¡ç›®ï¼Œè¯¥æ¡ç›®è¡¨æ˜æœåŠ¡å™¨å·²æ”¶åˆ°SYNåŒ…ï¼Œå¹¶å‘å®¢æˆ·å‘å‡ºç¡®è®¤ï¼Œæ­£åœ¨ç­‰å¾…å®¢æˆ·çš„ç¡®è®¤åŒ…ã€‚è¿™äº›æ¡ç›®æ‰€æ ‡è¯†çš„è¿æ¥åœ¨æœåŠ¡å™¨å¤„äºSyn_RECVçŠ¶æ€ï¼Œå½“æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·çš„ç¡®è®¤åŒ…æ—¶ï¼Œåˆ é™¤è¯¥æ¡ç›®ï¼ŒæœåŠ¡å™¨è¿›å…¥ESTABLISHEDçŠ¶æ€ã€‚ SYN-ACK é‡ä¼ æ¬¡æ•°ï¼šæœåŠ¡å™¨å‘é€å®ŒSYNï¼ACKåŒ…ï¼Œå¦‚æœæœªæ”¶åˆ°å®¢æˆ·ç¡®è®¤åŒ…ï¼ŒæœåŠ¡å™¨è¿›è¡Œé¦–æ¬¡é‡ä¼ ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´ä»æœªæ”¶åˆ°å®¢æˆ·ç¡®è®¤åŒ…ï¼Œè¿›è¡Œç¬¬äºŒæ¬¡é‡ä¼ ï¼Œå¦‚æœé‡ä¼ æ¬¡æ•°è¶… è¿‡ç³»ç»Ÿè§„å®šçš„æœ€å¤§é‡ä¼ æ¬¡æ•°ï¼Œç³»ç»Ÿå°†è¯¥è¿æ¥ä¿¡æ¯ä»åŠè¿æ¥é˜Ÿåˆ—ä¸­åˆ é™¤ã€‚æ³¨æ„ï¼Œæ¯æ¬¡é‡ä¼ ç­‰å¾…çš„æ—¶é—´ä¸ä¸€å®šç›¸åŒã€‚ åŠè¿æ¥å­˜æ´»æ—¶é—´ï¼šæ˜¯æŒ‡åŠè¿æ¥é˜Ÿåˆ—çš„æ¡ç›®å­˜æ´»çš„æœ€é•¿æ—¶é—´ï¼Œä¹Ÿå³æœåŠ¡ä»æ”¶åˆ°SYNåŒ…åˆ°ç¡®è®¤è¿™ä¸ªæŠ¥æ–‡æ— æ•ˆçš„æœ€é•¿æ—¶é—´ï¼Œè¯¥æ—¶é—´å€¼æ˜¯æ‰€æœ‰é‡ä¼ è¯·æ±‚åŒ…çš„æœ€é•¿ç­‰å¾…æ—¶é—´æ€»å’Œã€‚æœ‰æ—¶æˆ‘ä»¬ä¹Ÿç§°åŠè¿æ¥å­˜æ´»æ—¶é—´ä¸ºTimeoutæ—¶é—´ã€SYN_RECVå­˜æ´»æ—¶é—´ã€‚ å››æ¬¡æŒ¥æ‰‹ ç”±äºTCPè¿æ¥æ˜¯å…¨åŒå·¥çš„ï¼Œå› æ­¤æ¯ä¸ªæ–¹å‘éƒ½å¿…é¡»å•ç‹¬è¿›è¡Œå…³é—­ã€‚è¿™ä¸ªåŸåˆ™æ˜¯ å½“ä¸€æ–¹å®Œæˆå®ƒçš„æ•°æ®å‘é€ä»»åŠ¡åå°±èƒ½å‘é€ä¸€ä¸ªFINæ¥ç»ˆæ­¢è¿™ä¸ªæ–¹å‘çš„è¿æ¥ã€‚æ”¶åˆ°ä¸€ä¸ª FINåªæ„å‘³ç€è¿™ä¸€æ–¹å‘ä¸Šæ²¡æœ‰æ•°æ®æµåŠ¨ï¼Œä¸€ä¸ªTCPè¿æ¥åœ¨æ”¶åˆ°ä¸€ä¸ªFINåä»èƒ½å‘é€æ•°æ®ã€‚é¦–å…ˆè¿›è¡Œå…³é—­çš„ä¸€æ–¹å°†æ‰§è¡Œä¸»åŠ¨å…³é—­ï¼Œè€Œå¦ä¸€æ–¹æ‰§è¡Œè¢«åŠ¨å…³é—­ã€‚ å®¢æˆ·ç«¯Aå‘é€ä¸€ä¸ªFINï¼Œç”¨æ¥å…³é—­å®¢æˆ·Aåˆ°æœåŠ¡å™¨Bçš„æ•°æ®ä¼ é€ã€‚ æœåŠ¡å™¨Bæ”¶åˆ°è¿™ä¸ªFINï¼Œå®ƒå‘å›ä¸€ä¸ªACKï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°çš„åºå·åŠ 1ã€‚å’ŒSYNä¸€æ ·ï¼Œä¸€ä¸ªFINå°†å ç”¨ä¸€ä¸ªåºå·ã€‚ æœåŠ¡å™¨Bå…³é—­ä¸å®¢æˆ·ç«¯Açš„è¿æ¥ï¼Œå‘é€ä¸€ä¸ªFINç»™å®¢æˆ·ç«¯Aã€‚ å®¢æˆ·ç«¯Aå‘å›ACKæŠ¥æ–‡ç¡®è®¤ï¼Œå¹¶å°†ç¡®è®¤åºå·è®¾ç½®ä¸ºæ”¶åˆ°åºå·åŠ 1ã€‚ TCPé‡‡ç”¨å››æ¬¡æŒ¥æ‰‹å…³é—­è¿æ¥å¦‚å›¾æ‰€ç¤ºä¸ºä»€ä¹ˆå»ºç«‹è¿æ¥åè®®æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œè€Œå…³é—­è¿æ¥å´æ˜¯å››æ¬¡æ¡æ‰‹å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºæœåŠ¡ç«¯çš„LISTENçŠ¶æ€ä¸‹çš„SOCKETå½“æ”¶åˆ°SYNæŠ¥æ–‡çš„å»º è¿è¯·æ±‚åï¼Œå®ƒå¯ä»¥æŠŠACKå’ŒSYNï¼ˆACKèµ·åº”ç­”ä½œç”¨ï¼Œè€ŒSYNèµ·åŒæ­¥ä½œç”¨ï¼‰æ”¾åœ¨ä¸€ä¸ªæŠ¥æ–‡é‡Œæ¥å‘é€ã€‚ä½†å…³é—­è¿æ¥æ—¶ï¼Œå½“æ”¶åˆ°å¯¹æ–¹çš„FINæŠ¥æ–‡é€šçŸ¥æ—¶ï¼Œå®ƒä»…ä»… è¡¨ç¤ºå¯¹æ–¹æ²¡æœ‰æ•°æ®å‘é€ç»™ä½ äº†ï¼›ä½†æœªå¿…ä½ æ‰€æœ‰çš„æ•°æ®éƒ½å…¨éƒ¨å‘é€ç»™å¯¹æ–¹äº†ï¼Œæ‰€ä»¥ä½ å¯ä»¥æœªå¿…ä¼šé©¬ä¸Šä¼šå…³é—­SOCKET,ä¹Ÿå³ä½ å¯èƒ½è¿˜éœ€è¦å‘é€ä¸€äº›æ•°æ®ç»™å¯¹æ–¹ä¹‹ åï¼Œå†å‘é€FINæŠ¥æ–‡ç»™å¯¹æ–¹æ¥è¡¨ç¤ºä½ åŒæ„ç°åœ¨å¯ä»¥å…³é—­è¿æ¥äº†ï¼Œæ‰€ä»¥å®ƒè¿™é‡Œçš„ACKæŠ¥æ–‡å’ŒFINæŠ¥æ–‡å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯åˆ†å¼€å‘é€çš„ã€‚ æ„æ€å°±æ˜¯ï¼šå®¢æˆ·ç«¯å‘Šè¯‰æœåŠ¡å™¨æˆ‘æ²¡æœ‰æ•°æ®å‘é€ç»™ä½ äº†ï¼Œä½†ä¸ä»£è¡¨æ­¤æ—¶æœåŠ¡å™¨æ­¤æ—¶å·²ç»æŠŠæ‰€æœ‰çš„æ•°æ®éƒ½å‘é€ç»™å®¢æˆ·ç«¯äº†ï¼Œæ‰€ä»¥éœ€è¦ç­‰åˆ°æœåŠ¡å™¨å‘é€å®Œæ‰€æœ‰çš„æ•°æ®ï¼Œä¸»åŠ¨å‘é€æŠ¥æ–‡å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œæˆ‘è¿™é‡Œçš„æ•°æ®ä¹Ÿå‘é€å®Œäº†ã€‚è¿™ä¸ªæ—¶å€™å®¢æˆ·ç«¯çŸ¥é“äº†æœåŠ¡å™¨ç«¯æ•°æ®å‘é€å®Œäº†ã€‚ä¸¤è¾¹éƒ½æ¸…æ¥šï¼Œå°±å¯ä»¥æ–­å¼€è¿æ¥ã€‚ ä¸ºä»€ä¹ˆè¦è¿›è¡ŒTCPè¿æ¥é¦–å…ˆçœ‹ä¸‹httpçš„ç½‘ç»œå±‚æ¬¡ï¼š åœ¨Internetä¸­æ‰€æœ‰çš„ä¼ è¾“éƒ½æ˜¯é€šè¿‡TCP/IPè¿›è¡Œçš„ã€‚HTTPåè®®ä½œä¸ºTCP/IPæ¨¡å‹ä¸­åº”ç”¨å±‚çš„åè®®ä¹Ÿä¸ä¾‹å¤–ã€‚ HTTPæ˜¯åŸºäºä¼ è¾“å±‚çš„TCPåè®®ï¼Œè€ŒTCPæ˜¯ä¸€ä¸ªç«¯åˆ°ç«¯çš„é¢å‘è¿æ¥çš„åè®®ã€‚æ‰€è°“çš„ç«¯åˆ°ç«¯å¯ä»¥ç†è§£ä¸ºè¿›ç¨‹åˆ°è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚æ‰€ä»¥HTTPåœ¨å¼€å§‹ä¼ è¾“ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦å»ºç«‹TCPè¿æ¥ï¼Œè€ŒTCPè¿æ¥çš„è¿‡ç¨‹ä¹Ÿå°±éœ€è¦ä¸Šé¢æ‰€è°“çš„â€œä¸‰æ¬¡æ¡æ‰‹â€ã€‚ åœ¨TCPä¸‰æ¬¡æ¡æ‰‹ä¹‹åï¼Œå»ºç«‹äº†TCPè¿æ¥ï¼Œæ­¤æ—¶HTTPå°±å¯ä»¥è¿›è¡Œä¼ è¾“äº†ã€‚ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µæ˜¯é¢å‘è¿æ¥ï¼Œæ—¢HTTPåœ¨ä¼ è¾“å®Œæˆä¹‹é—´å¹¶ä¸æ–­å¼€TCPè¿æ¥ã€‚æ¯”å¦‚ä¸€ä¸ªé¡µé¢ä¸€å…±éœ€è¦20ä¸ªhttpè¯·æ±‚ï¼šè¿™ä¸Šé¢20ä¸ªHTTPè¯·æ±‚ï¼Œåªä¾é ä¸€ä¸ªTCPè¿æ¥å°±å¤Ÿäº†ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„æŒä¹…è¿æ¥ã€‚ä¹Ÿæ˜¯æ‰€è°“çš„ä¸€æ¬¡HTTPè¯·æ±‚å®Œæˆã€‚ä¸€ç›´åˆ°æ²¡æœ‰httpè¯·æ±‚ï¼Œå››æ¬¡æŒ¥æ‰‹æ–­å¼€è¿æ¥ã€‚ å»ºç«‹ä¸€æ¬¡httpè¯·æ±‚çš„è¿‡ç¨‹æˆ‘çš„æƒ³æ³•æ˜¯ï¼šå½“ç”¨æˆ·æ¥å—ç”¨æˆ·è¾“å…¥åï¼Œé¦–å…ˆæ•™ç»™DNSè§£æå¯¹åº”çš„IP,å¹¶å‘é€ç»™ç›¸åº”çš„æœåŠ¡å™¨ã€‚ç„¶åå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ”¹ç½‘å€ç½‘é¡µï¼ŒæœåŠ¡å™¨æ”¶åˆ°åï¼Œå‘å®¢æˆ·ç«¯è¿”å›ç½‘é¡µä¿¡æ¯ã€‚æµè§ˆå™¨å¾—åˆ°åæŠŠå¾—åˆ°çš„ç½‘é¡µä»å­—èŠ‚ç¼–ç¨‹ä¸€ä¸ªä¸ªçš„Tokenï¼Œç„¶åæ¸²æŸ“æˆDOM treeã€‚æµè§ˆå™¨æ¸²æŸ“é¡µé¢ï¼Œå¹¶å¼‚æ­¥åŠ è½½ç½‘é¡µä¸­é€šè¿‡å¼‚æ­¥çš„æ–¹å¼åŠ è½½çš„javascript,cssç­‰æ–‡ä»¶èµ„æºã€‚ å½“ç”¨æˆ·è¾“å…¥ç½‘é¡µ URL çš„æ—¶å€™ï¼ŒWebKit è°ƒç”¨å…¶èµ„æºåŠ è½½å™¨åŠ è½½è¯¥ URL å¯¹åº”çš„ç½‘é¡µã€‚ åŠ è½½å™¨ä¾èµ–ç½‘ç»œæ¨¡å—å»ºç«‹è¿æ¥ï¼Œå‘é€è¯·æ±‚å¹¶æ¥æ”¶ç­”å¤ã€‚ WebKit æ¥æ”¶åˆ°å„ç§ç½‘é¡µæˆ–è€…èµ„æºçš„æ•°æ®ï¼Œå…¶ä¸­æŸäº›èµ„æºå¯èƒ½æ˜¯åŒæ­¥æˆ–å¼‚æ­¥è·å–çš„ã€‚ ç½‘é¡µè¢«äº¤ç»™ HTML è§£é‡Šå™¨è½¬å˜æˆä¸€ç³»åˆ—çš„è¯è¯­ï¼ˆTokenï¼‰ã€‚ è§£é‡Šå™¨æ ¹æ®è¯è¯­æ„å»ºèŠ‚ç‚¹ï¼ˆNodeï¼‰ï¼Œå½¢æˆ DOM æ ‘ã€‚ å¦‚æœèŠ‚ç‚¹æ˜¯ JavaScript ä»£ç çš„è¯ï¼Œè°ƒç”¨ JavaScript å¼•æ“è§£é‡Šå¹¶æ‰§è¡Œã€‚ JavaScript ä»£ç å¯èƒ½ä¼šä¿®æ”¹ DOM æ ‘çš„ç»“æ„ å¦‚æœèŠ‚ç‚¹éœ€è¦ä¾èµ–å…¶ä»–èµ„æºï¼Œä¾‹å¦‚å›¾ç‰‡ã€CSSã€è§†é¢‘ç­‰ï¼Œè°ƒç”¨èµ„æºåŠ è½½å™¨æ¥åŠ è½½å®ƒä»¬ï¼Œä½†æ˜¯å®ƒä»¬æ˜¯å¼‚æ­¥çš„ï¼Œä¸ä¼šé˜»ç¢å½“å‰ DOM æ ‘çš„åˆ›å»ºï¼Œç›´åˆ° JavaScript çš„èµ„æºåŠ è½½å¹¶è¢« JavaScript å¼•æ“æ‰§è¡Œåæ‰ç»§ç»­ DOM æ ‘çš„åˆ›å»ºã€‚ ä¸Šé¢å›¾1,2æ¥è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·å‘Šä¹‹ã€‚","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/categories/è®¡ç®—æœºç½‘ç»œ/"}],"tags":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://sevencai.github.io/tags/è®¡ç®—æœºç½‘ç»œ/"}]},{"title":"è§£å†³è·¨æµè§ˆå™¨é—®é¢˜çš„å‡ ä¸ªä»£ç æ®µæ€»ç»“","slug":"è§£å†³è·¨æµè§ˆå™¨é—®é¢˜çš„å‡ ä¸ªä»£ç æ®µæ€»ç»“","date":"2016-03-03T08:02:47.000Z","updated":"2016-12-12T03:02:18.000Z","comments":true,"path":"2016/03/03/è§£å†³è·¨æµè§ˆå™¨é—®é¢˜çš„å‡ ä¸ªä»£ç æ®µæ€»ç»“/","link":"","permalink":"http://sevencai.github.io/2016/03/03/è§£å†³è·¨æµè§ˆå™¨é—®é¢˜çš„å‡ ä¸ªä»£ç æ®µæ€»ç»“/","excerpt":"","text":"Ajaxå¯¹è±¡ï¼šXMLHttpRequestå’ŒIEçš„ActiveXå¯¹è±¡è¿™ä¸¤ç§å¯¹è±¡çš„æ„é€ å‡½æ•°æœ‰ä¸¤ç§ä¸åŒçš„æ ¼å¼ï¼Œä½†å´å…±äº«äº†åŒä¸€ç§åŠŸèƒ½å’Œæ–¹æ³•ã€‚ä¸€æ—¦åˆ›å»ºå®Œåˆå§‹çš„å¯¹è±¡å¹¶å°†å…¶èµ‹å€¼ç»™ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±è§£å†³äº†Ajaxçš„è·¨æµè§ˆå™¨é—®é¢˜ã€‚1234567var xmlhttp = false;if(window.XMLHttpRequest)&#123; xmlhttp = new XMLHttpRequest(); xmlhttp.overrideMimeType('text/xml');&#125;else if(window.ActiveXObject)&#123; xmlhttp = new ActiveXObject();&#125; å®ä¾‹1-Hello Ajaxä¸‹é¢è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªåŸºæœ¬çš„çº§è”çš„ä¾‹å­ï¼Œé¦–å…ˆè·å¾—xmlhttpå¯¹è±¡ï¼ˆè§£å†³è·¨æµè§ˆå™¨é—®é¢˜ï¼‰ï¼Œç„¶åå‘é€ajaxè¯·æ±‚ï¼Œè¿‡ç¨‹å°±æ˜¯open,onreadyStateChange,sendã€‚å½“æœåŠ¡å™¨æ¥æ”¶åˆ°ç›¸åº”æ—¶ï¼Œå°±è¦å¯¹ç›¸åº”è¿›è¡Œå¤„ç†ï¼Œè¿™é‡Œå°±æ˜¯é€šè¿‡XMLHttpRequestçš„å±æ€§ï¼Œstatus=200æ—¶è¡¨ç¤ºæœåŠ¡å™¨é¢çš„çŠ¶æ€ä¸€åˆ‡æ­£å¸¸ï¼ŒreadyState==4çš„æ—¶å€™è¡¨ç¤ºå“åº”åŠ è½½å®Œæ¯•ã€‚æ‰€ä»¥ï¼Œå½“ä¸€ä¸ªåœ¨è¯·æ±‚çš„å°±ç»ªçŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶å°±è°ƒç”¨onreadyStateChangeï¼Œæ¥å¤„ç†ã€‚12345678910111213141516171819202122232425var xmlhttp = false;if(window.XMLHttpRequest)&#123; xmlhttp = new XMLHttpRequest(); xmlhttp.overrideMimeType('text/xml');&#125;else if(window.ActiveXObject)&#123; xmlhttp = new ActiveXObject();&#125;function populateList()&#123; var state = document.forms[0].elements[0].value; var url = \"ajax.php?state=\"+state; xmlhttp.open('GET',url,true); xmlhttp.onreadyStatechange = getCities; xmlhttp.send(null);&#125;function getCities()&#123; var cities = document.getElementById(\"cities\"); if(xmlhttp.readyState == 4 &amp;&amp; xmlhttp.status == 200)&#123; cities.innerHTML = \"&lt;select&gt;\"+xmlhttp.responseText + \"&lt;select&gt;\"; &#125;else&#123; cities.innerHTML = \"Error\"; &#125;&#125;populateList(); Ajaxä¹Ÿæœ‰ç¼ºç‚¹ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ï¼šå¯è®¿é—®æ€§é—®é¢˜ï¼Œç¼ºå°‘æ°¸ä¹…é“¾æ¥é—®é¢˜ï¼Œæµè§ˆå†å²è®°å½•çš„é—®é¢˜ã€‚ å°è¯•è·å–CSSæ ·å¼ä¿¡æ¯ å¦‚æœè¯´å°±è¯¥styleæ ·å¼æ¯”è¾ƒç®€å•ï¼Œæˆ–è€…styleå±æ€§å°±æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚å¦‚æœæ²¡æœ‰é€šè¿‡Javascripç›´æ¥è®¾ç½®å±æ€§ï¼Œæˆ–è€…åœ¨å…ƒç´ ä¸­ä½¿ç”¨å†…è”çš„styleå±æ€§ï¼Œå³ä½¿é€šè¿‡æ ·å¼è¡¨æ¥è®¾ç½®styleå€¼ï¼Œstyleçš„å±æ€§çš„å€¼ä¹Ÿéƒ½æ˜¯undefinedã€‚è®°ä½è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œå› ä¸ºåœ¨ä½¿ç”¨DHTMLï¼ˆåŠ¨æ€æ„å»ºç½‘é¡µï¼‰å¾ˆå¯èƒ½ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ã€‚ è‹¥è¦è®¿é—®æ ·å¼ï¼Œä½ éœ€è¦ä½¿ç”¨å…¶ä»–å±æ€§ï¼Œæ¯ä¸ªå±æ€§ä¸“é—¨ç”¨äºä¸åŒçš„ç±»å‹çš„æµè§ˆå™¨ã€‚Microsoftå’ŒOperaæ”¯æŒcurrentStyleå±æ€§ï¼Œè€ŒFirefoxï¼ŒMozillaä½¿ç”¨window.getComputedStyleã€‚è·¨æµè§ˆå™¨å†™æ³•å¯å¦‚ä¸‹ï¼š12345678910function getStyle(obj,jsprop,cssprop)&#123; if(obj.currentStyle)&#123; return obj.currentStyle[jsprop]; &#125;else if(window.getComputedStyle)&#123; return document.defaultView.getComputedStyle(obj,null).getPropertyValue(cssprop); &#125;else&#123; return null; &#125;&#125;alert(getStyle(obj,\"backgroundColor\",\"background-color\")); çœ‹åˆ°JAVASCRIPTæ ¸å¿ƒæŠ€æœ¯ä¸Šå†™äº†è¿™ä¹ˆä¸€æ®µè¯ï¼šåœ¨å¤„ç†åŠ¨æ€DHMTLæ—¶ï¼Œä¸€ä¸ªå¾ˆå¥½çš„ç»éªŒè§„åˆ™æ˜¯ï¼šåŠªåŠ›é¿å…ä»é¡µé¢æ ·å¼è®¾ç½®ä¸­ç›´æ¥æ£€ç´¢ä¿¡æ¯ï¼Œç›¸åï¼Œåªè¦å¯èƒ½ï¼Œå°±ä½¿ç”¨ç¨‹åºå˜é‡æ¥ä¿æŒå€¼ï¼Œåªæ˜¯åœ¨è®¾ç½®å±æ€§æ—¶æ‰ä½¿ç”¨styleã€‚æˆ‘å¯¹è¿™ä¸ªç¨‹åºå˜é‡ä¿æŒå€¼ä¸æ˜¯å¾ˆæ˜ç™½ã€‚å¦‚æœå¤§å®¶æœ‰ç†è§£ï¼Œå¯å¦åœ¨åœ°ä¸‹ç•™ä¸‹è¨€ï¼Ÿè°¢è°¢å•¦ã€‚ opcityå…ƒç´ é€æ˜åº¦è·¨æµè§ˆå™¨è§£å†³æ–¹æ¡ˆå…ƒç´ çš„é€æ˜åº¦ç”±å®ƒçš„opacityä¸é€æ˜åº¦çš„ç™¾åˆ†æ¯”æ¥å†³å®šï¼ŒMicrosoftåšæŒä½¿ç”¨alphaæ»¤é•œã€‚å…¶ä»–æµè§ˆå™¨å¦‚Mozillaéƒ½å†³å®šé‡‡ç”¨æ–°çš„css3æ ‡å‡†ã€‚å› ä¸ºå¾®è½¯çš„æ»¤é•œä½¿ç”¨ç™¾åˆ†æ¯”ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ•°å­—å‹çš„å€¼ï¼Œå› æ­¤åœ¨ä½¿ç”¨IEæ—¶ï¼Œä¿å­˜å½“å‰opacityä¸é€æ˜åº¦çš„å˜é‡åº”è¯¥ä¹˜ä»¥100ã€‚1234567891011function adjustOpacity()&#123; var img = document.getElementById('img1'); if(img.style.filter)&#123; opacity = opacity*100; img.style.filter = \"alpha(:\"+opacity+\")\"; &#125;else if(img.style.opacity)&#123; img.style.opacity = opacity; &#125;else &#123; alert(\"Opacity not supported\"); &#125;&#125;","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"å¦‚ä½•ç”Ÿæˆå¤šä¸ªsshå¹¶å°†hexoåšå®¢å¸ƒç½®åˆ°github","slug":"å¦‚ä½•ç”Ÿæˆå¤šä¸ªsshå¹¶å°†hexoåšå®¢å¸ƒç½®åˆ°github","date":"2016-02-26T16:34:44.000Z","updated":"2016-12-12T02:52:58.000Z","comments":true,"path":"2016/02/27/å¦‚ä½•ç”Ÿæˆå¤šä¸ªsshå¹¶å°†hexoåšå®¢å¸ƒç½®åˆ°github/","link":"","permalink":"http://sevencai.github.io/2016/02/27/å¦‚ä½•ç”Ÿæˆå¤šä¸ªsshå¹¶å°†hexoåšå®¢å¸ƒç½®åˆ°github/","excerpt":"","text":"æ˜¨å¤©æ˜¯æˆ‘å¥½æœ‹å‹çš„ç”Ÿæ—¥ã€‚å¥¹æ˜¯ä¸€ä¸ªå†™ä¸œè¥¿ç‰¹åˆ«å¥½çš„äººã€‚æˆ‘ä¸€ç›´è§‰å¾—å¥¹å†™ä½œçš„æ‰åç‰¹åˆ«èµã€‚æ‰€ä»¥å°±ç»™ä¹Ÿç”¨hexoæ­å»ºäº†ä¸ªåšå®¢ã€‚æˆ‘ç»™å¥¹ç”³è¯·äº†ä¸ªgithubè´¦å·ã€‚è¿™å°±æœ‰ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘å¿…é¡»è¦å†ç”Ÿæˆä¸€ä¸ªsshå…¬é’¥å’Œå¯†é’¥æ‰èƒ½å¤Ÿæ§åˆ¶å¥¹çš„githubã€‚ ç”Ÿæˆæ–°çš„å…¬é’¥å’Œå¯†é’¥ ç”Ÿæˆæ–°çš„å…¬é’¥1$ ssh-keygen -t rsa -C \"your-email-address\" æ³¨æ„è¿™é‡Œä¸èƒ½ä¸€ç›´æŒ‰enteré”®ï¼Œå¦åˆ™ä¼šè¦†ç›–åŸæ¥æˆ‘çš„sshã€‚å½“å‡ºç°ä¸‹é¢çš„ç¬¬ä¸€è¡Œæ—¶ï¼Œè¦è¾“å…¥æ–°çš„sshçš„åœ°å€å¹¶ä¸”å‘½åã€‚å¦‚ä¸‹å°±æ˜¯å°†id_rsa_aaaä¿å­˜åœ¨äº†root/.ssh/ä¸‹ï¼Œå¹¶å‘½åä¸ºid_rsa_aaaã€‚æ³¨æ„windowç›®å½•ä¸‹ä¸æ˜¯rootï¼Œä½ è¦æ‰¾åˆ°ä½ ç›¸åº”çš„.sshçš„åœ°å€ã€‚å¦‚/c/users/username/.ssh/1234Enter file in which to save the key (/root/.ssh/id_rsa):/root/.ssh/id_rsa_aaaEnter passphrase (empty for no passphrase):Enter same passphrase again:Your identification has been saved in /root/.ssh/id_rsa_aaa. è¾“å…¥åå°±ç”Ÿæˆäº†ä¸€ä¸ªæ–°çš„sshã€‚ å°†å…¬é’¥æ‹·è´åˆ°githubè¿™æ—¶å€™éœ€è¦è¿›å…¥githubçš„settingsé‡Œé¢çš„sshã€‚å¹¶æŠŠç”Ÿæˆçš„å…¬é’¥å¤åˆ¶åˆ°å¯¹åº”çš„æ ç›®é‡Œã€‚ç›´æ¥vi id_rsa_aaa.pubï¼Œå°±å¯ä»¥ç¼–è¾‘å¤åˆ¶ã€‚ åŠ å…¥ssh agentä¸ŠæŠŠè¯¥keyåŠ åˆ°ssh agentä¸Šã€‚ç”±äºä¸æ˜¯ä½¿ç”¨é»˜è®¤çš„.ssh/id_rsaï¼Œæ‰€ä»¥ä½ éœ€è¦æ˜¾ç¤ºå‘Šè¯‰ssh agentä½ çš„æ–°keyçš„ä½ç½®1$ ssh-add ~/.ssh/id_rsa_aaa è¿™æ—¶ï¼Œä½ å¯èƒ½ä¼šæŠ¥ä¸€ä¸ªé”™ï¼š1Could not open a connection to your authentication agent æ­¤æ—¶å…ˆæ‰§è¡Œ eval ssh-agentï¼ˆæ˜¯ï½é”®ä¸Šçš„é‚£ä¸ªï¼‰å†æ‰§è¡Œ ssh-add ~/.ssh/id_rsa_aaaå°±å¯ä»¥æˆåŠŸã€‚ä¸‹é¢å¯è§£é‡ŠåŸå› ã€‚ SSH private-keys are usually stored encrypted on the computers they are stored on. A pass-phrase is used to decrypt them when they are to be used. Since most people use SSH public-private key-pairs to get around typing in passwords all the time, the ssh-agent daemon exists to store decrypted private-keys you plan on using in a given session. The thing most people get tripped up on when using ssh-agent is that what the program outputs, some borne or csh shell commands, needs to be run. It may look like ssh-agent has set some variables for you, but it has in fact done no such thing. If you call ssh-add without processing ssh-agentâ€™s output, it will complain it is unable to open a connection to your authentication agent. The most straightforward way to run ssh-agent on the command line is as follows: eval ssh-agent. After doing this, calls to ssh-add should succeed without error. å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æµ‹è¯•æ˜¯å¦ç”ŸæˆsshæˆåŠŸï¼š1234//æ£€æµ‹åŸæ¥çš„githubè´¦å·çš„sshæ˜¯å¦è®¾ç½®æˆåŠŸssh -T git@github.com//æ£€æµ‹æ–°çš„sshæ˜¯å¦è®¾ç½®æˆåŠŸssh -T git@github_aaa.com é…ç½®configæ–‡ä»¶.sshä¸‹é¢æœ¬æ¥æ˜¯æ²¡æœ‰configæ–‡ä»¶ï¼Œå› ä¸ºé»˜è®¤ä½ çš„ç”µè„‘å°±åªæœ‰ä¸€ä¸ªgithubä¸æœ¬åœ°å…³è”ã€‚ä½†ç”±äºæ­¤æ—¶æœ‰å¤šä¸ªgithubå’Œå¯¹åº”çš„sshï¼Œæ‰€ä»¥å¿…é¡»è¦é…ç½®æ‰èƒ½åŠ ä»¥åŒºåˆ†ã€‚è¿›å…¥$ vi .ssh/configã€‚å¹¶åŠ å…¥ä¸‹åˆ—å†…å®¹ã€‚ä¿å­˜åé€€å‡ºã€‚123456789# åŠ ä¸Šä»¥ä¸‹å†…å®¹#default githubHost github.com HostName github.com IdentityFile ~/.ssh/id_rsaHost github_aaa.com HostName github.com IdentityFile ~/.ssh/id_rsa_aaa å¦‚ä½•ä½¿ç”¨è¿™æ ·çš„è¯ï¼Œä½ å°±å¯ä»¥é€šè¿‡ä½¿ç”¨github.comåˆ«ågithub_aaaæ¥æ˜ç¡®è¯´ä½ è¦æ˜¯ä½¿ç”¨id_rsa_aaaçš„SSH keyæ¥è¿æ¥githubï¼Œå³ä½¿ç”¨å·¥ä½œè´¦å·è¿›è¡Œæ“ä½œï¼Œå¦‚ä¸‹ï¼š123456#æœ¬åœ°å»ºåº“$ git init$ git commit -am \"first commit' #pushåˆ°githubä¸Šå»$ git remote add origin git@github_aaa.com:xxxx/test.git$ git push origin master ç”±äºæˆ‘æ˜¯è¦æŠŠhexoåšå®¢éƒ¨ç½²åˆ°githubä¸Šï¼Œæ‰€ä»¥æ–¹å¼æœ‰æ‰€ä¸åŒï¼Œæ›´æ”¹_config.ymlæ–‡ä»¶ï¼š1234deploy: type: git repository: git@github_aaa.com:zxqblog/zxqblog.github.io.git branch: master å¦‚ä¸Šï¼Œä¸Šé¢çš„@åé¢ä¸æ˜¯github.comè€Œæ˜¯æˆ‘ä»¬åˆšåˆšèµ·çš„åˆ«åï¼Œgithub_aaa.comã€‚æ³¨æ„è¿™é‡Œçš„typeè¦å†™æˆgitè€Œä¸æ˜¯é»˜è®¤çš„github,å¦åˆ™ä¼šæŠ¥ä¸‹é¢çš„é”™ï¼š1error deployer not found:github è¿™æ˜¯ç”±äºhexo æ›´æ–°åˆ°3.0ä¹‹åï¼Œdeployçš„type çš„githubéœ€è¦æ”¹æˆgitã€‚ éƒ¨ç½²hexoåšå®¢åˆ°githubé¦–å…ˆæ–°å»ºä¸€ä¸ªä»“åº“å¦‚ï¼šzxqblog.github.ioã€‚æœ€å¥½æ˜¯ä»¥è¿™ç§å½¢å¼å‘½åã€‚Github Pagesçš„Repositoryåå­—æ˜¯ç‰¹å®šçš„ï¼Œæ¯”å¦‚æˆ‘Githubè´¦å·æ˜¯cnfeatï¼Œé‚£ä¹ˆæˆ‘Github Pages Repositoryåå­—å°±æ˜¯cnfeat.github.ioã€‚ éƒ¨ç½²ä»“åº“ä½¿ç”¨å‘½ä»¤123hexo cleanhexo generatehexo deploy åœ¨éƒ¨ç½²çš„è¿‡ç¨‹ä¸­ä½ å¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹çš„å‡ ä¸ªé—®é¢˜ï¼šé—®é¢˜1 Error: spawn ENOENT é”™è¯¯ä¿¡æ¯è§£å†³æ–¹æ¡ˆè§£å†³æ–¹æ³•å°±æ˜¯åœ¨cmdä¸‹æ•²çš„å‘½ä»¤æ— æ³•å®ç°ï¼Œæˆ‘ä»¬æŠŠå‘½ä»¤åœ¨git shellä¸‹é¢æ•²æ‰“å°±å¯ä»¥å®ç°äº†ã€‚æˆ–è€…é…ç½®ç¯å¢ƒå˜é‡å¦‚ï¼šC:\\Program Files (x86)\\Git\\bin;C:\\Program Files (x86)\\Git\\libexec\\git-coreï¼Œè¿™æ ·å°±è§£å†³äº†é—®é¢˜äº†ã€‚ é—®é¢˜2 é¡µé¢ä¸€ç›´æ˜¾ç¤º 404 page è§£å†³æ–¹æ¡ˆåœ¨githubéƒ¨ç½²å®Œæˆä¹‹åï¼Œé©¬ä¸Šè®¿é—®å¯èƒ½å‡ºç°404é”™è¯¯ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼Œï¼ˆæœ€å¤šï¼‰ç­‰å¾…ååˆ†é’Ÿå·¦å³å°±å¯ä»¥è®¿é—®äº†ã€‚å¦‚æœè¿˜ä¸è¡Œï¼Œé‚£å¾ˆå¯èƒ½æ˜¯ github å‘é€ç»™ä½ çš„éªŒè¯é‚®ä»¶ä½ æ²¡æœ‰æ‰“å¼€çœ‹ï¼Œæ®å¤šæ–¹åæ˜ ï¼ŒéªŒè¯åå°±æ²¡é—®é¢˜äº†ã€‚æˆ–è€…æ˜¯éªŒè¯é‚®ç®±é‡Œä¼šå‡ºç°deploy falseçš„ç°è±¡ï¼Œå¹¶å‘Šè¯‰ä½ éƒ¨ç½²ä¸æˆåŠŸçš„åŸå› ã€‚è¿™æ—¶å€™ä½ å»æ£€æŸ¥æ–‡ä»¶ï¼Œå†æŸ¥æ‰¾åŸå› å³å¯ã€‚ é—®é¢˜3 Page build failed: Missing submoduleçš„è§£å†³æ–¹æ¡ˆè¿™ä¸ªé—®é¢˜æˆ‘çŠ¯çš„çœŸçš„å¾ˆä½çº§ã€‚å› ä¸ºä»¥å‰éƒ½æ˜¯é€šè¿‡é˜¿é‡Œäº‘æ¥éƒ¨ç½²æˆ‘çš„ç½‘ç«™ã€‚ä»¥ä¸ºgithub pageéƒ¨ç½²hexoæ˜¯ä¸€æ ·çš„ï¼Œäºæ˜¯å°±ç”¨å…ˆå‰çš„ï¼šgit init,git add,git commit,git remote add,git pushæ¥åšã€‚ ä½†åæ¥çŸ¥é“github pageéƒ¨ç½²hexoä¸éœ€è¦è¿™æ ·ï¼Œåªéœ€è¦ä¸Šé¢çš„æ­¥éª¤é…ç½®å¥½_config.ymlæ–‡ä»¶å³å¯ã€‚é€ æˆè¿™ä¸ªé”™è¯¯çš„åŸå› æœ‰å¾ˆå¤šã€‚ä½†æ˜¯æˆ‘çš„é”™è¯¯çš„å¤§æ¦‚åŸå› æ˜¯gité‡Œé¢åˆæœ‰gitã€‚æˆ–è€…æ˜¯gitæ–‡ä»¶ä¸æ­£ç¡®ï¼ˆä¸ä¸€å®šç†è§£æ­£ç¡®ã€‚ã€‚ã€‚ï¼‰ã€‚è§£å†³æ–¹æ³•æ˜¯é‡å»ºä»“åº“ï¼ŒæŸ¥åˆ°ä»¥å‰æœ‰äººç”¨ï¼š - Make a backup of the content locally - Delete the repository from GitHub - Delete the repository locally - Recreate the repository, ensuring that you don&apos;t include the repository within the repository locally, which is what you did previously - Push it to GitHub è¿™ä¸ªæ–¹æ³•è§£å†³äº†ï¼Œå…¶å®å°±æ˜¯é‡æ–°å»ºäº†ä»“åº“ã€‚ç®€å•çš„æ–¹æ³•æ˜¯æŠŠåŸæ¥blogé‡Œçš„æ‰€æœ‰gitå…¨éƒ¨åˆ é™¤ï¼ŒåŒ…æ‹¬deploy_gitã€‚ç„¶åæŠŠgithubä¸Šçš„æ–‡ä»¶å…¨éƒ¨æ¸…ç©ºã€‚åªä¿ç•™åº“åå­—ã€‚ç„¶åå†deployå³å¯ã€‚ æ¶¨çŸ¥è¯†ä»€ä¹ˆæ˜¯SSHSSHæ˜¯ä¸€ç§ç½‘ç»œåè®®ï¼Œç”¨äºè®¡ç®—æœºä¹‹é—´çš„åŠ å¯†é€šä¿¡ã€‚ å…¬é’¥Public Keyä¸ç§é’¥Private KeySSHéœ€è¦ç”Ÿæˆå…¬é’¥Public Keyå’Œç§é’¥Private Key, å¸¸ç”¨çš„æ˜¯ä½¿ç”¨RSAç®—æ³•ç”Ÿæˆid_rsa.pubå’Œid_rsaã€‚ å…¬é’¥Public Key(id_rsa.pub)æ˜¯å¯ä»¥æš´éœ²åœ¨ç½‘ç»œä¼ è¾“ä¸Šçš„ï¼Œæ˜¯ä¸å®‰å…¨çš„ã€‚è€Œç§é’¥Private Key(id_rsa)æ˜¯ä¸å¯æš´éœ²çš„ï¼Œåªèƒ½å­˜åœ¨å®¢æˆ·ç«¯æœ¬æœºä¸Šã€‚ æ‰€ä»¥å…¬é’¥Public Key(id_rsa.pub)çš„æƒé™æ˜¯644ï¼Œè€Œç§é’¥Private Key(id_rsa)çš„æƒé™åªèƒ½æ˜¯600ã€‚å¦‚æœæƒé™ä¸å¯¹ï¼ŒSSHä¼šè®¤ä¸ºå…¬é’¥Public Key(id_rsa.pub)å’Œç§é’¥Private Key(id_rsa)æ˜¯ä¸å¯é çš„ï¼Œå°±æ— æ³•æ­£å¸¸ä½¿ç”¨SSHç™»é™†äº†ã€‚ åŒæ—¶åœ¨æœåŠ¡ç«¯ä¼šæœ‰ä¸€ä¸ª~/.ssh/authorized_keysæ–‡ä»¶ï¼Œé‡Œé¢å­˜æ”¾äº†å¤šä¸ªå®¢æˆ·ç«¯çš„å…¬é’¥Public Key(id_rsa.pub)ï¼Œå°±è¡¨ç¤ºæ‹¥æœ‰è¿™äº›Public Keyçš„å®¢æˆ·ç«¯å°±å¯ä»¥é€šè¿‡SSHç™»é™†æœåŠ¡ç«¯ã€‚ SSHå…¬é’¥ç™»é™†è¿‡ç¨‹ å®¢æˆ·ç«¯å‘å‡ºå…¬é’¥ç™»é™†çš„è¯·æ±‚(ssh user@host) æœåŠ¡ç«¯è¿”å›ä¸€æ®µéšæœºå­—ç¬¦ä¸² å®¢æˆ·ç«¯ç”¨ç§é’¥Private Key(id_rsa)åŠ å¯†è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå†å‘é€å›æœåŠ¡ç«¯ æœåŠ¡ç«¯ç”¨~/.ssh/authorized_keysé‡Œé¢å­˜å‚¨çš„å…¬é’¥Public Keyå»è§£å¯†æ”¶åˆ°çš„å­—ç¬¦ä¸²ã€‚å¦‚æœæˆåŠŸï¼Œå°±è¡¨æ˜è¿™ä¸ªå®¢æˆ·ç«¯æ˜¯å¯ä¿¡çš„ï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥æˆåŠŸç™»é™† ç”±æ­¤å¯è§ï¼Œåªè¦å¤šå°ç”µè„‘ä¸Šçš„çš„å…¬é’¥Public Key(id_rsa.pub)å’Œç§é’¥Private Key(id_rsa)æ˜¯ä¸€æ ·çš„ï¼Œå¯¹äºæœåŠ¡ç«¯æ¥è¯´ç€å…¶å®å°±æ˜¯åŒä¸€ä¸ªå®¢æˆ·ç«¯ã€‚ æ‰€ä»¥å¯ä»¥é€šè¿‡å¤åˆ¶å…¬é’¥Public Key(id_rsa.pub)å’Œç§é’¥Private Key(id_rsa)åˆ°å¤šå°ç”µè„‘æ¥å®ç°å…±äº«ç™»é™†ã€‚ æ€»ç»“è¿›ä¸€æ­¥äº†è§£äº†SSH,å¹¶ä¸”ä¹ŸçŸ¥é“github pageæ€ä¹ˆéƒ¨ç½²ç½‘ç«™ã€‚æœ€åè¿˜é€‰äº†ä¸€ä¸ªå¥½çœ‹çš„ä¸»é¢˜ã€‚å¸Œæœ›å¥¹ä¼šå–œæ¬¢ã€‚å¯ä»¥è®¿é—®çœ‹çœ‹ï¼Œå¥¹çš„æ–‡ç« å†™å¾—å¥½å¥½ã€‚åœ°å€","categories":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/categories/å·¥å…·-é…ç½®/"}],"tags":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/tags/å·¥å…·-é…ç½®/"}]},{"title":"CentOSä¸Šå¦‚ä½•æŠŠWebæœåŠ¡å™¨ä»Apacheæ¢åˆ°Nginx","slug":"CentOSä¸Šå¦‚ä½•æŠŠWebæœåŠ¡å™¨ä»Apacheæ¢åˆ°Nginx","date":"2016-02-23T05:43:23.000Z","updated":"2016-12-12T02:26:32.000Z","comments":true,"path":"2016/02/23/CentOSä¸Šå¦‚ä½•æŠŠWebæœåŠ¡å™¨ä»Apacheæ¢åˆ°Nginx/","link":"","permalink":"http://sevencai.github.io/2016/02/23/CentOSä¸Šå¦‚ä½•æŠŠWebæœåŠ¡å™¨ä»Apacheæ¢åˆ°Nginx/","excerpt":"","text":"å…ˆå‰æœ‰ä¸€ç¯‡æ–‡ç« æ˜¯å†™å¦‚ä½•é€šè¿‡nginxå®ç°åå‘ä»£ç†ã€‚ä½†å½“æ—¶å‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘åŸå…ˆcentosä¸Šé¢è£…çš„opacheç”±äºç«¯å£åŸå› å¿…é¡»åœæ‰ã€‚å¹¶ä¸”/çš„é…ç½®ä½¿è·¯ç”±è½¬å‘å‡ºç°äº†é—®é¢˜ã€‚å¯¼è‡´æˆ‘ä»¥å‰çš„phpç½‘ç«™éƒ½ä¸èƒ½è®¿é—®ã€‚ä»Šå¤©æŠŠè¿™ä¸ªé—®é¢˜è§£å†³äº†å¹¶è®°å½•ã€‚ å…ˆå­¦ä¹ å‡ ä¸ªæ¦‚å¿µåå‘ä»£ç†æ˜¯ä»€ä¹ˆ åå‘ä»£ç†ï¼ˆReverse Proxyï¼‰æ–¹å¼æ˜¯æŒ‡ä»¥ä»£ç†æœåŠ¡å™¨æ¥æ¥å—internetä¸Šçš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡å™¨ï¼Œå¹¶å°†ä»æœåŠ¡å™¨ä¸Šå¾—åˆ°çš„ç»“æœè¿”å›ç»™internetä¸Šè¯·æ±‚è¿æ¥çš„å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å¯¹å¤–å°±è¡¨ç°ä¸ºä¸€ä¸ªåå‘ä»£ç†æœåŠ¡å™¨ã€‚ Nginxå’ŒApacheçš„åŒºåˆ«ä¸è”ç³»Nginxæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„HTTPæœåŠ¡å™¨å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œæœ€å¤§çš„ä¼˜ç‚¹æ˜¯èŠ‚çœèµ„æºã€‚é€‚ç”¨äºå¤„ç†é«˜å¹¶å‘çš„è¯·æ±‚ã€‚ Nginxæœ€åˆæ˜¯æŒ‰ç…§åå‘ä»£ç†è®¾è®¡çš„ï¼Œå’ŒApacheä¸åŒ, nginxå…³å¿ƒå¦‚ä½•å¤„ç†url,è€Œä¸æ˜¯æ–‡ä»¶ï¼ Apacheæ˜¯åŸºäºè¿›ç¨‹å¤„ç†çš„webæœåŠ¡å™¨ï¼ŒNginxæ˜¯åŸºäºäº‹ä»¶(event)çš„å¼‚æ­¥å¤„ç†æ¨¡å¼ã€‚ Nginxæ¯”è¾ƒé€‚åˆæ¥å¤„ç†é™æ€æ–‡ä»¶å’Œèµ„æºã€‚Apacheè™½ç„¶å ç”¨å†…å­˜å¤šäº†ç‚¹ï¼Œæ€§èƒ½ä¸Šç¨é€Šï¼Œä½†ä¸€ç›´æ¯”è¾ƒç¨³å¥ã€‚é€‚ç”¨äºå¤„ç†åŠ¨æ€æ–‡ä»¶ã€‚ Apache æ˜¯ä¸ªåŸºäºè¿›ç¨‹å¤„ç†çš„webæœåŠ¡å™¨ï¼Œå¦‚æœåŒæ—¶æœ‰å¤šä¸ªè¯·æ±‚ï¼Œå¿…é¡»è¦å¯åŠ¨å¤šä¸ªè¿›ç¨‹æ¥å¤„ç†ã€‚ è¿™æ ·åœ¨é«˜è´Ÿè½½çš„æƒ…å†µä¸‹ï¼Œèµ„æºçš„æ¶ˆè€—å’Œå“åº”çš„é€Ÿåº¦éƒ½ä¼šæœ‰å¾ˆå¤§çš„é—®é¢˜ã€‚ è€ŒNginxæ˜¯ä¸ªåŸºäºäº‹ä»¶(event)çš„å¼‚æ­¥å¤„ç†æ¨¡å¼ï¼Œ ä¸‹é¢æ˜¯Nginxçš„ä¸€ä¸ªç®€å•çš„ç¤ºæ„å›¾ï¼Œæœ‰ä¸€ä¸ªMasterè¿›ç¨‹ï¼ŒMasteè¿›ç¨‹è´Ÿè´£ç³»ç»Ÿé…ç½®ï¼Œç®¡ç†socket,ä»¥åŠç®¡ç†ä¸€ä¸ªæˆ–æ˜¯å¤šä¸ªWorkerè¿›ç¨‹ã€‚ è€ŒWorkerè¿›ç¨‹æ¥æ”¶å’Œå¤„ç†æ¥è‡ªç”¨æˆ·ï¼ˆæµè§ˆå™¨ï¼‰çš„è¯·æ±‚ã€‚ä¸€èˆ¬æ¥è®²ï¼Œä¸€ä¸ªworkerè¿›ç¨‹å¯ä»¥åŒæ—¶å¤„ç†ä¸Šåƒä¸ªç”¨æˆ·çš„è¿æ¥è¯·æ±‚ã€‚æ¯ä¸ªworkerè¿›ç¨‹é‡‡ç”¨å¼‚æ­¥çš„ï¼ŒåŸºäºeventçš„æ–¹å¼æ¥å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ã€‚å¯¹äºHTMLçš„é™æ€é¡µé¢ï¼ŒNginxä¼šè‡ªè¡Œæ¥å¤„ç†ï¼Œä½†å¯¹äºPHP,JSP, Pythonç­‰åŠ¨æ€é¡µé¢ï¼ŒNginxæ˜¯é€šè¿‡FastCGI(æˆ–è€…SCGI,UWSGI)æ¥æŠŠåŠ¨æ€é¡µé¢çš„è¯·æ±‚äº¤ç»™ç›¸åº”çš„å¤„ç†ç¨‹åºæ¥å¤„ç†ã€‚ å®‰è£…å’Œé…ç½®å®‰è£…nginxè¿™é‡Œå®‰è£…nginxä¸Šä¸€ç¯‡æ–‡ç« è®²äº†ã€‚æœ‰ä¸€ç‚¹è¦æ³¨æ„å’Œæé†’çš„ï¼šåœ¨CentOSçš„YUMçš„åŸºç¡€çš„å®¹å™¨ä¸­ï¼Œå¹¶æ²¡æœ‰nginxå’Œphp-fpmçš„RPMåŒ…ã€‚è¿™ä¸¤ä¸ªRMPåŒ…åœ¨epelçš„å®¹å™¨ä¸­ï¼Œ è™½ç„¶å¯ä»¥ä»å®˜ç½‘ä¸‹è½½RPMåŒ…æ¥å®‰è£…ï¼Œä½†å¦‚æœä½ çš„CentOS/Redhatä¸­æ²¡æœ‰åŠ å…¥YUMçš„epelå®¹å™¨ï¼Œè¿˜æ˜¯å…ˆæŠŠè¿™ä¸ªyumå®¹å™¨åŠ ä¸Šå»æ¯”è¾ƒå¥½ï¼Œä»¥åå¯ä»¥çœæ— æ•°çš„æŠ˜è…¾ã€‚ å®‰è£…php-fpmåˆšåˆšè¯´äº†Nginxæ˜¯é€šè¿‡FastCGIæ¥æŠŠåŠ¨æ€é¡µé¢çš„è¯·æ±‚äº¤ç»™ç›¸åº”çš„å¤„ç†ç¨‹åºæ¥å¤„ç†ã€‚PHP-FPM (PHP-FastCGI Process Manager) æ˜¯ç›®å‰æœ€å¸¸ç”¨çš„ä¸€ä¸ªPHP FastCGIçš„å®ç°ã€‚é€šä¿—çš„è®²ï¼Œè¿™ä¸ªæ¨¡å—åœ¨Nginxå’ŒPHPä¹‹é—´æ¡¥æ¢ï¼Œä½¿ä¹‹å¯ä»¥äº’ç›¸é€šä¿¡å’Œäº¤æ¢ã€‚123yum install php-fpm/etc/init.d/php-fpm startchkconfig php-fpm on å®‰è£…å¥½åæ¥ç¡®è®¤æ˜¯å¦nginxå’Œphp-fpmå®‰è£…æ­£ç¡®ã€‚ä½¿ç”¨netstat tunlpå‘½ä»¤ã€‚æŸ¥çœ‹ç«¯å£ç›‘å¬æƒ…å†µã€‚ é…ç½®default.confæ–‡ä»¶ä½¿nginxå¯è§£æphpæ–‡ä»¶é…ç½®æ–‡ä»¶æœ€åå¦‚ä¸‹ï¼šè·¯ç”±ä¸º/æ—¶æ˜¯åå‘ä»£ç†ã€‚å¦‚æœæ‰€æœ‰çš„æ–‡ä»¶æˆ‘éƒ½æ”¾åœ¨htmlç›®å½•ä¸‹ã€‚é‚£ä¹ˆå½“æˆ‘è®¿é—®é‡Œé¢çš„å¤šä¸ªç½‘ç«™æ—¶ï¼Œéƒ½å¿…é¡»åœ¨confæ–‡ä»¶é‡Œé…ç½®ä¸€ä¸‹è·¯ç”±ï¼Œæ¯”å¦‚ä¸‹é¢çš„/imagesç›®å½•ç­‰ã€‚æ‰€ä»¥æˆ‘ä¸“é—¨å»ºç«‹äº†ä¸€ä¸ªwebç›®å½•ï¼Œç”¨æ¥æ”¾æˆ‘æ‰€æœ‰çš„phpç«™ç‚¹ã€‚fastcgiç›‘å¬9000ç«¯å£ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950server &#123; listen 80; server_name cailidan.cn,www.cailidan.cn; root /usr/share/nginx/html; #charset koi8-r; #access_log logs/host.access.log main; # Load configuration files for the default server block. include /etc/nginx/default.d/*.conf; location / &#123; proxy_pass http://127.0.0.1:4000/; proxy_redirect off; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; &#125; error_page 404 /404.html; location = /404.html &#123; root /usr/share/nginx/html; &#125; location /web &#123; root /usr/share/nginx/html; index index.php index.html index.htm; &#125; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root /usr/share/nginx/html; &#125; # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # #location ~ \\.php$ &#123; # proxy_pass http://127.0.0.1; #&#125; # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # location ~ \\.php$ &#123; root html; fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; include fastcgi_params; &#125;&#125; ä¸­é—´å­¦åˆ°çš„ä¸œè¥¿Redhat/CentOSå®‰è£…è½¯ä»¶æœ‰ä¸‹é¢ä¸‰ç§æ–¹æ³•ï¼š 1.ä½¿ç”¨YUM æ¥åœ¨çº¿å®‰è£…è½¯ä»¶ï¼ŒåŸºæœ¬å’Œ â€œè½¯ä»¶å•†åº—â€çš„æ¦‚å¿µç±»ä¼¼ï¼Œ åªéœ€è¦åœ¨yumçš„å®¹å™¨ä¸­æ‰¾åˆ°ç›¸åº”çš„è½¯ä»¶ï¼ˆrpmåŒ…ï¼‰ï¼Œç„¶åç›´æ¥å®‰è£…ï¼ˆæˆ–å‡çº§ï¼‰å°±OKäº†ï¼Œè¿‡ç¨‹æ¯”è¾ƒç®€å•ã€‚ 2.ä¸‹è½½ç›¸åº”çš„RPMè½¯ä»¶åŒ…ï¼Œç„¶åç”¨RPMå‘½ä»¤å®‰è£…ã€‚ 3.ä¸‹è½½è½¯ä»¶çš„æºç çš„Tarball, åœ¨è‡ªå·±çš„æœºå™¨ä¸Šç¼–è¯‘å’Œå®‰è£…ã€‚è¿™ç§æ–¹æ³•ç›¸å¯¹æ¥è¯´æ¯”è¾ƒéº»çƒ¦ã€‚ RPMRPMæ˜¯ Redhat Package Managerçš„ç¼©å†™ï¼Œæ˜¯Linuxä¸Šçš„ä¸€ç§è½¯ä»¶æ‰“åŒ…å’Œç®¡ç†çš„å·¥å…·ã€‚ å› ä¸ºLinuxçš„ä¸åŒå‘è¡Œç‰ˆ(distribution)ï¼Œç”šè‡³åŒä¸€å‘è¡Œç‰ˆçš„ä¸åŒç‰ˆæœ¬ä¹‹é—´å¾€å¾€æœ‰å¾ˆå¤šçš„ä¸åŒï¼Œ å¼€å‘è€…åœ¨æŸä¸ªLinuxå‘è¡Œç‰ˆä¸‹å¼€å‘å’Œç¼–è¯‘çš„ç¨‹åºï¼Œç›´æ¥æ”¾åˆ°å¦å¤–ä¸€ä¸ªLinuxä¸‹æœ‰éå¸¸å¤§çš„å¯èƒ½æ€§æ— æ³•è¿è¡Œã€‚ å› æ­¤æ—©æœŸçš„Linuxçš„è½¯ä»¶éƒ½æ˜¯é€šè¿‡æºç æ¥åˆ†å‘ï¼Œä½¿ç”¨è€…åŸºæœ¬éƒ½æ˜¯é€šè¿‡åœ¨è‡ªå·±çš„Linuxå¹³å°ä¸Šé‡æ–°ç¼–è¯‘æºä»£ç æ¥å®‰è£…è½¯ä»¶ã€‚ ä½†æ˜¯è¿™ç§ç¼–è¯‘æºä»£ç çš„æ–¹å¼æ¯”è¾ƒç¹çå’Œå¤æ‚ï¼Œæ™®é€šç”¨æˆ·å¾€å¾€ä¹Ÿéš¾ä»¥æŒæ¡ã€‚ åæ¥ Redhatæ¨å‡ºäº†RPMè¿™ä¸ªè½¯ä»¶æ‰“åŒ…çš„æ–¹å¼ã€‚å°±æ˜¯åœ¨ç‰¹å®šçš„Linuxå¹³å°ä¸ŠæŠŠè½¯ä»¶ç¼–è¯‘å¥½ï¼Œç„¶åæŠŠä¸è¿™ä¸ªè½¯ä»¶ç›¸å…³çš„æ–‡ä»¶å’Œåº“æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼ˆRPMåŒ…ï¼‰ï¼Œ ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼š é€šå¸¸ä¸åŒçš„distributionæ‰€å‘å¸ƒçš„RPMåŒ…å¾€å¾€ä¸èƒ½ç”¨äºå…¶ä»–çš„Linuxçš„distributionsä¸Šé¢ã€‚ ä¾‹å¦‚ï¼Œé’ˆå¯¹Redhatçš„RPMåŒ…å¾€å¾€æ— æ³•ç›´æ¥åœ¨OpenSUSEä¸Šè¿›è¡Œå®‰è£…ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨RPMæ–¹å¼è¿›è¡Œå®‰è£…çš„æ—¶å€™ï¼Œå¿…é¡»é€‰æ‹©å’Œä½ ä½¿ç”¨çš„å¹³å°ä¸€è‡´çš„RPMå®‰è£…åŒ…ã€‚ RUMä¸ºäº†è§£å†³è½¯ä»¶ä¾èµ–çš„é—®é¢˜ï¼Œå·²ç»ä¸ºäº†ç»™ç”¨æˆ·æä¾›ä¸€ç§æ›´åŠ æ–¹ä¾¿ç®€å•çš„è½¯ä»¶å®‰è£…æ–¹æ³•ï¼Œ YUMè¢«å¼€å‘å‡ºæ¥äº†ã€‚ YUM æ˜¯Yellowdog Updater Modified çš„ç¼©å†™. YUM æ˜¯å»ºç«‹åœ¨RPMçš„åŸºç¡€ä¹‹ä¸Šçš„ï¼Œ ä¸ºç”¨æˆ·æä¾›è½¯ä»¶å®‰è£…ï¼Œå‡çº§ï¼Œå¸è½½çš„åŠŸèƒ½ã€‚ YUMæœ€å¤§çš„å¥½å¤„æ˜¯è§£å†³äº†è½¯ä»¶ä¾èµ–çš„é—®é¢˜ã€‚YUM æŠŠå¾ˆå¤šè½¯ä»¶çš„RPMåŒ…æ”¾åœ¨RPM å®¹å™¨(repository)ä¸­ï¼Œ ç”¨YUM æ–¹å¼æ¥å®‰è£…è½¯ä»¶çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åˆ†æä½ è¦å®‰è£…çš„è½¯ä»¶çš„ä¾èµ–å…³ç³»ï¼Œå¹¶ä¼šè‡ªåŠ¨å¸®ä½ å®‰è£…å¿…é¡»çš„â€œä¾èµ–è½¯ä»¶â€ï¼Œ è¿™æ ·å°±è§£å†³äº†æœ€ä¸ºå›°æ‰°ç”¨æˆ·çš„è½¯ä»¶ä¾èµ–çš„é—®é¢˜ã€‚ é‚£YUMå®¹å™¨ï¼ˆrepository)çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ YUMå®¹å™¨ç±»ä¼¼ä¸€ä¸ªè½¯ä»¶ä»“åº“çš„æ¦‚å¿µï¼Œä¸ä½†æœ‰å„ä¸ªè½¯ä»¶çš„RPMå®‰è£…åŒ…ï¼Œè¿˜è®°å½•äº†ä»–ä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ 1234567yum list/search /info xxxyum list httpd //æ£€æŸ¥apacheæ˜¯å¦å·²ç»å®‰è£…yum info httpd //æŸ¥çœ‹apacheçš„è¯¦ç»†ä¿¡æ¯ï¼Œ ç±»ä¼¼ rpm -qi httpdyum search httpd //æŸ¥è¯¢å’Œ apache (httpd)ç›¸å…³çš„è½¯ä»¶yum install httpd //å®‰è£…yum update httpd //å‡çº§yum remove httpd //å¸è½½è½¯ä»¶","categories":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/categories/å·¥å…·-é…ç½®/"}],"tags":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/tags/å·¥å…·-é…ç½®/"}]},{"title":"ç†è§£DOMä¸­çš„äº‹ä»¶æµçš„æ¦‚å¿µ","slug":"ç†è§£DOMä¸­çš„äº‹ä»¶æµçš„æ¦‚å¿µ","date":"2016-02-22T14:03:39.000Z","updated":"2016-12-12T03:02:06.000Z","comments":true,"path":"2016/02/22/ç†è§£DOMä¸­çš„äº‹ä»¶æµçš„æ¦‚å¿µ/","link":"","permalink":"http://sevencai.github.io/2016/02/22/ç†è§£DOMä¸­çš„äº‹ä»¶æµçš„æ¦‚å¿µ/","excerpt":"","text":"ä»€ä¹ˆæ˜¯äº‹ä»¶æµæµï¼šç”¨æœ¯è¯­è¯´æµæ˜¯å¯¹è¾“å…¥è¾“å‡ºè®¾å¤‡çš„æŠ½è±¡ã€‚ä»¥ç¨‹åºçš„è§’åº¦è¯´ï¼Œæµæ˜¯å…·æœ‰æ–¹å‘çš„æ•°æ®ã€‚ äº‹ä»¶æµï¼šä»é¡µé¢ä¸­æ¥æ”¶äº‹ä»¶çš„é¡ºåºã€‚ä¹Ÿå°±æ˜¯è¯´å½“ä¸€ä¸ªäº‹ä»¶äº§ç”Ÿæ—¶ï¼Œè¿™ä¸ªäº‹ä»¶çš„ä¼ æ’­è¿‡ç¨‹ï¼Œå°±æ˜¯äº‹ä»¶æµã€‚ äº‹ä»¶ï¼šç”¨æˆ·æˆ–è€…æµè§ˆå™¨è‡ªèº«æ‰§è¡Œçš„æŸä¸ªåŠ¨ä½œï¼Œæ¯”å¦‚loadï¼Œclickï¼Œmousemoveç­‰ äº‹ä»¶å¤„ç†ç¨‹åºï¼šç›¸åº”å¤„ç†æŸä¸ªäº‹ä»¶çš„å‡½æ•°å«åšäº‹ä»¶å¤„ç†å‡½æ•°ï¼ˆä¹Ÿå«åšäº‹ä»¶ä¾¦å¬å™¨ï¼‰ æ¯”å¦‚è¯´Reactä¸­çš„å•å‘æ•°æ®æµï¼ŒNodeä¸­çš„æµï¼Œåˆæˆ–æ˜¯ä»Šå¤©æœ¬æ–‡æ‰€è®²çš„DOMäº‹ä»¶æµã€‚éƒ½æ˜¯æµçš„ä¸€ç§ç”ŸåŠ¨ä½“ç°ã€‚ ç†è§£DOMä¸­çš„äº‹ä»¶æµ å½“æµè§ˆå™¨å‘å±•åˆ°ç¬¬å››ä»£æ—¶ï¼ˆIE4å’ŒNetscape Communicator 4ï¼‰,æµè§ˆå™¨å›¢é˜Ÿé‡åˆ°ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„é—®é¢˜ï¼šé¡µé¢çš„å“ªä¸€éƒ¨åˆ†ä¼šæ‹¥æœ‰ç‰¹å®šçš„äº‹ä»¶ï¼Ÿæƒ³è±¡ä¸‹åœ¨ä¸€å¼ çº¸ä¸Šæœ‰ä¸€ç»„åŒå¿ƒåœ†ï¼Œå¦‚æœä½ æŠŠæ‰‹æŒ‡æ”¾åœ¨åœ†å¿ƒä¸Šï¼Œé‚£ä¹ˆä½ çš„æ‰‹æŒ‡æŒ‡å‘çš„ä¸æ˜¯ä¸€ä¸ªåœ†ï¼Œè€Œæ˜¯ä¸€ç»„åœ†ã€‚ä¸¤å®¶å…¬å¸çš„å¼€å‘å›¢é˜Ÿåœ¨çœ‹å¾…æµè§ˆå™¨äº‹ä»¶æ–¹é¢è¿˜æ˜¯ä¸€è‡´çš„ã€‚å¦‚æœä½ å•å‡»äº†æŸä¸ªæŒ‰é’®ï¼Œé‚£ä¹ˆåŒæ—¶ä½ ä¹Ÿå•å‡»äº†æŒ‰é’®çš„å®¹å™¨å…ƒç´ ï¼Œç”šè‡³æ•´ä¸ªé¡µé¢ã€‚äº‹ä»¶æµæè¿°çš„æ˜¯ä»é¡µé¢ä¸­æ¥å—äº‹ä»¶çš„é¡ºåºã€‚ä½†æœ‰æ„æ€çš„æ˜¯ï¼ŒIEå’ŒNetscapeå¼€å‘å›¢é˜Ÿå±…ç„¶æå‡ºäº†ä¸¤ä¸ªæˆªç„¶ç›¸åçš„äº‹ä»¶æµæ¦‚å¿µã€‚IEçš„äº‹ä»¶æµæ˜¯äº‹ä»¶å†’æ³¡æµï¼Œè€ŒNetscapeçš„äº‹ä»¶æµæ˜¯äº‹ä»¶æ•è·æµã€‚ IEæå‡ºçš„äº‹ä»¶å†’æ³¡äº‹ä»¶å†’æ³¡å³äº‹ä»¶å¼€å§‹æ—¶ï¼Œç”±æœ€å…·ä½“çš„å…ƒç´ æ¥æ”¶ï¼ˆä¹Ÿå°±æ˜¯äº‹ä»¶å‘ç”Ÿæ‰€åœ¨çš„èŠ‚ç‚¹ï¼‰ï¼Œç„¶åé€çº§ä¼ æ’­åˆ°è¾ƒä¸ºä¸å…·ä½“çš„èŠ‚ç‚¹ã€‚ 123456789101112131415161718192021222324252627&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;button id=\"click\"&gt;ç‚¹å‡»&lt;/button&gt; &lt;script&gt; (function()&#123; var btn = document.getElementById(\"click\"); btn.onclick = function()&#123; console.log(\"1. button\"); &#125; document.body.onclick = function()&#123; console.log(\"2. document.body\"); &#125; document.onclick = function()&#123; console.log(\"3. document\"); &#125; window.onclick = function()&#123; console.log(\"4. window\"); &#125; &#125;)() &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; åœ¨ä»£ç æ‰€ç¤ºçš„é¡µé¢ä¸­ï¼Œå¦‚æœç‚¹å‡»äº†buttonï¼Œé‚£ä¹ˆè¿™ä¸ªç‚¹å‡»äº‹ä»¶ä¼šå¾—åˆ°å¦‚ä¸‹çš„ç»“æœï¼šä¹Ÿå°±æ˜¯è¯´ï¼Œclickäº‹ä»¶é¦–å…ˆåœ¨buttonå…ƒç´ ä¸Šå‘ç”Ÿï¼Œç„¶åé€çº§å‘ä¸Šä¼ æ’­ã€‚è¿™å°±æ˜¯äº‹ä»¶å†’æ³¡ã€‚ netscapeæå‡ºçš„äº‹ä»¶æ•è·äº‹ä»¶æ•è·çš„æ¦‚å¿µï¼Œä¸äº‹ä»¶å†’æ³¡æ­£å¥½ç›¸åã€‚å®ƒè®¤ä¸ºå½“æŸä¸ªäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œçˆ¶å…ƒç´ åº”è¯¥æ›´æ—©æ¥æ”¶åˆ°äº‹ä»¶ï¼Œå…·ä½“å…ƒç´ åˆ™æœ€åæ¥æ”¶åˆ°äº‹ä»¶ã€‚æ¯”å¦‚è¯´åˆšæ‰çš„demoï¼Œå¦‚æœæ˜¯äº‹ä»¶æ•è·çš„è¯ï¼Œäº‹ä»¶å‘ç”Ÿé¡ºåºä¼šæ˜¯åˆšå¥½ä¸ä¸Šé¢ç›¸åçš„ã€‚å³window,document,document.body,buttonã€‚ è™½ç„¶äº‹ä»¶æ•è·æ˜¯Netscapeå”¯ä¸€æ”¯æŒçš„äº‹ä»¶æµæ¨¡å‹ï¼Œä½†IE9ã€Safariã€Chromeã€Operaå’ŒFirefoxç›®å‰ä¹Ÿéƒ½æ”¯æŒè¿™ç§äº‹ä»¶æµæ¨¡å‹ã€‚ä½†ç”±äºè€ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸æ”¯æŒï¼Œå› æ­¤å¾ˆå°‘æœ‰äººä½¿ç”¨äº‹ä»¶æ•è·ã€‚ æ‰€ä»¥æ”¾å¿ƒçš„ä½¿ç”¨äº‹ä»¶å†’æ³¡ï¼Œæœ‰ç‰¹æ®Šéœ€è¦å†ä½¿ç”¨äº‹ä»¶æ•è·å³å¯ã€‚ DOMäº‹ä»¶æµDOMäº‹ä»¶æµå¯ä»¥åˆ†ä¸ºä¸‹é¢3ä¸ªé˜¶æ®µï¼š äº‹ä»¶æ•è·é˜¶æ®µ å¤„äºç›®æ ‡é˜¶æ®µ äº‹ä»¶å†’æ³¡é˜¶æ®µ äº‹ä»¶æ•è·é˜¶æ®µä¹Ÿå°±æ˜¯è¯´ï¼Œå½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œé¦–å…ˆå‘ç”Ÿçš„æ˜¯äº‹ä»¶æ•è·ï¼Œä¸ºçˆ¶å…ƒç´ æˆªè·äº‹ä»¶æä¾›äº†æœºä¼šã€‚ä¾‹å¦‚ï¼Œæˆ‘æŠŠä¸Šé¢çš„Demoä¸­ï¼Œwindowç‚¹å‡»äº‹ä»¶æ›´æ”¹ä¸ºä½¿ç”¨äº‹ä»¶æ•è·æ¨¡å¼ã€‚ addEventListeneræœ€åä¸€ä¸ªå‚æ•°ï¼Œä¸ºtrueåˆ™ä»£è¡¨ä½¿ç”¨äº‹ä»¶æ•è·æ¨¡å¼ï¼Œfalseåˆ™è¡¨ç¤ºä½¿ç”¨äº‹ä»¶å†’æ³¡æ¨¡å¼ã€‚ 12345678910111213&lt;script&gt; (function()&#123; var btn = document.getElementById(\"click\"); btn.addEventListener(\"click\",function()&#123; console.log(\"1. button\"); &#125;,true) //çœç•¥document.bodyå’Œdocument ..... window.addEventListener(\"click\",function()&#123; console.log(\"4. window\"); &#125;,true) &#125;)() &lt;/script&gt; ç»“æœå¦‚ä¸‹ï¼šå¯ä»¥çœ‹åˆ°ï¼Œç‚¹å‡»äº‹ä»¶å…ˆè¢«çˆ¶å…ƒç´ æˆªè·äº†ï¼Œä¸”è¯¥å‡½æ•°åªåœ¨äº‹ä»¶æ•è·é˜¶æ®µèµ·ä½œç”¨ã€‚ åœ¨DOMäº‹ä»¶æµä¸­ï¼Œäº‹ä»¶çš„ç›®æ ‡åœ¨æ•è·é˜¶æ®µä¸ä¼šæ¥å—åˆ°äº‹ä»¶ã€‚è¿™æ„å‘³ç€åœ¨æ•è·é˜¶æ®µï¼Œäº‹ä»¶ä»documentåˆ°bodyåå°±å®šåœæ­¢äº†ã€‚ä¸‹ä¸€ä¸ªé˜¶æ®µæ˜¯å¤„äºç›®æ ‡é˜¶æ®µï¼Œäºæ˜¯äº‹ä»¶åœ¨buttonä¸Šå‘ç”Ÿï¼Œå¹¶åœ¨äº‹ä»¶å¤„ç†ä¸­è¢«çœ‹æˆå†’æ³¡é˜¶æ®µçš„ä¸€éƒ¨åˆ†ã€‚ç„¶åï¼Œå†’æ³¡é˜¶æ®µå‘ç”Ÿï¼Œäº‹ä»¶åˆä¼ æ’­å›documentã€‚ ä½†æ˜¯ï¼šæˆ‘ä»¬çš„å„å¤§æµè§ˆå™¨æ€»æ˜¯ä¸å–œæ¬¢æŒ‰ç…§è§„èŒƒæ¥ï¼ŒIE9ï¼ŒSafariï¼Œchromeï¼ŒfirefoxåŠå…¶æ›´é«˜çš„ç‰ˆæœ¬ä¸­éƒ½ä¼šåœ¨æ•è·é˜¶æ®µå‡ºå‘äº‹ä»¶å¯¹è±¡ä¸Šçš„äº‹ä»¶ï¼Œæœ€åå¯¼è‡´æœ‰ä¸¤ä¸ªæœºä¼šåœ¨ç›®æ ‡å¯¹è±¡ä¸Šæ“ä½œäº‹ä»¶ã€‚ å¤„äºç›®æ ‡ä¸äº‹ä»¶å†’æ³¡é˜¶æ®µäº‹ä»¶åˆ°äº†å…·ä½“å…ƒç´ æ—¶ï¼Œåœ¨å…·ä½“å…ƒç´ ä¸Šå‘ç”Ÿï¼Œå¹¶ä¸”è¢«çœ‹æˆå†’æ³¡é˜¶æ®µçš„ä¸€éƒ¨åˆ†ã€‚éšåï¼Œå†’æ³¡é˜¶æ®µå‘ç”Ÿï¼Œäº‹ä»¶å¼€å§‹å†’æ³¡ã€‚ é˜»æ­¢äº‹ä»¶å†’æ³¡ä»¶å†’æ³¡è¿‡ç¨‹ï¼Œæ˜¯å¯ä»¥è¢«é˜»æ­¢çš„ã€‚é˜²æ­¢äº‹ä»¶å†’æ³¡è€Œå¸¦æ¥ä¸å¿…è¦çš„é”™è¯¯å’Œå›°æ‰°ã€‚ è¿™ä¸ªæ–¹æ³•å°±æ˜¯:stopPropagation()12345678910111213(function()&#123; var btn = document.getElementById(\"click\"); btn.addEventListener(\"click\",function(event)&#123; console.log(\"1. button\"); event.stopPropagation(); console.log('Stop Propagation!'); &#125;,false) //çœç•¥document.bodyå’Œdocument ..... window.addEventListener(\"click\",function()&#123; console.log(\"4. window\"); &#125;,false)&#125;)() æœ€åç»“æœæ˜¯ï¼š1.buttonï¼ŒStop Propagation!ã€‚é€šè¿‡stopPropagation();é˜»æ­¢äº†äº‹ä»¶çš„å†’æ³¡ã€‚ äº‹ä»¶å¤„ç†ç¨‹åºç±»åˆ«åˆšåˆšæˆ‘ä»¬å·²ç»è®²äº†äº‹ä»¶å¤„ç†ç¨‹åºå°±æ˜¯ç›¸åº”å¤„ç†æŸä¸ªäº‹å‡çš„å‡½æ•°ã€‚å®ƒå¯ä»¥åˆ†ä¸ºå‡ ä¸ªç±»åˆ«ï¼š htmläº‹ä»¶å¤„ç†ç¨‹åºæŸä¸ªå…ƒç´ æ”¯æŒçš„æŸä¸ªäº‹ä»¶å¯ä»¥ç”¨ä¸äº‹ä»¶å¤„ç†ç¨‹åºåŒåçš„htmlç‰¹æ€§æ¥æŒ‡å®šï¼Œè¯¥ç‰¹æ€§çš„å€¼æ˜¯èƒ½å¤Ÿæ‰§è¡Œçš„javascriptä»£ç ,è¿™ä¹Ÿæ˜¯æˆ‘ä»¬æœ€åˆå­¦jsï¼Œæœ€å¼€å§‹çš„æ–¹æ³•ã€‚123456789&lt;script&gt; function show()&#123; alert('æˆ‘è¢«ç‚¹å‡»äº†'); &#125;/* ç‚¹å‡»åä¹Ÿä¼šå¼¹å‡º 'æˆ‘è¢«ç‚¹å‡»äº†'*/&lt;/script&gt;&lt;input type=\"button\" value=\"ç‚¹å‡»\" onclick=\"show()\" /&gt; ä¼˜ç‚¹ï¼šç®€å•æ˜äº†ï¼Œçœå»è·å–å…ƒç´ ç­‰ä¸€ç³»åˆ—å‰ææ“ä½œ ç¼ºç‚¹ï¼šhtmlä»£ç ä¸jsä»£ç é«˜åº¦è€¦åˆï¼Œä¸ç¬¦åˆåˆ†ç¦»åŸåˆ™ DOM0çº§åˆ«äº‹ä»¶å¤„ç†å‡½æ•°DOM0çº§åˆ«äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œä½¿ç”¨ element.on[eventname]=fnçš„æ–¹å¼ç»™å…ƒç´ æ·»åŠ äº‹ä»¶12345678910&lt;input type=\"button\" value=\"ç‚¹å‡»\" id=\"click\" /&gt;&lt;script&gt; var oBtn=document.getElementById('click'); //è¯¥æ–¹å¼è¢«è®¤ä¸ºæ˜¯å…ƒç´ çš„æ–¹æ³•ï¼Œå³äº‹ä»¶å¤„ç†ç¨‹åºåœ¨å…ƒç´ çš„ä½œç”¨åŸŸä¸­è¿›è¡Œï¼Œthiså³è¯¥å…ƒç´ æœ¬èº« oBtn.onclick=function()&#123; alert(this.id);//click &#125; //æ³¨æ„ï¼šåˆ é™¤è¯¥äº‹ä»¶å¤„ç†ç¨‹åºå¯ä»¥ç”¨å¦‚ä¸‹æ–¹æ³• oBtn.onclick=null;//å³ç‚¹å‡»åä¸å†æœ‰ä»»ä½•ååº” &lt;/script&gt; DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åºDOM2çº§æ·»åŠ äº†addEventListenerï¼ˆæ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºï¼‰å’ŒremoveEventListener(ç§»é™¤äº‹ä»¶å¤„ç†ç¨‹åº),ä¹Ÿå°±æ˜¯æˆ‘ä»¬åˆšåˆšè®²çš„ä¸Šé¢çš„DOM2ä¾‹å­ã€‚ æ·»åŠ äº‹ä»¶å¤„ç†å‡½æ•°addEventListener å‚æ•°1 æŒ‡å®šäº‹ä»¶åç§°...click mouseover mouseout å‚æ•°2 äº‹ä»¶å¤„ç†ç¨‹åºï¼ˆåŒ¿åå‡½æ•°æˆ–è€…æœ‰åå‡½æ•°ï¼‰ å‚æ•°3 trueï¼ˆæ•è·é˜¶æ®µå‘ç”Ÿï¼‰ or falseï¼ˆå†’æ³¡é˜¶æ®µå‘ç”Ÿï¼‰ 1234567891011&lt;input type=\"button\" value=\"ç‚¹å‡»\" id=\"click\" /&gt;&lt;script&gt; var oBtn=document.getElementById('click'); oBtn.addEventListener('click',function()&#123; alert(this.id)//click thisæŒ‡çš„æ˜¯è¯¥å…ƒç´ ä½œç”¨åŸŸå†… &#125;,false) //æ³¨æ„è¯¥ç§æ–¹å¼å¯ä»¥ç»™ä¸€ä¸ªå‡½æ•°æ·»åŠ å¤šä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œæ‰§è¡Œé¡ºåºä¸æ·»åŠ é¡ºåºç›¸åŒ oBtn.addEventListener('click',function()&#123; alert('Hello World')//click &#125;,false) &lt;/script&gt; ç§»é™¤äº‹ä»¶å¤„ç†å‡½æ•°removeEventListener å¦‚æœäº‹ä»¶å¤„ç†å‡½æ•°æ˜¯æœ‰åå‡½æ•°ï¼Œåˆ™å¯ä»¥é€šè¿‡åå­—æ¥ç§»é™¤ï¼ŒåŒ¿åå‡½æ•°æ— æ³•ç§»é™¤ã€‚12345678910111213&lt;input type=\"button\" value=\"ç‚¹å‡»\" id=\"click\" /&gt;&lt;script&gt; var oBtn=document.getElementById('click');function showId()&#123; alert(this.id);&#125;;function HelloWorld()&#123; alert('HellowWorld');&#125;oBtn.addEventListener(\"click\",showId,false);oBtn.addEventListener(\"click\",HelloWorld,false);oBtn.removeEventListener('click',showId,false)&lt;/script&gt; æœ€ååªèƒ½å¼¹å‡ºHellowWorld IEäº‹ä»¶å¤„ç†ç¨‹åºattachEvent,detachEvent ieå®ç°äº†ä¸domç±»ä¼¼çš„ä¸¤ä¸ªæ–¹æ³•ï¼ŒattachEventï¼ˆæ·»åŠ ï¼‰ï¼ŒdetachEventï¼ˆåˆ é™¤ï¼‰123 oBtn.attachEvent('onclick',showId);//è¿™æ—¶å€™ä¼šæŠ¥é”™ï¼Œå› ä¸ºè¿™é‡Œçš„æ˜¯åœ¨windowçš„ä½œç”¨åŸŸå†…//ä¿®æ”¹å¦‚ä¸‹oBtn.detachEvent('onclick',showId) ;//ç‚¹å‡»æ²¡æœ‰ä»»ä½•ååº”","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"JSæ¨¡å—åŒ–å·¥å…·requirejs","slug":"JSæ¨¡å—åŒ–å·¥å…·RequireJS","date":"2016-02-18T12:11:54.000Z","updated":"2016-12-12T02:30:00.000Z","comments":true,"path":"2016/02/18/JSæ¨¡å—åŒ–å·¥å…·RequireJS/","link":"","permalink":"http://sevencai.github.io/2016/02/18/JSæ¨¡å—åŒ–å·¥å…·RequireJS/","excerpt":"","text":"ä¸Šä¸€ç¯‡æ–‡ç« è®°å½•çš„æ˜¯AMDå’ŒCMDæ¨¡å—åŒ–æ ‡å‡†ã€‚requireJSå°±åŸºäºAMDã€‚ä¸‹é¢çœ‹çœ‹requireJSçš„åŸºæœ¬çŸ¥è¯†ã€‚ RequireJså‡ºç°çš„åŸå› éšç€ç½‘ç«™åŠŸèƒ½é€æ¸ä¸°å¯Œï¼Œç½‘é¡µä¸­çš„jsä¹Ÿå˜å¾—è¶Šæ¥è¶Šå¤æ‚å’Œè‡ƒè‚¿ï¼ŒåŸæœ‰é€šè¿‡scriptæ ‡ç­¾æ¥å¯¼å…¥ä¸€ä¸ªä¸ªçš„jsæ–‡ä»¶è¿™ç§æ–¹å¼å·²ç»ä¸èƒ½æ»¡è¶³ç°åœ¨äº’è”ç½‘å¼€å‘æ¨¡å¼ï¼Œæˆ‘ä»¬éœ€è¦å›¢é˜Ÿåä½œã€æ¨¡å—å¤ç”¨ã€å•å…ƒæµ‹è¯•ç­‰ç­‰ä¸€ç³»åˆ—å¤æ‚çš„éœ€æ±‚ã€‚æ¯”å¦‚ï¼š1234567&lt;script type=\"text/javascript\" src=\"a.js\"&gt;&lt;/script&gt;&lt;script type=\"text/javascript\" src=\"b.js\"&gt;&lt;/script&gt;&lt;script type=\"text/javascript\" src=\"c.js\"&gt;&lt;/script&gt;&lt;script type=\"text/javascript\" src=\"d.js\"&gt;&lt;/script&gt;&lt;script type=\"text/javascript\" src=\"e.js\"&gt;&lt;/script&gt;&lt;script type=\"text/javascript\" src=\"f.js\"&gt;&lt;/script&gt;....... è¿™æ ·åšæœ‰å¾ˆå¤§çš„é—®é¢˜ã€‚ç»å¸¸ä¼šé€ æˆæˆ‘ä»¬è¯´çš„ç™½é¡µã€‚é¦–å…ˆç”±äºæµè§ˆå™¨å†åŠ è½½è„šæœ¬æ—¶ï¼Œé»˜è®¤æ˜¯é˜»å¡çš„ã€‚å³åœ¨åŠ è½½è¿™äº›jsè„šæœ¬æ—¶ï¼Œä¼šåœæ­¢ç½‘é¡µçš„æ¸²æŸ“ã€‚å½“åŠ è½½çš„æ–‡ä»¶è¶Šæ¥è¶Šå¤šæ—¶ï¼Œç½‘é¡µå¤±å»å“åº”çš„æ—¶é—´å°±ä¼šè¶Šæ¥è¶Šé•¿ã€‚å…¶æ¬¡ï¼Œç”±äºJSä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼ˆæ¯”å¦‚ä½¿ç”¨b.jså¿…é¡»è¦ç­‰éœ€è¦ç­‰å¾…a.jsåŠ è½½å®Œ)ï¼Œæ­¤æ—¶å¿…é¡»ä¸¥æ ¼ä¿è¯è¿™äº›è„šæœ¬çš„ä¹¦å†™ï¼ˆåŠ è½½ï¼‰é¡ºåºã€‚ä¾èµ–æœ€å¤§çš„æ¨¡å—ä¸€å®šè¦æ”¾åœ¨åé¢ã€‚è¿™å°±é€ æˆä»£ç çš„ç¼–å†™å’Œç»´æŠ¤éå¸¸å›°éš¾ã€‚æ¯”å¦‚ï¼š index.html1234567891011&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;script type=\"text/javascript\" src=\"a.js\"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;a href=\"\"&gt;test&lt;/a&gt;&lt;/body&gt;&lt;/html&gt; a.js123456(function()&#123; function fun1()&#123; alert(\"it works\"); &#125; fun1();&#125;)() æ­¤æ—¶åœ¨alert(it works)ä¹‹å‰æµè§ˆå™¨æ˜¯æ²¡æœ‰ä»»ä½•ä¸œè¥¿çš„å¦‚ä¸‹ï¼šæ­¤æ—¶å¦‚æœæˆ‘ä»¬åˆ©ç”¨requireJSå¼‚æ­¥åŠ è½½ã€‚å°±ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚alertçš„åŒæ—¶ï¼Œdomç»“æ„ä¹Ÿä¼šè¢«æ¸²æŸ“å‡ºæ¥ã€‚ RequireJsä½œç”¨åŸºäºä¸Šé¢çš„ç§ç§åŸå› ï¼ŒRequireJSå°±å‡ºç°äº†ã€‚ RequireJSæ˜¯ä¸€ä¸ªéå¸¸å°å·§çš„JavaScriptæ¨¡å—è½½å…¥æ¡†æ¶ï¼Œæ˜¯AMDè§„èŒƒæœ€å¥½çš„å®ç°è€…ä¹‹ä¸€ã€‚æœ€æ–°ç‰ˆæœ¬çš„RequireJSå‹ç¼©ååªæœ‰14Kï¼Œå ªç§°éå¸¸è½»é‡ã€‚å®ƒè¿˜åŒæ—¶å¯ä»¥å’Œå…¶ä»–çš„æ¡†æ¶ååŒå·¥ä½œï¼Œä½¿ç”¨RequireJSå¿…å°†ä½¿æ‚¨çš„å‰ç«¯ä»£ç è´¨é‡å¾—ä»¥æå‡ã€‚ ä¸‹é¢æ˜¯å‡ ç§ä½œç”¨ï¼š å®ç°jsæ–‡ä»¶çš„å¼‚æ­¥åŠ è½½ï¼Œé¿å…ç½‘é¡µå¤±å»å“åº” ç®¡ç†æ¨¡å—ä¹‹é—´çš„ä¾èµ–æ€§ï¼Œä¾¿äºä»£ç çš„ç¼–å†™å’Œç»´æŠ¤ å£°æ˜ä¸åŒjsæ–‡ä»¶ä¹‹é—´çš„ä¾èµ– å¯ä»¥æŒ‰éœ€ã€å¹¶è¡Œã€å»¶æ—¶è½½å…¥jsåº“ å¯ä»¥è®©æˆ‘ä»¬çš„ä»£ç ä»¥æ¨¡å—åŒ–çš„æ–¹å¼ç»„ç»‡ å¼€å§‹ä½¿ç”¨requireJSåœ¨htmlä¸­å¼•å…¥requirejså¦‚æœç›´æ¥åœ¨ç½‘é¡µä¸­è¿™æ ·å†™ï¼š1&lt;script src=\"js/require.js\"&gt;&lt;/script&gt; åŒæ ·ä¹Ÿä¼šå¯èƒ½é€ æˆæµè§ˆå™¨å¤±å»å“åº”ï¼Œå› ä¸ºåŠ è½½è¿™ä¸ªæ–‡ä»¶ã€‚å¯ä»¥ï¼š ä½¿ç”¨deferæˆ–è€…async1&lt;script src=\"js/require.js\" defer async=\"true\" &gt;&lt;/script&gt; asyncå±æ€§è¡¨æ˜è¿™ä¸ªæ–‡ä»¶éœ€è¦å¼‚æ­¥åŠ è½½ï¼Œé¿å…ç½‘é¡µå¤±å»å“åº”ã€‚IEä¸æ”¯æŒè¿™ä¸ªå±æ€§ï¼Œåªæ”¯æŒdeferï¼Œæ‰€ä»¥æŠŠdeferä¹Ÿå†™ä¸Šã€‚ å°†å…¶æ”¾åœ¨bodyæœ€ä¸‹é¢ã€‚æœ€ååŠ è½½ã€‚ æœ€åå†™æˆï¼š1&lt;script src=\"js/require.js\" data-main=\"js/config\" defer async=\"true\"&gt;&lt;/script&gt; é€šå¸¸ä½¿ç”¨requirejsçš„è¯ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¼å…¥requirejså³å¯ï¼Œä¸éœ€è¦æ˜¾å¼å¯¼å…¥å…¶å®ƒçš„jsåº“ï¼Œå› ä¸ºè¿™ä¸ªå·¥ä½œä¼šäº¤ç»™requirejsæ¥åšã€‚ å±æ€§ data-main æ˜¯å‘Šè¯‰requirejsï¼šä½ ä¸‹è½½å®Œä»¥åï¼Œé©¬ä¸Šå»è½½å…¥çœŸæ­£çš„å…¥å£æ–‡ä»¶ã€‚å®ƒä¸€èˆ¬ç”¨æ¥å¯¹requirejsè¿›è¡Œé…ç½®ï¼Œå¹¶ä¸”è½½å…¥çœŸæ­£çš„ç¨‹åºæ¨¡å—ï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯åœ¨jsæ–‡ä»¶å¤¹ä¸‹åˆåˆ›å»ºäº†config.jsã€‚ åŸºæœ¬APIrequireä¼šå®šä¹‰ä¸‰ä¸ªå˜é‡ï¼šdefine,require,requirejsï¼Œå…¶ä¸­require === requirejsï¼Œä¸€èˆ¬ä½¿ç”¨requireæ›´ç®€çŸ­ define ä»åå­—å°±å¯ä»¥çœ‹å‡ºè¿™ä¸ªapiæ˜¯ç”¨æ¥å®šä¹‰ä¸€ä¸ªæ¨¡å— require åŠ è½½ä¾èµ–æ¨¡å—ï¼Œå¹¶æ‰§è¡ŒåŠ è½½å®Œåçš„å›è°ƒå‡½æ•° ä¸»æ¨¡å—çš„å†™æ³•å…ˆæ¥å›å¿†ä¸‹AMDçš„å†™æ³•ï¼š1234// config.jsrequire(['moduleA', 'moduleB', 'moduleC'], function (moduleA, moduleB, moduleC)&#123; // some code here&#125;); require()å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºæ‰€ä¾èµ–çš„æ¨¡å—ï¼Œä¸Šä¾‹å°±æ˜¯[â€˜moduleAâ€™, â€˜moduleBâ€™, â€˜moduleCâ€™]ï¼Œå³ä¸»æ¨¡å—ä¾èµ–è¿™ä¸‰ä¸ªæ¨¡å—ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“å‰é¢æŒ‡å®šçš„æ¨¡å—éƒ½åŠ è½½æˆåŠŸåï¼Œå®ƒå°†è¢«è°ƒç”¨ã€‚åŠ è½½çš„æ¨¡å—ä¼šä»¥å‚æ•°å½¢å¼ä¼ å…¥è¯¥å‡½æ•°ï¼Œä»è€Œåœ¨å›è°ƒå‡½æ•°å†…éƒ¨å°±å¯ä»¥ä½¿ç”¨è¿™äº›æ¨¡å—ã€‚ require()å¼‚æ­¥åŠ è½½moduleAï¼ŒmoduleBå’ŒmoduleCï¼Œæµè§ˆå™¨ä¸ä¼šå¤±å»å“åº”ï¼›å®ƒæŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œåªæœ‰å‰é¢çš„æ¨¡å—éƒ½åŠ è½½æˆåŠŸåï¼Œæ‰ä¼šè¿è¡Œï¼Œè§£å†³äº†ä¾èµ–æ€§çš„é—®é¢˜ã€‚â€“ranyifeng å‡å®šä¸»æ¨¡å—ä¾èµ–jqueryã€underscoreå’Œbackboneè¿™ä¸‰ä¸ªæ¨¡å—ï¼Œconfig.jså°±å¯ä»¥è¿™æ ·å†™ï¼š123require(['jquery', 'underscore', 'backbone'], function ($, _, Backbone)&#123; // some code here&#125;); require.jså‡å®šè¿™ä¸‰ä¸ªæ¨¡å—ä¸config.jsåœ¨åŒä¸€ä¸ªç›®å½•ï¼Œæ–‡ä»¶ååˆ†åˆ«ä¸ºjquery.jsï¼Œunderscore.jså’Œbackbone.jsï¼Œç„¶åè‡ªåŠ¨åŠ è½½ã€‚require.jsä¼šå…ˆåŠ è½½jQueryã€underscoreå’Œbackboneï¼Œç„¶åå†è¿è¡Œå›è°ƒå‡½æ•°ã€‚ä¸»æ¨¡å—çš„ä»£ç å°±å†™åœ¨å›è°ƒå‡½æ•°ä¸­ã€‚ æ¨¡å—çš„åŠ è½½ä¸€èˆ¬config.js(å…¥å£çš„æ–‡ä»¶)çš„ä½œç”¨ä¸»è¦æœ‰ä¸¤ä¸ªï¼š é…ç½®requirejs æ¯”å¦‚é¡¹ç›®ä¸­ç”¨åˆ°å“ªäº›æ¨¡å—ï¼Œæ–‡ä»¶è·¯å¾„æ˜¯ä»€ä¹ˆ è½½å…¥ç¨‹åºä¸»æ¨¡å— ä½¿ç”¨require.config()æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¨¡å—çš„åŠ è½½è¡Œä¸ºè¿›è¡Œè‡ªå®šä¹‰ã€‚require.config()å°±å†™åœ¨ä¸»æ¨¡å—ï¼ˆconfig.jsï¼‰çš„å¤´éƒ¨ã€‚å‚æ•°å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„pathså±æ€§æŒ‡å®šå„ä¸ªæ¨¡å—çš„åŠ è½½è·¯å¾„ã€‚1234567require.config(&#123; paths:&#123; \"jquery\":\"jquery.min\", \"underscore\":\"underscore.min\" \"backbone\":\"backbone.min\" &#125;&#125;) ä¸‹é¢è¿™æ ·å†™pathæ˜¯ç”±äºè¿™äº›jsæ–‡ä»¶éƒ½å’Œconfig.jsæ˜¯åŒçº§ç›®å½•,å¦‚æœä¸æ˜¯åŒçº§ç›®å½•ï¼Œæ¯”å¦‚ä¸‹é¢è¿™äº›æ–‡ä»¶éƒ½åœ¨lib/ä¸‹ï¼Œé‚£ä¹ˆå¯¹åº”ä¸‹é¢çš„pathsä¸­è¦æŒ‡æ˜/lib/jquery.minæˆ–è€…ä½¿ç”¨baseUrl: &quot;js/lib&quot;ã€‚ ä¹‹å‰çš„ä¾‹å­ä¸­åŠ è½½æ¨¡å—éƒ½æ˜¯æœ¬åœ°jsï¼Œä½†æ˜¯å¤§éƒ¨åˆ†æƒ…å†µä¸‹ç½‘é¡µéœ€è¦åŠ è½½çš„JSå¯èƒ½æ¥è‡ªæœ¬åœ°æœåŠ¡å™¨ã€å…¶ä»–ç½‘ç«™æˆ–CDNï¼Œè¿™æ ·å°±ä¸èƒ½é€šè¿‡è¿™ç§æ–¹å¼æ¥åŠ è½½äº†ï¼Œæˆ‘ä»¬ä»¥åŠ è½½ä¸€ä¸ªjqueryåº“ä¸ºä¾‹ï¼š1234567891011require.config(&#123; paths : &#123; \"jquery\" : [\"http://libs.baidu.com/jquery/2.0.3/jquery\"], \"a\" : \"js/a\" &#125;&#125;)require([\"jquery\",\"a\"],function($)&#123; $(function()&#123; alert(\"load finished\"); &#125;)&#125;) é€šè¿‡pathsçš„é…ç½®ä¼šä½¿æˆ‘ä»¬çš„æ¨¡å—åå­—æ›´ç²¾ç‚¼ï¼Œpathsè¿˜æœ‰ä¸€ä¸ªé‡è¦çš„åŠŸèƒ½ï¼Œå°±æ˜¯å¯ä»¥é…ç½®å¤šä¸ªè·¯å¾„ï¼Œå¦‚æœè¿œç¨‹cdnåº“æ²¡æœ‰åŠ è½½æˆåŠŸï¼Œå¯ä»¥åŠ è½½æœ¬åœ°çš„åº“ï¼Œå¦‚ï¼š1234567891011require.config(&#123; paths : &#123; \"jquery\" : [\"http://libs.baidu.com/jquery/2.0.3/jquery\", \"js/jquery\"], \"a\" : \"js/a\" &#125;&#125;)require([\"jquery\",\"a\"],function($)&#123; $(function()&#123; alert(\"load finished\"); &#125;)&#125;) è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ˜¯ä»¥æ•°ç»„çš„å½¢å¼å‡ºç°çš„åŸå› ã€‚è¿™æ ·é…ç½®åï¼Œå½“ç™¾åº¦çš„jqueryæ²¡æœ‰åŠ è½½æˆåŠŸåï¼Œä¼šåŠ è½½æœ¬åœ°jsç›®å½•ä¸‹çš„jqueryã€‚ AMDæ¨¡å—çš„å†™æ³•ä¸Šé¢ä»‹ç»äº†ä¸»æ¨¡å—çš„å†™æ³•ï¼Œä»¥åŠä¸»æ¨¡å—æ˜¯å¦‚ä½•åŠ è½½æ¨¡å—çš„ï¼Œä¸‹é¢æ¥çœ‹äº›æ˜¯å¦‚ä½•ç¼–å†™è¿™äº›AMDæ¨¡å—çš„ã€‚æ¯”å¦‚æˆ‘ä»¬åˆšåˆšå†™çš„a.jsæ˜¯è¿™æ ·å†™çš„ã€‚é€šè¿‡defineå‡½æ•°å®šä¹‰äº†ä¸€ä¸ªæ¨¡å—ï¼Œç„¶åå†é¡µé¢ä¸­ä½¿ç”¨ï¼š1234567define(function()&#123; function fun1()&#123; alert(\"it works\"); &#125; fun1();&#125;) å†ä¾‹å¦‚ä¸€ä¸ªmath.js12345678910111213define(function()&#123; var add = function(x,y)&#123; return x+y; &#125; var sub = function(x,y)&#123; return x-y; &#125; return &#123; add:add, sub:sub &#125;&#125;) config.jsä¸»æ¨¡å—ä¸­åŠ è½½æ–¹æ³•å¦‚ä¸‹ï¼š123456require([\"math\"],function(math)&#123; return math.add(2,3);&#125;)require([\"a\"],function()&#123; alert(\"load finished\");&#125;) å¦‚æœè¿™ä¸ªæ¨¡å—è¿˜ä¾èµ–å…¶ä»–æ¨¡å—ï¼Œé‚£ä¹ˆdefine()å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒæŒ‡æ˜è¯¥æ¨¡å—çš„ä¾èµ–æ€§ã€‚12345678define(['mylib'],function()&#123; function foo()&#123; return mylib.getInfo(); &#125; return &#123; foo:foo &#125;&#125;) å½“require()å‡½æ•°åŠ è½½ä¸Šé¢è¿™ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œå°±ä¼šå…ˆåŠ è½½mylib.jsæ–‡ä»¶ã€‚ åŠ è½½éè§„èŒƒçš„æ¨¡å— ç†è®ºä¸Šï¼Œrequire.jsåŠ è½½çš„æ¨¡å—ï¼Œå¿…é¡»æ˜¯æŒ‰ç…§AMDè§„èŒƒã€ç”¨define()å‡½æ•°å®šä¹‰çš„æ¨¡å—ã€‚ä½†æ˜¯å®é™…ä¸Šï¼Œè™½ç„¶å·²ç»æœ‰ä¸€éƒ¨åˆ†æµè¡Œçš„å‡½æ•°åº“ï¼ˆæ¯”å¦‚jQueryï¼‰ç¬¦åˆAMDè§„èŒƒï¼Œæ›´å¤šçš„åº“å¹¶ä¸ç¬¦åˆã€‚é‚£ä¹ˆï¼Œrequire.jsæ˜¯å¦èƒ½å¤ŸåŠ è½½éè§„èŒƒçš„æ¨¡å—å‘¢ï¼Ÿ æ¯”å¦‚å®šä¹‰ä¸€ä¸ªhello.jsçš„æ¨¡å—ï¼š123function hello()&#123; alert(\"hello\");&#125; å®ƒå°±æŒ‰æœ€æ™®é€šçš„æ–¹å¼å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬èƒ½åœ¨requirejsé‡Œä½¿ç”¨å®ƒå—ï¼Ÿå®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªAMDè§„èŒƒçš„æ¨¡å—ï¼Œå› ä¸ºå¹¶æ²¡æœ‰é€šè¿‡defineå®šä¹‰ã€‚å‡å¦‚æˆ‘ä»¬è¿˜æ˜¯å…ˆå‰çš„æ–¹æ³•æŠŠå®ƒå½“ä½œä¸€ä¸ªæ™®é€šçš„æ¨¡å—ã€‚åœ¨config.jsåˆ©ç”¨pathå®šä¹‰è·¯å¾„ã€‚123456789require.config(&#123; paths:&#123; \"hello\":\"hello\", &#125;&#125;)require([\"hello\"],function()&#123; alert(\"test hello\");&#125;) æ­¤æ—¶ä¼šæŠ¥é”™ï¼šUncaught TypeError: undefined is not a function åŸå› æ˜¯æœ€åè°ƒç”¨ hello() çš„æ—¶å€™ï¼Œè¿™ä¸ª hello æ˜¯ä¸ª undefined . è¿™è¯´æ˜ï¼Œè™½ç„¶æˆ‘ä»¬ä¾èµ–äº†ä¸€ä¸ªjsåº“ï¼ˆå®ƒä¼šè¢«è½½å…¥ï¼‰ï¼Œä½†requirejsæ— æ³•ä»ä¸­æ‹¿åˆ°ä»£è¡¨å®ƒçš„å¯¹è±¡æ³¨å…¥è¿›æ¥ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ shim ï¼Œå°†æŸä¸ªä¾èµ–ä¸­çš„æŸä¸ªå…¨å±€å˜é‡æš´éœ²ç»™requirejsï¼Œå½“ä½œè¿™ä¸ªæ¨¡å—æœ¬èº«çš„å¼•ç”¨ã€‚è¿™æ ·çš„æ¨¡å—åœ¨ç”¨require()åŠ è½½ä¹‹å‰ï¼Œè¦å…ˆç”¨require.config()æ–¹æ³•ï¼Œå®šä¹‰å®ƒä»¬çš„ä¸€äº›ç‰¹å¾ã€‚ å†ä¸¾ä¾‹æ¥è¯´ï¼Œunderscoreå’Œbackboneè¿™ä¸¤ä¸ªåº“ï¼Œéƒ½æ²¡æœ‰é‡‡ç”¨AMDè§„èŒƒç¼–å†™ã€‚å¦‚æœè¦åŠ è½½å®ƒä»¬çš„è¯ï¼Œå¿…é¡»å…ˆå®šä¹‰å®ƒä»¬çš„ç‰¹å¾ã€‚1234567891011require.config(&#123; shim: &#123; 'underscore':&#123; exports: '_' &#125;, 'backbone': &#123; deps: ['underscore', 'jquery'], exports: 'Backbone' &#125; &#125; &#125;); require.config()æ¥å—ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡é™¤äº†æœ‰å‰é¢è¯´è¿‡çš„pathså±æ€§ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªshimå±æ€§ï¼Œä¸“é—¨ç”¨æ¥é…ç½®ä¸å…¼å®¹çš„æ¨¡å—ã€‚å…·ä½“æ¥è¯´ï¼Œæ¯ä¸ªæ¨¡å—è¦å®šä¹‰ï¼ˆ1ï¼‰exportså€¼ï¼ˆè¾“å‡ºçš„å˜é‡åï¼‰ï¼Œè¡¨æ˜è¿™ä¸ªæ¨¡å—å¤–éƒ¨è°ƒç”¨æ—¶çš„åç§°ï¼› å…¶ä¸­depsæ•°ç»„ï¼Œè¡¨æ˜è¯¥æ¨¡å—çš„ä¾èµ–æ€§ã€‚æ¯”å¦‚ï¼ŒjQueryçš„æ’ä»¶(è¿™é‡Œæ˜¯æ»šåŠ¨æ’ä»¶)å¯ä»¥è¿™æ ·å®šä¹‰ï¼š123456shim: &#123; 'jquery.scroll': &#123; deps: ['jquery'], exports: 'jQuery.fn.scroll' &#125; &#125; require.jsæ’ä»¶require.jsè¿˜æä¾›ä¸€ç³»åˆ—æ’ä»¶ï¼Œå®ç°ä¸€äº›ç‰¹å®šçš„åŠŸèƒ½ã€‚domreadyæ’ä»¶ï¼Œå¯ä»¥è®©å›è°ƒå‡½æ•°åœ¨é¡µé¢DOMç»“æ„åŠ è½½å®Œæˆåå†è¿è¡Œã€‚123require(['domready!'], function (doc)&#123; // called once the DOM is ready&#125;); å†æ¯”å¦‚jquery.formæ’ä»¶ï¼ˆæ’ä»¶å½¢å¼çš„éAMDæ¨¡å—ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°jqueryæ’ä»¶ï¼Œè€Œä¸”è¿™äº›æ’ä»¶åŸºæœ¬éƒ½ä¸ç¬¦åˆAMDè§„èŒƒï¼Œæ¯”å¦‚jquery.formæ’ä»¶ï¼Œè¿™æ—¶å€™å°±éœ€è¦å°†formæ’ä»¶â€å«â€åˆ°jqueryä¸­ï¼‰12345678910111213require.config(&#123; shim: &#123; \"underscore\" : &#123; exports : \"_\"; &#125;, \"jquery.form\" : [\"jquery\"] &#125;&#125;)require([\"jquery\", \"jquery.form\"], function($)&#123; $(function()&#123; $(\"#form\").ajaxSubmit(&#123;...&#125;); &#125;)&#125;) æ€»ç»“å¤§è‡´çŸ¥é“äº†requireJSæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œä»¥åŠåŸºæœ¬çš„å¦‚ä½•ä½¿ç”¨ã€‚å¸Œæœ›ä»¥åèƒ½å¤Ÿå¤šå¤šç”¨äºé¡¹ç›®ã€‚è¦ä¸ä¼°è®¡è¿‡ä¸ä¹…åˆå¿˜è®°äº†ã€‚æ„Ÿè°¢å’Œæ¨èé˜®ä¸€å³°çš„æ–‡ç« å’Œæ­¤æ–‡æ¡£","categories":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/categories/å·¥å…·-é…ç½®/"}],"tags":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/tags/å·¥å…·-é…ç½®/"}]},{"title":"AMDå’ŒCMDçš„åŒºåˆ«å’Œè”ç³»","slug":"AMDå’ŒCMDçš„åŒºåˆ«å’Œè”ç³»","date":"2016-02-18T06:17:27.000Z","updated":"2016-12-12T02:58:36.000Z","comments":true,"path":"2016/02/18/AMDå’ŒCMDçš„åŒºåˆ«å’Œè”ç³»/","link":"","permalink":"http://sevencai.github.io/2016/02/18/AMDå’ŒCMDçš„åŒºåˆ«å’Œè”ç³»/","excerpt":"","text":"æ¨¡å—åŒ–æ˜¯æŒ‡åœ¨è§£å†³æŸä¸€ä¸ªå¤æ‚é—®é¢˜æˆ–è€…ä¸€ç³»åˆ—çš„æ‚ç³…é—®é¢˜æ—¶ï¼Œä¾ç…§ä¸€ç§åˆ†ç±»çš„æ€ç»´æŠŠé—®é¢˜è¿›è¡Œç³»ç»Ÿæ€§çš„åˆ†è§£ä»¥ä¹‹å¤„ç†ã€‚æ¨¡å—åŒ–æ˜¯ä¸€ç§å¤„ç†å¤æ‚ç³»ç»Ÿåˆ†è§£ä¸ºä»£ç ç»“æ„æ›´åˆç†ï¼Œå¯ç»´æŠ¤æ€§æ›´é«˜çš„å¯ç®¡ç†çš„æ¨¡å—çš„æ–¹å¼ã€‚å¯ä»¥æƒ³è±¡ä¸€ä¸ªå·¨å¤§çš„ç³»ç»Ÿä»£ç ï¼Œè¢«æ•´åˆä¼˜åŒ–åˆ†å‰²æˆé€»è¾‘æ€§å¾ˆå¼ºçš„æ¨¡å—æ—¶ï¼Œå¯¹äºè½¯ä»¶æ˜¯ä¸€ç§ä½•ç­‰æ„ä¹‰çš„å­˜åœ¨ã€‚å¯¹äºè½¯ä»¶è¡Œä¸šæ¥è¯´ï¼šè§£è€¦è½¯ä»¶ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œä½¿å¾—ä¸ç®¡å¤šä¹ˆå¤§çš„ç³»ç»Ÿï¼Œä¹Ÿå¯ä»¥å°†ç®¡ç†ï¼Œå¼€å‘ï¼Œç»´æŠ¤å˜å¾—â€œæœ‰ç†å¯å¾ªâ€ã€‚ javascriptå¹¶ä¸å…·æœ‰ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„ç±»ï¼Œç»§æ‰¿ï¼Œæ¨¡å—ã€‚ä½†Javascriptç¤¾åŒºåšäº†å¾ˆå¤šåŠªåŠ›ï¼Œåœ¨ç°æœ‰çš„è¿è¡Œç¯å¢ƒä¸­ï¼Œå®ç°â€æ¨¡å—â€çš„æ•ˆæœã€‚ AMD|CMDå‡ºç°çš„åŸå› nodeå‡ºç°æ—¶ï¼Œè·Ÿéšnodeå‡ºç°çš„è¿˜æœ‰commonjsï¼Œè¿™æ˜¯ä¸€ç§jsæ¨¡å—åŒ–è§£å†³æ–¹æ¡ˆï¼ŒåƒNode.jsä¸»è¦ç”¨äºæœåŠ¡å™¨çš„ç¼–ç¨‹ï¼ŒåŠ è½½çš„æ¨¡å—æ–‡ä»¶ä¸€èˆ¬éƒ½å·²ç»å­˜åœ¨æœ¬åœ°ç¡¬ç›˜ï¼Œæ‰€ä»¥åŠ è½½èµ·æ¥æ¯”è¾ƒå¿«ï¼Œå…¶ç­‰å¾…æ—¶é—´å°±æ˜¯ç¡¬ç›˜çš„è¯»å–æ—¶é—´ã€‚ä¸ç”¨è€ƒè™‘å¼‚æ­¥åŠ è½½çš„æ–¹å¼ï¼ŒCommonJS åŠ è½½æ¨¡å—æ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥åªæœ‰åŠ è½½å®Œæˆæ‰èƒ½æ‰§è¡Œåé¢çš„æ“ä½œã€‚ ä½†æ˜¯æµè§ˆå™¨ç¯å¢ƒä¸åŒäºNodeï¼Œæµè§ˆå™¨ä¸­è·å–ä¸€ä¸ªèµ„æºå¿…é¡»è¦å‘é€httpè¯·æ±‚ï¼Œä»æœåŠ¡å™¨ç«¯è·å–ï¼Œé‡‡ç”¨åŒæ­¥æ¨¡å¼å¿…ç„¶ä¼šé˜»å¡æµè§ˆå™¨è¿›ç¨‹å‡ºç°å‡æ­»ç°è±¡ã€‚ æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”±äºæµè§ˆå™¨åŠ è½½jsé»˜è®¤æ˜¯é˜»å¡çš„ï¼Œé‚£ä¹ˆåé¢çš„addè¿‡ç¨‹å°±å¿…é¡»ç­‰å‰é¢requireå®Œæˆï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šé€ æˆå‡æ­»ç°è±¡ï¼š12var math = require(math);math.add(5,6); å› æ­¤ï¼Œæµè§ˆå™¨ç«¯çš„æ¨¡å—ï¼Œä¸èƒ½é‡‡ç”¨â€åŒæ­¥åŠ è½½â€ï¼ˆsynchronousï¼‰ï¼Œåªèƒ½é‡‡ç”¨â€å¼‚æ­¥åŠ è½½â€ï¼ˆasynchronousï¼‰ã€‚åæ¥å‡ºç°æ— é˜»å¡åŠ è½½è„šæœ¬æ–¹å¼åœ¨å¼€å‘ä¸­å¹¿æ³›åº”ç”¨ï¼Œåœ¨æ­¤åŸºç¡€ç»“åˆcommonjsè§„èŒƒï¼Œå‰ç«¯æ¨¡å—åŒ–è¿æ¥äº†ä¸¤ç§æ–¹æ¡ˆï¼šAMDã€CMDã€‚è¿™å°±æ˜¯ä¸¤ç§è§„èŒƒè¯ç”Ÿçš„èƒŒæ™¯ã€‚ AMD|CMDçš„å®šä¹‰AMDï¼ˆAsynchronous Module Definitionï¼‰ï¼ŒCMDï¼ˆCommon Module Definitionï¼‰ AMD æ˜¯ RequireJS åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡ºï¼ŒCMDæ˜¯SeaJS åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­è¢«å¹¿æ³›è®¤çŸ¥ã€‚RequireJså‡ºè‡ªdojoåŠ è½½å™¨çš„ä½œè€…James Burkeï¼ŒSeaJså‡ºè‡ªå›½å†…å‰ç«¯å¤§å¸ˆç‰ä¼¯ã€‚ AMD Asynchronous Module Definitionï¼Œç”¨ç™½è¯æ–‡è®²å°±æ˜¯ å¼‚æ­¥æ¨¡å—å®šä¹‰ï¼Œï¼Œæ‰€æœ‰çš„æ¨¡å—å°†è¢«å¼‚æ­¥åŠ è½½ï¼Œæ¨¡å—åŠ è½½ä¸å½±å“åé¢è¯­å¥è¿è¡Œã€‚æ‰€æœ‰ä¾èµ–è¿™ä¸ªæ¨¡å—çš„è¯­å¥ï¼Œéƒ½å®šä¹‰åœ¨ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸­ï¼Œç­‰åˆ°åŠ è½½å®Œæˆä¹‹åï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°æ‰ä¼šè¿è¡Œã€‚ å®ƒåŒ…å«ä¸‰ä¸ªå‚æ•°1define(id?, dependencies?, factory); ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ id ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼Œè¡¨ç¤ºäº†æ¨¡å—æ ‡è¯†ï¼Œä¸ºå¯é€‰å‚æ•°ã€‚è‹¥ä¸å­˜åœ¨åˆ™æ¨¡å—æ ‡è¯†åº”è¯¥é»˜è®¤å®šä¹‰ä¸ºåœ¨åŠ è½½å™¨ä¸­è¢«è¯·æ±‚è„šæœ¬çš„æ ‡è¯†ã€‚å¦‚æœå­˜åœ¨ï¼Œé‚£ä¹ˆæ¨¡å—æ ‡è¯†å¿…é¡»ä¸ºé¡¶å±‚çš„æˆ–è€…ä¸€ä¸ªç»å¯¹çš„æ ‡è¯†ã€‚ ç¬¬äºŒä¸ªå‚æ•°ï¼Œdependencies ï¼Œæ˜¯ä¸€ä¸ªå½“å‰æ¨¡å—ä¾èµ–çš„ï¼Œå·²è¢«æ¨¡å—å®šä¹‰çš„æ¨¡å—æ ‡è¯†çš„æ•°ç»„å­—é¢é‡ã€‚ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œfactoryï¼Œæ˜¯ä¸€ä¸ªéœ€è¦è¿›è¡Œå®ä¾‹åŒ–çš„å‡½æ•°æˆ–è€…ä¸€ä¸ªå¯¹è±¡ã€‚ ä¸‹é¢ä¾‹å­æ¥è‡ªå®˜æ–¹æ–‡æ¡£ åˆ›å»ºæ¨¡å—æ ‡è¯†ä¸º alpha çš„æ¨¡å—ï¼Œä¾èµ–äº requireï¼Œ exportï¼Œå’Œæ ‡è¯†ä¸º beta çš„æ¨¡å—1234567define(\"alpha\", [\"require\", \"exports\", \"beta\"], function (require, exports, beta) &#123; exports.verb = function() &#123; return beta.verb(); //Or: return require(\"beta\").verb(); &#125;&#125;); ä¸€ä¸ªè¿”å›å¯¹è±¡å­—é¢é‡çš„å¼‚æ­¥æ¨¡å—1234567define([\"alpha\"], function( alpha )&#123; return &#123; verb : function()&#123; return alpha.verb() + 1 ; &#125; &#125;&#125;); æ— ä¾èµ–æ¨¡å—å¯ä»¥ç›´æ¥ä½¿ç”¨å¯¹è±¡å­—é¢é‡æ¥å®šä¹‰12345define( &#123; add : function( x, y )&#123; return x + y ; &#125;&#125; ); ç±»ä¼¼ä¸ CommonJS æ–¹å¼å®šä¹‰12345define( function( require, exports, module)&#123; var a = require('a'), b = require('b'); exports.action = function()&#123;&#125;;&#125; ); CMDå…ˆæ¥çœ‹çœ‹commonJS CommonJSå®šä¹‰çš„æ¨¡å—åˆ†ä¸º:{æ¨¡å—å¼•ç”¨(require)} {æ¨¡å—å®šä¹‰(exports)} {æ¨¡å—æ ‡è¯†(module)}requireç”¨æ¥å¼•å…¥å¤–éƒ¨æ¨¡å—ï¼›exportså¯¹è±¡ç”¨äºå¯¼å‡ºå½“å‰æ¨¡å—çš„æ–¹æ³•æˆ–å˜é‡ï¼Œå”¯ä¸€çš„å¯¼å‡ºå£ï¼›moduleå¯¹è±¡å°±ä»£è¡¨æ¨¡å—æœ¬èº«ã€‚ å¤§åè¿œæ‰¬çš„ç‰ä¼¯å†™äº†seajsï¼Œæå‡ºçš„CMDè§„èŒƒ,æ ¼å¼ä¸ºï¼š1define(factory); define æ¥å— factory å‚æ•°,factory å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°,ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–å­—ç¬¦ä¸²ã€‚ factory ä¸ºå¯¹è±¡ã€å­—ç¬¦ä¸²æ—¶ï¼Œè¡¨ç¤ºæ¨¡å—çš„æ¥å£å°±æ˜¯è¯¥å¯¹è±¡ã€å­—ç¬¦ä¸²ã€‚æ¯”å¦‚å¯ä»¥å¦‚ä¸‹å®šä¹‰ä¸€ä¸ª JSON æ•°æ®æ¨¡å—ï¼š1define(&#123; \"foo\": \"bar\" &#125;); factory ä¸ºå‡½æ•°æ—¶ï¼Œè¡¨ç¤ºæ˜¯æ¨¡å—çš„æ„é€ æ–¹æ³•ã€‚æ‰§è¡Œè¯¥æ„é€ æ–¹æ³•ï¼Œå¯ä»¥å¾—åˆ°æ¨¡å—å‘å¤–æä¾›çš„æ¥å£ã€‚ factory æ–¹æ³•åœ¨æ‰§è¡Œæ—¶ï¼Œé»˜è®¤ä¼šä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šrequireã€exports å’Œ module(æ˜¯ä¸æ˜¯è·Ÿä¸Šé¢æåˆ°çš„commonJSå¾ˆåƒå‘¢)ï¼š123define(function(require, exports, module) &#123; // æ¨¡å—ä»£ç &#125;); define(function (require, exports, module)å’Œexports(æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥å‘å¤–æä¾›æ¨¡å—æ¥å£)è¯¦è§£123456define(function(require, exports) &#123; // å¯¹å¤–æä¾› foo å±æ€§ exports.foo = 'bar'; // å¯¹å¤–æä¾› doSomething æ–¹æ³• exports.doSomething = function() &#123;&#125;;&#125;); é™¤äº†ç»™ exports å¯¹è±¡å¢åŠ æˆå‘˜ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ return ç›´æ¥å‘å¤–æä¾›æ¥å£ã€‚1234567define(function(require) &#123; // é€šè¿‡ return ç›´æ¥æä¾›æ¥å£ return &#123; foo: 'bar', doSomething: function() &#123;&#125; &#125;;&#125;); ç‰¹åˆ«æ³¨æ„ï¼šä¸‹é¢è¿™ç§å†™æ³•æ˜¯é”™è¯¯çš„ï¼1234567define(function(require, exports) &#123; // é”™è¯¯ç”¨æ³•ï¼ï¼! exports = &#123; foo: 'bar', doSomething: function() &#123;&#125; &#125;;&#125;); æ­£ç¡®çš„å†™æ³•æ˜¯ç”¨ return æˆ–è€…ç»™ module.exports èµ‹å€¼ï¼š1234567define(function(require, exports, module) &#123; // æ­£ç¡®å†™æ³• module.exports = &#123; foo: 'bar', doSomething: function() &#123;&#125; &#125;;&#125;); exports ä»…ä»…æ˜¯ module.exports çš„ä¸€ä¸ªå¼•ç”¨ã€‚åœ¨ factory å†…éƒ¨ç»™ exports é‡æ–°èµ‹å€¼æ—¶ï¼Œå¹¶ä¸ä¼šæ”¹å˜module.exports çš„å€¼ã€‚å› æ­¤ç»™ exports èµ‹å€¼æ˜¯æ— æ•ˆçš„ï¼Œä¸èƒ½ç”¨æ¥æ›´æ”¹æ¨¡å—æ¥å£ã€‚ AMD|CMDçš„åŒºåˆ«çŸ¥ä¹ä¸Šç‰ä¼¯å¯¹äº AMD ä¸ CMD åŒºåˆ«çš„è§£é‡Šã€‚ å¯¹äºä¾èµ–çš„æ¨¡å—ï¼ŒAMD æ˜¯æå‰æ‰§è¡Œï¼ŒCMD æ˜¯å»¶è¿Ÿæ‰§è¡Œã€‚ä¸è¿‡ RequireJS ä» 2.0 å¼€å§‹ï¼Œä¹Ÿæ”¹æˆå¯ä»¥å»¶è¿Ÿæ‰§è¡Œï¼ˆæ ¹æ®å†™æ³•ä¸åŒï¼Œå¤„ç†æ–¹å¼ä¸åŒï¼‰ã€‚CMD æ¨å´‡ as lazy as possible. CMD æ¨å´‡ä¾èµ–å°±è¿‘ï¼ŒAMD æ¨å´‡ä¾èµ–å‰ç½®ã€‚çœ‹ä»£ç ï¼š 1234567891011121314151617// CMDdefine(function(require, exports, module) &#123; var a = require('./a') a.doSomething() // æ­¤å¤„ç•¥å» 100 è¡Œ var b = require('./b') // ä¾èµ–å¯ä»¥å°±è¿‘ä¹¦å†™ b.doSomething() // ...&#125;)// AMD é»˜è®¤æ¨èçš„æ˜¯define(['./a', './b'], function(a, b) &#123; // ä¾èµ–å¿…é¡»ä¸€å¼€å§‹å°±å†™å¥½ a.doSomething() // æ­¤å¤„ç•¥å» 100 è¡Œ b.doSomething() // ...&#125;) AMD çš„ API é»˜è®¤æ˜¯ä¸€ä¸ªå½“å¤šä¸ªç”¨ï¼ŒCMD çš„ API ä¸¥æ ¼åŒºåˆ†ï¼Œæ¨å´‡èŒè´£å•ä¸€ã€‚æ¯”å¦‚ AMD é‡Œï¼Œrequire åˆ†å…¨å±€ require å’Œå±€éƒ¨ requireï¼Œéƒ½å« requireã€‚CMD é‡Œï¼Œæ²¡æœ‰å…¨å±€ requireï¼Œè€Œæ˜¯æ ¹æ®æ¨¡å—ç³»ç»Ÿçš„å®Œå¤‡æ€§ï¼Œæä¾› seajs.use æ¥å®ç°æ¨¡å—ç³»ç»Ÿçš„åŠ è½½å¯åŠ¨ã€‚CMD é‡Œï¼Œæ¯ä¸ª API éƒ½ç®€å•çº¯ç²¹ã€‚ AMDæ“…é•¿åœ¨æµè§ˆå™¨ç«¯ã€CMDæ“…é•¿åœ¨æœåŠ¡å™¨ç«¯ã€‚è¿™æ˜¯å› ä¸ºæµè§ˆå™¨åŠ è½½ä¸€ä¸ªåŠŸèƒ½ä¸åƒæœåŠ¡å™¨é‚£ä¹ˆå¿«ï¼Œæœ‰å¤§é‡çš„ç½‘ç»œæ¶ˆè€—ã€‚æ‰€ä»¥ä¸€ä¸ªå¼‚æ­¥loaderæ˜¯æ›´æ¥åœ°æ°”çš„ã€‚ æ€»ç»“ï¼šAMD | é€Ÿåº¦å¿« | ä¼šæµªè´¹èµ„æº | é¢„å…ˆåŠ è½½æ‰€æœ‰çš„ä¾èµ–ï¼Œç›´åˆ°ä½¿ç”¨çš„æ—¶å€™æ‰æ‰§è¡Œ æ€»ç»“ï¼šCMD | åªæœ‰çœŸæ­£éœ€è¦æ‰åŠ è½½ä¾èµ– | æ€§èƒ½è¾ƒå·® | ç›´åˆ°ä½¿ç”¨çš„æ—¶å€™æ‰å®šä¹‰ä¾èµ–","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"http://sevencai.github.io/tags/Nodejs/"}]},{"title":"Flex å¸ƒå±€è¯­æ³•åŠå®ä¾‹","slug":"Flex-å¸ƒå±€è¯­æ³•åŠå®ä¾‹","date":"2016-02-17T14:26:34.000Z","updated":"2016-12-12T03:00:14.000Z","comments":true,"path":"2016/02/17/Flex-å¸ƒå±€è¯­æ³•åŠå®ä¾‹/","link":"","permalink":"http://sevencai.github.io/2016/02/17/Flex-å¸ƒå±€è¯­æ³•åŠå®ä¾‹/","excerpt":"","text":"Flexå…ƒç´ æ˜¯å¯ä»¥è®©ä½ çš„å¸ƒå±€æ ¹æ®æµè§ˆå™¨çš„å¤§å°å˜åŒ–è¿›è¡Œè‡ªåŠ¨ä¼¸ç¼©ã€‚ Flexboxå¸ƒå±€ï¼ˆFlexible Box)æ¨¡å—æ—¨åœ¨æä¾›ä¸€ä¸ªæ›´åŠ æœ‰æ•ˆçš„æ–¹å¼åˆ¶å®šã€è°ƒæ•´å’Œåˆ†å¸ƒä¸€ä¸ªå®¹å™¨é‡Œçš„é¡¹ç›®å¸ƒå±€ï¼Œå³ä½¿ä»–ä»¬çš„å¤§å°æ˜¯æœªçŸ¥æˆ–è€…æ˜¯åŠ¨æ€çš„ã€‚ï¼ˆè¿™é‡Œæˆ‘ä»¬ç§°ä¸ºFlexï¼‰ã€‚ Flexå¸ƒå±€ä¸»è¦æ€æƒ³æ˜¯è®©å®¹å™¨æœ‰èƒ½åŠ›è®©å…¶å­é¡¹ç›®èƒ½å¤Ÿæ”¹å˜å…¶å®½åº¦ã€é«˜åº¦(ç”šè‡³é¡ºåº)ï¼Œä»¥æœ€ä½³æ–¹å¼å¡«å……å¯ç”¨ç©ºé—´ï¼ˆä¸»è¦æ˜¯ä¸ºäº†é€‚åº”æ‰€æœ‰ç±»å‹çš„æ˜¾ç¤ºè®¾å¤‡å’Œå±å¹•å¤§å°ï¼‰ã€‚Flexå®¹å™¨ä¼šä½¿å­é¡¹ç›®ï¼ˆä¼¸ç¼©é¡¹ç›®ï¼‰æ‰©å±•æ¥å¡«æ»¡å¯ç”¨ç©ºé—´ï¼Œæˆ–ç¼©å°ä»–ä»¬ä»¥é˜²æ­¢æº¢å‡ºå®¹å™¨ã€‚ å¸ƒå±€çš„ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆï¼ŒåŸºäºç›’çŠ¶æ¨¡å‹ï¼Œä¾èµ– displayå±æ€§ + positionå±æ€§ + floatå±æ€§ã€‚å®ƒå¯¹äºé‚£äº›ç‰¹æ®Šå¸ƒå±€éå¸¸ä¸æ–¹ä¾¿ï¼Œæ¯”å¦‚ï¼Œå‚ç›´å±…ä¸­å°±ä¸å®¹æ˜“å®ç°ã€‚-ruanyifeng åŸºæœ¬æ¦‚å¿µ ä¼¸ç¼©å®¹å™¨ï¼šä¸€ä¸ªè®¾æœ‰â€œdisplay:flexâ€æˆ–â€œdisplay:inline-flexâ€çš„å…ƒç´  ä¼¸ç¼©é¡¹ç›®ï¼šä¼¸ç¼©å®¹å™¨çš„å­å…ƒç´  å®¹å™¨é»˜è®¤å­˜åœ¨ä¸¤æ ¹è½´ï¼šæ°´å¹³çš„ä¸»è½´ï¼ˆmain axisï¼‰å’Œå‚ç›´çš„äº¤å‰è½´ï¼ˆcross axisï¼‰ã€‚ ä¸»è½´çš„å¼€å§‹ä½ç½®ï¼ˆä¸è¾¹æ¡†çš„äº¤å‰ç‚¹ï¼‰å«åšmain startï¼Œç»“æŸä½ç½®å«åšmain endï¼› äº¤å‰è½´çš„å¼€å§‹ä½ç½®å«åšcross startï¼Œç»“æŸä½ç½®å«åšcross endã€‚ é¡¹ç›®é»˜è®¤æ²¿ä¸»è½´æ’åˆ—ã€‚å•ä¸ªé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´å«åšmain sizeï¼Œå æ®çš„äº¤å‰è½´ç©ºé—´å«åšcross sizeã€‚ å…ˆç…®ä¸ªæ —å­é¦–å…ˆè¦ç»™çˆ¶å®¹å™¨æ·»åŠ display:flexæˆ–è€…inline-flexå±æ€§ã€‚å†åˆ©ç”¨flex-growç»™é¡¹ç›®æ·»åŠ æ¯”ä¾‹ã€‚123456789.parent-box&#123; display: -webkit-flex; display: flex; width:400px; height: 100px; color:white; font-size: 25px; border:1px solid #333;&#125; 12345678.box1&#123; flex-grow:1; background: #8E0FAF;&#125;.box2&#123; flex-grow:2; background: #F7E892;&#125; ä¸‹é¢å°±æ˜¯ç®€å•çš„DOMç»“æ„12345&lt;div class=\"parent-box\"&gt; &lt;div class=\"box1\"&gt;&lt;/div&gt; &lt;div class=\"box2\"&gt;&lt;/div&gt; &lt;div class=\"box1\"&gt;&lt;/div&gt;&lt;/div&gt; é‚£ä¹ˆæ­¤æ—¶æ•´ä¸ªå®½åº¦ä¸º400pxçš„å®¹å™¨ï¼Œå°±è¢«åˆ†æˆäº†3ä¸ªéƒ¨åˆ†ã€‚å¹¶ä¸”æ¯”ä¾‹ä¸º1:2:1ã€‚æ­¤æ—¶ç´«è‰²çš„åŒºåŸŸä¸º100pxï¼Œé»„è‰²åŒºåŸŸä¸º200pxã€‚æ³¨æ„ï¼Œè®¾ä¸ºFlexå¸ƒå±€ä»¥åï¼Œå­å…ƒç´ çš„floatã€clearå’Œvertical-alignå±æ€§å°†å¤±æ•ˆã€‚ä¸‹é¢çš„ä¾‹å­éƒ¨åˆ†åŸºäºæ­¤ä¾‹ã€‚ å®¹å™¨å…·æœ‰çš„å±æ€§ flex-direction å±æ€§å†³å®šä¸»è½´çš„æ–¹å‘ï¼ˆå³é¡¹ç›®çš„æ’åˆ—æ–¹å‘ï¼‰ flex-wrap å±æ€§å®šä¹‰ï¼Œå¦‚æœä¸€æ¡è½´çº¿æ’ä¸ä¸‹ï¼Œå¦‚ä½•æ¢è¡Œã€‚ flex-flow å±æ€§æ˜¯flex-directionå±æ€§å’Œflex-wrapå±æ€§çš„ç®€å†™å½¢å¼ï¼Œé»˜è®¤å€¼ä¸ºrow nowrap justify-content å±æ€§å®šä¹‰äº†é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚ align-items å±æ€§å®šä¹‰é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½ã€‚ align-content å±æ€§å®šä¹‰äº†å¤šæ ¹è½´çº¿çš„å¯¹é½æ–¹å¼ã€‚å¦‚æœé¡¹ç›®åªæœ‰ä¸€æ ¹è½´çº¿ï¼Œè¯¥å±æ€§ä¸èµ·ä½œç”¨ã€‚ è¯¦ç»†è§£é‡Šå¦‚ä¸‹ï¼š flex-directionå±æ€§å†³å®šä¸»è½´çš„æ–¹å‘ï¼ˆå³é¡¹ç›®çš„æ’åˆ—æ–¹å‘ï¼‰1flex-direction: row | row-reverse | column | column-reverse; åˆ†åˆ«ç»™parent-boxæ·»åŠ è¿™äº›æ ·å¼å°†ä¼šå¾—åˆ°ä¸‹é¢çš„æƒ…å½¢ï¼š123456789101112.parent-box1&#123; flex-direction:column;//æ¨ªå‘æ’åˆ—ï¼Œä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œèµ·ç‚¹åœ¨å·¦ç«¯ã€‚&#125;.parent-box2&#123; flex-direction:row;//çºµå‘æ’åˆ—ï¼Œè½´ä¸ºå‚ç›´æ–¹å‘ï¼Œèµ·ç‚¹åœ¨ä¸Šæ²¿ã€‚&#125;.parent-box3&#123; flex-direction:row-reverse;//çºµå‘æ’åˆ—ï¼Œä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œèµ·ç‚¹åœ¨å³ç«¯ã€‚&#125;.parent-box4&#123; flex-direction:column-reverse;//æ¨ªå‘æ’åˆ—å¹¶ä¸”ç›¸åï¼Œä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œèµ·ç‚¹åœ¨å³ç«¯ã€‚&#125; æ³¨æ„è¿™é‡Œæ˜¯åŸºäºä¸Šé¢çš„ä¸€ä¸ªä¾‹å­ï¼Œåˆ©ç”¨ç±»æ ·å¼åˆ†ç¦»ï¼ˆæŠŠå…¬å…±çš„ä»£ç æå–å‡ºæ¥ï¼‰å¯ä»¥å‡å°‘ä»£ç ã€‚è¿™é‡Œåœ¨parent-boxçš„æ ·å¼ä¸Šï¼Œå¢åŠ äº†ä¸Šé¢çš„parent-box1ã€‚å…¶ä½™çš„å‡ ä¸ªç±»ä¼¼ã€‚12345&lt;div class=\"parent-box parent-box1\"&gt; &lt;div class=\"box1\"&gt;1&lt;/div&gt; &lt;div class=\"box2\"&gt;2&lt;/div&gt; &lt;div class=\"box1\"&gt;3&lt;/div&gt;&lt;/div&gt; flex-wrapå±æ€§å®šä¹‰ï¼Œå¦‚æœä¸€æ¡è½´çº¿æ’ä¸ä¸‹ï¼Œå¦‚ä½•æ¢è¡Œ1flex-wrap: nowrap | wrap | wrap-reverse; nowrapï¼ˆé»˜è®¤ï¼‰ï¼šä¸æ¢è¡Œã€‚ wrapï¼šæ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸Šæ–¹ã€‚ wrap-reverseï¼šæ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸‹æ–¹ã€‚ æ¯”å¦‚æˆ‘ä¸€ä¸ªç›’å­è®¾ç½®ä¸ºäº†400pxï¼Œæˆ‘ä¸€å…±æœ‰ä¸‰ä¸ªå­ç›’å­ï¼Œå¹¶ä¸”ä¸€ä¸ªç›’å­æ˜¯150pxï¼Œé‚£ä¹ˆ400pxè‚¯å®šæ˜¯æ”¾ä¸ä¸‹è¿™ä¸‰ä¸ªç›’å­çš„ã€‚æ­¤æ—¶åˆ©ç”¨flex-wrapå¯ä»¥è§£å†³æ­¤æ—¶æ˜¯æ¢è¡Œè¿˜æ˜¯ä¸æ¢è¡Œçš„é—®é¢˜ã€‚å¦‚æœè®¾ç½®ä¸ºä¸æ¢è¡Œï¼Œé‚£ä¹ˆæ­¤æ—¶è¿™400pxä¼šå†æ¬¡ç­‰åˆ†ã€‚ç›¸å½“äºåˆšåˆšè®¾ç½®çš„æ¯ä¸ªç›’å­150pxå¤±æ•ˆã€‚å¦‚æœè®¾ç½®ä¸ºæ¢è¡Œï¼Œé‚£ä¹ˆæ­¤æ—¶å°†ä¼šåˆ†æˆä¸Šä¸‹ä¸¤è¡Œã€‚ä¸ºäº†çœ‹å¾—æ›´æ¸…æ¥šæˆ‘ç»™çˆ¶å®¹å™¨è®¾ç½®äº†è¾¹æ¡†ã€‚æ•ˆæœå¦‚ä¸‹ï¼š123456789101112.parent-box5&#123; -webkit-flex-wrap:wrap; flex-wrap:wrap;&#125;.parent-box6&#123; -webkit-flex-wrap:nowrap; flex-wrap:nowrap;&#125;.parent-box7&#123; -webkit-flex-wrap:wrap-reverse; flex-wrap:wrap-reverse;&#125; æ³¨æ„æ¢æˆä¸¤è¡Œåï¼Œç¬¬äºŒè¡Œæ˜¯ä¸å æ®ç©ºé—´çš„ã€‚è¿™ä¸ªæ€ä¹ˆåŠï¼Œã€‚ã€‚æ±‚è§£ï¼Ÿã€‚12345&lt;div class=\"parent-box parent-box5\"&gt; &lt;div class=\"box3\"&gt;3&lt;/div&gt; &lt;div class=\"box4\"&gt;4&lt;/div&gt; &lt;div class=\"box5\"&gt;5&lt;/div&gt;&lt;/div&gt; flex-flowæ˜¯flex-directionå±æ€§å’Œflex-wrapå±æ€§çš„ç®€å†™å½¢å¼ï¼Œé»˜è®¤å€¼ä¸ºrow nowrap1flex-flow: &lt;flex-direction&gt; || &lt;flex-wrap&gt;; justify-contentå±æ€§å®šä¹‰äº†é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼å¯ä»¥å–ä¸‹é¢5ä¸ªå€¼1justify-content: flex-start | flex-end | center | space-between | space-around; 123456789101112131415.parent-box8&#123; justify-content:flex-start;&#125;.parent-box9&#123; justify-content:flex-end;&#125;.parent-box10&#123; justify-content:center;&#125;.parent-box11&#123; justify-content:space-between;&#125;.parent-box12&#123; justify-content:space-around;&#125; align-itemså±æ€§å®šä¹‰é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½1align-items: flex-start | flex-end | center | baseline | stretch; align-contentå±æ€§å®šä¹‰äº†å¤šæ ¹è½´çº¿çš„å¯¹é½æ–¹å¼å¦‚æœé¡¹ç›®åªæœ‰ä¸€æ ¹è½´çº¿ï¼Œè¯¥å±æ€§ä¸èµ·ä½œç”¨ã€‚1align-content: flex-start | flex-end | center | space-between | space-around | stretch; ä¸Šé¢è®²çš„éƒ½æ˜¯å®¹å™¨çš„å±æ€§ï¼Œå…¶å®è¿˜æœ‰é¡¹ç›®çš„å±æ€§ã€‚ orderorderå±æ€§å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚ flex-growæ­¤å±æ€§å€¼ä¸ºæ­£æ•°å€¼ï¼Œç”¨æ¥è®¾ç½®æ‰©å±•æ¯”ç‡ï¼Œä¹Ÿå°±æ˜¯å‰©ä½™ç©ºé—´æ˜¯æ­£å€¼çš„æ—¶å€™æ­¤ä¼¸ç¼©é¡¹ç›®ç›¸å¯¹äºä¼¸ç¼©å®¹å™¨é‡Œå…¶ä»–ä¼¸ç¼©é¡¹ç›®èƒ½åˆ†é…åˆ°ç©ºé—´æ¯”ä¾‹ã€‚è‹¥çœç•¥åˆ™ä¼šè¢«è®¾ç½®ä¸ºâ€œ1â€ã€‚ flex-shrinkæ­¤å±æ€§å€¼ä¸ºæ­£æ•°å€¼ï¼Œç”¨æ¥è®¾ç½®æ”¶ç¼©æ¯”ç‡ï¼Œä¹Ÿå°±æ˜¯å‰©ä½™ç©ºé—´æ˜¯è´Ÿå€¼çš„æ—¶å€™æ­¤ä¼¸ç¼©é¡¹ç›®ç›¸å¯¹äºä¼¸ç¼©å®¹å™¨é‡Œå…¶ä»–ä¼¸ç¼©é¡¹ç›®èƒ½æ”¶ç¼©çš„ç©ºé—´æ¯”ä¾‹ã€‚è‹¥çœç•¥åˆ™ä¼šè¢«è®¾ç½®ä¸ºâ€œ1â€ï¼Œåœ¨æ”¶ç¼©çš„æ—¶å€™æ”¶ç¼©æ¯”ç‡ä¼šä»¥ä¼¸ç¼©åŸºå‡†å€¼åŠ æƒã€‚ flex-basisflex-basiså±æ€§å®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ï¼ˆmain sizeï¼‰ã€‚æµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ã€‚å®ƒçš„é»˜è®¤å€¼ä¸ºautoï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°ã€‚ flexflexå±æ€§æ˜¯flex-grow, flex-shrink å’Œ flex-basisçš„ç®€å†™ï¼Œé»˜è®¤å€¼ä¸º0 1 autoã€‚åä¸¤ä¸ªå±æ€§å¯é€‰ã€‚ align-selfalign-selfå±æ€§å…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œå¯è¦†ç›–align-itemså±æ€§ã€‚é»˜è®¤å€¼ä¸ºautoï¼Œè¡¨ç¤ºç»§æ‰¿çˆ¶å…ƒç´ çš„align-itemså±æ€§ï¼Œå¦‚æœæ²¡æœ‰çˆ¶å…ƒç´ ï¼Œåˆ™ç­‰åŒäºstretchã€‚ ä¸¾å‡ ä¸ªflexçš„ä¾‹å­flexå±æ€§æ˜¯flex-grow, flex-shrink å’Œ flex-basisçš„ç®€å†™ï¼Œé»˜è®¤å€¼ä¸º0 1 autoã€‚åä¸¤ä¸ªå±æ€§å¯é€‰ã€‚ä¾‹å­1â€”â€”flex-growä¸flex-basisï¼š123456789#first &#123; flex: 1 200px;&#125; #second &#123; flex: 2 300px;&#125; #third &#123; flex: 1 250px;&#125; é¦–å…ˆflex-basisçš„å€¼ä¸»è¦å–å†³äºä¼¸ç¼©é¡¹ç›®çš„widthæˆ–è€…é«˜ï¼ŒåŒæ—¶å–å†³äºæµåŠ¨æ–¹å‘ã€‚ç„¶åï¼Œå‰©ä¸‹çš„ç©ºé—´æ ¹æ®flex-growç»™ä¼¸ç¼©é¡¹ç›®æœ€åå®½åº¦æ¥åˆ’åˆ†ã€‚æ‰€ä»¥ä¼¸ç¼©é¡¹ç›®ä¼šæ²¿ç€ä¸»è½´çº¿å¤§å°ä¸º200pxã€300pxå’Œ250px,æ€»å…±750pxã€‚å¦‚æœä¼¸ç¼©å®¹å™¨æ²¿ä¸»è½´æ–¹å‘æ˜¯950px,è¿™æ ·å°±ä¼šå¤šå‡ºä¸€ä¸ª200pxç©ºé—´ï¼Œé‚£ä¹ˆè¿™å¤šå‡ºçš„200pxç©ºé—´å°†åˆ†é…ç»™ä¼¸ç¼©é¡¹ç›®ã€‚ç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ªä¼¸ç¼©é¡¹ç›®å°†å¾—åˆ°50pxçš„ç©ºé—´ï¼Œå› ä¸ºä»–çš„flex-growå€¼æ˜¯â€œ1â€,ä»–ä»¬æœ€ç»ˆçš„ç©ºé—´æ˜¯250pxå’Œ300pxã€‚ç¬¬äºŒä¸ªä¼¸ç¼©é¡¹ç›®å°†è·å¾—100pxç©ºé—´ï¼Œå› ä¸ºä»–çš„flex-growå€¼ä¸ºâ€œ2â€,ä»–çš„æœ€åç©ºé—´å¤§å°ä¸º400pxã€‚ ä¾‹å­2â€”â€”flex-growä¸flex-shrinkä¸flex-basis123456789#first &#123; flex: 1 1 400px;&#125; #second &#123; flex: 2 3 600px;&#125; #third &#123; flex: 1 2 400px;&#125; flex-shrinkç§°ä¸ºæ”¶ç¼©æ¯”ç‡ã€‚è¿™ä¸ªå€¼åªæœ‰ä¼¸ç¼©é¡¹ç›®åœ¨æ²¡ä¸»è½´æ–¹å‘æº¢å‡ºä¼¸ç¼©å®¹å™¨æ‰ä¼šå‘æŒ¥ä½œç”¨ã€‚ä»–ä»¬å……å½“æ¯”ä¾‹å€¼ï¼Œä½†è¿™å›æŒ‡çš„æ˜¯æº¢å‡ºé‡ï¼Œå°†è¿™ä¸ªæº¢å‡ºé‡æŒ‰æ¯”ä¾‹åˆ†é…ç»™æ¯ä¸ªä¼¸ç¼©é¡¹ç›®ï¼Œç”¨äºé˜²æ­¢ä¼¸ç¼©å®¹å™¨æº¢å‡ºã€‚ æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬ä¼¸ç¼©å®¹å™¨æ²¿ä¸»è½´æ–¹å‘å®½åº¦æ˜¯1100pxï¼ŒæŒ‰ç…§ä¸Šé¢çš„ç¤ºä¾‹ä»£ç è®¡ç®—ï¼Œæˆ‘ä»¬çš„ä¼¸ç¼©é¡¹ç›®ä¼šè¶…å‡º300px(ä¼¸ç¼©é¡¹ç›®æ²¿ä¸»è½´æ–¹å‘æ€»å€¼ä¸º1400px)ï¼Œè¿™ä¸ªæ—¶å€™é€šè¿‡flex-shrinkæ”¶ç¼©ä»–ä»¬ï¼š ç¬¬ä¸€ä¸ªä¼¸ç¼©é¡¹ç›®å°†å¾—åˆ°æº¢å‡ºé‡çš„å…­åˆ†ä¹‹ä¸€ï¼Œä¹Ÿå°±æ˜¯50pxï¼Œè¿™ä¸ªæ—¶å€™ä»–çš„å€¼ä¸º350px(åœ¨å½“åˆçš„åŸºç¡€ä¸Šå‡å°‘50px)ã€‚ ç¬¬äºŒä¸ªä¼¸ç¼©é¡¹ç›®å°†å¾—åˆ°æº¢å‡ºé‡çš„å…­åˆ†ä¹‹ä¸‰ï¼Œä¹Ÿå°±æ˜¯150pxï¼Œè¿™ä¸ªæ—¶å€™ä»–çš„å€¼ä¸º450px(åœ¨å½“åˆçš„åŸºç¡€ä¸Šå‡å°‘150px)ã€‚ ç¬¬ä¸‰ä¸ªä¼¸ç¼©é¡¹ç›®å°†å¾—åˆ°æº¢å‡ºçš„å…­åˆ†ä¹‹äºŒï¼Œå°±å°±æ˜¯100pxï¼Œè¿™ä¸ªæ—¶å€™ä»–çš„å€¼ä¸º300px(åœ¨å½“åˆçš„åŸºç¡€ ä¸Šå‡å°‘100px)ã€‚ è¿™æ ·flex-shrinkä½¿ç”¨ä¼¸ç¼©é¡¹ç›®å¾—åˆ°ä¸€ä¸ªè¾ƒå°çš„å®½åº¦ã€‚ ä¾‹å­3â€”â€”align-selfå±æ€§å¯ä»¥å®ç°çš„æ•ˆæœ æ—§ç‰ˆæœ¬çš„box flexè¿™ä¸ªä»¥å‰æœ‰å†™æ—§çš„å†™æ³•(åªåˆ—ä¸¾äº†éƒ¨åˆ†)ï¼Œè¯¦ç»†å¯ä»¥çœ‹ï¼šæ—§å†™æ³•ï¼ˆé€šè¿‡å®¡æŸ¥å…ƒç´ å³å¯çœ‹ï¼‰ å…¶è¯­æ³•ä¸åŒï¼Œè€Œä¸”ä¹Ÿæ›´åŠ ä¸å…¼å®¹ã€‚æ¯”å¦‚ï¼š12345678910111213141516#parent-box&#123; display: -moz-box; display: -webkit-box; display: box; .....&#125;#parent-box2&#123; -moz-box-orient:horizontal|vertical; -webkit-box-orient:horizontal|vertical; box-orient:horizontal|vertical;&#125;#box1&#123; -moz-box-flex:1; -webkit-box-flex:1; box-flex:1;&#125; å¤§æ¦‚çŸ¥é“Flexæ˜¯å¹²ä»€ä¹ˆçš„äº†ã€‚æ„Ÿè°¢é˜®ä¸€å³°çš„æ–‡ç« ï¼Œè¿™ä¸ªç»å¯¹è®²çš„æ¸…æ¥šã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Css","slug":"Css","permalink":"http://sevencai.github.io/tags/Css/"}]},{"title":"javascriptåŒæ­¥å’Œå¼‚æ­¥åŠ è½½åŠasyncå’ŒdifferåŒºåˆ«","slug":"javascriptåŒæ­¥å’Œå¼‚æ­¥åŠ è½½åŠasyncå’ŒdifferåŒºåˆ«","date":"2016-02-16T14:04:49.000Z","updated":"2016-12-12T03:00:38.000Z","comments":true,"path":"2016/02/16/javascriptåŒæ­¥å’Œå¼‚æ­¥åŠ è½½åŠasyncå’ŒdifferåŒºåˆ«/","link":"","permalink":"http://sevencai.github.io/2016/02/16/javascriptåŒæ­¥å’Œå¼‚æ­¥åŠ è½½åŠasyncå’ŒdifferåŒºåˆ«/","excerpt":"","text":"ä¸»è¦å¼„æ¸…æ¥šå‡ ä¸ªæ¦‚å¿µï¼šå¼‚æ­¥åŠ è½½ï¼ˆasync loadingï¼‰ï¼Œå»¶è¿ŸåŠ è½½ï¼ˆlazy loadingï¼‰ï¼Œå»¶è¿Ÿæ‰§è¡Œï¼ˆlazy executionï¼‰ï¼Œasync å±æ€§ï¼Œ defer å±æ€§ã€‚ javascriptçš„åŒæ­¥ï¼Œå¼‚æ­¥ï¼Œå»¶è¿ŸåŠ è½½ åŠ è½½çš„ç½‘ç»œ timeline æ˜¯ç€‘å¸ƒæ¨¡å‹ï¼Œè€Œå¼‚æ­¥åŠ è½½çš„ timeline æ˜¯å¹¶å‘æ¨¡å‹ã€‚ åŒæ­¥åŠ è½½åŒæ­¥æ¨¡å¼ï¼Œåˆç§°é˜»å¡æ¨¡å¼ã€‚javascriptåœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¼šé˜»å¡åŠ è½½çš„ã€‚å½“å‰é¢çš„javascriptè¯·æ±‚æ²¡æœ‰å¤„ç†å’Œæ‰§è¡Œå®Œæ—¶ï¼Œä¼šé˜»æ­¢æµè§ˆå™¨çš„åç»­å¤„ç†ï¼Œå¦‚æ–‡ä»¶åŠ è½½ï¼ˆå›¾åƒï¼‰ï¼ŒDOM treeçš„æ¸²æŸ“ï¼Œä»£ç çš„æ‰§è¡Œã€‚ jsä¹‹æ‰€ä»¥è¦åŒæ­¥æ‰§è¡Œï¼Œæ˜¯å› ä¸º js ä¸­å¯èƒ½æœ‰è¾“å‡º document å†…å®¹ã€ä¿®æ”¹domã€é‡å®šå‘ç­‰è¡Œä¸ºï¼Œæ‰€ä»¥é»˜è®¤åŒæ­¥æ‰§è¡Œæ‰æ˜¯å®‰å…¨çš„ã€‚ä»¥å‰çš„ä¸€èˆ¬å»ºè®®æ˜¯æŠŠscriptæ”¾åœ¨é¡µé¢æœ«å°¾ä¹‹å‰ï¼Œè¿™æ ·å°½å¯èƒ½å‡å°‘è¿™ç§é˜»å¡è¡Œä¸ºï¼Œè€Œå…ˆè®©é¡µé¢å±•ç¤ºå‡ºæ¥ã€‚ å¼‚æ­¥åŠ è½½å¼‚æ­¥åŠ è½½åˆå«éé˜»å¡ï¼Œæµè§ˆå™¨åœ¨ä¸‹è½½æ‰§è¡Œ js åŒæ—¶ï¼Œè¿˜ä¼šç»§ç»­è¿›è¡Œåç»­é¡µé¢çš„å¤„ç†ã€‚æœ‰å¾ˆå¤šç§æ–¹å¼å¯ä»¥å®ç°å¼‚æ­¥åŠ è½½ã€‚ä¸‹é¢æ˜¯å…¶ä¸­çš„å‡ ç§ã€‚ å»¶è¿ŸåŠ è½½å»¶è¿ŸåŠ è½½ï¼šæœ‰äº› js ä»£ç å¹¶ä¸æ˜¯é¡µé¢åˆå§‹åŒ–çš„æ—¶å€™å°±ç«‹åˆ»éœ€è¦çš„ï¼Œè€Œç¨åçš„æŸäº›æƒ…å†µæ‰éœ€è¦çš„ã€‚å»¶è¿ŸåŠ è½½å°±æ˜¯ä¸€å¼€å§‹å¹¶ä¸åŠ è½½è¿™äº›æš‚æ—¶ä¸ç”¨çš„jsï¼Œè€Œæ˜¯åœ¨éœ€è¦çš„æ—¶å€™æˆ–ç¨åå†é€šè¿‡js çš„æ§åˆ¶æ¥å¼‚æ­¥åŠ è½½ã€‚ ä¹Ÿå°±æ˜¯å°† js åˆ‡åˆ†æˆè®¸å¤šæ¨¡å—ï¼Œé¡µé¢åˆå§‹åŒ–æ—¶åªåŠ è½½éœ€è¦ç«‹å³æ‰§è¡Œçš„ js ï¼Œç„¶åå…¶å®ƒ js çš„åŠ è½½å»¶è¿Ÿåˆ°ç¬¬ä¸€æ¬¡éœ€è¦ç”¨åˆ°çš„æ—¶å€™å†åŠ è½½ã€‚ ç‰¹åˆ«æ˜¯é¡µé¢æœ‰å¤§é‡ä¸åŒçš„æ¨¡å—ç»„æˆï¼Œå¾ˆå¤šå¯èƒ½æš‚æ—¶ä¸ç”¨æˆ–æ ¹æœ¬å°±æ²¡ç”¨åˆ°ã€‚å°±åƒå›¾ç‰‡çš„å»¶è¿ŸåŠ è½½ï¼Œåœ¨å›¾ç‰‡å‡ºç°åœ¨å¯è§†åŒºåŸŸå†…æ—¶ï¼ˆåœ¨æ»šåŠ¨æ¡ä¸‹æ‹‰ï¼‰æ‰åŠ è½½æ˜¾ç¤ºå›¾ç‰‡ã€‚ å¼‚æ­¥åŠ è½½çš„å‡ ç§æ–¹æ³• Script DOM Elementæ–¹æ³•12345678(function() &#123; var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'http://yourdomain.com/script.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); &#125;)(); è¿™ç§æ–¹æ³•æ˜¯åœ¨é¡µé¢ä¸­scriptæ ‡ç­¾å†…ï¼Œç”¨ js åˆ›å»ºä¸€ä¸ª script å…ƒç´ å¹¶æ’å…¥åˆ° document ä¸­ã€‚è¿™æ ·å°±åšåˆ°äº†éé˜»å¡çš„ä¸‹è½½ js ä»£ç ã€‚å°†jsä»£ç åŒ…è£¹åœ¨åŒ¿åå‡½æ•°ä¸­å¹¶ç«‹å³æ‰§è¡Œçš„æ–¹å¼æ˜¯ä¸ºäº†ä¿æŠ¤å˜é‡åæ³„éœ²åˆ°å¤–éƒ¨å¯è§ï¼Œè¿™æ˜¯å¾ˆå¸¸è§çš„æ–¹å¼ï¼Œå°¤å…¶æ˜¯åœ¨ js åº“ä¸­è¢«æ™®éä½¿ç”¨ã€‚æˆ‘çš„åšå®¢å°±ç”¨äº†ç™¾åº¦ç»Ÿè®¡ï¼Œé‡Œé¢è„šæœ¬ä¹Ÿæ˜¯é€šè¿‡è¿™ç§æ–¹å¼ã€‚123456789&lt;script&gt;var _hmt = _hmt || [];(function() &#123; var hm = document.createElement(\"script\"); hm.src = \"******\"; var s = document.getElementsByTagName(\"script\")[0]; s.parentNode.insertBefore(hm, s);&#125;)();&lt;/script&gt; ä½†æ˜¯ï¼Œè¿™ç§åŠ è½½æ–¹å¼åœ¨åŠ è½½æ‰§è¡Œå®Œä¹‹å‰ä¼šé˜»æ­¢ onload äº‹ä»¶çš„è§¦å‘ï¼Œè€Œç°åœ¨å¾ˆå¤šé¡µé¢çš„ä»£ç éƒ½åœ¨ onload æ—¶è¿˜è¦æ‰§è¡Œé¢å¤–çš„æ¸²æŸ“å·¥ä½œç­‰ï¼Œæ‰€ä»¥è¿˜æ˜¯ä¼šé˜»å¡éƒ¨åˆ†é¡µé¢çš„åˆå§‹åŒ–å¤„ç†ã€‚ onloadæ—¶çš„å¼‚æ­¥åŠ è½½1234567891011121314(function() &#123; function async_load()&#123; var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'http://yourdomain.com/script.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); &#125; if (window.attachEvent) window.attachEvent('onload', async_load); else window.addEventListener('load', async_load, false); &#125;)(); è¿™å’Œå‰é¢çš„æ–¹å¼å·®ä¸å¤šï¼Œä½†å…³é”®æ˜¯å®ƒä¸æ˜¯ç«‹å³å¼€å§‹å¼‚æ­¥åŠ è½½ js ï¼Œè€Œæ˜¯åœ¨ onload æ—¶æ‰å¼€å§‹å¼‚æ­¥åŠ è½½ã€‚è¿™æ ·å°±è§£å†³äº†é˜»å¡ onload äº‹ä»¶è§¦å‘çš„é—®é¢˜ã€‚è¿™ç§æ–¹æ³•ä¹Ÿæ˜¯googleæœ€æ¨èçš„æ–¹æ³•ã€‚å› ä¸ºå®ƒå®Œå…¨è§£å†³åœ¨webé¡µé¢å®Œå…¨åŠ è½½åï¼Œå†åŠ è½½å¤–éƒ¨jsçš„é—®é¢˜ã€‚ deferå’Œasyncåœ¨çœ‹è¿™ä¸¤ä¸ªçš„ä½œç”¨å’ŒåŒºåˆ«ä¹‹å‰ï¼Œä¸€å®šè¦å…ˆç†è§£ä¸‹é¢å†…å®¹ã€‚ JSçš„åŠ è½½å…¶å®æ˜¯ç”±ä¸¤é˜¶æ®µç»„æˆï¼šä¸‹è½½å†…å®¹ï¼ˆdownload bytesï¼‰å’Œæ‰§è¡Œï¼ˆparse and executeï¼‰ã€‚æˆ‘ä»¬éƒ½çŸ¥é“é€šè¿‡ç½‘ç»œä¸‹è½½ script éœ€è¦æ˜æ˜¾çš„æ—¶é—´ï¼Œä½†å®¹æ˜“å¿½ç•¥äº†ç¬¬äºŒé˜¶æ®µï¼Œè§£æå’Œæ‰§è¡Œä¹Ÿæ˜¯éœ€è¦æ—¶é—´çš„ã€‚scriptçš„è§£æå’Œæ‰§è¡Œæ‰€èŠ±çš„æ—¶é—´æ¯”æˆ‘ä»¬æƒ³è±¡çš„è¦å¤šï¼Œå°¤å…¶æ˜¯script å¾ˆå¤šå¾ˆå¤§çš„æ—¶å€™ã€‚æœ‰äº›æ˜¯éœ€è¦ç«‹åˆ»æ‰§è¡Œï¼Œè€Œæœ‰äº›åˆ™ä¸éœ€è¦ï¼ˆæ¯”å¦‚åªæ˜¯åœ¨å±•ç¤ºæŸä¸ªç•Œé¢æˆ–æ‰§è¡ŒæŸä¸ªæ“ä½œæ—¶æ‰éœ€è¦ï¼‰ã€‚ è¿™ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥å®ç°å¼‚æ­¥åŠ è½½ï¼Œé‚£ä¹ˆæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿä¸‹é¢æ¥çœ‹ä¸€å¼ å›¾ï¼š(éå¸¸æ„Ÿè°¢(sfçš„è¿™ç¯‡æ–‡ç« )[https://segmentfault.com/q/1010000000640869])è“è‰²çº¿ä»£è¡¨ç½‘ç»œè¯»å–ï¼Œçº¢è‰²çº¿ä»£è¡¨æ‰§è¡Œæ—¶é—´ï¼Œè¿™ä¿©éƒ½æ˜¯é’ˆå¯¹è„šæœ¬çš„ï¼›ç»¿è‰²çº¿ä»£è¡¨ HTML è§£æã€‚ ç¬¬ä¸€ç§ï¼Œæ²¡æœ‰ defer æˆ– asyncï¼ŒæŒ‰æ­£å¸¸æƒ…å†µåŠ è½½ã€‚1&lt;script src=\"script.js\"&gt;&lt;/script&gt; æ²¡æœ‰ defer æˆ– asyncï¼Œæµè§ˆå™¨ä¼šç«‹å³åŠ è½½å¹¶æ‰§è¡ŒæŒ‡å®šçš„è„šæœ¬ï¼Œâ€œç«‹å³â€æŒ‡çš„æ˜¯åœ¨æ¸²æŸ“è¯¥ script æ ‡ç­¾ä¹‹ä¸‹çš„æ–‡æ¡£å…ƒç´ ä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ç­‰å¾…åç»­è½½å…¥çš„æ–‡æ¡£å…ƒç´ ï¼Œè¯»åˆ°å°±åŠ è½½å¹¶æ‰§è¡Œã€‚è¿™ç§ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¼šå‡ºç°ç™½é¡µçš„åŸå› ã€‚ ç¬¬äºŒç§ï¼Œæœ‰ async1&lt;script async src=\"script.js\"&gt;&lt;/script&gt; æœ‰ asyncï¼ŒåŠ è½½å’Œæ¸²æŸ“åç»­æ–‡æ¡£å…ƒç´ çš„è¿‡ç¨‹å°†å’Œ script.js çš„åŠ è½½ä¸æ‰§è¡Œå¹¶è¡Œè¿›è¡Œï¼ˆå¼‚æ­¥ï¼‰ã€‚asyncå±æ€§æ˜¯HTML5æ–°å¢çš„ã€‚ä½œç”¨å’Œdeferç±»ä¼¼ï¼Œä½†æ˜¯å®ƒå°†åœ¨ä¸‹è½½åå°½å¿«æ‰§è¡Œï¼Œä¸èƒ½ä¿è¯è„šæœ¬ä¼šæŒ‰é¡ºåºæ‰§è¡Œã€‚å®ƒä»¬å°†åœ¨onload äº‹ä»¶ä¹‹å‰å®Œæˆã€‚ ç¬¬ä¸‰ç§ï¼Œæœ‰defer1&lt;script defer src=\"myscript.js\"&gt;&lt;/script&gt; åŠ è½½åç»­æ–‡æ¡£å…ƒç´ çš„è¿‡ç¨‹å°†å’Œ script.js çš„åŠ è½½å¹¶è¡Œè¿›è¡Œï¼ˆå¼‚æ­¥ï¼‰ï¼Œä½†æ˜¯ script.js çš„æ‰§è¡Œè¦åœ¨æ‰€æœ‰å…ƒç´ è§£æå®Œæˆä¹‹åï¼ŒDOMContentLoaded äº‹ä»¶è§¦å‘ä¹‹å‰å®Œæˆã€‚ è¿™æ—¶å€™å°±å›æƒ³ï¼Œè¿™ä¸ªonloadå’ŒDOMContentLoadedåˆ°åº•ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿè¡¥å……ï¼šDOMContentLoaded ä¸ OnLoad äº‹ä»¶ DOMContentLoaded : é¡µé¢(document)å·²ç»è§£æå®Œæˆï¼Œé¡µé¢ä¸­çš„domå…ƒç´ å·²ç»å¯ç”¨ã€‚ä½†æ˜¯é¡µé¢ä¸­å¼•ç”¨çš„å›¾ç‰‡ã€subframeå¯èƒ½è¿˜æ²¡æœ‰åŠ è½½å®Œã€‚ OnLoadï¼šé¡µé¢çš„æ‰€æœ‰èµ„æºéƒ½åŠ è½½å®Œæ¯•ï¼ˆåŒ…æ‹¬å›¾ç‰‡ï¼‰ã€‚æµè§ˆå™¨çš„è½½å…¥è¿›åº¦åœ¨è¿™æ—¶æ‰åœæ­¢ã€‚è¿™ä¸¤ä¸ªæ—¶é—´ç‚¹å°†é¡µé¢åŠ è½½çš„timelineåˆ†æˆäº†ä¸‰ä¸ªé˜¶æ®µ è¿™å¼ å›¾å‘Šè¯‰äº†æˆ‘ä»¬å‡ ä»¶äº‹æƒ…ï¼š deferå’Œasyncçš„å¼‚æ­¥æ˜¯ç›¸å¯¹äºDOM TREEçš„è§£æã€‚å®ƒä»¬åœ¨ç½‘ç»œè¯»å–æ²¡æœ‰ä»»ä½•å·®åˆ«ã€‚å·®åˆ«åœ¨äºä¸‹è½½å®Œäº†è„šæœ¬åï¼Œä½•æ—¶æ‰§è¡Œã€‚ deferæ˜¯å…¨éƒ¨å…ƒç´ è§£æå®Œæˆä¹‹åï¼ˆDOMContentLoadedï¼‰æ‰§è¡Œã€‚æ‰€ä»¥æ˜¯æŒ‰ç…§åŠ è½½é¡ºåºæ—¶æ‰§è¡Œè„šæœ¬ã€‚è€Œasyncå¯¹å®ƒæ¥è¯´è„šæœ¬çš„åŠ è½½å’Œæ‰§è¡Œæ˜¯ç´§ç´§æŒ¨ç€çš„ã€‚ï¼Œæ‰€ä»¥ä¸ç®¡ä½ å£°æ˜çš„é¡ºåºå¦‚ä½•ï¼Œåªè¦å®ƒåŠ è½½å®Œäº†å°±ä¼šç«‹åˆ»æ‰§è¡Œã€‚æ‰€ä»¥å¯èƒ½ä¼šå‡ºç°ä¹±åºã€‚ async å¯¹äºåº”ç”¨è„šæœ¬çš„ç”¨å¤„ä¸å¤§ï¼Œå› ä¸ºå®ƒå®Œå…¨ä¸è€ƒè™‘ä¾èµ–ï¼ˆå“ªæ€•æ˜¯æœ€ä½çº§çš„é¡ºåºæ‰§è¡Œï¼‰ï¼Œä¸è¿‡å®ƒå¯¹äºé‚£äº›å¯ä»¥ä¸ä¾èµ–ä»»ä½•è„šæœ¬æˆ–ä¸è¢«ä»»ä½•è„šæœ¬ä¾èµ–çš„è„šæœ¬æ¥è¯´å´æ˜¯éå¸¸åˆé€‚çš„ï¼Œæœ€å…¸å‹çš„ä¾‹å­ï¼šGoogle Analyticså’Œbaiduç»Ÿè®¡ã€‚ å»¶è¿ŸåŠ è½½çš„æ–¹æ³• 1234567891011121314151617181920212223242526window.onload = function() &#123; setTimeout(function()&#123; // reference to &lt;head&gt; var head = document.getElementsByTagName('head')[0]; // a new CSS var css = document.createElement('link'); css.type = \"text/css\"; css.rel = \"stylesheet\"; css.href = \"new.css\"; // a new JS var js = document.createElement(\"script\"); js.type = \"text/javascript\"; js.src = \"new.js\"; // preload JS and CSS head.appendChild(css); head.appendChild(js); // preload image new Image().src = \"new.png\"; &#125;, 1000); &#125;;","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"cssåšä¸‰è§’å½¢åŸç†","slug":"cssåšä¸‰è§’å½¢åŸç†","date":"2016-02-15T06:26:59.000Z","updated":"2016-12-12T02:59:26.000Z","comments":true,"path":"2016/02/15/cssåšä¸‰è§’å½¢åŸç†/","link":"","permalink":"http://sevencai.github.io/2016/02/15/cssåšä¸‰è§’å½¢åŸç†/","excerpt":"","text":"ä»¥å‰çŸ¥é“cssèƒ½åšå‡ºå„ç§æ–¹å‘çš„ä¸‰è§’å½¢ï¼Œä½†å…¶å®ä¸€ç›´éƒ½ä¸çŸ¥é“ä¸­é—´çš„åŸç†æ˜¯ä»€ä¹ˆã€‚ä»Šå¤©æŠŠå®ƒè§£å†³äº†ã€‚å‡ ä¸ªå›¾å°±èƒ½è§£å†³æ¸…æ¥šã€‚ åˆ¶ä½œæ™®é€šçš„æ­£æ–¹å½¢ä¸ºäº†èƒ½å¤Ÿçœ‹æ¸…æ¥šå„ä¸ªè¾¹çš„å˜åŒ–ï¼Œæˆ‘æŠŠå„ä¸ªè¾¹çš„é¢œè‰²è®¾ç½®æˆäº†ä¸åŒçš„é¢œè‰²ã€‚æ¯ä¸ªè¾¹çš„è¡¨ç°éƒ½æ˜¯æ¢¯å½¢ã€‚å¦‚å›¾ä¸€æ‰€ç¤ºã€‚è®¾ç½®ç›’å­å¤§å°ä¸º100px,å¹¶ä¸”ç›’å­è¾¹æ¡†ä¸º10px;1234567#first-box&#123; width:100px; height: 100px; border-width: 10px; border-style: solid; border-color: red blue yellow green;&#125; åˆ¶ä½œæ²¡æœ‰é«˜åº¦çš„æ­£æ–¹å½¢ä¸Šé¢ä¾‹å­ä¸­çš„ç©ºç™½éƒ¨åˆ†ï¼Œæ˜¯ç”±äºè®¾ç½®äº†å®½å’Œé«˜çš„å¤§å°ã€‚å½“æˆ‘ä»¬è®¾ç½®widthä¸º0ï¼Œheightä¸º0æ—¶ï¼Œç©ºç™½å¤„æ¶ˆå¤±ï¼Œæ­¤æ—¶åªå‰©ä¸‹è¾¹æ¡†ç»„æˆçš„æ­£æ–¹å½¢ï¼Œå¦‚ä¸Šå›¾2ã€‚1234567#second-box&#123; width: 0px; height: 0px; border-width: 10px; border-style: solid; border-color: red blue yellow green;&#125; åˆ¶ä½œä¸‰è§’å½¢ä¸Šé¢æˆ‘ä»¬å·²ç»å¯ä»¥çœ‹åˆ°å››ä¸ªä¸åŒçš„å°ä¸‰è§’å½¢äº†ã€‚æˆ‘ä»¬éœ€è¦ä¸‰è§’å½¢å¾€å“ªä¸ªæ–¹å‘å°±è®¾ç½®è¯¥æ–¹å‘æœ‰é¢œè‰²å’Œè¾¹æ¡†ã€‚å…¶ä»–æ–¹å‘å‡é€æ˜å³å¯ã€‚å¦‚å›¾31234567#third-box&#123; width:0px; height: 0px; border-width: 10px; border-style: solid; border-color: red transparent transparent transparent;&#125; æ¯”å¦‚ä¸Šé¢æˆ‘ä»¬åˆ¶ä½œäº†ä¸€ä¸ªå‘ä¸‹çš„ä¸‰è§’å½¢ï¼Œè¡¨ç¤ºä¸Šé¢æœ‰è¾¹æ¡†ï¼Œå·¦å³å’Œä¸‹éƒ½æ²¡æœ‰ï¼Œè®¾ç½®ä¸ºtransparentã€‚å³å¯å¾—åˆ°äº†ã€‚ åˆ¶ä½œç›´è§’ä¸‰è§’å½¢ä¸Šé¢æˆ‘ä»¬çŸ¥é“å…¶å®ä¸‰è§’å½¢å°±æ˜¯è¾¹æ¡†çš„é«˜åº¦ç»„æˆã€‚å¦‚æœè®¾ç½®border-widthä¸º10ï¼Œå›¾3é‚£ä¸ªåº•è¾¹å°±æ˜¯ä¸¤è€…ä¹‹å’Œï¼Œä¹Ÿå°±æ˜¯20pxã€‚é‚£æˆ‘ä»¬å¦‚æœè®¾ç½®å³è¾¹çš„è¾¹æ¡†ä¸º0pxï¼Œåªæœ‰å·¦è¾¹çš„è¾¹æ¡†ï¼Œä¹Ÿå°±å¾—åˆ°äº†ä¸€ä¸ªç›´è§’ä¸‰è§’å½¢ï¼Œå¦‚å›¾4.12345678#last-box&#123; width: 0px; height: 0px; border-width:10px; border-style: solid; border-color: red transparent transparent transparent; border-right-width: 0px;&#125;","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Css","slug":"Css","permalink":"http://sevencai.github.io/tags/Css/"}]},{"title":"cssä¸­å°‘è§çš„visibilityï¼šcollapse","slug":"cssä¸­å°‘è§çš„visibilityï¼šcollapse","date":"2016-02-14T11:43:15.000Z","updated":"2016-12-12T02:59:26.000Z","comments":true,"path":"2016/02/14/cssä¸­å°‘è§çš„visibilityï¼šcollapse/","link":"","permalink":"http://sevencai.github.io/2016/02/14/cssä¸­å°‘è§çš„visibilityï¼šcollapse/","excerpt":"","text":"visibility å±æ€§è®¾ç½®å…ƒç´ æ˜¯å¦åº”è¯¥æ˜¯å¯è§çš„ï¼Œå…è®¸ä½œè€…æ˜¾ç¤ºæˆ–éšè—ä¸€ä¸ªå…ƒç´ ã€‚ ä¸displayå±æ€§ç±»ä¼¼ä½†ä»æœ‰å¾ˆé‡è¦çš„åŒºåˆ«ã€‚display:none;éšè—å…ƒç´ å¹¶ä¸”ä¸å æ®åŸæœ‰çš„ç©ºé—´ã€‚visibilityå†…å®¹ä¸å¯è§ï¼Œä½†å…ƒç´ åŸæ¥çš„ç©ºé—´ï¼Œä½ç½®ï¼Œå¤§å°ä»å æ®ã€‚ visibilityæ‰€å…·æœ‰çš„å€¼ visible:é»˜è®¤ã€‚å…ƒç´ æ˜¯å¯è§çš„ã€‚ hidden:å…ƒç´ æ˜¯ä¸å¯è§çš„ï¼Œä½†ä»ç„¶å½±å“å¸ƒå±€å æ®ç©ºé—´ã€‚ collapseï¼šå¯¹äºä¸€èˆ¬çš„å…ƒç´ ï¼Œå®ƒçš„è¡¨ç°è·Ÿ hidden æ˜¯ä¸€æ ·çš„ã€‚ä½†ä¾‹å¤–çš„æ˜¯ï¼Œå¦‚æœè¿™ä¸ªå…ƒç´ æ˜¯tableç›¸å…³çš„å…ƒç´ ï¼Œä¾‹å¦‚tableè¡Œï¼Œtable groupï¼Œtableåˆ—ï¼Œtable column groupï¼Œå®ƒçš„è¡¨ç°å´è·Ÿ display: none ä¸€æ ·ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬å ç”¨çš„ç©ºé—´ä¹Ÿä¼šé‡Šæ”¾ã€‚ inheritï¼švisibility å±æ€§çš„å€¼ä»çˆ¶å…ƒç´ ç»§æ‰¿ã€‚ jsè®¾ç½®visibilityçš„å€¼1document.getElementById(\"p1\").style.visibility=\"hidden\"; demoæµ‹è¯•ä»£ç æµ‹è¯•åœ°å€cssä»£ç ï¼š1234567891011&lt;style&gt; .dn&#123; display: none; &#125; .vh&#123; visibility: hidden; &#125; .vc&#123; visibility: collapse; &#125;&lt;/style&gt; htmlä»£ç ï¼š1234567891011121314151617181920212223242526272829303132&lt;h3&gt;æµ‹è¯•displayå’Œvisibility&lt;/h3&gt;&lt;p&gt; å½“ä½¿ç”¨&lt;b&gt;display:none;&lt;/b&gt;å±æ€§, å…ƒç´ ä¼šéšè—ï¼Œå¹¶ä¸å æ®ç©ºé—´ã€‚&lt;button&gt;ç‚¹å‡»æµ‹è¯•&lt;/button&gt;&lt;/p&gt;&lt;p&gt; å½“ä½¿ç”¨&lt;b&gt;visibility:hidden&lt;/b&gt;å±æ€§,å…ƒç´ ä¼šè¢«éšè—,ä½†æ˜¯å æ®ç©ºé—´ã€‚&lt;button&gt;ç‚¹å‡»æµ‹è¯•&lt;/button&gt;&lt;/p&gt; &lt;hr&gt;&lt;h3&gt;æµ‹è¯•visibilityçš„collapseåœ¨ä¸åŒçš„åœ°æ–¹ç”¨å¤„ä¸åŒ&lt;/h3&gt;&lt;p&gt;å½“åœ¨æ™®é€šå…ƒç´ ä¸­ä½¿ç”¨&lt;b&gt;visibility:collapse;&lt;/b&gt;æ—¶ï¼Œè·Ÿvisibility:hiddenè¡¨ç°ç›¸åŒ&lt;button&gt;ç‚¹å‡»æµ‹è¯•&lt;/button&gt;&lt;/p&gt;&lt;p&gt;å½“åœ¨tableä¸­ä½¿ç”¨visibility:collapse;æ—¶ï¼Œè·Ÿdisplay:noneç›¸åŒ,å¦‚ä¸‹&lt;button&gt;ç‚¹å‡»æµ‹è¯•&lt;/button&gt;&lt;/p&gt;&lt;p&gt;å½“åœ¨tableä¸­ä½¿ç”¨visibility:hidden;æ—¶,ä¸€æ ·çš„å æ®ç©ºé—´,å¦‚ä¸‹&lt;button&gt;ç‚¹å‡»æµ‹è¯•&lt;/button&gt;&lt;/p&gt;&lt;table border=\"1\"&gt; &lt;tr&gt; &lt;th&gt;Fruits&lt;/th&gt; &lt;th&gt;Vegetables&lt;/th&gt; &lt;th&gt;Rocks&lt;/th&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Apple&lt;/td&gt; &lt;td&gt;Celery&lt;/td&gt; &lt;td&gt;Granite&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Orange&lt;/td&gt; &lt;td&gt;Cabbage&lt;/td&gt; &lt;td&gt;Flint&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt; jsä»£ç ï¼š12345678910111213141516171819var btn = document.getElementsByTagName('button');var b = document.getElementsByTagName('b');var rows = document.getElementsByTagName('tr');btn[0].onclick = function()&#123; b[0].className = 'dn';&#125;btn[1].onclick = function()&#123; b[1].className = 'vh';&#125;btn[2].onclick = function()&#123; b[2].className = 'vh';&#125;btn[3].onclick = function()&#123; rows[1].className = 'vc';&#125;btn[4].onclick = function()&#123; rows[1].className = 'vh';&#125;","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Css","slug":"Css","permalink":"http://sevencai.github.io/tags/Css/"}]},{"title":"JavaScriptæ•°æ®ç±»å‹â€“åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹","slug":"JavaScriptæ•°æ®ç±»å‹â€“åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹","date":"2016-02-13T14:16:10.000Z","updated":"2016-12-12T03:00:40.000Z","comments":true,"path":"2016/02/13/JavaScriptæ•°æ®ç±»å‹â€“åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹/","link":"","permalink":"http://sevencai.github.io/2016/02/13/JavaScriptæ•°æ®ç±»å‹â€“åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹/","excerpt":"","text":"ECMAScirpt å˜é‡æœ‰ä¸¤ç§ä¸åŒçš„æ•°æ®ç±»å‹ï¼šåŸºæœ¬ç±»å‹ï¼Œå¼•ç”¨ç±»å‹ã€‚ä¹Ÿæœ‰å…¶ä»–çš„å«æ³•ï¼Œæ¯”å¦‚åŸå§‹ç±»å‹å’Œå¯¹è±¡ç±»å‹ï¼Œæ‹¥æœ‰æ–¹æ³•çš„ç±»å‹å’Œä¸èƒ½æ‹¥æœ‰æ–¹æ³•çš„ç±»å‹ï¼Œè¿˜å¯ä»¥åˆ†ä¸ºå¯å˜ç±»å‹å’Œä¸å¯å˜ç±»å‹ï¼Œéƒ½æ˜¯ä¾æ®è¿™ä¸¤ç§çš„ç±»å‹ç‰¹ç‚¹æ¥å‘½åçš„ã€‚ä¸‹é¢æ˜¯ä»–ä»¬çš„åŒºåˆ«å’Œè”ç³»ã€‚é¦–å…ˆå¿…é¡»è¦çŸ¥é“ä¸€äº›åŸºç¡€çŸ¥è¯†ã€‚å †å’Œæ ˆçš„åŒºåˆ«åœ¨å“ªé‡Œå‘¢ï¼Ÿæˆ‘é¢é˜¿é‡Œçš„æ—¶å€™å°±è¢«é—®åˆ°äº†ã€‚ æ ˆå’Œå †è¯¦è§£åŸºæœ¬ç±»å‹çš„æ ˆï¼šæ ˆæ˜¯å†…å­˜ä¸­ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œä¹Ÿç§°ä¸ºçº¿æ€§è¡¨ï¼Œæ ˆæŒ‰ç…§åè¿›å…ˆå‡º çš„åŸåˆ™å­˜å‚¨æ•°æ®ï¼Œå…ˆè¿›å…¥çš„æ•°æ®è¢«å‹å…¥æ ˆåº•ï¼Œæœ€åæ’å…¥ï¼ˆpushï¼‰çš„æ•°æ®æ”¾åœ¨æ ˆé¡¶ï¼Œéœ€è¦è¯»å–æ•°æ®æ—¶ä»æ ˆé¡¶å¼€å§‹å¼¹å‡ºï¼ˆpopï¼‰æ•°æ®ï¼Œå³æœ€åä¸€ä¸ªæ•°æ®è¢«ç¬¬ä¸€ä¸ªè¯»å‡ºæ¥ã€‚å› æ­¤è¯´ï¼Œ å€¼ç±»å‹éƒ½æ˜¯ç®€å•çš„æ•°æ®æ®µã€‚å˜é‡çš„ä½ç½®å’Œå˜é‡å€¼çš„ä½ç½®æ˜¯é‡å çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å€¼ç±»å‹çš„æ•°æ®è¢«å­˜å‚¨åœ¨å˜é‡è¢«è®¿é—®çš„ä½ç½®ã€‚ å¼•ç”¨ç±»å‹çš„å †ï¼šè¿™ç±»å€¼å­˜å‚¨åœ¨å †ï¼ˆheapï¼‰ä¸­ï¼Œå †æ˜¯å†…å­˜ä¸­çš„åŠ¨æ€åŒºåŸŸï¼Œç›¸å½“äºè‡ªç•™ç©ºé—´ï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ä¼šåŠ¨æ€åˆ†é…ç»™ä»£ç å’Œå †æ ˆã€‚ å †ä¸­å­˜å‚¨çš„ä¸€èˆ¬éƒ½æ˜¯å¯¹è±¡ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªç¼–å·ä¼ é€’ç»™æ ˆå†…å˜é‡ï¼Œè¿™ä¸ªç¼–å·å°±æ˜¯æ‰€è°“çš„å¼•ç”¨æŒ‡é’ˆï¼ˆpointï¼‰ï¼Œè¿™æ ·å˜é‡å’Œå˜é‡å€¼ä¹‹é—´æ˜¯åˆ†ç¦»çš„ï¼Œå®ƒä»¬é€šè¿‡æŒ‡é’ˆç›¸è”ç³»ã€‚å½“è¯»å†™æ•°æ®æ—¶ï¼Œè®¡ç®—æœºé€šè¿‡å˜é‡çš„æŒ‡é’ˆæ‰¾åˆ°å †ä¸­çš„æ•°æ®å—ï¼Œå¹¶è¿›è¡Œæ“ä½œã€‚ numberã€stringã€booleanã€nullå’Œundefinedå‹æ•°æ®éƒ½æ˜¯å€¼ç±»å‹ã€‚ ç”±äºå€¼ç±»å‹æ•°æ®å æ®çš„ç©ºé—´éƒ½æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥å¯ä»¥æŠŠå®ƒä»¬å­˜å‚¨åœ¨ç‹­çª„çš„å†…å­˜æ ˆåŒºã€‚è¿™ç§å­˜å‚¨æ–¹å¼æ›´æ–¹ä¾¿è®¡ç®—æœºè¿›è¡ŒæŸ¥æ‰¾å’Œæ“ä½œï¼Œæ‰€ä»¥æ‰§è¡Œé€Ÿåº¦ä¼šéå¸¸å¿«ã€‚ è€Œå¯¹äºobjectå‹æ•°æ®ï¼ˆåŒ…æ‹¬functionå’Œarrayï¼‰æ¥è¯´ï¼Œç”±äºå®ƒä»¬çš„å¤§å°æ˜¯ä¸å›ºå®šçš„ï¼Œæ‰€ä»¥ä¸èƒ½å­˜å‚¨åœ¨æ ˆåŒºï¼Œåªèƒ½è¢«åˆ†é…åˆ°å †åŒºï¼Œå¦‚æœå­˜å‚¨åœ¨æ ˆåŒºï¼Œåˆ™ä¼šé™ä½è®¡ç®—æœºå¯»å€çš„é€Ÿåº¦ã€‚è€Œå †çš„ç©ºé—´æ˜¯ä¸å›ºå®šçš„ï¼Œæ‰€ä»¥å¾ˆé€‚åˆå­˜å‚¨å¤§å°ä¸å›ºå®šçš„å¯¹è±¡æ•°æ®ï¼Œç„¶ååœ¨æ ˆåŒºå­˜å‚¨å¯¹è±¡åœ¨å †åŒºçš„åœ°å€å³å¯ï¼Œè€Œåœ°å€çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥è¿™ç§åˆ†ç¦»å­˜å‚¨çš„æ–¹æ³•ä¸ä¼šå½±å“è®¡ç®—æœºçš„å¯»å€é€Ÿåº¦ï¼Œå¯¹äºå˜é‡çš„æ€§èƒ½ä¹Ÿæ²¡æœ‰ä»»ä½•è´Ÿé¢å½±å“ï¼ˆå¦‚å›¾ï¼‰ã€‚ åœ¨JavaScriptè¯­è¨€ä¸­ï¼Œobjectã€functionå’Œarrayç­‰å¯¹è±¡éƒ½æ˜¯å¼•ç”¨å‹æ•°æ®ã€‚ å¾ˆå¤šè¯­è¨€éƒ½æŠŠå­—ç¬¦ä¸²è§†ä¸ºå¼•ç”¨å‹æ•°æ®ï¼Œè€Œä¸æ˜¯å€¼ç±»å‹ï¼Œå› ä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯å¯å˜çš„ã€‚ä½†æ˜¯JavaScriptæ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒæŠŠå­—ç¬¦ä¸²ä½œä¸ºå€¼ç±»å‹è¿›è¡Œå¤„ç†ã€‚ä¸è¿‡ï¼Œå­—ç¬¦ä¸²åœ¨å¤åˆ¶å’Œä¼ é€’è¿ç®—ä¸­ï¼Œæ˜¯ä»¥å¼•ç”¨å‹æ•°æ®çš„æ–¹æ³•æ¥å¤„ç†çš„ã€‚ æœ‰äº†è¿™äº›åŸºæœ¬çŸ¥è¯†ï¼Œå†å»çœ‹ä¸‹é¢çš„åŒºåˆ«å°±å¾ˆå¥½ç†è§£äº†ã€‚ åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹åŒ…å«çš„æ•°æ®ç±»å‹ä¸åŒåŸºæœ¬ç±»å‹åŒ…å«çš„æ•°æ®ç±»å‹undefinedï¼Œnullï¼Œbooleanï¼Œnumberï¼Œstringï¼ŒåŸºæœ¬ç±»å‹çš„è®¿é—®æ˜¯æŒ‰å€¼è®¿é—®çš„ï¼Œå°±æ˜¯è¯´ä½ å¯ä»¥æ“ä½œä¿å­˜åœ¨å˜é‡ä¸­çš„å®é™…çš„å€¼ã€‚ å¼•ç”¨ç±»å‹åŒ…å«çš„æ•°æ®ç±»å‹å¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°ã€‚ä¹Ÿå¯ä»¥è¯´æ˜¯å°±æ˜¯å¯¹è±¡äº†ã€‚å¯¹è±¡æ˜¯å±æ€§å’Œæ–¹æ³•çš„é›†åˆã€‚ä¹Ÿå°±æ˜¯è¯´å¼•ç”¨ç±»å‹å¯ä»¥æ‹¥æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œå±æ€§åˆå¯ä»¥åŒ…å«åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ã€‚ åŸºæœ¬ç±»å‹çš„å€¼æ˜¯ä¸å¯å˜ï¼Œå¼•ç”¨ç±»å‹çš„å€¼æ˜¯å¯å˜åŸºæœ¬ç±»å‹çš„å€¼ä¸å¯å˜ä»»ä½•æ–¹æ³•éƒ½æ— æ³•æ”¹å˜ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„å€¼ï¼Œæ¯”å¦‚ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š123var name = 'seven';name.toUpperCase(); // è¾“å‡º 'Seven'console.log(name); // è¾“å‡º 'seven' ä¼šå‘ç°åŸå§‹çš„nameå¹¶æœªå‘ç”Ÿæ”¹å˜ï¼Œè€Œæ˜¯è°ƒç”¨äº†toUpperCase()æ–¹æ³•åè¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚123456var person = 'seven';person.age = 21;person.method = function()&#123;//...&#125;;console.log(person.age); // undefinedconsole.log(person.method); // undefined é€šè¿‡ä¸Šé¢ä»£ç å¯çŸ¥ï¼Œæˆ‘ä»¬ä¸èƒ½ç»™åŸºæœ¬ç±»å‹æ·»åŠ å±æ€§å’Œæ–¹æ³•ï¼Œå†æ¬¡è¯´æ˜åŸºæœ¬ç±»å‹æ—¶ä¸å¯å˜ï¼› å¼•ç”¨ç±»å‹çš„å€¼å¯å˜æˆ‘ä»¬å¯ä¸ºä¸ºå¼•ç”¨ç±»å‹æ·»åŠ å±æ€§å’Œæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥åˆ é™¤å…¶å±æ€§å’Œæ–¹æ³•12345678var person = &#123;&#125;;//åˆ›å»ºä¸ªæ§å¯¹è±¡ --å¼•ç”¨ç±»å‹person.name = 'seven';person.age = 21;person.sayName = function()&#123;console.log(person.name);&#125; person.sayName();// 'seven'delete person.name; //åˆ é™¤personå¯¹è±¡çš„nameå±æ€§person.sayName(); // undefined ä¸Šé¢ä»£ç è¯´æ˜å¼•ç”¨ç±»å‹å¯ä»¥æ‹¥æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œå¹¶ä¸”æ˜¯å¯ä»¥åŠ¨æ€æ”¹å˜çš„ã€‚ åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„æ¯”è¾ƒä¸åŒåŸºæœ¬ç±»å‹ç›¸ç­‰æ—¶å€¼ç›¸ç­‰åŸºæœ¬ç±»å‹åªæœ‰åœ¨å®ƒä»¬çš„å€¼ç›¸ç­‰çš„æ—¶å€™å®ƒä»¬æ‰ç›¸ç­‰ã€‚ä½†æœ‰æ—¶å€™ä¼šé‡åˆ°è¿™ç§æƒ…å†µï¼š123var a = 1;var b = true;console.log(a == b);//true å®ƒä»¬ä¸æ˜¯ç›¸ç­‰å—ï¼Ÿå…¶å®è¿™æ˜¯ç±»å‹è½¬æ¢å’Œ == è¿ç®—ç¬¦çš„çŸ¥è¯†äº†ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ç”¨==æ¯”è¾ƒä¸¤ä¸ªä¸åŒç±»å‹çš„å˜é‡æ—¶ä¼šè¿›è¡Œä¸€äº›ç±»å‹è½¬æ¢ã€‚åƒä¸Šé¢çš„æ¯”è¾ƒå…ˆä¼šæŠŠtrueè½¬æ¢ä¸ºæ•°å­—1å†å’Œæ•°å­—1è¿›è¡Œæ¯”è¾ƒï¼Œç»“æœå°±æ˜¯trueäº†ã€‚ è¿™æ˜¯å½“æ¯”è¾ƒçš„ä¸¤ä¸ªå€¼çš„ç±»å‹ä¸åŒçš„æ—¶å€™==è¿ç®—ç¬¦ä¼šè¿›è¡Œç±»å‹è½¬æ¢ï¼Œä½†æ˜¯å½“ä¸¤ä¸ªå€¼çš„ç±»å‹ç›¸åŒçš„æ—¶å€™ï¼Œå³ä½¿æ˜¯==ä¹Ÿç›¸å½“äºæ˜¯===ã€‚123var a = 'seven';var b = 'seven';console.log(a === b);//true å¼•ç”¨ç±»å‹çš„æ¯”è¾ƒæ˜¯å¼•ç”¨çš„æ¯”è¾ƒ123var person1 = '&#123;&#125;';var person2 = '&#123;&#125;';console.log(person1 == person2); // true ä¸Šé¢è®²åŸºæœ¬ç±»å‹çš„æ¯”è¾ƒçš„æ—¶å€™æåˆ°äº†å½“ä¸¤ä¸ªæ¯”è¾ƒå€¼çš„ç±»å‹ç›¸åŒçš„æ—¶å€™ï¼Œç›¸å½“äºæ˜¯ç”¨ === ï¼Œæ‰€ä»¥è¾“å‡ºæ˜¯trueäº†ã€‚ä¸Šé¢çš„ä¸¤ä¸ªpersonéƒ½æ˜¯å­—ç¬¦ä¸²ã€‚123var person1 = &#123;&#125;;var person2 = &#123;&#125;;console.log(person1 == person2); // false è¿™ä¸¤ä¸ªpersonæ˜¯å­—ç¬¦ä¸²ã€‚ä½†æ­¤æ—¶çš„ç»“æœæ˜¯falseã€‚å› ä¸ºå¼•ç”¨ç±»å‹æ—¶æŒ‰å¼•ç”¨è®¿é—®çš„ï¼Œæ¢å¥è¯è¯´å°±æ˜¯æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å †å†…å­˜ä¸­çš„åœ°å€æ˜¯å¦ç›¸åŒï¼Œé‚£å¾ˆæ˜æ˜¾ï¼Œperson1å’Œperson2åœ¨å †å†…å­˜ä¸­åœ°å€æ˜¯ä¸åŒçš„ã€‚è¿™ä¸ªä¼šåœ¨ä¸‹é¢è¯¦ç»†çš„è®²ã€‚ åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å­˜æ”¾åœ°å€ä¸ä¸€æ ·è¿™ä¸€ç‚¹æ˜¯æˆ‘è®¤ä¸ºç†è§£ä»–ä»¬ä¸åŒçš„æœ€é‡è¦çš„ä¸€ç‚¹ã€‚åŸºæœ¬ç±»å‹çš„å˜é‡æ˜¯å­˜æ”¾åœ¨æ ˆåŒºçš„ï¼ˆæ ˆåŒºæŒ‡å†…å­˜é‡Œçš„æ ˆå†…å­˜ï¼‰123var name = 'seven';var city = 'wuhan';var age = 1; é‚£ä¹ˆå®ƒçš„å­˜å‚¨ç»“æ„å¦‚ä¸‹å›¾:æ ˆåŒºåŒ…æ‹¬äº† å˜é‡çš„æ ‡è¯†ç¬¦å’Œå˜é‡çš„å€¼ã€‚å¼•ç”¨ç±»å‹çš„å€¼æ˜¯åŒæ—¶ä¿å­˜åœ¨æ ˆå†…å­˜å’Œå †å†…å­˜ä¸­çš„å¯¹è±¡javascriptå’Œå…¶ä»–è¯­è¨€ä¸åŒï¼Œå…¶ä¸å…è®¸ç›´æ¥è®¿é—®å†…å­˜ä¸­çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½ç›´æ¥æ“ä½œå¯¹è±¡çš„å†…å­˜ç©ºé—´ï¼Œé‚£æˆ‘ä»¬æ“ä½œå•¥å‘¢ï¼Ÿ å®é™…ä¸Šï¼Œæ˜¯æ“ä½œå¯¹è±¡çš„å¼•ç”¨ï¼Œæ‰€ä»¥å¼•ç”¨ç±»å‹çš„å€¼æ˜¯æŒ‰å¼•ç”¨è®¿é—®çš„ã€‚ å‡†ç¡®åœ°è¯´ï¼Œå¼•ç”¨ç±»å‹çš„å­˜å‚¨éœ€è¦å†…å­˜çš„æ ˆåŒºå’Œå †åŒºï¼ˆå †åŒºæ˜¯æŒ‡å†…å­˜é‡Œçš„å †å†…å­˜ï¼‰å…±åŒå®Œæˆï¼Œæ ˆåŒºå†…å­˜ä¿å­˜å˜é‡æ ‡è¯†ç¬¦å’ŒæŒ‡å‘å †å†…å­˜ä¸­è¯¥å¯¹è±¡çš„æŒ‡é’ˆï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯è¯¥å¯¹è±¡åœ¨å †å†…å­˜çš„åœ°å€ã€‚123var person1 = &#123;name:'seven'&#125;;var person2 = &#123;name:'cld'&#125;;var person3 = &#123;name:'christine'&#125;; åˆ™è¿™ä¸‰ä¸ªå¯¹è±¡çš„åœ¨å†…å­˜ä¸­ä¿å­˜çš„æƒ…å†µå¦‚ä¸‹å›¾ï¼š åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„èµ‹å€¼åŸºæœ¬ç±»å‹æ˜¯ç®€å•èµ‹å€¼åœ¨ä»ä¸€ä¸ªå˜é‡å‘å¦ä¸€ä¸ªå˜é‡èµ‹å€¼åŸºæœ¬ç±»å‹æ—¶ï¼Œä¼šåœ¨è¯¥å˜é‡ä¸Šåˆ›å»ºä¸€ä¸ªæ–°å€¼ï¼Œç„¶åå†æŠŠè¯¥å€¼å¤åˆ¶åˆ°ä¸ºæ–°å˜é‡åˆ†é…çš„ä½ç½®ä¸Šï¼š12345var a = 10;var b = a;a ++ ;console.log(a); // 11console.log(b); // 10 æ­¤æ—¶ï¼Œaä¸­ä¿å­˜çš„å€¼ä¸º 10 ï¼Œå½“ä½¿ç”¨ a æ¥åˆå§‹åŒ– b æ—¶ï¼Œb ä¸­ä¿å­˜çš„å€¼ä¹Ÿä¸º10ï¼Œä½†bä¸­çš„10ä¸aä¸­çš„æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œè¯¥å€¼åªæ˜¯aä¸­çš„å€¼çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œæ­¤åï¼Œè¿™ä¸¤ä¸ªå˜é‡å¯ä»¥å‚åŠ ä»»ä½•æ“ä½œè€Œç›¸äº’ä¸å—å½±å“ã€‚ä¹Ÿå°±æ˜¯è¯´åŸºæœ¬ç±»å‹åœ¨èµ‹å€¼æ“ä½œåï¼Œä¸¤ä¸ªå˜é‡æ˜¯ç›¸äº’ä¸å—å½±å“çš„ã€‚ å¼•ç”¨ç±»å‹çš„èµ‹å€¼æ˜¯å¯¹è±¡å¼•ç”¨å½“ä»ä¸€ä¸ªå˜é‡å‘å¦ä¸€ä¸ªå˜é‡èµ‹å€¼å¼•ç”¨ç±»å‹çš„å€¼æ—¶ï¼ŒåŒæ ·ä¹Ÿä¼šå°†å­˜å‚¨åœ¨å˜é‡ä¸­çš„å¯¹è±¡çš„å€¼å¤åˆ¶ä¸€ä»½æ”¾åˆ°ä¸ºæ–°å˜é‡åˆ†é…çš„ç©ºé—´ä¸­ã€‚å‰é¢è®²å¼•ç”¨ç±»å‹çš„æ—¶å€™æåˆ°ï¼Œä¿å­˜åœ¨å˜é‡ä¸­çš„æ˜¯å¯¹è±¡åœ¨å †å†…å­˜ä¸­çš„åœ°å€ï¼Œæ‰€ä»¥ï¼Œä¸ç®€å•èµ‹å€¼ä¸åŒï¼Œè¿™ä¸ªå€¼çš„å‰¯æœ¬å®é™…ä¸Šæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œè€Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘å­˜å‚¨åœ¨å †å†…å­˜çš„ä¸€ä¸ªå¯¹è±¡ã€‚é‚£ä¹ˆèµ‹å€¼æ“ä½œåï¼Œä¸¤ä¸ªå˜é‡éƒ½ä¿å­˜äº†åŒä¸€ä¸ªå¯¹è±¡åœ°å€ï¼Œåˆ™è¿™ä¸¤ä¸ªå˜é‡æŒ‡å‘äº†åŒä¸€ä¸ªå¯¹è±¡ã€‚å› æ­¤ï¼Œæ”¹å˜å…¶ä¸­ä»»ä½•ä¸€ä¸ªå˜é‡ï¼Œéƒ½ä¼šç›¸äº’å½±å“ï¼š123456789101112var a = &#123;&#125;; // aä¿å­˜äº†ä¸€ä¸ªç©ºå¯¹è±¡çš„å®ä¾‹var b = a; // aå’Œbéƒ½æŒ‡å‘äº†è¿™ä¸ªç©ºå¯¹è±¡a.name = 'seven';console.log(a.name); // 'seven'console.log(b.name); // 'seven'b.age = 1;console.log(b.age);// 1console.log(a.age);// 1console.log(a == b);// true å®ƒä»¬çš„å…³ç³»å¦‚ä¸‹å›¾ï¼šå› æ­¤ï¼Œå¼•ç”¨ç±»å‹çš„èµ‹å€¼å…¶å®æ˜¯å¯¹è±¡ä¿å­˜åœ¨æ ˆåŒºåœ°å€æŒ‡é’ˆçš„èµ‹å€¼ï¼Œå› æ­¤ä¸¤ä¸ªå˜é‡æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œä»»ä½•çš„æ“ä½œéƒ½ä¼šç›¸äº’å½±å“ã€‚ å£°æ˜ï¼šæ–‡ç« æ•´ç†è‡ª:æ¨é…· &amp;&amp; segmentfaultã€‚éå¸¸æ„Ÿè°¢ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"å…³äºæµè§ˆå™¨å†…æ ¸çš„ç®€å•ç¬”è®°","slug":"å…³äºæµè§ˆå™¨å†…æ ¸çš„ç®€å•ç¬”è®°","date":"2016-02-13T05:56:29.000Z","updated":"2016-02-13T06:00:32.000Z","comments":true,"path":"2016/02/13/å…³äºæµè§ˆå™¨å†…æ ¸çš„ç®€å•ç¬”è®°/","link":"","permalink":"http://sevencai.github.io/2016/02/13/å…³äºæµè§ˆå™¨å†…æ ¸çš„ç®€å•ç¬”è®°/","excerpt":"","text":"æµè§ˆå™¨ç”±shellå’Œå†…æ ¸ç»„æˆï¼Œå…¶ä¸­shellçš„ç§ç±»ç›¸å¯¹æ¯”è¾ƒå¤šï¼Œå†…æ ¸åˆ™æ¯”è¾ƒå°‘ã€‚Shellæ˜¯æŒ‡æµè§ˆå™¨çš„å¤–å£³ï¼šä¾‹å¦‚èœå•ï¼Œå·¥å…·æ  ç­‰ã€‚ä¸»è¦æ˜¯æä¾›ç»™ç”¨æˆ·ç•Œé¢æ“ä½œï¼Œå‚æ•°è®¾ç½®ç­‰ç­‰ã€‚å®ƒæ˜¯è°ƒç”¨å†…æ ¸æ¥å®ç°å„ç§åŠŸèƒ½çš„ã€‚å…¶ä¸­æµè§ˆå™¨å†…æ ¸éƒ¨åˆ†ç”±æ¸²æŸ“å¼•æ“(layout engineeræˆ–Rendering Engine)å’ŒJSå¼•æ“ç»„æˆï¼Œç°åœ¨ä¸»è¦æ¥çœ‹ä¸‹æµè§ˆå™¨å†…æ ¸ã€‚ æµè§ˆå™¨å†…æ ¸çš„ç»„æˆå’Œä½œç”¨ï¼šä¸»è¦åˆ†æˆä¸¤éƒ¨åˆ†ï¼šæ¸²æŸ“å¼•æ“(layout engineeræˆ–Rendering Engine)å’ŒJSå¼•æ“ã€‚ æ¸²æŸ“å¼•æ“ï¼šè´Ÿè´£å¯¹ç½‘é¡µè¯­æ³•çš„è§£é‡Šå¹¶æ¸²æŸ“ï¼ˆæ˜¾ç¤ºï¼‰ç½‘é¡µã€‚å¦‚å–å¾—ç½‘é¡µçš„å†…å®¹ï¼ˆHTMLã€XMLã€å›¾åƒç­‰ç­‰ï¼‰ã€æ•´ç†è®¯æ¯ï¼ˆä¾‹å¦‚åŠ å…¥CSSç­‰ï¼‰ï¼Œä»¥åŠè®¡ç®—ç½‘é¡µçš„æ˜¾ç¤ºæ–¹å¼ï¼Œç„¶åä¼šè¾“å‡ºè‡³æ˜¾ç¤ºå™¨æˆ–æ‰“å°æœºã€‚æµè§ˆå™¨çš„å†…æ ¸çš„ä¸åŒå¯¹äºç½‘é¡µçš„è¯­æ³•è§£é‡Šä¼šæœ‰ä¸åŒï¼Œæ‰€ä»¥æ¸²æŸ“çš„æ•ˆæœä¹Ÿä¸ç›¸åŒã€‚æ‰€æœ‰ç½‘é¡µæµè§ˆå™¨ã€ç”µå­é‚®ä»¶å®¢æˆ·ç«¯ä»¥åŠå…¶å®ƒéœ€è¦ç¼–è¾‘ã€æ˜¾ç¤ºç½‘ç»œå†…å®¹çš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦å†…æ ¸ã€‚ JSå¼•æ“åˆ™ï¼šè§£æå’Œæ‰§è¡Œjavascriptæ¥å®ç°ç½‘é¡µçš„åŠ¨æ€æ•ˆæœã€‚ æœ€å¼€å§‹æ¸²æŸ“å¼•æ“å’ŒJSå¼•æ“å¹¶æ²¡æœ‰åŒºåˆ†çš„å¾ˆæ˜ç¡®ï¼Œåæ¥JSå¼•æ“è¶Šæ¥è¶Šç‹¬ç«‹ï¼Œå†…æ ¸å°±å€¾å‘äºåªæŒ‡æ¸²æŸ“å¼•æ“ã€‚ å¸¸è§æµè§ˆå™¨å†…æ ¸çš„åˆ†ç±»ï¼šTrident(IEå†…æ ¸):æ˜¯å¾®è½¯å¼€å‘çš„ä¸€ç§æ’ç‰ˆå¼•æ“ã€‚Tridentå†…æ ¸çš„å¸¸è§æµè§ˆå™¨æœ‰IE,360,çŒè±¹ï¼Œæœç‹—æµè§ˆå™¨ç­‰ã€‚æœ‰äº›æµè§ˆå™¨çš„æ–°ç‰ˆæœ¬æ˜¯â€œåŒæ ¸â€ç”šè‡³æ˜¯â€œå¤šæ ¸â€ï¼Œå…¶ä¸­ä¸€ä¸ªå†…æ ¸æ˜¯Tridentï¼Œç„¶åå†å¢åŠ ä¸€ä¸ªå…¶ä»–å†…æ ¸ã€‚å›½å†…çš„å‚å•†ä¸€èˆ¬æŠŠå…¶ä»–å†…æ ¸å«åšâ€œé«˜é€Ÿæµè§ˆæ¨¡å¼â€ï¼Œè€ŒTridentåˆ™æ˜¯â€œå…¼å®¹æµè§ˆæ¨¡å¼â€ï¼Œç”¨æˆ·å¯ä»¥æ¥å›åˆ‡æ¢ã€‚ Gecko(Firefoxå†…æ ¸):ä¸€å¥—å¼€æ”¾æºä»£ç çš„ã€ä»¥C++ç¼–å†™çš„ç½‘é¡µæ’ç‰ˆå¼•æ“ã€‚Netscape6å¼€å§‹é‡‡ç”¨çš„å†…æ ¸ï¼Œåæ¥çš„Mozilla FireFox(ç«ç‹æµè§ˆå™¨) ä¹Ÿé‡‡ç”¨äº†è¯¥å†…æ ¸ï¼ŒGeckoçš„ç‰¹ç‚¹æ˜¯ä»£ç å®Œå…¨å…¬å¼€ï¼Œå› æ­¤ï¼Œå…¶å¯å¼€å‘ç¨‹åº¦å¾ˆé«˜ï¼Œå…¨ä¸–ç•Œçš„ç¨‹åºå‘˜éƒ½å¯ä»¥ä¸ºå…¶ç¼–å†™ä»£ç ï¼Œå¢åŠ åŠŸèƒ½ã€‚å› ä¸ºè¿™æ˜¯ä¸ªå¼€æºå†…æ ¸ï¼Œå› æ­¤å—åˆ°è®¸å¤šäººçš„é’çï¼ŒGeckoå†…æ ¸çš„æµè§ˆå™¨ä¹Ÿå¾ˆå¤šï¼Œè¿™ä¹Ÿæ˜¯Geckoå†…æ ¸è™½ç„¶å¹´è½»ä½†å¸‚åœºå æœ‰ç‡èƒ½å¤Ÿè¿…é€Ÿæé«˜çš„é‡è¦åŸå› ã€‚ Webkit(Safariå†…æ ¸,Chromeå†…æ ¸åŸå‹,å¼€æº):å¼€æºï¼ŒåŒ…å«äº†æ¥è‡ªKDEé¡¹ç›®å’Œè‹¹æœå…¬å¸çš„ä¸€äº›ç»„ä»¶ï¼Œä¸»è¦ç”¨äºMac OSç³»ç»Ÿï¼Œå®ƒçš„ç‰¹ç‚¹åœ¨äºæºç ç»“æ„æ¸…æ™°ã€æ¸²æŸ“é€Ÿåº¦æå¿«ã€‚ç¼ºç‚¹æ˜¯å¯¹ç½‘é¡µä»£ç çš„å…¼å®¹æ€§ä¸é«˜ï¼Œå¯¼è‡´ä¸€äº›ç¼–å†™ä¸æ ‡å‡†çš„ç½‘é¡µæ— æ³•æ­£å¸¸æ˜¾ç¤ºã€‚ã€‚ Presto(Operaå‰å†…æ ¸) (å·²åºŸå¼ƒ)ï¼šå®é™…ä¸Šè¿™æ˜¯ä¸€ä¸ªåŠ¨æ€å†…æ ¸ï¼Œä¸å‰é¢å‡ ä¸ªå†…æ ¸çš„æœ€å¤§çš„åŒºåˆ«å°±åœ¨è„šæœ¬å¤„ç†ä¸Šï¼ŒPrestoæœ‰ç€å¤©ç”Ÿçš„ä¼˜åŠ¿ï¼Œé¡µé¢çš„å…¨éƒ¨æˆ–è€…éƒ¨åˆ†éƒ½èƒ½å¤Ÿåœ¨å›åº”è„šæœ¬äº‹ä»¶æ—¶ç­‰æƒ…å†µä¸‹è¢«é‡æ–°è§£æã€‚è¯¥æ¬¾å¼•æ“çš„ç‰¹ç‚¹å°±æ˜¯æ¸²æŸ“é€Ÿåº¦çš„ä¼˜åŒ–è¾¾åˆ°äº†æè‡´ï¼Œç„¶è€Œä»£ä»·æ˜¯ç‰ºç‰²äº†ç½‘é¡µçš„å…¼å®¹æ€§ã€‚ æ€»ç»“ Tridentå†…æ ¸ï¼šIE,360,æœç‹—æµè§ˆå™¨ï¼ŒçŒè±¹ç­‰ã€‚[åˆç§°MSHTML] Geckoå†…æ ¸ï¼šFirefoxï¼ŒNetscape6åŠä»¥ä¸Šç‰ˆæœ¬ï¼ŒMozillaSuite/SeaMonkeyç­‰ Webkitå†…æ ¸ï¼šSafari,Chromeç­‰ã€‚ [ Chromeçš„ï¼šBlinkï¼ˆWebKitçš„åˆ†æ”¯ï¼‰] Prestoå†…æ ¸ï¼šOpera7åŠä»¥ä¸Šã€‚ [Operaå†…æ ¸åŸä¸ºï¼šPrestoï¼Œç°ä¸ºï¼šBlink;]","categories":[{"name":"other","slug":"other","permalink":"http://sevencai.github.io/categories/other/"}],"tags":[{"name":"other","slug":"other","permalink":"http://sevencai.github.io/tags/other/"}]},{"title":"css3æ¸å˜ï¼ˆGradientï¼‰","slug":"css3æ¸å˜ï¼ˆGradientï¼‰","date":"2016-02-12T06:39:46.000Z","updated":"2016-12-12T02:59:16.000Z","comments":true,"path":"2016/02/12/css3æ¸å˜ï¼ˆGradientï¼‰/","link":"","permalink":"http://sevencai.github.io/2016/02/12/css3æ¸å˜ï¼ˆGradientï¼‰/","excerpt":"","text":"CSS3 æ¸å˜ï¼ˆgradientsï¼‰å¯ä»¥è®©ä½ åœ¨ä¸¤ä¸ªæˆ–å¤šä¸ªæŒ‡å®šçš„é¢œè‰²ä¹‹é—´æ˜¾ç¤ºå¹³ç¨³çš„è¿‡æ¸¡ã€‚ä»¥å‰ï¼Œä½ å¿…é¡»ä½¿ç”¨å›¾åƒæ¥å®ç°è¿™äº›æ•ˆæœã€‚ä½†æ˜¯ï¼Œé€šè¿‡ä½¿ç”¨ CSS3 æ¸å˜ï¼ˆgradientsï¼‰ï¼Œä½ å¯ä»¥å‡å°‘ä¸‹è½½çš„äº‹ä»¶å’Œå®½å¸¦çš„ä½¿ç”¨ã€‚æ­¤å¤–ï¼Œæ¸å˜æ•ˆæœçš„å…ƒç´ åœ¨æ”¾å¤§æ—¶çœ‹èµ·æ¥æ•ˆæœæ›´å¥½ï¼Œå› ä¸ºæ¸å˜ï¼ˆgradientï¼‰æ˜¯ç”±æµè§ˆå™¨ç”Ÿæˆçš„ã€‚ æ¸å˜åˆ†ä¸ºï¼šçº¿æ€§æ¸å˜ï¼ˆLinear Gradientï¼‰å’Œå¾„å‘æ¸å˜ï¼ˆRadial Gradientï¼‰,çº¿æ€§æ¸å˜é€šè¿‡æ§åˆ¶è§’åº¦æˆ–è€…æ–¹å‘ï¼ˆå‘ä¸‹/å‘ä¸Š/å‘å·¦/å‘å³/å¯¹è§’æ–¹å‘ï¼‰å®ç°å˜æ¢ï¼Œå¾„å‘æ¸å˜ç”±ä¸­å¿ƒå®šä¹‰ã€‚ ç°åœ¨ä¸»æµæµè§ˆå™¨æœ‰Mozillaï¼ˆGeckoï¼‰ï¼ˆç†Ÿæ‚‰çš„æœ‰Firefoxï¼ŒFlockç­‰æµè§ˆå™¨ï¼‰ã€WebKitï¼ˆç†Ÿæ‚‰çš„æœ‰Safariã€Chromeç­‰æµè§ˆå™¨ï¼‰ã€Opera(presto)ï¼ˆOperaæµè§ˆå™¨ï¼‰ã€Trident(IE)ã€‚css Gradientåœ¨IEä¸‹ä¹Ÿå¯ä»¥å®ç°ï¼Œä½†éœ€è¦é€šè¿‡IEç‰¹æœ‰çš„æ»¤é•œæ¥å®ç°ã€‚ çº¿æ€§æ¸å˜å®ä¾‹è®²è§£gradientåšçš„ç›’å­è¾¹æ¡†åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åªçœ‹åˆ°äº†ç›’å­è¾¹æ¡†æœ‰æ¸å˜æ•ˆæœï¼Œé‚£ä¹ˆè¿™æ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿå®é™…å°±æ˜¯ä¸€ä¸ªå°ç›’å­ï¼Œä¸€ä¸ªå¤§ç›’å­ï¼Œå°ç›’å­æ˜¯ä¸­é—´é‚£ä¸ªç©ºç™½åŒºåŸŸï¼Œå¤§ç›’å­æ˜¯åŒ…æ‹¬è¾¹æ¡†å’Œå†…å¦‚ç©ºç™½åŒºåŸŸçš„éƒ¨åˆ†ã€‚ç„¶åé€šè¿‡è®¾ç½®å°ç›’å­çš„z-indexå¤§äºå¤§ç›’å­çš„z-indexï¼Œä½¿å¤§ç›’å­ä¸­é—´éƒ¨åˆ†è¢«å°ç›’å­çš„ç™½è‰²é®ç›–ï¼Œè¿™ä¹ˆçœ‹æ¥ï¼Œä¹Ÿå°±å¾—åˆ°äº†è¾¹æ¡†æ¸å˜ã€‚ä»£ç å¦‚ä¸‹ï¼š123&lt;div class=\"box first\"&gt;&lt;/div&gt;&lt;div class=\"box second\"&gt;&lt;/div&gt;&lt;div class=\"box third\"&gt;&lt;/div&gt; csså¦‚ä¸‹,æ³¨æ„å¤§ç›’å­çš„å®½å’Œé«˜éƒ½æ¯”å°ç›’å­å¤§20pxï¼Œæ˜¯é€šè¿‡å®šä½ä½¿ä¸¤ä¸ªå°ç›’å­åœ¨å¤§ç›’å­çš„ä¸­é—´ã€‚ï¼š123456789101112131415161718192021222324252627.box &#123; margin: 80px 30px; width: 200px; height: 200px; position: relative; background: #fff; float: left;&#125;.box:before &#123; content: ''; z-index: -1; position: absolute; width: 220px; height: 220px; top: -10px; left: -10px;&#125;.first:before &#123; background-image: linear-gradient(90deg, yellow, gold);&#125;.second:before &#123; background-image: linear-gradient(0deg, orange, red);&#125;.third:before &#123; background-image: repeating-linear-gradient(-45deg,#cc2a2d,#cc2a2d 30px,#f2f2f2 30px,#f2f2f2 40px,#0e71bb 40px,#0e71bb 70px,#f2f2f2 70px,#f2f2f2 80px);&#125; Gradientåœ¨webkitå’Œmozilaæµè§ˆå™¨ä¸­è¯­æ³•ä»‹ç»çº¿æ€§æ¸å˜åœ¨Mozilaä¸‹çš„åº”ç”¨1background: -moz-linear-gradient( top,#ccc,#000); å…±ä¸‰ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºæ¸å˜çš„æ–¹å‘ï¼Œå¦‚topæ˜¯ä»ä¸Šåˆ°ä¸‹ï¼Œleftæ˜¯ä»å·¦åˆ°å³ï¼Œleft topä»å·¦ä¸Šåˆ°å³ä¸‹ã€‚ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æ˜¯èµ·ç‚¹é¢œè‰²å’Œç»ˆç‚¹é¢œè‰²ï¼Œä½ è¿˜å¯ä»¥åœ¨å®ƒä»¬ä¹‹é—´æ’å…¥æ›´å¤šçš„å‚æ•°ï¼Œè¡¨ç¤ºå¤šç§é¢œè‰²çš„æ¸å˜ã€‚å¦‚å›¾æ‰€ç¤ºï¼š çº¿æ€§æ¸å˜åœ¨Webkitä¸‹çš„åº”ç”¨-webkit-gradientæ˜¯webkitå¼•æ“å¯¹æ¸å˜çš„å®ç°å‚æ•°ï¼Œä¸€å…±æœ‰äº”ä¸ªã€‚ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºæ¸å˜ç±»å‹ï¼ˆtypeï¼‰ï¼Œå¯ä»¥æ˜¯linearï¼ˆçº¿æ€§æ¸å˜ï¼‰æˆ–è€…radialï¼ˆå¾„å‘æ¸å˜ï¼‰ã€‚ç¬¬äºŒä¸ªå‚æ•°å’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œéƒ½æ˜¯ä¸€å¯¹å€¼ï¼Œåˆ†åˆ«è¡¨ç¤ºæ¸å˜èµ·ç‚¹å’Œç»ˆç‚¹ã€‚è¿™å¯¹å€¼å¯ä»¥ç”¨åæ ‡å½¢å¼è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ç”¨å…³é”®å€¼è¡¨ç¤ºï¼Œæ¯”å¦‚ left topï¼ˆå·¦ä¸Šè§’ï¼‰å’Œleft bottomï¼ˆå·¦ä¸‹è§’ï¼‰ã€‚ç¬¬å››ä¸ªå’Œç¬¬äº”ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ä¸¤ä¸ªcolor-stopå‡½æ•°ã€‚color-stopå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªè¡¨ç¤ºæ¸å˜çš„ä½ç½®ï¼Œ0ä¸ºèµ·ç‚¹ï¼Œ0.5ä¸ºä¸­ç‚¹ï¼Œ1ä¸ºç»“æŸç‚¹ï¼›ç¬¬äºŒä¸ªè¡¨ç¤ºè¯¥ç‚¹çš„é¢œè‰²ã€‚1background: -webkit-gradient(linear,center top,center bottom,from(#ccc), to(#000)); 1-webkit-linear-gradient(top,#ccc,#000); è¿˜æœ‰å‡ ç§æµè§ˆå™¨æ˜¯operaå’Œtridentå°±ä¸ä»‹ç»äº†,ä»¿ç…§ä¸‹é¢å†™ï¼Œè¯¦ç»†å¯ä»¥çœ‹w3cplusè¯¦ç»†çš„ä»‹ç»123456789/* Firefox 3.6+ */background: -moz-linear-gradient(top, #ace, #f96); /* Safari 4-5, Chrome 1-9 */ /* -webkit-gradient(, [, ]?, [, ]? [, ]*) */background: -webkit-gradient(linear,top,from(#ace),to(#f96));/* Safari 5.1+, Chrome 10+ */background: -webkit-linear-gradient(top, #ace, #f96);/* Opera 11.10+ */background: -o-linear-gradient(top, #ace, #f96); å…¶ä¸­çš„æ–¹å‘å½“ç„¶ä¹Ÿå¯ä»¥æ˜¯è§’åº¦ï¼šå½“æŒ‡å®šçš„è§’åº¦ï¼Œè¯·è®°ä½ï¼Œâ€˜0degâ€™æŒ‡å‘ä¸Šé¢ï¼ŒåŒæ—¶æ­£è§’åº¦é¡ºæ—¶é’ˆæ—‹è½¬ï¼Œå› æ­¤â€˜90degâ€™æŒ‡å‘å³è¾¹ã€‚ï¼ˆä»£ç ä¸¾ä¾‹ï¼‰å½“è®¾ç½®ä¸º30degæ—¶ï¼š12345678#grad5 &#123; height: 100px; width:20%; background: -webkit-linear-gradient(30deg, red, blue); /* Safari 5.1 - 6.0 */ background: -o-linear-gradient(30deg, red, blue); /* Opera 11.1 - 12.0 */ background: -moz-linear-gradient(30deg, red, blue); /* Firefox 3.6 - 15 */ background: linear-gradient(30deg, red, blue); /* æ ‡å‡†çš„è¯­æ³•ï¼ˆå¿…é¡»æ”¾åœ¨æœ€åï¼‰ */&#125; å¾„å‘æ¸å˜å®ä¾‹1ï¼š12background: -moz-radial-gradient(#ace, #f96, #1E90FF);background: -webkit-radial-gradient(#ace, #f96, #1E90FF); å®ä¾‹2ï¼š12background: -moz-radial-gradient(#ace 5%, #f96 25%, #1E90FF 50%);background: -webkit-radial-gradient(#ace 5%, #f96 25%, #1E90FF 50%); ä»ä»¥ä¸Šä¿©ä¸ªç¤ºä¾‹çš„ä»£ç ä¸­å‘ç°ï¼Œä»–ä»¬èµ·æ­¢è‰²æƒ³åŒï¼Œä½†å°±æ˜¯ç¤ºä¾‹äºŒå®šä½äº†äº›æ•°æ®ï¼Œä¸ºä»€ä¹ˆä¼šé€ æˆè¿™ä¹ˆå¤§çš„åŒºåˆ«å‘¢ï¼Ÿå…¶å®åœ¨å¾„å‘æ¸å˜ä¸­è™½ç„¶å…·æœ‰ç›¸åŒçš„èµ·æ­¢è‰²ï¼Œä½†æ˜¯åœ¨æ²¡æœ‰è®¾ç½®ä½ç½®æ—¶ï¼Œå…¶é»˜è®¤é¢œè‰²ä¸ºå‡åŒ€é—´éš”ï¼Œè¿™ä¸€ç‚¹å’Œæˆ‘ä»¬å‰é¢çš„çº¿æ€§æ¸å˜æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯è®¾ç½®äº†æ¸å˜ä½ç½®å°±ä¼šæŒ‰ç…§æ¸å˜ä½ç½®å»æ¸å˜ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ç¤ºä¾‹ä¸€å’Œç¤ºä¾‹çš„åŒºåˆ«ä¹‹å¤„ï¼šè™½ç„¶åœ†å…·æœ‰ç›¸åŒçš„èµ·æ­¢é¢œè‰²ï¼Œä½†åœ¨ç¤ºä¾‹ä¸€ä¸ºé»˜è®¤çš„é¢œè‰²é—´éš”å‡åŒ€çš„æ¸å˜ï¼Œè€Œç¤ºä¾‹äºŒæ¯ç§é¢œè‰²éƒ½æœ‰ç‰¹å®šçš„ä½ç½®ã€‚å®ä¾‹3ï¼š12background: -moz-radial-gradient(bottom left, circle, #ace, #f96, #1E90FF);background: -webkit-radial-gradient(bottom left, circle, #ace, #f96, #1E90FF); è¿™é‡Œè®¾ç½®ä¸­å¿ƒä½ç½®ä¸åŒï¼Œå¹¶ä¸”å½¢çŠ¶ä¼¼åœ†å½¢ï¼Œè‹¥æ˜¯è®¾ç½®ä¸ºæ¤­åœ†ï¼ˆellipseï¼‰ï¼Œä¼šæœ‰ä¸ä¸€æ ·çš„æ•ˆæœã€‚ å¦‚æœæ‚¨æƒ³é‡å¤ä¸€ä¸ªæ¸å˜ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨-moz-repeating-linear-gradientå’Œ-moz-repeating-radial-gradientã€‚ åœ¨ä¸‹é¢çš„ä¾‹å­ï¼Œæ¯ä¸ªå®ä¾‹éƒ½æŒ‡å®šäº†ä¸¤ä¸ªèµ·æ­¢é¢œè‰²ï¼Œå¹¶æ— é™é‡å¤ã€‚1234background: -moz-repeating-radial-gradient(#ace, #ace 5px, #f96 5px, #f96 10px);background: -webkit-repeating-radial-gradient(#ace, #ace 5px, #f96 5px, #f96 10px);background: -moz-repeating-linear-gradient(top left -45deg, #ace, #ace 5px, #f96 5px, #f96 10px);background: -webkit-repeating-linear-gradient(top left -45deg, #ace, #ace 5px, #f96 5px, #f96 10px); æ•ˆæœå¦‚ä¸‹ï¼š æ¨è&amp;&amp;æ„Ÿè°¢w3cplusæ–‡ç« ","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Css","slug":"Css","permalink":"http://sevencai.github.io/tags/Css/"}]},{"title":"ES6/ES2015 æ ¸å¿ƒå†…å®¹ï¼ˆæœ€å¸¸ç”¨çš„ ES6 ç‰¹æ€§ï¼‰","slug":"ES6-ES2015-æ ¸å¿ƒå†…å®¹ï¼ˆæœ€å¸¸ç”¨çš„-ES6-ç‰¹æ€§ï¼‰","date":"2016-02-11T12:18:46.000Z","updated":"2016-12-12T02:59:54.000Z","comments":true,"path":"2016/02/11/ES6-ES2015-æ ¸å¿ƒå†…å®¹ï¼ˆæœ€å¸¸ç”¨çš„-ES6-ç‰¹æ€§ï¼‰/","link":"","permalink":"http://sevencai.github.io/2016/02/11/ES6-ES2015-æ ¸å¿ƒå†…å®¹ï¼ˆæœ€å¸¸ç”¨çš„-ES6-ç‰¹æ€§ï¼‰/","excerpt":"","text":"ECMAScript 6ï¼ˆä»¥ä¸‹ç®€ç§° ES6ï¼‰æ˜¯ JavaScript è¯­è¨€çš„ä¸‹ä¸€ä»£æ ‡å‡†ã€‚å› ä¸ºå½“å‰ç‰ˆæœ¬çš„ ES6 æ˜¯åœ¨ 2015 å¹´å‘å¸ƒçš„ï¼Œæ‰€ä»¥åˆç§° ECMAScript 2015ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒES6 å°±æ˜¯ ES2015ã€‚è™½ç„¶ç›®å‰å¹¶ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½èƒ½å…¼å®¹ ES6 å…¨éƒ¨ç‰¹æ€§ï¼Œä½†è¶Šæ¥è¶Šå¤šçš„ç¨‹åºå‘˜åœ¨å®é™…é¡¹ç›®å½“ä¸­å·²ç»å¼€å§‹ä½¿ç”¨ ES6 äº†ã€‚æ‰€ä»¥å°±ç®—ä½ ç°åœ¨ä¸æ‰“ç®—ä½¿ç”¨ ES6ï¼Œä½†ä¸ºäº†çœ‹æ‡‚åˆ«äººçš„ä½ ä¹Ÿè¯¥æ‡‚ç‚¹ES6çš„è¯­æ³•äº†â€¦ let, const, class, extends, super, arrow functions, template string, default,destructuring, rest argumentsåŸºæœ¬ä¸Šè¿™äº›å°±æ˜¯ES6æœ€ç»å¸¸ç”¨åˆ°çš„è¯­æ³•äº†ã€‚ let , const(ç”¨ä½œå£°æ˜å˜é‡)ä¸varç›¸åŒï¼Œletå’ŒconståŒç”¨ä½œå£°æ˜å˜é‡ï¼Œä½†æ˜¯ä»–ä»¬ä¿©å®é™…æ˜¯æœ‰ç‰¹æ®Šè€Œä¸”é‡è¦çš„ç”¨é€”ã€‚ å…³äºlet1234567var global = \"global variables\";while(true)&#123; var global = \"local variables\"; console.log(global); break;&#125;console.log(global); è¿™ä¸¤æ¬¡logå‡ºæ¥çš„ç»“æœéƒ½æ˜¯ï¼šlocal variablesï¼Œå› ä¸ºåœ¨ES5ä¸­ä½œç”¨åŸŸåªåˆ†ä¸ºå…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸï¼Œå¹¶æ²¡æœ‰å…¶ä»–è¯­è¨€ä¸­çš„å—çº§ä½œç”¨åŸŸï¼Œè¿™ä¼šæœ‰å¾ˆå¤šä¸åˆç†çš„åœ°æ–¹ï¼Œåœ¨è¿™ä¸ªåœ°æ–¹å°±è¡¨ç°ä¸ºå†…å±‚å˜é‡è¦†ç›–äº†å¤–å±‚å˜é‡ã€‚ä¹Ÿå°±æ˜¯ä¸¤æ¬¡è¯´ä¸¤æ¬¡éƒ½æ˜¯å…¨å±€ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼Œç¬¬ä¸€æ¬¡è¦†ç›–äº†ç¬¬äºŒæ¬¡globalçš„å£°æ˜ã€‚ letå¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸€é—®é¢˜ï¼šletåˆ™å®é™…ä¸Šä¸º JavaScript æ–°å¢äº†å—çº§ä½œç”¨åŸŸã€‚ç”¨å®ƒæ‰€å£°æ˜çš„å˜é‡ï¼Œåªåœ¨letå‘½ä»¤æ‰€åœ¨çš„ä»£ç å—å†…æœ‰æ•ˆã€‚ä¾‹å¦‚ï¼š1234567var global = \"global variables\";while(true)&#123; let global = \"local variables\"; console.log(global); break;&#125;console.log(global); æ­¤æ—¶ç»“æœæ˜¯ï¼šlocal variables global variables,ä½†æˆ‘è¯•äº†ä¸‹ï¼Œæˆ‘ç°åœ¨çš„ç«ç‹å’Œ360éƒ½æ˜¯ä¸æ”¯æŒçš„ã€‚ è¿˜æœ‰ä¸€ä¸ªvarå¸¦æ¥çš„ç»å¸¸ä¼šé”™çš„åœ°æ–¹ï¼Œè¿™æ˜¯æˆ‘ç»å¸¸ä¼šå¼„é”™çš„åœ°æ–¹ï¼Œå°±æ˜¯ç”¨æ¥è®¡æ•°çš„å¾ªç¯å˜é‡æ³„éœ²ä¸ºå…¨å±€å˜é‡,ä¸‹é¢è¿™ä¸ªä¾‹å­åº”è¯¥å¾ˆç»å…¸äº†ï¼š1234567var arr = [];for(var i=0;i&lt;5;i++)&#123; arr[i] = function()&#123; console.log(i); &#125;&#125;arr[3](); æœ€åä¸ç®¡è°ƒç”¨å“ªä¸€ä¸ªå‡½æ•°ç»“æœéƒ½æ˜¯5ï¼Œè¿™æ˜¯ç”±äºå˜é‡var iæ˜¯åœ¨å…¨å±€èŒƒå›´å†…å£°æ˜çš„ï¼Œæ˜¯å…¨å±€å˜é‡ï¼Œæ‰€ä»¥æ¯æ¬¡å¾ªç¯ä¸€æ¬¡ï¼Œiéƒ½ä¼šå¢åŠ ï¼Œå¹¶ä¸”è¦†ç›–å…ˆå‰çš„å€¼ã€‚å°†ä¸Šé¢çš„varæ”¹ä¸ºletè¾¹ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚åœ¨ES5ä¸­åº”è¯¥æœ‰ä¸¤ç§å†™æ³•å¯ä»¥é¿å…ä¸Šé¢å‡ºç°çš„é—®é¢˜ï¼šé—­åŒ…ã€‚123456789var arr = [];for(var i=0;i&lt;5;i++)&#123; (function(i)&#123; arr[i] = function()&#123; console.log(i); &#125; &#125;)(i); &#125;arr[3](); ç»“æœä¸º3ï¼Œè¿˜æœ‰ä¸€ç§å†™æ³•å°±æ˜¯æ‹†å¼€ï¼ŒæŠŠarr[i]å¯¹åº”çš„å‡½æ•°æ”¾åœ¨å¤–é¢ã€‚ å…³äºconstè¿™é‡Œçš„constå°±è·Ÿæˆ‘ä»¬å¹³å¸¸åˆ«çš„è¯­è¨€ä¸€æ ·äº†ï¼Œç”¨äºå£°æ˜å¸¸é‡å¦‚PIï¼Œå£°æ˜åä¸å¯æ›´æ”¹ï¼Œæ›´æ”¹åæµè§ˆå™¨ä¼šæŠ¥é”™ç”¨ï¼Œconst æ¥å£°æ˜å¯ä»¥é¿å…æœªæ¥ä¸å°å¿ƒé‡å‘½åè€Œå¯¼è‡´å‡ºç° bugã€‚123const PI = Math.PIPI = 23 //Module build failed: SyntaxError: /es6/app.js: \"PI\" is read-onlyconst monent = require('moment') class , extends , superè¿™ä¸‰ä¸ªç‰¹æ€§æ¶‰åŠäº† ES5 ä¸­æœ€ä»¤äººå¤´ç–¼çš„çš„å‡ ä¸ªéƒ¨åˆ†ï¼šåŸå‹ã€æ„é€ å‡½æ•°ï¼Œç»§æ‰¿â€¦ä½ è¿˜åœ¨ä¸ºå®ƒä»¬å¤æ‚éš¾æ‡‚çš„è¯­æ³•è€Œçƒ¦æ¼å—ï¼Ÿä½ è¿˜åœ¨ä¸ºæŒ‡é’ˆåˆ°åº•æŒ‡å‘å“ªé‡Œè€Œçº ç»“ä¸‡åˆ†å—ï¼Ÿ ES6 æä¾›äº†æ›´æ¥è¿‘ä¼ ç»Ÿè¯­è¨€çš„å†™æ³•ï¼Œå¼•å…¥äº† Classï¼ˆç±»ï¼‰è¿™ä¸ªæ¦‚å¿µã€‚æ–°çš„ class å†™æ³•è®©å¯¹è±¡åŸå‹çš„å†™æ³•æ›´åŠ æ¸…æ™°ã€æ›´åƒé¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­æ³•ï¼Œä¹Ÿæ›´åŠ é€šä¿—æ˜“æ‡‚ã€‚123456789101112131415161718class Animal &#123; constructor () &#123; this.type = \"animal\"; &#125; says (say) &#123; console.log(this.type + \"says\" + say); &#125;&#125;class Cat extends Animal&#123; constructor () &#123; super(); this.type = \"cat\"; &#125;&#125;let animal = new Animal ();animal.says(\"hello\");let cat = new Cat();cat.says(\"hi\"); è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªAnimalç±»ï¼Œæœ‰ä¸€ä¸ª constructoræ„é€ æ–¹æ³•å’Œä¸€ä¸ªå‡½æ•°saysã€‚è€Œè¿™é‡Œé¢çš„thisåˆ™ä»£è¡¨çš„æ˜¯å®ä¾‹å¯¹è±¡æœ¬èº«ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œconstructoré‡Œé¢çš„å±æ€§å’Œæ–¹æ³•æ˜¯æ¯ä¸ªè¢«å®ä¾‹åŒ–çš„å¯¹è±¡è‡ªå·±çš„ï¼Œè€Œconstructorå¤–çš„æ˜¯æ‰€æœ‰å¯¹è±¡å…±äº«çš„ã€‚ ES6ä¸­ï¼Œè¿™é‡Œå¯ä»¥é€šè¿‡classå’Œextendsæ¥å®ç°ç»§æ‰¿ï¼Œæ¯”ES5ä¸­é€šè¿‡ä¿®æ”¹åŸå‹é“¾æ¥ç»§æ‰¿è¦æ–¹ä¾¿å’Œæ¸…æ™°çš„å¤šï¼Œè·Ÿæˆ‘ä»¬ä»¥å‰å­¦ä¹ çš„æ¯”å¦‚PHP,C++éƒ½è¦ç±»ä¼¼ï¼Œæ›´å®¹æ˜“æ¥å—ã€‚ superåº”è¯¥ä¹Ÿé™Œç”Ÿï¼Œå®ƒä»£è¡¨çš„æ˜¯çˆ¶ç±»çš„å®ä¾‹ï¼ˆçˆ¶ç±»çš„thiså¯¹è±¡ï¼‰ï¼Œå­ç±»å¿…é¡»åœ¨constructorä¸­é€šè¿‡è°ƒç”¨superï¼Œå¦‚æœä¸è°ƒç”¨ï¼Œæ–°å»ºå®ä¾‹æ—¶ä¼šæŠ¥é”™ã€‚å› ä¸ºå­ç±»å¹¶æ²¡æœ‰è‡ªå·±çš„thiså¯¹è±¡ï¼Œè€Œæ˜¯ç»§æ‰¿äº†çˆ¶ç±»çš„thiså¯¹è±¡ï¼Œç„¶åè¿›è¡ŒåŠ å·¥å’Œä¿®æ”¹å½¢æˆå­ç±»è‡ªå·±çš„ç‰¹æ€§ã€‚å¦‚æœä¸è°ƒç”¨ï¼Œå­ç±»ä¹Ÿå°±è‡ªç„¶æ²¡æœ‰è‡ªå·±çš„thiså¯¹è±¡äº†ã€‚ ES6 çš„ç»§æ‰¿æœºåˆ¶ï¼Œå®è´¨æ˜¯å…ˆåˆ›é€ çˆ¶ç±»çš„å®ä¾‹å¯¹è±¡ thisï¼ˆæ‰€ä»¥å¿…é¡»å…ˆè°ƒç”¨ super æ–¹æ³•ï¼‰ï¼Œç„¶åå†ç”¨å­ç±»çš„æ„é€ å‡½æ•°ä¿®æ”¹ thisã€‚ template stringè¿™ä¸ªä¸œè¥¿ä¹Ÿæ˜¯éå¸¸æœ‰ç”¨ï¼Œå½“æˆ‘ä»¬è¦æ’å…¥å¤§æ®µçš„ html å†…å®¹åˆ°æ–‡æ¡£ä¸­æ—¶ï¼Œä¼ ç»Ÿçš„å†™æ³•éå¸¸éº»çƒ¦ï¼Œæ‰€ä»¥ä¹‹å‰æˆ‘ä»¬é€šå¸¸ä¼šå¼•ç”¨ä¸€äº›æ¨¡æ¿å·¥å…·åº“ï¼Œæ¯”å¦‚ mustache ç­‰ç­‰ã€‚ä¾‹å¦‚jqueryé‡Œé¢å½“æˆ‘ä»¬éœ€è¦æ’å…¥ä¸€æ®µdomèŠ‚ç‚¹æ—¶ï¼š123456$(\"#result\").append( \"There are &lt;b&gt;\" + basket.count + \"&lt;/b&gt; \" + \"items in your basket, \" + \"&lt;em&gt;\" + basket.onSale + \"&lt;/em&gt; are on sale!\"); è¿™éœ€è¦å¯¹åŒå¼•å·å’Œ+éƒ½ç”¨çš„æ°å½“æ‰å¯ã€‚ä¸‹é¢é€šè¿‡ES6çš„template stringæ”¹è¿›ï¼Œç”¨åå¼•å·ï¼ˆ\\ï¼‰æ¥æ ‡è¯†èµ·å§‹ï¼Œç”¨${}`æ¥å¼•ç”¨å˜é‡ï¼Œè€Œä¸”æ‰€æœ‰çš„ç©ºæ ¼å’Œç¼©è¿›éƒ½ä¼šè¢«ä¿ç•™åœ¨è¾“å‡ºä¹‹ä¸­ï¼Œè¿™ä¸ªå¯ä»¥æœ‰å¯¹å§ã€‚12345$(\"#result\").append(` There are &lt;b&gt;$&#123;basket.count&#125;&lt;/b&gt; items in your basket, &lt;em&gt;$&#123;basket.onSale&#125;&lt;/em&gt; are on sale!`); destructuring(è§£æ„)ES6ä¸­å…è®¸æŒ‰ç…§ä¸€å®šçš„æ¨¡å¼ï¼Œä»å¯¹è±¡å’Œæ•°ç»„ä¸­æå–å€¼ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œè¿™ç§°ä¸ºè§£æ„ã€‚1234let cat = 'ken'let dog = 'lili'let zoo = &#123;cat: cat, dog: dog&#125;console.log(zoo) //Object &#123;cat: \"ken\", dog: \"lili\"&#125; ES6ä¸­æ›´æ”¹ä¸ºï¼š1234let cat = 'ken'let dog = 'lili'let zoo = &#123;cat, dog&#125;console.log(zoo) //Object &#123;cat: \"ken\", dog: \"lili\"&#125; ä¹Ÿå¯ä»¥åè¿‡æ¥è§£æï¼š123let dog = &#123;type: 'animal', many: 2&#125;let &#123; type, many&#125; = dogconsole.log(type, many) //animal 2 default , restdefault å¾ˆç®€å•ï¼Œæ„æ€å°±æ˜¯é»˜è®¤å€¼ã€‚å¤§å®¶å¯ä»¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼Œè°ƒç”¨animal()æ–¹æ³•æ—¶å¿˜äº†ä¼ å‚æ•°ï¼Œä¼ ç»Ÿçš„åšæ³•å°±æ˜¯åŠ ä¸Šè¿™ä¸€å¥type = type || â€˜catâ€™æ¥æŒ‡å®šé»˜è®¤å€¼ã€‚12345function animal(type)&#123; type = type || 'cat' console.log(type)&#125;animal() å¦‚æœç”¨ ES6 æˆ‘ä»¬è€Œå·²ç›´æ¥è¿™ä¹ˆå†™(è·Ÿc++å·®ä¸å¤šäº†)ï¼š1234function animal(type = 'cat')&#123; console.log(type)&#125;animal() æœ€åä¸€ä¸ª rest è¯­æ³•ä¹Ÿå¾ˆç®€å•ï¼Œç›´æ¥çœ‹ä¾‹å­ï¼šï¼ˆè€Œå¦‚æœä¸ç”¨ ES6 çš„è¯ï¼Œæˆ‘ä»¬åˆ™å¾—ä½¿ç”¨ ES5 çš„argumentsï¼‰1234function animals(...types)&#123; console.log(types)&#125;animals('cat', 'dog', 'fish') //[\"cat\", \"dog\", \"fish\"] arrow functionæˆ‘çœ‹çš„è¿™ç¯‡æ–‡ç« è¯´ï¼šè¿™ä¸ªææ€•æ˜¯ ES6 æœ€æœ€å¸¸ç”¨çš„ä¸€ä¸ªæ–°ç‰¹æ€§äº†ï¼Œç”¨å®ƒæ¥å†™ function æ¯”åŸæ¥çš„å†™æ³•è¦ç®€æ´æ¸…æ™°å¾ˆå¤šã€‚æˆ‘ç°åœ¨è¿˜æ²¡æœ‰çœŸæ­£çš„ä½“ä¼šåˆ°ã€‚ç›´æ¥ä¸Šä¾‹å­ï¼Œæ¯”å¦‚åŸæ¥è¿™ä¹ˆå†™çš„å¯ä»¥åƒç°åœ¨è¿™æ ·å†™ï¼š12function(i)&#123; return i + 1; &#125; //ES5(i) =&gt; i + 1 //ES6 å¦‚æœæ–¹ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œåˆ™éœ€è¦ç”¨{}æŠŠä»£ç åŒ…èµ·æ¥ï¼š123456function(x, y) &#123; x++; y--; return x + y;&#125;(x, y) =&gt; &#123;x++; y--; return x+y&#125; é™¤äº†çœ‹ä¸Šå»æ›´ç®€æ´ä»¥å¤–ï¼Œarrow function è¿˜æœ‰ä¸€é¡¹è¶…çº§æ— æ•Œçš„åŠŸèƒ½ï¼é•¿æœŸä»¥æ¥ï¼ŒJavaScript è¯­è¨€çš„thiså¯¹è±¡ä¸€ç›´æ˜¯ä¸€ä¸ªä»¤äººå¤´ç—›çš„é—®é¢˜ï¼Œåœ¨å¯¹è±¡æ–¹æ³•ä¸­ä½¿ç”¨ thisï¼Œå¿…é¡»éå¸¸å°å¿ƒã€‚ä¾‹å¦‚ï¼š12345678910111213class Animal &#123; constructor()&#123; this.type = 'animal' &#125; says(say)&#123; setTimeout(function()&#123; console.log(this.type + ' says ' + say) &#125;, 1000) &#125;&#125; var animal = new Animal() animal.says('hi') //undefined says hi è¿è¡Œä¸Šé¢çš„ä»£ç ä¼šæŠ¥é”™ï¼Œè¿™æ˜¯å› ä¸ºsetTimeoutä¸­çš„thisæŒ‡å‘çš„æ˜¯å…¨å±€å¯¹è±¡ã€‚æ‰€ä»¥ä¸ºäº†è®©å®ƒèƒ½å¤Ÿæ­£ç¡®çš„è¿è¡Œï¼Œä¼ ç»Ÿçš„è§£å†³æ–¹æ³•æœ‰ä¸¤ç§ï¼š ç¬¬ä¸€ç§æ˜¯å°† this ä¼ ç»™ self,å†ç”¨ self æ¥æŒ‡ä»£ this12345says(say)&#123; var self = this; setTimeout(function()&#123; console.log(self.type + ' says ' + say) &#125;, 1000) ç¬¬äºŒç§æ–¹æ³•æ˜¯ç”¨bind(this),å³1234says(say)&#123; setTimeout(function()&#123; console.log(self.type + ' says ' + say) &#125;.bind(this), 1000) ä½†ç°åœ¨æˆ‘ä»¬æœ‰äº†ç®­å¤´å‡½æ•°ï¼Œå°±ä¸éœ€è¦è¿™ä¹ˆéº»çƒ¦äº†ï¼šå½“æˆ‘ä»¬ä½¿ç”¨ç®­å¤´å‡½æ•°æ—¶ï¼Œå‡½æ•°ä½“å†…çš„ this å¯¹è±¡ï¼Œå°±æ˜¯å®šä¹‰æ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ—¶æ‰€åœ¨çš„å¯¹è±¡ã€‚å¹¶ä¸æ˜¯å› ä¸ºç®­å¤´å‡½æ•°å†…éƒ¨æœ‰ç»‘å®š this çš„æœºåˆ¶ï¼Œå®é™…åŸå› æ˜¯ç®­å¤´å‡½æ•°æ ¹æœ¬æ²¡æœ‰è‡ªå·±çš„ thisï¼Œå®ƒçš„ this æ˜¯ç»§æ‰¿å¤–é¢çš„ï¼Œå› æ­¤å†…éƒ¨çš„ this å°±æ˜¯å¤–å±‚ä»£ç å—çš„ thisã€‚123456789101112class Animal &#123; constructor()&#123; this.type = 'animal' &#125; says(say)&#123; setTimeout( () =&gt; &#123; console.log(this.type + ' says ' + say) &#125;, 1000) &#125;&#125; var animal = new Animal()animal.says(â€˜hiâ€™) //animal says hi å®Œç»“ï¼šå­¦ä¹ æ•´ç†è‡ªSegmentFaultï¼Œå¤ªæ„Ÿè°¢å•¦ã€‚çœ‹å®Œä»¥åå¯¹ES6æœ‰äº†ä¸€ç‚¹æ–°çš„è®¤è¯†ï¼Œæœ€èµ·ç çœ‹åˆ«äººå†™ES6ç¼–ç æ—¶èƒ½çœ‹æ‡‚ä¸€ç‚¹ã€‚ä¹Ÿè¾¾åˆ°äº†æˆ‘çš„åˆè¡·ã€‚ä½†æ˜¯çœ‹çš„è¿‡ç¨‹ä¸­ä¹Ÿæš´éœ²äº†è‡ªå·±çš„ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯å¯¹thisä¸äº†è§£ã€‚åº”è¯¥å¥½å¥½å»çœ‹çœ‹å•¦ã€‚å›å¤´å†å†™ä¸€ç¯‡æ–‡ç« æ•´ç†ä¸‹ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"ES6","slug":"ES6","permalink":"http://sevencai.github.io/tags/ES6/"}]},{"title":"å¦‚ä½•é€šè¿‡nginxåå‘ä»£ç†","slug":"å¦‚ä½•é€šè¿‡nginxåå‘ä»£ç†","date":"2016-02-10T12:16:06.000Z","updated":"2016-12-12T02:53:08.000Z","comments":true,"path":"2016/02/10/å¦‚ä½•é€šè¿‡nginxåå‘ä»£ç†/","link":"","permalink":"http://sevencai.github.io/2016/02/10/å¦‚ä½•é€šè¿‡nginxåå‘ä»£ç†/","excerpt":"","text":"æœ¬æ–‡çš„ä¸»è¦ç›®çš„æ˜¯ï¼šå¦‚ä½•é€šè¿‡nginxåå‘ä»£ç†ç›‘å¬4000ç«¯å£ï¼Œä½¿ç›´æ¥è®¿é—®ç½‘ç«™è€Œéç«¯å£ã€‚æ¯”å¦‚hexoï¼Œé€šè¿‡hexo serveræ¥å¯åŠ¨æœåŠ¡åï¼Œæ˜¯é€šè¿‡http://127.0.0.1:4000æ¥ç›‘å¬å®ç°çš„ï¼Œè¿™æ˜¯ä¸èƒ½ç›´æ¥ç»‘å®šåŸŸåçš„ä¸»æœºç©ºé—´çš„ï¼Œç°åœ¨æˆ‘éœ€è¦ç›´æ¥è®¿é—®æˆ‘çš„åŸŸåå°±å¯ä»¥è®¿é—®æ”¹åšå®¢ã€‚æ­¤æ—¶å°±å¯ä»¥ç”¨åˆ°nginxåå‘ä»£ç†ã€‚ åå‘ç»‘å®šåŸŸåä¹Ÿå«åšåå‘Dç†ï¼Œæ˜¯æŒ‡ç”¨Dç†æœåŠ¡å™¨æ¥æ¥å—internetä¸Šçš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡å™¨ï¼Œå¹¶å°†ä»æœåŠ¡å™¨ä¸Šå¾—åˆ°çš„ç»“æœè¿”å›ç»™internetä¸Šè¯·æ±‚è¿æ¥çš„å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶Dç†æœåŠ¡å™¨å¯¹å¤–å°±è¡¨ç°ä¸ºä¸€ä¸ªæœåŠ¡å™¨ã€‚ ä»€ä¹ˆæ—¶å€™è¦ç”¨åˆ°åå‘ç»‘å®šåŸŸåå‘¢ï¼Ÿåå‘ç»‘å®šå¯ä»¥åˆ†æµè¯·æ±‚å’Œè´Ÿè½½å‡è¡¡ï¼Œå› æ­¤å®ƒå¹¿æ³›ç”¨äºä¸€äº›å¤§æµé‡çš„ç½‘ç«™å’Œæ•°æ®é›†ç¾¤ï¼Œé™ä½ç³»ç»Ÿè´Ÿè½½ã€‚å¯¹äºä¸€äº›ä¸èƒ½ç›´æ¥ç»‘å®šåŸŸåçš„ä¸»æœºç©ºé—´ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åå‘ç»‘å®šåŸŸåçš„æ–¹æ³•æ¥å¼ºåˆ¶ç»‘å®šè‡ªå·±çš„åŸŸåã€‚ å®‰è£…nginx(ä¸‹é¢çš„æ­¥éª¤å¯å¿«é€Ÿåœ¨centosä¸Šå®‰è£…nginx)å®‰è£…epelä»“åº“(install the epel repo)1sudo rpm -Uvh http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm å®‰è£…remiä»“åº“ï¼ˆInstall the remi repoï¼‰1sudo rpm -Uvh http://rpms.famillecollet.com/enterprise/remi-release-6.rpm å®‰è£…nginxå’Œå“åº”çš„ä¾èµ–ï¼ˆInstall nginx and dependencies)1sudo yum install nginx å¯åŠ¨nginxæœåŠ¡å™¨(Start the nginx HTTP server)1sudo /etc/init.d/nginx start æ­¤æ—¶å¯åŠ¨åï¼Œå¯èƒ½ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ï¼š é€šè¿‡netstat -ntplå¯ä»¥æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ ä¸­é—´æˆ‘æŸ¥äº†ä¸€äº›èµ„æ–™ï¼Œè§£å†³åŠæ³•æ˜¯æ‰¾åˆ°nginxç›®å½•ä¸­default.dæ–‡ä»¶(/etc/nginx/conf.d/default.d)ï¼Œç„¶åä¿®æ”¹é‡Œé¢çš„å†…å®¹(vi default.d)ã€‚1234567891011121314151617181920212223242526272829server &#123; listen 80; server_name cailidan.cn,www.cailidan.cn; #charset koi8-r; #access_log logs/host.access.log main; # Load configuration files for the default server block. include /etc/nginx/default.d/*.conf; location / &#123; proxy_pass http://127.0.0.1:4000/; proxy_redirect off; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; &#125; error_page 404 /404.html; location = /404.html &#123; root /usr/share/nginx/html; &#125; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root /usr/share/nginx/html; &#125; æœ€åå†é‡æ–°å¯åŠ¨sudo /etc/init.d/nginx startå³å¯è®¿é—®nginxã€‚æ­¤æ—¶æœ¬éœ€è¦ip:portæ‰èƒ½è®¿é—®çš„ï¼Œå°±å˜æˆäº†ipå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œç›¸å½“äºé€šè¿‡ä»£ç†ï¼Œé‡æ–°å¤„ç†äº†url. Nginxç®€ä»‹ï¼šNginxæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„HTTPæœåŠ¡å™¨å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œ æœ€å¤§çš„ä¼˜ç‚¹æ˜¯èŠ‚çœèµ„æºï¼Œé€‚ç”¨äºå¤„ç†é«˜å¹¶å‘çš„è¯·æ±‚ã€‚ Nginxæœ€åˆæ˜¯æŒ‰ç…§åå‘ä»£ç†è®¾è®¡çš„ï¼Œå’ŒApacheä¸åŒ, nginxå…³å¿ƒå¦‚ä½•å¤„ç†url,è€Œä¸æ˜¯æ–‡ä»¶ï¼ Apache æ˜¯ä¸ªåŸºäºè¿›ç¨‹å¤„ç†çš„webæœåŠ¡å™¨ï¼Œå¦‚æœåŒæ—¶æœ‰å¤šä¸ªè¯·æ±‚ï¼Œå¿…é¡»è¦å¯åŠ¨å¤šä¸ªè¿›ç¨‹æ¥å¤„ç†ã€‚ è¿™æ ·åœ¨é«˜è´Ÿè½½çš„æƒ…å†µä¸‹ï¼Œèµ„æºçš„æ¶ˆè€—å’Œå“åº”çš„é€Ÿåº¦éƒ½ä¼šæœ‰å¾ˆå¤§çš„é—®é¢˜ã€‚ è€ŒNginxæ˜¯ä¸ªåŸºäºäº‹ä»¶(event)çš„å¼‚æ­¥å¤„ç†æ¨¡å¼ ä½†æ˜¯Nginxä¹Ÿæœ‰åŠ£åŠ¿ï¼Œè™½ç„¶åœ¨é™æ€çš„åå‘æ–¹é¢Nginxè¡¨ç°ä¼˜ç§€ï¼Œä½†æ˜¯åœ¨å¤„ç†PHPåŠ¨æ€è¯·æ±‚æ–¹é¢ä¸å¦‚Apacheï¼Œå¹¶ä¸”åœ¨æ“ä½œä½¿ç”¨æ–¹é¢ä¸å¦‚Apacheæ–¹ä¾¿ï¼Œä¾‹å¦‚Wordpressä¸€äº›æ’ä»¶å°±åªèƒ½åœ¨Apacheä¸Šèµ·ä½œç”¨ã€‚Nginxä¸€ä¸ªæœ€å¸¸è§çš„é—®é¢˜å‡ºç°è®¿é—®502é”™è¯¯ã€‚ æ—¢ä½¿ç”¨Nginxï¼Œåˆä½¿ç”¨ApacheApacheæ˜¯å› ä¸ºå…¶åŠŸèƒ½å¼ºå¤§è€Œå‡ºåçš„ï¼Œè€ŒNginxæ˜¯å› ä¸ºå…¶å“åº”é€Ÿåº¦å¿«è€Œè‘—ç§°çš„ã€‚è¿™å°±æ„å‘³ç€Nginxåœ¨é™æ€å†…å®¹çš„æœåŠ¡ä¸Šè¦ç›¸å¯¹å¿«äº›ï¼Œä¸è¿‡ï¼ŒApacheå¯ä»¥ä½¿ç”¨æ¨¡å—æ¥è¿è¡Œåå°åº”ç”¨æœåŠ¡å™¨ï¼Œè€Œä¸”è¿˜å¯ä»¥è¿è¡Œè„šæœ¬è¯­è¨€ã€‚ Apacheå’ŒNginxéƒ½å¯ä»¥ç”¨ä½œä»£ç†æœåŠ¡å™¨ï¼Œä¸è¿‡é€šå¸¸æˆ‘ä»¬ä¼šæŠŠNginxç”¨ä½œä»£ç†æœåŠ¡å™¨ï¼Œè€ŒæŠŠApacheç”¨ä½œåå°æœåŠ¡å™¨ã€‚NginxåŒ…å«äº† å…ˆè¿›çš„è´Ÿè½½å‡è¡¡å’Œå†…å®¹ç¼“å†²åŠŸèƒ½ã€‚å½“ç„¶ï¼ŒApacheæœåŠ¡å™¨çš„éƒ¨ç½²æ•°é‡å·¨å¤§ã€‚ä¸ºäº†å……åˆ†å‘æŒ¥ApacheæœåŠ¡å™¨çš„æ•ˆèƒ½ï¼Œå°±éœ€è¦æœ‰è´Ÿè½½å‡è¡¡å™¨ã€‚Apacheå¯ä»¥ä½¿ç”¨è‡ªèº«æ‰€åŒ…å«è´Ÿè½½å‡è¡¡æ¨¡å—ï¼Œå¦å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨åŸºäºç¡¬ä»¶çš„è´Ÿè½½å‡è¡¡å™¨ã€‚ å¦ä¸€ç§ä½¿ç”¨æ–¹æ³•æ˜¯ç»™Nginxé…ç½®ç‹¬ç«‹çš„ php-fpmåº”ç”¨ï¼Œæˆ‘ä»¬è®¤ä¸º php-fpmæ˜¯ä¸€ä¸ªåº”ç”¨ï¼Œè¿™æ˜¯å› ä¸ºå®ƒä¸æ˜¯æ‰§è¡ŒæœŸé—´å¯ä»¥è£…è½½çš„.dllæˆ–è€….soï¼Œè€Œæ˜¯ä¸Apacheçš„æ¨¡å—ä½¿ç”¨æ–¹æ³•ç›¸åŒã€‚Ngnixä½¿ç”¨php-fpmï¼ˆFastCGIè¿›ç¨‹ç®¡ç†å™¨ï¼‰æ¥å¤„ç†phpè„šæœ¬ï¼Œè¿™å°±ä½¿å¾—Nginxå…·æœ‰ç”Ÿæˆéé™æ€å†…å®¹çš„åŠŸèƒ½ã€‚ æˆ‘å°šæœªè§£å†³çš„é—®é¢˜å¿ƒç—›ï¼Œå› ä¸ºä»¥å‰æ²¡æœ‰ç”¨è¿‡nginx,ä»¥å‰ä¹Ÿåªæ˜¯å¬è¯´è¿‡ï¼Œè¿™æ¬¡ä¹Ÿä¸æ˜¯ä¸“é—¨æƒ³å­¦è¿™ä¸ªï¼Œåªæ˜¯æƒ³æŠŠç½‘ç«™ä¸è¦é€šè¿‡ç«¯å£è®¿é—®ï¼ŒæŸ¥åˆ°å¯ä»¥ç”¨nginxæ¯”è¾ƒæ–¹ä¾¿æ‰å»ç®€å•çš„äº†è§£äº†ä¸€ä¸‹ã€‚ä½†æ˜¯å‘ç°è™½ç„¶æˆ‘æƒ³è¦çš„æ•ˆæœè¾¾åˆ°äº†ï¼Œä»¥å‰çš„apachå’Œç°åœ¨çš„nginxå´æœ‰ç‚¹å†²çªäº†ã€‚æŸ¥åˆ°å¯ä»¥é€šè¿‡nginxæ¥å¤„ç†å‰ç«¯çš„èµ„æºï¼ŒåŒæ—¶å¯ä»¥ç”¨apacheåšåå°æœåŠ¡å™¨å¤„ç†åå°phpæ–‡ä»¶ã€‚è¿™æ ·å¯ä»¥å……åˆ†åˆ©ç”¨ä¸¤ä¸ªçš„ä¼˜ç‚¹ã€‚ä½†æ˜¯å¿…é¡»é€šè¿‡æ›´æ”¹nginxçš„é…ç½®æ‰å¯ä»¥ã€‚ç›¸å½“äºç”±åŸæ¥çš„LAMPåˆ°äº†LNAMPã€‚å¾…æˆ‘å¼„æ¸…æ¥šäº†è¿™ä¸ªåˆ°åº•æ€ä¹ˆé…ç½®ï¼Œå›å¤´å†æ¥å†™ä¸€ç¯‡è®°å½•ä¸‹æ¥ã€‚","categories":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/categories/å·¥å…·-é…ç½®/"}],"tags":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/tags/å·¥å…·-é…ç½®/"}]},{"title":"å¦‚ä½•å°†hexoåšå®¢éƒ¨ç½²åˆ°é˜¿é‡Œäº‘ä¸Š","slug":"å¦‚ä½•å°†hexoåšå®¢éƒ¨ç½²åˆ°é˜¿é‡Œäº‘ä¸Š","date":"2016-02-09T03:57:12.000Z","updated":"2016-12-12T02:33:32.000Z","comments":true,"path":"2016/02/09/å¦‚ä½•å°†hexoåšå®¢éƒ¨ç½²åˆ°é˜¿é‡Œäº‘ä¸Š/","link":"","permalink":"http://sevencai.github.io/2016/02/09/å¦‚ä½•å°†hexoåšå®¢éƒ¨ç½²åˆ°é˜¿é‡Œäº‘ä¸Š/","excerpt":"","text":"æ˜¨å¤©æ™šä¸ŠæŠ˜è…¾äº†ä¸€æ™šä¸Šï¼Œåˆæ˜¯é…ç¯å¢ƒåˆæ˜¯ä¼ æ–‡ä»¶ã€‚æˆ‘çš„é˜¿é‡Œäº‘æ˜¯centosç‰ˆæœ¬ï¼Œä¸­é—´å„ç§å¼¯è·¯ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰ç”¨ã€‚é¦–å…ˆåˆ©ç”¨puttyæˆ–è€…xshellè¿œç¨‹è¿æ¥ä½ çš„é˜¿é‡Œäº‘ã€‚ç”¨é˜¿é‡Œäº‘è‡ªå¸¦çš„æ§åˆ¶å°ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚æˆ‘è‡ªå·±ç”¨çš„æ˜¯xshellè§‰å¾—æ¯”è¾ƒæ–¹ä¾¿ç‚¹ç¨å¾®ã€‚ é…ç½®ç¯å¢ƒä¹‹å®‰è£…gitå®‰è£…ç¼–è¯‘gitåŸºç¡€åŒ…1yum -y install gcc zlib-devel openssl-devel perl cpio expat-devel gettext-devel curl autoconf ä¸‹è½½å’Œå®‰è£…Git1234567wget http://soft.itbulu.com/git/git-2.4.6.tar.gztar -zxvf git-2.4.6.tar.gzcd git-2.4.6autoconf./configuremakemake install æ£€æµ‹gitæ˜¯å¦å®‰è£…å¥½git -vè‹¥æœ‰ç‰ˆæœ¬å·å‡ºç°åˆ™è¯æ˜å®‰è£…æˆåŠŸ é…ç½®ç¯å¢ƒä¹‹å®‰è£…nodejsè‹¥æ˜¯ç›´æ¥wget http://nodejs.org/dist/v0.9.0/node-v0.9.0.tar.gzä¼šåœ¨ç¼–è¯‘æ—¶æŠ¥å¦‚ä¸‹çš„é”™ï¼ŒWARNING: C++ compiler too old, need g++ 4.8 or clang++ 3.4 (CXX=g++)è¿™æ˜¯ç”±äºCentOS 6 ä¸­ç¼–è¯‘ node4+ éœ€è¦é«˜ç‰ˆæœ¬å·çš„ C++ ç¼–è¯‘å™¨ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ç›´æ¥ç”¨å®˜ç½‘ç¼–è¯‘å¥½çš„nodejsäºŒè¿›åˆ¶åŒ…ã€‚ è·³è¿‡ç¼–è¯‘å®‰è£…åœ¨nodeä¸‹è½½ç¼–è¯‘å¥½çš„ç‰ˆæœ¬ä¸­ä¸‹è½½ï¼Œé€šè¿‡æœåŠ¡å™¨ç®¡ç†å·¥å…·ï¼ˆæˆ‘ç”¨çš„æ˜¯winscpï¼‰å°†ä¸Šä¼ å¥½çš„åŒ…åˆ°/optç›®å½•ï¼Œç„¶åè§£å‹è‡³å½“å‰ç›®å½•å¹¶ä¸”é‡å‘½åä¸ºnodeï¼ˆæˆ‘ä¸‹è½½çš„æ˜¯4.2.6ç‰ˆæœ¬ï¼‰12tar -zvxf node-v4.2.6-linux-x64.tar.gzmv node-v4.2.6-linux-x64 node é…ç½®ç¯å¢ƒå˜é‡è¿›å…¥etcç›®å½•ï¼Œæ‰“å¼€profileæ–‡ä»¶ï¼ˆå»ºè®®åœ¨æ”¹åŠ¨å‰ï¼Œå…ˆåšä¸ªå¤‡ä»½ï¼‰vi /etc/profileå¢åŠ ä¸‹åˆ—å†…å®¹ï¼Œæ³¨æ„å¦‚æœä½ å…ˆå‰ä¸æ˜¯ä¸Šä¼ åˆ°äº†optç›®å½•ä¸‹ï¼Œé‚£ä¹ˆå¯¹åº”åº•ä¸‹çš„NODE_HOMEè·¯å¾„ä¹Ÿè¦æ”¹12export NODE_HOME=/opt/nodeexport PATH=$NODE_HOME/bin:$PATH æ£€æµ‹nodeæ˜¯å¦å®‰è£…æˆåŠŸ$ node -vå¦‚æœ‰ç‰ˆæœ¬å·ï¼Œåˆ™è¡¨ç¤ºæˆåŠŸã€‚å¦‚æœæç¤ºcommand not found è¯æ˜æ²¡æœ‰æˆåŠŸ æ­å»ºåšå®¢å®‰è£…å…¨å±€hexo npm install hexo -g å¦‚æœæ˜¯å·²æœ‰æœ¬åœ°hexoåšå®¢ï¼Œå¹¶ä¸”æµ‹è¯•æœ¬åœ°æˆåŠŸï¼Œåˆ™ç›´æ¥é€šè¿‡winscpå°†æœ¬åœ°blogä¸Šä¼ åˆ°äº‘æœåŠ¡å™¨ä¸Šï¼Œå¦‚home/blogç›®å½•ï¼Œä¸Šä¼ æˆåŠŸåï¼Œhexo serveræ—¢å¯ä»¥åœ¨ä½ çš„ip:4000ç«¯å£ä¸ŠæŸ¥çœ‹ä½ çš„hexoã€‚å½“ç„¶æˆ‘ä»¬ä¸å¯èƒ½è®©åˆ«äººé€šè¿‡ç«¯å£æ¥è®¿é—®æˆ‘ä»¬çš„ç½‘å€ï¼Œæ‰€ä»¥è¿˜éœ€è¦è®¾ç½®nginxçš„åå‘ä»£ç†ï¼Œç›‘å¬4000ç«¯å£,è¿™æˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡è¯´æ˜ã€‚ å¦‚æœæ˜¯æ²¡æœ‰æœ¬åœ°åšå®¢ï¼Œç¬¬ä¸€æ¬¡æ¥è§¦ï¼Œä¹Ÿå¾ˆç®€å•ï¼š12345cd bloghexo initnpm installhexo generatehexo server å³å¯å¾—åˆ°é»˜è®¤ä¸»é¢˜ä¸ºlandscapeçš„hexoåšå®¢ã€‚è‡³æ­¤é˜¿é‡Œäº‘ä¸Šä½ çš„hexoåšå®¢å°±å®Œæˆå•¦ï¼","categories":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/categories/å·¥å…·-é…ç½®/"}],"tags":[{"name":"å·¥å…·/é…ç½®","slug":"å·¥å…·-é…ç½®","permalink":"http://sevencai.github.io/tags/å·¥å…·-é…ç½®/"}]},{"title":"å¾®ä¿¡å¼€å‘ä¹‹å¼€å‘è€…æ¨¡å¼ä¸‹è‡ªå®šä¹‰èœå•","slug":"å¾®ä¿¡å¼€å‘ä¹‹å¼€å‘è€…æ¨¡å¼ä¸‹è‡ªå®šä¹‰èœå•","date":"2016-02-04T10:03:38.000Z","updated":"2016-12-12T02:53:42.000Z","comments":true,"path":"2016/02/04/å¾®ä¿¡å¼€å‘ä¹‹å¼€å‘è€…æ¨¡å¼ä¸‹è‡ªå®šä¹‰èœå•/","link":"","permalink":"http://sevencai.github.io/2016/02/04/å¾®ä¿¡å¼€å‘ä¹‹å¼€å‘è€…æ¨¡å¼ä¸‹è‡ªå®šä¹‰èœå•/","excerpt":"","text":"è·å¾—ACCESS_TOKENä¸€ä¸ªç®€å•çš„æ–¹æ³•æ˜¯ç›´æ¥ä½¿ç”¨ç½‘é¡µè°ƒè¯•å·¥å…·è°ƒè¯•è¯¥æ¥å£ã€‚è¿›å…¥ç½‘é¡µæ¥å£å¡«å…¥ä½ çš„AppIdè¿˜æœ‰AppSecretã€‚å³å¯ä»¥å¾—åˆ°ACCESS_TOKEN ç¼–å†™ä»£ç æ–°å»ºä¸€ä¸ªphpæ–‡ä»¶å¹¶å†™å…¥ä¸‹é¢çš„ä»£ç ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687&lt;?phpheader(\"Content-type: text/html; charset=utf-8\");define(\"ACCESS_TOKEN\", 'å¡«å…¥ä½ åˆšåˆšå¾—åˆ°çš„ACCESS_TOKEN');//åˆ›å»ºèœå•function createMenu($data)&#123; //åˆ©ç”¨curlå‡½æ•°å‘é€postè¯·æ±‚ $ch = curl_init(); //postè¯¥æ¥å£ï¼Œhttps://api.weixin.qq.com/cgi-bin/menu/createå³ä¸ºå¾®ä¿¡åˆ›å»ºèœå•çš„æ¥å£ curl_setopt($ch, CURLOPT_URL, \"https://api.weixin.qq.com/cgi-bin/menu/create?access_token=\".ACCESS_TOKEN); curl_setopt($ch, CURLOPT_CUSTOMREQUEST, \"POST\"); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE); curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (compatible; MSIE 5.01; Windows NT 5.0)'); curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); curl_setopt($ch, CURLOPT_AUTOREFERER, 1); curl_setopt($ch, CURLOPT_POSTFIELDS, $data); curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); $tmpInfo = curl_exec($ch); if (curl_errno($ch)) &#123; return curl_error($ch); &#125; curl_close($ch); return $tmpInfo;&#125;//è‡ªå®šä¹‰èœå•å†…å®¹ï¼Œå¿…é¡»æ˜¯jsonæ ¼å¼ï¼Œbuttonä¸ºç¬¬ä¸€å±‚èœå•ï¼Œsub_buttonä¸ºäºŒçº§èœå•ï¼Œnameä¸ºå¯¹åº”å€¼//æ³¨æ„å…¶ç±»å‹å¸¸ç”¨çš„æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ç›´æ¥è·³è½¬åˆ°URLé¡µé¢ï¼Œå³viewç±»å‹ï¼›å¦ä¸€ç§ï¼Œæ˜¯å‘é€æŒ‡ä»¤ï¼Œå³clickç±»å‹ï¼Œè¿™ä¸ªclickç±»å‹ç›¸å½“äºå‘é€å…³é”®å­—ã€‚$data = ' &#123; \"button\":[ &#123; \"name\":\"åšå®¢\", \"sub_button\":[ &#123; \"type\":\"click\", \"name\":\"æˆ‘çš„åšå®¢\", \"key\":\"jsxw\" &#125;, &#123; \"type\":\"click\", \"name\":\"æ²æ­Œçš„åšå®¢\", \"key\":\"cjzc\" &#125;] &#125;, &#123; \"name\":\"æ¨è\", \"sub_button\":[ &#123; \"type\":\"click\", \"name\":\"æŠ€æœ¯æ–‡ç« \", \"key\":\"jrkp\" &#125;, &#123; \"type\":\"view\", \"name\":\"æ®µå­\", \"url\":\"http://XX/index.php/market/index\" &#125;, &#123; \"type\":\"click\", \"name\":\"å…¬å·æ¨è\", \"key\":\"jycl\" &#125;, &#123; \"type\":\"click\", \"name\":\"ç”Ÿæ´»\", \"key\":\"tztd\" &#125;] &#125;, &#123; \"name\":\"ç•™è¨€\", \"sub_button\":[ &#123; \"type\":\"view\", \"name\":\"å…³äºæˆ‘\", \"url\":\"http://www.index.php/article/index/id/114\" &#125;, &#123; \"type\":\"view\", \"name\":\"ç•™è¨€\", \"url\":\"http://www.index.php/article/index/id/115\" &#125; ] &#125; ] &#125;';echo createMenu($data);//åˆ›å»ºèœå•?&gt; æœ€åæ‰§è¡Œè¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥å•¦ã€‚é€šè¿‡POSTæ–¹å¼æŠŠèœå•çš„æ•°æ®å‘é€åˆ°å¾®ä¿¡æœåŠ¡å™¨ï¼Œåœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°çš„è¿”å›æç¤ºä¸­ï¼Œä½ çœ‹åˆ°OKçš„å­—çœ¼ï¼Œé‚£ä¹ˆå°±è¯æ˜å·²ç»æˆåŠŸäº†ã€‚åˆ›å»ºå®Œèœå•ä¹‹åï¼Œç”±äºå¾®ä¿¡å®¢æˆ·ç«¯çš„ç¼“å­˜è¦24å°æ—¶æ‰æ¸…ç†ä¸€æ¬¡ï¼Œæ‰€ä»¥ä½ è¦é©¬ä¸Šçœ‹åˆ°æ•ˆæœå°±éœ€è¦é‡æ–°å…³æ³¨ä½ çš„å…¬ä¼—è´¦å·ã€‚ï¼ˆæˆ‘æµ‹è¯•çš„æ—¶å€™å¯ä»¥ä¸éœ€è¦é‡æ–°å…³æ³¨ï¼ˆä»…é™äºèœå•ï¼‰ï¼‰ è§£é‡Šä¸€ä¸‹curlæ˜¯ä»€ä¹ˆï¼ŸcURLåˆ©ç”¨URLè¯­æ³•è§„å®šæ¥ä¼ è¾“æ–‡ä»¶å’Œæ•°æ®çš„å·¥å…·ï¼Œå› ä¸ºå®ƒæ˜¯æ¨¡æ‹Ÿæµè§ˆå™¨ï¼Œå› æ­¤å®ƒåŒæ ·æ”¯æŒå¤šç§åè®®ï¼ŒFTP, FTPS, HTTP, HTTPS, GOPHER, TELNET, DICT, FILE ä»¥åŠ LDAPç­‰åè®®éƒ½å¯ä»¥å¾ˆå¥½çš„æ”¯æŒï¼ŒåŒ…æ‹¬ä¸€äº›ï¼šHTTPSè®¤è¯ï¼ŒHTTP POSTæ–¹æ³•ï¼ŒHTTP PUTæ–¹æ³•ï¼ŒFTPä¸Šä¼ ï¼Œkeyberosè®¤è¯ï¼ŒHTTPä¸Šä¼ ï¼Œä»£ç†æœåŠ¡å™¨ï¼Œcookiesï¼Œç”¨æˆ·å/å¯†ç è®¤è¯ï¼Œä¸‹è½½æ–‡ä»¶æ–­ç‚¹ç»­ä¼ ï¼Œä¸Šä¼ æ–‡ä»¶æ–­ç‚¹ç»­ä¼ ï¼Œhttpä»£ç†æœåŠ¡å™¨ç®¡é“ï¼Œç”šè‡³å®ƒè¿˜æ”¯æŒIPv6ï¼Œscoket5ä»£ç†æœåŠ¡å™¨ï¼Œé€šè¿‡httpä»£ç†æœåŠ¡å™¨ä¸Šä¼ æ–‡ä»¶åˆ°FTPæœåŠ¡å™¨ç­‰ç­‰ã€‚ ä½¿ç”¨curlçš„æ­¥éª¤1.åˆå§‹åŒ–ï¼Œåˆ›å»ºä¸€ä¸ªæ–°cURLèµ„æº curl_init() 2.è®¾ç½®URLå’Œç›¸åº”çš„é€‰é¡¹ curl_setopt() 3.æŠ“å–URLå¹¶æŠŠå®ƒä¼ é€’ç»™æµè§ˆå™¨ curl_exec() 4.å…³é—­cURLèµ„æºï¼Œå¹¶ä¸”é‡Šæ”¾ç³»ç»Ÿèµ„æº curl_close() æˆ‘ä»¬æ¥é‡‡é›†ä¸€ä¸ªé¡µé¢ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨file_get_contents()å‡½æ•°æ¥è·å–ï¼š1234567&lt;?php $str = file_get_contents('http://****'); //æˆ–è€…æ˜¯ï¼š $str = file(\"http://****\"); //æˆ–è€…æ˜¯ï¼š readfile(\"http://****\"); ?&gt; è¿™æ ·æˆ‘ä»¬ä¼šå‘ç°ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•æœ‰æ•ˆåœ°è¿›è¡Œé”™è¯¯å¤„ç†ï¼Œæ›´é‡è¦çš„æ˜¯æˆ‘ä»¬æ²¡æœ‰åŠæ³•å®Œæˆä¸€äº›é«˜éš¾åº¦çš„ä»»åŠ¡ï¼šå¦‚ï¼šå¤„ç†cookiesï¼ŒéªŒè¯ï¼Œè¡¨å•æäº¤ï¼Œæ–‡ä»¶ä¸Šä¼ ç­‰ç­‰ã€‚1234567891011&lt;?php //1.åˆå§‹åŒ–ï¼Œåˆ›å»ºä¸€ä¸ªæ–°cURLèµ„æº $ch = curl_init(); //2.è®¾ç½®URLå’Œç›¸åº”çš„é€‰é¡¹ curl_setopt($ch, CURLOPT_URL, \"http://*****/\"); curl_setopt($ch, CURLOPT_HEADER, 0); //3.æŠ“å–URLå¹¶æŠŠå®ƒä¼ é€’ç»™æµè§ˆå™¨ curl_exec($ch); //4.å…³é—­cURLèµ„æºï¼Œå¹¶ä¸”é‡Šæ”¾ç³»ç»Ÿèµ„æº curl_close($ch); ?&gt; ä¸Šé¢ç”¨åˆ°äº†ä¸¤ä¸ªé«˜çº§é€‰é¡¹ï¼šCURLOPT_URLå’ŒCURLOPT_HEADERï¼Œåˆ†åˆ«ä»£è¡¨â€œéœ€è¦è·å–çš„URLåœ°å€â€å’Œâ€œå¯ç”¨æ—¶ä¼šå°†å¤´æ–‡ä»¶çš„ä¿¡æ¯ä½œä¸ºæ•°æ®æµè¾“å‡ºâ€ã€‚è¿™æ ·ä¸€ä¸ªç®€å•çš„å°±å®Œæˆäº†ï¼Œå®é™…ä¸Šå®ƒè¿˜æœ‰å¾ˆå¤šå¯é€‰é¡¹ã€‚å¹¶ä¸”å®ƒçš„æ•ˆç‡è¿œè¿œé«˜äºfile_get_contents().","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/tags/WEBå¼€å‘/"}]},{"title":"thiså€¼&&thisä¸Šä¸‹æ–‡&&æ­¤æ³•ä½œç”¨åŸŸ","slug":"thiså€¼-thisä¸Šä¸‹æ–‡-è¯æ³•ä½œç”¨åŸŸ","date":"2016-02-04T06:58:46.000Z","updated":"2016-12-12T03:01:12.000Z","comments":true,"path":"2016/02/04/thiså€¼-thisä¸Šä¸‹æ–‡-è¯æ³•ä½œç”¨åŸŸ/","link":"","permalink":"http://sevencai.github.io/2016/02/04/thiså€¼-thisä¸Šä¸‹æ–‡-è¯æ³•ä½œç”¨åŸŸ/","excerpt":"","text":"thiså€¼åœ¨ECMAScriptçš„è§„èŒƒä¸­å¯¹thisçš„å®šä¹‰ä¸ºï¼šthisæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œä¸æ‰§è¡ŒæœŸä¸Šä¸‹æ–‡ç›¸å…³ï¼Œå› æ­¤å¯ä»¥ç§°ä¹‹ä¸ºä¸Šä¸‹æ–‡å¯¹è±¡ã€‚thisæ˜¯æ‰§è¡ŒæœŸä¸Šä¸‹æ–‡å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚ç”±äºthisæ˜¯æ‰§è¡ŒæœŸä¸Šä¸‹æ–‡å¯¹è±¡çš„å±æ€§ï¼Œå› æ­¤åœ¨ä»£ç ä¸­ä½¿ç”¨thisï¼Œå…¶å€¼ç›´æ¥ä»ä¸Šä¸‹æ–‡å¯¹æˆé‚£ä¸ªä¸­è·å¾—ï¼Œè€Œæ— éœ€æŸ¥æ‰¾ä½œç”¨åŸŸé“¾ï¼Œå…¶å€¼åœ¨è¿›å…¥ä¸Šä¸‹æ–‡çš„é‚£ä¸ªæ—¶åˆ»è¢«ç¡®å®šã€‚ åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­ï¼Œthisæ˜¯å…¨å±€å¯¹è±¡æœ¬èº«ï¼š1234var attribute = \"attribute\"; console.log(attribute); console.log(this.attribute); æœ€åç»“æœï¼šattribute attributeè€Œåœ¨å‡½æ•°ä¸Šä¸‹æ–‡ä¸­ï¼Œä¸åŒçš„è°ƒç”¨æ–¹å¼å¯ä»¥æœ‰ä¸åŒçš„å€¼ã€‚ thisä¸Šä¸‹æ–‡thiså€¼æ˜¯æ‰§è¡ŒæœŸä¸Šä¸‹æ–‡å¯¹è±¡çš„ä¸€ä¸ªå±æ€§(æ‰§è¡ŒæœŸä¸Šä¸‹æ–‡å¯¹è±¡åŒ…æ‹¬å˜é‡å¯¹è±¡ï¼Œä½œç”¨åŸŸé“¾ä»¥åŠthis)ã€‚æ‰§è¡ŒæœŸä¸Šä¸‹æ–‡å¯¹è±¡æœ‰ä¸‰ç±»ï¼Œå½“è¿›å…¥ä¸åŒçš„ä¸Šä¸‹æ–‡æ—¶ï¼Œthisçš„å€¼ä¼šç¡®å®šä¸‹æ¥ï¼Œå¹¶ä¸”thisçš„å€¼ä¸èƒ½æ›´æ”¹ã€‚ç»“åˆå‰é¢å°èŠ‚è®¨è®ºçš„å†…å®¹ï¼Œåœ¨æ‰§è¡Œå…¨å±€ä»£ç æ—¶ï¼Œæ§åˆ¶æµä¼šè¿›å…¥å…¨å±€æ‰§è¡ŒæœŸä¸Šä¸‹æ–‡ï¼Œè€Œåœ¨æ‰§è¡Œå‡½æ•°æ—¶ï¼Œåˆä¼šæœ‰å‡½æ•°æ‰§è¡ŒæœŸä¸Šä¸‹æ–‡ã€‚1234567891011121314151617181920var global = this; var tom = &#123; name : \"Tom\", home : \"desine\", getInfo : function()&#123; print(this.name + \", from \"+this.home); &#125; &#125;; tom.getInfo(); var jerry = &#123; name : \"Jerry\", getInfo : tom.getInfo &#125; jerry.getInfo(); global.getInfo = tom.getInfo; global.getInfo(); æœ€åç»“æœä¸ºï¼šTom, from desineJerry, from undefinedundefined, from undefined tomå¯¹è±¡æœ¬èº«å…·æœ‰nameå’Œhomeå±æ€§ï¼Œå› æ­¤åœ¨æ‰§è¡Œtom.getInfoæ—¶ï¼Œä¼šæ‰“å°tomå¯¹è±¡ä¸Šçš„è¿™ä¸¤ä¸ªå±æ€§å€¼ã€‚å½“å°†global.getInfoå±æ€§è®¾ç½®ä¸ºtom.getInfoæ—¶ï¼ŒgetInfoä¸­çš„thiså€¼ï¼Œåœ¨è¿è¡Œæ—¶ï¼Œäº‹å®ä¸Šæ˜¯globalå¯¹è±¡(è¿˜è®°å¾—åœ¨å…¨å±€æ‰§è¡ŒæœŸä¸Šä¸‹æ–‡å¯¹è±¡ä¸­ï¼Œglobalçš„å˜é‡å¯¹è±¡çš„thiså€¼å—ï¼Ÿ)çš„å˜é‡å¯¹è±¡ä¸­çš„thiså°±æ˜¯è‡ªèº«ã€‚è€Œglobal.nameå’Œglobal.homeéƒ½æ²¡æœ‰å®šä¹‰ï¼Œå› æ­¤ä¼šå¾—åˆ°ä¸Šè¾¹çš„ç»“æœã€‚ ä»ä¸Šä¾‹ä¸­è¿˜å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å‡½æ•°getInfoè°ƒç”¨æ—¶ï¼Œåœ¨getInfoä¹‹å‰çš„å¯¹è±¡(tom,jerry,global)ä¼šè¢«ä½œä¸ºthisæ¥æ‰§è¡Œã€‚å½“ç„¶globalå¯ä»¥çœç•¥ï¼Œè¿™æ—¶ä»ç„¶æ˜¯å…¨å±€å¯¹è±¡ä½œä¸ºthisã€‚åº”è¯¥è®°ä½çš„æ˜¯ï¼Œthisçš„å€¼å–å†³äºè°ƒç”¨å‡½æ•°çš„æ–¹å¼(å½“ç„¶è¿™é‡Œçš„thisæŒ‡å‡½æ•°ä¸Šä¸‹æ–‡ä¸­çš„thisï¼Œå…¨å±€ä¸Šä¸‹æ–‡çš„æˆ‘ä»¬å·²ç»è®¨è®ºè¿‡äº†)ã€‚ è¯æ³•ä½œç”¨åŸŸåœ¨JavaScriptä¸­ï¼Œå‡½æ•°å¯¹è±¡çš„åˆ›å»ºå’Œå‡½æ•°æœ¬èº«çš„æ‰§è¡Œæ˜¯å®Œå…¨ä¸åŒçš„ä¸¤ä¸ªè¿‡ç¨‹ï¼šå‡½æ•°åˆ›å»ºè¿‡ç¨‹ï¼š1234function func()&#123; var x = 0; print(\"function func\"); &#125; å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ï¼šfunc()æ‰€è°“è¯æ³•ä½œç”¨åŸŸ(é™æ€ä½œç”¨åŸŸ)æ˜¯æŒ‡ï¼Œåœ¨å‡½æ•°å¯¹è±¡çš„åˆ›å»ºæ—¶ï¼Œä½œç”¨åŸŸâ€[[scope]]â€å°±å·²ç»å»ºç«‹ï¼Œè€Œå¹¶éåˆ°æ‰§è¡Œæ—¶ï¼Œå› ä¸ºå‡½æ•°åˆ›å»ºåå¯èƒ½æ°¸è¿œä¸ä¼šè¢«æ‰§è¡Œï¼Œä½†æ˜¯ä½œç”¨åŸŸæ˜¯å§‹ç»ˆå­˜åœ¨çš„ã€‚ æ¯”å¦‚åœ¨ä¸Šä¾‹ä¸­ï¼Œå¦‚æœåœ¨ç¨‹åºä¸­ä½¿ç”¨æ²¡æœ‰è°ƒç”¨func(),é‚£ä¹ˆï¼Œfuncå¯¹è±¡ä»æ—§æ˜¯å­˜åœ¨çš„ï¼Œåœ¨å†…å­˜çš„ç»“æ„å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š1func.[\"[[scope]]\"] = global.[\"variable object\"]; è€Œå½“å‡½æ•°æ‰§è¡Œæ—¶ï¼Œè¿›å…¥å‡½æ•°æ‰§è¡ŒæœŸä¸Šä¸‹æ–‡ï¼Œå‡½æ•°çš„æ´»åŠ¨å¯¹è±¡è¢«åˆ›å»ºï¼Œæ­¤æ—¶çš„ä½œç”¨åŸŸé“¾æ˜¯æ´»åŠ¨å¯¹è±¡å’Œâ€[[scope]]â€å±æ€§çš„åˆæˆã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"javascriptä½œç”¨åŸŸé“¾å’Œæ´»åŠ¨å¯¹è±¡","slug":"javascriptä½œç”¨åŸŸé“¾å’Œæ´»åŠ¨å¯¹è±¡","date":"2016-02-04T05:18:12.000Z","updated":"2016-12-12T03:00:32.000Z","comments":true,"path":"2016/02/04/javascriptä½œç”¨åŸŸé“¾å’Œæ´»åŠ¨å¯¹è±¡/","link":"","permalink":"http://sevencai.github.io/2016/02/04/javascriptä½œç”¨åŸŸé“¾å’Œæ´»åŠ¨å¯¹è±¡/","excerpt":"","text":"ä»»ä½•ç¨‹åºè®¾è®¡è¯­è¨€éƒ½æœ‰ä½œç”¨åŸŸçš„æ¦‚å¿µï¼Œç®€å•çš„è¯´ï¼Œä½œç”¨åŸŸå°±æ˜¯å˜é‡ä¸å‡½æ•°çš„å¯è®¿é—®èŒƒå›´ï¼Œå³ä½œç”¨åŸŸæ§åˆ¶ç€å˜é‡ä¸å‡½æ•°çš„å¯è§æ€§å’Œç”Ÿå‘½å‘¨æœŸã€‚åœ¨JavaScriptä¸­ï¼Œå˜é‡çš„ä½œç”¨åŸŸæœ‰å…¨å±€ä½œç”¨åŸŸå’Œå±€éƒ¨ä½œç”¨åŸŸä¸¤ç§ã€‚ javascriptçš„ä½œç”¨åŸŸå…¨å±€ä½œç”¨åŸŸï¼ˆGlobal Scopeï¼‰1.æœ€å¤–å±‚å‡½æ•°å’Œåœ¨æœ€å¤–å±‚å‡½æ•°å¤–é¢å®šä¹‰çš„å˜é‡æ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸï¼Œä¾‹å¦‚ï¼š123456789101112var author=\"Seven\";function doSomething()&#123; var blogName=\"Seven's Blog\"; function innerSay()&#123; alert(blogName); &#125; innerSay();&#125;alert(author); //Sevenalert(blogName); //è„šæœ¬é”™è¯¯doSomething(); //Seven's BloginnerSay() //è„šæœ¬é”™è¯¯ è¿™é‡Œauthor,dosomethingéƒ½æ˜¯å…¨å±€å˜é‡ 2.æ‰€æœ‰æœ«å®šä¹‰ç›´æ¥èµ‹å€¼çš„å˜é‡è‡ªåŠ¨å£°æ˜ä¸ºæ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸï¼Œä¾‹å¦‚ï¼š12345678function doSomething()&#123; var author=\"Seven\"; blogName=\"Seven's Blog\"; alert(authorName);&#125;doSomething(); //Sevenalert(blogName); //Seven's Blogalert(author); //è„šæœ¬é”™è¯¯ è¿™é‡ŒblogNameæ²¡æœ‰è¢«å£°æ˜ï¼Œé»˜è®¤ä¸ºå…¨å±€å¯¹è±¡ã€‚å¯ä»¥åœ¨å¤–å±‚è®¿é—®ï¼Œè€ŒauthorNameæ˜¯å±€éƒ¨å˜é‡ 2.å±€éƒ¨ä½œç”¨åŸŸï¼ˆLocal Scopeï¼‰å’Œå…¨å±€ä½œç”¨åŸŸç›¸åï¼Œå±€éƒ¨ä½œç”¨åŸŸä¸€èˆ¬åªåœ¨å›ºå®šçš„ä»£ç ç‰‡æ®µå†…å¯è®¿é—®åˆ°ï¼Œæœ€å¸¸è§çš„ä¾‹å¦‚å‡½æ•°å†…éƒ¨ï¼Œæ‰€æœ‰åœ¨ä¸€äº›åœ°æ–¹ä¹Ÿä¼šçœ‹åˆ°æœ‰äººæŠŠè¿™ç§ä½œç”¨åŸŸç§°ä¸ºå‡½æ•°ä½œç”¨åŸŸï¼Œä¾‹å¦‚ä¸Šåˆ—ä»£ç ä¸­çš„authorå’Œå‡½æ•°innerSayéƒ½åªæ‹¥æœ‰å±€éƒ¨ä½œç”¨åŸŸã€‚ javascriptä½œç”¨åŸŸé“¾åœ¨JavaScriptä¸­ï¼Œå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå®é™…ä¸Šï¼ŒJavaScripté‡Œä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ã€‚å‡½æ•°å¯¹è±¡å’Œå…¶å®ƒå¯¹è±¡ä¸€æ ·ï¼Œæ‹¥æœ‰å¯ä»¥é€šè¿‡ä»£ç è®¿é—®çš„å±æ€§å’Œä¸€ç³»åˆ—ä»…ä¾›JavaScriptå¼•æ“è®¿é—®çš„å†…éƒ¨å±æ€§ã€‚å…¶ä¸­ä¸€ä¸ªå†…éƒ¨å±æ€§æ˜¯[[Scope]]ï¼Œç”±ECMA-262æ ‡å‡†ç¬¬ä¸‰ç‰ˆå®šä¹‰ï¼Œè¯¥å†…éƒ¨å±æ€§åŒ…å«äº†å‡½æ•°è¢«åˆ›å»ºçš„ä½œç”¨åŸŸä¸­å¯¹è±¡çš„é›†åˆï¼Œè¿™ä¸ªé›†åˆè¢«ç§°ä¸ºå‡½æ•°çš„ä½œç”¨åŸŸé“¾ï¼Œå®ƒå†³å®šäº†å“ªäº›æ•°æ®èƒ½è¢«å‡½æ•°è®¿é—®ã€‚ ä½œç”¨åŸŸé“¾ä¸åŸå‹é“¾ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ç»„æˆçš„é“¾ï¼Œç”¨ä»¥åœ¨ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾æ ‡è¯†ç¬¦(å˜é‡ï¼Œå‡½æ•°ç­‰)ã€‚æŸ¥æ‰¾æ—¶ä¹Ÿä¸åŸå‹é“¾ç±»ä¼¼ï¼Œå¦‚æœæ¿€æ´»å¯¹è±¡æœ¬èº«å…·æœ‰è¯¥å˜é‡ï¼Œåˆ™ç›´æ¥ä½¿ç”¨å˜é‡çš„å€¼ï¼Œå¦åˆ™å‘ä¸Šå±‚æœç´¢ï¼Œä¸€æ¬¡ç±»æ¨ï¼ŒçŸ¥é“æŸ¥æ‰¾åˆ°æˆ–è€…è¿”å›undefinedã€‚ä½œç”¨åŸŸé“¾çš„ä¸»è¦ä½œç”¨æ˜¯ç”¨ä»¥æŸ¥æ‰¾è‡ªç”±å˜é‡ï¼Œæ‰€è°“è‡ªç”±å˜é‡æ˜¯æŒ‡ï¼Œåœ¨å‡½æ•°ä¸­ä½¿ç”¨çš„ï¼Œéå‡½æ•°å†…éƒ¨å±€éƒ¨å˜é‡ï¼Œä¹Ÿéå‡½æ•°å†…éƒ¨å®šä¹‰çš„å‡½æ•°åï¼Œä¹Ÿéå½¢å¼å‚æ•°çš„å˜é‡ã€‚è¿™äº›å˜é‡é€šå¸¸æ¥è‡ªäºå‡½æ•°çš„â€œå¤–å±‚â€æˆ–è€…å…¨å±€ä½œç”¨åŸŸï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨çš„windowå¯¹è±¡åŠå…¶å±æ€§ã€‚ 12345678910111213//å…¨å±€å˜é‡åªèƒ½è®¿é—®åˆ°toponevar topone = \"top-level\"; (function outter()&#123; //å±€éƒ¨å˜é‡ï¼Œå¯ä»¥è®¿é—®åˆ°toponeå’Œmiddle var middle = \"mid-level\"; (function inner()&#123; //å±€éƒ¨å˜é‡ï¼Œå¯ä»¥è®¿é—®åˆ°bottom,middle,topone var bottom = \"bot-level\"; print(topone+\"&gt;\"+middle+\"&gt;\"+bottom); &#125;)();&#125;)(); æ ¹æ®ä¸Šå›¾æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå†…éƒ¨å‡½æ•°çš„ä½œç”¨åŸŸé“¾ï¼Œç”±ä¸¤éƒ¨åˆ†ï¼šå†…éƒ¨å‡½æ•°è‡ªèº«çš„æ´»åŠ¨å¯¹è±¡ï¼Œå†…éƒ¨å‡½æ•°çš„ä¸€ä¸ªå±æ€§â€[[scope]]â€,è€Œâ€[[scope]]â€çš„å€¼ä¸ºå…¶å¤–éƒ¨å‡½æ•°outterçš„æ´»åŠ¨å¯¹è±¡ï¼Œå…¶æ›´å¤–éƒ¨çš„å…¨å±€globalå¯¹è±¡çš„å˜é‡å¯¹è±¡ã€‚è¿™æ ·ï¼Œå¦‚æœåœ¨innerä¸­è¦ä½¿ç”¨å¤–éƒ¨çš„è‡ªç”±å˜é‡ï¼Œæ˜¾ç„¶å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ²¿ç€ä½œç”¨åŸŸé“¾ä¸Šæº¯ã€‚äº‹å®ä¸Šï¼Œå‡½æ•°çš„å±æ€§â€[[scope]]â€ä¼šåœ¨å‡½æ•°å¯¹è±¡åˆ›å»ºçš„æ—¶å€™è¢«åˆ›å»ºã€‚ ä½œç”¨åŸŸé“¾å’Œä»£ç ä¼˜åŒ–ä»ä½œç”¨åŸŸé“¾çš„ç»“æ„å¯ä»¥çœ‹å‡ºï¼Œåœ¨è¿è¡ŒæœŸä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸé“¾ä¸­ï¼Œæ ‡è¯†ç¬¦æ‰€åœ¨çš„ä½ç½®è¶Šæ·±ï¼Œè¯»å†™é€Ÿåº¦å°±ä¼šè¶Šæ…¢ã€‚å› ä¸ºå…¨å±€å˜é‡æ€»æ˜¯å­˜åœ¨äºè¿è¡ŒæœŸä¸Šä¸‹æ–‡ä½œç”¨åŸŸé“¾çš„æœ€æœ«ç«¯ï¼Œå› æ­¤åœ¨æ ‡è¯†ç¬¦è§£æçš„æ—¶å€™ï¼ŒæŸ¥æ‰¾å…¨å±€å˜é‡æ˜¯æœ€æ…¢çš„ã€‚æ‰€ä»¥ï¼Œåœ¨ç¼–å†™ä»£ç çš„æ—¶å€™åº”å°½é‡å°‘ä½¿ç”¨å…¨å±€å˜é‡ï¼Œå°½å¯èƒ½ä½¿ç”¨å±€éƒ¨å˜é‡ã€‚ä¸€ä¸ªå¥½çš„ç»éªŒæ³•åˆ™æ˜¯ï¼šå¦‚æœä¸€ä¸ªè·¨ä½œç”¨åŸŸçš„å¯¹è±¡è¢«å¼•ç”¨äº†ä¸€æ¬¡ä»¥ä¸Šï¼Œåˆ™å…ˆæŠŠå®ƒå­˜å‚¨åˆ°å±€éƒ¨å˜é‡é‡Œå†ä½¿ç”¨ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š12345function changeColor()&#123; document.getElementById(\"btnChange\").onclick=function()&#123; document.getElementById(\"targetCanvas\").style.backgroundColor=\"red\"; &#125;;&#125; è¿™ä¸ªå‡½æ•°å¼•ç”¨äº†ä¸¤æ¬¡å…¨å±€å˜é‡documentï¼ŒæŸ¥æ‰¾è¯¥å˜é‡å¿…é¡»éå†æ•´ä¸ªä½œç”¨åŸŸé“¾ï¼Œç›´åˆ°æœ€ååœ¨å…¨å±€å¯¹è±¡ä¸­æ‰èƒ½æ‰¾åˆ°ã€‚è¿™æ®µä»£ç å¯ä»¥é‡å†™å¦‚ä¸‹ï¼š123456function changeColor()&#123; var doc=document; doc.getElementById(\"btnChange\").onclick=function()&#123; doc.getElementById(\"targetCanvas\").style.backgroundColor=\"red\"; &#125;;&#125; è¿™æ®µä»£ç æ¯”è¾ƒç®€å•ï¼Œé‡å†™åä¸ä¼šæ˜¾ç¤ºå‡ºå·¨å¤§çš„æ€§èƒ½æå‡ï¼Œä½†æ˜¯å¦‚æœç¨‹åºä¸­æœ‰å¤§é‡çš„å…¨å±€å˜é‡è¢«ä»åå¤è®¿é—®ï¼Œé‚£ä¹ˆé‡å†™åçš„ä»£ç æ€§èƒ½ä¼šæœ‰æ˜¾è‘—æ”¹å–„ã€‚åœ¨å‡½æ•°ä¸­ä½¿ç”¨varæ“ä½œç¬¦å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆå½“è¿™ä¸ªå‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œè¿™ä¸ªå˜é‡ä¹Ÿä¼šè¢«é”€æ¯ï¼ˆä¹Ÿæœ‰çš„æƒ…å†µä¸‹ä¸ä¼šï¼Œæ¯”å¦‚é—­åŒ…ï¼Œåé¢ä¼šè¯´æ˜ï¼‰ï¼Œè€Œå…¨å±€å˜é‡ä¼šä¸€ç›´å­˜åœ¨ã€‚æ‰€ä»¥åœ¨æˆ‘ä»¬å†™ä»£ç æ—¶ï¼Œå°½é‡å°‘çš„ä½¿ç”¨å…¨å±€å˜é‡ï¼Œæ»¥ç”¨å…¨å±€å˜é‡ã€‚æ›´åŠ ç›´æ¥çš„ä¸å¥½å¦‚ä¸‹ï¼š 1.å˜é‡è¿‡å¤šï¼Œå‘½åéº»çƒ¦ 2.å±€éƒ¨å˜é‡ï¼Œå¿˜è®°ä½¿ç”¨varå®šä¹‰ï¼Œä¿®æ”¹äº†å…¨å±€å˜é‡ 3.å…¨å±€å˜é‡ä¼šåœ¨é¡µé¢å¸è½½å‰ä¸€ç›´å­˜åœ¨ï¼ŒæŸè€—ä¸å¿…è¦çš„å†…å­˜ã€‚ æ´»åŠ¨å¯¹è±¡åœ¨JavaScriptä¸­ï¼Œå½“ä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼šæ´»åŠ¨å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ä¸­åŒ…å«äº†å‚æ•°åˆ—è¡¨å’Œargumentså¯¹è±¡ç­‰å±æ€§ã€‚ç”±äºæ´»åŠ¨å¯¹è±¡æ˜¯å˜é‡å¯¹è±¡çš„ç‰¹ä¾‹ï¼Œå› æ­¤å®ƒåŒ…å«å˜é‡å¯¹è±¡æ‰€æœ‰çš„å±æ€§å¦‚å˜é‡å®šä¹‰ï¼Œå‡½æ•°å®šä¹‰ç­‰ã€‚ 123456789function add(handle, message)&#123; var id = 0; function doNothing(x)&#123; return x; &#125; handle(message);&#125; add(print, \"hello\"); åœ¨å‡½æ•°addåˆ›å»ºæ—¶ï¼Œå®ƒçš„ä½œç”¨åŸŸé“¾ä¸­ä¼šå¡«å…¥ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œè¯¥å…¨å±€å¯¹è±¡åŒ…å«äº†æ‰€æœ‰å…¨å±€å˜é‡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º(æ³¨æ„ï¼šå›¾ç‰‡åªä¾‹ä¸¾äº†å…¨éƒ¨å˜é‡ä¸­çš„ä¸€éƒ¨åˆ†ï¼‰ï¼š æ‰§è¡Œæ­¤å‡½æ•°æ—¶ä¼šåˆ›å»ºä¸€ä¸ªç§°ä¸ºâ€œè¿è¡ŒæœŸä¸Šä¸‹æ–‡(execution context)â€çš„å†…éƒ¨å¯¹è±¡ï¼Œè¿è¡ŒæœŸä¸Šä¸‹æ–‡å®šä¹‰äº†å‡½æ•°æ‰§è¡Œæ—¶çš„ç¯å¢ƒã€‚æ¯ä¸ªè¿è¡ŒæœŸä¸Šä¸‹æ–‡éƒ½æœ‰è‡ªå·±çš„ä½œç”¨åŸŸé“¾ï¼Œç”¨äºæ ‡è¯†ç¬¦è§£æï¼Œå½“è¿è¡ŒæœŸä¸Šä¸‹æ–‡è¢«åˆ›å»ºæ—¶ï¼Œè€Œå®ƒçš„ä½œç”¨åŸŸé“¾åˆå§‹åŒ–ä¸ºå½“å‰è¿è¡Œå‡½æ•°çš„[[Scope]]æ‰€åŒ…å«çš„å¯¹è±¡ã€‚è¿™äº›å€¼æŒ‰ç…§å®ƒä»¬å‡ºç°åœ¨å‡½æ•°ä¸­çš„é¡ºåºè¢«å¤åˆ¶åˆ°è¿è¡ŒæœŸä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸé“¾ä¸­ã€‚å®ƒä»¬å…±åŒç»„æˆäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå«â€œæ´»åŠ¨å¯¹è±¡(activation object)â€ï¼Œè¯¥å¯¹è±¡åŒ…å«äº†å‡½æ•°çš„æ‰€æœ‰å±€éƒ¨å˜é‡ã€å‘½åå‚æ•°ã€å‚æ•°é›†åˆä»¥åŠthisï¼Œç„¶åæ­¤å¯¹è±¡ä¼šè¢«æ¨å…¥ä½œç”¨åŸŸé“¾çš„å‰ç«¯ï¼Œå½“è¿è¡ŒæœŸä¸Šä¸‹æ–‡è¢«é”€æ¯ï¼Œæ´»åŠ¨å¯¹è±¡ä¹Ÿéšä¹‹é”€æ¯ã€‚ åœ¨å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ¯é‡åˆ°ä¸€ä¸ªå˜é‡ï¼Œéƒ½ä¼šç»å†ä¸€æ¬¡æ ‡è¯†ç¬¦è§£æè¿‡ç¨‹ä»¥å†³å®šä»å“ªé‡Œè·å–å’Œå­˜å‚¨æ•°æ®ã€‚è¯¥è¿‡ç¨‹ä»ä½œç”¨åŸŸé“¾å¤´éƒ¨ï¼Œä¹Ÿå°±æ˜¯ä»æ´»åŠ¨å¯¹è±¡å¼€å§‹æœç´¢ï¼ŒæŸ¥æ‰¾åŒåçš„æ ‡è¯†ç¬¦ï¼Œå¦‚æœæ‰¾åˆ°äº†å°±ä½¿ç”¨è¿™ä¸ªæ ‡è¯†ç¬¦å¯¹åº”çš„å˜é‡ï¼Œå¦‚æœæ²¡æ‰¾åˆ°ç»§ç»­æœç´¢ä½œç”¨åŸŸé“¾ä¸­çš„ä¸‹ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæœç´¢å®Œæ‰€æœ‰å¯¹è±¡éƒ½æœªæ‰¾åˆ°ï¼Œåˆ™è®¤ä¸ºè¯¥æ ‡è¯†ç¬¦æœªå®šä¹‰ã€‚å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªæ ‡è¯†ç¬¦éƒ½è¦ç»å†è¿™æ ·çš„æœç´¢è¿‡ç¨‹ã€‚ å½“ä»£ç æ‰§è¡Œåˆ°add(print, â€œhelloâ€)æ—¶ï¼Œæ´»åŠ¨å¯¹è±¡è¢«åˆ›å»ºï¼Œè¿™ä¸ªæ´»åŠ¨å¯¹è±¡çš„å›¾å½¢ç¤ºæ„å¦‚ä¸‹ï¼š","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"javascriptåŸå‹å¯¹è±¡ä¸åŸå‹é“¾","slug":"javascriptåŸå‹ä¸åŸå‹é“¾","date":"2016-02-04T03:32:08.000Z","updated":"2016-12-12T03:00:36.000Z","comments":true,"path":"2016/02/04/javascriptåŸå‹ä¸åŸå‹é“¾/","link":"","permalink":"http://sevencai.github.io/2016/02/04/javascriptåŸå‹ä¸åŸå‹é“¾/","excerpt":"","text":"åŸå‹å¯¹è±¡æ¯ä¸ªjavascriptå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åœ¨ä¸åŒçš„è§£é‡Šå™¨ä¸‹çš„å®ç°ä¸åŒã€‚æ¯”å¦‚åœ¨firefoxä¸‹,æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªéšè—çš„protoå±æ€§,è¿™ä¸ªå±æ€§å°±æ˜¯åŸå‹å¯¹è±¡çš„å¼•ç”¨ã€‚åŸå‹çš„å€¼å¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è€…nullã€‚ åŸå‹é“¾ç”±äºåŸå‹å¯¹è±¡æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡ï¼Œæ ¹æ®ä¸Šè¾¹çš„å®šä¹‰ï¼Œå®ƒä¹Ÿæœ‰è‡ªå·±çš„åŸå‹ï¼Œè€Œå®ƒè‡ªå·±çš„åŸå‹å¯¹è±¡åˆå¯ä»¥æœ‰è‡ªå·±çš„åŸå‹ï¼Œè¿™æ ·å°±ç»„æˆäº†ä¸€æ¡é“¾ï¼Œè¿™ä¸ªé“¾å°±æ˜¯åŸå‹é“¾ã€‚JavaScritpå¼•æ“åœ¨è®¿é—®å¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœåœ¨å¯¹è±¡æœ¬èº«ä¸­æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ä¼šå»åŸå‹é“¾ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œç›´æ¥è¿”å›å€¼ï¼Œå¦‚æœæ•´ä¸ªé“¾éƒ½éå†ä¸”æ²¡æœ‰æ‰¾åˆ°å±æ€§ï¼Œåˆ™è¿”å›undefinedï¼ŒåŸå‹é“¾ä¸€èˆ¬å®ç°ä¸ºä¸€ä¸ªé“¾è¡¨ï¼Œè¿™æ ·å°±å¯ä»¥æŒ‰ç…§ä¸€å®šçš„é¡ºåºæ¥æŸ¥æ‰¾ã€‚ ä¾‹å­1123456789101112131415var base = &#123; name:\"base\", getInfo:function()&#123; return this.name; &#125;&#125;var ext1 = &#123; id:0, __proto__:base&#125;var ext2 = &#123; id:9, __proto__:base&#125;console.log(ext1.id+\" \"+ext2.id+\" \"+ext1.getInfo()+\" \"+ext2.getInfo()); æœ€åç»“æœä¼šæ˜¯ï¼š0 9 base base,åœ¨è®¿é—®æ¯ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œéƒ½æ˜¯å…ˆåœ¨å¯¹è±¡æœ¬èº«æ‰¾ï¼Œå¦‚æœæ²¡æ‰¾åˆ°ï¼Œåˆ™å»åŸå‹é“¾ä¸­æŸ¥æ‰¾ï¼Œä¸‹é¢çš„å›¾ç‰‡å¯ä»¥æ˜¾ç¤ºè¿™ä¸€ç‚¹ã€‚ ä¾‹å­212345678910111213141516var base = &#123; name:\"base\", getInfo:function()&#123; return this.name+\"*\"+this.id; &#125;&#125;var ext1 = &#123; id:0, name:\"ext1\", __proto__:base&#125;var ext2 = &#123; id:9, __proto__:base&#125;console.log(ext1.name+\" \"+ext2.name+\" \"+ext1.getInfo()+\" \"+ext2.getInfo()); ç»“æœæ˜¯ï¼šext1 base ext10 base9ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆext1.getInfo()ä¸ä¼šæœ‰baseå‡ºç°ï¼Œå°±æ˜¯å› ä¸ºnameå±æ€§åœ¨ext2å¯¹è±¡ä¸­ä¸å­˜åœ¨ï¼Œå› æ­¤,ä»å¯¹è±¡æœ¬èº«å‡ºå‘ï¼Œæ²¿ç€protoæŸ¥æ‰¾ï¼Œç›´åˆ°åœ¨baseä¸­æ‰¾åˆ°å±æ€§åç§°ç›¸åŒçš„å€¼ï¼ˆnameï¼‰ã€‚è€Œext1å¯¹è±¡ä¸­æœ¬èº«å°±æœ‰nameäº†ï¼Œæ‰€ä»¥ä¸ä¼šæ²¿ç€åŸå‹é“¾ç»§ç»­æŸ¥æ‰¾äº†ã€‚åº”è¯¥æ³¨æ„çš„æ˜¯ï¼ŒgetInfoå‡½æ•°ä¸­çš„thisè¡¨ç¤ºåŸå§‹çš„å¯¹è±¡ï¼Œè€Œå¹¶éåŸå‹å¯¹è±¡ï¼ˆthisä¸Šä¸‹æ–‡ï¼‰ã€‚å¦‚æœå¯¹è±¡æ²¡æœ‰æ˜¾å¼çš„å£°æ˜è‡ªå·±çš„â€protoâ€å±æ€§ï¼Œè¿™ä¸ªå€¼é»˜è®¤çš„è®¾ç½®ä¸ºObject.prototype,è€ŒObject.prototypeçš„â€protoâ€å±æ€§çš„å€¼ä¸ºâ€nullâ€ï¼Œæ ‡å¿—ç€åŸå‹é“¾çš„ç»ˆç»“ï¼Œå³è¯¥å¯¹è±¡æ²¡æœ‰åŸå‹ã€‚ æ„é€ å™¨é™¤äº†ä¸Šè¾¹æåˆ°çš„ç›´æ¥æ“ä½œå¯¹è±¡çš„protoå±æ€§çš„æŒ‡å‘ä»¥å¤–ï¼ŒJavaScriptè¿˜æ”¯æŒæ„é€ å™¨å½¢å¼çš„å¯¹è±¡åˆ›å»ºã€‚æ„é€ å™¨ä¼šè‡ªåŠ¨çš„ä¸ºæ–°åˆ›å»ºçš„å¯¹è±¡è®¾ç½®åŸå‹å¯¹è±¡ï¼Œæ­¤æ—¶çš„åŸå‹å¯¹è±¡é€šè¿‡æ„é€ å™¨çš„prototypeå±æ€§æ¥å¼•ç”¨ã€‚ ä¾‹å­3123456789101112131415function Task(id)&#123; this.id = id;&#125;Task.prototype.status = \"STOPPED\";Task.prototype.execute = function(args)&#123; return \"execute task_\"+this.id+\"[\"+this.status+\"]:\"+args; &#125;;var task1 = new Task(1);var task2 = new Task(2);task1.status = \"ACTIVE\";task2.status = \"STARTING\";console.log(task1.execute('task1')+\" * \"+task2.execute('task2')); è¿™é‡Œä¸åƒä¸Šé¢çš„ä¾‹å­åœ¨å¯¹è±¡ä¸Šç›´æ¥æ“ä½œprotoå±æ€§çš„æŒ‡å‘ï¼Œè€Œæ˜¯é€šè¿‡æ„é€ å™¨ï¼ˆå±æ€§prototypeï¼‰çš„å½¢å¼æ¥æ“ä½œã€‚è¿™å°±æ˜¯æ„é€ å™¨æ–¹æ³•ä¹Ÿæ˜¯æœ€ç»å¸¸ç”¨çš„ä¸€ç§æ–¹æ³•ã€‚æœ€åçš„ç»“æœæ˜¯ï¼šexecute task_1[ACTIVE]:task1 * execute task_2[STARTING]:task2æ„é€ å™¨ä¼šè‡ªåŠ¨ä¸ºtask1,task2ä¸¤ä¸ªå¯¹è±¡è®¾ç½®åŸå‹å¯¹è±¡Task.prototypeï¼Œè¿™ä¸ªå¯¹è±¡è¢«Task(åœ¨æ­¤æœ€ä¸ºæ„é€ å™¨)çš„prototypeå±æ€§å¼•ç”¨ï¼Œå‚çœ‹ä¸‹å›¾ä¸­çš„ç®­å¤´æŒ‡å‘ã€‚ç”±äºTaskæœ¬èº«ä»æ—§æ˜¯å‡½æ•°ï¼Œå› æ­¤å…¶â€protoâ€å±æ€§ä¸ºFunction.prototype, è€Œå†…å»ºçš„å‡½æ•°åŸå‹å¯¹è±¡çš„â€protoâ€å±æ€§åˆ™ä¸ºObject.prototypeå¯¹è±¡ã€‚æœ€åObejct.prototypeçš„â€protoâ€å€¼ä¸ºnull. æ„Ÿè°¢è¿™ä¹ˆæ£’çš„æ–‡ç« ï¼šæ ¸å¿ƒæ¦‚å¿µæ·±å…¥","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://sevencai.github.io/tags/Javascript/"}]},{"title":"å¦‚ä½•ç”¨CSSåšæ¼‚äº®çš„æ¯›ç»ç’ƒæ•ˆæœ","slug":"å¦‚ä½•ç”¨CSSåšæ¼‚äº®çš„æ¯›ç»ç’ƒæ•ˆæœ","date":"2016-01-01T12:37:39.000Z","updated":"2016-12-12T03:01:48.000Z","comments":true,"path":"2016/01/01/å¦‚ä½•ç”¨CSSåšæ¼‚äº®çš„æ¯›ç»ç’ƒæ•ˆæœ/","link":"","permalink":"http://sevencai.github.io/2016/01/01/å¦‚ä½•ç”¨CSSåšæ¼‚äº®çš„æ¯›ç»ç’ƒæ•ˆæœ/","excerpt":"","text":"å‰ä¸¤å¤©åœ¨ç½‘ä¸Šçœ‹åˆ°æœ‰ä¸ªç”¨cssåšçš„æ¯›ç»ç’ƒæ•ˆæœï¼Œå¥½å–œæ¬¢ï¼Œå°±ä»¿ç€åšäº†ä¸ªdemoã€‚demoæˆ‘æ”¾åœ¨äº†æ–°æµªäº‘ä¸Šï¼šæ¼”ç¤ºåœ°å€æ˜¯ä¸æ˜¯å¾ˆå¥½çœ‹å‘¢ï¼Œæˆ‘å¾ˆå–œæ¬¢ã€‚å›¾æ˜¯æˆ‘åœ¨ç½‘ä¸Šè‡ªå·±çæ‰¾åˆ°ï¼ŒèŠ±ç“£åªæ˜¯ä¸ªåŠ¨æ€å›¾ï¼Œæ‰€ä»¥æ‰ä¼šåŠ¨ã€‚ ä¸»è¦æ˜¯ç»™èƒŒæ™¯ç”¨filter:blurå±æ€§ï¼ˆè¦åŠ ä¸Šæµè§ˆå™¨å†…æ ¸ä»¥å…¼å®¹å„ç§æµè§ˆå™¨ï¼‰ï¼ŒèƒŒæ™¯è™šåŒ–åï¼Œå†å¯¹ä¸ç”¨è™šåŒ–çš„å†…å®¹æ¯”å¦‚å›¾ç‰‡å’Œæ–‡å­—ï¼Œè®©ä»–ä»¬å®šä½åˆ°ç›¸åº”çš„ä½ç½®ã€‚ 12345&lt;div class=\"container\"&gt; &lt;div class=\"pic\"&gt;&lt;/div&gt; &lt;img src=\"./images/a.jpg\" alt=\"\" class=\"weather\"&gt; &lt;span class=\"text\"&gt;åŒ—äº¬ æ™´ 3-5C&lt;/span&gt;&lt;/div&gt; è¿™ä¸ªdemoçš„å¤§è‡´å¸ƒå±€å¦‚ä¸Šï¼Œå¾ˆç®€å•ã€‚æˆ‘è®©containerå½“åšå›¾ç‰‡å®¹å™¨ï¼Œå¯¹picè¿›è¡Œè™šåŒ–ï¼Œå¹¶è®©containerçš„å¤§å°å’Œpicå®Œå…¨ç›¸åŒå¹¶é‡å ï¼ˆinheritï¼‰,è¿™æ ·å¤§è‡´çš„æ¯›ç»ç’ƒå°±å‡ºæ¥äº†ï¼Œç„¶åä¸ºäº†çªå‡ºæ¯›ç»ç’ƒçš„æ•ˆæœï¼Œéœ€è¦æŠŠå‰æ·»åŠ ä¸€ç‚¹å…ƒç´ ï¼Œä½¿æœ‰å±‚æ¬¡æ„Ÿï¼Œå°±æ˜¯è¿™é‡Œçš„å°èŠ±ç“£å’Œæ–‡å­—åŒ—äº¬æ™´å•¦ï¼Œéœ€è¦çš„æ˜¯å¯¹ä»–ä»¬è¿›è¡Œç›¸å¯¹äºcontainerçš„ç»å¯¹å®šä½ï¼Œå®šä½åˆ°ä¸­é—´çš„ä½ç½®ï¼š123456789101112131415161718192021222324.container &#123; width: 650px; height: 400px; background: transparent url(\"./images/background.jpg\") no-repeat fixed 0% 0%; position: relative;&#125;.pic&#123; width:650px; height: 400px; background: inherit; -webkit-filter:blur(5px); -moz-filter:blur(5px); -o-filter:blur(5px); filter:blur(5px); filter: progid:DXImageTransform.Microsoft.Blur(PixelRadius=4, MakeShadow=false);&#125;.weather &#123; width: 80px; height: 80px; display: block; position: absolute; top: 30%; left: 40%;&#125; æœ‰çš„æ—¶å€™ä¼šçœ‹åˆ°è¿™ä¸ªfilter:progid:DXImageTransform.Microsoft.Blur(pixelRadius=6, MakeShadow=false); / IE6~IE9 /ã€‚è¿™æ˜¯ä»£è¡¨è¦æ”¯æŒIE6~IE9ã€‚ å†è¿˜æœ‰ä¸¤ä¸ªä¾‹å­ï¼š [ä¾‹å­1 ]æºäºæˆ‘ä»¿çš„å¤–å›½çš„ä¸€ä¸ªäººåšçš„&amp;&amp; [ä¾‹å­2] æºäºhtml5ä¸­å›½è¿˜æœ‰ä¸€ä¸ªæ¨èå°±æ˜¯å¼ é‘«æ—­çš„åšå®¢é‡Œé¢å¯¹è¿™ä¸ªè®²çš„å¾ˆå¥½ï¼Œè€Œä¸”æœ‰å®ä¾‹ï¼Œæœ‰è¯¦ç»†çš„è®²è§£ï¼Œè¿˜æœ‰å…³äºsvgçš„éƒ¨åˆ†ï¼Œè¶…çº§æ£’ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Css","slug":"Css","permalink":"http://sevencai.github.io/tags/Css/"}]},{"title":"cssåšç›’å­çš„æ›²è¾¹é˜´å½±å’Œç¿˜è¾¹é˜´å½±","slug":"cssåšç›’å­çš„æ›²è¾¹é˜´å½±å’Œç¿˜è¾¹é˜´å½±","date":"2015-12-19T13:14:11.000Z","updated":"2016-12-12T02:59:26.000Z","comments":true,"path":"2015/12/19/cssåšç›’å­çš„æ›²è¾¹é˜´å½±å’Œç¿˜è¾¹é˜´å½±/","link":"","permalink":"http://sevencai.github.io/2015/12/19/cssåšç›’å­çš„æ›²è¾¹é˜´å½±å’Œç¿˜è¾¹é˜´å½±/","excerpt":"","text":"ç›’å­çš„æ›²è¾¹é˜´å½±ï¼Œç¿˜è¾¹é˜´å½±çš„åŒºåˆ«æ˜¯ï¼šæ›²è¾¹é˜´å½±çœ‹èµ·æ¥ç›’å­ä¸‹è¾¹åƒæ˜¯æœ‰ä¸ªæ›²è¾¹ã€‚è€Œç¿˜è¾¹é˜´å½±æ˜¯å¾€ä¸¤è¾¹ç¿˜ã€‚ä¸¤è€…çš„æœ¬è´¨å°±æ˜¯ç´¯åŠ ï¼Œå°±æ˜¯çœ‹ç€åƒæ˜¯ä¸€ä¸ªç›’å­çš„é˜´å½±ï¼Œå…¶å®æ˜¯å¤šä¸ªç›’å­ç´¯åŠ èµ·æ¥çš„é˜´å½±ï¼Œåªæ˜¯å…¶ä»–çš„çœ‹ä¸è§ï¼Œåªæœ‰shadowã€‚ è¿™ä¸ªæ˜¯å¥½ä¹…ä»¥å‰è·Ÿç€æ…•è¯¾ç½‘çš„è€å¸ˆå­¦çš„ï¼Œæ­£å¥½ç°åœ¨æ•´ç†ä¸‹ã€‚ä¸‹å›¾æ˜¯ç›´æ¥çš„æ„Ÿå—ï¼Œè¦ä»”ç»†çœ‹æ‰èƒ½çœ‹åˆ°ä¸ä¸€æ ·çš„åœ°æ–¹ï¼Œæ¼”ç¤ºåœ°å€ä¸Šé¢ä¸€ä¸ªå¤§å›¾ï¼Œä¸‹è¾¹æ˜¯æœ‰é˜´å½±çš„ï¼Œè€Œä¸”é˜´å½±å¹¶ä¸æ˜¯æ•´ä¸ªçš„ä¸€æ ·ï¼Œè€Œæ˜¯ä¸¤è¾¹é˜´å½±ç¨å¾®å°‘ç‚¹ï¼Œçº¦å¾€é‡Œé˜´å½±è¶Šæ˜æ˜¾ï¼Œåˆ°åº•æ˜¯å’‹åšçš„å‘¢ï¼Œä¸€å¼ å›¾å°±å¯ä»¥è§£å†³ã€‚ æ›²è¾¹é˜´å½±è¿™é‡Œå°±æ˜¯åˆšæ‰è¯´çš„ç›’å­åŠ ç›’å­ï¼Œå¤–é¢çš„å¤§ç›’å­æˆ‘ä»¬çœ‹å¾—åˆ°ï¼Œè€Œé‡Œé¢çš„å°çŸ©å½¢ï¼Œå°±æ˜¯éšè—çš„ç›’å­ï¼Œå¤§ç›’å­æœ‰å¤§ç›’å­çš„é˜´å½±ï¼Œå°ç›’å­æœ‰å°ç›’å­çš„é˜´å½±ï¼Œè¿™æ ·ä¸€å åŠ ï¼Œæ˜¯ä¸æ˜¯å°±æ˜¯ä¸­é—´é˜´å½±æ›´å¤§äº†å‘¢ã€‚ domç»“æ„123&lt;div class=\"wrap effect\"&gt; &lt;h1&gt;Shadow Effect&lt;/h1&gt;&lt;/div&gt; cssç¼–å†™1234567891011121314151617181920212223.effect&#123; position: relative; box-shadow: 0px 1px 4px rgba(0,0,0,0.3),0 0 40px rgba(0,0,0,0.1) inset; -webkit-box-shadow:0px 1px 4px rgba(0,0,0,0.3),0 0 40px rgba(0,0,0,0.1) inset; -o-box-shadow:0px 1px 4px rgba(0,0,0,0.3),0 0 40px rgba(0,0,0,0.1) inset; -moz-box-shadow:0px 1px 4px rgba(0,0,0,0.3),0 0 40px rgba(0,0,0,0.1) inset;&#125;.effect:after,.effect:before&#123; content: \"\"; position: absolute; top:50%; bottom: 0px; left:20px; right:20px; background-color: red; border-radius: 100px/10px; box-shadow: 0 0 20px rgba(0,0,0,0.3); -webkit-box-shadow: 0 0 20px rgba(0,0,0,0.3); -moz-box-shadow: 0 0 20px rgba(0,0,0,0.3); -o-box-shadow: 0 0 20px rgba(0,0,0,0.3); z-index: -1;&#125; ä¸Šé¢è¿˜ç”¨åˆ°äº†box-shadowçš„inset,è¿˜æœ‰afterå’Œbeforeï¼Œä»¥åŠè¦æµè§ˆå™¨çš„å„ä¸ªå†…æ ¸ã€‚ ç¿˜è¾¹é˜´å½±åŸç†è§£æå›¾å¦‚ä¸‹ï¼ŒåŸç†è·Ÿä¸Šé¢å‡ ä¹ä¸€æ ·ï¼Œä¹Ÿæ˜¯ç›’å­åŠ ç›’å­ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œè¿™æ¬¡ä¸¤ä¸ªç›’å­ä¸ä¸€æ ·ï¼Œæœå‘ä¸åŒçš„æ–¹å‘ï¼Œä¸ºä¸åŒçš„è¾¹åŠ äº†é˜´å½±ã€‚ domç»“æ„12345&lt;ul class=\"box\"&gt; &lt;li&gt;&lt;img src=\"images/photo1.jpg\" alt=\"\" /&gt;&lt;/li&gt; &lt;li&gt;&lt;img src=\"images/photo2.jpg\" alt=\"\" /&gt;&lt;/li&gt; &lt;li&gt;&lt;img src=\"images/photo3.jpg\" alt=\"\" /&gt;&lt;/li&gt;&lt;/ul&gt; cssç¼–å†™123456789101112131415161718192021222324252627282930313233343536.box li:before&#123; content:\"\"; position:absolute; width:90%; height: 80%; bottom: 13px; left:21px; background: transparent; z-index: -2; box-shadow: 0 8px 20px rgba(0,0,0,0.8); -webkit-box-shadow: 0 8px 20px rgba(0,0,0,0.8); -o-box-shadow: 0 8px 20px rgba(0,0,0,0.8); -moz-box-shadow: 0 8px 20px rgba(0,0,0,0.8); transform:skew(-12deg) rotate(-6deg); -webkit-transform:skew(-12deg) rotate(-6deg); -moz-transform:skew(-12deg) rotate(-6deg); -os-transform:skew(-12deg) rotate(-6deg); -o-transform:skew(-12deg) rotate(-6deg);&#125;.box li:after&#123; content:\"\"; position:absolute; width:90%; height: 80%; bottom: 13px; right:21px; z-index: -2; background: transparent; box-shadow: 0 8px 20px rgba(0,0,0,0.8); transform:skew(12deg) rotate(6deg); -webkit-transform:skew(12deg) rotate(6deg); -moz-transform:skew(12deg) rotate(6deg); -os-transform:skew(12deg) rotate(6deg); -o-transform:skew(12deg) rotate(6deg);&#125; è¿™é‡Œè¿˜ç”¨åˆ°äº†css3çš„å˜å½¢ï¼Œtransformæ—¶å…ƒç´ æ‹‰ä¼¸å¹¶ä¸”æ—‹è½¬ã€‚ç”±äºæ—‹è½¬å’Œæ‹‰ä¼¸ï¼Œé‚£ä¸ªéšå½¢çš„è±å½¢æœ‰ä¸€è¾¹æ¯”è¾ƒé è¿‘è¾¹ç¼˜ï¼Œç»™ä»–åŠ ä¸Šé˜´å½±ï¼Œé˜´å½±èŒƒå›´æ¯”è¾ƒå¤§æ—¶ï¼Œå°±ä¼šæœ‰ä¸€éƒ¨åˆ†æº¢å‡ºæ¥äº†ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„é˜´å½±æ¯”è¾ƒæ˜æ˜¾ï¼Œ2è¾¹4ä¸ªè„šéƒ½è¿™æ ·ï¼Œä¹Ÿå°±å½¢æˆäº†ç¿˜èµ·æ¥çš„è¾¹å•¦ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Css","slug":"Css","permalink":"http://sevencai.github.io/tags/Css/"}]},{"title":"angularæ•´ç†ç¬”è®°ä¸€","slug":"angularæ•´ç†ç¬”è®°ä¸€","date":"2015-10-15T12:31:23.000Z","updated":"2017-12-19T12:40:23.000Z","comments":true,"path":"2015/10/15/angularæ•´ç†ç¬”è®°ä¸€/","link":"","permalink":"http://sevencai.github.io/2015/10/15/angularæ•´ç†ç¬”è®°ä¸€/","excerpt":"","text":"ä»¥ä¸‹æ˜¯å½’æ¡£å†…å®¹ï¼Œæ¥è‡ª2015å¹´angularå­¦ä¹ ç¬”è®°ã€‚å­¦ä¹ è‡ªæ…•è¯¾ç½‘å¤§æ¼ ç©·ç§‹ã€‚è™½ç„¶å·²ç»è¿‡å»äº†å¥½ä¹…ï¼Œä½†ä»ç„¶è®°å¾—è€å¸ˆå½“æ—¶çš„æ€è·¯å¤šæ¸…æ™°ã€‚æ£’æ£’å“’ã€‚angularçš„4å¤§æ ¸å¿ƒç‰¹æ€§MVC,æ¨¡å—åŒ–ï¼ŒæŒ‡ä»¤ç³»ç»Ÿï¼ŒåŒå‘æ•°æ®ç»‘å®šæ˜¯angularçš„å››ä¸ªæœ€ä¸»è¦çš„æ ¸å¿ƒç‰¹æ€§ã€‚ MVCä»€ä¹ˆæ˜¯MVC,Mæ•°æ®æ¨¡å‹ï¼ŒVè§†å›¾å±‚ï¼Œè´Ÿè´£å±•ç¤ºï¼ŒCä¸šåŠ¡é€»è¾‘å’Œæ§åˆ¶é€»è¾‘ã€‚èŒè´£æ¸…æ™°ï¼Œä»£ç æ¨¡å—åŒ–ã€‚ ä¸ºä»€ä¹ˆè¦ç”¨MVC?ä¸€å®šè¦ç†è§£è¿™å¥è¯ï¼šMVCè¿™æ˜¯æ‰‹æ®µï¼Œç»ˆæç›®æ ‡æ˜¯æ¨¡å—åŒ–å’Œå¤ç”¨ã€‚ä¸æ˜¯å› ä¸ºè¦å»å®ç°MVCæ‰å»åšä¸œè¥¿ï¼Œæ˜¯å› ä¸ºè¦è¦å»æ¨¡å—åŒ–å’Œå¤ç”¨æ‰å»ç”¨MVCçš„ã€‚ ä»£ç è§„æ¨¡è¶Šæ¥è¶Šå¤§ï¼Œåˆ‡åˆ†èŒè´£æ˜¯å¤§åŠ¿æ‰€è¶‹ ä¸ºäº†å¤ç”¨ï¼šå¾ˆå¤šé€»è¾‘æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ ä¸ºäº†åæœŸç»´æŠ¤æ–¹ä¾¿ï¼Œä¿®æ”¹ä¸€å—åŠŸèƒ½ä¸å½±å“å…¶ä»–çš„åŠŸèƒ½ã€‚ å‰ç«¯MVCçš„å›°éš¾?æµè§ˆå™¨åŠ è½½jsæ–‡ä»¶æ˜¯è¦åˆ†æˆä¸¤æ®µçš„ï¼Œä¸€æ®µæ˜¯ä¸‹è½½ï¼Œä¸€æ®µæ˜¯æ‰§è¡Œï¼Œç”±äºä¸‹é¢çš„ä¸€äº›é—®é¢˜ï¼Œå¯¼è‡´äº†å‰ç«¯MVCçš„å®ç°ä¸æƒ³åå°é‚£ä¹ˆæ–¹ä¾¿ã€‚æµè§ˆå™¨åŠ è½½è„šæœ¬â€“&gt;åŠ è½½å®ŒæˆåJITç¼–è¯‘æ‰§è¡Œã€‚ æ“ä½œDOMçš„ä»£ç å¿…é¡»ç­‰æ•´ä¸ªé¡µé¢åŠ è½½å®Œæˆ å¤šä¸ªJSæ–‡ä»¶ä¹‹é—´å¦‚æœå‡ºç°äº’ç›¸ä¾èµ–ï¼Œç¨‹åºçŒ¿å¿…é¡»è‡ªå·±è§£å†³ jsçš„åŸå‹ç»§æ‰¿ä¹Ÿç»™å‰ç«¯ç¼–ç¨‹å¸¦æ¥äº†å¾ˆå¤šå›°éš¾ã€‚ å…³äºCï¼ˆcontrollerï¼‰é€šè¿‡ng-controlleræŒ‡ä»¤æ¥å®ç°æ§åˆ¶å™¨ã€‚ä¸‹é¢ä¼šå°†ä¸‹é¢è¿™ç§æ–¹æ³•æ¥å£°æ˜æ§åˆ¶å™¨æ˜¯ä¸å¥½çš„ï¼Œå› ä¸ºæ²¡æœ‰å®ç°æ¨¡å—åŒ–ã€‚12345function hello($scope)&#123; $scope.textInput = &#123; text:\"cailidan\" &#125;;&#125; MVCâ€“controllerçš„å®ç°æ–¹å¼1è¿™æ ·ç¬¬ä¸€ç§çš„å®ç°æ–¹å¼å¹¶ä¸å¥½ï¼Œå› ä¸ºå¦‚æœè§†å›¾1å’Œè§†å›¾2å¹¶æ²¡æœ‰ä»»ä½•é€»è¾‘å…³ç³»ï¼Œæ§åˆ¶å™¨çš„è§’è‰²å°±ä¼šå¾ˆå°´å°¬ã€‚ä¹Ÿä¸ç¬¦åˆæˆ‘ä»¬ä»£ç çš„åˆ†ç¦»ã€‚æ— æ³•åº”å¯¹å¤§é¡¹ç›®ã€‚ MVCâ€“controllerçš„å®ç°æ–¹å¼2è¿™æ ·æ˜¯ä¸€ç§æ”¹è¿›å‹çš„æ–¹æ³•ï¼Œæˆ‘ä»¬æŠŠè§†å›¾1å’Œè§†å›¾2çš„æ§åˆ¶å™¨åˆ†å¼€ï¼Œåˆ†åˆ«æ§åˆ¶ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬è§†å›¾1å’Œè§†å›¾2æœ‰ä¸¤ä¸ªä¸€æ¨¡ä¸€æ ·çš„æ–¹æ³•æ€ä¹ˆåŠï¼Ÿå°±å‡ºç°äº†ä¸‹é¢çš„æ–¹å¼3. MVCâ€“controllerçš„å®ç°æ–¹å¼3çœ‹èµ·æ¥æ—¶ä¸€ç§å¥½æ–¹æ³•ï¼Œæˆ‘ä»¬è®©æ§åˆ¶å™¨1å’Œ2ç»§æ‰¿è¿™ä¸ªå…¬ç”¨æ§åˆ¶å™¨ã€‚ä½†è¿™ç§æ–¹æ³•æ˜¯ä¸å¯ä»¥å®è¡Œçš„ã€‚è¿™åœ¨angularä¸­æ˜¯ä¸å…è®¸ï¼Œä¸å¯è¡Œçš„ï¼Œä¸æ¨èçš„ã€‚ MVCâ€“controllerçš„å®ç°æ–¹å¼4é€šè¿‡seviceæ¥åšï¼ŒæŠŠé€šç”¨çš„ä¸œè¥¿æŠ½è±¡æˆæœåŠ¡ï¼Œè®©æ§åˆ¶å™¨è°ƒç”¨ï¼Œè€Œä¸æ˜¯æ¥ç»§æ‰¿è¿™ä¸ªé€šç”¨æ§åˆ¶å™¨ã€‚ Controllerä½¿ç”¨è¿‡ç¨‹ä¸­çš„æ³¨æ„ç‚¹ ä¸è¦è¯•å›¾å»å¤ç”¨Controller,ä¸€èˆ¬ä¸€ä¸ªæ§åˆ¶å™¨åªè´Ÿè´£ä¸€å°å—è¯•å›¾ ä¸è¦åœ¨Controllerä¸­æ“ä½œDOM,è¿™ä¸æ˜¯controllerçš„èŒè´£ ä¸è¦åœ¨Controllerä¸­åšæ•°æ®æ ¼å¼åŒ–ï¼Œngæœ‰å¾ˆå¥½ç”¨çš„è¡¨å• ä¸è¦åœ¨Controlleré‡Œé¢åšæ•°æ®è¿‡æ»¤ï¼Œngæœ‰$filteræœåŠ¡æ¥è¿‡æ»¤æ•°æ® ä¸€èˆ¬æ¥è¯´ï¼ŒControlleræ˜¯ä¸ä¼šäº’ç›¸è°ƒç”¨çš„ï¼Œæ§åˆ¶å™¨ä¹‹é—´çš„äº¤äº’ä¼šé€šè¿‡äº‹ä»¶è¿›è¡Œã€‚ å¯¹ä¸Šé¢çš„å‡ ç‚¹çš„ç¨å¾®è§£é‡Šï¼šæ§åˆ¶å™¨æ˜¯æŠŠä¸šåŠ¡é€»è¾‘æ”¾è¿›å»ï¼Œä¸šåŠ¡é€»è¾‘ä¸€èˆ¬ä¸ä¼šå¤§æ®µå¤§æ®µçš„ç›¸åŒã€‚æ“ä½œDOMæ—¶æŒ‡ä»¤çš„å·¥ä½œï¼Œè€Œä¸æ˜¯æ§åˆ¶å™¨çš„å·¥ä½œã€‚æ•°æ®è¿‡æ»¤å’Œæ•°æ®æ ¼å¼åŒ–éƒ½å¯ä»¥ç”¨angularè‡ªå·±çš„æœåŠ¡å’Œæ§ä»¶ã€‚Controllerä¸è¦ç›¸äº’è°ƒç”¨ï¼Œå¦åˆ™è€¦åˆæ€§å¤ªå¼ºã€‚ å…³äºæ•°æ®æ¨¡å‹MODELé¦–å…ˆæ‰¾ng-appï¼Œæ‰¾åˆ°åï¼Œé‡Œé¢æ‰€æœ‰çš„ä¸œè¥¿å½’angularç®¡ï¼Œç„¶åæ‰¾è¿™é‡Œé¢æ‰€æœ‰çš„æŒ‡ä»¤ç¼–è¯‘ã€‚æ¯”å¦‚æ‰¾åˆ°äº†ng-modalï¼Œè¿™æ˜¯æŒ‚åœ¨rootscopeï¼Œåœ¨ng-appä¸‹é¢çš„ä»»æ„ä¸€ä¸ªéƒ½å¯ä»¥è·å¾—ã€‚è™½ç„¶ä¸Šé¢çš„ä¾‹å­ä¸æ˜¯angularæ¨èçš„ï¼Œä¸»è¦çœ‹å†…éƒ¨çš„$scopeé‡Œé¢çš„è®¾ç½®ã€‚è¿™å°±æ˜¯ä¸»è¦å®ç°modalçš„æ–¹æ³•ã€‚ æ¨¡å—åŒ–ä¸æ¨èçš„å†™æ³•ï¼š12345function hello($scope)&#123; $scope.textInput = &#123; text:\"cailidan\" &#125;;&#125; è¿™æ ·å®šä¹‰äº†å¾ˆå¤šå¾ˆå¤šçš„å…¨å±€å‡½æ•°ï¼Œè‚¯å®šæ˜¯ä¸å¥½çš„ï¼Œè€Œé€šè¿‡å®šä¹‰ä¸€ä¸ªæ¨¡å—ï¼Œç„¶ååœ¨æ¨¡å—ä¸Šç”Ÿæˆæ§åˆ¶å™¨ï¼Œè¿™æ˜¯angularçš„å®ç°æ¨¡å—æ–¹æ³•ã€‚æ³¨æ„å†™æ³•ï¼Œ[â€œ$scopeâ€,function()]ã€‚123456789var myModule = angular.module(\"myModule\",[]);myModule.directive(\"hello\",function()&#123; return &#123; restrict:\"E\", template:\"&lt;div&gt;cailidan&lt;/div&gt;\", replace:true &#125;&#125;) angularä¸€åˆ‡éƒ½æ˜¯ä»æ¨¡å—å¼€å§‹çš„ï¼Œåªæœ‰æŠŠæ¨¡å—å®šä¹‰å¥½äº†ï¼Œæ‰èƒ½å¤Ÿåœ¨æ¨¡å—ä¸Šè°ƒç”¨service,controller,filterç­‰ç­‰ã€‚å°±æ˜¯é¦–å…ˆå°±æ˜¯å®šä¹‰æ¨¡å—ã€‚ æŒ‡ä»¤ç³»ç»Ÿä¸‹é¢è¿™ä¸ªä»£ç ä¸­ï¼Œå¦‚æœå†htmlä¸­å†™äº†helloå°±ä¼šè¢«æ›¿æ¢æˆcailidanã€‚ng-appå®é™…ä¸Šå°±æ˜¯angularçš„ä¸€ä¸ªæŒ‡ä»¤ï¼Œç›¸å½“äºmainã€‚åœ¨ä»»ä½•ä¸€ä¸ªå•é¡µä¸­ng-appåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ 123456789var myModule = angular.module(\"myModule\",[]);myModule.directive(\"hello\",function()&#123; return &#123; restrict:\"E\", template:\"&lt;div&gt;cailidan&lt;/div&gt;\", replace:true &#125;&#125;) ä¸Šé¢ä¹Ÿæ˜¯ä¸€ç§å¦‚ä½•å¤ç”¨Viewçš„æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥å®šä¹‰å¾ˆå¤šä¸ªä¸ç”¨çš„æŒ‡ä»¤ï¼Œç„¶ååœ¨éœ€è¦ä»–ä»¬åœ°æ–¹åŠ è½½ä»–ä»¬ï¼Œè¿™æ ·ä¹Ÿå°±è¾¾åˆ°äº†å¤ç”¨æ¨¡æ¿çš„ç›®çš„ã€‚ åŒå‘æ•°æ®ç»‘å®šå•é¡¹æ•°æ®ç»‘å®šç›®å‰å¤§å¤šæ•°å‰ç«¯æ¡†æ¶éƒ½æ˜¯å®ç°å•å‘æ•°æ®ç»‘å®šï¼ŒjqueryUI,BackBone,Flexã€‚å•å‘æ•°æ®ç»‘å®šçš„è¿‡ç¨‹æ˜¯ï¼šé¦–å…ˆæ˜¯æŠŠæ¨¡æ¿å†™å¥½ï¼Œç„¶ååŠ ä¸Šæ•°æ®ï¼Œæ•°æ®å¯èƒ½æ˜¯ä»åå°è¯»å‡ºæ¥çš„ã€‚æŠŠæ¨¡æ¿å’Œæ•°æ®ç»‘å®šåœ¨ä¸€èµ·ï¼Œç”Ÿæˆhtmlæ ‡ç­¾ï¼Œç„¶åæ’å…¥åˆ°æ¨¡æ¿ä¸­ï¼Œè¿™æ ·ä¸å¥½çš„åœ°æ–¹æ˜¯ï¼Œhtmlä¸€æ—¦ç”Ÿæˆå®Œåå°±æ²¡æ³•å˜äº†ï¼Œå½“æœ‰æ–°çš„æ•°æ®æ¥æ—¶ï¼Œåªèƒ½é‡æ–°ç»‘å®šç”Ÿæˆã€‚æ‰€ä»¥angularå°±å®ç°äº†åŒå‘äº‹ä»¶ç»‘å®šã€‚ åŒå‘æ•°æ®ç»‘å®šæ ¸å¿ƒæƒ³æ³•æ˜¯:è§†å›¾å’Œæ¨¡å‹æ˜¯å¯¹åº”çš„ï¼Œå½“æ•°æ®æ¨¡å‹å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå®ƒå¸Œæœ›è§†å›¾è‡ªåŠ¨æ›´æ–°ï¼Œå½“è§†å›¾å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ•°æ®æ¨¡å‹ä¹Ÿå‘ç”Ÿå˜åŒ–ã€‚è¿™ä¸­é—´éœ€è¦ä¸€ç§æ—¶é—´æœºåˆ¶ã€‚æ¯”å¦‚è¡¨å•ä¸­ï¼Œè§†å›¾ä¼šè‡ªåŠ¨å˜åŒ–ï¼Œå½“è¡¨å•çš„è§†å›¾å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±å¯ä»¥è‡ªåŠ¨ååº”åˆ°æ•°æ®æ¨¡å‹ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ã€‚ 12345&lt;body ng-app&gt; &lt;input type=\"text\" ng-model=\"textInput\"&gt; &lt;p&gt;&#123;&#123;textInput&#125;&#125;,hello&lt;/p&gt; &lt;script src=\"./js/angular-1.3.0.js\"&gt;&lt;/script&gt;&lt;/body&gt; åŒå¤§æ‹¬å·æ˜¯ç”¨æ¥å–å€¼çš„ã€‚å½“inputé‡Œé¢å‘ç”Ÿå˜åŒ–æ—¶ï¼Œng-modalçš„å€¼ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚ å…·ä½“çš„$scopeè§£é‡ŠangularJSçš„MVCéƒ½æ˜¯é€šè¿‡ä½œç”¨åŸŸ$scopeå®ç°çš„ã€‚çœ‹ä¸‹è¿™ä¸ª$scopeèƒ½å®ç°ä»€ä¹ˆã€‚ 1234567function GreetCtrl($scope,$rootScope)&#123; $scope.name = \"world\"; $root.department = \"Angular\";&#125;function ListCtrl($scope)&#123; $scope.names = [\"Igor\",\"Misko\",\"Vojta\"];&#125; è¿™é‡Œ$rootScopeå°±æ˜¯æ ¹ä½œç”¨åŸŸï¼Œæ•´ä¸ªçš„ä½œç”¨åŸŸå°±åƒä¸€ä¸ªæ ‘å½¢ç»“æ„ä¸€æ ·ã€‚12345678910&lt;div ng-controller=\"GreetCtrl\"&gt; Hello&#123;&#123;name&#125;&#125;&lt;/div&gt;&lt;div ng-controller=\"ListCtrl\"&gt; &lt;ol&gt; &lt;li ng-repeat = \"name in names\"&gt; &#123;&#123;name&#125;&#125; from &#123;&#123;department&#125;&#125; &lt;/li&gt; &lt;/ol&gt;&lt;/div&gt; è¿™é‡Œçš„departmentè™½ç„¶ä¸æ˜¯åœ¨ListCtrlä¸­å®šä¹‰çš„ï¼Œä½†ç”±äºæ˜¯å…¨å±€ä½œç”¨åŸŸï¼Œæ‰€ä»¥æ ¹ç›®å½•ä¸‹æ‰€æœ‰çš„æ¨¡å—éƒ½èƒ½è®¿é—®åˆ°ã€‚è·Ÿä½œç”¨åŸŸé“¾æœ‰ç‚¹åƒï¼Œå¦‚æœå†è‡ªå·±çš„$scopeé‡Œé¢æ²¡æœ‰ï¼Œå°±ä¸€ç›´å¾€ä¸Šæ‰¾ï¼Œä¸€ç›´åˆ°$rootScopeä¸ºæ­¢ã€‚ å¯ä»¥ç”¨æ’ä»¶æ¥çœ‹åˆ°$scopeçš„æ ‘å½¢ç»“æ„ã€‚ $scopeçš„ç”Ÿå‘½å‘¨æœŸé¦–å…ˆæ˜¯åˆ›å»ºä¸€ä¸ª$scopeï¼Œç„¶åæ˜¯æ³¨å†Œä¸€ä¸ªç›‘æ§ï¼Œç„¶åæ£€æµ‹æ¨¡å‹å˜åŒ–ï¼Œç„¶åè§‚å¯Ÿæ¨¡å‹ï¼Œæœ€åé”€æ¯ï¼ˆè‡ªåŠ¨æˆ–æ‰‹åŠ¨ï¼‰ã€‚","categories":[{"name":"WEBå¼€å‘","slug":"WEBå¼€å‘","permalink":"http://sevencai.github.io/categories/WEBå¼€å‘/"}],"tags":[{"name":"Angular","slug":"Angular","permalink":"http://sevencai.github.io/tags/Angular/"}]}]}