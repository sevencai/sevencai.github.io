<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.3">


  <link rel="mask-icon" href="/images/favicon.ico?v=5.1.3" color="#222">





  <meta name="keywords" content="ES6," />





  <link rel="alternate" href="/atom.xml" title="Seven's Blog" type="application/atom+xml" />






<meta name="description" content="前几天看小胡子哥的网站，发现这么一篇文章里面有下面这样一些代码，可以看到这段代码里面用了很多ES6的新特性，比如import,class,extends,static,for..of循环,还有下面要讲的Symbol。先前知道symbol但是一直没有去用过它，其实也并不知道到底有什么实质的作用，只知道是简单的创建唯一值。觉得是时候好好理解理解了。主要学习自阮一峰老师的书，es6入门。感谢阮老师。 1">
<meta name="keywords" content="ES6">
<meta property="og:type" content="article">
<meta property="og:title" content="ES6 Symbol ! Why ? How ? When ? ">
<meta property="og:url" content="http://sevencai.github.io/2016/08/01/ES6-Symbol-Why-How-When/index.html">
<meta property="og:site_name" content="Seven&#39;s Blog">
<meta property="og:description" content="前几天看小胡子哥的网站，发现这么一篇文章里面有下面这样一些代码，可以看到这段代码里面用了很多ES6的新特性，比如import,class,extends,static,for..of循环,还有下面要讲的Symbol。先前知道symbol但是一直没有去用过它，其实也并不知道到底有什么实质的作用，只知道是简单的创建唯一值。觉得是时候好好理解理解了。主要学习自阮一峰老师的书，es6入门。感谢阮老师。 1">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://cailidan.cn/images/butterfly-1970901_1280.jpg">
<meta property="og:updated_time" content="2017-01-11T12:47:59.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ES6 Symbol ! Why ? How ? When ? ">
<meta name="twitter:description" content="前几天看小胡子哥的网站，发现这么一篇文章里面有下面这样一些代码，可以看到这段代码里面用了很多ES6的新特性，比如import,class,extends,static,for..of循环,还有下面要讲的Symbol。先前知道symbol但是一直没有去用过它，其实也并不知道到底有什么实质的作用，只知道是简单的创建唯一值。觉得是时候好好理解理解了。主要学习自阮一峰老师的书，es6入门。感谢阮老师。 1">
<meta name="twitter:image" content="http://cailidan.cn/images/butterfly-1970901_1280.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.3',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: 'undefined',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://sevencai.github.io/2016/08/01/ES6-Symbol-Why-How-When/"/>





  <title>ES6 Symbol ! Why ? How ? When ?  | Seven's Blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?157d49c9f81aaca6e7af073620a0a709";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Seven's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Share, Learn, Enjoy, Keep</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sevencai.github.io/2016/08/01/ES6-Symbol-Why-How-When/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Seven Cai">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Seven's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ES6 Symbol ! Why ? How ? When ? </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-08-01T11:45:21+08:00">
                2016-08-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/WEB开发/" itemprop="url" rel="index">
                    <span itemprop="name">WEB开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/08/01/ES6-Symbol-Why-How-When/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/08/01/ES6-Symbol-Why-How-When/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="http://cailidan.cn/images/butterfly-1970901_1280.jpg" alt=""><br>前几天看<a href="http://www.barretlee.com/blog/2016/07/13/why-i-learning-es6/" target="_blank" rel="noopener">小胡子哥的网站</a>，发现这么一篇文章里面有下面这样一些代码，可以看到这段代码里面用了很多ES6的新特性，比如import,class,extends,static,for..of循环,还有下面要讲的<code>Symbol</code>。先前知道<code>symbol</code>但是一直没有去用过它，其实也并不知道到底有什么实质的作用，只知道是简单的创建唯一值。觉得是时候好好理解理解了。主要学习自<a href="http://es6.ruanyifeng.com/" target="_blank" rel="noopener">阮一峰老师的书</a>，es6入门。感谢阮老师。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Baz <span class="keyword">from</span> <span class="string">'bazGroup'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> <span class="keyword">extends</span> <span class="title">Baz</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> classMethod() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'hello'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">constructor</span>(...args) &#123;</span><br><span class="line">    <span class="keyword">this</span>.args = args;</span><br><span class="line">  &#125;</span><br><span class="line">  * [<span class="built_in">Symbol</span>.iterator]() &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> arg <span class="keyword">of</span> <span class="keyword">this</span>.args) &#123;</span><br><span class="line">      <span class="keyword">yield</span> arg;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span> <span class="keyword">extends</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> classMethod() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.classMethod() + <span class="string">', too'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Bar.classMethod();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> <span class="keyword">new</span> Foo(<span class="string">'hello'</span>, <span class="string">'world'</span>)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面从几个方面介绍：Symbol是什么？Symbol的出现原因？Symbol怎么用 ？Symbol有什么作用？</p>
<hr>
<h3 id="Symbol的出现"><a href="#Symbol的出现" class="headerlink" title="Symbol的出现"></a><strong>Symbol的出现</strong></h3><h4 id="Symbol是什么"><a href="#Symbol是什么" class="headerlink" title="Symbol是什么"></a><strong>Symbol是什么</strong></h4><p><strong>Symbol是ES6新引入的一种数据类型。它是JavaScript语言的第七种数据类型，前面6种是我们熟知的：Undefined、Null、布尔值（Boolean）、字符串（String）、数值（Number）、对象（Object）。</strong></p>
<p>抓住，第一它是一种新的数据类型，它不是字符串，也不是对象。第二是一种特殊的、不可变的数据类型，可以作为对象属性的标识符使用。</p>
<p>要注意一旦创建后就不可更改，不能对它们设置属性，在严格模式下尝试这样做，你将得到一个 报错得到TypeError。它们可以作为属性名，这时它们和字符串的属性名没有什么区别。<br>另一方面，每个 Symbol 都是独一无二的，不与其它 Symbol 重复（即便是使用相同的 Symbol 描述创建）。</p>
<p>我有看到一些书里说这里的Symbol和Lisp和Ruby里面的Symbol类似，但是不完全一样。他们解释说。在 Lisp 中，所有标识符都是 Symbol；在 JavaScript 中，标识符和大多数属性仍然是字符串，Symbol 只是提供了一个额外的选择。因为我没有用过Lisp和Ruby当然也就没有发言权了。23333</p>
<hr>
<h4 id="Symbol出现的原因"><a href="#Symbol出现的原因" class="headerlink" title="Symbol出现的原因"></a><strong>Symbol出现的原因</strong></h4><blockquote>
<p>ES5的对象属性名都是字符串，这容易造成属性名的冲突。比如，你使用了一个他人提供的对象，但又想为这个对象添加新的方法（mixin模式），新方法的名字就有可能与现有方法产生冲突。如果有一种机制，保证每个属性的名字都是独一无二的就好了，这样就从根本上防止属性名的冲突。这就是ES6引入Symbol的原因。 – from 阮一峰老师</p>
</blockquote>
<p>然后在stackoverflow-<a href="http://stackoverflow.com/questions/21724326/why-bring-symbols-to-javascript" target="_blank" rel="noopener">why-bring-symbols-to-javascript</a>上面也看到了一个解释，我觉得也很好，因为也告诉了我们，Symbol其实并不能完全的去保护成员变量的privacy,还告诉我们现在主要的用途就是unique。</p>
<blockquote>
<p>Enabling private properties, like kangax describes in his answer, was indeed the original motivation for introducing symbols into JavaScript.</p>
<p><strong>Unfortunately, however, they ended up being severely downgraded, and not private after all, because you can find them via reflection. Specifically, via the Object.getOwnPropertySymbols method and through proxies.</strong></p>
<p>They are now known as unique symbols, and their only use is to avoid name clashes between properties. For example, EcmaScript itself can now introduce extension hooks via certain methods you can put on objects (e.g. to define their iteration protocol) without running the risk of clashing with user names.</p>
<p>Whether that is strong enough a motivation to add symbols to the language is debatable.</p>
</blockquote>
<hr>
<h4 id="Symbol怎么用？"><a href="#Symbol怎么用？" class="headerlink" title="Symbol怎么用？"></a><strong>Symbol怎么用？</strong></h4><p>Symbol值通过Symbol函数生成，注意千万不要加new关键字，否则会报错。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//description 可选</span></span><br><span class="line"><span class="built_in">Symbol</span>([description])</span><br></pre></td></tr></table></figure>
<p>注意这里的description是可选的，字符串。<strong>注意【符号的描述（description）是用于调试的而不是访问符号本身】。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sym1 = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">var</span> sym2 = <span class="built_in">Symbol</span>(<span class="string">"foo"</span>);</span><br><span class="line"><span class="keyword">var</span> sym3 = <span class="built_in">Symbol</span>(<span class="string">"foo"</span>);</span><br></pre></td></tr></table></figure>
<p>由symbol生成的都是唯一的，所以当你去判断<code>sym2 == sym3</code>时，得到的是<code>false</code>,实际上，上面的三个值都是不相同的。那这个值到底是什么呢？当你试图去打印：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(sym1 === sym3); <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(sym2 === sym3);  <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(sym === sym3);  <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(sym2);   <span class="comment">// Symbol(foo)</span></span><br><span class="line"><span class="built_in">console</span>.log(sym1);   <span class="comment">//Symbol()</span></span><br></pre></td></tr></table></figure>
<p>虽然如果你单独打印sym2和sym3的时候，都会得到一个值：<code>Symbol(&#39;foo&#39;)</code>,看起来是相同的，但两个值已经由程序生成了两个完全不同的值。你可以去使用这些你生成的变量。而且不用担心会有重名问题。这就是这个Symbol最好的地方。</p>
<p>sym1和sym2/sym3除了值不一样，都是独一无二的，还有就是sym2/sym3多了一个描述，当你打印或者调试的时候就可以很清楚的知道是哪个symbol了。当然最好这个description不要一样了，否则你调试的时候回去怀疑到底是哪一个<code>Symbol</code>。</p>
<p>下面<code>typeof</code>运算符的结果，表明变量<code>sym2</code>是<code>Symbol</code>数据类型，而不是字符串之类的其他类型,是一种新的数据类型。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Symbol</span>())</span><br><span class="line"><span class="comment">// &lt;- 'symbol'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Symbol</span>(<span class="string">'foo'</span>))</span><br><span class="line"><span class="comment">// &lt;- 'symbol'</span></span><br></pre></td></tr></table></figure>
<p><strong>注意<code>Symbol</code>不能够与替他类型做运算,也就是不能强制转换，但是可以转换为<code>string</code>或者<code>bool</code>类型。</strong>但是不能转换为数字类型。转换为字符串当然都是得到的相同的结果。所以我们最好用<code>String/toString()</code>来转换。由于转换后的值相同，其实没有什么太大的用，是不是？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sym = <span class="built_in">Symbol</span>(<span class="string">'test'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">String</span>(sym) <span class="comment">// 'Symbol(test)'</span></span><br><span class="line">sym.toString() <span class="comment">// 'Symbol(test)'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sym = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="built_in">Boolean</span>(sym) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Number</span>(sym) <span class="comment">// TypeError: can't convert symbol to number</span></span><br><span class="line">sym - <span class="number">5</span>  <span class="comment">//TypeError: can't convert symbol to number</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Symbol的用途"><a href="#Symbol的用途" class="headerlink" title="Symbol的用途"></a><strong>Symbol的用途</strong></h3><h4 id="给对象添加唯一属性和方法"><a href="#给对象添加唯一属性和方法" class="headerlink" title="给对象添加唯一属性和方法"></a><strong>给对象添加唯一属性和方法</strong></h4><p><strong>由于每一个Symbol值都是不相等的，这意味着Symbol值可以作为标识符，用于对象的属性名，就能保证不会出现同名的属性。这对于一个对象由多个模块构成的情况非常有用，能防止某一个键被不小心改写或覆盖。</strong></p>
<p>也就是现在对象的属性名现在可以有两种类型，一种是原来就有的字符串，另一种就是新增的Symbol类型。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//直接在obj上添加key</span></span><br><span class="line"><span class="keyword">const</span> MY_KEY = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">obj[MY_KEY] = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj[MY_KEY]); <span class="comment">// 123</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在对象内部定义属性</span></span><br><span class="line"><span class="keyword">const</span> MY_KEY = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    [MY_KEY]: <span class="number">123</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在对象内部定义方法</span></span><br><span class="line"><span class="keyword">const</span> FOO = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    [FOO]() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'bar'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj[FOO]());</span><br></pre></td></tr></table></figure></p>
<p>这个过程发生了下面的事情：</p>
<ol>
<li><p>调用 Symbol() 方法将创建一个新的 Symbol 类型的值，并且该值不与其它任何值相等。</p>
</li>
<li><p>我们利用Symbol 类型的值可以作为对象的属性名，正是由于它不与任何其它值相等，对应的属性也不会发生冲突。</p>
</li>
<li><p><strong>和数组一样，我们只能通过[]来获得值，不能够通过<code>.</code> 点号来获取值</strong>。</p>
</li>
</ol>
<p>总结下：我们可以用下面几种方法来生成一个对象的唯一属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mySymbol = <span class="built_in">Symbol</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第一种写法</span></span><br><span class="line"><span class="keyword">var</span> a = &#123;&#125;;</span><br><span class="line">a[mySymbol] = <span class="string">'Hello!'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二种写法</span></span><br><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  [mySymbol]: <span class="string">'Hello!'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第三种写法</span></span><br><span class="line"><span class="keyword">var</span> a = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(a, mySymbol, &#123; <span class="attr">value</span>: <span class="string">'Hello!'</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以上写法都得到同样结果</span></span><br><span class="line">a[mySymbol] <span class="comment">// "Hello!"</span></span><br></pre></td></tr></table></figure>
<p>上面是定义属性，下面看看定义方法，其实是一模一样的。<br>要注意由于不能使用点运算符，所以在对象里定义属性的时候，也只能用方括号。所以你可以这样写：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="built_in">Symbol</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//普通方法</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  [s] : <span class="function"><span class="keyword">function</span>(<span class="params">args</span>) </span>&#123; <span class="comment">//... &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//或者这样写（对象增强）</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  [s](args)&#123; <span class="comment">//... &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//调用方法</span></span><br><span class="line">obj[s](<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//错误写法</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  s(args) &#123; <span class="comment">//... &#125;</span></span><br><span class="line">  s : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//... &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在最后一个错误写法中：如果s不放在方括号中，该属性的键名就是字符串s，而不是s所代表的那个Symbol值。<code>obj.s(args);</code>这就是把s当作一个普通的键名了。</p>
<hr>
<h4 id="Using-symbols-to-represent-concepts"><a href="#Using-symbols-to-represent-concepts" class="headerlink" title="Using symbols to represent concepts"></a><strong>Using symbols to represent concepts</strong></h4><p>这是第二种我们可以用Symbol的地方。比如一个人写了一个这样的代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> COLOR_RED    = <span class="string">'RED'</span>;</span><br><span class="line"><span class="keyword">var</span> COLOR_ORANGE = <span class="string">'ORANGE'</span>;</span><br><span class="line"><span class="keyword">var</span> COLOR_YELLOW = <span class="string">'YELLOW'</span>;</span><br><span class="line"><span class="keyword">var</span> COLOR_GREEN  = <span class="string">'GREEN'</span>;</span><br><span class="line"><span class="keyword">var</span> COLOR_BLUE   = <span class="string">'BLUE'</span>;</span><br><span class="line"><span class="keyword">var</span> COLOR_VIOLET = <span class="string">'VIOLET'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getComplement</span>(<span class="params">color</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (color) &#123;</span><br><span class="line">        <span class="keyword">case</span> COLOR_RED:</span><br><span class="line">            <span class="keyword">return</span> COLOR_GREEN;</span><br><span class="line">        <span class="keyword">case</span> COLOR_ORANGE:</span><br><span class="line">            <span class="keyword">return</span> COLOR_BLUE;</span><br><span class="line">        <span class="keyword">case</span> COLOR_YELLOW:</span><br><span class="line">            <span class="keyword">return</span> COLOR_VIOLET;</span><br><span class="line">        <span class="keyword">case</span> COLOR_GREEN:</span><br><span class="line">            <span class="keyword">return</span> COLOR_RED;</span><br><span class="line">        <span class="keyword">case</span> COLOR_BLUE:</span><br><span class="line">            <span class="keyword">return</span> COLOR_ORANGE;</span><br><span class="line">        <span class="keyword">case</span> COLOR_VIOLET:</span><br><span class="line">            <span class="keyword">return</span> COLOR_YELLOW;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">'Unknown color: '</span>+color);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>这样我们避免了hard-coding，也就是硬编码</strong>。防止我们每次都去改动函数中的’red’,’blue’，这之类的。但是这还是有问题，比如一个人：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> MOOD_BLUE = <span class="string">'BLUE'</span>;</span><br></pre></td></tr></table></figure></p>
<p>他又定义了上面一个颜色。那么这样以来switch的时候就会有重复的值了。就不太好。如果我们用Symbol可以很好的解决这个问题。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> COLOR_RED    = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">const</span> COLOR_ORANGE = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">const</span> COLOR_YELLOW = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">const</span> COLOR_GREEN  = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">const</span> COLOR_BLUE   = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">const</span> COLOR_VIOLET = <span class="built_in">Symbol</span>();</span><br></pre></td></tr></table></figure></p>
<p>这样以来，当我们使用Symbol而不是字符串的时候，我们再也不用去改动函数了。</p>
<hr>
<h4 id="Symbols-as-keys-of-internal-properties"><a href="#Symbols-as-keys-of-internal-properties" class="headerlink" title="Symbols as keys of internal properties"></a><strong>Symbols as keys of internal properties</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// One WeakMap per private property</span></span><br><span class="line">  <span class="keyword">const</span> PASSWORD = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Login</span> </span>&#123;</span><br><span class="line">      <span class="keyword">constructor</span>(name, password) &#123;</span><br><span class="line">          <span class="keyword">this</span>.name = name;</span><br><span class="line">     </span><br><span class="line">          PASSWORD.set(<span class="keyword">this</span>, password);</span><br><span class="line">      &#125;</span><br><span class="line">      hasPassword(pw) &#123;</span><br><span class="line">          <span class="keyword">return</span> PASSWORD.get(<span class="keyword">this</span>) === pw;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>符号不提供真正的隐私，因为它很容易找到对象的符号值的属性键。但是，保证一个属性密钥永远不会与任何其他属性密钥冲突往往是不够的。如果你真的想阻止外部访问私有数据，你需要使用WeakMaps或关闭。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PASSWORD = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Login</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name, password) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>[PASSWORD] = password;</span><br><span class="line">    &#125;</span><br><span class="line">    hasPassword(pw) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>[PASSWORD] === pw;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Symbol do not guarantee true privacy but can be used to separate public and internal properties of objects.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Pet = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Pet</span>(<span class="params">type</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.type = type;</span><br><span class="line">  &#125;</span><br><span class="line">  Pet.prototype.getType = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.type;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> Pet;</span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> Pet(<span class="string">'dog'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a.getType());<span class="comment">//Output: dog</span></span><br><span class="line">a.type = <span class="literal">null</span>;</span><br><span class="line"><span class="comment">//Modified outside</span></span><br><span class="line"><span class="built_in">console</span>.log(a.getType());<span class="comment">//Output: undefined</span></span><br></pre></td></tr></table></figure></p>
<p>上面的这个例子中type可以被外部所访问。一般我们的方法是通过闭包来解决。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Pet = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Pet</span>(<span class="params">type</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.getType = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> type;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> Pet;</span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> Pet(<span class="string">'dog'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(b.getType());<span class="comment">//dog</span></span><br><span class="line">b.type = <span class="literal">null</span>;</span><br><span class="line"><span class="comment">//Stays private</span></span><br><span class="line"><span class="built_in">console</span>.log(b.getType());<span class="comment">//dog</span></span><br></pre></td></tr></table></figure></p>
<p>现在如果我们通过symbol的话，就可以减少不必要的闭包。我们已经提到过很多次，symbol虽然不能够保证正真的隐私，但是可以将外部环境和内部环境分离。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Pet = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> typeSymbol = <span class="built_in">Symbol</span>(<span class="string">'type'</span>);</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Pet</span>(<span class="params">type</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>[typeSymbol] = type;</span><br><span class="line">  &#125;</span><br><span class="line">  Pet.prototype.getType = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>[typeSymbol];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> Pet;</span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> Pet(<span class="string">'dog'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a.getType());<span class="comment">//Output: dog</span></span><br><span class="line">a.type = <span class="literal">null</span>;</span><br><span class="line"><span class="comment">//stays private</span></span><br><span class="line"><span class="built_in">console</span>.log(a.getType());<span class="comment">//Output: dog</span></span><br></pre></td></tr></table></figure></p>
<p>Symbols are invisible to all “reflection” methods before ES6. This can be useful in some scenarios, but they’re not private by any stretch of imagination, as we’ve just demonstrated with the Object.getOwnPropertySymbols API.</p>
<p>上面学习自：<code>Samar Panda</code>来自<code>stackoverflow</code>的<a href="http://stackoverflow.com/questions/21724326/why-bring-symbols-to-javascript" target="_blank" rel="noopener">回答</a>。感谢。</p>
<hr>
<h3 id="几个重点的API"><a href="#几个重点的API" class="headerlink" title="几个重点的API"></a><strong>几个重点的API</strong></h3><p>使用Symbol() 函数 不会在你的整个代码库中创建一个可用的全局符号。 要创建跨文件可用的symbols，甚至跨域（每个都有它自己的全局作用域） , 使用这个方法Symbol.for() 和 Symbol.keyFor() 从全局symbol的注册处设置和取得symbols。</p>
<h4 id="Symbol-for-‘desc’"><a href="#Symbol-for-‘desc’" class="headerlink" title="Symbol.for(‘desc’)"></a><strong>Symbol.for(‘desc’)</strong></h4><p>Symbol.for为Symbol值登记的名字，是全局环境的，也就是说是全局共享的Symbol。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Symbol</span>.for(<span class="string">'foo'</span>) === <span class="built_in">Symbol</span>.for(<span class="string">'foo'</span>)         <span class="comment">//true</span></span><br><span class="line"><span class="built_in">Symbol</span>(<span class="string">'foo'</span>) === <span class="built_in">Symbol</span>(<span class="string">'foo'</span>)            <span class="comment">//false</span></span><br></pre></td></tr></table></figure></p>
<p>我们知道当我们每次调用Symbol的时候都会生成一个新的值，那如果我们想重用一个Symbol怎么办呢？Symbol.for方法可以做到这一点。它接受一个字符串作为参数，然后搜索有没有以该参数作为名称的Symbol值。如果有，就返回这个Symbol值，否则就新建并返回一个以该字符串为名称的Symbol值。</p>
<h4 id="Symbol-keyFor-‘desc’"><a href="#Symbol-keyFor-‘desc’" class="headerlink" title="Symbol.keyFor(‘desc’)"></a><strong>Symbol.keyFor(‘desc’)</strong></h4><p>Symbol.keyFor方法返回一个已登记的Symbol类型值的key。注意这里的desc必须是已经登记过了的，也就是一定要是用<code>Symbol.for</code>来声明的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sym1 = <span class="built_in">Symbol</span>.for(<span class="string">"foo"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Symbol</span>.keyFor(<span class="string">"foo"</span>));    <span class="comment">//"foo"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sym2 = <span class="built_in">Symbol</span>(<span class="string">"bar"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Symbol</span>.keyFor(<span class="string">"bar"</span>));  <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<p>上述代码中：变量sym2属于未登记的Symbol值，所以返回undefined。</p>
<h4 id="Symbol-iterator"><a href="#Symbol-iterator" class="headerlink" title="Symbol.iterator"></a><strong>Symbol.iterator</strong></h4><p>对象的Symbol.iterator属性，指向该对象的默认遍历器方法。对象进行for…of循环时，会调用Symbol.iterator方法，返回该对象的默认遍历器。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">       data: [ <span class="string">'hello'</span>, <span class="string">'world'</span> ],</span><br><span class="line">       [<span class="built_in">Symbol</span>.iterator]() &#123;</span><br><span class="line">           <span class="keyword">const</span> self = <span class="keyword">this</span>;</span><br><span class="line">           <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">           <span class="keyword">return</span> &#123;</span><br><span class="line">               next() &#123;</span><br><span class="line">                   <span class="keyword">if</span> (index &lt; self.data.length) &#123;</span><br><span class="line">                       <span class="keyword">return</span> &#123;</span><br><span class="line">                           value: self.data[index++]</span><br><span class="line">                       &#125;;</span><br><span class="line">                   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                       <span class="keyword">return</span> &#123; <span class="attr">done</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;;</span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> obj) &#123;</span><br><span class="line">       <span class="built_in">console</span>.log(x);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>An object is iterable if it has a method whose key is the symbol (stored in) Symbol.iterator.</p>
</blockquote>
<hr>
<h4 id="获取Symbol的方法"><a href="#获取Symbol的方法" class="headerlink" title="获取Symbol的方法"></a><strong>获取Symbol的方法</strong></h4><p>总结下获取Symbol的几种方法</p>
<ol>
<li>Symbol() 每次调用时都返回一个唯一的 Symbol。</li>
<li>Symbol.for(string) 从 Symbol 注册表中返回相应的 Symbol，与上个方法不同的是，Symbol 注册表中的 Symbol 是共享的。也就是说，如果你调用 Symbol.for(“cat”) 三次，都将返回相同的 Symbol。当不同页面或同一页面不同模块需要共享 Symbol 时，注册表就非常有用。</li>
<li>Symbol.iterator 返回语言预定义的一些 Symbol，每个都有其特殊的用途。</li>
</ol>
<p>这里需要知道一个很大的区别：</p>
<blockquote>
<p>Symbol.for()与Symbol()这两种写法，都会生成新的Symbol。它们的区别是，前者会被登记在全局环境中供搜索，后者不会。Symbol.for()不会每次调用就返回一个新的Symbol类型的值，而是会先检查给定的key是否已经存在，如果不存在才会新建一个值。比如，如果你调用Symbol.for(“cat”)30次，每次都会返回同一个Symbol值，但是调用Symbol(“cat”)30次，会返回30个不同的Symbol值。  –FROM RUAN YIFeng</p>
</blockquote>
<hr>
<h4 id="属性的遍历"><a href="#属性的遍历" class="headerlink" title="属性的遍历"></a><strong>属性的遍历</strong></h4><p><code>Symbol</code>作为属性名，该属性不会出现在<code>for...in、for...of</code>循环中，也不会被<code>Object.keys()、Object.getOwnPropertyNames()</code>返回。但是，它也不是私有属性，有一个<code>Object.getOwnPropertySymbols</code>方法，可以获取指定对象的所有Symbol属性名。</p>
<p><code>Object.getOwnPropertySymbols</code>方法返回一个数组，成员是当前对象的所有用作属性名的Symbol值。看看下面几个例子。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">  [<span class="built_in">Symbol</span>()]: <span class="string">'foo'</span>,</span><br><span class="line">  [<span class="built_in">Symbol</span>(<span class="string">'foo'</span>)]: <span class="string">'bar'</span>,</span><br><span class="line">  [<span class="built_in">Symbol</span>.for(<span class="string">'bar'</span>)]: <span class="string">'baz'</span>,</span><br><span class="line">  what: <span class="string">'ever'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log([...foo])</span><br><span class="line"><span class="comment">// &lt;- []</span></span><br></pre></td></tr></table></figure>
<p>Object.keys（）也是不行的。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(foo))</span><br><span class="line"><span class="comment">// &lt;- ['what']</span></span><br></pre></td></tr></table></figure></p>
<p>JSON.stringify（）是不行的。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(foo))</span><br><span class="line"><span class="comment">// &lt;- &#123;"what":"ever"&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>for in 可以吗？不可以<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> foo) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key)</span><br><span class="line">  <span class="comment">// &lt;- 'what'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>getOwnPropertyNames当然也不可以。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyNames(foo))</span><br><span class="line"><span class="comment">// &lt;- ['what']</span></span><br></pre></td></tr></table></figure></p>
<p>难道没有方法获得吗？如果认真看了前面我们说的，symbols是不会真正保护隐私，因为会有一个<code>getOwnPropertySymbols</code>的方法可以获得它们。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertySymbols(foo))</span><br><span class="line"><span class="comment">// &lt;- [Symbol(), Symbol('foo'), Symbol.for('bar')]</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> symbol <span class="keyword">of</span> <span class="built_in">Object</span>.getOwnPropertySymbols(foo)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(foo[symbol])</span><br><span class="line">  <span class="comment">// &lt;- 'foo'</span></span><br><span class="line">  <span class="comment">// &lt;- 'bar'</span></span><br><span class="line">  <span class="comment">// &lt;- 'baz'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>其实还有好多个symbol的API,到用到的时候再去查吧。基本上常用的就是上面那些。主要学到了symbol是什么，有什么用，可以用到什么地方。其实这新特性还是很好的。参考学习自下面几篇文章，感谢，也分享给大家。</p>
<ol>
<li><a href="http://es6.ruanyifeng.com/#docs/symbol" target="_blank" rel="noopener">http://es6.ruanyifeng.com/#docs/symbol</a></li>
<li><a href="https://ponyfoo.com/articles/es6-symbols-in-depth" target="_blank" rel="noopener">https://ponyfoo.com/articles/es6-symbols-in-depth</a></li>
<li><a href="http://stackoverflow.com/questions/21724326/why-bring-symbols-to-javascript" target="_blank" rel="noopener">why-bring-symbols-to-javascript</a></li>
</ol>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/ES6/" rel="tag"># ES6</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/07/14/koa中间件机制和错误处理解决方案/" rel="next" title="koa中间件机制和错误处理解决方案">
                <i class="fa fa-chevron-left"></i> koa中间件机制和错误处理解决方案
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/08/03/ES6-rest-parameters和spread-operator/" rel="prev" title="ES6 rest parameters和spread operator">
                ES6 rest parameters和spread operator <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Seven Cai</p>
              <p class="site-description motion-element" itemprop="description">Seven的博客，用于记录和分享生活和技术</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">119</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">23</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Symbol的出现"><span class="nav-number">1.</span> <span class="nav-text"><a href="#Symbol&#x7684;&#x51FA;&#x73B0;" class="headerlink" title="Symbol&#x7684;&#x51FA;&#x73B0;"></a><strong>Symbol&#x7684;&#x51FA;&#x73B0;</strong></span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Symbol是什么"><span class="nav-number">1.1.</span> <span class="nav-text"><a href="#Symbol&#x662F;&#x4EC0;&#x4E48;" class="headerlink" title="Symbol&#x662F;&#x4EC0;&#x4E48;"></a><strong>Symbol&#x662F;&#x4EC0;&#x4E48;</strong></span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Symbol出现的原因"><span class="nav-number">1.2.</span> <span class="nav-text"><a href="#Symbol&#x51FA;&#x73B0;&#x7684;&#x539F;&#x56E0;" class="headerlink" title="Symbol&#x51FA;&#x73B0;&#x7684;&#x539F;&#x56E0;"></a><strong>Symbol&#x51FA;&#x73B0;&#x7684;&#x539F;&#x56E0;</strong></span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Symbol怎么用？"><span class="nav-number">1.3.</span> <span class="nav-text"><a href="#Symbol&#x600E;&#x4E48;&#x7528;&#xFF1F;" class="headerlink" title="Symbol&#x600E;&#x4E48;&#x7528;&#xFF1F;"></a><strong>Symbol&#x600E;&#x4E48;&#x7528;&#xFF1F;</strong></span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Symbol的用途"><span class="nav-number">2.</span> <span class="nav-text"><a href="#Symbol&#x7684;&#x7528;&#x9014;" class="headerlink" title="Symbol&#x7684;&#x7528;&#x9014;"></a><strong>Symbol&#x7684;&#x7528;&#x9014;</strong></span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#给对象添加唯一属性和方法"><span class="nav-number">2.1.</span> <span class="nav-text"><a href="#&#x7ED9;&#x5BF9;&#x8C61;&#x6DFB;&#x52A0;&#x552F;&#x4E00;&#x5C5E;&#x6027;&#x548C;&#x65B9;&#x6CD5;" class="headerlink" title="&#x7ED9;&#x5BF9;&#x8C61;&#x6DFB;&#x52A0;&#x552F;&#x4E00;&#x5C5E;&#x6027;&#x548C;&#x65B9;&#x6CD5;"></a><strong>&#x7ED9;&#x5BF9;&#x8C61;&#x6DFB;&#x52A0;&#x552F;&#x4E00;&#x5C5E;&#x6027;&#x548C;&#x65B9;&#x6CD5;</strong></span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-symbols-to-represent-concepts"><span class="nav-number">2.2.</span> <span class="nav-text"><a href="#Using-symbols-to-represent-concepts" class="headerlink" title="Using symbols to represent concepts"></a><strong>Using symbols to represent concepts</strong></span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Symbols-as-keys-of-internal-properties"><span class="nav-number">2.3.</span> <span class="nav-text"><a href="#Symbols-as-keys-of-internal-properties" class="headerlink" title="Symbols as keys of internal properties"></a><strong>Symbols as keys of internal properties</strong></span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#几个重点的API"><span class="nav-number">3.</span> <span class="nav-text"><a href="#&#x51E0;&#x4E2A;&#x91CD;&#x70B9;&#x7684;API" class="headerlink" title="&#x51E0;&#x4E2A;&#x91CD;&#x70B9;&#x7684;API"></a><strong>&#x51E0;&#x4E2A;&#x91CD;&#x70B9;&#x7684;API</strong></span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Symbol-for-‘desc’"><span class="nav-number">3.1.</span> <span class="nav-text"><a href="#Symbol-for-&#x2018;desc&#x2019;" class="headerlink" title="Symbol.for(&#x2018;desc&#x2019;)"></a><strong>Symbol.for(&#x2018;desc&#x2019;)</strong></span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Symbol-keyFor-‘desc’"><span class="nav-number">3.2.</span> <span class="nav-text"><a href="#Symbol-keyFor-&#x2018;desc&#x2019;" class="headerlink" title="Symbol.keyFor(&#x2018;desc&#x2019;)"></a><strong>Symbol.keyFor(&#x2018;desc&#x2019;)</strong></span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Symbol-iterator"><span class="nav-number">3.3.</span> <span class="nav-text"><a href="#Symbol-iterator" class="headerlink" title="Symbol.iterator"></a><strong>Symbol.iterator</strong></span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取Symbol的方法"><span class="nav-number">3.4.</span> <span class="nav-text"><a href="#&#x83B7;&#x53D6;Symbol&#x7684;&#x65B9;&#x6CD5;" class="headerlink" title="&#x83B7;&#x53D6;Symbol&#x7684;&#x65B9;&#x6CD5;"></a><strong>&#x83B7;&#x53D6;Symbol&#x7684;&#x65B9;&#x6CD5;</strong></span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#属性的遍历"><span class="nav-number">3.5.</span> <span class="nav-text"><a href="#&#x5C5E;&#x6027;&#x7684;&#x904D;&#x5386;" class="headerlink" title="&#x5C5E;&#x6027;&#x7684;&#x904D;&#x5386;"></a><strong>&#x5C5E;&#x6027;&#x7684;&#x904D;&#x5386;</strong></span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#总结"><span class="nav-number">4.</span> <span class="nav-text"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a><strong>&#x603B;&#x7ED3;</strong></span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Seven Cai</span>

  
</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  

    
      <script id="dsq-count-scr" src="https://sevencai-github-io.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://sevencai.github.io/2016/08/01/ES6-Symbol-Why-How-When/';
          this.page.identifier = '2016/08/01/ES6-Symbol-Why-How-When/';
          this.page.title = 'ES6 Symbol ! Why ? How ? When ? ';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://sevencai-github-io.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  














  





  

  

  

  
  

  

  

  

</body>
</html>
